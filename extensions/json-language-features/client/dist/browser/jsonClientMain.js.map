{"version":3,"file":"jsonClientMain.js","mappings":"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","sources":["webpack:///../node_modules/vscode-languageclient/lib/common/protocolInlayHint.js","webpack:///../node_modules/vscode-languageclient/lib/common/formatting.js","webpack:///../node_modules/vscode-languageclient/lib/common/typeDefinition.js","webpack:///../node_modules/vscode-languageclient/lib/common/progress.js","webpack:///../node_modules/vscode-languageclient/lib/common/typeHierarchy.js","webpack:///../node_modules/vscode-jsonrpc/lib/browser/main.js","webpack:///../node_modules/vscode-languageclient/lib/common/rename.js","webpack:///../node_modules/@isaacs/brace-expansion/dist/commonjs/index.js","webpack:///../node_modules/vscode-languageclient/lib/common/documentLink.js","webpack:///../node_modules/vscode-languageclient/lib/common/client.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineValue.js","webpack:///../node_modules/vscode-languageclient/lib/common/documentHighlight.js","webpack:///../node_modules/vscode-jsonrpc/lib/browser/ril.js","webpack:///../node_modules/vscode-languageclient/lib/common/utils/is.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolWorkspaceSymbol.js","webpack:///external commonjs \"vscode\"","webpack:///../node_modules/vscode-languageclient/lib/common/semanticTokens.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolCodeLens.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/messageReader.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolCallHierarchyItem.js","webpack:///../node_modules/vscode-languageclient/lib/common/codeAction.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/browser/main.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/messageWriter.js","webpack:///../node_modules/vscode-languageclient/lib/common/linkedEditingRange.js","webpack:///../node_modules/vscode-languageclient/lib/common/api.js","webpack:///../node_modules/vscode-languageclient/lib/common/inlineCompletion.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.moniker.js","webpack:///../node_modules/vscode-languageclient/lib/common/executeCommand.js","webpack:///../node_modules/vscode-languageclient/lib/common/foldingRange.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolCodeAction.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/disposable.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolder.js","webpack:///../node_modules/@isaacs/balanced-match/dist/commonjs/index.js","webpack:///../node_modules/minimatch/dist/commonjs/index.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/api.js","webpack:///../node_modules/vscode-languageclient/lib/common/completion.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.js","webpack:///../node_modules/vscode-languageclient/lib/common/utils/globPattern.js","webpack:///../node_modules/vscode-languageclient/lib/browser/main.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.notebook.js","webpack:///../node_modules/vscode-languageclient/lib/common/workspaceSymbol.js","webpack:///../node_modules/vscode-languageclient/lib/common/codeLens.js","webpack:///../node_modules/minimatch/dist/commonjs/assert-valid-pattern.js","webpack:///../node_modules/vscode-languageclient/lib/common/definition.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolConverter.js","webpack:///../node_modules/vscode-languageclient/lib/common/signatureHelp.js","webpack:///../node_modules/minimatch/dist/commonjs/ast.js","webpack:///../node_modules/vscode-languageclient/lib/common/fileOperations.js","webpack:///../node_modules/vscode-languageclient/lib/common/hover.js","webpack:///../node_modules/vscode-languageclient/lib/common/configuration.js","webpack:///../node_modules/vscode-languageclient/lib/common/notebook.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.textDocumentContent.js","webpack:///../node_modules/vscode-languageclient/lib/common/codeConverter.js","webpack:///../node_modules/vscode-languageclient/lib/common/reference.js","webpack:///../node_modules/vscode-languageserver-types/lib/esm/main.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js","webpack:///./src/jsonClient.ts","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.diagnostic.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolCompletionItem.js","webpack:///./src/languageParticipants.ts","webpack:///../node_modules/vscode-jsonrpc/lib/common/cancellation.js","webpack:///./src/languageStatus.ts","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.inlayHint.js","webpack:///../node_modules/minimatch/dist/commonjs/unescape.js","webpack:///../node_modules/vscode-languageclient/lib/common/textDocumentContent.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/linkedMap.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolDiagnostic.js","webpack:///../node_modules/minimatch/dist/commonjs/escape.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/sharedArrayCancellation.js","webpack:///../node_modules/vscode-languageclient/lib/common/utils/async.js","webpack:///../node_modules/vscode-languageclient/lib/common/progressPart.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolTypeHierarchyItem.js","webpack:///./src/utils/hash.ts","webpack:///../node_modules/vscode-languageclient/lib/common/workspaceFolder.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.fileOperations.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/is.js","webpack:///../node_modules/vscode-languageclient/lib/common/fileSystemWatcher.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/events.js","webpack:///../node_modules/vscode-languageclient/lib/common/inlayHint.js","webpack:///../node_modules/minimatch/dist/commonjs/brace-expressions.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.js","webpack:///../node_modules/vscode-languageclient/lib/common/diagnostic.js","webpack:///../node_modules/vscode-languageclient/lib/common/selectionRange.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/messages.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolDocumentLink.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js","webpack:///../node_modules/vscode-languageclient/lib/common/colorProvider.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/connection.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/messageBuffer.js","webpack:///../node_modules/vscode-languageclient/lib/common/inlineValue.js","webpack:///../node_modules/vscode-languageclient/lib/common/implementation.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.typeHierarchy.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/connection.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/utils/is.js","webpack:///../node_modules/vscode-languageclient/lib/common/declaration.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/semaphore.js","webpack:///../node_modules/vscode-languageclient/lib/common/documentSymbol.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/messages.js","webpack:///../node_modules/vscode-languageclient/lib/common/callHierarchy.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineCompletion.js","webpack:///../node_modules/vscode-languageclient/lib/common/utils/uuid.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/ral.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.showDocument.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js","webpack:///../node_modules/vscode-languageclient/lib/common/textSynchronization.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.linkedEditingRange.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/api.js","webpack:///../node_modules/vscode-languageclient/lib/common/features.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/browser/jsonClientMain.ts"],"sourcesContent":["\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass ProtocolInlayHint extends code.InlayHint {\n    data;\n    constructor(position, label, kind) {\n        super(position, label, kind);\n    }\n}\nexports.default = ProtocolInlayHint;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentOnTypeFormattingFeature = exports.DocumentRangeFormattingFeature = exports.DocumentFormattingFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst features_1 = require(\"./features\");\nvar FileFormattingOptions;\n(function (FileFormattingOptions) {\n    function fromConfiguration(document) {\n        const filesConfig = vscode_1.workspace.getConfiguration('files', document);\n        return {\n            trimTrailingWhitespace: filesConfig.get('trimTrailingWhitespace'),\n            trimFinalNewlines: filesConfig.get('trimFinalNewlines'),\n            insertFinalNewline: filesConfig.get('insertFinalNewline'),\n        };\n    }\n    FileFormattingOptions.fromConfiguration = fromConfiguration;\n})(FileFormattingOptions || (FileFormattingOptions = {}));\nclass DocumentFormattingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'formatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentFormattingEdits: (document, options, token) => {\n                const client = this._client;\n                const provideDocumentFormattingEdits = (document, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentFormattingEdits\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\n                    : provideDocumentFormattingEdits(document, options, token);\n            }\n        };\n        return [vscode_1.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentFormattingFeature = DocumentFormattingFeature;\nclass DocumentRangeFormattingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'rangeFormatting');\n        capability.dynamicRegistration = true;\n        capability.rangesSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentRangeFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\n                const client = this._client;\n                const provideDocumentRangeFormattingEdits = (document, range, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(range),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentRangeFormattingEdits\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\n            }\n        };\n        if (options.rangesSupport) {\n            provider.provideDocumentRangesFormattingEdits = (document, ranges, options, token) => {\n                const client = this._client;\n                const provideDocumentRangesFormattingEdits = (document, ranges, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        ranges: client.code2ProtocolConverter.asRanges(ranges),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangesFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentRangesFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentRangesFormattingEdits\n                    ? middleware.provideDocumentRangesFormattingEdits(document, ranges, options, token, provideDocumentRangesFormattingEdits)\n                    : provideDocumentRangesFormattingEdits(document, ranges, options, token);\n            };\n        }\n        return [vscode_1.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentRangeFormattingFeature = DocumentRangeFormattingFeature;\nclass DocumentOnTypeFormattingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentOnTypeFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\n                const client = this._client;\n                const provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        position: client.code2ProtocolConverter.asPosition(position),\n                        ch: ch,\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideOnTypeFormattingEdits\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\n            }\n        };\n        const moreTriggerCharacter = options.moreTriggerCharacter || [];\n        return [vscode_1.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, options.firstTriggerCharacter, ...moreTriggerCharacter), provider];\n    }\n}\nexports.DocumentOnTypeFormattingFeature = DocumentOnTypeFormattingFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass TypeDefinitionFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\n        const typeDefinitionSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'typeDefinition');\n        typeDefinitionSupport.dynamicRegistration = true;\n        typeDefinitionSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.typeDefinitionProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideTypeDefinition: (document, position, token) => {\n                const client = this._client;\n                const provideTypeDefinition = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDefinitionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideTypeDefinition\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\n                    : provideTypeDefinition(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst progressPart_1 = require(\"./progressPart\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = Object.create(null);\n    }\n    return target[key];\n}\nclass ProgressFeature {\n    _client;\n    activeParts;\n    constructor(_client) {\n        this._client = _client;\n        this.activeParts = new Set();\n    }\n    getState() {\n        return { kind: 'window', id: vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.method, registrations: this.activeParts.size > 0 };\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(capabilities, 'window').workDoneProgress = true;\n    }\n    initialize() {\n        const client = this._client;\n        const deleteHandler = (part) => {\n            this.activeParts.delete(part);\n        };\n        const createHandler = (params) => {\n            this.activeParts.add(new progressPart_1.ProgressPart(this._client, params.token, deleteHandler));\n        };\n        client.onRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, createHandler);\n    }\n    clear() {\n        for (const part of this.activeParts) {\n            part.done();\n        }\n        this.activeParts.clear();\n    }\n}\nexports.ProgressFeature = ProgressFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchyFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass TypeHierarchyProvider {\n    client;\n    middleware;\n    constructor(client) {\n        this.client = client;\n        this.middleware = client.middleware;\n    }\n    prepareTypeHierarchy(document, position, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const prepareTypeHierarchy = (document, position, token) => {\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asTypeHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type, token, error, null);\n            });\n        };\n        return middleware.prepareTypeHierarchy\n            ? middleware.prepareTypeHierarchy(document, position, token, prepareTypeHierarchy)\n            : prepareTypeHierarchy(document, position, token);\n    }\n    provideTypeHierarchySupertypes(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideTypeHierarchySupertypes = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asTypeHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeHierarchySupertypesRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asTypeHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeHierarchySupertypesRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideTypeHierarchySupertypes\n            ? middleware.provideTypeHierarchySupertypes(item, token, provideTypeHierarchySupertypes)\n            : provideTypeHierarchySupertypes(item, token);\n    }\n    provideTypeHierarchySubtypes(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideTypeHierarchySubtypes = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asTypeHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeHierarchySubtypesRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asTypeHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeHierarchySubtypesRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideTypeHierarchySubtypes\n            ? middleware.provideTypeHierarchySubtypes(item, token, provideTypeHierarchySubtypes)\n            : provideTypeHierarchySubtypes(item, token);\n    }\n}\nclass TypeHierarchyFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'typeHierarchy');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.typeHierarchyProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const client = this._client;\n        const provider = new TypeHierarchyProvider(client);\n        return [vscode_1.languages.registerTypeHierarchyProvider(client.protocol2CodeConverter.asDocumentSelector(options.documentSelector), provider), provider];\n    }\n}\nexports.TypeHierarchyFeature = TypeHierarchyFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserMessageWriter = exports.BrowserMessageReader = void 0;\nexports.createMessageConnection = createMessageConnection;\nconst ril_1 = __importDefault(require(\"./ril\"));\n// Install the browser runtime abstract.\nril_1.default.install();\nconst api_1 = require(\"../common/api\");\n__exportStar(require(\"../common/api\"), exports);\nclass BrowserMessageReader extends api_1.AbstractMessageReader {\n    _onData;\n    _messageListener;\n    constructor(port) {\n        super();\n        this._onData = new api_1.Emitter();\n        this._messageListener = (event) => {\n            this._onData.fire(event.data);\n        };\n        port.addEventListener('error', (event) => this.fireError(event));\n        port.onmessage = this._messageListener;\n    }\n    listen(callback) {\n        return this._onData.event(callback);\n    }\n}\nexports.BrowserMessageReader = BrowserMessageReader;\nclass BrowserMessageWriter extends api_1.AbstractMessageWriter {\n    port;\n    errorCount;\n    constructor(port) {\n        super();\n        this.port = port;\n        this.errorCount = 0;\n        port.addEventListener('error', (event) => this.fireError(event));\n    }\n    write(msg) {\n        try {\n            this.port.postMessage(msg);\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.BrowserMessageWriter = BrowserMessageWriter;\nfunction createMessageConnection(reader, writer, logger, options) {\n    if (logger === undefined) {\n        logger = api_1.NullLogger;\n    }\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, api_1.createMessageConnection)(reader, writer, logger, options);\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RenameFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst Is = __importStar(require(\"./utils/is\"));\nconst features_1 = require(\"./features\");\nclass RenameFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const rename = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'rename');\n        rename.dynamicRegistration = true;\n        rename.prepareSupport = true;\n        rename.prepareSupportDefaultBehavior = vscode_languageserver_protocol_1.PrepareSupportDefaultBehavior.Identifier;\n        rename.honorsChangeAnnotations = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.renameProvider);\n        if (!options) {\n            return;\n        }\n        if (Is.boolean(capabilities.renameProvider)) {\n            options.prepareProvider = false;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideRenameEdits: (document, position, newName, token) => {\n                const client = this._client;\n                const provideRenameEdits = (document, position, newName, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        position: client.code2ProtocolConverter.asPosition(position),\n                        newName: newName\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asWorkspaceEdit(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, token, error, null, false);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideRenameEdits\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\n                    : provideRenameEdits(document, position, newName, token);\n            },\n            prepareRename: options.prepareProvider\n                ? (document, position, token) => {\n                    const client = this._client;\n                    const prepareRename = (document, position, token) => {\n                        const params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                            position: client.code2ProtocolConverter.asPosition(position),\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            if (vscode_languageserver_protocol_1.Range.is(result)) {\n                                return client.protocol2CodeConverter.asRange(result);\n                            }\n                            else if (this.isDefaultBehavior(result)) {\n                                return result.defaultBehavior === true\n                                    ? null\n                                    : Promise.reject(new Error(`The element can't be renamed.`));\n                            }\n                            else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\n                                return {\n                                    range: client.protocol2CodeConverter.asRange(result.range),\n                                    placeholder: result.placeholder\n                                };\n                            }\n                            // To cancel the rename vscode API expects a rejected promise.\n                            return Promise.reject(new Error(`The element can't be renamed.`));\n                        }, (error) => {\n                            if (typeof error.message === 'string') {\n                                throw new Error(error.message);\n                            }\n                            else {\n                                throw new Error(`The element can't be renamed.`);\n                            }\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.prepareRename\n                        ? middleware.prepareRename(document, position, token, prepareRename)\n                        : prepareRename(document, position, token);\n                }\n                : undefined\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n    isDefaultBehavior(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.defaultBehavior);\n    }\n}\nexports.RenameFeature = RenameFeature;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.expand = expand;\nconst balanced_match_1 = require(\"@isaacs/balanced-match\");\nconst escSlash = '\\0SLASH' + Math.random() + '\\0';\nconst escOpen = '\\0OPEN' + Math.random() + '\\0';\nconst escClose = '\\0CLOSE' + Math.random() + '\\0';\nconst escComma = '\\0COMMA' + Math.random() + '\\0';\nconst escPeriod = '\\0PERIOD' + Math.random() + '\\0';\nconst escSlashPattern = new RegExp(escSlash, 'g');\nconst escOpenPattern = new RegExp(escOpen, 'g');\nconst escClosePattern = new RegExp(escClose, 'g');\nconst escCommaPattern = new RegExp(escComma, 'g');\nconst escPeriodPattern = new RegExp(escPeriod, 'g');\nconst slashPattern = /\\\\\\\\/g;\nconst openPattern = /\\\\{/g;\nconst closePattern = /\\\\}/g;\nconst commaPattern = /\\\\,/g;\nconst periodPattern = /\\\\./g;\nfunction numeric(str) {\n    return !isNaN(str) ? parseInt(str, 10) : str.charCodeAt(0);\n}\nfunction escapeBraces(str) {\n    return str\n        .replace(slashPattern, escSlash)\n        .replace(openPattern, escOpen)\n        .replace(closePattern, escClose)\n        .replace(commaPattern, escComma)\n        .replace(periodPattern, escPeriod);\n}\nfunction unescapeBraces(str) {\n    return str\n        .replace(escSlashPattern, '\\\\')\n        .replace(escOpenPattern, '{')\n        .replace(escClosePattern, '}')\n        .replace(escCommaPattern, ',')\n        .replace(escPeriodPattern, '.');\n}\n/**\n * Basically just str.split(\",\"), but handling cases\n * where we have nested braced sections, which should be\n * treated as individual members, like {a,{b,c},d}\n */\nfunction parseCommaParts(str) {\n    if (!str) {\n        return [''];\n    }\n    const parts = [];\n    const m = (0, balanced_match_1.balanced)('{', '}', str);\n    if (!m) {\n        return str.split(',');\n    }\n    const { pre, body, post } = m;\n    const p = pre.split(',');\n    p[p.length - 1] += '{' + body + '}';\n    const postParts = parseCommaParts(post);\n    if (post.length) {\n        ;\n        p[p.length - 1] += postParts.shift();\n        p.push.apply(p, postParts);\n    }\n    parts.push.apply(parts, p);\n    return parts;\n}\nfunction expand(str) {\n    if (!str) {\n        return [];\n    }\n    // I don't know why Bash 4.3 does this, but it does.\n    // Anything starting with {} will have the first two bytes preserved\n    // but *only* at the top level, so {},a}b will not expand to anything,\n    // but a{},b}c will be expanded to [a}c,abc].\n    // One could argue that this is a bug in Bash, but since the goal of\n    // this module is to match Bash's rules, we escape a leading {}\n    if (str.slice(0, 2) === '{}') {\n        str = '\\\\{\\\\}' + str.slice(2);\n    }\n    return expand_(escapeBraces(str), true).map(unescapeBraces);\n}\nfunction embrace(str) {\n    return '{' + str + '}';\n}\nfunction isPadded(el) {\n    return /^-?0\\d/.test(el);\n}\nfunction lte(i, y) {\n    return i <= y;\n}\nfunction gte(i, y) {\n    return i >= y;\n}\nfunction expand_(str, isTop) {\n    /** @type {string[]} */\n    const expansions = [];\n    const m = (0, balanced_match_1.balanced)('{', '}', str);\n    if (!m)\n        return [str];\n    // no need to expand pre, since it is guaranteed to be free of brace-sets\n    const pre = m.pre;\n    const post = m.post.length ? expand_(m.post, false) : [''];\n    if (/\\$$/.test(m.pre)) {\n        for (let k = 0; k < post.length; k++) {\n            const expansion = pre + '{' + m.body + '}' + post[k];\n            expansions.push(expansion);\n        }\n    }\n    else {\n        const isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n        const isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n        const isSequence = isNumericSequence || isAlphaSequence;\n        const isOptions = m.body.indexOf(',') >= 0;\n        if (!isSequence && !isOptions) {\n            // {a},b}\n            if (m.post.match(/,(?!,).*\\}/)) {\n                str = m.pre + '{' + m.body + escClose + m.post;\n                return expand_(str);\n            }\n            return [str];\n        }\n        let n;\n        if (isSequence) {\n            n = m.body.split(/\\.\\./);\n        }\n        else {\n            n = parseCommaParts(m.body);\n            if (n.length === 1 && n[0] !== undefined) {\n                // x{{a,b}}y ==> x{a}y x{b}y\n                n = expand_(n[0], false).map(embrace);\n                //XXX is this necessary? Can't seem to hit it in tests.\n                /* c8 ignore start */\n                if (n.length === 1) {\n                    return post.map(p => m.pre + n[0] + p);\n                }\n                /* c8 ignore stop */\n            }\n        }\n        // at this point, n is the parts, and we know it's not a comma set\n        // with a single entry.\n        let N;\n        if (isSequence && n[0] !== undefined && n[1] !== undefined) {\n            const x = numeric(n[0]);\n            const y = numeric(n[1]);\n            const width = Math.max(n[0].length, n[1].length);\n            let incr = n.length === 3 && n[2] !== undefined ? Math.abs(numeric(n[2])) : 1;\n            let test = lte;\n            const reverse = y < x;\n            if (reverse) {\n                incr *= -1;\n                test = gte;\n            }\n            const pad = n.some(isPadded);\n            N = [];\n            for (let i = x; test(i, y); i += incr) {\n                let c;\n                if (isAlphaSequence) {\n                    c = String.fromCharCode(i);\n                    if (c === '\\\\') {\n                        c = '';\n                    }\n                }\n                else {\n                    c = String(i);\n                    if (pad) {\n                        const need = width - c.length;\n                        if (need > 0) {\n                            const z = new Array(need + 1).join('0');\n                            if (i < 0) {\n                                c = '-' + z + c.slice(1);\n                            }\n                            else {\n                                c = z + c;\n                            }\n                        }\n                    }\n                }\n                N.push(c);\n            }\n        }\n        else {\n            N = [];\n            for (let j = 0; j < n.length; j++) {\n                N.push.apply(N, expand_(n[j], false));\n            }\n        }\n        for (let j = 0; j < N.length; j++) {\n            for (let k = 0; k < post.length; k++) {\n                const expansion = pre + N[j] + post[k];\n                if (!isTop || isSequence || expansion) {\n                    expansions.push(expansion);\n                }\n            }\n        }\n    }\n    return expansions;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentLinkFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass DocumentLinkFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const documentLinkCapabilities = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'documentLink');\n        documentLinkCapabilities.dynamicRegistration = true;\n        documentLinkCapabilities.tooltipSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentLinkProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentLinks: (document, token) => {\n                const client = this._client;\n                const provideDocumentLinks = (document, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDocumentLinks(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentLinks\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\n                    : provideDocumentLinks(document, token);\n            },\n            resolveDocumentLink: options.resolveProvider\n                ? (link, token) => {\n                    const client = this._client;\n                    const resolveDocumentLink = (link, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return link;\n                            }\n                            return client.protocol2CodeConverter.asDocumentLink(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, token, error, link);\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.resolveDocumentLink\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\n                        : resolveDocumentLink(link, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentLinkFeature = DocumentLinkFeature;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProposedFeatures = exports.LanguageClient = exports.BaseLanguageClient = exports.ShutdownMode = exports.MessageTransports = exports.SuspendMode = exports.State = exports.CloseAction = exports.ErrorAction = exports.RevealOutputChannelOn = void 0;\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst c2p = __importStar(require(\"./codeConverter\"));\nconst p2c = __importStar(require(\"./protocolConverter\"));\nconst Is = __importStar(require(\"./utils/is\"));\nconst async_1 = require(\"./utils/async\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst progressPart_1 = require(\"./progressPart\");\nconst features_1 = require(\"./features\");\nconst diagnostic_1 = require(\"./diagnostic\");\nconst notebook_1 = require(\"./notebook\");\nconst configuration_1 = require(\"./configuration\");\nconst textSynchronization_1 = require(\"./textSynchronization\");\nconst completion_1 = require(\"./completion\");\nconst hover_1 = require(\"./hover\");\nconst definition_1 = require(\"./definition\");\nconst signatureHelp_1 = require(\"./signatureHelp\");\nconst documentHighlight_1 = require(\"./documentHighlight\");\nconst documentSymbol_1 = require(\"./documentSymbol\");\nconst workspaceSymbol_1 = require(\"./workspaceSymbol\");\nconst reference_1 = require(\"./reference\");\nconst typeDefinition_1 = require(\"./typeDefinition\");\nconst implementation_1 = require(\"./implementation\");\nconst colorProvider_1 = require(\"./colorProvider\");\nconst codeAction_1 = require(\"./codeAction\");\nconst codeLens_1 = require(\"./codeLens\");\nconst formatting_1 = require(\"./formatting\");\nconst rename_1 = require(\"./rename\");\nconst documentLink_1 = require(\"./documentLink\");\nconst executeCommand_1 = require(\"./executeCommand\");\nconst foldingRange_1 = require(\"./foldingRange\");\nconst declaration_1 = require(\"./declaration\");\nconst selectionRange_1 = require(\"./selectionRange\");\nconst callHierarchy_1 = require(\"./callHierarchy\");\nconst semanticTokens_1 = require(\"./semanticTokens\");\nconst linkedEditingRange_1 = require(\"./linkedEditingRange\");\nconst typeHierarchy_1 = require(\"./typeHierarchy\");\nconst inlineValue_1 = require(\"./inlineValue\");\nconst inlayHint_1 = require(\"./inlayHint\");\nconst workspaceFolder_1 = require(\"./workspaceFolder\");\nconst fileOperations_1 = require(\"./fileOperations\");\nconst inlineCompletion_1 = require(\"./inlineCompletion\");\nconst textDocumentContent_1 = require(\"./textDocumentContent\");\nconst fileSystemWatcher_1 = require(\"./fileSystemWatcher\");\nconst progress_1 = require(\"./progress\");\n/**\n * Controls when the output channel is revealed.\n */\nvar RevealOutputChannelOn;\n(function (RevealOutputChannelOn) {\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Debug\"] = 0] = \"Debug\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\n})(RevealOutputChannelOn || (exports.RevealOutputChannelOn = RevealOutputChannelOn = {}));\n/**\n * An action to be performed when the connection is producing errors.\n */\nvar ErrorAction;\n(function (ErrorAction) {\n    /**\n     * Continue running the server.\n     */\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\n    /**\n     * Shutdown the server.\n     */\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\n})(ErrorAction || (exports.ErrorAction = ErrorAction = {}));\n/**\n * An action to be performed when the connection to a server got closed.\n */\nvar CloseAction;\n(function (CloseAction) {\n    /**\n     * Don't restart the server. The connection stays closed.\n     */\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\n    /**\n     * Restart the server.\n     */\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\n})(CloseAction || (exports.CloseAction = CloseAction = {}));\n/**\n * Signals in which state the language client is in.\n */\nvar State;\n(function (State) {\n    /**\n     * The client is stopped or got never started.\n     */\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\n    /**\n     * The client is starting but not ready yet.\n     */\n    State[State[\"Starting\"] = 3] = \"Starting\";\n    /**\n     * The start has failed.\n     */\n    State[State[\"StartFailed\"] = 4] = \"StartFailed\";\n    /**\n     * The client is running and ready.\n     */\n    State[State[\"Running\"] = 2] = \"Running\";\n})(State || (exports.State = State = {}));\nvar SuspendMode;\n(function (SuspendMode) {\n    /**\n     * Don't allow suspend mode.\n     */\n    SuspendMode[\"off\"] = \"off\";\n    /**\n     * Support suspend mode even if not all\n     * registered providers have a corresponding\n     * activation listener.\n     */\n    SuspendMode[\"on\"] = \"on\";\n})(SuspendMode || (exports.SuspendMode = SuspendMode = {}));\nvar ResolvedClientOptions;\n(function (ResolvedClientOptions) {\n    function sanitizeIsTrusted(isTrusted) {\n        if (isTrusted === undefined || isTrusted === null) {\n            return false;\n        }\n        if ((typeof isTrusted === 'boolean') || (typeof isTrusted === 'object' && isTrusted !== null && Is.stringArray(isTrusted.enabledCommands))) {\n            return isTrusted;\n        }\n        return false;\n    }\n    ResolvedClientOptions.sanitizeIsTrusted = sanitizeIsTrusted;\n})(ResolvedClientOptions || (ResolvedClientOptions = {}));\nclass DefaultErrorHandler {\n    client;\n    maxRestartCount;\n    restarts;\n    constructor(client, maxRestartCount) {\n        this.client = client;\n        this.maxRestartCount = maxRestartCount;\n        this.restarts = [];\n    }\n    error(_error, _message, count) {\n        if (count && count <= 3) {\n            return { action: ErrorAction.Continue };\n        }\n        return { action: ErrorAction.Shutdown };\n    }\n    closed() {\n        this.restarts.push(Date.now());\n        if (this.restarts.length <= this.maxRestartCount) {\n            return { action: CloseAction.Restart };\n        }\n        else {\n            const diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\n            if (diff <= 3 * 60 * 1000) {\n                return { action: CloseAction.DoNotRestart, message: `The ${this.client.name} server crashed ${this.maxRestartCount + 1} times in the last 3 minutes. The server will not be restarted. See the output for more information.` };\n            }\n            else {\n                this.restarts.shift();\n                return { action: CloseAction.Restart };\n            }\n        }\n    }\n}\nvar ClientState;\n(function (ClientState) {\n    ClientState[\"Initial\"] = \"initial\";\n    ClientState[\"Starting\"] = \"starting\";\n    ClientState[\"StartFailed\"] = \"startFailed\";\n    ClientState[\"Running\"] = \"running\";\n    ClientState[\"Stopping\"] = \"stopping\";\n    ClientState[\"Stopped\"] = \"stopped\";\n})(ClientState || (ClientState = {}));\nvar MessageTransports;\n(function (MessageTransports) {\n    function is(value) {\n        const candidate = value;\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\n    }\n    MessageTransports.is = is;\n})(MessageTransports || (exports.MessageTransports = MessageTransports = {}));\nvar ShutdownMode;\n(function (ShutdownMode) {\n    ShutdownMode[\"Restart\"] = \"restart\";\n    ShutdownMode[\"Stop\"] = \"stop\";\n})(ShutdownMode || (exports.ShutdownMode = ShutdownMode = {}));\n/**\n * Manages the open tabs. We don't directly use the tab API since for\n * diagnostics we need to de-dupe tabs that show the same resources since\n * we pull on the model not the UI.\n */\nclass Tabs {\n    open;\n    _onOpen;\n    _onClose;\n    disposable;\n    constructor() {\n        this.open = new Set();\n        this._onOpen = new vscode_1.EventEmitter();\n        this._onClose = new vscode_1.EventEmitter();\n        Tabs.fillTabResources(this.open);\n        const openTabsHandler = (event) => {\n            if (event.closed.length === 0 && event.opened.length === 0) {\n                return;\n            }\n            const oldTabs = this.open;\n            const currentTabs = new Set();\n            Tabs.fillTabResources(currentTabs);\n            const closed = new Set();\n            const opened = new Set(currentTabs);\n            for (const tab of oldTabs.values()) {\n                if (currentTabs.has(tab)) {\n                    opened.delete(tab);\n                }\n                else {\n                    closed.add(tab);\n                }\n            }\n            this.open = currentTabs;\n            if (closed.size > 0) {\n                const toFire = new Set();\n                for (const item of closed) {\n                    toFire.add(vscode_1.Uri.parse(item));\n                }\n                this._onClose.fire(toFire);\n            }\n            if (opened.size > 0) {\n                const toFire = new Set();\n                for (const item of opened) {\n                    toFire.add(vscode_1.Uri.parse(item));\n                }\n                this._onOpen.fire(toFire);\n            }\n        };\n        if (vscode_1.window.tabGroups.onDidChangeTabs !== undefined) {\n            this.disposable = vscode_1.window.tabGroups.onDidChangeTabs(openTabsHandler);\n        }\n        else {\n            this.disposable = { dispose: () => { } };\n        }\n    }\n    get onClose() {\n        return this._onClose.event;\n    }\n    get onOpen() {\n        return this._onOpen.event;\n    }\n    dispose() {\n        this.disposable.dispose();\n    }\n    isActive(document) {\n        return document instanceof vscode_1.Uri\n            ? vscode_1.window.activeTextEditor?.document.uri === document\n            : vscode_1.window.activeTextEditor?.document === document;\n    }\n    isVisible(document) {\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        if (uri.scheme === notebook_1.NotebookDocumentSyncFeature.CellScheme) {\n            // Notebook cells aren't in the list of tabs, but the notebook should be.\n            return vscode_1.workspace.notebookDocuments.some(notebook => {\n                if (this.open.has(notebook.uri.toString())) {\n                    const cell = notebook.getCells().find(cell => cell.document.uri.toString() === uri.toString());\n                    return cell !== undefined;\n                }\n                return false;\n            });\n        }\n        return this.open.has(uri.toString());\n    }\n    getTabResources() {\n        const result = new Set();\n        Tabs.fillTabResources(new Set(), result);\n        return result;\n    }\n    static fillTabResources(strings, uris) {\n        const seen = strings ?? new Set();\n        for (const group of vscode_1.window.tabGroups.all) {\n            for (const tab of group.tabs) {\n                const input = tab.input;\n                let uri;\n                if (input instanceof vscode_1.TabInputText) {\n                    uri = input.uri;\n                }\n                else if (input instanceof vscode_1.TabInputTextDiff) {\n                    uri = input.modified;\n                }\n                else if (input instanceof vscode_1.TabInputCustom) {\n                    uri = input.uri;\n                }\n                else if (input instanceof vscode_1.TabInputNotebook) {\n                    uri = input.uri;\n                }\n                if (uri !== undefined && !seen.has(uri.toString())) {\n                    seen.add(uri.toString());\n                    uris !== undefined && uris.add(uri);\n                }\n            }\n        }\n    }\n}\nclass BaseLanguageClient {\n    _id;\n    _name;\n    _clientOptions;\n    _state;\n    _onStart;\n    _onStop;\n    _connection;\n    _idleInterval;\n    _ignoredRegistrations;\n    // private _idleStart: number | undefined;\n    _listeners;\n    _disposed;\n    _notificationHandlers;\n    _notificationDisposables;\n    _pendingNotificationHandlers;\n    _requestHandlers;\n    _requestDisposables;\n    _pendingRequestHandlers;\n    _progressHandlers;\n    _pendingProgressHandlers;\n    _progressDisposables;\n    _initializeResult;\n    _outputChannel;\n    _disposeOutputChannel;\n    _traceOutputChannel;\n    _traceLogLevel;\n    _capabilities;\n    _diagnostics;\n    _syncedDocuments;\n    _didChangeTextDocumentFeature;\n    _inFlightOpenNotifications;\n    _pendingChangeSemaphore;\n    _pendingChangeDelayer;\n    _didOpenTextDocumentFeature;\n    _fileEvents;\n    _fileEventDelayer;\n    _telemetryEmitter;\n    _stateChangeEmitter;\n    _trace;\n    _traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\n    _tracer;\n    _c2p;\n    _p2c;\n    _tabsModel;\n    constructor(id, name, clientOptions) {\n        this._id = id;\n        this._name = name;\n        clientOptions = clientOptions || {};\n        const markdown = {\n            isTrusted: false,\n            supportHtml: false,\n            supportThemeIcons: false\n        };\n        if (clientOptions.markdown !== undefined) {\n            markdown.isTrusted = ResolvedClientOptions.sanitizeIsTrusted(clientOptions.markdown.isTrusted);\n            markdown.supportHtml = clientOptions.markdown.supportHtml === true;\n            markdown.supportThemeIcons = clientOptions.markdown.supportThemeIcons === true;\n        }\n        // const defaultInterval = (clientOptions as TestOptions).$testMode ? 50 : 60000;\n        this._clientOptions = {\n            documentSelector: clientOptions.documentSelector ?? [],\n            synchronize: clientOptions.synchronize ?? {},\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\n            outputChannelName: clientOptions.outputChannelName ?? this._name,\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn ?? RevealOutputChannelOn.Error,\n            stdioEncoding: clientOptions.stdioEncoding ?? 'utf8',\n            initializationOptions: clientOptions.initializationOptions,\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\n            progressOnInitialization: !!clientOptions.progressOnInitialization,\n            errorHandler: clientOptions.errorHandler ?? this.createDefaultErrorHandler(clientOptions.connectionOptions?.maxRestartCount),\n            middleware: clientOptions.middleware ?? {},\n            uriConverters: clientOptions.uriConverters,\n            workspaceFolder: clientOptions.workspaceFolder,\n            connectionOptions: clientOptions.connectionOptions,\n            markdown,\n            // suspend: {\n            // \tmode: clientOptions.suspend?.mode ?? SuspendMode.off,\n            // \tcallback: clientOptions.suspend?.callback ?? (() => Promise.resolve(true)),\n            // \tinterval: clientOptions.suspend?.interval ? Math.max(clientOptions.suspend.interval, defaultInterval) : defaultInterval\n            // },\n            diagnosticPullOptions: clientOptions.diagnosticPullOptions ?? { onChange: true, onSave: false },\n            notebookDocumentOptions: clientOptions.notebookDocumentOptions ?? {},\n            textSynchronization: this.createTextSynchronizationOptions(clientOptions.textSynchronization)\n        };\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\n        this._state = ClientState.Initial;\n        this._ignoredRegistrations = new Set();\n        this._listeners = [];\n        this._notificationHandlers = new Map();\n        this._pendingNotificationHandlers = new Map();\n        this._notificationDisposables = new Map();\n        this._requestHandlers = new Map();\n        this._pendingRequestHandlers = new Map();\n        this._requestDisposables = new Map();\n        this._progressHandlers = new Map();\n        this._pendingProgressHandlers = new Map();\n        this._progressDisposables = new Map();\n        this._connection = undefined;\n        // this._idleStart = undefined;\n        this._initializeResult = undefined;\n        if (clientOptions.outputChannel) {\n            this._outputChannel = clientOptions.outputChannel;\n            this._disposeOutputChannel = false;\n            this._traceLogLevel = this._outputChannel.logLevel;\n        }\n        else {\n            this._outputChannel = undefined;\n            this._disposeOutputChannel = true;\n            this._traceLogLevel = vscode_1.LogLevel.Info;\n        }\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\n        if (this._traceOutputChannel !== undefined) {\n            this._traceLogLevel = this._traceOutputChannel.logLevel;\n        }\n        this._diagnostics = undefined;\n        this._inFlightOpenNotifications = new Set();\n        this._pendingChangeSemaphore = new async_1.Semaphore(1);\n        this._pendingChangeDelayer = new async_1.Delayer(250);\n        this._fileEvents = [];\n        this._fileEventDelayer = new async_1.Delayer(250);\n        this._onStop = undefined;\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\n        this._trace = vscode_languageserver_protocol_1.Trace.Off;\n        this._tracer = {\n            log: (messageOrDataObject, data) => {\n                if (Is.string(messageOrDataObject)) {\n                    this.trace(messageOrDataObject, data);\n                }\n                else {\n                    this.traceObject(messageOrDataObject);\n                }\n            },\n        };\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined, this._clientOptions.markdown.isTrusted, this._clientOptions.markdown.supportHtml, this._clientOptions.markdown.supportThemeIcons);\n        this._syncedDocuments = new Map();\n        this.registerBuiltinFeatures();\n    }\n    createTextSynchronizationOptions(options) {\n        if (!options) {\n            return { delayOpenNotifications: false };\n        }\n        if (typeof options.delayOpenNotifications === 'boolean') {\n            return { delayOpenNotifications: options.delayOpenNotifications };\n        }\n        return { delayOpenNotifications: false };\n    }\n    get name() {\n        return this._name;\n    }\n    get middleware() {\n        return this._clientOptions.middleware ?? Object.create(null);\n    }\n    get clientOptions() {\n        return this._clientOptions;\n    }\n    get protocol2CodeConverter() {\n        return this._p2c;\n    }\n    get code2ProtocolConverter() {\n        return this._c2p;\n    }\n    get tabsModel() {\n        if (this._tabsModel === undefined) {\n            this._tabsModel = new Tabs();\n        }\n        return this._tabsModel;\n    }\n    get onTelemetry() {\n        return this._telemetryEmitter.event;\n    }\n    get onDidChangeState() {\n        return this._stateChangeEmitter.event;\n    }\n    get outputChannel() {\n        if (!this._outputChannel) {\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name, { log: true });\n            if (this._traceOutputChannel === undefined) {\n                this._traceLogLevel = this._outputChannel.logLevel;\n            }\n        }\n        return this._outputChannel;\n    }\n    get traceOutputChannel() {\n        return this._traceOutputChannel ? this._traceOutputChannel : this.outputChannel;\n    }\n    get diagnostics() {\n        return this._diagnostics;\n    }\n    get state() {\n        return this.getPublicState();\n    }\n    get $state() {\n        return this._state;\n    }\n    set $state(value) {\n        const oldState = this.getPublicState();\n        this._state = value;\n        const newState = this.getPublicState();\n        if (newState !== oldState) {\n            this._stateChangeEmitter.fire({ oldState, newState });\n        }\n    }\n    getPublicState() {\n        switch (this.$state) {\n            case ClientState.Starting:\n                return State.Starting;\n            case ClientState.Running:\n                return State.Running;\n            case ClientState.StartFailed:\n                return State.StartFailed;\n            default:\n                return State.Stopped;\n        }\n    }\n    get initializeResult() {\n        return this._initializeResult;\n    }\n    async sendRequest(type, ...params) {\n        if (this.$state === ClientState.StartFailed || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive, `Client is not running`));\n        }\n        // Ensure we have a connection before we force the document sync.\n        const connection = await this.$start();\n        // Send ony depending open notifications\n        await this._didOpenTextDocumentFeature.sendPendingOpenNotifications();\n        // If any document is synced in full mode make sure we flush any pending\n        // full document syncs.\n        if (this._didChangeTextDocumentFeature.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n            await this.sendPendingFullTextDocumentChanges(connection);\n        }\n        let param = undefined;\n        let token = undefined;\n        // Separate cancellation tokens from other parameters for a better client interface\n        if (params.length === 1) {\n            // CancellationToken is an interface, so we need to check if the first param complies to it\n            if (vscode_languageserver_protocol_1.CancellationToken.is(params[0])) {\n                token = params[0];\n            }\n            else {\n                param = params[0];\n            }\n        }\n        else if (params.length === 2) {\n            param = params[0];\n            token = params[1];\n        }\n        if (token !== undefined && token.isCancellationRequested) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.LSPErrorCodes.RequestCancelled, 'Request got cancelled'));\n        }\n        const _sendRequest = this._clientOptions.middleware?.sendRequest;\n        if (_sendRequest !== undefined) {\n            // Return the general middleware invocation defining `next` as a utility function that reorganizes parameters to\n            // pass them to the original sendRequest function.\n            return _sendRequest(type, param, token, (type, param, token) => {\n                const params = [];\n                // Add the parameters if there are any\n                if (param !== undefined) {\n                    params.push(param);\n                }\n                // Add the cancellation token if there is one\n                if (token !== undefined) {\n                    params.push(token);\n                }\n                return connection.sendRequest(type, ...params);\n            });\n        }\n        else {\n            return connection.sendRequest(type, ...params);\n        }\n    }\n    onRequest(type, handler) {\n        const method = typeof type === 'string' ? type : type.method;\n        this._requestHandlers.set(method, handler);\n        const connection = this.activeConnection();\n        let disposable;\n        if (connection !== undefined) {\n            this._requestDisposables.set(method, connection.onRequest(type, handler));\n            disposable = {\n                dispose: () => {\n                    const disposable = this._requestDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._requestDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        else {\n            this._pendingRequestHandlers.set(method, handler);\n            disposable = {\n                dispose: () => {\n                    this._pendingRequestHandlers.delete(method);\n                    const disposable = this._requestDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._requestDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        return {\n            dispose: () => {\n                this._requestHandlers.delete(method);\n                disposable.dispose();\n            }\n        };\n    }\n    async sendNotification(type, params) {\n        if (this.$state === ClientState.StartFailed || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive, `Client is not running`));\n        }\n        const needsPendingFullTextDocumentSync = this._didChangeTextDocumentFeature.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full;\n        let openNotification;\n        if (needsPendingFullTextDocumentSync && typeof type !== 'string' && type.method === vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.method) {\n            openNotification = params?.textDocument.uri;\n            this._inFlightOpenNotifications.add(openNotification);\n        }\n        let documentToClose;\n        if (typeof type !== 'string' && type.method === vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.method) {\n            documentToClose = params.textDocument.uri;\n        }\n        // Ensure we have a connection before we force the document sync.\n        const connection = await this.$start();\n        // Send ony depending open notifications\n        await this._didOpenTextDocumentFeature.sendPendingOpenNotifications(documentToClose);\n        // If any document is synced in full mode make sure we flush any pending\n        // full document syncs.\n        if (needsPendingFullTextDocumentSync) {\n            await this.sendPendingFullTextDocumentChanges(connection);\n        }\n        // We need to remove the pending open notification before we actually\n        // send the notification over the connection. Otherwise there could be\n        // a request coming in that although the open notification got already put\n        // onto the wire will ignore pending document changes.\n        //\n        // Since the code path of connection.sendNotification is actually sync\n        // until the message is handed off to the writer and the writer has a semaphore\n        // lock with a capacity of 1 no additional async scheduling can happen until\n        // the message is actually handed off.\n        if (openNotification !== undefined) {\n            this._inFlightOpenNotifications.delete(openNotification);\n        }\n        const _sendNotification = this._clientOptions.middleware?.sendNotification;\n        return _sendNotification\n            ? _sendNotification(type, connection.sendNotification.bind(connection), params)\n            : connection.sendNotification(type, params);\n    }\n    onNotification(type, handler) {\n        const method = typeof type === 'string' ? type : type.method;\n        this._notificationHandlers.set(method, handler);\n        const connection = this.activeConnection();\n        let disposable;\n        if (connection !== undefined) {\n            this._notificationDisposables.set(method, connection.onNotification(type, handler));\n            disposable = {\n                dispose: () => {\n                    const disposable = this._notificationDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._notificationDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        else {\n            this._pendingNotificationHandlers.set(method, handler);\n            disposable = {\n                dispose: () => {\n                    this._pendingNotificationHandlers.delete(method);\n                    const disposable = this._notificationDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._notificationDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        return {\n            dispose: () => {\n                this._notificationHandlers.delete(method);\n                disposable.dispose();\n            }\n        };\n    }\n    async sendProgress(type, token, value) {\n        if (this.$state === ClientState.StartFailed || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive, `Client is not running`));\n        }\n        try {\n            // Ensure we have a connection before we force the document sync.\n            const connection = await this.$start();\n            return connection.sendProgress(type, token, value);\n        }\n        catch (error) {\n            this.error(`Sending progress for token ${token} failed.`, error);\n            throw error;\n        }\n    }\n    onProgress(type, token, handler) {\n        this._progressHandlers.set(token, { type, handler });\n        const connection = this.activeConnection();\n        let disposable;\n        const handleWorkDoneProgress = this._clientOptions.middleware?.handleWorkDoneProgress;\n        const realHandler = vscode_languageserver_protocol_1.WorkDoneProgress.is(type) && handleWorkDoneProgress !== undefined\n            ? (params) => {\n                handleWorkDoneProgress(token, params, () => handler(params));\n            }\n            : handler;\n        if (connection !== undefined) {\n            this._progressDisposables.set(token, connection.onProgress(type, token, realHandler));\n            disposable = {\n                dispose: () => {\n                    const disposable = this._progressDisposables.get(token);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._progressDisposables.delete(token);\n                    }\n                }\n            };\n        }\n        else {\n            this._pendingProgressHandlers.set(token, { type, handler });\n            disposable = {\n                dispose: () => {\n                    this._pendingProgressHandlers.delete(token);\n                    const disposable = this._progressDisposables.get(token);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._progressDisposables.delete(token);\n                    }\n                }\n            };\n        }\n        return {\n            dispose: () => {\n                this._progressHandlers.delete(token);\n                disposable.dispose();\n            }\n        };\n    }\n    createDefaultErrorHandler(maxRestartCount) {\n        if (maxRestartCount !== undefined && maxRestartCount < 0) {\n            throw new Error(`Invalid maxRestartCount: ${maxRestartCount}`);\n        }\n        return new DefaultErrorHandler(this, maxRestartCount ?? 4);\n    }\n    async setTrace(value) {\n        this._trace = value;\n        const connection = this.activeConnection();\n        if (connection !== undefined) {\n            await connection.trace(this._trace, this._tracer, {\n                sendNotification: false,\n                traceFormat: this._traceFormat\n            });\n        }\n    }\n    data2String(data) {\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\n            const responseError = data;\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\n        }\n        if (data instanceof Error) {\n            if (Is.string(data.stack)) {\n                return data.stack;\n            }\n            return data.message;\n        }\n        if (Is.string(data)) {\n            return data;\n        }\n        return data.toString();\n    }\n    error(message, data, showNotification = true) {\n        this.outputChannel.error(this.getLogMessage(message, data));\n        if (showNotification === 'force' || (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error)) {\n            this.showNotificationMessage(vscode_languageserver_protocol_1.MessageType.Error, message, data);\n        }\n    }\n    warn(message, data, showNotification = true) {\n        this.outputChannel.warn(this.getLogMessage(message, data));\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\n            this.showNotificationMessage(vscode_languageserver_protocol_1.MessageType.Warning, message, data);\n        }\n    }\n    info(message, data, showNotification = true) {\n        this.outputChannel.info(this.getLogMessage(message, data));\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\n            this.showNotificationMessage(vscode_languageserver_protocol_1.MessageType.Info, message, data);\n        }\n    }\n    debug(message, data, showNotification = true) {\n        this.outputChannel.debug(this.getLogMessage(message, data));\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Debug) {\n            this.showNotificationMessage(vscode_languageserver_protocol_1.MessageType.Debug, message, data);\n        }\n    }\n    trace(message, data) {\n        this.traceOutputChannel.trace(this.getLogMessage(message, data));\n    }\n    traceObject(data) {\n        this.traceOutputChannel.trace(JSON.stringify(data));\n    }\n    showNotificationMessage(type, message, data) {\n        message = message ?? 'A request has failed. See the output for more information.';\n        if (data) {\n            message += '\\n' + this.data2String(data);\n        }\n        const messageFunc = type === vscode_languageserver_protocol_1.MessageType.Error\n            ? vscode_1.window.showErrorMessage\n            : type === vscode_languageserver_protocol_1.MessageType.Warning\n                ? vscode_1.window.showWarningMessage\n                : vscode_1.window.showInformationMessage;\n        void messageFunc(message, 'Go to output').then((selection) => {\n            if (selection !== undefined) {\n                this.outputChannel.show(true);\n            }\n        });\n    }\n    getLogMessage(message, data) {\n        return data !== null && data !== undefined ? `${message}\\n${this.data2String(data)}` : message;\n    }\n    needsStart() {\n        return this.$state === ClientState.Initial || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped;\n    }\n    needsStop() {\n        return this.$state === ClientState.Starting || this.$state === ClientState.Running;\n    }\n    activeConnection() {\n        return this.$state === ClientState.Running && this._connection !== undefined ? this._connection : undefined;\n    }\n    isRunning() {\n        return this.$state === ClientState.Running;\n    }\n    async start() {\n        if (this._disposed === 'disposing' || this._disposed === 'disposed') {\n            throw new Error(`Client got disposed and can't be restarted.`);\n        }\n        if (this.$state === ClientState.Stopping) {\n            throw new Error(`Client is currently stopping. Can only restart a full stopped client`);\n        }\n        // We are already running or are in the process of getting up\n        // to speed.\n        if (this._onStart !== undefined) {\n            return this._onStart;\n        }\n        const [promise, resolve, reject] = this.createOnStartPromise();\n        this._onStart = promise;\n        // If we restart then the diagnostics collection is reused.\n        if (this._diagnostics === undefined) {\n            this._diagnostics = vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName ?? this._id);\n        }\n        // When we start make all buffer handlers pending so that they\n        // get added.\n        for (const [method, handler] of this._notificationHandlers) {\n            if (!this._pendingNotificationHandlers.has(method)) {\n                this._pendingNotificationHandlers.set(method, handler);\n            }\n        }\n        for (const [method, handler] of this._requestHandlers) {\n            if (!this._pendingRequestHandlers.has(method)) {\n                this._pendingRequestHandlers.set(method, handler);\n            }\n        }\n        for (const [token, data] of this._progressHandlers) {\n            if (!this._pendingProgressHandlers.has(token)) {\n                this._pendingProgressHandlers.set(token, data);\n            }\n        }\n        this.$state = ClientState.Starting;\n        try {\n            const connection = await this.createConnection();\n            connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, (message) => {\n                switch (message.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        this.error(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        this.warn(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        this.info(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Debug:\n                        this.debug(message.message, undefined, false);\n                        break;\n                    default:\n                        this.outputChannel.appendLine(message.message);\n                }\n            });\n            connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, (message) => {\n                switch (message.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        void vscode_1.window.showErrorMessage(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        void vscode_1.window.showWarningMessage(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        void vscode_1.window.showInformationMessage(message.message);\n                        break;\n                    default:\n                        void vscode_1.window.showInformationMessage(message.message);\n                }\n            });\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\n                let messageFunc;\n                switch (params.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        messageFunc = vscode_1.window.showErrorMessage;\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        messageFunc = vscode_1.window.showWarningMessage;\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        messageFunc = vscode_1.window.showInformationMessage;\n                        break;\n                    default:\n                        messageFunc = vscode_1.window.showInformationMessage;\n                }\n                const actions = params.actions || [];\n                return messageFunc(params.message, ...actions);\n            });\n            connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, (data) => {\n                this._telemetryEmitter.fire(data);\n            });\n            connection.onRequest(vscode_languageserver_protocol_1.ShowDocumentRequest.type, async (params, token) => {\n                const showDocument = async (params) => {\n                    const uri = this.protocol2CodeConverter.asUri(params.uri);\n                    try {\n                        if (params.external === true) {\n                            const success = await vscode_1.env.openExternal(uri);\n                            return { success };\n                        }\n                        else {\n                            const options = {};\n                            if (params.selection !== undefined) {\n                                options.selection = this.protocol2CodeConverter.asRange(params.selection);\n                            }\n                            if (params.takeFocus === undefined || params.takeFocus === false) {\n                                options.preserveFocus = true;\n                            }\n                            else if (params.takeFocus === true) {\n                                options.preserveFocus = false;\n                            }\n                            await vscode_1.window.showTextDocument(uri, options);\n                            return { success: true };\n                        }\n                    }\n                    catch (error) {\n                        return { success: false };\n                    }\n                };\n                const middleware = this._clientOptions.middleware.window?.showDocument;\n                if (middleware !== undefined) {\n                    return middleware(params, token, showDocument);\n                }\n                else {\n                    return showDocument(params);\n                }\n            });\n            connection.listen();\n            await this.initialize(connection);\n            resolve();\n        }\n        catch (error) {\n            this.$state = ClientState.StartFailed;\n            this.error(`${this._name} client: couldn't create connection to server.`, error, 'force');\n            reject(error);\n        }\n        return this._onStart;\n    }\n    createOnStartPromise() {\n        let resolve;\n        let reject;\n        const promise = new Promise((_resolve, _reject) => {\n            resolve = _resolve;\n            reject = _reject;\n        });\n        return [promise, resolve, reject];\n    }\n    async initialize(connection) {\n        this.refreshTrace(connection, false);\n        const initOption = this._clientOptions.initializationOptions;\n        // If the client is locked to a workspace folder use it. In this case the workspace folder\n        // feature is not registered and we need to initialize the value here.\n        const [rootPath, workspaceFolders] = this._clientOptions.workspaceFolder !== undefined\n            ? [this._clientOptions.workspaceFolder.uri.fsPath, [{ uri: this._c2p.asUri(this._clientOptions.workspaceFolder.uri), name: this._clientOptions.workspaceFolder.name }]]\n            : [this._clientGetRootPath(), null];\n        const initParams = {\n            processId: null,\n            clientInfo: {\n                name: vscode_1.env.appName,\n                version: vscode_1.version\n            },\n            locale: this.getLocale(),\n            rootPath: rootPath ? rootPath : null,\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\n            capabilities: this.computeClientCapabilities(),\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\n            workspaceFolders: workspaceFolders\n        };\n        this.fillInitializeParams(initParams);\n        if (this._clientOptions.progressOnInitialization) {\n            const token = UUID.generateUuid();\n            const part = new progressPart_1.ProgressPart(connection, token);\n            initParams.workDoneToken = token;\n            try {\n                const result = await this.doInitialize(connection, initParams);\n                part.done();\n                return result;\n            }\n            catch (error) {\n                part.cancel();\n                throw error;\n            }\n        }\n        else {\n            return this.doInitialize(connection, initParams);\n        }\n    }\n    async doInitialize(connection, initParams) {\n        try {\n            const result = await connection.initialize(initParams);\n            if (result.capabilities.positionEncoding !== undefined && result.capabilities.positionEncoding !== vscode_languageserver_protocol_1.PositionEncodingKind.UTF16) {\n                throw new Error(`Unsupported position encoding (${result.capabilities.positionEncoding}) received from server ${this.name}`);\n            }\n            this._initializeResult = result;\n            this.$state = ClientState.Running;\n            let textDocumentSyncOptions = undefined;\n            if (Is.number(result.capabilities.textDocumentSync)) {\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n                    textDocumentSyncOptions = {\n                        openClose: false,\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\n                        save: undefined\n                    };\n                }\n                else {\n                    textDocumentSyncOptions = {\n                        openClose: true,\n                        change: result.capabilities.textDocumentSync,\n                        save: {\n                            includeText: false\n                        }\n                    };\n                }\n            }\n            else if (result.capabilities.textDocumentSync !== undefined && result.capabilities.textDocumentSync !== null) {\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\n            }\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\n            connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, params => this.handleDiagnostics(params));\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\n            // Add pending notification, request and progress handlers.\n            for (const [method, handler] of this._pendingNotificationHandlers) {\n                this._notificationDisposables.set(method, connection.onNotification(method, handler));\n            }\n            this._pendingNotificationHandlers.clear();\n            for (const [method, handler] of this._pendingRequestHandlers) {\n                this._requestDisposables.set(method, connection.onRequest(method, handler));\n            }\n            this._pendingRequestHandlers.clear();\n            for (const [token, data] of this._pendingProgressHandlers) {\n                this._progressDisposables.set(token, connection.onProgress(data.type, token, data.handler));\n            }\n            this._pendingProgressHandlers.clear();\n            // if (this._clientOptions.suspend.mode !== SuspendMode.off) {\n            // \tthis._idleInterval =  RAL().timer.setInterval(() => this.checkSuspend(), this._clientOptions.suspend.interval);\n            // }\n            await connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\n            this.hookFileEvents(connection);\n            this.hookLogLevelChanged(connection);\n            this.hookConfigurationChanged(connection);\n            this.initializeFeatures(connection);\n            return result;\n        }\n        catch (error) {\n            if (this._clientOptions.initializationFailedHandler) {\n                if (this._clientOptions.initializationFailedHandler(error)) {\n                    void this.initialize(connection);\n                }\n                else {\n                    void this.stop();\n                }\n            }\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\n                void vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: 'retry' }).then(item => {\n                    if (item && item.id === 'retry') {\n                        void this.initialize(connection);\n                    }\n                    else {\n                        void this.stop();\n                    }\n                });\n            }\n            else {\n                if (error && error.message) {\n                    void vscode_1.window.showErrorMessage(error.message);\n                }\n                this.error('Server initialization failed.', error);\n                void this.stop();\n            }\n            throw error;\n        }\n    }\n    _clientGetRootPath() {\n        const folders = vscode_1.workspace.workspaceFolders;\n        if (!folders || folders.length === 0) {\n            return undefined;\n        }\n        const folder = folders[0];\n        if (folder.uri.scheme === 'file') {\n            return folder.uri.fsPath;\n        }\n        return undefined;\n    }\n    stop(timeout = 2000) {\n        // Wait 2 seconds on stop\n        return this.shutdown(ShutdownMode.Stop, timeout);\n    }\n    dispose(timeout = 2000) {\n        try {\n            this._disposed = 'disposing';\n            return this.stop(timeout);\n        }\n        finally {\n            this._disposed = 'disposed';\n        }\n    }\n    async shutdown(mode, timeout = 2000) {\n        // If the client is stopped or in its initial state return.\n        if (this.$state === ClientState.Stopped || this.$state === ClientState.Initial) {\n            return;\n        }\n        // If we are stopping the client and have a stop promise return it.\n        if (this.$state === ClientState.Stopping) {\n            if (this._onStop !== undefined) {\n                return this._onStop;\n            }\n            else {\n                throw new Error(`Client is stopping but no stop promise available.`);\n            }\n        }\n        const connection = this.activeConnection();\n        // We can't stop a client that is not running (e.g. has no connection). Especially not\n        // on that us starting since it can't be correctly synchronized.\n        if (connection === undefined || this.$state !== ClientState.Running) {\n            throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);\n        }\n        this._initializeResult = undefined;\n        this.$state = ClientState.Stopping;\n        this.cleanUp(mode);\n        const tp = new Promise(c => { (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(c, timeout); });\n        const shutdown = (async (connection) => {\n            await connection.shutdown();\n            await connection.exit();\n            return connection;\n        })(connection);\n        return this._onStop = Promise.race([tp, shutdown]).then((connection) => {\n            // The connection won the race with the timeout.\n            if (connection !== undefined) {\n                connection.end();\n                connection.dispose();\n            }\n            else {\n                this.error(`Stopping server timed out`, undefined, false);\n                throw new Error(`Stopping the server timed out`);\n            }\n        }, (error) => {\n            this.error(`Stopping server failed`, error, false);\n            throw error;\n        }).finally(() => {\n            this.$state = ClientState.Stopped;\n            mode === ShutdownMode.Stop && this.cleanUpChannel();\n            this._onStart = undefined;\n            this._onStop = undefined;\n            this._connection = undefined;\n            this._ignoredRegistrations.clear();\n        });\n    }\n    cleanUp(mode) {\n        // purge outstanding file events.\n        this._fileEvents = [];\n        this._fileEventDelayer.cancel();\n        const disposables = this._listeners.splice(0, this._listeners.length);\n        for (const disposable of disposables) {\n            disposable.dispose();\n        }\n        if (this._syncedDocuments) {\n            this._syncedDocuments.clear();\n        }\n        // Clear features in reverse order;\n        for (const feature of Array.from(this._features.entries()).map(entry => entry[1]).reverse()) {\n            feature.clear();\n        }\n        if ((mode === ShutdownMode.Stop || mode === ShutdownMode.Restart) && this._diagnostics !== undefined) {\n            this._diagnostics.dispose();\n            this._diagnostics = undefined;\n        }\n        if (this._idleInterval !== undefined) {\n            this._idleInterval.dispose();\n            this._idleInterval = undefined;\n        }\n        // this._idleStart = undefined;\n    }\n    cleanUpChannel() {\n        if (this._outputChannel !== undefined && this._disposeOutputChannel) {\n            this._outputChannel.dispose();\n            this._outputChannel = undefined;\n        }\n    }\n    notifyFileEvent(event) {\n        const client = this;\n        async function didChangeWatchedFile(event) {\n            client._fileEvents.push(event);\n            return client._fileEventDelayer.trigger(async () => {\n                const fileEvents = client._fileEvents;\n                client._fileEvents = [];\n                try {\n                    await client.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, { changes: fileEvents });\n                }\n                catch (error) {\n                    // Restore the file events.\n                    client._fileEvents.push(...fileEvents);\n                    throw error;\n                }\n            });\n        }\n        const workSpaceMiddleware = this.clientOptions.middleware?.workspace;\n        (workSpaceMiddleware?.didChangeWatchedFile ? workSpaceMiddleware.didChangeWatchedFile(event, didChangeWatchedFile) : didChangeWatchedFile(event)).catch((error) => {\n            client.error(`Notifying file events failed.`, error);\n        });\n    }\n    async sendPendingFullTextDocumentChanges(connection) {\n        return this._pendingChangeSemaphore.lock(async () => {\n            try {\n                const changes = this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._inFlightOpenNotifications);\n                if (changes.length === 0) {\n                    return;\n                }\n                for (const document of changes) {\n                    const params = this.code2ProtocolConverter.asChangeTextDocumentParams(document);\n                    // We await the send and not the delivery since it is more or less the same for\n                    // notifications.\n                    await connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                    this._didChangeTextDocumentFeature.notificationSent(document, vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                }\n            }\n            catch (error) {\n                this.error(`Sending pending changes failed`, error, false);\n                throw error;\n            }\n        });\n    }\n    triggerPendingChangeDelivery() {\n        this._pendingChangeDelayer.trigger(async () => {\n            const connection = this.activeConnection();\n            if (connection === undefined) {\n                this.triggerPendingChangeDelivery();\n                return;\n            }\n            await this.sendPendingFullTextDocumentChanges(connection);\n        }).catch((error) => this.error(`Delivering pending changes failed`, error, false));\n    }\n    _diagnosticQueue = new Map();\n    _diagnosticQueueState = { state: 'idle' };\n    handleDiagnostics(params) {\n        if (!this._diagnostics) {\n            return;\n        }\n        const key = params.uri;\n        if (this._diagnosticQueueState.state === 'busy' && this._diagnosticQueueState.document === key) {\n            // Cancel the active run;\n            this._diagnosticQueueState.tokenSource.cancel();\n        }\n        this._diagnosticQueue.set(params.uri, params.diagnostics);\n        this.triggerDiagnosticQueue();\n    }\n    triggerDiagnosticQueue() {\n        (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => { this.workDiagnosticQueue(); });\n    }\n    workDiagnosticQueue() {\n        if (this._diagnosticQueueState.state === 'busy') {\n            return;\n        }\n        const next = this._diagnosticQueue.entries().next();\n        if (next.done === true) {\n            // Nothing in the queue\n            return;\n        }\n        const [document, diagnostics] = next.value;\n        this._diagnosticQueue.delete(document);\n        const tokenSource = new vscode_1.CancellationTokenSource();\n        this._diagnosticQueueState = { state: 'busy', document: document, tokenSource };\n        this._p2c.asDiagnostics(diagnostics, tokenSource.token).then((converted) => {\n            if (!tokenSource.token.isCancellationRequested) {\n                const uri = this._p2c.asUri(document);\n                const middleware = this.clientOptions.middleware;\n                if (middleware.handleDiagnostics) {\n                    middleware.handleDiagnostics(uri, converted, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\n                }\n                else {\n                    this.setDiagnostics(uri, converted);\n                }\n            }\n        }).catch((error) => {\n            this.error(`Processing diagnostic queue failed.`, error);\n        }).finally(() => {\n            this._diagnosticQueueState = { state: 'idle' };\n            this.triggerDiagnosticQueue();\n        });\n    }\n    setDiagnostics(uri, diagnostics) {\n        if (!this._diagnostics) {\n            return;\n        }\n        this._diagnostics.set(uri, diagnostics);\n    }\n    getLocale() {\n        return vscode_1.env.language;\n    }\n    async $start() {\n        if (this.$state === ClientState.StartFailed) {\n            throw new Error(`Previous start failed. Can't restart server.`);\n        }\n        await this.start();\n        const connection = this.activeConnection();\n        if (connection === undefined) {\n            throw new Error(`Starting server failed`);\n        }\n        return connection;\n    }\n    async createConnection() {\n        const errorHandler = (error, message, count) => {\n            this.handleConnectionError(error, message, count).catch((error) => this.error(`Handling connection error failed`, error));\n        };\n        const closeHandler = () => {\n            this.handleConnectionClosed().catch((error) => this.error(`Handling connection close failed`, error));\n        };\n        const transports = await this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8');\n        this._connection = createConnection(transports.reader, transports.writer, errorHandler, closeHandler, this._clientOptions.connectionOptions);\n        return this._connection;\n    }\n    async handleConnectionClosed() {\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\n        if (this.$state === ClientState.Stopped) {\n            return;\n        }\n        try {\n            if (this._connection !== undefined) {\n                this._connection.dispose();\n            }\n        }\n        catch (error) {\n            // Disposing a connection could fail if error cases.\n        }\n        let handlerResult = { action: CloseAction.DoNotRestart };\n        if (this.$state !== ClientState.Stopping) {\n            try {\n                handlerResult = await this._clientOptions.errorHandler.closed();\n            }\n            catch (error) {\n                // Ignore errors coming from the error handler.\n            }\n        }\n        this._connection = undefined;\n        if (handlerResult.action === CloseAction.DoNotRestart) {\n            this.error(handlerResult.message ?? 'Connection to server got closed. Server will not be restarted.', undefined, handlerResult.handled === true ? false : 'force');\n            this.cleanUp(ShutdownMode.Stop);\n            if (this.$state === ClientState.Starting) {\n                this.$state = ClientState.StartFailed;\n            }\n            else {\n                this.$state = ClientState.Stopped;\n            }\n            this._onStop = Promise.resolve();\n            this._onStart = undefined;\n        }\n        else if (handlerResult.action === CloseAction.Restart) {\n            this.info(handlerResult.message ?? 'Connection to server got closed. Server will restart.', undefined, !handlerResult.handled);\n            this.cleanUp(ShutdownMode.Restart);\n            this.$state = ClientState.Initial;\n            this._onStop = Promise.resolve();\n            this._onStart = undefined;\n            this.start().catch((error) => this.error(`Restarting server failed`, error, 'force'));\n        }\n    }\n    async handleConnectionError(error, message, count) {\n        const handlerResult = await this._clientOptions.errorHandler.error(error, message, count);\n        if (handlerResult.action === ErrorAction.Shutdown) {\n            this.error(handlerResult.message ?? `Client ${this._name}: connection to server is erroring.\\n${error.message}\\nShutting down server.`, undefined, handlerResult.handled === true ? false : 'force');\n            this.stop().catch((error) => {\n                this.error(`Stopping server failed`, error, false);\n            });\n        }\n        else {\n            this.error(handlerResult.message ??\n                `Client ${this._name}: connection to server is erroring.\\n${error.message}`, undefined, handlerResult.handled === true ? false : 'force');\n        }\n    }\n    hookConfigurationChanged(connection) {\n        this._listeners.push(vscode_1.workspace.onDidChangeConfiguration(() => {\n            this.refreshTrace(connection, true);\n        }));\n    }\n    hookLogLevelChanged(connection) {\n        this._listeners.push(this.traceOutputChannel.onDidChangeLogLevel((level) => {\n            this._traceLogLevel = level;\n            this.refreshTrace(connection, true);\n        }));\n    }\n    refreshTrace(connection, sendNotification = false) {\n        const config = vscode_1.workspace.getConfiguration(this._id);\n        let trace = this._traceLogLevel !== vscode_1.LogLevel.Trace ? vscode_languageserver_protocol_1.Trace.Off : vscode_languageserver_protocol_1.Trace.Messages;\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\n        if (config && trace !== vscode_languageserver_protocol_1.Trace.Off) {\n            const traceConfig = config.get('trace.server', 'messages');\n            if (typeof traceConfig === 'string') {\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\n                if (trace === vscode_languageserver_protocol_1.Trace.Off) {\n                    trace = vscode_languageserver_protocol_1.Trace.Messages;\n                }\n            }\n            else {\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'messages'));\n                if (trace === vscode_languageserver_protocol_1.Trace.Off) {\n                    trace = vscode_languageserver_protocol_1.Trace.Messages;\n                }\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\n            }\n        }\n        this._trace = trace;\n        this._traceFormat = traceFormat;\n        connection.trace(this._trace, this._tracer, {\n            sendNotification,\n            traceFormat: this._traceFormat\n        }).catch((error) => { this.error(`Updating trace failed with error`, error, false); });\n    }\n    hookFileEvents(_connection) {\n        const fileEvents = this._clientOptions.synchronize.fileEvents;\n        if (!fileEvents) {\n            return;\n        }\n        let watchers;\n        if (Is.array(fileEvents)) {\n            watchers = fileEvents;\n        }\n        else {\n            watchers = [fileEvents];\n        }\n        if (!watchers) {\n            return;\n        }\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\n    }\n    _features = [];\n    _dynamicFeatures = new Map();\n    registerFeatures(features) {\n        for (const feature of features) {\n            this.registerFeature(feature);\n        }\n    }\n    registerFeature(feature) {\n        this._features.push(feature);\n        if (features_1.DynamicFeature.is(feature)) {\n            const registrationType = feature.registrationType;\n            this._dynamicFeatures.set(registrationType.method, feature);\n        }\n    }\n    getFeature(request) {\n        return this._dynamicFeatures.get(request);\n    }\n    hasDedicatedTextSynchronizationFeature(textDocument) {\n        const feature = this.getFeature(vscode_languageserver_protocol_1.NotebookDocumentSyncRegistrationType.method);\n        if (feature === undefined || !(feature instanceof notebook_1.NotebookDocumentSyncFeature)) {\n            return false;\n        }\n        return feature.handles(textDocument);\n    }\n    registerBuiltinFeatures() {\n        const pendingFullTextDocumentChanges = new Map();\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\n        this._didOpenTextDocumentFeature = new textSynchronization_1.DidOpenTextDocumentFeature(this, this._syncedDocuments);\n        this.registerFeature(this._didOpenTextDocumentFeature);\n        this._didChangeTextDocumentFeature = new textSynchronization_1.DidChangeTextDocumentFeature(this, pendingFullTextDocumentChanges);\n        this._didChangeTextDocumentFeature.onPendingChangeAdded(() => {\n            this.triggerPendingChangeDelivery();\n        });\n        this.registerFeature(this._didChangeTextDocumentFeature);\n        this.registerFeature(new textSynchronization_1.WillSaveFeature(this));\n        this.registerFeature(new textSynchronization_1.WillSaveWaitUntilFeature(this));\n        this.registerFeature(new textSynchronization_1.DidSaveTextDocumentFeature(this));\n        this.registerFeature(new textSynchronization_1.DidCloseTextDocumentFeature(this, this._syncedDocuments, pendingFullTextDocumentChanges));\n        this.registerFeature(new fileSystemWatcher_1.FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\n        this.registerFeature(new completion_1.CompletionItemFeature(this));\n        this.registerFeature(new hover_1.HoverFeature(this));\n        this.registerFeature(new signatureHelp_1.SignatureHelpFeature(this));\n        this.registerFeature(new definition_1.DefinitionFeature(this));\n        this.registerFeature(new reference_1.ReferencesFeature(this));\n        this.registerFeature(new documentHighlight_1.DocumentHighlightFeature(this));\n        this.registerFeature(new documentSymbol_1.DocumentSymbolFeature(this));\n        this.registerFeature(new workspaceSymbol_1.WorkspaceSymbolFeature(this));\n        this.registerFeature(new codeAction_1.CodeActionFeature(this));\n        this.registerFeature(new codeLens_1.CodeLensFeature(this));\n        this.registerFeature(new formatting_1.DocumentFormattingFeature(this));\n        this.registerFeature(new formatting_1.DocumentRangeFormattingFeature(this));\n        this.registerFeature(new formatting_1.DocumentOnTypeFormattingFeature(this));\n        this.registerFeature(new rename_1.RenameFeature(this));\n        this.registerFeature(new documentLink_1.DocumentLinkFeature(this));\n        this.registerFeature(new executeCommand_1.ExecuteCommandFeature(this));\n        this.registerFeature(new configuration_1.SyncConfigurationFeature(this));\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\n        // We only register the workspace folder feature if the client is not locked\n        // to a specific workspace folder.\n        if (this.clientOptions.workspaceFolder === undefined) {\n            this.registerFeature(new workspaceFolder_1.WorkspaceFoldersFeature(this));\n        }\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\n        this.registerFeature(new selectionRange_1.SelectionRangeFeature(this));\n        this.registerFeature(new progress_1.ProgressFeature(this));\n        this.registerFeature(new callHierarchy_1.CallHierarchyFeature(this));\n        this.registerFeature(new semanticTokens_1.SemanticTokensFeature(this));\n        this.registerFeature(new linkedEditingRange_1.LinkedEditingFeature(this));\n        this.registerFeature(new fileOperations_1.DidCreateFilesFeature(this));\n        this.registerFeature(new fileOperations_1.DidRenameFilesFeature(this));\n        this.registerFeature(new fileOperations_1.DidDeleteFilesFeature(this));\n        this.registerFeature(new fileOperations_1.WillCreateFilesFeature(this));\n        this.registerFeature(new fileOperations_1.WillRenameFilesFeature(this));\n        this.registerFeature(new fileOperations_1.WillDeleteFilesFeature(this));\n        this.registerFeature(new typeHierarchy_1.TypeHierarchyFeature(this));\n        this.registerFeature(new inlineValue_1.InlineValueFeature(this));\n        this.registerFeature(new inlayHint_1.InlayHintsFeature(this));\n        this.registerFeature(new diagnostic_1.DiagnosticFeature(this));\n        this.registerFeature(new notebook_1.NotebookDocumentSyncFeature(this));\n    }\n    registerProposedFeatures() {\n        this.registerFeatures(ProposedFeatures.createAll(this));\n    }\n    fillInitializeParams(params) {\n        for (const feature of this._features) {\n            if (Is.func(feature.fillInitializeParams)) {\n                feature.fillInitializeParams(params);\n            }\n        }\n    }\n    computeClientCapabilities() {\n        const result = {};\n        (0, features_1.ensure)(result, 'workspace').applyEdit = true;\n        const workspaceEdit = (0, features_1.ensure)((0, features_1.ensure)(result, 'workspace'), 'workspaceEdit');\n        workspaceEdit.documentChanges = true;\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\n        workspaceEdit.normalizesLineEndings = true;\n        workspaceEdit.changeAnnotationSupport = {\n            groupsOnLabel: true\n        };\n        workspaceEdit.metadataSupport = true;\n        workspaceEdit.snippetEditSupport = true;\n        const diagnostics = (0, features_1.ensure)((0, features_1.ensure)(result, 'textDocument'), 'publishDiagnostics');\n        diagnostics.relatedInformation = true;\n        diagnostics.versionSupport = false;\n        diagnostics.tagSupport = { valueSet: [vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary, vscode_languageserver_protocol_1.DiagnosticTag.Deprecated] };\n        diagnostics.codeDescriptionSupport = true;\n        diagnostics.dataSupport = true;\n        const textDocumentFilter = (0, features_1.ensure)((0, features_1.ensure)(result, 'textDocument'), 'filters');\n        textDocumentFilter.relativePatternSupport = true;\n        const windowCapabilities = (0, features_1.ensure)(result, 'window');\n        const showMessage = (0, features_1.ensure)(windowCapabilities, 'showMessage');\n        showMessage.messageActionItem = { additionalPropertiesSupport: true };\n        const showDocument = (0, features_1.ensure)(windowCapabilities, 'showDocument');\n        showDocument.support = true;\n        const generalCapabilities = (0, features_1.ensure)(result, 'general');\n        generalCapabilities.staleRequestSupport = {\n            cancel: true,\n            retryOnContentModified: Array.from(BaseLanguageClient.RequestsToCancelOnContentModified)\n        };\n        generalCapabilities.regularExpressions = { engine: 'ECMAScript', version: 'ES2020' };\n        generalCapabilities.markdown = {\n            parser: 'marked',\n            version: '1.1.0',\n        };\n        generalCapabilities.positionEncodings = ['utf-16'];\n        if (this._clientOptions.markdown.supportHtml) {\n            generalCapabilities.markdown.allowedTags = ['ul', 'li', 'p', 'code', 'blockquote', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'em', 'pre', 'table', 'thead', 'tbody', 'tr', 'th', 'td', 'div', 'del', 'a', 'strong', 'br', 'img', 'span'];\n        }\n        for (const feature of this._features) {\n            feature.fillClientCapabilities(result);\n        }\n        return result;\n    }\n    initializeFeatures(_connection) {\n        const documentSelector = this._clientOptions.documentSelector;\n        for (const feature of this._features) {\n            if (Is.func(feature.preInitialize)) {\n                feature.preInitialize(this._capabilities, documentSelector);\n            }\n        }\n        for (const feature of this._features) {\n            feature.initialize(this._capabilities, documentSelector);\n        }\n    }\n    async handleRegistrationRequest(params) {\n        const middleware = this.clientOptions.middleware?.handleRegisterCapability;\n        if (middleware) {\n            return middleware(params, nextParams => this.doRegisterCapability(nextParams));\n        }\n        else {\n            return this.doRegisterCapability(params);\n        }\n    }\n    async doRegisterCapability(params) {\n        // We will not receive a registration call before a client is running\n        // from a server. However if we stop or shutdown we might which might\n        // try to restart the server. So ignore registrations if we are not running\n        if (!this.isRunning()) {\n            for (const registration of params.registrations) {\n                this._ignoredRegistrations.add(registration.id);\n            }\n            return;\n        }\n        for (const registration of params.registrations) {\n            const feature = this._dynamicFeatures.get(registration.method);\n            if (feature === undefined) {\n                return Promise.reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\n            }\n            const options = registration.registerOptions ?? {};\n            options.documentSelector = options.documentSelector ?? this._clientOptions.documentSelector;\n            const data = {\n                id: registration.id,\n                registerOptions: options\n            };\n            try {\n                feature.register(data);\n            }\n            catch (err) {\n                return Promise.reject(err);\n            }\n        }\n    }\n    async handleUnregistrationRequest(params) {\n        const middleware = this.clientOptions.middleware?.handleUnregisterCapability;\n        if (middleware) {\n            return middleware(params, nextParams => this.doUnregisterCapability(nextParams));\n        }\n        else {\n            return this.doUnregisterCapability(params);\n        }\n    }\n    async doUnregisterCapability(params) {\n        for (const unregistration of params.unregisterations) {\n            if (this._ignoredRegistrations.has(unregistration.id)) {\n                continue;\n            }\n            const feature = this._dynamicFeatures.get(unregistration.method);\n            if (!feature) {\n                return Promise.reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\n            }\n            feature.unregister(unregistration.id);\n        }\n    }\n    async handleApplyWorkspaceEdit(params) {\n        const middleware = this.clientOptions.middleware?.workspace?.handleApplyEdit;\n        if (middleware) {\n            const resultOrError = await middleware(params, nextParams => this.doHandleApplyWorkspaceEdit(nextParams));\n            if (resultOrError instanceof vscode_languageserver_protocol_1.ResponseError) {\n                return Promise.reject(resultOrError);\n            }\n            return resultOrError;\n        }\n        else {\n            return this.doHandleApplyWorkspaceEdit(params);\n        }\n    }\n    workspaceEditLock = new async_1.Semaphore(1);\n    async doHandleApplyWorkspaceEdit(params) {\n        const workspaceEdit = params.edit;\n        // Make sure we convert workspace edits one after the other. Otherwise\n        // we might execute a workspace edit received first after we received another\n        // one since the conversion might race.\n        const converted = await this.workspaceEditLock.lock(() => {\n            return this._p2c.asWorkspaceEdit(workspaceEdit);\n        });\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\n        // However doing it here adds some safety since the server can lag more behind then an extension.\n        const openTextDocuments = new Map();\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\n        let versionMismatch = false;\n        if (workspaceEdit.documentChanges) {\n            for (const change of workspaceEdit.documentChanges) {\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\n                    const changeUri = this._p2c.asUri(change.textDocument.uri).toString();\n                    const textDocument = openTextDocuments.get(changeUri);\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\n                        versionMismatch = true;\n                        break;\n                    }\n                }\n            }\n        }\n        if (versionMismatch) {\n            return Promise.resolve({ applied: false });\n        }\n        return Is.asPromise(vscode_1.workspace.applyEdit(converted, { isRefactoring: params.metadata?.isRefactoring }).then((value) => { return { applied: value }; }));\n    }\n    static RequestsToCancelOnContentModified = new Set([\n        vscode_languageserver_protocol_1.SemanticTokensRequest.method,\n        vscode_languageserver_protocol_1.SemanticTokensRangeRequest.method,\n        vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.method\n    ]);\n    static CancellableResolveCalls = new Set([\n        vscode_languageserver_protocol_1.CompletionResolveRequest.method,\n        vscode_languageserver_protocol_1.CodeLensResolveRequest.method,\n        vscode_languageserver_protocol_1.CodeActionResolveRequest.method,\n        vscode_languageserver_protocol_1.InlayHintResolveRequest.method,\n        vscode_languageserver_protocol_1.DocumentLinkResolveRequest.method,\n        vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.method\n    ]);\n    handleFailedRequest(type, token, error, defaultValue, showNotification = true, throwOnCancel = false) {\n        // If we get a request cancel or a content modified don't log anything.\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError) {\n            // The connection got disposed while we were waiting for a response.\n            // Simply return the default value. Is the best we can do.\n            if (error.code === vscode_languageserver_protocol_1.ErrorCodes.PendingResponseRejected || error.code === vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive) {\n                return defaultValue;\n            }\n            if (error.code === vscode_languageserver_protocol_1.LSPErrorCodes.RequestCancelled || error.code === vscode_languageserver_protocol_1.LSPErrorCodes.ServerCancelled) {\n                if (token !== undefined && token.isCancellationRequested && !throwOnCancel) {\n                    return defaultValue;\n                }\n                else {\n                    if (error.data !== undefined) {\n                        throw new features_1.LSPCancellationError(error.data);\n                    }\n                    else {\n                        throw new vscode_1.CancellationError();\n                    }\n                }\n            }\n            else if (error.code === vscode_languageserver_protocol_1.LSPErrorCodes.ContentModified) {\n                if (BaseLanguageClient.RequestsToCancelOnContentModified.has(type.method) || BaseLanguageClient.CancellableResolveCalls.has(type.method)) {\n                    throw new vscode_1.CancellationError();\n                }\n                else {\n                    return defaultValue;\n                }\n            }\n        }\n        this.error(`Request ${type.method} failed.`, error, showNotification);\n        throw error;\n    }\n}\nexports.BaseLanguageClient = BaseLanguageClient;\nclass LanguageClient extends BaseLanguageClient {\n    serverOptions;\n    constructor(id, name, serverOptions, clientOptions) {\n        super(id, name, clientOptions);\n        this.serverOptions = serverOptions;\n    }\n    async createMessageTransports(_encoding) {\n        return this.serverOptions();\n    }\n}\nexports.LanguageClient = LanguageClient;\nclass ConsoleLogger {\n    error(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.error(message);\n    }\n    warn(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.warn(message);\n    }\n    info(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.info(message);\n    }\n    log(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.log(message);\n    }\n}\nfunction createConnection(input, output, errorHandler, closeHandler, options) {\n    const logger = new ConsoleLogger();\n    const connection = (0, vscode_languageserver_protocol_1.createProtocolConnection)(input, output, logger, options);\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\n    connection.onClose(closeHandler);\n    const result = {\n        listen: () => connection.listen(),\n        sendRequest: connection.sendRequest,\n        onRequest: connection.onRequest,\n        hasPendingResponse: connection.hasPendingResponse,\n        sendNotification: connection.sendNotification,\n        onNotification: connection.onNotification,\n        onProgress: connection.onProgress,\n        sendProgress: connection.sendProgress,\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\n            const defaultTraceOptions = {\n                sendNotification: false,\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\n            };\n            if (sendNotificationOrTraceOptions === undefined) {\n                return connection.trace(value, tracer, defaultTraceOptions);\n            }\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\n                return connection.trace(value, tracer, sendNotificationOrTraceOptions);\n            }\n            else {\n                return connection.trace(value, tracer, sendNotificationOrTraceOptions);\n            }\n        },\n        initialize: (params) => {\n            // This needs to return and MUST not be await to avoid any async\n            // scheduling. Otherwise messages might overtake each other.\n            return connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params);\n        },\n        shutdown: () => {\n            // This needs to return and MUST not be await to avoid any async\n            // scheduling. Otherwise messages might overtake each other.\n            return connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined);\n        },\n        exit: () => {\n            // This needs to return and MUST not be await to avoid any async\n            // scheduling. Otherwise messages might overtake each other.\n            return connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type);\n        },\n        end: () => connection.end(),\n        dispose: () => connection.dispose()\n    };\n    return result;\n}\n// Exporting proposed protocol.\nvar ProposedFeatures;\n(function (ProposedFeatures) {\n    function createAll(_client) {\n        const result = [\n            new inlineCompletion_1.InlineCompletionItemFeature(_client),\n            new textDocumentContent_1.TextDocumentContentFeature(_client)\n        ];\n        return result;\n    }\n    ProposedFeatures.createAll = createAll;\n})(ProposedFeatures || (exports.ProposedFeatures = ProposedFeatures = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineValueRefreshRequest = exports.InlineValueRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline values in a document. The request's parameter is of\n * type {@link InlineValueParams}, the response is of type\n * {@link InlineValue InlineValue[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlineValueRequest;\n(function (InlineValueRequest) {\n    InlineValueRequest.method = 'textDocument/inlineValue';\n    InlineValueRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineValueRequest.type = new messages_1.ProtocolRequestType(InlineValueRequest.method);\n    InlineValueRequest.capabilities = messages_1.CM.create('textDocument.inlineValue', 'inlineValueProvider');\n})(InlineValueRequest || (exports.InlineValueRequest = InlineValueRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlineValueRefreshRequest;\n(function (InlineValueRefreshRequest) {\n    InlineValueRefreshRequest.method = `workspace/inlineValue/refresh`;\n    InlineValueRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlineValueRefreshRequest.type = new messages_1.ProtocolRequestType0(InlineValueRefreshRequest.method);\n    InlineValueRefreshRequest.capabilities = messages_1.CM.create('workspace.inlineValue.refreshSupport', undefined);\n})(InlineValueRefreshRequest || (exports.InlineValueRefreshRequest = InlineValueRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentHighlightFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass DocumentHighlightFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentHighlightProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentHighlights: (document, position, token) => {\n                const client = this._client;\n                const _provideDocumentHighlights = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDocumentHighlights(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentHighlights\n                    ? middleware.provideDocumentHighlights(document, position, token, _provideDocumentHighlights)\n                    : _provideDocumentHighlights(document, position, token);\n            }\n        };\n        return [vscode_1.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentHighlightFeature = DocumentHighlightFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst api_1 = require(\"../common/api\");\nclass MessageBuffer extends api_1.AbstractMessageBuffer {\n    static emptyBuffer = new Uint8Array(0);\n    asciiDecoder;\n    constructor(encoding = 'utf-8') {\n        super(encoding);\n        this.asciiDecoder = new TextDecoder('ascii');\n    }\n    emptyBuffer() {\n        return MessageBuffer.emptyBuffer;\n    }\n    fromString(value, _encoding) {\n        return (new TextEncoder()).encode(value);\n    }\n    toString(value, encoding) {\n        if (encoding === 'ascii') {\n            return this.asciiDecoder.decode(value);\n        }\n        else {\n            return (new TextDecoder(encoding)).decode(value);\n        }\n    }\n    asNative(buffer, length) {\n        if (length === undefined) {\n            return buffer;\n        }\n        else {\n            return buffer.slice(0, length);\n        }\n    }\n    allocNative(length) {\n        return new Uint8Array(length);\n    }\n}\nclass ReadableStreamWrapper {\n    socket;\n    _onData;\n    _messageListener;\n    constructor(socket) {\n        this.socket = socket;\n        this._onData = new api_1.Emitter();\n        this._messageListener = (event) => {\n            const blob = event.data;\n            blob.arrayBuffer().then((buffer) => {\n                this._onData.fire(new Uint8Array(buffer));\n            }, () => {\n                (0, api_1.RAL)().console.error(`Converting blob to array buffer failed.`);\n            });\n        };\n        this.socket.addEventListener('message', this._messageListener);\n    }\n    onClose(listener) {\n        this.socket.addEventListener('close', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('close', listener));\n    }\n    onError(listener) {\n        this.socket.addEventListener('error', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('error', listener));\n    }\n    onEnd(listener) {\n        this.socket.addEventListener('end', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('end', listener));\n    }\n    onData(listener) {\n        return this._onData.event(listener);\n    }\n}\nclass WritableStreamWrapper {\n    socket;\n    constructor(socket) {\n        this.socket = socket;\n    }\n    onClose(listener) {\n        this.socket.addEventListener('close', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('close', listener));\n    }\n    onError(listener) {\n        this.socket.addEventListener('error', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('error', listener));\n    }\n    onEnd(listener) {\n        this.socket.addEventListener('end', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('end', listener));\n    }\n    write(data, encoding) {\n        if (typeof data === 'string') {\n            if (encoding !== undefined && encoding !== 'utf-8') {\n                throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${encoding}`);\n            }\n            this.socket.send(data);\n        }\n        else {\n            this.socket.send(data);\n        }\n        return Promise.resolve();\n    }\n    end() {\n        this.socket.close();\n    }\n}\nconst _textEncoder = new TextEncoder();\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                if (options.charset !== 'utf-8') {\n                    throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${options.charset}`);\n                }\n                return Promise.resolve(_textEncoder.encode(JSON.stringify(msg, undefined, 0)));\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                if (!(buffer instanceof Uint8Array)) {\n                    throw new Error(`In a Browser environments only Uint8Arrays are supported.`);\n                }\n                return Promise.resolve(JSON.parse(new TextDecoder(options.charset).decode(buffer)));\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (socket) => new ReadableStreamWrapper(socket),\n        asWritableStream: (socket) => new WritableStreamWrapper(socket)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setTimeout(callback, 0, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        },\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        api_1.RAL.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolean = boolean;\nexports.string = string;\nexports.number = number;\nexports.error = error;\nexports.func = func;\nexports.array = array;\nexports.stringArray = stringArray;\nexports.typedArray = typedArray;\nexports.thenable = thenable;\nexports.asPromise = asPromise;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nfunction error(value) {\n    return value instanceof Error;\n}\nfunction func(value) {\n    return typeof value === 'function';\n}\nfunction array(value) {\n    return Array.isArray(value);\n}\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nfunction thenable(value) {\n    return value && func(value.then);\n}\nfunction asPromise(value) {\n    if (value instanceof Promise) {\n        return value;\n    }\n    else if (thenable(value)) {\n        return new Promise((resolve, reject) => {\n            value.then((resolved) => resolve(resolved), (error) => reject(error));\n        });\n    }\n    else {\n        return Promise.resolve(value);\n    }\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Definition} or a Thenable that resolves to such.\n */\nvar TypeDefinitionRequest;\n(function (TypeDefinitionRequest) {\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\n    TypeDefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\n    TypeDefinitionRequest.capabilities = messages_1.CM.create('textDocument.typeDefinition', 'typeDefinitionProvider');\n})(TypeDefinitionRequest || (exports.TypeDefinitionRequest = TypeDefinitionRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass WorkspaceSymbol extends code.SymbolInformation {\n    data;\n    hasRange;\n    constructor(name, kind, containerName, locationOrUri, data) {\n        const hasRange = !(locationOrUri instanceof code.Uri);\n        super(name, kind, containerName, hasRange ? locationOrUri : new code.Location(locationOrUri, new code.Range(0, 0, 0, 0)));\n        this.hasRange = hasRange;\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nexports.default = WorkspaceSymbol;\n","module.exports = require(\"vscode\");","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensFeature = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst Is = __importStar(require(\"./utils/is\"));\nclass SemanticTokensFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SemanticTokensRegistrationType.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'semanticTokens');\n        capability.dynamicRegistration = true;\n        capability.tokenTypes = [\n            vscode_languageserver_protocol_1.SemanticTokenTypes.namespace,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.type,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.class,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.enum,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.interface,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.struct,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.typeParameter,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.parameter,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.variable,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.property,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.enumMember,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.event,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.function,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.method,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.macro,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.keyword,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.comment,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.string,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.number,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.regexp,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.operator,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.decorator,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.label\n        ];\n        capability.tokenModifiers = [\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.declaration,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.definition,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.readonly,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.static,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.deprecated,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.abstract,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.async,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.modification,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.documentation,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.defaultLibrary\n        ];\n        capability.formats = [vscode_languageserver_protocol_1.TokenFormat.Relative];\n        capability.requests = {\n            range: true,\n            full: {\n                delta: true\n            }\n        };\n        capability.multilineTokenSupport = false;\n        capability.overlappingTokenSupport = false;\n        capability.serverCancelSupport = true;\n        capability.augmentsSyntaxTokens = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'semanticTokens').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.SemanticTokensRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeSemanticTokensEmitter.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.semanticTokensProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const fullProvider = Is.boolean(options.full) ? options.full : options.full !== undefined;\n        const hasEditProvider = options.full !== undefined && typeof options.full !== 'boolean' && options.full.delta === true;\n        const eventEmitter = new vscode.EventEmitter();\n        const documentProvider = fullProvider\n            ? {\n                onDidChangeSemanticTokens: eventEmitter.event,\n                provideDocumentSemanticTokens: (document, token) => {\n                    const client = this._client;\n                    const middleware = client.middleware;\n                    const provideDocumentSemanticTokens = (document, token) => {\n                        const params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.SemanticTokensRequest.type, params, token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asSemanticTokens(result, token);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensRequest.type, token, error, null);\n                        });\n                    };\n                    return middleware.provideDocumentSemanticTokens\n                        ? middleware.provideDocumentSemanticTokens(document, token, provideDocumentSemanticTokens)\n                        : provideDocumentSemanticTokens(document, token);\n                },\n                provideDocumentSemanticTokensEdits: hasEditProvider\n                    ? (document, previousResultId, token) => {\n                        const client = this._client;\n                        const middleware = client.middleware;\n                        const provideDocumentSemanticTokensEdits = (document, previousResultId, token) => {\n                            const params = {\n                                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                                previousResultId\n                            };\n                            return client.sendRequest(vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type, params, token).then(async (result) => {\n                                if (token.isCancellationRequested) {\n                                    return null;\n                                }\n                                if (vscode_languageserver_protocol_1.SemanticTokens.is(result)) {\n                                    return await client.protocol2CodeConverter.asSemanticTokens(result, token);\n                                }\n                                else {\n                                    return await client.protocol2CodeConverter.asSemanticTokensEdits(result, token);\n                                }\n                            }, (error) => {\n                                return client.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type, token, error, null);\n                            });\n                        };\n                        return middleware.provideDocumentSemanticTokensEdits\n                            ? middleware.provideDocumentSemanticTokensEdits(document, previousResultId, token, provideDocumentSemanticTokensEdits)\n                            : provideDocumentSemanticTokensEdits(document, previousResultId, token);\n                    }\n                    : undefined\n            }\n            : undefined;\n        const hasRangeProvider = options.range === true;\n        const rangeProvider = hasRangeProvider\n            ? {\n                provideDocumentRangeSemanticTokens: (document, range, token) => {\n                    const client = this._client;\n                    const middleware = client.middleware;\n                    const provideDocumentRangeSemanticTokens = (document, range, token) => {\n                        const params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                            range: client.code2ProtocolConverter.asRange(range)\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type, params, token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asSemanticTokens(result, token);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type, token, error, null);\n                        });\n                    };\n                    return middleware.provideDocumentRangeSemanticTokens\n                        ? middleware.provideDocumentRangeSemanticTokens(document, range, token, provideDocumentRangeSemanticTokens)\n                        : provideDocumentRangeSemanticTokens(document, range, token);\n                }\n            }\n            : undefined;\n        const disposables = [];\n        const client = this._client;\n        const legend = client.protocol2CodeConverter.asSemanticTokensLegend(options.legend);\n        const documentSelector = client.protocol2CodeConverter.asDocumentSelector(selector);\n        if (documentProvider !== undefined) {\n            disposables.push(vscode.languages.registerDocumentSemanticTokensProvider(documentSelector, documentProvider, legend));\n        }\n        if (rangeProvider !== undefined) {\n            disposables.push(vscode.languages.registerDocumentRangeSemanticTokensProvider(documentSelector, rangeProvider, legend));\n        }\n        return [new vscode.Disposable(() => disposables.forEach(item => item.dispose())), { range: rangeProvider, full: documentProvider, onDidChangeSemanticTokensEmitter: eventEmitter }];\n    }\n}\nexports.SemanticTokensFeature = SemanticTokensFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass ProtocolCodeLens extends code.CodeLens {\n    data;\n    constructor(range) {\n        super(range);\n    }\n}\nexports.default = ProtocolCodeLens;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = void 0;\nconst ral_1 = __importDefault(require(\"./ral\"));\nconst Is = __importStar(require(\"./is\"));\nconst events_1 = require(\"./events\");\nconst semaphore_1 = require(\"./semaphore\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader || (exports.MessageReader = MessageReader = {}));\nclass AbstractMessageReader {\n    errorEmitter;\n    closeEmitter;\n    partialMessageEmitter;\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n        this.partialMessageEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options ?? 'utf-8';\n        }\n        else {\n            charset = options.charset ?? 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = (0, ral_1.default)().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    readable;\n    options;\n    callback;\n    nextMessageLength;\n    messageToken;\n    buffer;\n    partialMessageTimer;\n    _partialMessageTimeout;\n    readSemaphore;\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = (0, ral_1.default)().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.readSemaphore = new semaphore_1.Semaphore(1);\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        try {\n            this.buffer.append(data);\n            while (true) {\n                if (this.nextMessageLength === -1) {\n                    const headers = this.buffer.tryReadHeaders(true);\n                    if (!headers) {\n                        return;\n                    }\n                    const contentLength = headers.get('content-length');\n                    if (!contentLength) {\n                        this.fireError(new Error(`Header must provide a Content-Length property.\\n${JSON.stringify(Object.fromEntries(headers))}`));\n                        return;\n                    }\n                    const length = parseInt(contentLength);\n                    if (isNaN(length)) {\n                        this.fireError(new Error(`Content-Length value must be a number. Got ${contentLength}`));\n                        return;\n                    }\n                    this.nextMessageLength = length;\n                }\n                const body = this.buffer.tryReadBody(this.nextMessageLength);\n                if (body === undefined) {\n                    /** We haven't received the full message yet. */\n                    this.setPartialMessageTimer();\n                    return;\n                }\n                this.clearPartialMessageTimer();\n                this.nextMessageLength = -1;\n                // Make sure that we convert one received message after the\n                // other. Otherwise it could happen that a decoding of a second\n                // smaller message finished before the decoding of a first larger\n                // message and then we would deliver the second message first.\n                this.readSemaphore.lock(async () => {\n                    const bytes = this.options.contentDecoder !== undefined\n                        ? await this.options.contentDecoder.decode(body)\n                        : body;\n                    const message = await this.options.contentTypeDecoder.decode(bytes, this.options);\n                    this.callback(message);\n                }).catch((error) => {\n                    this.fireError(error);\n                });\n            }\n        }\n        catch (error) {\n            this.fireError(error);\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            this.partialMessageTimer.dispose();\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = (0, ral_1.default)().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass ProtocolCallHierarchyItem extends code.CallHierarchyItem {\n    data;\n    constructor(kind, name, detail, uri, range, selectionRange, data) {\n        super(kind, name, detail, uri, range, selectionRange);\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nexports.default = ProtocolCallHierarchyItem;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeActionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst features_1 = require(\"./features\");\nclass CodeActionFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const cap = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'codeAction');\n        cap.dynamicRegistration = true;\n        cap.isPreferredSupport = true;\n        cap.disabledSupport = true;\n        cap.dataSupport = true;\n        // We can only resolve the edit property.\n        cap.resolveSupport = {\n            properties: ['edit', 'command']\n        };\n        cap.codeActionLiteralSupport = {\n            codeActionKind: {\n                valueSet: [\n                    vscode_languageserver_protocol_1.CodeActionKind.Empty,\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorMove,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports,\n                    vscode_languageserver_protocol_1.CodeActionKind.Notebook\n                ]\n            }\n        };\n        cap.honorsChangeAnnotations = true;\n        cap.documentationSupport = true;\n        cap.tagSupport = {\n            valueSet: [vscode_languageserver_protocol_1.CodeActionTag.LLMGenerated]\n        };\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeActionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideCodeActions: (document, range, context, token) => {\n                const client = this._client;\n                const _provideCodeActions = async (document, range, context, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(range),\n                        context: client.code2ProtocolConverter.asCodeActionContextSync(context)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\n                        if (token.isCancellationRequested || values === null || values === undefined) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asCodeActionResult(values, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideCodeActions\n                    ? middleware.provideCodeActions(document, range, context, token, _provideCodeActions)\n                    : _provideCodeActions(document, range, context, token);\n            },\n            resolveCodeAction: options.resolveProvider\n                ? (item, token) => {\n                    const client = this._client;\n                    const middleware = this._client.middleware;\n                    const resolveCodeAction = async (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeActionResolveRequest.type, client.code2ProtocolConverter.asCodeActionSync(item), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return item;\n                            }\n                            return client.protocol2CodeConverter.asCodeAction(result, token);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeActionResolveRequest.type, token, error, item);\n                        });\n                    };\n                    return middleware.resolveCodeAction\n                        ? middleware.resolveCodeAction(item, token, resolveCodeAction)\n                        : resolveCodeAction(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, this.getMetadata(options)), provider];\n    }\n    getMetadata(options) {\n        if (options.codeActionKinds === undefined && options.documentation === undefined) {\n            return undefined;\n        }\n        return {\n            providedCodeActionKinds: this._client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds),\n            documentation: this._client.protocol2CodeConverter.asCodeActionDocumentations(options.documentation)\n        };\n    }\n}\nexports.CodeActionFeature = CodeActionFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = createProtocolConnection;\nconst browser_1 = require(\"vscode-jsonrpc/browser\");\n__exportStar(require(\"vscode-jsonrpc/browser\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nfunction createProtocolConnection(reader, writer, logger, options) {\n    return (0, browser_1.createMessageConnection)(reader, writer, logger, options);\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the implementation locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Definition} or a Thenable that resolves to such.\n */\nvar ImplementationRequest;\n(function (ImplementationRequest) {\n    ImplementationRequest.method = 'textDocument/implementation';\n    ImplementationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\n    ImplementationRequest.capabilities = messages_1.CM.create('textDocument.implementation', 'implementationProvider');\n})(ImplementationRequest || (exports.ImplementationRequest = ImplementationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = void 0;\nconst ral_1 = __importDefault(require(\"./ral\"));\nconst Is = __importStar(require(\"./is\"));\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter || (exports.MessageWriter = MessageWriter = {}));\nclass AbstractMessageWriter {\n    errorEmitter;\n    closeEmitter;\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options ?? 'utf-8', contentTypeEncoder: (0, ral_1.default)().applicationJson.encoder };\n        }\n        else {\n            return { charset: options.charset ?? 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: options.contentTypeEncoder ?? (0, ral_1.default)().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    writable;\n    options;\n    errorCount;\n    writeSemaphore;\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        return this.writeSemaphore.lock(async () => {\n            const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n                if (this.options.contentEncoder !== undefined) {\n                    return this.options.contentEncoder.encode(buffer);\n                }\n                else {\n                    return buffer;\n                }\n            });\n            return payload.then((buffer) => {\n                const headers = [];\n                headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n                headers.push(CRLF);\n                return this.doWrite(msg, headers, buffer);\n            }, (error) => {\n                this.fireError(error);\n                throw error;\n            });\n        });\n    }\n    async doWrite(msg, headers, data) {\n        try {\n            await this.writable.write(headers.join(''), 'ascii');\n            return this.writable.write(data);\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n        this.writable.end();\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingFeature = void 0;\nconst code = __importStar(require(\"vscode\"));\nconst proto = __importStar(require(\"vscode-languageserver-protocol\"));\nconst features_1 = require(\"./features\");\nclass LinkedEditingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, proto.LinkedEditingRangeRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const linkedEditingSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'linkedEditingRange');\n        linkedEditingSupport.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.linkedEditingRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideLinkedEditingRanges: (document, position, token) => {\n                const client = this._client;\n                const provideLinkedEditing = (document, position, token) => {\n                    return client.sendRequest(proto.LinkedEditingRangeRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asLinkedEditingRanges(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(proto.LinkedEditingRangeRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideLinkedEditingRange\n                    ? middleware.provideLinkedEditingRange(document, position, token, provideLinkedEditing)\n                    : provideLinkedEditing(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return code.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.LinkedEditingFeature = LinkedEditingFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticPullMode = exports.vsdiag = void 0;\n__exportStar(require(\"vscode-languageserver-protocol\"), exports);\n__exportStar(require(\"./features\"), exports);\nvar diagnostic_1 = require(\"./diagnostic\");\nObject.defineProperty(exports, \"vsdiag\", { enumerable: true, get: function () { return diagnostic_1.vsdiag; } });\nObject.defineProperty(exports, \"DiagnosticPullMode\", { enumerable: true, get: function () { return diagnostic_1.DiagnosticPullMode; } });\n__exportStar(require(\"./client\"), exports);\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineCompletionItemFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass InlineCompletionItemFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.InlineCompletionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const inlineCompletion = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'inlineCompletion');\n        inlineCompletion.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.inlineCompletionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideInlineCompletionItems: (document, position, context, token) => {\n                const client = this._client;\n                const middleware = this._client.middleware;\n                const provideInlineCompletionItems = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.InlineCompletionRequest.type, client.code2ProtocolConverter.asInlineCompletionParams(document, position, context), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asInlineCompletionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlineCompletionRequest.type, token, error, null);\n                    });\n                };\n                return middleware.provideInlineCompletionItems\n                    ? middleware.provideInlineCompletionItems(document, position, context, token, provideInlineCompletionItems)\n                    : provideInlineCompletionItems(document, position, context, token);\n            }\n        };\n        return [vscode_1.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.InlineCompletionItemFeature = InlineCompletionItemFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * Moniker uniqueness level to define scope of the moniker.\n *\n * @since 3.16.0\n */\nvar UniquenessLevel;\n(function (UniquenessLevel) {\n    /**\n     * The moniker is only unique inside a document\n     */\n    UniquenessLevel.document = 'document';\n    /**\n     * The moniker is unique inside a project for which a dump got created\n     */\n    UniquenessLevel.project = 'project';\n    /**\n     * The moniker is unique inside the group to which a project belongs\n     */\n    UniquenessLevel.group = 'group';\n    /**\n     * The moniker is unique inside the moniker scheme.\n     */\n    UniquenessLevel.scheme = 'scheme';\n    /**\n     * The moniker is globally unique\n     */\n    UniquenessLevel.global = 'global';\n})(UniquenessLevel || (exports.UniquenessLevel = UniquenessLevel = {}));\n/**\n * The moniker kind.\n *\n * @since 3.16.0\n */\nvar MonikerKind;\n(function (MonikerKind) {\n    /**\n     * The moniker represent a symbol that is imported into a project\n     */\n    MonikerKind.$import = 'import';\n    /**\n     * The moniker represents a symbol that is exported from a project\n     */\n    MonikerKind.$export = 'export';\n    /**\n     * The moniker represents a symbol that is local to a project (e.g. a local\n     * variable of a function, a class not visible outside the project, ...)\n     */\n    MonikerKind.local = 'local';\n})(MonikerKind || (exports.MonikerKind = MonikerKind = {}));\n/**\n * A request to get the moniker of a symbol at a given text document position.\n * The request parameter is of type {@link TextDocumentPositionParams}.\n * The response is of type {@link Moniker Moniker[]} or `null`.\n */\nvar MonikerRequest;\n(function (MonikerRequest) {\n    MonikerRequest.method = 'textDocument/moniker';\n    MonikerRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    MonikerRequest.type = new messages_1.ProtocolRequestType(MonikerRequest.method);\n    MonikerRequest.capabilities = messages_1.CM.create('textDocument.moniker', 'monikerProvider');\n})(MonikerRequest || (exports.MonikerRequest = MonikerRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExecuteCommandFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst features_1 = require(\"./features\");\nclass ExecuteCommandFeature {\n    _client;\n    _commands;\n    constructor(client) {\n        this._client = client;\n        this._commands = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._commands.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\n    }\n    initialize(capabilities) {\n        if (!capabilities.executeCommandProvider) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\n        });\n    }\n    register(data) {\n        const client = this._client;\n        const middleware = client.middleware;\n        const executeCommand = (command, args) => {\n            const params = {\n                command,\n                arguments: args\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, undefined, error, undefined);\n            });\n        };\n        if (data.registerOptions.commands) {\n            const disposables = [];\n            for (const command of data.registerOptions.commands) {\n                disposables.push(vscode_1.commands.registerCommand(command, (...args) => {\n                    return middleware.executeCommand\n                        ? middleware.executeCommand(command, args, executeCommand)\n                        : executeCommand(command, args);\n                }));\n            }\n            this._commands.set(data.id, disposables);\n        }\n    }\n    unregister(id) {\n        const disposables = this._commands.get(id);\n        if (disposables) {\n            this._commands.delete(id);\n            disposables.forEach(disposable => disposable.dispose());\n        }\n    }\n    clear() {\n        this._commands.forEach((value) => {\n            value.forEach(disposable => disposable.dispose());\n        });\n        this._commands.clear();\n    }\n}\nexports.ExecuteCommandFeature = ExecuteCommandFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass FoldingRangeFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'foldingRange');\n        capability.dynamicRegistration = true;\n        capability.rangeLimit = 5000;\n        capability.lineFoldingOnly = true;\n        capability.foldingRangeKind = { valueSet: [vscode_languageserver_protocol_1.FoldingRangeKind.Comment, vscode_languageserver_protocol_1.FoldingRangeKind.Imports, vscode_languageserver_protocol_1.FoldingRangeKind.Region] };\n        capability.foldingRange = { collapsedText: false };\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'foldingRange').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        this._client.onRequest(vscode_languageserver_protocol_1.FoldingRangeRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeFoldingRange.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.foldingRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeFoldingRanges: eventEmitter.event,\n            provideFoldingRanges: (document, context, token) => {\n                const client = this._client;\n                const provideFoldingRanges = (document, _, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asFoldingRanges(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideFoldingRanges\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\n                    : provideFoldingRanges(document, context, token);\n            }\n        };\n        return [vscode_1.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), { provider: provider, onDidChangeFoldingRange: eventEmitter }];\n    }\n}\nexports.FoldingRangeFeature = FoldingRangeFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode = __importStar(require(\"vscode\"));\nclass ProtocolCodeAction extends vscode.CodeAction {\n    data;\n    constructor(title, data) {\n        super(title);\n        this.data = data;\n    }\n}\nexports.default = ProtocolCodeAction;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Disposable = void 0;\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable || (exports.Disposable = Disposable = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\n */\nvar WorkspaceFoldersRequest;\n(function (WorkspaceFoldersRequest) {\n    WorkspaceFoldersRequest.method = 'workspace/workspaceFolders';\n    WorkspaceFoldersRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0(WorkspaceFoldersRequest.method);\n    WorkspaceFoldersRequest.capabilities = messages_1.CM.create('workspace.workspaceFolders', 'workspace.workspaceFolders');\n})(WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = WorkspaceFoldersRequest = {}));\n/**\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\n * folder configuration changes.\n */\nvar DidChangeWorkspaceFoldersNotification;\n(function (DidChangeWorkspaceFoldersNotification) {\n    DidChangeWorkspaceFoldersNotification.method = 'workspace/didChangeWorkspaceFolders';\n    DidChangeWorkspaceFoldersNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType(DidChangeWorkspaceFoldersNotification.method);\n    DidChangeWorkspaceFoldersNotification.capabilities = messages_1.CM.create(undefined, 'workspace.workspaceFolders.changeNotifications');\n})(DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = DidChangeWorkspaceFoldersNotification = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.range = exports.balanced = void 0;\nconst balanced = (a, b, str) => {\n    const ma = a instanceof RegExp ? maybeMatch(a, str) : a;\n    const mb = b instanceof RegExp ? maybeMatch(b, str) : b;\n    const r = ma !== null && mb != null && (0, exports.range)(ma, mb, str);\n    return (r && {\n        start: r[0],\n        end: r[1],\n        pre: str.slice(0, r[0]),\n        body: str.slice(r[0] + ma.length, r[1]),\n        post: str.slice(r[1] + mb.length),\n    });\n};\nexports.balanced = balanced;\nconst maybeMatch = (reg, str) => {\n    const m = str.match(reg);\n    return m ? m[0] : null;\n};\nconst range = (a, b, str) => {\n    let begs, beg, left, right = undefined, result;\n    let ai = str.indexOf(a);\n    let bi = str.indexOf(b, ai + 1);\n    let i = ai;\n    if (ai >= 0 && bi > 0) {\n        if (a === b) {\n            return [ai, bi];\n        }\n        begs = [];\n        left = str.length;\n        while (i >= 0 && !result) {\n            if (i === ai) {\n                begs.push(i);\n                ai = str.indexOf(a, i + 1);\n            }\n            else if (begs.length === 1) {\n                const r = begs.pop();\n                if (r !== undefined)\n                    result = [r, bi];\n            }\n            else {\n                beg = begs.pop();\n                if (beg !== undefined && beg < left) {\n                    left = beg;\n                    right = bi;\n                }\n                bi = str.indexOf(b, i + 1);\n            }\n            i = ai < bi && ai >= 0 ? ai : bi;\n        }\n        if (begs.length && right !== undefined) {\n            result = [left, right];\n        }\n    }\n    return result;\n};\nexports.range = range;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unescape = exports.escape = exports.AST = exports.Minimatch = exports.match = exports.makeRe = exports.braceExpand = exports.defaults = exports.filter = exports.GLOBSTAR = exports.sep = exports.minimatch = void 0;\nconst brace_expansion_1 = require(\"@isaacs/brace-expansion\");\nconst assert_valid_pattern_js_1 = require(\"./assert-valid-pattern.js\");\nconst ast_js_1 = require(\"./ast.js\");\nconst escape_js_1 = require(\"./escape.js\");\nconst unescape_js_1 = require(\"./unescape.js\");\nconst minimatch = (p, pattern, options = {}) => {\n    (0, assert_valid_pattern_js_1.assertValidPattern)(pattern);\n    // shortcut: comments match nothing.\n    if (!options.nocomment && pattern.charAt(0) === '#') {\n        return false;\n    }\n    return new Minimatch(pattern, options).match(p);\n};\nexports.minimatch = minimatch;\n// Optimized checking for the most common glob patterns.\nconst starDotExtRE = /^\\*+([^+@!?\\*\\[\\(]*)$/;\nconst starDotExtTest = (ext) => (f) => !f.startsWith('.') && f.endsWith(ext);\nconst starDotExtTestDot = (ext) => (f) => f.endsWith(ext);\nconst starDotExtTestNocase = (ext) => {\n    ext = ext.toLowerCase();\n    return (f) => !f.startsWith('.') && f.toLowerCase().endsWith(ext);\n};\nconst starDotExtTestNocaseDot = (ext) => {\n    ext = ext.toLowerCase();\n    return (f) => f.toLowerCase().endsWith(ext);\n};\nconst starDotStarRE = /^\\*+\\.\\*+$/;\nconst starDotStarTest = (f) => !f.startsWith('.') && f.includes('.');\nconst starDotStarTestDot = (f) => f !== '.' && f !== '..' && f.includes('.');\nconst dotStarRE = /^\\.\\*+$/;\nconst dotStarTest = (f) => f !== '.' && f !== '..' && f.startsWith('.');\nconst starRE = /^\\*+$/;\nconst starTest = (f) => f.length !== 0 && !f.startsWith('.');\nconst starTestDot = (f) => f.length !== 0 && f !== '.' && f !== '..';\nconst qmarksRE = /^\\?+([^+@!?\\*\\[\\(]*)?$/;\nconst qmarksTestNocase = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExt([$0]);\n    if (!ext)\n        return noext;\n    ext = ext.toLowerCase();\n    return (f) => noext(f) && f.toLowerCase().endsWith(ext);\n};\nconst qmarksTestNocaseDot = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExtDot([$0]);\n    if (!ext)\n        return noext;\n    ext = ext.toLowerCase();\n    return (f) => noext(f) && f.toLowerCase().endsWith(ext);\n};\nconst qmarksTestDot = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExtDot([$0]);\n    return !ext ? noext : (f) => noext(f) && f.endsWith(ext);\n};\nconst qmarksTest = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExt([$0]);\n    return !ext ? noext : (f) => noext(f) && f.endsWith(ext);\n};\nconst qmarksTestNoExt = ([$0]) => {\n    const len = $0.length;\n    return (f) => f.length === len && !f.startsWith('.');\n};\nconst qmarksTestNoExtDot = ([$0]) => {\n    const len = $0.length;\n    return (f) => f.length === len && f !== '.' && f !== '..';\n};\n/* c8 ignore start */\nconst defaultPlatform = (typeof process === 'object' && process\n    ? (typeof process.env === 'object' &&\n        process.env &&\n        process.env.__MINIMATCH_TESTING_PLATFORM__) ||\n        process.platform\n    : 'posix');\nconst path = {\n    win32: { sep: '\\\\' },\n    posix: { sep: '/' },\n};\n/* c8 ignore stop */\nexports.sep = defaultPlatform === 'win32' ? path.win32.sep : path.posix.sep;\nexports.minimatch.sep = exports.sep;\nexports.GLOBSTAR = Symbol('globstar **');\nexports.minimatch.GLOBSTAR = exports.GLOBSTAR;\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nconst qmark = '[^/]';\n// * => any number of characters\nconst star = qmark + '*?';\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nconst twoStarDot = '(?:(?!(?:\\\\/|^)(?:\\\\.{1,2})($|\\\\/)).)*?';\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nconst twoStarNoDot = '(?:(?!(?:\\\\/|^)\\\\.).)*?';\nconst filter = (pattern, options = {}) => (p) => (0, exports.minimatch)(p, pattern, options);\nexports.filter = filter;\nexports.minimatch.filter = exports.filter;\nconst ext = (a, b = {}) => Object.assign({}, a, b);\nconst defaults = (def) => {\n    if (!def || typeof def !== 'object' || !Object.keys(def).length) {\n        return exports.minimatch;\n    }\n    const orig = exports.minimatch;\n    const m = (p, pattern, options = {}) => orig(p, pattern, ext(def, options));\n    return Object.assign(m, {\n        Minimatch: class Minimatch extends orig.Minimatch {\n            constructor(pattern, options = {}) {\n                super(pattern, ext(def, options));\n            }\n            static defaults(options) {\n                return orig.defaults(ext(def, options)).Minimatch;\n            }\n        },\n        AST: class AST extends orig.AST {\n            /* c8 ignore start */\n            constructor(type, parent, options = {}) {\n                super(type, parent, ext(def, options));\n            }\n            /* c8 ignore stop */\n            static fromGlob(pattern, options = {}) {\n                return orig.AST.fromGlob(pattern, ext(def, options));\n            }\n        },\n        unescape: (s, options = {}) => orig.unescape(s, ext(def, options)),\n        escape: (s, options = {}) => orig.escape(s, ext(def, options)),\n        filter: (pattern, options = {}) => orig.filter(pattern, ext(def, options)),\n        defaults: (options) => orig.defaults(ext(def, options)),\n        makeRe: (pattern, options = {}) => orig.makeRe(pattern, ext(def, options)),\n        braceExpand: (pattern, options = {}) => orig.braceExpand(pattern, ext(def, options)),\n        match: (list, pattern, options = {}) => orig.match(list, pattern, ext(def, options)),\n        sep: orig.sep,\n        GLOBSTAR: exports.GLOBSTAR,\n    });\n};\nexports.defaults = defaults;\nexports.minimatch.defaults = exports.defaults;\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nconst braceExpand = (pattern, options = {}) => {\n    (0, assert_valid_pattern_js_1.assertValidPattern)(pattern);\n    // Thanks to Yeting Li <https://github.com/yetingli> for\n    // improving this regexp to avoid a ReDOS vulnerability.\n    if (options.nobrace || !/\\{(?:(?!\\{).)*\\}/.test(pattern)) {\n        // shortcut. no need to expand.\n        return [pattern];\n    }\n    return (0, brace_expansion_1.expand)(pattern);\n};\nexports.braceExpand = braceExpand;\nexports.minimatch.braceExpand = exports.braceExpand;\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nconst makeRe = (pattern, options = {}) => new Minimatch(pattern, options).makeRe();\nexports.makeRe = makeRe;\nexports.minimatch.makeRe = exports.makeRe;\nconst match = (list, pattern, options = {}) => {\n    const mm = new Minimatch(pattern, options);\n    list = list.filter(f => mm.match(f));\n    if (mm.options.nonull && !list.length) {\n        list.push(pattern);\n    }\n    return list;\n};\nexports.match = match;\nexports.minimatch.match = exports.match;\n// replace stuff like \\* with *\nconst globMagic = /[?*]|[+@!]\\(.*?\\)|\\[|\\]/;\nconst regExpEscape = (s) => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\nclass Minimatch {\n    options;\n    set;\n    pattern;\n    windowsPathsNoEscape;\n    nonegate;\n    negate;\n    comment;\n    empty;\n    preserveMultipleSlashes;\n    partial;\n    globSet;\n    globParts;\n    nocase;\n    isWindows;\n    platform;\n    windowsNoMagicRoot;\n    regexp;\n    constructor(pattern, options = {}) {\n        (0, assert_valid_pattern_js_1.assertValidPattern)(pattern);\n        options = options || {};\n        this.options = options;\n        this.pattern = pattern;\n        this.platform = options.platform || defaultPlatform;\n        this.isWindows = this.platform === 'win32';\n        this.windowsPathsNoEscape =\n            !!options.windowsPathsNoEscape || options.allowWindowsEscape === false;\n        if (this.windowsPathsNoEscape) {\n            this.pattern = this.pattern.replace(/\\\\/g, '/');\n        }\n        this.preserveMultipleSlashes = !!options.preserveMultipleSlashes;\n        this.regexp = null;\n        this.negate = false;\n        this.nonegate = !!options.nonegate;\n        this.comment = false;\n        this.empty = false;\n        this.partial = !!options.partial;\n        this.nocase = !!this.options.nocase;\n        this.windowsNoMagicRoot =\n            options.windowsNoMagicRoot !== undefined\n                ? options.windowsNoMagicRoot\n                : !!(this.isWindows && this.nocase);\n        this.globSet = [];\n        this.globParts = [];\n        this.set = [];\n        // make the set of regexps etc.\n        this.make();\n    }\n    hasMagic() {\n        if (this.options.magicalBraces && this.set.length > 1) {\n            return true;\n        }\n        for (const pattern of this.set) {\n            for (const part of pattern) {\n                if (typeof part !== 'string')\n                    return true;\n            }\n        }\n        return false;\n    }\n    debug(..._) { }\n    make() {\n        const pattern = this.pattern;\n        const options = this.options;\n        // empty patterns and comments match nothing.\n        if (!options.nocomment && pattern.charAt(0) === '#') {\n            this.comment = true;\n            return;\n        }\n        if (!pattern) {\n            this.empty = true;\n            return;\n        }\n        // step 1: figure out negation, etc.\n        this.parseNegate();\n        // step 2: expand braces\n        this.globSet = [...new Set(this.braceExpand())];\n        if (options.debug) {\n            this.debug = (...args) => console.error(...args);\n        }\n        this.debug(this.pattern, this.globSet);\n        // step 3: now we have a set, so turn each one into a series of\n        // path-portion matching patterns.\n        // These will be regexps, except in the case of \"**\", which is\n        // set to the GLOBSTAR object for globstar behavior,\n        // and will not contain any / characters\n        //\n        // First, we preprocess to make the glob pattern sets a bit simpler\n        // and deduped.  There are some perf-killing patterns that can cause\n        // problems with a glob walk, but we can simplify them down a bit.\n        const rawGlobParts = this.globSet.map(s => this.slashSplit(s));\n        this.globParts = this.preprocess(rawGlobParts);\n        this.debug(this.pattern, this.globParts);\n        // glob --> regexps\n        let set = this.globParts.map((s, _, __) => {\n            if (this.isWindows && this.windowsNoMagicRoot) {\n                // check if it's a drive or unc path.\n                const isUNC = s[0] === '' &&\n                    s[1] === '' &&\n                    (s[2] === '?' || !globMagic.test(s[2])) &&\n                    !globMagic.test(s[3]);\n                const isDrive = /^[a-z]:/i.test(s[0]);\n                if (isUNC) {\n                    return [...s.slice(0, 4), ...s.slice(4).map(ss => this.parse(ss))];\n                }\n                else if (isDrive) {\n                    return [s[0], ...s.slice(1).map(ss => this.parse(ss))];\n                }\n            }\n            return s.map(ss => this.parse(ss));\n        });\n        this.debug(this.pattern, set);\n        // filter out everything that didn't compile properly.\n        this.set = set.filter(s => s.indexOf(false) === -1);\n        // do not treat the ? in UNC paths as magic\n        if (this.isWindows) {\n            for (let i = 0; i < this.set.length; i++) {\n                const p = this.set[i];\n                if (p[0] === '' &&\n                    p[1] === '' &&\n                    this.globParts[i][2] === '?' &&\n                    typeof p[3] === 'string' &&\n                    /^[a-z]:$/i.test(p[3])) {\n                    p[2] = '?';\n                }\n            }\n        }\n        this.debug(this.pattern, this.set);\n    }\n    // various transforms to equivalent pattern sets that are\n    // faster to process in a filesystem walk.  The goal is to\n    // eliminate what we can, and push all ** patterns as far\n    // to the right as possible, even if it increases the number\n    // of patterns that we have to process.\n    preprocess(globParts) {\n        // if we're not in globstar mode, then turn all ** into *\n        if (this.options.noglobstar) {\n            for (let i = 0; i < globParts.length; i++) {\n                for (let j = 0; j < globParts[i].length; j++) {\n                    if (globParts[i][j] === '**') {\n                        globParts[i][j] = '*';\n                    }\n                }\n            }\n        }\n        const { optimizationLevel = 1 } = this.options;\n        if (optimizationLevel >= 2) {\n            // aggressive optimization for the purpose of fs walking\n            globParts = this.firstPhasePreProcess(globParts);\n            globParts = this.secondPhasePreProcess(globParts);\n        }\n        else if (optimizationLevel >= 1) {\n            // just basic optimizations to remove some .. parts\n            globParts = this.levelOneOptimize(globParts);\n        }\n        else {\n            // just collapse multiple ** portions into one\n            globParts = this.adjascentGlobstarOptimize(globParts);\n        }\n        return globParts;\n    }\n    // just get rid of adjascent ** portions\n    adjascentGlobstarOptimize(globParts) {\n        return globParts.map(parts => {\n            let gs = -1;\n            while (-1 !== (gs = parts.indexOf('**', gs + 1))) {\n                let i = gs;\n                while (parts[i + 1] === '**') {\n                    i++;\n                }\n                if (i !== gs) {\n                    parts.splice(gs, i - gs);\n                }\n            }\n            return parts;\n        });\n    }\n    // get rid of adjascent ** and resolve .. portions\n    levelOneOptimize(globParts) {\n        return globParts.map(parts => {\n            parts = parts.reduce((set, part) => {\n                const prev = set[set.length - 1];\n                if (part === '**' && prev === '**') {\n                    return set;\n                }\n                if (part === '..') {\n                    if (prev && prev !== '..' && prev !== '.' && prev !== '**') {\n                        set.pop();\n                        return set;\n                    }\n                }\n                set.push(part);\n                return set;\n            }, []);\n            return parts.length === 0 ? [''] : parts;\n        });\n    }\n    levelTwoFileOptimize(parts) {\n        if (!Array.isArray(parts)) {\n            parts = this.slashSplit(parts);\n        }\n        let didSomething = false;\n        do {\n            didSomething = false;\n            // <pre>/<e>/<rest> -> <pre>/<rest>\n            if (!this.preserveMultipleSlashes) {\n                for (let i = 1; i < parts.length - 1; i++) {\n                    const p = parts[i];\n                    // don't squeeze out UNC patterns\n                    if (i === 1 && p === '' && parts[0] === '')\n                        continue;\n                    if (p === '.' || p === '') {\n                        didSomething = true;\n                        parts.splice(i, 1);\n                        i--;\n                    }\n                }\n                if (parts[0] === '.' &&\n                    parts.length === 2 &&\n                    (parts[1] === '.' || parts[1] === '')) {\n                    didSomething = true;\n                    parts.pop();\n                }\n            }\n            // <pre>/<p>/../<rest> -> <pre>/<rest>\n            let dd = 0;\n            while (-1 !== (dd = parts.indexOf('..', dd + 1))) {\n                const p = parts[dd - 1];\n                if (p && p !== '.' && p !== '..' && p !== '**') {\n                    didSomething = true;\n                    parts.splice(dd - 1, 2);\n                    dd -= 2;\n                }\n            }\n        } while (didSomething);\n        return parts.length === 0 ? [''] : parts;\n    }\n    // First phase: single-pattern processing\n    // <pre> is 1 or more portions\n    // <rest> is 1 or more portions\n    // <p> is any portion other than ., .., '', or **\n    // <e> is . or ''\n    //\n    // **/.. is *brutal* for filesystem walking performance, because\n    // it effectively resets the recursive walk each time it occurs,\n    // and ** cannot be reduced out by a .. pattern part like a regexp\n    // or most strings (other than .., ., and '') can be.\n    //\n    // <pre>/**/../<p>/<p>/<rest> -> {<pre>/../<p>/<p>/<rest>,<pre>/**/<p>/<p>/<rest>}\n    // <pre>/<e>/<rest> -> <pre>/<rest>\n    // <pre>/<p>/../<rest> -> <pre>/<rest>\n    // **/**/<rest> -> **/<rest>\n    //\n    // **/*/<rest> -> */**/<rest> <== not valid because ** doesn't follow\n    // this WOULD be allowed if ** did follow symlinks, or * didn't\n    firstPhasePreProcess(globParts) {\n        let didSomething = false;\n        do {\n            didSomething = false;\n            // <pre>/**/../<p>/<p>/<rest> -> {<pre>/../<p>/<p>/<rest>,<pre>/**/<p>/<p>/<rest>}\n            for (let parts of globParts) {\n                let gs = -1;\n                while (-1 !== (gs = parts.indexOf('**', gs + 1))) {\n                    let gss = gs;\n                    while (parts[gss + 1] === '**') {\n                        // <pre>/**/**/<rest> -> <pre>/**/<rest>\n                        gss++;\n                    }\n                    // eg, if gs is 2 and gss is 4, that means we have 3 **\n                    // parts, and can remove 2 of them.\n                    if (gss > gs) {\n                        parts.splice(gs + 1, gss - gs);\n                    }\n                    let next = parts[gs + 1];\n                    const p = parts[gs + 2];\n                    const p2 = parts[gs + 3];\n                    if (next !== '..')\n                        continue;\n                    if (!p ||\n                        p === '.' ||\n                        p === '..' ||\n                        !p2 ||\n                        p2 === '.' ||\n                        p2 === '..') {\n                        continue;\n                    }\n                    didSomething = true;\n                    // edit parts in place, and push the new one\n                    parts.splice(gs, 1);\n                    const other = parts.slice(0);\n                    other[gs] = '**';\n                    globParts.push(other);\n                    gs--;\n                }\n                // <pre>/<e>/<rest> -> <pre>/<rest>\n                if (!this.preserveMultipleSlashes) {\n                    for (let i = 1; i < parts.length - 1; i++) {\n                        const p = parts[i];\n                        // don't squeeze out UNC patterns\n                        if (i === 1 && p === '' && parts[0] === '')\n                            continue;\n                        if (p === '.' || p === '') {\n                            didSomething = true;\n                            parts.splice(i, 1);\n                            i--;\n                        }\n                    }\n                    if (parts[0] === '.' &&\n                        parts.length === 2 &&\n                        (parts[1] === '.' || parts[1] === '')) {\n                        didSomething = true;\n                        parts.pop();\n                    }\n                }\n                // <pre>/<p>/../<rest> -> <pre>/<rest>\n                let dd = 0;\n                while (-1 !== (dd = parts.indexOf('..', dd + 1))) {\n                    const p = parts[dd - 1];\n                    if (p && p !== '.' && p !== '..' && p !== '**') {\n                        didSomething = true;\n                        const needDot = dd === 1 && parts[dd + 1] === '**';\n                        const splin = needDot ? ['.'] : [];\n                        parts.splice(dd - 1, 2, ...splin);\n                        if (parts.length === 0)\n                            parts.push('');\n                        dd -= 2;\n                    }\n                }\n            }\n        } while (didSomething);\n        return globParts;\n    }\n    // second phase: multi-pattern dedupes\n    // {<pre>/*/<rest>,<pre>/<p>/<rest>} -> <pre>/*/<rest>\n    // {<pre>/<rest>,<pre>/<rest>} -> <pre>/<rest>\n    // {<pre>/**/<rest>,<pre>/<rest>} -> <pre>/**/<rest>\n    //\n    // {<pre>/**/<rest>,<pre>/**/<p>/<rest>} -> <pre>/**/<rest>\n    // ^-- not valid because ** doens't follow symlinks\n    secondPhasePreProcess(globParts) {\n        for (let i = 0; i < globParts.length - 1; i++) {\n            for (let j = i + 1; j < globParts.length; j++) {\n                const matched = this.partsMatch(globParts[i], globParts[j], !this.preserveMultipleSlashes);\n                if (matched) {\n                    globParts[i] = [];\n                    globParts[j] = matched;\n                    break;\n                }\n            }\n        }\n        return globParts.filter(gs => gs.length);\n    }\n    partsMatch(a, b, emptyGSMatch = false) {\n        let ai = 0;\n        let bi = 0;\n        let result = [];\n        let which = '';\n        while (ai < a.length && bi < b.length) {\n            if (a[ai] === b[bi]) {\n                result.push(which === 'b' ? b[bi] : a[ai]);\n                ai++;\n                bi++;\n            }\n            else if (emptyGSMatch && a[ai] === '**' && b[bi] === a[ai + 1]) {\n                result.push(a[ai]);\n                ai++;\n            }\n            else if (emptyGSMatch && b[bi] === '**' && a[ai] === b[bi + 1]) {\n                result.push(b[bi]);\n                bi++;\n            }\n            else if (a[ai] === '*' &&\n                b[bi] &&\n                (this.options.dot || !b[bi].startsWith('.')) &&\n                b[bi] !== '**') {\n                if (which === 'b')\n                    return false;\n                which = 'a';\n                result.push(a[ai]);\n                ai++;\n                bi++;\n            }\n            else if (b[bi] === '*' &&\n                a[ai] &&\n                (this.options.dot || !a[ai].startsWith('.')) &&\n                a[ai] !== '**') {\n                if (which === 'a')\n                    return false;\n                which = 'b';\n                result.push(b[bi]);\n                ai++;\n                bi++;\n            }\n            else {\n                return false;\n            }\n        }\n        // if we fall out of the loop, it means they two are identical\n        // as long as their lengths match\n        return a.length === b.length && result;\n    }\n    parseNegate() {\n        if (this.nonegate)\n            return;\n        const pattern = this.pattern;\n        let negate = false;\n        let negateOffset = 0;\n        for (let i = 0; i < pattern.length && pattern.charAt(i) === '!'; i++) {\n            negate = !negate;\n            negateOffset++;\n        }\n        if (negateOffset)\n            this.pattern = pattern.slice(negateOffset);\n        this.negate = negate;\n    }\n    // set partial to true to test if, for example,\n    // \"/a/b\" matches the start of \"/*/b/*/d\"\n    // Partial means, if you run out of file before you run\n    // out of pattern, then that's fine, as long as all\n    // the parts match.\n    matchOne(file, pattern, partial = false) {\n        const options = this.options;\n        // UNC paths like //?/X:/... can match X:/... and vice versa\n        // Drive letters in absolute drive or unc paths are always compared\n        // case-insensitively.\n        if (this.isWindows) {\n            const fileDrive = typeof file[0] === 'string' && /^[a-z]:$/i.test(file[0]);\n            const fileUNC = !fileDrive &&\n                file[0] === '' &&\n                file[1] === '' &&\n                file[2] === '?' &&\n                /^[a-z]:$/i.test(file[3]);\n            const patternDrive = typeof pattern[0] === 'string' && /^[a-z]:$/i.test(pattern[0]);\n            const patternUNC = !patternDrive &&\n                pattern[0] === '' &&\n                pattern[1] === '' &&\n                pattern[2] === '?' &&\n                typeof pattern[3] === 'string' &&\n                /^[a-z]:$/i.test(pattern[3]);\n            const fdi = fileUNC ? 3 : fileDrive ? 0 : undefined;\n            const pdi = patternUNC ? 3 : patternDrive ? 0 : undefined;\n            if (typeof fdi === 'number' && typeof pdi === 'number') {\n                const [fd, pd] = [file[fdi], pattern[pdi]];\n                if (fd.toLowerCase() === pd.toLowerCase()) {\n                    pattern[pdi] = fd;\n                    if (pdi > fdi) {\n                        pattern = pattern.slice(pdi);\n                    }\n                    else if (fdi > pdi) {\n                        file = file.slice(fdi);\n                    }\n                }\n            }\n        }\n        // resolve and reduce . and .. portions in the file as well.\n        // dont' need to do the second phase, because it's only one string[]\n        const { optimizationLevel = 1 } = this.options;\n        if (optimizationLevel >= 2) {\n            file = this.levelTwoFileOptimize(file);\n        }\n        this.debug('matchOne', this, { file, pattern });\n        this.debug('matchOne', file.length, pattern.length);\n        for (var fi = 0, pi = 0, fl = file.length, pl = pattern.length; fi < fl && pi < pl; fi++, pi++) {\n            this.debug('matchOne loop');\n            var p = pattern[pi];\n            var f = file[fi];\n            this.debug(pattern, p, f);\n            // should be impossible.\n            // some invalid regexp stuff in the set.\n            /* c8 ignore start */\n            if (p === false) {\n                return false;\n            }\n            /* c8 ignore stop */\n            if (p === exports.GLOBSTAR) {\n                this.debug('GLOBSTAR', [pattern, p, f]);\n                // \"**\"\n                // a/**/b/**/c would match the following:\n                // a/b/x/y/z/c\n                // a/x/y/z/b/c\n                // a/b/x/b/x/c\n                // a/b/c\n                // To do this, take the rest of the pattern after\n                // the **, and see if it would match the file remainder.\n                // If so, return success.\n                // If not, the ** \"swallows\" a segment, and try again.\n                // This is recursively awful.\n                //\n                // a/**/b/**/c matching a/b/x/y/z/c\n                // - a matches a\n                // - doublestar\n                //   - matchOne(b/x/y/z/c, b/**/c)\n                //     - b matches b\n                //     - doublestar\n                //       - matchOne(x/y/z/c, c) -> no\n                //       - matchOne(y/z/c, c) -> no\n                //       - matchOne(z/c, c) -> no\n                //       - matchOne(c, c) yes, hit\n                var fr = fi;\n                var pr = pi + 1;\n                if (pr === pl) {\n                    this.debug('** at the end');\n                    // a ** at the end will just swallow the rest.\n                    // We have found a match.\n                    // however, it will not swallow /.x, unless\n                    // options.dot is set.\n                    // . and .. are *never* matched by **, for explosively\n                    // exponential reasons.\n                    for (; fi < fl; fi++) {\n                        if (file[fi] === '.' ||\n                            file[fi] === '..' ||\n                            (!options.dot && file[fi].charAt(0) === '.'))\n                            return false;\n                    }\n                    return true;\n                }\n                // ok, let's see if we can swallow whatever we can.\n                while (fr < fl) {\n                    var swallowee = file[fr];\n                    this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee);\n                    // XXX remove this slice.  Just pass the start index.\n                    if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n                        this.debug('globstar found match!', fr, fl, swallowee);\n                        // found a match.\n                        return true;\n                    }\n                    else {\n                        // can't swallow \".\" or \"..\" ever.\n                        // can only swallow \".foo\" when explicitly asked.\n                        if (swallowee === '.' ||\n                            swallowee === '..' ||\n                            (!options.dot && swallowee.charAt(0) === '.')) {\n                            this.debug('dot detected!', file, fr, pattern, pr);\n                            break;\n                        }\n                        // ** swallows a segment, and continue.\n                        this.debug('globstar swallow a segment, and continue');\n                        fr++;\n                    }\n                }\n                // no match was found.\n                // However, in partial mode, we can't say this is necessarily over.\n                /* c8 ignore start */\n                if (partial) {\n                    // ran out of file\n                    this.debug('\\n>>> no match, partial?', file, fr, pattern, pr);\n                    if (fr === fl) {\n                        return true;\n                    }\n                }\n                /* c8 ignore stop */\n                return false;\n            }\n            // something other than **\n            // non-magic patterns just have to match exactly\n            // patterns with magic have been turned into regexps.\n            let hit;\n            if (typeof p === 'string') {\n                hit = f === p;\n                this.debug('string match', p, f, hit);\n            }\n            else {\n                hit = p.test(f);\n                this.debug('pattern match', p, f, hit);\n            }\n            if (!hit)\n                return false;\n        }\n        // Note: ending in / means that we'll get a final \"\"\n        // at the end of the pattern.  This can only match a\n        // corresponding \"\" at the end of the file.\n        // If the file ends in /, then it can only match a\n        // a pattern that ends in /, unless the pattern just\n        // doesn't have any more for it. But, a/b/ should *not*\n        // match \"a/b/*\", even though \"\" matches against the\n        // [^/]*? pattern, except in partial mode, where it might\n        // simply not be reached yet.\n        // However, a/b/ should still satisfy a/*\n        // now either we fell off the end of the pattern, or we're done.\n        if (fi === fl && pi === pl) {\n            // ran out of pattern and filename at the same time.\n            // an exact hit!\n            return true;\n        }\n        else if (fi === fl) {\n            // ran out of file, but still had pattern left.\n            // this is ok if we're doing the match as part of\n            // a glob fs traversal.\n            return partial;\n        }\n        else if (pi === pl) {\n            // ran out of pattern, still have file left.\n            // this is only acceptable if we're on the very last\n            // empty segment of a file with a trailing slash.\n            // a/* should match a/b/\n            return fi === fl - 1 && file[fi] === '';\n            /* c8 ignore start */\n        }\n        else {\n            // should be unreachable.\n            throw new Error('wtf?');\n        }\n        /* c8 ignore stop */\n    }\n    braceExpand() {\n        return (0, exports.braceExpand)(this.pattern, this.options);\n    }\n    parse(pattern) {\n        (0, assert_valid_pattern_js_1.assertValidPattern)(pattern);\n        const options = this.options;\n        // shortcuts\n        if (pattern === '**')\n            return exports.GLOBSTAR;\n        if (pattern === '')\n            return '';\n        // far and away, the most common glob pattern parts are\n        // *, *.*, and *.<ext>  Add a fast check method for those.\n        let m;\n        let fastTest = null;\n        if ((m = pattern.match(starRE))) {\n            fastTest = options.dot ? starTestDot : starTest;\n        }\n        else if ((m = pattern.match(starDotExtRE))) {\n            fastTest = (options.nocase\n                ? options.dot\n                    ? starDotExtTestNocaseDot\n                    : starDotExtTestNocase\n                : options.dot\n                    ? starDotExtTestDot\n                    : starDotExtTest)(m[1]);\n        }\n        else if ((m = pattern.match(qmarksRE))) {\n            fastTest = (options.nocase\n                ? options.dot\n                    ? qmarksTestNocaseDot\n                    : qmarksTestNocase\n                : options.dot\n                    ? qmarksTestDot\n                    : qmarksTest)(m);\n        }\n        else if ((m = pattern.match(starDotStarRE))) {\n            fastTest = options.dot ? starDotStarTestDot : starDotStarTest;\n        }\n        else if ((m = pattern.match(dotStarRE))) {\n            fastTest = dotStarTest;\n        }\n        const re = ast_js_1.AST.fromGlob(pattern, this.options).toMMPattern();\n        if (fastTest && typeof re === 'object') {\n            // Avoids overriding in frozen environments\n            Reflect.defineProperty(re, 'test', { value: fastTest });\n        }\n        return re;\n    }\n    makeRe() {\n        if (this.regexp || this.regexp === false)\n            return this.regexp;\n        // at this point, this.set is a 2d array of partial\n        // pattern strings, or \"**\".\n        //\n        // It's better to use .match().  This function shouldn't\n        // be used, really, but it's pretty convenient sometimes,\n        // when you just want to work with a regex.\n        const set = this.set;\n        if (!set.length) {\n            this.regexp = false;\n            return this.regexp;\n        }\n        const options = this.options;\n        const twoStar = options.noglobstar\n            ? star\n            : options.dot\n                ? twoStarDot\n                : twoStarNoDot;\n        const flags = new Set(options.nocase ? ['i'] : []);\n        // regexpify non-globstar patterns\n        // if ** is only item, then we just do one twoStar\n        // if ** is first, and there are more, prepend (\\/|twoStar\\/)? to next\n        // if ** is last, append (\\/twoStar|) to previous\n        // if ** is in the middle, append (\\/|\\/twoStar\\/) to previous\n        // then filter out GLOBSTAR symbols\n        let re = set\n            .map(pattern => {\n            const pp = pattern.map(p => {\n                if (p instanceof RegExp) {\n                    for (const f of p.flags.split(''))\n                        flags.add(f);\n                }\n                return typeof p === 'string'\n                    ? regExpEscape(p)\n                    : p === exports.GLOBSTAR\n                        ? exports.GLOBSTAR\n                        : p._src;\n            });\n            pp.forEach((p, i) => {\n                const next = pp[i + 1];\n                const prev = pp[i - 1];\n                if (p !== exports.GLOBSTAR || prev === exports.GLOBSTAR) {\n                    return;\n                }\n                if (prev === undefined) {\n                    if (next !== undefined && next !== exports.GLOBSTAR) {\n                        pp[i + 1] = '(?:\\\\/|' + twoStar + '\\\\/)?' + next;\n                    }\n                    else {\n                        pp[i] = twoStar;\n                    }\n                }\n                else if (next === undefined) {\n                    pp[i - 1] = prev + '(?:\\\\/|' + twoStar + ')?';\n                }\n                else if (next !== exports.GLOBSTAR) {\n                    pp[i - 1] = prev + '(?:\\\\/|\\\\/' + twoStar + '\\\\/)' + next;\n                    pp[i + 1] = exports.GLOBSTAR;\n                }\n            });\n            return pp.filter(p => p !== exports.GLOBSTAR).join('/');\n        })\n            .join('|');\n        // need to wrap in parens if we had more than one thing with |,\n        // otherwise only the first will be anchored to ^ and the last to $\n        const [open, close] = set.length > 1 ? ['(?:', ')'] : ['', ''];\n        // must match entire pattern\n        // ending in a * or ** will make it less strict.\n        re = '^' + open + re + close + '$';\n        // can match anything, as long as it's not this.\n        if (this.negate)\n            re = '^(?!' + re + ').+$';\n        try {\n            this.regexp = new RegExp(re, [...flags].join(''));\n            /* c8 ignore start */\n        }\n        catch (ex) {\n            // should be impossible\n            this.regexp = false;\n        }\n        /* c8 ignore stop */\n        return this.regexp;\n    }\n    slashSplit(p) {\n        // if p starts with // on windows, we preserve that\n        // so that UNC paths aren't broken.  Otherwise, any number of\n        // / characters are coalesced into one, unless\n        // preserveMultipleSlashes is set to true.\n        if (this.preserveMultipleSlashes) {\n            return p.split('/');\n        }\n        else if (this.isWindows && /^\\/\\/[^\\/]+/.test(p)) {\n            // add an extra '' for the one we lose\n            return ['', ...p.split(/\\/+/)];\n        }\n        else {\n            return p.split(/\\/+/);\n        }\n    }\n    match(f, partial = this.partial) {\n        this.debug('match', f, this.pattern);\n        // short-circuit in the case of busted things.\n        // comments, etc.\n        if (this.comment) {\n            return false;\n        }\n        if (this.empty) {\n            return f === '';\n        }\n        if (f === '/' && partial) {\n            return true;\n        }\n        const options = this.options;\n        // windows: need to use /, not \\\n        if (this.isWindows) {\n            f = f.split('\\\\').join('/');\n        }\n        // treat the test path as a set of pathparts.\n        const ff = this.slashSplit(f);\n        this.debug(this.pattern, 'split', ff);\n        // just ONE of the pattern sets in this.set needs to match\n        // in order for it to be valid.  If negating, then just one\n        // match means that we have failed.\n        // Either way, return on the first hit.\n        const set = this.set;\n        this.debug(this.pattern, 'set', set);\n        // Find the basename of the path by looking for the last non-empty segment\n        let filename = ff[ff.length - 1];\n        if (!filename) {\n            for (let i = ff.length - 2; !filename && i >= 0; i--) {\n                filename = ff[i];\n            }\n        }\n        for (let i = 0; i < set.length; i++) {\n            const pattern = set[i];\n            let file = ff;\n            if (options.matchBase && pattern.length === 1) {\n                file = [filename];\n            }\n            const hit = this.matchOne(file, pattern, partial);\n            if (hit) {\n                if (options.flipNegate) {\n                    return true;\n                }\n                return !this.negate;\n            }\n        }\n        // didn't get any hits.  this is success if it's a negative\n        // pattern, failure otherwise.\n        if (options.flipNegate) {\n            return false;\n        }\n        return this.negate;\n    }\n    static defaults(def) {\n        return exports.minimatch.defaults(def).Minimatch;\n    }\n}\nexports.Minimatch = Minimatch;\n/* c8 ignore start */\nvar ast_js_2 = require(\"./ast.js\");\nObject.defineProperty(exports, \"AST\", { enumerable: true, get: function () { return ast_js_2.AST; } });\nvar escape_js_2 = require(\"./escape.js\");\nObject.defineProperty(exports, \"escape\", { enumerable: true, get: function () { return escape_js_2.escape; } });\nvar unescape_js_2 = require(\"./unescape.js\");\nObject.defineProperty(exports, \"unescape\", { enumerable: true, get: function () { return unescape_js_2.unescape; } });\n/* c8 ignore stop */\nexports.minimatch.AST = ast_js_1.AST;\nexports.minimatch.Minimatch = Minimatch;\nexports.minimatch.escape = escape_js_1.escape;\nexports.minimatch.unescape = unescape_js_1.unescape;\n//# sourceMappingURL=index.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LSPErrorCodes = exports.createProtocolConnection = void 0;\n__exportStar(require(\"vscode-jsonrpc\"), exports);\n__exportStar(require(\"vscode-languageserver-types\"), exports);\n__exportStar(require(\"./messages\"), exports);\n__exportStar(require(\"./protocol\"), exports);\nvar connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"createProtocolConnection\", { enumerable: true, get: function () { return connection_1.createProtocolConnection; } });\nvar LSPErrorCodes;\n(function (LSPErrorCodes) {\n    /**\n    * This is the start range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeStart = -32899;\n    /**\n     * A request failed but it was syntactically correct, e.g the\n     * method name was known and the parameters were valid. The error\n     * message should contain human readable information about why\n     * the request failed.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.RequestFailed = -32803;\n    /**\n     * The server cancelled the request. This error code should\n     * only be used for requests that explicitly support being\n     * server cancellable.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.ServerCancelled = -32802;\n    /**\n     * The server detected that the content of a document got\n     * modified outside normal conditions. A server should\n     * NOT send this error code if it detects a content change\n     * in it unprocessed messages. The result even computed\n     * on an older state might still be useful for the client.\n     *\n     * If a client decides that a result is not of any use anymore\n     * the client should cancel the request.\n     */\n    LSPErrorCodes.ContentModified = -32801;\n    /**\n     * The client has canceled a request and a server has detected\n     * the cancel.\n     */\n    LSPErrorCodes.RequestCancelled = -32800;\n    /**\n    * This is the end range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeEnd = -32800;\n})(LSPErrorCodes || (exports.LSPErrorCodes = LSPErrorCodes = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CompletionItemFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst SupportedCompletionItemKinds = [\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\n];\nclass CompletionItemFeature extends features_1.TextDocumentLanguageFeature {\n    labelDetailsSupport;\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\n        this.labelDetailsSupport = new Map();\n    }\n    fillClientCapabilities(capabilities) {\n        const completion = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'completion');\n        completion.dynamicRegistration = true;\n        completion.contextSupport = true;\n        completion.completionItem = {\n            snippetSupport: true,\n            commitCharactersSupport: true,\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\n            deprecatedSupport: true,\n            preselectSupport: true,\n            tagSupport: { valueSet: [vscode_languageserver_protocol_1.CompletionItemTag.Deprecated] },\n            insertReplaceSupport: true,\n            resolveSupport: {\n                properties: ['documentation', 'detail', 'additionalTextEdits']\n            },\n            insertTextModeSupport: { valueSet: [vscode_languageserver_protocol_1.InsertTextMode.asIs, vscode_languageserver_protocol_1.InsertTextMode.adjustIndentation] },\n            labelDetailsSupport: true\n        };\n        completion.insertTextMode = vscode_languageserver_protocol_1.InsertTextMode.adjustIndentation;\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\n        completion.completionList = {\n            itemDefaults: [\n                'commitCharacters', 'editRange', 'insertTextFormat', 'insertTextMode', 'data'\n            ],\n            applyKindSupport: true,\n        };\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.completionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options, id) {\n        this.labelDetailsSupport.set(id, !!options.completionItem?.labelDetailsSupport);\n        const triggerCharacters = options.triggerCharacters ?? [];\n        const defaultCommitCharacters = options.allCommitCharacters;\n        const selector = options.documentSelector;\n        const provider = {\n            provideCompletionItems: (document, position, token, context) => {\n                const client = this._client;\n                const middleware = this._client.middleware;\n                const provideCompletionItems = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asCompletionResult(result, defaultCommitCharacters, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, token, error, null);\n                    });\n                };\n                return middleware.provideCompletionItem\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\n                    : provideCompletionItems(document, position, context, token);\n            },\n            resolveCompletionItem: options.resolveProvider\n                ? (item, token) => {\n                    const client = this._client;\n                    const middleware = this._client.middleware;\n                    const resolveCompletionItem = (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item, !!this.labelDetailsSupport.get(id)), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asCompletionItem(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, token, error, item);\n                        });\n                    };\n                    return middleware.resolveCompletionItem\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\n                        : resolveCompletionItem(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, ...triggerCharacters), provider];\n    }\n}\nexports.CompletionItemFeature = CompletionItemFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.SemanticTokensRegistrationType = exports.TokenFormat = void 0;\nconst messages_1 = require(\"./messages\");\n//------- 'textDocument/semanticTokens' -----\nvar TokenFormat;\n(function (TokenFormat) {\n    TokenFormat.Relative = 'relative';\n})(TokenFormat || (exports.TokenFormat = TokenFormat = {}));\nvar SemanticTokensRegistrationType;\n(function (SemanticTokensRegistrationType) {\n    SemanticTokensRegistrationType.method = 'textDocument/semanticTokens';\n    SemanticTokensRegistrationType.type = new messages_1.RegistrationType(SemanticTokensRegistrationType.method);\n})(SemanticTokensRegistrationType || (exports.SemanticTokensRegistrationType = SemanticTokensRegistrationType = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRequest;\n(function (SemanticTokensRequest) {\n    SemanticTokensRequest.method = 'textDocument/semanticTokens/full';\n    SemanticTokensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\n    SemanticTokensRequest.registrationMethod = SemanticTokensRegistrationType.method;\n    SemanticTokensRequest.capabilities = messages_1.CM.create('textDocument.semanticTokens', 'semanticTokensProvider');\n})(SemanticTokensRequest || (exports.SemanticTokensRequest = SemanticTokensRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensDeltaRequest;\n(function (SemanticTokensDeltaRequest) {\n    SemanticTokensDeltaRequest.method = 'textDocument/semanticTokens/full/delta';\n    SemanticTokensDeltaRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensDeltaRequest.type = new messages_1.ProtocolRequestType(SemanticTokensDeltaRequest.method);\n    SemanticTokensDeltaRequest.registrationMethod = SemanticTokensRegistrationType.method;\n    SemanticTokensDeltaRequest.capabilities = messages_1.CM.create('textDocument.semanticTokens.requests.full.delta', 'semanticTokensProvider.full.delta');\n})(SemanticTokensDeltaRequest || (exports.SemanticTokensDeltaRequest = SemanticTokensDeltaRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRangeRequest;\n(function (SemanticTokensRangeRequest) {\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\n    SemanticTokensRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\n    SemanticTokensRangeRequest.registrationMethod = SemanticTokensRegistrationType.method;\n    SemanticTokensRangeRequest.capabilities = messages_1.CM.create('textDocument.semanticTokens.requests.range', 'semanticTokensProvider.range');\n})(SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = SemanticTokensRangeRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRefreshRequest;\n(function (SemanticTokensRefreshRequest) {\n    SemanticTokensRefreshRequest.method = `workspace/semanticTokens/refresh`;\n    SemanticTokensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    SemanticTokensRefreshRequest.type = new messages_1.ProtocolRequestType0(SemanticTokensRefreshRequest.method);\n    SemanticTokensRefreshRequest.capabilities = messages_1.CM.create('workspace.semanticTokens.refreshSupport', undefined);\n})(SemanticTokensRefreshRequest || (exports.SemanticTokensRefreshRequest = SemanticTokensRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.matchGlobPattern = matchGlobPattern;\nconst minimatch = __importStar(require(\"minimatch\"));\nconst vscode_1 = require(\"vscode\");\nfunction matchGlobPattern(pattern, resource) {\n    let miniMatchPattern;\n    if (typeof pattern === 'string') {\n        miniMatchPattern = pattern.replace(/\\\\/g, '/');\n    }\n    else {\n        try {\n            const baseUri = vscode_1.Uri.parse(typeof pattern.baseUri === 'string' ? pattern.baseUri : pattern.baseUri.uri);\n            miniMatchPattern = baseUri.with({ path: baseUri.path + '/' + pattern.pattern }).fsPath.replace(/\\\\/g, '/');\n        }\n        catch (error) {\n            return false;\n        }\n    }\n    const matcher = new minimatch.Minimatch(miniMatchPattern, { noext: true });\n    if (!matcher.makeRe()) {\n        return false;\n    }\n    return matcher.match(resource.fsPath);\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LanguageClient = void 0;\nconst api_1 = require(\"../common/api\");\nconst browser_1 = require(\"vscode-languageserver-protocol/browser\");\n__exportStar(require(\"vscode-languageserver-protocol/browser\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nclass LanguageClient extends api_1.BaseLanguageClient {\n    serverOptions;\n    constructor(id, name, serverOptions, clientOptions) {\n        super(id, name, clientOptions);\n        this.serverOptions = serverOptions;\n    }\n    async createMessageTransports(_encoding) {\n        if (typeof this.serverOptions === 'function') {\n            const result = await this.serverOptions();\n            if (result instanceof Worker) {\n                return this.createMessageTransportsFromWorker(result);\n            }\n            else {\n                return result;\n            }\n        }\n        else {\n            return this.createMessageTransportsFromWorker(this.serverOptions);\n        }\n    }\n    createMessageTransportsFromWorker(worker) {\n        const reader = new browser_1.BrowserMessageReader(worker);\n        const writer = new browser_1.BrowserMessageWriter(worker);\n        return Promise.resolve({ reader, writer });\n    }\n}\nexports.LanguageClient = LanguageClient;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = void 0;\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = __importStar(require(\"./utils/is\"));\nconst messages_1 = require(\"./messages\");\n/**\n * A notebook cell kind.\n *\n * @since 3.17.0\n */\nvar NotebookCellKind;\n(function (NotebookCellKind) {\n    /**\n     * A markup-cell is formatted source that is used for display.\n     */\n    NotebookCellKind.Markup = 1;\n    /**\n     * A code-cell is source code.\n     */\n    NotebookCellKind.Code = 2;\n    function is(value) {\n        return value === 1 || value === 2;\n    }\n    NotebookCellKind.is = is;\n})(NotebookCellKind || (exports.NotebookCellKind = NotebookCellKind = {}));\nvar ExecutionSummary;\n(function (ExecutionSummary) {\n    function create(executionOrder, success) {\n        const result = { executionOrder };\n        if (success === true || success === false) {\n            result.success = success;\n        }\n        return result;\n    }\n    ExecutionSummary.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.executionOrder) && (candidate.success === undefined || Is.boolean(candidate.success));\n    }\n    ExecutionSummary.is = is;\n    function equals(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        return one.executionOrder === other.executionOrder && one.success === other.success;\n    }\n    ExecutionSummary.equals = equals;\n})(ExecutionSummary || (exports.ExecutionSummary = ExecutionSummary = {}));\nvar NotebookCell;\n(function (NotebookCell) {\n    function create(kind, document) {\n        return { kind, document };\n    }\n    NotebookCell.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && NotebookCellKind.is(candidate.kind) && vscode_languageserver_types_1.DocumentUri.is(candidate.document) &&\n            (candidate.metadata === undefined || Is.objectLiteral(candidate.metadata));\n    }\n    NotebookCell.is = is;\n    function diff(one, two) {\n        const result = new Set();\n        if (one.document !== two.document) {\n            result.add('document');\n        }\n        if (one.kind !== two.kind) {\n            result.add('kind');\n        }\n        if (one.executionSummary !== two.executionSummary) {\n            result.add('executionSummary');\n        }\n        if ((one.metadata !== undefined || two.metadata !== undefined) && !equalsMetadata(one.metadata, two.metadata)) {\n            result.add('metadata');\n        }\n        if ((one.executionSummary !== undefined || two.executionSummary !== undefined) && !ExecutionSummary.equals(one.executionSummary, two.executionSummary)) {\n            result.add('executionSummary');\n        }\n        return result;\n    }\n    NotebookCell.diff = diff;\n    function equalsMetadata(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        if (typeof one !== typeof other) {\n            return false;\n        }\n        if (typeof one !== 'object') {\n            return false;\n        }\n        const oneArray = Array.isArray(one);\n        const otherArray = Array.isArray(other);\n        if (oneArray !== otherArray) {\n            return false;\n        }\n        if (oneArray && otherArray) {\n            if (one.length !== other.length) {\n                return false;\n            }\n            for (let i = 0; i < one.length; i++) {\n                if (!equalsMetadata(one[i], other[i])) {\n                    return false;\n                }\n            }\n        }\n        if (Is.objectLiteral(one) && Is.objectLiteral(other)) {\n            const oneKeys = Object.keys(one);\n            const otherKeys = Object.keys(other);\n            if (oneKeys.length !== otherKeys.length) {\n                return false;\n            }\n            oneKeys.sort();\n            otherKeys.sort();\n            if (!equalsMetadata(oneKeys, otherKeys)) {\n                return false;\n            }\n            for (let i = 0; i < oneKeys.length; i++) {\n                const prop = oneKeys[i];\n                if (!equalsMetadata(one[prop], other[prop])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n})(NotebookCell || (exports.NotebookCell = NotebookCell = {}));\nvar NotebookDocument;\n(function (NotebookDocument) {\n    function create(uri, notebookType, version, cells) {\n        return { uri, notebookType, version, cells };\n    }\n    NotebookDocument.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.uri) && vscode_languageserver_types_1.integer.is(candidate.version) && Is.typedArray(candidate.cells, NotebookCell.is);\n    }\n    NotebookDocument.is = is;\n})(NotebookDocument || (exports.NotebookDocument = NotebookDocument = {}));\nvar NotebookDocumentSyncRegistrationType;\n(function (NotebookDocumentSyncRegistrationType) {\n    NotebookDocumentSyncRegistrationType.method = 'notebookDocument/sync';\n    NotebookDocumentSyncRegistrationType.messageDirection = messages_1.MessageDirection.clientToServer;\n    NotebookDocumentSyncRegistrationType.type = new messages_1.RegistrationType(NotebookDocumentSyncRegistrationType.method);\n})(NotebookDocumentSyncRegistrationType || (exports.NotebookDocumentSyncRegistrationType = NotebookDocumentSyncRegistrationType = {}));\n/**\n * A notification sent when a notebook opens.\n *\n * @since 3.17.0\n */\nvar DidOpenNotebookDocumentNotification;\n(function (DidOpenNotebookDocumentNotification) {\n    DidOpenNotebookDocumentNotification.method = 'notebookDocument/didOpen';\n    DidOpenNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenNotebookDocumentNotification.method);\n    DidOpenNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidOpenNotebookDocumentNotification || (exports.DidOpenNotebookDocumentNotification = DidOpenNotebookDocumentNotification = {}));\nvar NotebookCellArrayChange;\n(function (NotebookCellArrayChange) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.start) && vscode_languageserver_types_1.uinteger.is(candidate.deleteCount) && (candidate.cells === undefined || Is.typedArray(candidate.cells, NotebookCell.is));\n    }\n    NotebookCellArrayChange.is = is;\n    function create(start, deleteCount, cells) {\n        const result = { start, deleteCount };\n        if (cells !== undefined) {\n            result.cells = cells;\n        }\n        return result;\n    }\n    NotebookCellArrayChange.create = create;\n})(NotebookCellArrayChange || (exports.NotebookCellArrayChange = NotebookCellArrayChange = {}));\nvar DidChangeNotebookDocumentNotification;\n(function (DidChangeNotebookDocumentNotification) {\n    DidChangeNotebookDocumentNotification.method = 'notebookDocument/didChange';\n    DidChangeNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeNotebookDocumentNotification.method);\n    DidChangeNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidChangeNotebookDocumentNotification || (exports.DidChangeNotebookDocumentNotification = DidChangeNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook document is saved.\n *\n * @since 3.17.0\n */\nvar DidSaveNotebookDocumentNotification;\n(function (DidSaveNotebookDocumentNotification) {\n    DidSaveNotebookDocumentNotification.method = 'notebookDocument/didSave';\n    DidSaveNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveNotebookDocumentNotification.method);\n    DidSaveNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidSaveNotebookDocumentNotification || (exports.DidSaveNotebookDocumentNotification = DidSaveNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook closes.\n *\n * @since 3.17.0\n */\nvar DidCloseNotebookDocumentNotification;\n(function (DidCloseNotebookDocumentNotification) {\n    DidCloseNotebookDocumentNotification.method = 'notebookDocument/didClose';\n    DidCloseNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseNotebookDocumentNotification.method);\n    DidCloseNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidCloseNotebookDocumentNotification || (exports.DidCloseNotebookDocumentNotification = DidCloseNotebookDocumentNotification = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceSymbolFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst documentSymbol_1 = require(\"./documentSymbol\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass WorkspaceSymbolFeature extends features_1.WorkspaceFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const symbolCapabilities = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'symbol');\n        symbolCapabilities.dynamicRegistration = true;\n        symbolCapabilities.symbolKind = {\n            valueSet: documentSymbol_1.SupportedSymbolKinds\n        };\n        symbolCapabilities.tagSupport = {\n            valueSet: documentSymbol_1.SupportedSymbolTags\n        };\n        symbolCapabilities.resolveSupport = { properties: ['location.range'] };\n    }\n    initialize(capabilities) {\n        if (!capabilities.workspaceSymbolProvider) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: capabilities.workspaceSymbolProvider === true ? { workDoneProgress: false } : capabilities.workspaceSymbolProvider\n        });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideWorkspaceSymbols: (query, token) => {\n                const client = this._client;\n                const provideWorkspaceSymbols = (query, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asSymbolInformations(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideWorkspaceSymbols\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\n                    : provideWorkspaceSymbols(query, token);\n            },\n            resolveWorkspaceSymbol: options.resolveProvider === true\n                ? (item, token) => {\n                    const client = this._client;\n                    const resolveWorkspaceSymbol = (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.type, client.code2ProtocolConverter.asWorkspaceSymbol(item), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asSymbolInformation(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.type, token, error, null);\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.resolveWorkspaceSymbol\n                        ? middleware.resolveWorkspaceSymbol(item, token, resolveWorkspaceSymbol)\n                        : resolveWorkspaceSymbol(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerWorkspaceSymbolProvider(provider), provider];\n    }\n}\nexports.WorkspaceSymbolFeature = WorkspaceSymbolFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeLensFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst features_1 = require(\"./features\");\nclass CodeLensFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const clc = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'codeLens');\n        clc.dynamicRegistration = true;\n        clc.resolveSupport = { properties: ['command'] };\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'codeLens').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.CodeLensRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeCodeLensEmitter.fire();\n            }\n        });\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeLensProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeCodeLenses: eventEmitter.event,\n            provideCodeLenses: (document, token) => {\n                const client = this._client;\n                const provideCodeLenses = (document, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asCodeLenses(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideCodeLenses\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\n                    : provideCodeLenses(document, token);\n            },\n            resolveCodeLens: (options.resolveProvider)\n                ? (codeLens, token) => {\n                    const client = this._client;\n                    const resolveCodeLens = (codeLens, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return codeLens;\n                            }\n                            return client.protocol2CodeConverter.asCodeLens(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, token, error, codeLens);\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.resolveCodeLens\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\n                        : resolveCodeLens(codeLens, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), { provider, onDidChangeCodeLensEmitter: eventEmitter }];\n    }\n}\nexports.CodeLensFeature = CodeLensFeature;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assertValidPattern = void 0;\nconst MAX_PATTERN_LENGTH = 1024 * 64;\nconst assertValidPattern = (pattern) => {\n    if (typeof pattern !== 'string') {\n        throw new TypeError('invalid pattern');\n    }\n    if (pattern.length > MAX_PATTERN_LENGTH) {\n        throw new TypeError('pattern is too long');\n    }\n};\nexports.assertValidPattern = assertValidPattern;\n//# sourceMappingURL=assert-valid-pattern.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefinitionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass DefinitionFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const definitionSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'definition');\n        definitionSupport.dynamicRegistration = true;\n        definitionSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.definitionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDefinition: (document, position, token) => {\n                const client = this._client;\n                const provideDefinition = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDefinitionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDefinition\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\n                    : provideDefinition(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.DefinitionFeature = DefinitionFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/vscode.proposed.codeActionAI.d.ts\" preserve: true/>\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConverter = createConverter;\nconst code = __importStar(require(\"vscode\"));\nconst ls = __importStar(require(\"vscode-languageserver-protocol\"));\nconst Is = __importStar(require(\"./utils/is\"));\nconst async = __importStar(require(\"./utils/async\"));\nconst protocolCompletionItem_1 = __importDefault(require(\"./protocolCompletionItem\"));\nconst protocolCodeLens_1 = __importDefault(require(\"./protocolCodeLens\"));\nconst protocolDocumentLink_1 = __importDefault(require(\"./protocolDocumentLink\"));\nconst protocolCodeAction_1 = __importDefault(require(\"./protocolCodeAction\"));\nconst protocolDiagnostic_1 = require(\"./protocolDiagnostic\");\nconst protocolCallHierarchyItem_1 = __importDefault(require(\"./protocolCallHierarchyItem\"));\nconst protocolTypeHierarchyItem_1 = __importDefault(require(\"./protocolTypeHierarchyItem\"));\nconst protocolWorkspaceSymbol_1 = __importDefault(require(\"./protocolWorkspaceSymbol\"));\nconst protocolInlayHint_1 = __importDefault(require(\"./protocolInlayHint\"));\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nvar CodeBlock;\n(function (CodeBlock) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\n    }\n    CodeBlock.is = is;\n})(CodeBlock || (CodeBlock = {}));\nfunction createConverter(uriConverter, trustMarkdown, supportHtml, supportThemeIcons) {\n    const nullConverter = (value) => code.Uri.parse(value);\n    const _uriConverter = uriConverter || nullConverter;\n    function asUri(value) {\n        return _uriConverter(value);\n    }\n    function asDocumentSelector(selector) {\n        const result = [];\n        for (const filter of selector) {\n            if (typeof filter === 'string') {\n                result.push(filter);\n            }\n            else if (vscode_languageserver_protocol_1.NotebookCellTextDocumentFilter.is(filter)) {\n                // We first need to check for the notebook cell filter since a TextDocumentFilter would\n                // match both (e.g. the notebook is optional).\n                if (typeof filter.notebook === 'string') {\n                    result.push({ notebookType: filter.notebook, language: filter.language });\n                }\n                else {\n                    const notebookType = filter.notebook.notebookType ?? '*';\n                    result.push({ notebookType: notebookType, scheme: filter.notebook.scheme, pattern: asGlobPattern(filter.notebook.pattern), language: filter.language });\n                }\n            }\n            else if (vscode_languageserver_protocol_1.TextDocumentFilter.is(filter)) {\n                result.push({ language: filter.language, scheme: filter.scheme, pattern: asGlobPattern(filter.pattern) });\n            }\n        }\n        return result;\n    }\n    async function asDiagnostics(diagnostics, token) {\n        return async.map(diagnostics, asDiagnostic, token);\n    }\n    function asDiagnosticsSync(diagnostics) {\n        const result = new Array(diagnostics.length);\n        for (let i = 0; i < diagnostics.length; i++) {\n            result[i] = asDiagnostic(diagnostics[i]);\n        }\n        return result;\n    }\n    function asDiagnostic(diagnostic) {\n        const result = new protocolDiagnostic_1.ProtocolDiagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity), diagnostic.data);\n        if (diagnostic.code !== undefined) {\n            if (typeof diagnostic.code === 'string' || typeof diagnostic.code === 'number') {\n                if (ls.CodeDescription.is(diagnostic.codeDescription)) {\n                    result.code = {\n                        value: diagnostic.code,\n                        target: asUri(diagnostic.codeDescription.href)\n                    };\n                }\n                else {\n                    result.code = diagnostic.code;\n                }\n            }\n            else if (protocolDiagnostic_1.DiagnosticCode.is(diagnostic.code)) {\n                // This is for backwards compatibility of a proposed API.\n                // We should remove this at some point.\n                result.hasDiagnosticCode = true;\n                const diagnosticCode = diagnostic.code;\n                result.code = {\n                    value: diagnosticCode.value,\n                    target: asUri(diagnosticCode.target)\n                };\n            }\n        }\n        if (diagnostic.source) {\n            result.source = diagnostic.source;\n        }\n        if (diagnostic.relatedInformation) {\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\n        }\n        if (Array.isArray(diagnostic.tags)) {\n            result.tags = asDiagnosticTags(diagnostic.tags);\n        }\n        return result;\n    }\n    function asRelatedInformation(relatedInformation) {\n        const result = new Array(relatedInformation.length);\n        for (let i = 0; i < relatedInformation.length; i++) {\n            const info = relatedInformation[i];\n            result[i] = new code.DiagnosticRelatedInformation(asLocation(info.location), info.message);\n        }\n        return result;\n    }\n    function asDiagnosticTags(tags) {\n        if (!tags) {\n            return undefined;\n        }\n        const result = [];\n        for (const tag of tags) {\n            const converted = asDiagnosticTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length > 0 ? result : undefined;\n    }\n    function asDiagnosticTag(tag) {\n        switch (tag) {\n            case ls.DiagnosticTag.Unnecessary:\n                return code.DiagnosticTag.Unnecessary;\n            case ls.DiagnosticTag.Deprecated:\n                return code.DiagnosticTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asPosition(value) {\n        return value ? new code.Position(value.line, value.character) : undefined;\n    }\n    function asRange(value) {\n        return value ? new code.Range(value.start.line, value.start.character, value.end.line, value.end.character) : undefined;\n    }\n    async function asRanges(items, token) {\n        return async.map(items, (range) => {\n            return new code.Range(range.start.line, range.start.character, range.end.line, range.end.character);\n        }, token);\n    }\n    function asDiagnosticSeverity(value) {\n        if (value === undefined || value === null) {\n            return code.DiagnosticSeverity.Error;\n        }\n        switch (value) {\n            case ls.DiagnosticSeverity.Error:\n                return code.DiagnosticSeverity.Error;\n            case ls.DiagnosticSeverity.Warning:\n                return code.DiagnosticSeverity.Warning;\n            case ls.DiagnosticSeverity.Information:\n                return code.DiagnosticSeverity.Information;\n            case ls.DiagnosticSeverity.Hint:\n                return code.DiagnosticSeverity.Hint;\n        }\n        return code.DiagnosticSeverity.Error;\n    }\n    function asHoverContent(value) {\n        if (Is.string(value)) {\n            return asMarkdownString(value);\n        }\n        else if (CodeBlock.is(value)) {\n            const result = asMarkdownString();\n            return result.appendCodeblock(value.value, value.language);\n        }\n        else if (Array.isArray(value)) {\n            const result = [];\n            for (const element of value) {\n                const item = asMarkdownString();\n                if (CodeBlock.is(element)) {\n                    item.appendCodeblock(element.value, element.language);\n                }\n                else {\n                    item.appendMarkdown(element);\n                }\n                result.push(item);\n            }\n            return result;\n        }\n        else {\n            return asMarkdownString(value);\n        }\n    }\n    function asDocumentation(value) {\n        if (Is.string(value)) {\n            return value;\n        }\n        else {\n            switch (value.kind) {\n                case ls.MarkupKind.Markdown:\n                    return asMarkdownString(value.value);\n                case ls.MarkupKind.PlainText:\n                    return value.value;\n                default:\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\n            }\n        }\n    }\n    function asMarkdownString(value) {\n        let result;\n        if (value === undefined || typeof value === 'string') {\n            result = new code.MarkdownString(value);\n        }\n        else {\n            switch (value.kind) {\n                case ls.MarkupKind.Markdown:\n                    result = new code.MarkdownString(value.value);\n                    break;\n                case ls.MarkupKind.PlainText:\n                    result = new code.MarkdownString();\n                    result.appendText(value.value);\n                    break;\n                default:\n                    result = new code.MarkdownString();\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\n                    break;\n            }\n        }\n        result.isTrusted = trustMarkdown;\n        result.supportHtml = supportHtml;\n        result.supportThemeIcons = supportThemeIcons;\n        return result;\n    }\n    function asHover(hover) {\n        if (!hover) {\n            return undefined;\n        }\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\n    }\n    async function asCompletionResult(value, allCommitCharacters, token) {\n        if (!value) {\n            return undefined;\n        }\n        if (Array.isArray(value)) {\n            return async.map(value, (item) => asCompletionItem(item, allCommitCharacters), token);\n        }\n        const list = value;\n        const { defaultRange, commitCharacters } = getCompletionItemDefaults(list, allCommitCharacters);\n        const converted = await async.map(list.items, (item) => {\n            return asCompletionItem(item, commitCharacters, list.applyKind?.commitCharacters, defaultRange, list.itemDefaults?.insertTextMode, list.itemDefaults?.insertTextFormat, list.itemDefaults?.data, list.applyKind?.data);\n        }, token);\n        return new code.CompletionList(converted, list.isIncomplete);\n    }\n    function getCompletionItemDefaults(list, allCommitCharacters) {\n        const rangeDefaults = list.itemDefaults?.editRange;\n        const commitCharacters = list.itemDefaults?.commitCharacters ?? allCommitCharacters;\n        return ls.Range.is(rangeDefaults)\n            ? { defaultRange: asRange(rangeDefaults), commitCharacters }\n            : rangeDefaults !== undefined\n                ? { defaultRange: { inserting: asRange(rangeDefaults.insert), replacing: asRange(rangeDefaults.replace) }, commitCharacters }\n                : { defaultRange: undefined, commitCharacters };\n    }\n    function asCompletionItemKind(value) {\n        // Protocol item kind is 1 based, codes item kind is zero based.\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\n            return [value - 1, undefined];\n        }\n        return [code.CompletionItemKind.Text, value];\n    }\n    function asCompletionItemTag(tag) {\n        switch (tag) {\n            case ls.CompletionItemTag.Deprecated:\n                return code.CompletionItemTag.Deprecated;\n        }\n        return undefined;\n    }\n    function asCompletionItemTags(tags) {\n        if (tags === undefined || tags === null) {\n            return [];\n        }\n        const result = [];\n        for (const tag of tags) {\n            const converted = asCompletionItemTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result;\n    }\n    function asCompletionItem(item, defaultCommitCharacters, commitCharactersApplyKind, defaultRange, defaultInsertTextMode, defaultInsertTextFormat, defaultData, dataApplyKind) {\n        const tags = asCompletionItemTags(item.tags);\n        const label = asCompletionItemLabel(item);\n        const result = new protocolCompletionItem_1.default(label);\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        const insertText = asCompletionInsertText(item, defaultRange, defaultInsertTextFormat);\n        if (insertText) {\n            result.insertText = insertText.text;\n            result.range = insertText.range;\n            result.fromEdit = insertText.fromEdit;\n        }\n        if (Is.number(item.kind)) {\n            const [itemKind, original] = asCompletionItemKind(item.kind);\n            result.kind = itemKind;\n            if (original) {\n                result.originalItemKind = original;\n            }\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = asTextEditsSync(item.additionalTextEdits);\n        }\n        const commitCharacters = applyCommitCharacters(item, defaultCommitCharacters, commitCharactersApplyKind);\n        if (commitCharacters) {\n            result.commitCharacters = commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.deprecated === true || item.deprecated === false) {\n            result.deprecated = item.deprecated;\n            if (item.deprecated === true) {\n                tags.push(code.CompletionItemTag.Deprecated);\n            }\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        const data = applyData(item, defaultData, dataApplyKind);\n        if (data !== undefined) {\n            result.data = data;\n        }\n        if (tags.length > 0) {\n            result.tags = tags;\n        }\n        const insertTextMode = item.insertTextMode ?? defaultInsertTextMode;\n        if (insertTextMode !== undefined) {\n            result.insertTextMode = insertTextMode;\n            if (insertTextMode === ls.InsertTextMode.asIs) {\n                result.keepWhitespace = true;\n            }\n        }\n        return result;\n    }\n    function applyCommitCharacters(item, defaultCommitCharacters, applyKind) {\n        if (applyKind === ls.ApplyKind.Merge) {\n            if (!defaultCommitCharacters && !item.commitCharacters) {\n                return undefined;\n            }\n            const set = new Set();\n            if (defaultCommitCharacters) {\n                for (const char of defaultCommitCharacters) {\n                    set.add(char);\n                }\n            }\n            if (Is.stringArray(item.commitCharacters)) {\n                for (const char of item.commitCharacters) {\n                    set.add(char);\n                }\n            }\n            return Array.from(set);\n        }\n        return item.commitCharacters !== undefined\n            ? Is.stringArray(item.commitCharacters) ? item.commitCharacters : undefined\n            : defaultCommitCharacters;\n    }\n    function applyData(item, defaultData, applyKind) {\n        if (applyKind === ls.ApplyKind.Merge) {\n            const data = {\n                ...defaultData,\n            };\n            if (item.data) {\n                Object.entries(item.data).forEach(([key, value]) => {\n                    if (value !== undefined && value !== null) {\n                        data[key] = value;\n                    }\n                });\n            }\n            return data;\n        }\n        return item.data ?? defaultData;\n    }\n    function asCompletionItemLabel(item) {\n        if (ls.CompletionItemLabelDetails.is(item.labelDetails)) {\n            return {\n                label: item.label,\n                detail: item.labelDetails.detail,\n                description: item.labelDetails.description\n            };\n        }\n        else {\n            return item.label;\n        }\n    }\n    function asCompletionInsertText(item, defaultRange, defaultInsertTextFormat) {\n        const insertTextFormat = item.insertTextFormat ?? defaultInsertTextFormat;\n        if (item.textEdit !== undefined || defaultRange !== undefined) {\n            const [range, newText] = item.textEdit !== undefined\n                ? getCompletionRangeAndText(item.textEdit)\n                : [defaultRange, item.textEditText ?? item.label];\n            if (insertTextFormat === ls.InsertTextFormat.Snippet) {\n                return { text: new code.SnippetString(newText), range: range, fromEdit: true };\n            }\n            else {\n                return { text: newText, range: range, fromEdit: true };\n            }\n        }\n        else if (item.insertText) {\n            if (insertTextFormat === ls.InsertTextFormat.Snippet) {\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\n            }\n            else {\n                return { text: item.insertText, fromEdit: false };\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n    function getCompletionRangeAndText(value) {\n        if (ls.InsertReplaceEdit.is(value)) {\n            return [{ inserting: asRange(value.insert), replacing: asRange(value.replace) }, value.newText];\n        }\n        else {\n            return [asRange(value.range), value.newText];\n        }\n    }\n    function asTextEdit(edit) {\n        if (!edit) {\n            return undefined;\n        }\n        return new code.TextEdit(asRange(edit.range), edit.newText);\n    }\n    async function asTextEdits(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asTextEdit, token);\n    }\n    function asTextEditsSync(items) {\n        if (!items) {\n            return undefined;\n        }\n        const result = new Array(items.length);\n        for (let i = 0; i < items.length; i++) {\n            result[i] = asTextEdit(items[i]);\n        }\n        return result;\n    }\n    async function asSignatureHelp(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        const result = new code.SignatureHelp();\n        if (Is.number(item.activeSignature)) {\n            result.activeSignature = item.activeSignature;\n        }\n        else {\n            // activeSignature was optional in the past\n            result.activeSignature = 0;\n        }\n        if (Is.number(item.activeParameter)) {\n            result.activeParameter = item.activeParameter;\n        }\n        else if (item.activeParameter === null) {\n            result.activeParameter = -1;\n        }\n        else {\n            // activeParameter was optional in the past\n            result.activeParameter = 0;\n        }\n        if (item.signatures) {\n            result.signatures = await asSignatureInformations(item.signatures, token);\n        }\n        return result;\n    }\n    async function asSignatureInformations(items, token) {\n        return async.mapAsync(items, asSignatureInformation, token);\n    }\n    async function asSignatureInformation(item, token) {\n        const result = new code.SignatureInformation(item.label);\n        if (item.documentation !== undefined) {\n            result.documentation = asDocumentation(item.documentation);\n        }\n        if (item.parameters !== undefined) {\n            result.parameters = await asParameterInformations(item.parameters, token);\n        }\n        if (item.activeParameter !== undefined) {\n            result.activeParameter = item.activeParameter ?? -1;\n        }\n        {\n            return result;\n        }\n    }\n    function asParameterInformations(items, token) {\n        return async.map(items, asParameterInformation, token);\n    }\n    function asParameterInformation(item) {\n        const result = new code.ParameterInformation(item.label);\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n        }\n        return result;\n    }\n    function asLocation(item) {\n        return item ? new code.Location(_uriConverter(item.uri), asRange(item.range)) : undefined;\n    }\n    async function asDeclarationResult(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        return asLocationResult(item, token);\n    }\n    async function asDefinitionResult(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        return asLocationResult(item, token);\n    }\n    function asLocationLink(item) {\n        if (!item) {\n            return undefined;\n        }\n        const result = {\n            targetUri: _uriConverter(item.targetUri),\n            targetRange: asRange(item.targetRange), // See issue: https://github.com/Microsoft/vscode/issues/58649\n            originSelectionRange: asRange(item.originSelectionRange),\n            targetSelectionRange: asRange(item.targetSelectionRange)\n        };\n        if (!result.targetSelectionRange) {\n            throw new Error(`targetSelectionRange must not be undefined or null`);\n        }\n        return result;\n    }\n    async function asLocationResult(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        if (Is.array(item)) {\n            if (item.length === 0) {\n                return [];\n            }\n            else if (ls.LocationLink.is(item[0])) {\n                const links = item;\n                return async.map(links, asLocationLink, token);\n            }\n            else {\n                const locations = item;\n                return async.map(locations, asLocation, token);\n            }\n        }\n        else if (ls.LocationLink.is(item)) {\n            return [asLocationLink(item)];\n        }\n        else {\n            return asLocation(item);\n        }\n    }\n    async function asReferences(values, token) {\n        if (!values) {\n            return undefined;\n        }\n        return async.map(values, asLocation, token);\n    }\n    async function asDocumentHighlights(values, token) {\n        if (!values) {\n            return undefined;\n        }\n        return async.map(values, asDocumentHighlight, token);\n    }\n    function asDocumentHighlight(item) {\n        const result = new code.DocumentHighlight(asRange(item.range));\n        if (Is.number(item.kind)) {\n            result.kind = asDocumentHighlightKind(item.kind);\n        }\n        return result;\n    }\n    function asDocumentHighlightKind(item) {\n        switch (item) {\n            case ls.DocumentHighlightKind.Text:\n                return code.DocumentHighlightKind.Text;\n            case ls.DocumentHighlightKind.Read:\n                return code.DocumentHighlightKind.Read;\n            case ls.DocumentHighlightKind.Write:\n                return code.DocumentHighlightKind.Write;\n        }\n        return code.DocumentHighlightKind.Text;\n    }\n    async function asSymbolInformations(values, token) {\n        if (!values) {\n            return undefined;\n        }\n        return async.map(values, asSymbolInformation, token);\n    }\n    function asSymbolKind(item) {\n        if (item <= ls.SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return item - 1;\n        }\n        return code.SymbolKind.Property;\n    }\n    function asSymbolTag(value) {\n        switch (value) {\n            case ls.SymbolTag.Deprecated:\n                return code.SymbolTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asSymbolTags(items) {\n        if (items === undefined || items === null) {\n            return undefined;\n        }\n        const result = [];\n        for (const item of items) {\n            const converted = asSymbolTag(item);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length === 0 ? undefined : result;\n    }\n    function asSymbolInformation(item) {\n        const data = item.data;\n        const location = item.location;\n        const result = location.range === undefined || data !== undefined\n            ? new protocolWorkspaceSymbol_1.default(item.name, asSymbolKind(item.kind), item.containerName ?? '', location.range === undefined ? _uriConverter(location.uri) : new code.Location(_uriConverter(item.location.uri), asRange(location.range)), data)\n            : new code.SymbolInformation(item.name, asSymbolKind(item.kind), item.containerName ?? '', new code.Location(_uriConverter(item.location.uri), asRange(location.range)));\n        fillTags(result, item);\n        return result;\n    }\n    async function asDocumentSymbols(values, token) {\n        if (values === undefined || values === null) {\n            return undefined;\n        }\n        return async.map(values, asDocumentSymbol, token);\n    }\n    function asDocumentSymbol(value) {\n        const result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\n        fillTags(result, value);\n        if (value.children !== undefined && value.children.length > 0) {\n            const children = [];\n            for (const child of value.children) {\n                children.push(asDocumentSymbol(child));\n            }\n            result.children = children;\n        }\n        return result;\n    }\n    function fillTags(result, value) {\n        result.tags = asSymbolTags(value.tags);\n        if (value.deprecated) {\n            if (!result.tags) {\n                result.tags = [code.SymbolTag.Deprecated];\n            }\n            else {\n                if (!result.tags.includes(code.SymbolTag.Deprecated)) {\n                    result.tags = result.tags.concat(code.SymbolTag.Deprecated);\n                }\n            }\n        }\n    }\n    function asCommand(item) {\n        const result = { title: item.title, command: item.command };\n        if (item.tooltip) {\n            result.tooltip = item.tooltip;\n        }\n        if (item.arguments) {\n            result.arguments = item.arguments;\n        }\n        return result;\n    }\n    async function asCommands(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asCommand, token);\n    }\n    const kindMapping = new Map();\n    kindMapping.set(ls.CodeActionKind.Empty, code.CodeActionKind.Empty);\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\n    function asCodeActionKind(item) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        let result = kindMapping.get(item);\n        if (result) {\n            return result;\n        }\n        const parts = item.split('.');\n        result = code.CodeActionKind.Empty;\n        for (const part of parts) {\n            result = result.append(part);\n        }\n        return result;\n    }\n    function asCodeActionKinds(items) {\n        if (items === undefined || items === null) {\n            return undefined;\n        }\n        return items.map(kind => asCodeActionKind(kind));\n    }\n    function asCodeActionDocumentations(items) {\n        if (items === undefined || items === null) {\n            return undefined;\n        }\n        return items.map(doc => ({ kind: asCodeActionKind(doc.kind), command: asCommand(doc.command) }));\n    }\n    async function asCodeAction(item, token) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        const result = new protocolCodeAction_1.default(item.title, item.data);\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics !== undefined) {\n            result.diagnostics = asDiagnosticsSync(item.diagnostics);\n        }\n        if (item.edit !== undefined) {\n            result.edit = await asWorkspaceEdit(item.edit, token);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        if (item.disabled !== undefined) {\n            result.disabled = { reason: item.disabled.reason };\n        }\n        if (item.tags?.includes(ls.CodeActionTag.LLMGenerated)) {\n            result.isAI = true;\n        }\n        return result;\n    }\n    function asCodeActionResult(items, token) {\n        return async.mapAsync(items, async (item) => {\n            if (ls.Command.is(item)) {\n                return asCommand(item);\n            }\n            else {\n                return asCodeAction(item, token);\n            }\n        }, token);\n    }\n    function asCodeLens(item) {\n        if (!item) {\n            return undefined;\n        }\n        const result = new protocolCodeLens_1.default(asRange(item.range));\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.data !== undefined && item.data !== null) {\n            result.data = item.data;\n        }\n        return result;\n    }\n    async function asCodeLenses(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asCodeLens, token);\n    }\n    async function asWorkspaceEdit(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        const sharedMetadata = new Map();\n        if (item.changeAnnotations !== undefined) {\n            const changeAnnotations = item.changeAnnotations;\n            await async.forEach(Object.keys(changeAnnotations), (key) => {\n                const metaData = asWorkspaceEditEntryMetadata(changeAnnotations[key]);\n                sharedMetadata.set(key, metaData);\n            }, token);\n        }\n        const asMetadata = (annotation) => {\n            if (annotation === undefined) {\n                return undefined;\n            }\n            else {\n                return sharedMetadata.get(annotation);\n            }\n        };\n        const result = new code.WorkspaceEdit();\n        if (item.documentChanges) {\n            const documentChanges = item.documentChanges;\n            await async.forEach(documentChanges, (change) => {\n                if (ls.CreateFile.is(change)) {\n                    result.createFile(_uriConverter(change.uri), change.options, asMetadata(change.annotationId));\n                }\n                else if (ls.RenameFile.is(change)) {\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options, asMetadata(change.annotationId));\n                }\n                else if (ls.DeleteFile.is(change)) {\n                    result.deleteFile(_uriConverter(change.uri), change.options, asMetadata(change.annotationId));\n                }\n                else if (ls.TextDocumentEdit.is(change)) {\n                    const uri = _uriConverter(change.textDocument.uri);\n                    const edits = [];\n                    for (const edit of change.edits) {\n                        if (ls.AnnotatedTextEdit.is(edit)) {\n                            edits.push([new code.TextEdit(asRange(edit.range), edit.newText), asMetadata(edit.annotationId)]);\n                        }\n                        else if (ls.SnippetTextEdit.is(edit)) {\n                            edits.push([new code.SnippetTextEdit(asRange(edit.range), new code.SnippetString(edit.snippet.value)), asMetadata(edit.annotationId)]);\n                        }\n                        else {\n                            edits.push([new code.TextEdit(asRange(edit.range), edit.newText), undefined]);\n                        }\n                    }\n                    result.set(uri, edits);\n                }\n                else {\n                    throw new Error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\n                }\n            }, token);\n        }\n        else if (item.changes) {\n            const changes = item.changes;\n            await async.forEach(Object.keys(changes), (key) => {\n                result.set(_uriConverter(key), asTextEditsSync(changes[key]));\n            }, token);\n        }\n        return result;\n    }\n    function asWorkspaceEditEntryMetadata(annotation) {\n        if (annotation === undefined) {\n            return undefined;\n        }\n        return { label: annotation.label, needsConfirmation: !!annotation.needsConfirmation, description: annotation.description };\n    }\n    function asDocumentLink(item) {\n        const range = asRange(item.range);\n        const target = item.target ? asUri(item.target) : undefined;\n        // target must be optional in DocumentLink\n        const link = new protocolDocumentLink_1.default(range, target);\n        if (item.tooltip !== undefined) {\n            link.tooltip = item.tooltip;\n        }\n        if (item.data !== undefined && item.data !== null) {\n            link.data = item.data;\n        }\n        return link;\n    }\n    async function asDocumentLinks(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asDocumentLink, token);\n    }\n    function asColor(color) {\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\n    }\n    function asColorInformation(ci) {\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\n    }\n    async function asColorInformations(colorInformation, token) {\n        if (!colorInformation) {\n            return undefined;\n        }\n        return async.map(colorInformation, asColorInformation, token);\n    }\n    function asColorPresentation(cp) {\n        const presentation = new code.ColorPresentation(cp.label);\n        presentation.additionalTextEdits = asTextEditsSync(cp.additionalTextEdits);\n        if (cp.textEdit) {\n            presentation.textEdit = asTextEdit(cp.textEdit);\n        }\n        return presentation;\n    }\n    async function asColorPresentations(colorPresentations, token) {\n        if (!colorPresentations) {\n            return undefined;\n        }\n        return async.map(colorPresentations, asColorPresentation, token);\n    }\n    function asFoldingRangeKind(kind) {\n        if (kind) {\n            switch (kind) {\n                case ls.FoldingRangeKind.Comment:\n                    return code.FoldingRangeKind.Comment;\n                case ls.FoldingRangeKind.Imports:\n                    return code.FoldingRangeKind.Imports;\n                case ls.FoldingRangeKind.Region:\n                    return code.FoldingRangeKind.Region;\n            }\n        }\n        return undefined;\n    }\n    function asFoldingRange(r) {\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\n    }\n    async function asFoldingRanges(foldingRanges, token) {\n        if (!foldingRanges) {\n            return undefined;\n        }\n        return async.map(foldingRanges, asFoldingRange, token);\n    }\n    function asSelectionRange(selectionRange) {\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\n    }\n    async function asSelectionRanges(selectionRanges, token) {\n        if (!Array.isArray(selectionRanges)) {\n            return [];\n        }\n        return async.map(selectionRanges, asSelectionRange, token);\n    }\n    function asInlineValue(inlineValue) {\n        if (ls.InlineValueText.is(inlineValue)) {\n            return new code.InlineValueText(asRange(inlineValue.range), inlineValue.text);\n        }\n        else if (ls.InlineValueVariableLookup.is(inlineValue)) {\n            return new code.InlineValueVariableLookup(asRange(inlineValue.range), inlineValue.variableName, inlineValue.caseSensitiveLookup);\n        }\n        else {\n            return new code.InlineValueEvaluatableExpression(asRange(inlineValue.range), inlineValue.expression);\n        }\n    }\n    async function asInlineValues(inlineValues, token) {\n        if (!Array.isArray(inlineValues)) {\n            return [];\n        }\n        return async.map(inlineValues, asInlineValue, token);\n    }\n    async function asInlayHint(value, token) {\n        const label = typeof value.label === 'string'\n            ? value.label\n            : await async.map(value.label, asInlayHintLabelPart, token);\n        const result = new protocolInlayHint_1.default(asPosition(value.position), label);\n        if (value.kind !== undefined) {\n            result.kind = value.kind;\n        }\n        if (value.textEdits !== undefined) {\n            result.textEdits = await asTextEdits(value.textEdits, token);\n        }\n        if (value.tooltip !== undefined) {\n            result.tooltip = asTooltip(value.tooltip);\n        }\n        if (value.paddingLeft !== undefined) {\n            result.paddingLeft = value.paddingLeft;\n        }\n        if (value.paddingRight !== undefined) {\n            result.paddingRight = value.paddingRight;\n        }\n        if (value.data !== undefined) {\n            result.data = value.data;\n        }\n        return result;\n    }\n    function asInlayHintLabelPart(part) {\n        const result = new code.InlayHintLabelPart(part.value);\n        if (part.location !== undefined) {\n            result.location = asLocation(part.location);\n        }\n        if (part.tooltip !== undefined) {\n            result.tooltip = asTooltip(part.tooltip);\n        }\n        if (part.command !== undefined) {\n            result.command = asCommand(part.command);\n        }\n        return result;\n    }\n    function asTooltip(value) {\n        if (typeof value === 'string') {\n            return value;\n        }\n        return asMarkdownString(value);\n    }\n    async function asInlayHints(values, token) {\n        if (!Array.isArray(values)) {\n            return undefined;\n        }\n        return async.mapAsync(values, asInlayHint, token);\n    }\n    function asCallHierarchyItem(item) {\n        if (item === null) {\n            return undefined;\n        }\n        const result = new protocolCallHierarchyItem_1.default(asSymbolKind(item.kind), item.name, item.detail || '', asUri(item.uri), asRange(item.range), asRange(item.selectionRange), item.data);\n        if (item.tags !== undefined) {\n            result.tags = asSymbolTags(item.tags);\n        }\n        return result;\n    }\n    async function asCallHierarchyItems(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.map(items, asCallHierarchyItem, token);\n    }\n    async function asCallHierarchyIncomingCall(item, token) {\n        return new code.CallHierarchyIncomingCall(asCallHierarchyItem(item.from), await asRanges(item.fromRanges, token));\n    }\n    async function asCallHierarchyIncomingCalls(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.mapAsync(items, asCallHierarchyIncomingCall, token);\n    }\n    async function asCallHierarchyOutgoingCall(item, token) {\n        return new code.CallHierarchyOutgoingCall(asCallHierarchyItem(item.to), await asRanges(item.fromRanges, token));\n    }\n    async function asCallHierarchyOutgoingCalls(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.mapAsync(items, asCallHierarchyOutgoingCall, token);\n    }\n    async function asSemanticTokens(value, _token) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        return new code.SemanticTokens(new Uint32Array(value.data), value.resultId);\n    }\n    function asSemanticTokensEdit(value) {\n        return new code.SemanticTokensEdit(value.start, value.deleteCount, value.data !== undefined ? new Uint32Array(value.data) : undefined);\n    }\n    async function asSemanticTokensEdits(value, _token) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        return new code.SemanticTokensEdits(value.edits.map(asSemanticTokensEdit), value.resultId);\n    }\n    function asSemanticTokensLegend(value) {\n        return value;\n    }\n    async function asLinkedEditingRanges(value, token) {\n        if (value === null || value === undefined) {\n            return undefined;\n        }\n        return new code.LinkedEditingRanges(await asRanges(value.ranges, token), asRegularExpression(value.wordPattern));\n    }\n    function asRegularExpression(value) {\n        if (value === null || value === undefined) {\n            return undefined;\n        }\n        return new RegExp(value);\n    }\n    function asTypeHierarchyItem(item) {\n        if (item === null) {\n            return undefined;\n        }\n        const result = new protocolTypeHierarchyItem_1.default(asSymbolKind(item.kind), item.name, item.detail || '', asUri(item.uri), asRange(item.range), asRange(item.selectionRange), item.data);\n        if (item.tags !== undefined) {\n            result.tags = asSymbolTags(item.tags);\n        }\n        return result;\n    }\n    async function asTypeHierarchyItems(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.map(items, asTypeHierarchyItem, token);\n    }\n    function asGlobPattern(pattern) {\n        if (Is.string(pattern)) {\n            return pattern;\n        }\n        if (ls.RelativePattern.is(pattern)) {\n            if (ls.URI.is(pattern.baseUri)) {\n                return new code.RelativePattern(asUri(pattern.baseUri), pattern.pattern);\n            }\n            else if (ls.WorkspaceFolder.is(pattern.baseUri)) {\n                const workspaceFolder = code.workspace.getWorkspaceFolder(asUri(pattern.baseUri.uri));\n                return workspaceFolder !== undefined ? new code.RelativePattern(workspaceFolder, pattern.pattern) : undefined;\n            }\n        }\n        return undefined;\n    }\n    async function asInlineCompletionResult(value, token) {\n        if (!value) {\n            return undefined;\n        }\n        if (Array.isArray(value)) {\n            return async.map(value, (item) => asInlineCompletionItem(item), token);\n        }\n        const list = value;\n        const converted = await async.map(list.items, (item) => {\n            return asInlineCompletionItem(item);\n        }, token);\n        return new code.InlineCompletionList(converted);\n    }\n    function asInlineCompletionItem(item) {\n        let insertText;\n        if (typeof item.insertText === 'string') {\n            insertText = item.insertText;\n        }\n        else {\n            insertText = new code.SnippetString(item.insertText.value);\n        }\n        let command = undefined;\n        if (item.command) {\n            command = asCommand(item.command);\n        }\n        const inlineCompletionItem = new code.InlineCompletionItem(insertText, asRange(item.range), command);\n        if (item.filterText) {\n            inlineCompletionItem.filterText = item.filterText;\n        }\n        return inlineCompletionItem;\n    }\n    return {\n        asUri,\n        asDocumentSelector,\n        asDiagnostics,\n        asDiagnostic,\n        asRange,\n        asRanges,\n        asPosition,\n        asDiagnosticSeverity,\n        asDiagnosticTag,\n        asHover,\n        asCompletionResult,\n        asCompletionItem,\n        asTextEdit,\n        asTextEdits,\n        asSignatureHelp,\n        asSignatureInformations,\n        asSignatureInformation,\n        asParameterInformations,\n        asParameterInformation,\n        asDeclarationResult,\n        asDefinitionResult,\n        asLocation,\n        asReferences,\n        asDocumentHighlights,\n        asDocumentHighlight,\n        asDocumentHighlightKind,\n        asSymbolKind,\n        asSymbolTag,\n        asSymbolTags,\n        asSymbolInformations,\n        asSymbolInformation,\n        asDocumentSymbols,\n        asDocumentSymbol,\n        asCommand,\n        asCommands,\n        asCodeAction,\n        asCodeActionKind,\n        asCodeActionKinds,\n        asCodeActionDocumentations,\n        asCodeActionResult,\n        asCodeLens,\n        asCodeLenses,\n        asWorkspaceEdit,\n        asDocumentLink,\n        asDocumentLinks,\n        asFoldingRangeKind,\n        asFoldingRange,\n        asFoldingRanges,\n        asColor,\n        asColorInformation,\n        asColorInformations,\n        asColorPresentation,\n        asColorPresentations,\n        asSelectionRange,\n        asSelectionRanges,\n        asInlineValue,\n        asInlineValues,\n        asInlayHint,\n        asInlayHints,\n        asSemanticTokensLegend,\n        asSemanticTokens,\n        asSemanticTokensEdit,\n        asSemanticTokensEdits,\n        asCallHierarchyItem,\n        asCallHierarchyItems,\n        asCallHierarchyIncomingCall,\n        asCallHierarchyIncomingCalls,\n        asCallHierarchyOutgoingCall,\n        asCallHierarchyOutgoingCalls,\n        asLinkedEditingRanges: asLinkedEditingRanges,\n        asTypeHierarchyItem,\n        asTypeHierarchyItems,\n        asGlobPattern,\n        asInlineCompletionResult,\n        asInlineCompletionItem\n    };\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SignatureHelpFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass SignatureHelpFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const config = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'signatureHelp');\n        config.dynamicRegistration = true;\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\n        config.signatureInformation.activeParameterSupport = true;\n        config.signatureInformation.noActiveParameterSupport = true;\n        config.contextSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.signatureHelpProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideSignatureHelp: (document, position, token, context) => {\n                const client = this._client;\n                const providerSignatureHelp = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asSignatureHelpParams(document, position, context), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asSignatureHelp(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideSignatureHelp\n                    ? middleware.provideSignatureHelp(document, position, context, token, providerSignatureHelp)\n                    : providerSignatureHelp(document, position, context, token);\n            }\n        };\n        return [this.registerProvider(options, provider), provider];\n    }\n    registerProvider(options, provider) {\n        const selector = this._client.protocol2CodeConverter.asDocumentSelector(options.documentSelector);\n        if (options.retriggerCharacters === undefined) {\n            const triggerCharacters = options.triggerCharacters || [];\n            return vscode_1.languages.registerSignatureHelpProvider(selector, provider, ...triggerCharacters);\n        }\n        else {\n            const metaData = {\n                triggerCharacters: options.triggerCharacters || [],\n                retriggerCharacters: options.retriggerCharacters || []\n            };\n            return vscode_1.languages.registerSignatureHelpProvider(selector, provider, metaData);\n        }\n    }\n}\nexports.SignatureHelpFeature = SignatureHelpFeature;\n","\"use strict\";\n// parse a single path portion\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AST = void 0;\nconst brace_expressions_js_1 = require(\"./brace-expressions.js\");\nconst unescape_js_1 = require(\"./unescape.js\");\nconst types = new Set(['!', '?', '+', '*', '@']);\nconst isExtglobType = (c) => types.has(c);\n// Patterns that get prepended to bind to the start of either the\n// entire string, or just a single path portion, to prevent dots\n// and/or traversal patterns, when needed.\n// Exts don't need the ^ or / bit, because the root binds that already.\nconst startNoTraversal = '(?!(?:^|/)\\\\.\\\\.?(?:$|/))';\nconst startNoDot = '(?!\\\\.)';\n// characters that indicate a start of pattern needs the \"no dots\" bit,\n// because a dot *might* be matched. ( is not in the list, because in\n// the case of a child extglob, it will handle the prevention itself.\nconst addPatternStart = new Set(['[', '.']);\n// cases where traversal is A-OK, no dot prevention needed\nconst justDots = new Set(['..', '.']);\nconst reSpecials = new Set('().*{}+?[]^$\\\\!');\nconst regExpEscape = (s) => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n// any single thing other than /\nconst qmark = '[^/]';\n// * => any number of characters\nconst star = qmark + '*?';\n// use + when we need to ensure that *something* matches, because the * is\n// the only thing in the path portion.\nconst starNoEmpty = qmark + '+?';\n// remove the \\ chars that we added if we end up doing a nonmagic compare\n// const deslash = (s: string) => s.replace(/\\\\(.)/g, '$1')\nclass AST {\n    type;\n    #root;\n    #hasMagic;\n    #uflag = false;\n    #parts = [];\n    #parent;\n    #parentIndex;\n    #negs;\n    #filledNegs = false;\n    #options;\n    #toString;\n    // set to true if it's an extglob with no children\n    // (which really means one child of '')\n    #emptyExt = false;\n    constructor(type, parent, options = {}) {\n        this.type = type;\n        // extglobs are inherently magical\n        if (type)\n            this.#hasMagic = true;\n        this.#parent = parent;\n        this.#root = this.#parent ? this.#parent.#root : this;\n        this.#options = this.#root === this ? options : this.#root.#options;\n        this.#negs = this.#root === this ? [] : this.#root.#negs;\n        if (type === '!' && !this.#root.#filledNegs)\n            this.#negs.push(this);\n        this.#parentIndex = this.#parent ? this.#parent.#parts.length : 0;\n    }\n    get hasMagic() {\n        /* c8 ignore start */\n        if (this.#hasMagic !== undefined)\n            return this.#hasMagic;\n        /* c8 ignore stop */\n        for (const p of this.#parts) {\n            if (typeof p === 'string')\n                continue;\n            if (p.type || p.hasMagic)\n                return (this.#hasMagic = true);\n        }\n        // note: will be undefined until we generate the regexp src and find out\n        return this.#hasMagic;\n    }\n    // reconstructs the pattern\n    toString() {\n        if (this.#toString !== undefined)\n            return this.#toString;\n        if (!this.type) {\n            return (this.#toString = this.#parts.map(p => String(p)).join(''));\n        }\n        else {\n            return (this.#toString =\n                this.type + '(' + this.#parts.map(p => String(p)).join('|') + ')');\n        }\n    }\n    #fillNegs() {\n        /* c8 ignore start */\n        if (this !== this.#root)\n            throw new Error('should only call on root');\n        if (this.#filledNegs)\n            return this;\n        /* c8 ignore stop */\n        // call toString() once to fill this out\n        this.toString();\n        this.#filledNegs = true;\n        let n;\n        while ((n = this.#negs.pop())) {\n            if (n.type !== '!')\n                continue;\n            // walk up the tree, appending everthing that comes AFTER parentIndex\n            let p = n;\n            let pp = p.#parent;\n            while (pp) {\n                for (let i = p.#parentIndex + 1; !pp.type && i < pp.#parts.length; i++) {\n                    for (const part of n.#parts) {\n                        /* c8 ignore start */\n                        if (typeof part === 'string') {\n                            throw new Error('string part in extglob AST??');\n                        }\n                        /* c8 ignore stop */\n                        part.copyIn(pp.#parts[i]);\n                    }\n                }\n                p = pp;\n                pp = p.#parent;\n            }\n        }\n        return this;\n    }\n    push(...parts) {\n        for (const p of parts) {\n            if (p === '')\n                continue;\n            /* c8 ignore start */\n            if (typeof p !== 'string' && !(p instanceof AST && p.#parent === this)) {\n                throw new Error('invalid part: ' + p);\n            }\n            /* c8 ignore stop */\n            this.#parts.push(p);\n        }\n    }\n    toJSON() {\n        const ret = this.type === null\n            ? this.#parts.slice().map(p => (typeof p === 'string' ? p : p.toJSON()))\n            : [this.type, ...this.#parts.map(p => p.toJSON())];\n        if (this.isStart() && !this.type)\n            ret.unshift([]);\n        if (this.isEnd() &&\n            (this === this.#root ||\n                (this.#root.#filledNegs && this.#parent?.type === '!'))) {\n            ret.push({});\n        }\n        return ret;\n    }\n    isStart() {\n        if (this.#root === this)\n            return true;\n        // if (this.type) return !!this.#parent?.isStart()\n        if (!this.#parent?.isStart())\n            return false;\n        if (this.#parentIndex === 0)\n            return true;\n        // if everything AHEAD of this is a negation, then it's still the \"start\"\n        const p = this.#parent;\n        for (let i = 0; i < this.#parentIndex; i++) {\n            const pp = p.#parts[i];\n            if (!(pp instanceof AST && pp.type === '!')) {\n                return false;\n            }\n        }\n        return true;\n    }\n    isEnd() {\n        if (this.#root === this)\n            return true;\n        if (this.#parent?.type === '!')\n            return true;\n        if (!this.#parent?.isEnd())\n            return false;\n        if (!this.type)\n            return this.#parent?.isEnd();\n        // if not root, it'll always have a parent\n        /* c8 ignore start */\n        const pl = this.#parent ? this.#parent.#parts.length : 0;\n        /* c8 ignore stop */\n        return this.#parentIndex === pl - 1;\n    }\n    copyIn(part) {\n        if (typeof part === 'string')\n            this.push(part);\n        else\n            this.push(part.clone(this));\n    }\n    clone(parent) {\n        const c = new AST(this.type, parent);\n        for (const p of this.#parts) {\n            c.copyIn(p);\n        }\n        return c;\n    }\n    static #parseAST(str, ast, pos, opt) {\n        let escaping = false;\n        let inBrace = false;\n        let braceStart = -1;\n        let braceNeg = false;\n        if (ast.type === null) {\n            // outside of a extglob, append until we find a start\n            let i = pos;\n            let acc = '';\n            while (i < str.length) {\n                const c = str.charAt(i++);\n                // still accumulate escapes at this point, but we do ignore\n                // starts that are escaped\n                if (escaping || c === '\\\\') {\n                    escaping = !escaping;\n                    acc += c;\n                    continue;\n                }\n                if (inBrace) {\n                    if (i === braceStart + 1) {\n                        if (c === '^' || c === '!') {\n                            braceNeg = true;\n                        }\n                    }\n                    else if (c === ']' && !(i === braceStart + 2 && braceNeg)) {\n                        inBrace = false;\n                    }\n                    acc += c;\n                    continue;\n                }\n                else if (c === '[') {\n                    inBrace = true;\n                    braceStart = i;\n                    braceNeg = false;\n                    acc += c;\n                    continue;\n                }\n                if (!opt.noext && isExtglobType(c) && str.charAt(i) === '(') {\n                    ast.push(acc);\n                    acc = '';\n                    const ext = new AST(c, ast);\n                    i = AST.#parseAST(str, ext, i, opt);\n                    ast.push(ext);\n                    continue;\n                }\n                acc += c;\n            }\n            ast.push(acc);\n            return i;\n        }\n        // some kind of extglob, pos is at the (\n        // find the next | or )\n        let i = pos + 1;\n        let part = new AST(null, ast);\n        const parts = [];\n        let acc = '';\n        while (i < str.length) {\n            const c = str.charAt(i++);\n            // still accumulate escapes at this point, but we do ignore\n            // starts that are escaped\n            if (escaping || c === '\\\\') {\n                escaping = !escaping;\n                acc += c;\n                continue;\n            }\n            if (inBrace) {\n                if (i === braceStart + 1) {\n                    if (c === '^' || c === '!') {\n                        braceNeg = true;\n                    }\n                }\n                else if (c === ']' && !(i === braceStart + 2 && braceNeg)) {\n                    inBrace = false;\n                }\n                acc += c;\n                continue;\n            }\n            else if (c === '[') {\n                inBrace = true;\n                braceStart = i;\n                braceNeg = false;\n                acc += c;\n                continue;\n            }\n            if (isExtglobType(c) && str.charAt(i) === '(') {\n                part.push(acc);\n                acc = '';\n                const ext = new AST(c, part);\n                part.push(ext);\n                i = AST.#parseAST(str, ext, i, opt);\n                continue;\n            }\n            if (c === '|') {\n                part.push(acc);\n                acc = '';\n                parts.push(part);\n                part = new AST(null, ast);\n                continue;\n            }\n            if (c === ')') {\n                if (acc === '' && ast.#parts.length === 0) {\n                    ast.#emptyExt = true;\n                }\n                part.push(acc);\n                acc = '';\n                ast.push(...parts, part);\n                return i;\n            }\n            acc += c;\n        }\n        // unfinished extglob\n        // if we got here, it was a malformed extglob! not an extglob, but\n        // maybe something else in there.\n        ast.type = null;\n        ast.#hasMagic = undefined;\n        ast.#parts = [str.substring(pos - 1)];\n        return i;\n    }\n    static fromGlob(pattern, options = {}) {\n        const ast = new AST(null, undefined, options);\n        AST.#parseAST(pattern, ast, 0, options);\n        return ast;\n    }\n    // returns the regular expression if there's magic, or the unescaped\n    // string if not.\n    toMMPattern() {\n        // should only be called on root\n        /* c8 ignore start */\n        if (this !== this.#root)\n            return this.#root.toMMPattern();\n        /* c8 ignore stop */\n        const glob = this.toString();\n        const [re, body, hasMagic, uflag] = this.toRegExpSource();\n        // if we're in nocase mode, and not nocaseMagicOnly, then we do\n        // still need a regular expression if we have to case-insensitively\n        // match capital/lowercase characters.\n        const anyMagic = hasMagic ||\n            this.#hasMagic ||\n            (this.#options.nocase &&\n                !this.#options.nocaseMagicOnly &&\n                glob.toUpperCase() !== glob.toLowerCase());\n        if (!anyMagic) {\n            return body;\n        }\n        const flags = (this.#options.nocase ? 'i' : '') + (uflag ? 'u' : '');\n        return Object.assign(new RegExp(`^${re}$`, flags), {\n            _src: re,\n            _glob: glob,\n        });\n    }\n    get options() {\n        return this.#options;\n    }\n    // returns the string match, the regexp source, whether there's magic\n    // in the regexp (so a regular expression is required) and whether or\n    // not the uflag is needed for the regular expression (for posix classes)\n    // TODO: instead of injecting the start/end at this point, just return\n    // the BODY of the regexp, along with the start/end portions suitable\n    // for binding the start/end in either a joined full-path makeRe context\n    // (where we bind to (^|/), or a standalone matchPart context (where\n    // we bind to ^, and not /).  Otherwise slashes get duped!\n    //\n    // In part-matching mode, the start is:\n    // - if not isStart: nothing\n    // - if traversal possible, but not allowed: ^(?!\\.\\.?$)\n    // - if dots allowed or not possible: ^\n    // - if dots possible and not allowed: ^(?!\\.)\n    // end is:\n    // - if not isEnd(): nothing\n    // - else: $\n    //\n    // In full-path matching mode, we put the slash at the START of the\n    // pattern, so start is:\n    // - if first pattern: same as part-matching mode\n    // - if not isStart(): nothing\n    // - if traversal possible, but not allowed: /(?!\\.\\.?(?:$|/))\n    // - if dots allowed or not possible: /\n    // - if dots possible and not allowed: /(?!\\.)\n    // end is:\n    // - if last pattern, same as part-matching mode\n    // - else nothing\n    //\n    // Always put the (?:$|/) on negated tails, though, because that has to be\n    // there to bind the end of the negated pattern portion, and it's easier to\n    // just stick it in now rather than try to inject it later in the middle of\n    // the pattern.\n    //\n    // We can just always return the same end, and leave it up to the caller\n    // to know whether it's going to be used joined or in parts.\n    // And, if the start is adjusted slightly, can do the same there:\n    // - if not isStart: nothing\n    // - if traversal possible, but not allowed: (?:/|^)(?!\\.\\.?$)\n    // - if dots allowed or not possible: (?:/|^)\n    // - if dots possible and not allowed: (?:/|^)(?!\\.)\n    //\n    // But it's better to have a simpler binding without a conditional, for\n    // performance, so probably better to return both start options.\n    //\n    // Then the caller just ignores the end if it's not the first pattern,\n    // and the start always gets applied.\n    //\n    // But that's always going to be $ if it's the ending pattern, or nothing,\n    // so the caller can just attach $ at the end of the pattern when building.\n    //\n    // So the todo is:\n    // - better detect what kind of start is needed\n    // - return both flavors of starting pattern\n    // - attach $ at the end of the pattern when creating the actual RegExp\n    //\n    // Ah, but wait, no, that all only applies to the root when the first pattern\n    // is not an extglob. If the first pattern IS an extglob, then we need all\n    // that dot prevention biz to live in the extglob portions, because eg\n    // +(*|.x*) can match .xy but not .yx.\n    //\n    // So, return the two flavors if it's #root and the first child is not an\n    // AST, otherwise leave it to the child AST to handle it, and there,\n    // use the (?:^|/) style of start binding.\n    //\n    // Even simplified further:\n    // - Since the start for a join is eg /(?!\\.) and the start for a part\n    // is ^(?!\\.), we can just prepend (?!\\.) to the pattern (either root\n    // or start or whatever) and prepend ^ or / at the Regexp construction.\n    toRegExpSource(allowDot) {\n        const dot = allowDot ?? !!this.#options.dot;\n        if (this.#root === this)\n            this.#fillNegs();\n        if (!this.type) {\n            const noEmpty = this.isStart() && this.isEnd();\n            const src = this.#parts\n                .map(p => {\n                const [re, _, hasMagic, uflag] = typeof p === 'string'\n                    ? AST.#parseGlob(p, this.#hasMagic, noEmpty)\n                    : p.toRegExpSource(allowDot);\n                this.#hasMagic = this.#hasMagic || hasMagic;\n                this.#uflag = this.#uflag || uflag;\n                return re;\n            })\n                .join('');\n            let start = '';\n            if (this.isStart()) {\n                if (typeof this.#parts[0] === 'string') {\n                    // this is the string that will match the start of the pattern,\n                    // so we need to protect against dots and such.\n                    // '.' and '..' cannot match unless the pattern is that exactly,\n                    // even if it starts with . or dot:true is set.\n                    const dotTravAllowed = this.#parts.length === 1 && justDots.has(this.#parts[0]);\n                    if (!dotTravAllowed) {\n                        const aps = addPatternStart;\n                        // check if we have a possibility of matching . or ..,\n                        // and prevent that.\n                        const needNoTrav = \n                        // dots are allowed, and the pattern starts with [ or .\n                        (dot && aps.has(src.charAt(0))) ||\n                            // the pattern starts with \\., and then [ or .\n                            (src.startsWith('\\\\.') && aps.has(src.charAt(2))) ||\n                            // the pattern starts with \\.\\., and then [ or .\n                            (src.startsWith('\\\\.\\\\.') && aps.has(src.charAt(4)));\n                        // no need to prevent dots if it can't match a dot, or if a\n                        // sub-pattern will be preventing it anyway.\n                        const needNoDot = !dot && !allowDot && aps.has(src.charAt(0));\n                        start = needNoTrav ? startNoTraversal : needNoDot ? startNoDot : '';\n                    }\n                }\n            }\n            // append the \"end of path portion\" pattern to negation tails\n            let end = '';\n            if (this.isEnd() &&\n                this.#root.#filledNegs &&\n                this.#parent?.type === '!') {\n                end = '(?:$|\\\\/)';\n            }\n            const final = start + src + end;\n            return [\n                final,\n                (0, unescape_js_1.unescape)(src),\n                (this.#hasMagic = !!this.#hasMagic),\n                this.#uflag,\n            ];\n        }\n        // We need to calculate the body *twice* if it's a repeat pattern\n        // at the start, once in nodot mode, then again in dot mode, so a\n        // pattern like *(?) can match 'x.y'\n        const repeated = this.type === '*' || this.type === '+';\n        // some kind of extglob\n        const start = this.type === '!' ? '(?:(?!(?:' : '(?:';\n        let body = this.#partsToRegExp(dot);\n        if (this.isStart() && this.isEnd() && !body && this.type !== '!') {\n            // invalid extglob, has to at least be *something* present, if it's\n            // the entire path portion.\n            const s = this.toString();\n            this.#parts = [s];\n            this.type = null;\n            this.#hasMagic = undefined;\n            return [s, (0, unescape_js_1.unescape)(this.toString()), false, false];\n        }\n        // XXX abstract out this map method\n        let bodyDotAllowed = !repeated || allowDot || dot || !startNoDot\n            ? ''\n            : this.#partsToRegExp(true);\n        if (bodyDotAllowed === body) {\n            bodyDotAllowed = '';\n        }\n        if (bodyDotAllowed) {\n            body = `(?:${body})(?:${bodyDotAllowed})*?`;\n        }\n        // an empty !() is exactly equivalent to a starNoEmpty\n        let final = '';\n        if (this.type === '!' && this.#emptyExt) {\n            final = (this.isStart() && !dot ? startNoDot : '') + starNoEmpty;\n        }\n        else {\n            const close = this.type === '!'\n                ? // !() must match something,but !(x) can match ''\n                    '))' +\n                        (this.isStart() && !dot && !allowDot ? startNoDot : '') +\n                        star +\n                        ')'\n                : this.type === '@'\n                    ? ')'\n                    : this.type === '?'\n                        ? ')?'\n                        : this.type === '+' && bodyDotAllowed\n                            ? ')'\n                            : this.type === '*' && bodyDotAllowed\n                                ? `)?`\n                                : `)${this.type}`;\n            final = start + body + close;\n        }\n        return [\n            final,\n            (0, unescape_js_1.unescape)(body),\n            (this.#hasMagic = !!this.#hasMagic),\n            this.#uflag,\n        ];\n    }\n    #partsToRegExp(dot) {\n        return this.#parts\n            .map(p => {\n            // extglob ASTs should only contain parent ASTs\n            /* c8 ignore start */\n            if (typeof p === 'string') {\n                throw new Error('string type in extglob ast??');\n            }\n            /* c8 ignore stop */\n            // can ignore hasMagic, because extglobs are already always magic\n            const [re, _, _hasMagic, uflag] = p.toRegExpSource(dot);\n            this.#uflag = this.#uflag || uflag;\n            return re;\n        })\n            .filter(p => !(this.isStart() && this.isEnd()) || !!p)\n            .join('|');\n    }\n    static #parseGlob(glob, hasMagic, noEmpty = false) {\n        let escaping = false;\n        let re = '';\n        let uflag = false;\n        for (let i = 0; i < glob.length; i++) {\n            const c = glob.charAt(i);\n            if (escaping) {\n                escaping = false;\n                re += (reSpecials.has(c) ? '\\\\' : '') + c;\n                continue;\n            }\n            if (c === '\\\\') {\n                if (i === glob.length - 1) {\n                    re += '\\\\\\\\';\n                }\n                else {\n                    escaping = true;\n                }\n                continue;\n            }\n            if (c === '[') {\n                const [src, needUflag, consumed, magic] = (0, brace_expressions_js_1.parseClass)(glob, i);\n                if (consumed) {\n                    re += src;\n                    uflag = uflag || needUflag;\n                    i += consumed - 1;\n                    hasMagic = hasMagic || magic;\n                    continue;\n                }\n            }\n            if (c === '*') {\n                if (noEmpty && glob === '*')\n                    re += starNoEmpty;\n                else\n                    re += star;\n                hasMagic = true;\n                continue;\n            }\n            if (c === '?') {\n                re += qmark;\n                hasMagic = true;\n                continue;\n            }\n            re += regExpEscape(c);\n        }\n        return [re, (0, unescape_js_1.unescape)(glob), !!hasMagic, uflag];\n    }\n}\nexports.AST = AST;\n//# sourceMappingURL=ast.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WillDeleteFilesFeature = exports.WillRenameFilesFeature = exports.WillCreateFilesFeature = exports.DidDeleteFilesFeature = exports.DidRenameFilesFeature = exports.DidCreateFilesFeature = void 0;\nconst code = __importStar(require(\"vscode\"));\nconst minimatch = __importStar(require(\"minimatch\"));\nconst proto = __importStar(require(\"vscode-languageserver-protocol\"));\nconst UUID = __importStar(require(\"./utils/uuid\"));\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nfunction access(target, key) {\n    return target[key];\n}\nfunction assign(target, key, value) {\n    target[key] = value;\n}\nclass FileOperationFeature {\n    _client;\n    _event;\n    _registrationType;\n    _clientCapability;\n    _serverCapability;\n    _listener;\n    // This property must stay private. Otherwise the type `minimatch.IMinimatch` becomes public and as a consequence we would need to\n    // ship the d.ts files for minimatch to make the compiler happy when compiling against the vscode-languageclient library\n    _filters;\n    constructor(client, event, registrationType, clientCapability, serverCapability) {\n        this._client = client;\n        this._event = event;\n        this._registrationType = registrationType;\n        this._clientCapability = clientCapability;\n        this._serverCapability = serverCapability;\n        this._filters = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this._registrationType.method, registrations: this._filters.size > 0 };\n    }\n    filterSize() {\n        return this._filters.size;\n    }\n    get registrationType() {\n        return this._registrationType;\n    }\n    fillClientCapabilities(capabilities) {\n        const value = ensure(ensure(capabilities, 'workspace'), 'fileOperations');\n        // this happens n times but it is the same value so we tolerate this.\n        assign(value, 'dynamicRegistration', true);\n        assign(value, this._clientCapability, true);\n    }\n    initialize(capabilities) {\n        const options = capabilities.workspace?.fileOperations;\n        const capability = options !== undefined ? access(options, this._serverCapability) : undefined;\n        if (capability?.filters !== undefined) {\n            try {\n                this.register({\n                    id: UUID.generateUuid(),\n                    registerOptions: { filters: capability.filters }\n                });\n            }\n            catch (e) {\n                this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${e}`);\n            }\n        }\n    }\n    register(data) {\n        if (!this._listener) {\n            this._listener = this._event(this.send, this);\n        }\n        const minimatchFilter = data.registerOptions.filters.map((filter) => {\n            const matcher = new minimatch.Minimatch(filter.pattern.glob, FileOperationFeature.asMinimatchOptions(filter.pattern.options));\n            if (!matcher.makeRe()) {\n                throw new Error(`Invalid pattern ${filter.pattern.glob}!`);\n            }\n            return { scheme: filter.scheme, matcher, kind: filter.pattern.matches };\n        });\n        this._filters.set(data.id, minimatchFilter);\n    }\n    unregister(id) {\n        this._filters.delete(id);\n        if (this._filters.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    clear() {\n        this._filters.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getFileType(uri) {\n        return FileOperationFeature.getFileType(uri);\n    }\n    async filter(event, prop) {\n        // (Asynchronously) map each file onto a boolean of whether it matches\n        // any of the globs.\n        const fileMatches = await Promise.all(event.files.map(async (item) => {\n            const uri = prop(item);\n            // Use fsPath to make this consistent with file system watchers but help\n            // minimatch to use '/' instead of `\\\\` if present.\n            const path = uri.fsPath.replace(/\\\\/g, '/');\n            for (const filters of this._filters.values()) {\n                for (const filter of filters) {\n                    if (filter.scheme !== undefined && filter.scheme !== uri.scheme) {\n                        continue;\n                    }\n                    if (filter.matcher.match(path)) {\n                        // The pattern matches. If kind is undefined then everything is ok\n                        if (filter.kind === undefined) {\n                            return true;\n                        }\n                        const fileType = await this.getFileType(uri);\n                        // If we can't determine the file type than we treat it as a match.\n                        // Dropping it would be another alternative.\n                        if (fileType === undefined) {\n                            this._client.info(`Unable to determine file type for ${uri.toString()}. Treating as a match.`);\n                            return true;\n                        }\n                        if ((fileType === code.FileType.File && filter.kind === proto.FileOperationPatternKind.file) || (fileType === code.FileType.Directory && filter.kind === proto.FileOperationPatternKind.folder)) {\n                            return true;\n                        }\n                    }\n                    else if (filter.kind === proto.FileOperationPatternKind.folder) {\n                        const fileType = await FileOperationFeature.getFileType(uri);\n                        if (fileType === code.FileType.Directory && filter.matcher.match(`${path}/`)) {\n                            return true;\n                        }\n                    }\n                }\n            }\n            return false;\n        }));\n        // Filter the files to those that matched.\n        const files = event.files.filter((_, index) => fileMatches[index]);\n        return { ...event, files };\n    }\n    static async getFileType(uri) {\n        try {\n            return (await code.workspace.fs.stat(uri)).type;\n        }\n        catch (e) {\n            return undefined;\n        }\n    }\n    static asMinimatchOptions(options) {\n        // The spec doesn't state that dot files don't match. So we make\n        // matching those the default.\n        const result = { dot: true };\n        if (options?.ignoreCase === true) {\n            result.nocase = true;\n        }\n        return result;\n    }\n}\nclass NotificationFileOperationFeature extends FileOperationFeature {\n    _notificationType;\n    _accessUri;\n    _createParams;\n    constructor(client, event, notificationType, clientCapability, serverCapability, accessUri, createParams) {\n        super(client, event, notificationType, clientCapability, serverCapability);\n        this._notificationType = notificationType;\n        this._accessUri = accessUri;\n        this._createParams = createParams;\n    }\n    async send(originalEvent) {\n        // Create a copy of the event that has the files filtered to match what the\n        // server wants.\n        const filteredEvent = await this.filter(originalEvent, this._accessUri);\n        if (filteredEvent.files.length) {\n            const next = async (event) => {\n                return this._client.sendNotification(this._notificationType, this._createParams(event));\n            };\n            return this.doSend(filteredEvent, next);\n        }\n    }\n}\nclass CachingNotificationFileOperationFeature extends NotificationFileOperationFeature {\n    _willListener;\n    _fsPathFileTypes = new Map();\n    async getFileType(uri) {\n        const fsPath = uri.fsPath;\n        if (this._fsPathFileTypes.has(fsPath)) {\n            return this._fsPathFileTypes.get(fsPath);\n        }\n        const type = await FileOperationFeature.getFileType(uri);\n        if (type) {\n            this._fsPathFileTypes.set(fsPath, type);\n        }\n        return type;\n    }\n    async cacheFileTypes(event, prop) {\n        // Calling filter will force the matching logic to run. For any item\n        // that requires a getFileType lookup, the overriden getFileType will\n        // be called that will cache the result so that when onDidRename fires,\n        // it can still be checked even though the item no longer exists on disk\n        // in its original location.\n        await this.filter(event, prop);\n    }\n    clearFileTypeCache() {\n        this._fsPathFileTypes.clear();\n    }\n    unregister(id) {\n        super.unregister(id);\n        if (this.filterSize() === 0 && this._willListener) {\n            this._willListener.dispose();\n            this._willListener = undefined;\n        }\n    }\n    clear() {\n        super.clear();\n        if (this._willListener) {\n            this._willListener.dispose();\n            this._willListener = undefined;\n        }\n    }\n}\nclass DidCreateFilesFeature extends NotificationFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onDidCreateFiles, proto.DidCreateFilesNotification.type, 'didCreate', 'didCreate', (i) => i, client.code2ProtocolConverter.asDidCreateFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.didCreateFiles\n            ? middleware.didCreateFiles(event, next)\n            : next(event);\n    }\n}\nexports.DidCreateFilesFeature = DidCreateFilesFeature;\nclass DidRenameFilesFeature extends CachingNotificationFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onDidRenameFiles, proto.DidRenameFilesNotification.type, 'didRename', 'didRename', (i) => i.oldUri, client.code2ProtocolConverter.asDidRenameFilesParams);\n    }\n    register(data) {\n        if (!this._willListener) {\n            this._willListener = code.workspace.onWillRenameFiles(this.willRename, this);\n        }\n        super.register(data);\n    }\n    willRename(e) {\n        e.waitUntil(this.cacheFileTypes(e, (i) => i.oldUri));\n    }\n    doSend(event, next) {\n        this.clearFileTypeCache();\n        const middleware = this._client.middleware.workspace;\n        return middleware?.didRenameFiles\n            ? middleware.didRenameFiles(event, next)\n            : next(event);\n    }\n}\nexports.DidRenameFilesFeature = DidRenameFilesFeature;\nclass DidDeleteFilesFeature extends CachingNotificationFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onDidDeleteFiles, proto.DidDeleteFilesNotification.type, 'didDelete', 'didDelete', (i) => i, client.code2ProtocolConverter.asDidDeleteFilesParams);\n    }\n    register(data) {\n        if (!this._willListener) {\n            this._willListener = code.workspace.onWillDeleteFiles(this.willDelete, this);\n        }\n        super.register(data);\n    }\n    willDelete(e) {\n        e.waitUntil(this.cacheFileTypes(e, (i) => i));\n    }\n    doSend(event, next) {\n        this.clearFileTypeCache();\n        const middleware = this._client.middleware.workspace;\n        return middleware?.didDeleteFiles\n            ? middleware.didDeleteFiles(event, next)\n            : next(event);\n    }\n}\nexports.DidDeleteFilesFeature = DidDeleteFilesFeature;\nclass RequestFileOperationFeature extends FileOperationFeature {\n    _requestType;\n    _accessUri;\n    _createParams;\n    constructor(client, event, requestType, clientCapability, serverCapability, accessUri, createParams) {\n        super(client, event, requestType, clientCapability, serverCapability);\n        this._requestType = requestType;\n        this._accessUri = accessUri;\n        this._createParams = createParams;\n    }\n    async send(originalEvent) {\n        const waitUntil = this.waitUntil(originalEvent);\n        originalEvent.waitUntil(waitUntil);\n    }\n    async waitUntil(originalEvent) {\n        // Create a copy of the event that has the files filtered to match what the\n        // server wants.\n        const filteredEvent = await this.filter(originalEvent, this._accessUri);\n        if (filteredEvent.files.length) {\n            const next = (event) => {\n                return this._client.sendRequest(this._requestType, this._createParams(event), event.token)\n                    .then(this._client.protocol2CodeConverter.asWorkspaceEdit);\n            };\n            return this.doSend(filteredEvent, next);\n        }\n        else {\n            return undefined;\n        }\n    }\n}\nclass WillCreateFilesFeature extends RequestFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onWillCreateFiles, proto.WillCreateFilesRequest.type, 'willCreate', 'willCreate', (i) => i, client.code2ProtocolConverter.asWillCreateFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.willCreateFiles\n            ? middleware.willCreateFiles(event, next)\n            : next(event);\n    }\n}\nexports.WillCreateFilesFeature = WillCreateFilesFeature;\nclass WillRenameFilesFeature extends RequestFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onWillRenameFiles, proto.WillRenameFilesRequest.type, 'willRename', 'willRename', (i) => i.oldUri, client.code2ProtocolConverter.asWillRenameFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.willRenameFiles\n            ? middleware.willRenameFiles(event, next)\n            : next(event);\n    }\n}\nexports.WillRenameFilesFeature = WillRenameFilesFeature;\nclass WillDeleteFilesFeature extends RequestFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onWillDeleteFiles, proto.WillDeleteFilesRequest.type, 'willDelete', 'willDelete', (i) => i, client.code2ProtocolConverter.asWillDeleteFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.willDeleteFiles\n            ? middleware.willDeleteFiles(event, next)\n            : next(event);\n    }\n}\nexports.WillDeleteFilesFeature = WillDeleteFilesFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HoverFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass HoverFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const hoverCapability = ((0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'hover'));\n        hoverCapability.dynamicRegistration = true;\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.hoverProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideHover: (document, position, token) => {\n                const client = this._client;\n                const provideHover = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asHover(result);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideHover\n                    ? middleware.provideHover(document, position, token, provideHover)\n                    : provideHover(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.HoverFeature = HoverFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SyncConfigurationFeature = exports.ConfigurationFeature = void 0;\nexports.toJSONObject = toJSONObject;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = __importStar(require(\"./utils/is\"));\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst features_1 = require(\"./features\");\n/**\n * Configuration pull model. From server to client.\n */\nclass ConfigurationFeature {\n    _client;\n    constructor(client) {\n        this._client = client;\n    }\n    getState() {\n        return { kind: 'static' };\n    }\n    fillClientCapabilities(capabilities) {\n        capabilities.workspace = capabilities.workspace || {};\n        capabilities.workspace.configuration = true;\n    }\n    initialize() {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\n            const configuration = (params) => {\n                const result = [];\n                for (const item of params.items) {\n                    const resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\n                }\n                return result;\n            };\n            const middleware = client.middleware.workspace;\n            return middleware && middleware.configuration\n                ? middleware.configuration(params, token, configuration)\n                : configuration(params, token);\n        });\n    }\n    getConfiguration(resource, section) {\n        let result = null;\n        if (section) {\n            const index = section.lastIndexOf('.');\n            if (index === -1) {\n                result = toJSONObject(vscode_1.workspace.getConfiguration(undefined, resource).get(section));\n            }\n            else {\n                const config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\n                if (config) {\n                    result = toJSONObject(config.get(section.substr(index + 1)));\n                }\n            }\n        }\n        else {\n            const config = vscode_1.workspace.getConfiguration(undefined, resource);\n            result = {};\n            for (const key of Object.keys(config)) {\n                if (config.has(key)) {\n                    result[key] = toJSONObject(config.get(key));\n                }\n            }\n        }\n        if (result === undefined) {\n            result = null;\n        }\n        return result;\n    }\n    clear() {\n    }\n}\nexports.ConfigurationFeature = ConfigurationFeature;\nfunction toJSONObject(obj) {\n    if (obj) {\n        if (Array.isArray(obj)) {\n            return obj.map(toJSONObject);\n        }\n        else if (typeof obj === 'object') {\n            const res = Object.create(null);\n            for (const key in obj) {\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                    res[key] = toJSONObject(obj[key]);\n                }\n            }\n            return res;\n        }\n    }\n    return obj;\n}\nclass SyncConfigurationFeature {\n    _client;\n    isCleared;\n    _listeners;\n    constructor(_client) {\n        this._client = _client;\n        this.isCleared = false;\n        this._listeners = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._listeners.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\n    }\n    initialize() {\n        this.isCleared = false;\n        const section = this._client.clientOptions.synchronize?.configurationSection;\n        if (section !== undefined) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: {\n                    section: section\n                }\n            });\n        }\n    }\n    register(data) {\n        const disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\n        });\n        this._listeners.set(data.id, disposable);\n        if (data.registerOptions.section !== undefined) {\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\n        }\n    }\n    unregister(id) {\n        const disposable = this._listeners.get(id);\n        if (disposable) {\n            this._listeners.delete(id);\n            disposable.dispose();\n        }\n    }\n    clear() {\n        for (const disposable of this._listeners.values()) {\n            disposable.dispose();\n        }\n        this._listeners.clear();\n        this.isCleared = true;\n    }\n    onDidChangeConfiguration(configurationSection, event) {\n        if (this.isCleared) {\n            return;\n        }\n        let sections;\n        if (Is.string(configurationSection)) {\n            sections = [configurationSection];\n        }\n        else {\n            sections = configurationSection;\n        }\n        if (sections !== undefined && event !== undefined) {\n            const affected = sections.some((section) => event.affectsConfiguration(section));\n            if (!affected) {\n                return;\n            }\n        }\n        const didChangeConfiguration = async (sections) => {\n            if (sections === undefined) {\n                return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\n            }\n            else {\n                return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\n            }\n        };\n        const middleware = this._client.middleware.workspace?.didChangeConfiguration;\n        (middleware ? middleware(sections, didChangeConfiguration) : didChangeConfiguration(sections)).catch((error) => {\n            this._client.error(`Sending notification ${vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type.method} failed`, error);\n        });\n    }\n    extractSettingsInformation(keys) {\n        function ensurePath(config, path) {\n            let current = config;\n            for (let i = 0; i < path.length - 1; i++) {\n                let obj = current[path[i]];\n                if (!obj) {\n                    obj = Object.create(null);\n                    current[path[i]] = obj;\n                }\n                current = obj;\n            }\n            return current;\n        }\n        const resource = this._client.clientOptions.workspaceFolder\n            ? this._client.clientOptions.workspaceFolder.uri\n            : undefined;\n        const result = Object.create(null);\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n            const index = key.indexOf('.');\n            let config = null;\n            if (index >= 0) {\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\n            }\n            else {\n                config = vscode_1.workspace.getConfiguration(undefined, resource).get(key);\n            }\n            if (config) {\n                const path = keys[i].split('.');\n                ensurePath(result, path)[path[path.length - 1]] = toJSONObject(config);\n            }\n        }\n        return result;\n    }\n}\nexports.SyncConfigurationFeature = SyncConfigurationFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NotebookDocumentSyncFeature = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst proto = __importStar(require(\"vscode-languageserver-protocol\"));\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst Is = __importStar(require(\"./utils/is\"));\nconst globPattern_1 = require(\"./utils/globPattern\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar Converter;\n(function (Converter) {\n    let c2p;\n    (function (c2p) {\n        function asVersionedNotebookDocumentIdentifier(notebookDocument, base) {\n            return {\n                version: notebookDocument.version,\n                uri: base.asUri(notebookDocument.uri)\n            };\n        }\n        c2p.asVersionedNotebookDocumentIdentifier = asVersionedNotebookDocumentIdentifier;\n        function asNotebookDocument(notebookDocument, cells, base) {\n            const result = proto.NotebookDocument.create(base.asUri(notebookDocument.uri), notebookDocument.notebookType, notebookDocument.version, asNotebookCells(cells, base));\n            if (Object.keys(notebookDocument.metadata).length > 0) {\n                result.metadata = asMetadata(notebookDocument.metadata);\n            }\n            return result;\n        }\n        c2p.asNotebookDocument = asNotebookDocument;\n        function asNotebookCells(cells, base) {\n            return cells.map(cell => asNotebookCell(cell, base));\n        }\n        c2p.asNotebookCells = asNotebookCells;\n        function asMetadata(metadata) {\n            const seen = new Set();\n            return deepCopy(seen, metadata);\n        }\n        c2p.asMetadata = asMetadata;\n        function asNotebookCell(cell, base) {\n            const result = proto.NotebookCell.create(asNotebookCellKind(cell.kind), base.asUri(cell.document.uri));\n            if (Object.keys(cell.metadata).length > 0) {\n                result.metadata = asMetadata(cell.metadata);\n            }\n            if (cell.executionSummary !== undefined && (Is.number(cell.executionSummary.executionOrder) && Is.boolean(cell.executionSummary.success))) {\n                result.executionSummary = {\n                    executionOrder: cell.executionSummary.executionOrder,\n                    success: cell.executionSummary.success\n                };\n            }\n            return result;\n        }\n        c2p.asNotebookCell = asNotebookCell;\n        function asNotebookCellKind(kind) {\n            switch (kind) {\n                case vscode.NotebookCellKind.Markup:\n                    return proto.NotebookCellKind.Markup;\n                case vscode.NotebookCellKind.Code:\n                    return proto.NotebookCellKind.Code;\n            }\n        }\n        function deepCopy(seen, value) {\n            if (seen.has(value)) {\n                throw new Error(`Can't deep copy cyclic structures.`);\n            }\n            if (Array.isArray(value)) {\n                const result = [];\n                for (const elem of value) {\n                    if (elem !== null && typeof elem === 'object' || Array.isArray(elem)) {\n                        result.push(deepCopy(seen, elem));\n                    }\n                    else {\n                        if (elem instanceof RegExp) {\n                            throw new Error(`Can't transfer regular expressions to the server`);\n                        }\n                        result.push(elem);\n                    }\n                }\n                return result;\n            }\n            else {\n                const props = Object.keys(value);\n                const result = Object.create(null);\n                for (const prop of props) {\n                    const elem = value[prop];\n                    if (elem !== null && typeof elem === 'object' || Array.isArray(elem)) {\n                        result[prop] = deepCopy(seen, elem);\n                    }\n                    else {\n                        if (elem instanceof RegExp) {\n                            throw new Error(`Can't transfer regular expressions to the server`);\n                        }\n                        result[prop] = elem;\n                    }\n                }\n                return result;\n            }\n        }\n        function asTextContentChange(event, base) {\n            const params = base.asChangeTextDocumentParams(event, event.document.uri, event.document.version);\n            return { document: params.textDocument, changes: params.contentChanges };\n        }\n        c2p.asTextContentChange = asTextContentChange;\n        function asNotebookDocumentChangeEvent(event, base) {\n            const result = Object.create(null);\n            if (event.metadata) {\n                result.metadata = Converter.c2p.asMetadata(event.metadata);\n            }\n            if (event.cells !== undefined) {\n                const cells = Object.create(null);\n                const changedCells = event.cells;\n                if (changedCells.structure) {\n                    cells.structure = {\n                        array: {\n                            start: changedCells.structure.array.start,\n                            deleteCount: changedCells.structure.array.deleteCount,\n                            cells: changedCells.structure.array.cells !== undefined ? changedCells.structure.array.cells.map(cell => Converter.c2p.asNotebookCell(cell, base)) : undefined\n                        },\n                        didOpen: changedCells.structure.didOpen !== undefined\n                            ? changedCells.structure.didOpen.map(cell => base.asOpenTextDocumentParams(cell.document).textDocument)\n                            : undefined,\n                        didClose: changedCells.structure.didClose !== undefined\n                            ? changedCells.structure.didClose.map(cell => base.asCloseTextDocumentParams(cell.document).textDocument)\n                            : undefined\n                    };\n                }\n                if (changedCells.data !== undefined) {\n                    cells.data = changedCells.data.map(cell => Converter.c2p.asNotebookCell(cell, base));\n                }\n                if (changedCells.textContent !== undefined) {\n                    cells.textContent = changedCells.textContent.map(event => Converter.c2p.asTextContentChange(event, base));\n                }\n                if (Object.keys(cells).length > 0) {\n                    result.cells = cells;\n                }\n            }\n            return result;\n        }\n        c2p.asNotebookDocumentChangeEvent = asNotebookDocumentChangeEvent;\n    })(c2p = Converter.c2p || (Converter.c2p = {}));\n})(Converter || (Converter = {}));\nvar $NotebookCell;\n(function ($NotebookCell) {\n    function computeDiff(originalCells, modifiedCells, compareMetadata) {\n        const originalLength = originalCells.length;\n        const modifiedLength = modifiedCells.length;\n        let startIndex = 0;\n        while (startIndex < modifiedLength && startIndex < originalLength && equals(originalCells[startIndex], modifiedCells[startIndex], compareMetadata)) {\n            startIndex++;\n        }\n        if (startIndex < modifiedLength && startIndex < originalLength) {\n            let originalEndIndex = originalLength - 1;\n            let modifiedEndIndex = modifiedLength - 1;\n            while (originalEndIndex >= 0 && modifiedEndIndex >= 0 && equals(originalCells[originalEndIndex], modifiedCells[modifiedEndIndex], compareMetadata)) {\n                originalEndIndex--;\n                modifiedEndIndex--;\n            }\n            const deleteCount = (originalEndIndex + 1) - startIndex;\n            const newCells = startIndex === modifiedEndIndex + 1 ? undefined : modifiedCells.slice(startIndex, modifiedEndIndex + 1);\n            return newCells !== undefined ? { start: startIndex, deleteCount, cells: newCells } : { start: startIndex, deleteCount };\n        }\n        else if (startIndex < modifiedLength) {\n            return { start: startIndex, deleteCount: 0, cells: modifiedCells.slice(startIndex) };\n        }\n        else if (startIndex < originalLength) {\n            return { start: startIndex, deleteCount: originalLength - startIndex };\n        }\n        else {\n            // The two arrays are the same.\n            return undefined;\n        }\n    }\n    $NotebookCell.computeDiff = computeDiff;\n    /**\n     * We only sync kind, document, execution and metadata to the server. So we only need to compare those.\n     */\n    function equals(one, other, compareMetaData = true) {\n        if (one.kind !== other.kind || one.document.uri.toString() !== other.document.uri.toString() || one.document.languageId !== other.document.languageId ||\n            !equalsExecution(one.executionSummary, other.executionSummary)) {\n            return false;\n        }\n        return !compareMetaData || (compareMetaData && equalsMetadata(one.metadata, other.metadata));\n    }\n    function equalsExecution(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === undefined || other === undefined) {\n            return false;\n        }\n        return one.executionOrder === other.executionOrder && one.success === other.success && equalsTiming(one.timing, other.timing);\n    }\n    function equalsTiming(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === undefined || other === undefined) {\n            return false;\n        }\n        return one.startTime === other.startTime && one.endTime === other.endTime;\n    }\n    function equalsMetadata(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        if (typeof one !== typeof other) {\n            return false;\n        }\n        if (typeof one !== 'object') {\n            return false;\n        }\n        const oneArray = Array.isArray(one);\n        const otherArray = Array.isArray(other);\n        if (oneArray !== otherArray) {\n            return false;\n        }\n        if (oneArray && otherArray) {\n            if (one.length !== other.length) {\n                return false;\n            }\n            for (let i = 0; i < one.length; i++) {\n                if (!equalsMetadata(one[i], other[i])) {\n                    return false;\n                }\n            }\n        }\n        if (isObjectLiteral(one) && isObjectLiteral(other)) {\n            const oneKeys = Object.keys(one);\n            const otherKeys = Object.keys(other);\n            if (oneKeys.length !== otherKeys.length) {\n                return false;\n            }\n            oneKeys.sort();\n            otherKeys.sort();\n            if (!equalsMetadata(oneKeys, otherKeys)) {\n                return false;\n            }\n            for (let i = 0; i < oneKeys.length; i++) {\n                const prop = oneKeys[i];\n                if (!equalsMetadata(one[prop], other[prop])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    function isObjectLiteral(value) {\n        return value !== null && typeof value === 'object';\n    }\n    $NotebookCell.isObjectLiteral = isObjectLiteral;\n})($NotebookCell || ($NotebookCell = {}));\nvar $NotebookDocumentFilter;\n(function ($NotebookDocumentFilter) {\n    function matchNotebook(filter, notebookDocument) {\n        if (typeof filter === 'string') {\n            return filter === '*' || notebookDocument.notebookType === filter;\n        }\n        if (filter.notebookType !== undefined && filter.notebookType !== '*' && notebookDocument.notebookType !== filter.notebookType) {\n            return false;\n        }\n        const uri = notebookDocument.uri;\n        if (filter.scheme !== undefined && filter.scheme !== '*' && uri.scheme !== filter.scheme) {\n            return false;\n        }\n        if (filter.pattern !== undefined) {\n            if (!(0, globPattern_1.matchGlobPattern)(filter.pattern, uri)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    $NotebookDocumentFilter.matchNotebook = matchNotebook;\n})($NotebookDocumentFilter || ($NotebookDocumentFilter = {}));\nvar $NotebookDocumentSyncOptions;\n(function ($NotebookDocumentSyncOptions) {\n    function asDocumentSelector(options) {\n        const selector = options.notebookSelector;\n        const result = [];\n        for (const element of selector) {\n            const notebookType = (typeof element.notebook === 'string' ? element.notebook : element.notebook?.notebookType) ?? '*';\n            const scheme = (typeof element.notebook === 'string') ? undefined : element.notebook?.scheme;\n            const pattern = (typeof element.notebook === 'string') ? undefined : element.notebook?.pattern;\n            if (element.cells !== undefined) {\n                for (const cell of element.cells) {\n                    result.push(asDocumentFilter(notebookType, scheme, pattern, cell.language));\n                }\n            }\n            else {\n                result.push(asDocumentFilter(notebookType, scheme, pattern, undefined));\n            }\n        }\n        return result;\n    }\n    $NotebookDocumentSyncOptions.asDocumentSelector = asDocumentSelector;\n    function asDocumentFilter(notebookType, scheme, pattern, language) {\n        return scheme === undefined && pattern === undefined\n            ? { notebook: notebookType, language }\n            : { notebook: { notebookType, scheme, pattern }, language };\n    }\n})($NotebookDocumentSyncOptions || ($NotebookDocumentSyncOptions = {}));\nvar SyncInfo;\n(function (SyncInfo) {\n    function create(cells) {\n        return {\n            cells,\n            uris: new Set(cells.map(cell => cell.document.uri.toString()))\n        };\n    }\n    SyncInfo.create = create;\n})(SyncInfo || (SyncInfo = {}));\nclass NotebookDocumentSyncFeatureProvider {\n    client;\n    options;\n    notebookSyncInfo;\n    notebookDidOpen;\n    disposables;\n    selector;\n    onChangeNotificationSent;\n    onOpenNotificationSent;\n    onCloseNotificationSent;\n    onSaveNotificationSent;\n    constructor(client, options, onChangeNotificationSent, onOpenNotificationSent, onCloseNotificationSent, onSaveNotificationSent) {\n        this.client = client;\n        this.options = options;\n        this.notebookSyncInfo = new Map();\n        this.notebookDidOpen = new Set();\n        this.disposables = [];\n        this.selector = client.protocol2CodeConverter.asDocumentSelector($NotebookDocumentSyncOptions.asDocumentSelector(options));\n        this.onChangeNotificationSent = onChangeNotificationSent;\n        this.onOpenNotificationSent = onOpenNotificationSent;\n        this.onCloseNotificationSent = onCloseNotificationSent;\n        this.onSaveNotificationSent = onSaveNotificationSent;\n        // open\n        vscode.workspace.onDidOpenNotebookDocument((notebookDocument) => {\n            this.notebookDidOpen.add(notebookDocument.uri.toString());\n            this.didOpen(notebookDocument);\n        }, undefined, this.disposables);\n        for (const notebookDocument of vscode.workspace.notebookDocuments) {\n            this.notebookDidOpen.add(notebookDocument.uri.toString());\n            this.didOpen(notebookDocument);\n        }\n        // Notebook document changed.\n        vscode.workspace.onDidChangeNotebookDocument(event => this.didChangeNotebookDocument(event), undefined, this.disposables);\n        //save\n        if (this.options.save === true) {\n            vscode.workspace.onDidSaveNotebookDocument(notebookDocument => this.didSave(notebookDocument), undefined, this.disposables);\n        }\n        // close\n        vscode.workspace.onDidCloseNotebookDocument((notebookDocument) => {\n            this.didClose(notebookDocument);\n            this.notebookDidOpen.delete(notebookDocument.uri.toString());\n        }, undefined, this.disposables);\n    }\n    getState() {\n        for (const notebook of vscode.workspace.notebookDocuments) {\n            const matchingCells = this.getMatchingCellsConsideringSyncInfo(notebook);\n            if (matchingCells !== undefined) {\n                return { kind: 'document', id: '$internal', registrations: true, matches: true };\n            }\n        }\n        return { kind: 'document', id: '$internal', registrations: true, matches: false };\n    }\n    get mode() {\n        return 'notebook';\n    }\n    handles(textDocument) {\n        if (vscode.languages.match(this.selector, textDocument) > 0) {\n            return true;\n        }\n        // Work around for https://github.com/microsoft/vscode/issues/202163\n        const key = textDocument.uri.toString();\n        for (const syncInfo of this.notebookSyncInfo.values()) {\n            if (syncInfo.uris.has(key)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    didOpenNotebookCellTextDocument(notebookDocument, cell) {\n        if (vscode.languages.match(this.selector, cell.document) === 0) {\n            return;\n        }\n        if (!this.notebookDidOpen.has(notebookDocument.uri.toString())) {\n            // We have never received an open notification for the notebook document.\n            // VS Code guarantees that we first get cell document open and then\n            // notebook open. So simply wait for the notebook open.\n            return;\n        }\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        // In VS Code we receive a notebook open before a cell document open.\n        // The document and the cell is synced.\n        const cellMatches = this.cellMatches(notebookDocument, cell);\n        if (syncInfo !== undefined) {\n            const cellIsSynced = syncInfo.uris.has(cell.document.uri.toString());\n            if ((cellMatches && cellIsSynced) || (!cellMatches && !cellIsSynced)) {\n                // The cell doesn't match and was not synced or it matches and is synced.\n                // In both cases nothing to do.\n                //\n                // Note that if the language mode of a document changes we remove the\n                // cell and add it back to update the language mode on the server side.\n                return;\n            }\n            if (cellMatches) {\n                // don't use cells from above since there might be more matching cells in the notebook\n                // Since we had a matching cell above we will have matching cells now.\n                const matchingCells = this.mergeCells(notebookDocument, syncInfo, [cell]);\n                if (matchingCells !== undefined) {\n                    const event = this.asNotebookDocumentChangeEvent(notebookDocument, undefined, syncInfo, matchingCells);\n                    if (event !== undefined) {\n                        this.doSendChange(event, matchingCells).catch(() => { });\n                    }\n                }\n            }\n        }\n        else {\n            // No sync info. But we have a open event for the notebook document\n            // itself. If the cell matches then we need to send an open with\n            // exactly that cell.\n            if (cellMatches) {\n                this.doSendOpen(notebookDocument, [cell]).catch(() => { });\n            }\n        }\n    }\n    didChangeNotebookCellTextDocument(notebookDocument, cell, event) {\n        // No match with the selector\n        if (vscode.languages.match(this.selector, event.document) === 0) {\n            return;\n        }\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        // Notebook got never synced. So it doesn't matter if a cell document changes.\n        if (syncInfo === undefined || !syncInfo.uris.has(cell.document.uri.toString())) {\n            return;\n        }\n        this.doSendChange({\n            notebook: notebookDocument,\n            cells: { textContent: [event] }\n        }, syncInfo.cells).catch(() => { });\n    }\n    didCloseNotebookCellTextDocument(notebookDocument, cell) {\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        if (syncInfo === undefined) {\n            // The notebook document got never synced. So it doesn't matter if a cell\n            // document closes.\n            return;\n        }\n        const cellUri = cell.document.uri;\n        const index = syncInfo.cells.findIndex((item) => item.document.uri.toString() === cellUri.toString());\n        if (index === -1) {\n            // The cell never got synced or it got deleted and we now received the document\n            // close event.\n            return;\n        }\n        if (index === 0 && syncInfo.cells.length === 1) {\n            // The last cell. Close the notebook document in the server.\n            this.doSendClose(notebookDocument, syncInfo.cells).catch(() => { });\n        }\n        else {\n            const newCells = syncInfo.cells.slice();\n            const deleted = newCells.splice(index, 1);\n            this.doSendChange({\n                notebook: notebookDocument,\n                cells: {\n                    structure: {\n                        array: { start: index, deleteCount: 1 },\n                        didClose: deleted\n                    }\n                }\n            }, newCells).catch(() => { });\n        }\n    }\n    dispose() {\n        for (const disposable of this.disposables) {\n            disposable.dispose();\n        }\n    }\n    didOpen(notebookDocument, matchingCells, syncInfo = this.getSyncInfo(notebookDocument)) {\n        if (syncInfo !== undefined) {\n            if (matchingCells === undefined) {\n                matchingCells = syncInfo.cells.slice();\n            }\n            if (matchingCells !== undefined) {\n                const event = this.asNotebookDocumentChangeEvent(notebookDocument, undefined, syncInfo, matchingCells);\n                if (event !== undefined) {\n                    this.doSendChange(event, matchingCells).catch(() => { });\n                }\n            }\n            else {\n                this.doSendClose(notebookDocument, []).catch(() => { });\n            }\n        }\n        else {\n            matchingCells = this.getMatchingCells(notebookDocument);\n            // Check if we need to sync the notebook document.\n            if (matchingCells === undefined) {\n                return;\n            }\n            this.doSendOpen(notebookDocument, matchingCells).catch(() => { });\n        }\n    }\n    didChangeNotebookDocument(event) {\n        const notebookDocument = event.notebook;\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        if (syncInfo === undefined) {\n            // We have no changes to the cells. Since the notebook wasn't synced\n            // it will not be synced now.\n            if (event.contentChanges.length === 0) {\n                return;\n            }\n            // Check if we have new matching cells.\n            const cells = this.getMatchingCells(notebookDocument);\n            // No matching cells and the notebook never synced. So still no need\n            // to sync it.\n            if (cells === undefined) {\n                return;\n            }\n            // Open the notebook document and ignore the rest of the changes\n            // this the notebooks will be synced with the correct settings.\n            this.didOpen(notebookDocument, cells, syncInfo);\n        }\n        else {\n            // The notebook is synced. First check if we have no matching\n            // cells anymore and if so close the notebook\n            const cells = this.getMatchingCellsFromEvent(notebookDocument, syncInfo, event);\n            if (cells === undefined) {\n                this.didClose(notebookDocument, syncInfo);\n                return;\n            }\n            const newEvent = this.asNotebookDocumentChangeEvent(event.notebook, event, syncInfo, cells);\n            if (newEvent !== undefined) {\n                this.doSendChange(newEvent, cells).catch(() => { });\n            }\n        }\n    }\n    didSave(notebookDocument) {\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        if (syncInfo === undefined) {\n            return;\n        }\n        this.doSendSave(notebookDocument).catch(() => { });\n    }\n    didClose(notebookDocument, syncInfo = this.getSyncInfo(notebookDocument)) {\n        if (syncInfo === undefined) {\n            return;\n        }\n        const syncedCells = notebookDocument.getCells().filter(cell => syncInfo.uris.has(cell.document.uri.toString()));\n        this.doSendClose(notebookDocument, syncedCells).catch(() => { });\n    }\n    async sendDidOpenNotebookDocument(notebookDocument) {\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        if (syncInfo !== undefined) {\n            throw new Error(`Notebook document ${notebookDocument.uri.toString()} is already open`);\n        }\n        const cells = this.getMatchingCells(notebookDocument);\n        if (cells === undefined) {\n            return;\n        }\n        return this.doSendOpen(notebookDocument, cells);\n    }\n    async doSendOpen(notebookDocument, cells) {\n        const send = async (notebookDocument, cells) => {\n            const cellDocuments = cells.map(cell => this.client.code2ProtocolConverter.asTextDocumentItem(cell.document));\n            try {\n                await this.client.sendNotification(proto.DidOpenNotebookDocumentNotification.type, {\n                    notebookDocument: Converter.c2p.asNotebookDocument(notebookDocument, cells, this.client.code2ProtocolConverter),\n                    cellTextDocuments: cellDocuments\n                });\n                this.onOpenNotificationSent.fire(notebookDocument);\n            }\n            catch (error) {\n                this.client.error('Sending DidOpenNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        this.notebookSyncInfo.set(notebookDocument.uri.toString(), SyncInfo.create(cells));\n        return middleware?.didOpen !== undefined ? middleware.didOpen(notebookDocument, cells, send) : send(notebookDocument, cells);\n    }\n    async sendDidChangeNotebookDocument(event) {\n        const cells = this.getMatchingCellsFromSyncInfo(event.notebook);\n        if (cells === undefined) {\n            throw new Error(`Received changed event for un-synced notebook ${event.notebook.uri.toString()}`);\n        }\n        return this.doSendChange(event, cells);\n    }\n    async doSendChange(event, cells) {\n        const send = async (event) => {\n            try {\n                await this.client.sendNotification(proto.DidChangeNotebookDocumentNotification.type, {\n                    notebookDocument: Converter.c2p.asVersionedNotebookDocumentIdentifier(event.notebook, this.client.code2ProtocolConverter),\n                    change: Converter.c2p.asNotebookDocumentChangeEvent(event, this.client.code2ProtocolConverter)\n                });\n                this.onChangeNotificationSent.fire(event);\n            }\n            catch (error) {\n                this.client.error('Sending DidChangeNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        if (event.cells?.structure !== undefined) {\n            this.notebookSyncInfo.set(event.notebook.uri.toString(), SyncInfo.create(cells));\n        }\n        return middleware?.didChange !== undefined ? middleware?.didChange(event, send) : send(event);\n    }\n    async sendDidSaveNotebookDocument(notebookDocument) {\n        return this.doSendSave(notebookDocument);\n    }\n    async doSendSave(notebookDocument) {\n        const send = async (notebookDocument) => {\n            try {\n                await this.client.sendNotification(proto.DidSaveNotebookDocumentNotification.type, {\n                    notebookDocument: { uri: this.client.code2ProtocolConverter.asUri(notebookDocument.uri) }\n                });\n                this.onSaveNotificationSent.fire(notebookDocument);\n            }\n            catch (error) {\n                this.client.error('Sending DidSaveNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        return middleware?.didSave !== undefined ? middleware.didSave(notebookDocument, send) : send(notebookDocument);\n    }\n    async sendDidCloseNotebookDocument(notebookDocument) {\n        const cells = this.getMatchingCellsFromSyncInfo(notebookDocument);\n        if (cells === undefined) {\n            throw new Error(`Received close event for un-synced notebook ${notebookDocument.uri.toString()}`);\n        }\n        return this.doSendClose(notebookDocument, cells);\n    }\n    async doSendClose(notebookDocument, cells) {\n        const send = async (notebookDocument, cells) => {\n            try {\n                await this.client.sendNotification(proto.DidCloseNotebookDocumentNotification.type, {\n                    notebookDocument: { uri: this.client.code2ProtocolConverter.asUri(notebookDocument.uri) },\n                    cellTextDocuments: cells.map(cell => this.client.code2ProtocolConverter.asTextDocumentIdentifier(cell.document))\n                });\n                this.onCloseNotificationSent.fire(notebookDocument);\n            }\n            catch (error) {\n                this.client.error('Sending DidCloseNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        this.notebookSyncInfo.delete(notebookDocument.uri.toString());\n        return middleware?.didClose !== undefined ? middleware.didClose(notebookDocument, cells, send) : send(notebookDocument, cells);\n    }\n    getSynchronizedCells(notebookDocument) {\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        return syncInfo?.cells;\n    }\n    asNotebookDocumentChangeEvent(notebook, event, syncInfo, matchingCells) {\n        if (event !== undefined && event.notebook !== notebook) {\n            throw new Error('Notebook must be identical');\n        }\n        const result = {\n            notebook: notebook\n        };\n        if (event?.metadata !== undefined) {\n            result.metadata = Converter.c2p.asMetadata(event.metadata);\n        }\n        let matchingCellsSet;\n        if (event?.cellChanges !== undefined && event.cellChanges.length > 0) {\n            const data = [];\n            // Only consider the new matching cells.\n            matchingCellsSet = new Set(matchingCells.map(cell => cell.document.uri.toString()));\n            for (const cellChange of event.cellChanges) {\n                if (matchingCellsSet.has(cellChange.cell.document.uri.toString()) && (cellChange.executionSummary !== undefined || cellChange.metadata !== undefined)) {\n                    data.push(cellChange.cell);\n                }\n            }\n            if (data.length > 0) {\n                result.cells = result.cells ?? {};\n                result.cells.data = data;\n            }\n        }\n        if (((event?.contentChanges !== undefined && event.contentChanges.length > 0) || event === undefined) && syncInfo !== undefined && matchingCells !== undefined) {\n            // We still have matching cells. Check if the cell changes\n            // affect the notebook on the server side.\n            const oldCells = syncInfo.cells;\n            const newCells = matchingCells;\n            // meta data changes are reported using on the cell itself. So we can ignore comparing\n            // it which has a positive effect on performance.\n            const diff = $NotebookCell.computeDiff(oldCells, newCells, false);\n            let addedCells;\n            let removedCells;\n            if (diff !== undefined) {\n                addedCells = diff.cells === undefined\n                    ? new Map()\n                    : new Map(diff.cells.map(cell => [cell.document.uri.toString(), cell]));\n                removedCells = diff.deleteCount === 0\n                    ? new Map()\n                    : new Map(oldCells.slice(diff.start, diff.start + diff.deleteCount).map(cell => [cell.document.uri.toString(), cell]));\n                // Remove the onces that got deleted and inserted again.\n                for (const key of Array.from(removedCells.keys())) {\n                    if (addedCells.has(key)) {\n                        removedCells.delete(key);\n                        addedCells.delete(key);\n                    }\n                }\n                result.cells = result.cells ?? {};\n                const didOpen = [];\n                const didClose = [];\n                if (addedCells.size > 0 || removedCells.size > 0) {\n                    for (const cell of addedCells.values()) {\n                        didOpen.push(cell);\n                    }\n                    for (const cell of removedCells.values()) {\n                        didClose.push(cell);\n                    }\n                }\n                result.cells.structure = {\n                    array: diff,\n                    didOpen,\n                    didClose\n                };\n            }\n        }\n        // The notebook is a property as well.\n        return Object.keys(result).length > 1 ? result : undefined;\n    }\n    getMatchingCells(notebookDocument, cells = notebookDocument.getCells()) {\n        if (this.options.notebookSelector === undefined) {\n            return undefined;\n        }\n        for (const item of this.options.notebookSelector) {\n            if (item.notebook === undefined || $NotebookDocumentFilter.matchNotebook(item.notebook, notebookDocument)) {\n                const filtered = this.filterCells(notebookDocument, cells, item.cells);\n                return filtered.length === 0 ? undefined : filtered;\n            }\n        }\n        return undefined;\n    }\n    getMatchingCellsFromEvent(notebookDocument, syncInfo, event) {\n        if (this.options.notebookSelector === undefined) {\n            return undefined;\n        }\n        let selector;\n        for (const item of this.options.notebookSelector) {\n            if (item.notebook === undefined || $NotebookDocumentFilter.matchNotebook(item.notebook, notebookDocument)) {\n                selector = item;\n                break;\n            }\n        }\n        if (selector === undefined) {\n            return undefined;\n        }\n        if ((event.cellChanges === undefined || event.cellChanges.length === 0) && (event.contentChanges === undefined || event.contentChanges.length === 0)) {\n            return syncInfo.cells;\n        }\n        let cells;\n        if (event.cellChanges !== undefined && event.cellChanges.length > 0) {\n            const changedCells = event.cellChanges.map(item => item.cell);\n            const filtered = this.filterCells(notebookDocument, changedCells, selector.cells);\n            if (filtered.length !== changedCells.length) {\n                cells = new Set(syncInfo.uris);\n                for (const cell of changedCells) {\n                    cells.delete(cell.document.uri.toString());\n                }\n                for (const cell of filtered) {\n                    cells.add(cell.document.uri.toString());\n                }\n            }\n        }\n        if (event.contentChanges !== undefined && event.contentChanges.length > 0) {\n            if (cells === undefined) {\n                cells = new Set(syncInfo.uris);\n            }\n            for (const item of event.contentChanges) {\n                for (const cell of item.removedCells) {\n                    cells.delete(cell.document.uri.toString());\n                }\n                const filtered = this.filterCells(notebookDocument, new Array(...item.addedCells), selector.cells);\n                for (const cell of filtered) {\n                    cells.add(cell.document.uri.toString());\n                }\n            }\n        }\n        if (cells === undefined) {\n            return syncInfo.cells;\n        }\n        // Only return the cells that are still in the set, but keep the order\n        // as present in the current notebook.\n        const result = [];\n        const current = notebookDocument.getCells();\n        for (const cell of current) {\n            if (cells.has(cell.document.uri.toString())) {\n                result.push(cell);\n            }\n        }\n        return result;\n    }\n    getMatchingCellsFromSyncInfo(notebook) {\n        const syncInfo = this.getSyncInfo(notebook);\n        return syncInfo !== undefined ? syncInfo.cells : undefined;\n    }\n    getMatchingCellsConsideringSyncInfo(notebook) {\n        const syncInfo = this.getSyncInfo(notebook);\n        return syncInfo !== undefined ? syncInfo.cells : this.getMatchingCells(notebook);\n    }\n    mergeCells(notebookDocument, syncInfo, cells) {\n        const result = [];\n        const merged = new Set(syncInfo.uris);\n        for (const cell of cells) {\n            merged.add(cell.document.uri.toString());\n        }\n        // Keep the cell order of the current notebook.\n        for (const cell of notebookDocument.getCells()) {\n            if (merged.has(cell.document.uri.toString())) {\n                result.push(cell);\n            }\n        }\n        return result;\n    }\n    cellMatches(notebookDocument, cell) {\n        const cells = this.getMatchingCells(notebookDocument, [cell]);\n        return cells !== undefined && cells[0] === cell;\n    }\n    filterCells(notebookDocument, cells, cellSelector) {\n        const filtered = cellSelector !== undefined ? cells.filter((cell) => {\n            const cellLanguage = cell.document.languageId;\n            return cellSelector.some((filter => (filter.language === '*' || cellLanguage === filter.language)));\n        }) : cells;\n        return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells === 'function'\n            ? this.client.clientOptions.notebookDocumentOptions.filterCells(notebookDocument, filtered)\n            : filtered;\n    }\n    getSyncInfo(notebook) {\n        return this.notebookSyncInfo.get(notebook.uri.toString());\n    }\n}\nclass NotebookDocumentSyncFeature {\n    static CellScheme = 'vscode-notebook-cell';\n    client;\n    registrations;\n    dedicatedChannel;\n    _onChangeNotificationSent;\n    _onOpenNotificationSent;\n    _onCloseNotificationSent;\n    _onSaveNotificationSent;\n    constructor(client) {\n        this.client = client;\n        this.registrations = new Map();\n        this.registrationType = proto.NotebookDocumentSyncRegistrationType.type;\n        this._onChangeNotificationSent = new vscode.EventEmitter();\n        this._onOpenNotificationSent = new vscode.EventEmitter();\n        this._onCloseNotificationSent = new vscode.EventEmitter();\n        this._onSaveNotificationSent = new vscode.EventEmitter();\n        // We don't receive an event for cells where the document changes its language mode\n        // Since we allow servers to filter on the language mode we fire such an event ourselves.\n        vscode.workspace.onDidOpenTextDocument((textDocument) => {\n            if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n                return;\n            }\n            const [notebookDocument, notebookCell] = this.findNotebookDocumentAndCell(textDocument);\n            if (notebookDocument === undefined || notebookCell === undefined) {\n                return;\n            }\n            for (const provider of this.registrations.values()) {\n                if (provider instanceof NotebookDocumentSyncFeatureProvider) {\n                    provider.didOpenNotebookCellTextDocument(notebookDocument, notebookCell);\n                }\n            }\n        });\n        vscode.workspace.onDidChangeTextDocument((event) => {\n            if (event.contentChanges.length === 0) {\n                return;\n            }\n            const textDocument = event.document;\n            if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n                return;\n            }\n            const [notebookDocument, cell] = this.findNotebookDocumentAndCell(textDocument);\n            if (notebookDocument === undefined || cell === undefined) {\n                return;\n            }\n            for (const provider of this.registrations.values()) {\n                if (provider instanceof NotebookDocumentSyncFeatureProvider) {\n                    provider.didChangeNotebookCellTextDocument(notebookDocument, cell, event);\n                }\n            }\n        });\n        vscode.workspace.onDidCloseTextDocument((textDocument) => {\n            if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n                return;\n            }\n            // There are two cases when we receive a close for a text document\n            // 1: the cell got removed. This is handled in `onDidChangeNotebookCells`\n            // 2: the language mode of a cell changed. This keeps the URI stable so\n            //    we will still find the cell and the notebook document.\n            const [notebookDocument, notebookCell] = this.findNotebookDocumentAndCell(textDocument);\n            if (notebookDocument === undefined || notebookCell === undefined) {\n                return;\n            }\n            for (const provider of this.registrations.values()) {\n                if (provider instanceof NotebookDocumentSyncFeatureProvider) {\n                    provider.didCloseNotebookCellTextDocument(notebookDocument, notebookCell);\n                }\n            }\n        });\n    }\n    getState() {\n        if (this.registrations.size === 0) {\n            return { kind: 'document', id: this.registrationType.method, registrations: false, matches: false };\n        }\n        for (const provider of this.registrations.values()) {\n            const state = provider.getState();\n            if (state.kind === 'document' && state.registrations === true && state.matches === true) {\n                return { kind: 'document', id: this.registrationType.method, registrations: true, matches: true };\n            }\n        }\n        return { kind: 'document', id: this.registrationType.method, registrations: true, matches: false };\n    }\n    registrationType;\n    get onOpenNotificationSent() {\n        return this._onOpenNotificationSent.event;\n    }\n    get onChangeNotificationSent() {\n        return this._onChangeNotificationSent.event;\n    }\n    get onCloseNotificationSent() {\n        return this._onCloseNotificationSent.event;\n    }\n    get onSaveNotificationSent() {\n        return this._onSaveNotificationSent.event;\n    }\n    fillClientCapabilities(capabilities) {\n        const synchronization = ensure(ensure(capabilities, 'notebookDocument'), 'synchronization');\n        synchronization.dynamicRegistration = true;\n        synchronization.executionSummarySupport = true;\n    }\n    preInitialize(capabilities) {\n        const options = capabilities.notebookDocumentSync;\n        if (options === undefined) {\n            return;\n        }\n        this.dedicatedChannel = this.client.protocol2CodeConverter.asDocumentSelector($NotebookDocumentSyncOptions.asDocumentSelector(options));\n    }\n    initialize(capabilities) {\n        const options = capabilities.notebookDocumentSync;\n        if (options === undefined) {\n            return;\n        }\n        const id = options.id ?? UUID.generateUuid();\n        this.register({ id, registerOptions: options });\n    }\n    register(data) {\n        const provider = new NotebookDocumentSyncFeatureProvider(this.client, data.registerOptions, this._onChangeNotificationSent, this._onOpenNotificationSent, this._onCloseNotificationSent, this._onSaveNotificationSent);\n        this.registrations.set(data.id, provider);\n    }\n    unregister(id) {\n        const provider = this.registrations.get(id);\n        if (provider !== undefined) {\n            this.registrations.delete(id);\n            provider.dispose();\n        }\n    }\n    clear() {\n        for (const provider of this.registrations.values()) {\n            provider.dispose();\n        }\n        this.registrations.clear();\n        this._onChangeNotificationSent.dispose();\n        this._onChangeNotificationSent = new vscode.EventEmitter();\n        this._onOpenNotificationSent.dispose();\n        this._onOpenNotificationSent = new vscode.EventEmitter();\n        this._onCloseNotificationSent.dispose();\n        this._onCloseNotificationSent = new vscode.EventEmitter();\n        this._onSaveNotificationSent.dispose();\n        this._onSaveNotificationSent = new vscode.EventEmitter();\n    }\n    handles(textDocument) {\n        if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n            return false;\n        }\n        if (this.dedicatedChannel !== undefined && vscode.languages.match(this.dedicatedChannel, textDocument) > 0) {\n            return true;\n        }\n        for (const provider of this.registrations.values()) {\n            if (provider.handles(textDocument)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    getProvider(notebookCell) {\n        for (const provider of this.registrations.values()) {\n            if (provider.handles(notebookCell.document)) {\n                return provider;\n            }\n        }\n        return undefined;\n    }\n    findNotebookDocumentAndCell(textDocument) {\n        const uri = textDocument.uri.toString();\n        for (const notebookDocument of vscode.workspace.notebookDocuments) {\n            for (const cell of notebookDocument.getCells()) {\n                if (cell.document.uri.toString() === uri) {\n                    return [notebookDocument, cell];\n                }\n            }\n        }\n        return [undefined, undefined];\n    }\n}\nexports.NotebookDocumentSyncFeature = NotebookDocumentSyncFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextDocumentContentRefreshRequest = exports.TextDocumentContentRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/textDocumentContent` request is sent from the client to the\n * server to request the content of a text document.\n *\n * @since 3.18.0\n * @proposed\n */\nvar TextDocumentContentRequest;\n(function (TextDocumentContentRequest) {\n    TextDocumentContentRequest.method = 'workspace/textDocumentContent';\n    TextDocumentContentRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TextDocumentContentRequest.type = new messages_1.ProtocolRequestType(TextDocumentContentRequest.method);\n    TextDocumentContentRequest.capabilities = messages_1.CM.create('workspace.textDocumentContent', 'workspace.textDocumentContent');\n})(TextDocumentContentRequest || (exports.TextDocumentContentRequest = TextDocumentContentRequest = {}));\n/**\n * The `workspace/textDocumentContent` request is sent from the server to the client to refresh\n * the content of a specific text document.\n *\n * @since 3.18.0\n * @proposed\n */\nvar TextDocumentContentRefreshRequest;\n(function (TextDocumentContentRefreshRequest) {\n    TextDocumentContentRefreshRequest.method = `workspace/textDocumentContent/refresh`;\n    TextDocumentContentRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    TextDocumentContentRefreshRequest.type = new messages_1.ProtocolRequestType(TextDocumentContentRefreshRequest.method);\n})(TextDocumentContentRefreshRequest || (exports.TextDocumentContentRefreshRequest = TextDocumentContentRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/vscode.proposed.codeActionAI.d.ts\" preserve: true/>\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConverter = createConverter;\nconst code = __importStar(require(\"vscode\"));\nconst proto = __importStar(require(\"vscode-languageserver-protocol\"));\nconst Is = __importStar(require(\"./utils/is\"));\nconst async = __importStar(require(\"./utils/async\"));\nconst protocolCompletionItem_1 = __importDefault(require(\"./protocolCompletionItem\"));\nconst protocolCodeLens_1 = __importDefault(require(\"./protocolCodeLens\"));\nconst protocolDocumentLink_1 = __importDefault(require(\"./protocolDocumentLink\"));\nconst protocolCodeAction_1 = __importDefault(require(\"./protocolCodeAction\"));\nconst protocolDiagnostic_1 = require(\"./protocolDiagnostic\");\nconst protocolCallHierarchyItem_1 = __importDefault(require(\"./protocolCallHierarchyItem\"));\nconst protocolTypeHierarchyItem_1 = __importDefault(require(\"./protocolTypeHierarchyItem\"));\nconst protocolWorkspaceSymbol_1 = __importDefault(require(\"./protocolWorkspaceSymbol\"));\nconst protocolInlayHint_1 = __importDefault(require(\"./protocolInlayHint\"));\nvar InsertReplaceRange;\n(function (InsertReplaceRange) {\n    function is(value) {\n        const candidate = value;\n        return candidate && !!candidate.inserting && !!candidate.replacing;\n    }\n    InsertReplaceRange.is = is;\n})(InsertReplaceRange || (InsertReplaceRange = {}));\nfunction createConverter(uriConverter) {\n    const nullConverter = (value) => value.toString();\n    const _uriConverter = uriConverter || nullConverter;\n    function asUri(value) {\n        return _uriConverter(value);\n    }\n    function asTextDocumentIdentifier(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri)\n        };\n    }\n    function asTextDocumentItem(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri),\n            languageId: textDocument.languageId,\n            version: textDocument.version,\n            text: textDocument.getText()\n        };\n    }\n    function asVersionedTextDocumentIdentifier(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri),\n            version: textDocument.version\n        };\n    }\n    function asOpenTextDocumentParams(textDocument) {\n        return {\n            textDocument: asTextDocumentItem(textDocument)\n        };\n    }\n    function isTextDocumentChangeEvent(value) {\n        const candidate = value;\n        return !!candidate.document && !!candidate.contentChanges;\n    }\n    function isTextDocument(value) {\n        const candidate = value;\n        return !!candidate.uri && !!candidate.version;\n    }\n    function asChangeTextDocumentParams(arg0, arg1, arg2) {\n        if (isTextDocument(arg0)) {\n            const result = {\n                textDocument: {\n                    uri: _uriConverter(arg0.uri),\n                    version: arg0.version\n                },\n                contentChanges: [{ text: arg0.getText() }]\n            };\n            return result;\n        }\n        else if (isTextDocumentChangeEvent(arg0)) {\n            const uri = arg1;\n            const version = arg2;\n            const result = {\n                textDocument: {\n                    uri: _uriConverter(uri),\n                    version: version\n                },\n                contentChanges: arg0.contentChanges.map((change) => {\n                    const range = change.range;\n                    return {\n                        range: {\n                            start: { line: range.start.line, character: range.start.character },\n                            end: { line: range.end.line, character: range.end.character }\n                        },\n                        rangeLength: change.rangeLength,\n                        text: change.text\n                    };\n                })\n            };\n            return result;\n        }\n        else {\n            throw Error('Unsupported text document change parameter');\n        }\n    }\n    function asCloseTextDocumentParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\n        const result = {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n        if (includeContent) {\n            result.text = textDocument.getText();\n        }\n        return result;\n    }\n    function asTextDocumentSaveReason(reason) {\n        switch (reason) {\n            case code.TextDocumentSaveReason.Manual:\n                return proto.TextDocumentSaveReason.Manual;\n            case code.TextDocumentSaveReason.AfterDelay:\n                return proto.TextDocumentSaveReason.AfterDelay;\n            case code.TextDocumentSaveReason.FocusOut:\n                return proto.TextDocumentSaveReason.FocusOut;\n        }\n        return proto.TextDocumentSaveReason.Manual;\n    }\n    function asWillSaveTextDocumentParams(event) {\n        return {\n            textDocument: asTextDocumentIdentifier(event.document),\n            reason: asTextDocumentSaveReason(event.reason)\n        };\n    }\n    function asDidCreateFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asDidRenameFilesParams(event) {\n        return {\n            files: event.files.map((file) => ({\n                oldUri: _uriConverter(file.oldUri),\n                newUri: _uriConverter(file.newUri),\n            })),\n        };\n    }\n    function asDidDeleteFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asWillCreateFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asWillRenameFilesParams(event) {\n        return {\n            files: event.files.map((file) => ({\n                oldUri: _uriConverter(file.oldUri),\n                newUri: _uriConverter(file.newUri),\n            })),\n        };\n    }\n    function asWillDeleteFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asTextDocumentPositionParams(textDocument, position) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position)\n        };\n    }\n    function asCompletionTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case code.CompletionTriggerKind.TriggerCharacter:\n                return proto.CompletionTriggerKind.TriggerCharacter;\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\n            default:\n                return proto.CompletionTriggerKind.Invoked;\n        }\n    }\n    function asCompletionParams(textDocument, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: {\n                triggerKind: asCompletionTriggerKind(context.triggerKind),\n                triggerCharacter: context.triggerCharacter\n            }\n        };\n    }\n    function asSignatureHelpTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case code.SignatureHelpTriggerKind.Invoke:\n                return proto.SignatureHelpTriggerKind.Invoked;\n            case code.SignatureHelpTriggerKind.TriggerCharacter:\n                return proto.SignatureHelpTriggerKind.TriggerCharacter;\n            case code.SignatureHelpTriggerKind.ContentChange:\n                return proto.SignatureHelpTriggerKind.ContentChange;\n        }\n    }\n    function asParameterInformation(value) {\n        // We leave the documentation out on purpose since it usually adds no\n        // value for the server.\n        return {\n            label: value.label\n        };\n    }\n    function asParameterInformations(values) {\n        return values.map(asParameterInformation);\n    }\n    function asSignatureInformation(value) {\n        // We leave the documentation out on purpose since it usually adds no\n        // value for the server.\n        return {\n            label: value.label,\n            parameters: asParameterInformations(value.parameters)\n        };\n    }\n    function asSignatureInformations(values) {\n        return values.map(asSignatureInformation);\n    }\n    function asSignatureHelp(value) {\n        if (value === undefined) {\n            return value;\n        }\n        return {\n            signatures: asSignatureInformations(value.signatures),\n            activeSignature: value.activeSignature,\n            activeParameter: value.activeParameter\n        };\n    }\n    function asSignatureHelpParams(textDocument, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: {\n                isRetrigger: context.isRetrigger,\n                triggerCharacter: context.triggerCharacter,\n                triggerKind: asSignatureHelpTriggerKind(context.triggerKind),\n                activeSignatureHelp: asSignatureHelp(context.activeSignatureHelp)\n            }\n        };\n    }\n    function asWorkerPosition(position) {\n        return { line: position.line, character: position.character };\n    }\n    function asPosition(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return { line: value.line > proto.uinteger.MAX_VALUE ? proto.uinteger.MAX_VALUE : value.line, character: value.character > proto.uinteger.MAX_VALUE ? proto.uinteger.MAX_VALUE : value.character };\n    }\n    function asPositions(values, token) {\n        return async.map(values, asPosition, token);\n    }\n    function asPositionsSync(values) {\n        return values.map(asPosition);\n    }\n    function asRange(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return { start: asPosition(value.start), end: asPosition(value.end) };\n    }\n    function asRanges(values) {\n        return values.map(asRange);\n    }\n    function asLocation(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return proto.Location.create(asUri(value.uri), asRange(value.range));\n    }\n    function asDiagnosticSeverity(value) {\n        switch (value) {\n            case code.DiagnosticSeverity.Error:\n                return proto.DiagnosticSeverity.Error;\n            case code.DiagnosticSeverity.Warning:\n                return proto.DiagnosticSeverity.Warning;\n            case code.DiagnosticSeverity.Information:\n                return proto.DiagnosticSeverity.Information;\n            case code.DiagnosticSeverity.Hint:\n                return proto.DiagnosticSeverity.Hint;\n        }\n    }\n    function asDiagnosticTags(tags) {\n        if (!tags) {\n            return undefined;\n        }\n        const result = [];\n        for (const tag of tags) {\n            const converted = asDiagnosticTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length > 0 ? result : undefined;\n    }\n    function asDiagnosticTag(tag) {\n        switch (tag) {\n            case code.DiagnosticTag.Unnecessary:\n                return proto.DiagnosticTag.Unnecessary;\n            case code.DiagnosticTag.Deprecated:\n                return proto.DiagnosticTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asRelatedInformation(item) {\n        return {\n            message: item.message,\n            location: asLocation(item.location)\n        };\n    }\n    function asRelatedInformations(items) {\n        return items.map(asRelatedInformation);\n    }\n    function asDiagnosticCode(value) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        if (Is.number(value) || Is.string(value)) {\n            return value;\n        }\n        return { value: value.value, target: asUri(value.target) };\n    }\n    function asDiagnostic(item) {\n        const result = proto.Diagnostic.create(asRange(item.range), item.message);\n        const protocolDiagnostic = item instanceof protocolDiagnostic_1.ProtocolDiagnostic ? item : undefined;\n        if (protocolDiagnostic !== undefined && protocolDiagnostic.data !== undefined) {\n            result.data = protocolDiagnostic.data;\n        }\n        const code = asDiagnosticCode(item.code);\n        if (protocolDiagnostic_1.DiagnosticCode.is(code)) {\n            if (protocolDiagnostic !== undefined && protocolDiagnostic.hasDiagnosticCode) {\n                result.code = code;\n            }\n            else {\n                result.code = code.value;\n                result.codeDescription = { href: code.target };\n            }\n        }\n        else {\n            result.code = code;\n        }\n        if (Is.number(item.severity)) {\n            result.severity = asDiagnosticSeverity(item.severity);\n        }\n        if (Array.isArray(item.tags)) {\n            result.tags = asDiagnosticTags(item.tags);\n        }\n        if (item.relatedInformation) {\n            result.relatedInformation = asRelatedInformations(item.relatedInformation);\n        }\n        if (item.source) {\n            result.source = item.source;\n        }\n        return result;\n    }\n    function asDiagnostics(items, token) {\n        if (items === undefined || items === null) {\n            return items;\n        }\n        return async.map(items, asDiagnostic, token);\n    }\n    function asDiagnosticsSync(items) {\n        if (items === undefined || items === null) {\n            return items;\n        }\n        return items.map(asDiagnostic);\n    }\n    function asDocumentation(format, documentation) {\n        switch (format) {\n            case '$string':\n                return documentation;\n            case proto.MarkupKind.PlainText:\n                return { kind: format, value: documentation };\n            case proto.MarkupKind.Markdown:\n                return { kind: format, value: documentation.value };\n            default:\n                return `Unsupported Markup content received. Kind is: ${format}`;\n        }\n    }\n    function asCompletionItemTag(tag) {\n        switch (tag) {\n            case code.CompletionItemTag.Deprecated:\n                return proto.CompletionItemTag.Deprecated;\n        }\n        return undefined;\n    }\n    function asCompletionItemTags(tags) {\n        if (tags === undefined) {\n            return tags;\n        }\n        const result = [];\n        for (const tag of tags) {\n            const converted = asCompletionItemTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result;\n    }\n    function asCompletionItemKind(value, original) {\n        if (original !== undefined) {\n            return original;\n        }\n        return value + 1;\n    }\n    function asCompletionItem(item, labelDetailsSupport = false) {\n        let label;\n        let labelDetails;\n        if (Is.string(item.label)) {\n            label = item.label;\n        }\n        else {\n            label = item.label.label;\n            if (labelDetailsSupport && (item.label.detail !== undefined || item.label.description !== undefined)) {\n                labelDetails = { detail: item.label.detail, description: item.label.description };\n            }\n        }\n        const result = { label: label };\n        if (labelDetails !== undefined) {\n            result.labelDetails = labelDetails;\n        }\n        const protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        // We only send items back we created. So this can't be something else than\n        // a string right now.\n        if (item.documentation) {\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\n                result.documentation = item.documentation;\n            }\n            else {\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\n            }\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        fillPrimaryInsertText(result, item);\n        if (Is.number(item.kind)) {\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\n        }\n        if (item.commitCharacters) {\n            result.commitCharacters = item.commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        const tags = asCompletionItemTags(item.tags);\n        if (protocolItem) {\n            if (protocolItem.data !== undefined) {\n                result.data = protocolItem.data;\n            }\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\n                if (protocolItem.deprecated === true && tags !== undefined && tags.length > 0) {\n                    const index = tags.indexOf(code.CompletionItemTag.Deprecated);\n                    if (index !== -1) {\n                        tags.splice(index, 1);\n                    }\n                }\n                result.deprecated = protocolItem.deprecated;\n            }\n            if (protocolItem.insertTextMode !== undefined) {\n                result.insertTextMode = protocolItem.insertTextMode;\n            }\n        }\n        if (tags !== undefined && tags.length > 0) {\n            result.tags = tags;\n        }\n        if (result.insertTextMode === undefined && item.keepWhitespace === true) {\n            result.insertTextMode = proto.InsertTextMode.adjustIndentation;\n        }\n        return result;\n    }\n    function fillPrimaryInsertText(target, source) {\n        let format = proto.InsertTextFormat.PlainText;\n        let text = undefined;\n        let range = undefined;\n        if (source.textEdit) {\n            text = source.textEdit.newText;\n            range = source.textEdit.range;\n        }\n        else if (source.insertText instanceof code.SnippetString) {\n            format = proto.InsertTextFormat.Snippet;\n            text = source.insertText.value;\n        }\n        else {\n            text = source.insertText;\n        }\n        if (source.range) {\n            range = source.range;\n        }\n        target.insertTextFormat = format;\n        if (source.fromEdit && text !== undefined && range !== undefined) {\n            target.textEdit = asCompletionTextEdit(text, range);\n        }\n        else {\n            target.insertText = text;\n        }\n    }\n    function asCompletionTextEdit(newText, range) {\n        if (InsertReplaceRange.is(range)) {\n            return proto.InsertReplaceEdit.create(newText, asRange(range.inserting), asRange(range.replacing));\n        }\n        else {\n            return { newText, range: asRange(range) };\n        }\n    }\n    function asTextEdit(edit) {\n        return { range: asRange(edit.range), newText: edit.newText };\n    }\n    function asTextEdits(edits) {\n        if (edits === undefined || edits === null) {\n            return edits;\n        }\n        return edits.map(asTextEdit);\n    }\n    function asSymbolKind(item) {\n        if (item <= code.SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return (item + 1);\n        }\n        return proto.SymbolKind.Property;\n    }\n    function asSymbolTag(item) {\n        return item;\n    }\n    function asSymbolTags(items) {\n        return items.map(asSymbolTag);\n    }\n    function asReferenceParams(textDocument, position, options) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: { includeDeclaration: options.includeDeclaration }\n        };\n    }\n    async function asCodeAction(item, token) {\n        const result = proto.CodeAction.create(item.title);\n        if (item instanceof protocolCodeAction_1.default && item.data !== undefined) {\n            result.data = item.data;\n        }\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics !== undefined) {\n            result.diagnostics = await asDiagnostics(item.diagnostics, token);\n        }\n        if (item.edit !== undefined) {\n            throw new Error(`VS Code code actions can only be converted to a protocol code action without an edit.`);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        if (item.disabled !== undefined) {\n            result.disabled = { reason: item.disabled.reason };\n        }\n        if (item.isAI) {\n            result.tags ??= [];\n            result.tags.push(proto.CodeActionTag.LLMGenerated);\n        }\n        return result;\n    }\n    function asCodeActionSync(item) {\n        const result = proto.CodeAction.create(item.title);\n        if (item instanceof protocolCodeAction_1.default && item.data !== undefined) {\n            result.data = item.data;\n        }\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics !== undefined) {\n            result.diagnostics = asDiagnosticsSync(item.diagnostics);\n        }\n        if (item.edit !== undefined) {\n            throw new Error(`VS Code code actions can only be converted to a protocol code action without an edit.`);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        if (item.disabled !== undefined) {\n            result.disabled = { reason: item.disabled.reason };\n        }\n        if (item.isAI) {\n            result.tags ??= [];\n            result.tags.push(proto.CodeActionTag.LLMGenerated);\n        }\n        return result;\n    }\n    async function asCodeActionContext(context, token) {\n        if (context === undefined || context === null) {\n            return context;\n        }\n        let only;\n        if (context.only && Is.string(context.only.value)) {\n            only = [context.only.value];\n        }\n        return proto.CodeActionContext.create(await asDiagnostics(context.diagnostics, token), only, asCodeActionTriggerKind(context.triggerKind));\n    }\n    function asCodeActionContextSync(context) {\n        if (context === undefined || context === null) {\n            return context;\n        }\n        let only;\n        if (context.only && Is.string(context.only.value)) {\n            only = [context.only.value];\n        }\n        return proto.CodeActionContext.create(asDiagnosticsSync(context.diagnostics), only, asCodeActionTriggerKind(context.triggerKind));\n    }\n    function asCodeActionTriggerKind(kind) {\n        switch (kind) {\n            case code.CodeActionTriggerKind.Invoke:\n                return proto.CodeActionTriggerKind.Invoked;\n            case code.CodeActionTriggerKind.Automatic:\n                return proto.CodeActionTriggerKind.Automatic;\n            default:\n                return undefined;\n        }\n    }\n    function asCodeActionKind(item) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        return item.value;\n    }\n    function asInlineValueContext(context) {\n        return proto.InlineValueContext.create(context.frameId, asRange(context.stoppedLocation));\n    }\n    function asInlineCompletionParams(document, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(document), position: asPosition(position),\n            context: asInlineCompletionContext(context)\n        };\n    }\n    function asInlineCompletionContext(context) {\n        return {\n            triggerKind: asInlineCompletionTriggerKind(context.triggerKind),\n            selectedCompletionInfo: asSelectedCompletionInfo(context.selectedCompletionInfo)\n        };\n    }\n    function asInlineCompletionTriggerKind(kind) {\n        switch (kind) {\n            case code.InlineCompletionTriggerKind.Invoke:\n                return proto.InlineCompletionTriggerKind.Invoked;\n            case code.InlineCompletionTriggerKind.Automatic:\n                return proto.InlineCompletionTriggerKind.Automatic;\n        }\n    }\n    function asSelectedCompletionInfo(info) {\n        if (info === undefined || info === null) {\n            return undefined;\n        }\n        return { range: asRange(info.range), text: info.text };\n    }\n    function asCommand(item) {\n        const result = proto.Command.create(item.title, item.command);\n        if (item.tooltip) {\n            result.tooltip = item.tooltip;\n        }\n        if (item.arguments) {\n            result.arguments = item.arguments;\n        }\n        return result;\n    }\n    function asCodeLens(item) {\n        const result = proto.CodeLens.create(asRange(item.range));\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item instanceof protocolCodeLens_1.default) {\n            if (item.data) {\n                result.data = item.data;\n            }\n        }\n        return result;\n    }\n    function asFormattingOptions(options, fileOptions) {\n        const result = { tabSize: options.tabSize, insertSpaces: options.insertSpaces };\n        if (fileOptions.trimTrailingWhitespace) {\n            result.trimTrailingWhitespace = true;\n        }\n        if (fileOptions.trimFinalNewlines) {\n            result.trimFinalNewlines = true;\n        }\n        if (fileOptions.insertFinalNewline) {\n            result.insertFinalNewline = true;\n        }\n        return result;\n    }\n    function asDocumentSymbolParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asCodeLensParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asDocumentLink(item) {\n        const result = proto.DocumentLink.create(asRange(item.range));\n        if (item.target) {\n            result.target = asUri(item.target);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = item.tooltip;\n        }\n        const protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\n        if (protocolItem && protocolItem.data) {\n            result.data = protocolItem.data;\n        }\n        return result;\n    }\n    function asDocumentLinkParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asCallHierarchyItem(value) {\n        const result = {\n            name: value.name,\n            kind: asSymbolKind(value.kind),\n            uri: asUri(value.uri),\n            range: asRange(value.range),\n            selectionRange: asRange(value.selectionRange)\n        };\n        if (value.detail !== undefined && value.detail.length > 0) {\n            result.detail = value.detail;\n        }\n        if (value.tags !== undefined) {\n            result.tags = asSymbolTags(value.tags);\n        }\n        if (value instanceof protocolCallHierarchyItem_1.default && value.data !== undefined) {\n            result.data = value.data;\n        }\n        return result;\n    }\n    function asTypeHierarchyItem(value) {\n        const result = {\n            name: value.name,\n            kind: asSymbolKind(value.kind),\n            uri: asUri(value.uri),\n            range: asRange(value.range),\n            selectionRange: asRange(value.selectionRange),\n        };\n        if (value.detail !== undefined && value.detail.length > 0) {\n            result.detail = value.detail;\n        }\n        if (value.tags !== undefined) {\n            result.tags = asSymbolTags(value.tags);\n        }\n        if (value instanceof protocolTypeHierarchyItem_1.default && value.data !== undefined) {\n            result.data = value.data;\n        }\n        return result;\n    }\n    function asWorkspaceSymbol(item) {\n        const result = item instanceof protocolWorkspaceSymbol_1.default\n            ? { name: item.name, kind: asSymbolKind(item.kind), location: item.hasRange ? asLocation(item.location) : { uri: _uriConverter(item.location.uri) }, data: item.data }\n            : { name: item.name, kind: asSymbolKind(item.kind), location: asLocation(item.location) };\n        if (item.tags !== undefined) {\n            result.tags = asSymbolTags(item.tags);\n        }\n        if (item.containerName !== '') {\n            result.containerName = item.containerName;\n        }\n        return result;\n    }\n    function asInlayHint(item) {\n        const label = typeof item.label === 'string'\n            ? item.label\n            : item.label.map(asInlayHintLabelPart);\n        const result = proto.InlayHint.create(asPosition(item.position), label);\n        if (item.kind !== undefined) {\n            result.kind = item.kind;\n        }\n        if (item.textEdits !== undefined) {\n            result.textEdits = asTextEdits(item.textEdits);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = asTooltip(item.tooltip);\n        }\n        if (item.paddingLeft !== undefined) {\n            result.paddingLeft = item.paddingLeft;\n        }\n        if (item.paddingRight !== undefined) {\n            result.paddingRight = item.paddingRight;\n        }\n        if (item instanceof protocolInlayHint_1.default && item.data !== undefined) {\n            result.data = item.data;\n        }\n        return result;\n    }\n    function asInlayHintLabelPart(item) {\n        const result = proto.InlayHintLabelPart.create(item.value);\n        if (item.location !== undefined) {\n            result.location = asLocation(item.location);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = asTooltip(item.tooltip);\n        }\n        return result;\n    }\n    function asTooltip(value) {\n        if (typeof value === 'string') {\n            return value;\n        }\n        const result = {\n            kind: proto.MarkupKind.Markdown,\n            value: value.value\n        };\n        return result;\n    }\n    return {\n        asUri,\n        asTextDocumentIdentifier,\n        asTextDocumentItem,\n        asVersionedTextDocumentIdentifier,\n        asOpenTextDocumentParams,\n        asChangeTextDocumentParams,\n        asCloseTextDocumentParams,\n        asSaveTextDocumentParams,\n        asWillSaveTextDocumentParams,\n        asDidCreateFilesParams,\n        asDidRenameFilesParams,\n        asDidDeleteFilesParams,\n        asWillCreateFilesParams,\n        asWillRenameFilesParams,\n        asWillDeleteFilesParams,\n        asTextDocumentPositionParams,\n        asCompletionParams,\n        asSignatureHelpParams,\n        asWorkerPosition,\n        asRange,\n        asRanges,\n        asPosition,\n        asPositions,\n        asPositionsSync,\n        asLocation,\n        asDiagnosticSeverity,\n        asDiagnosticTag,\n        asDiagnostic,\n        asDiagnostics,\n        asDiagnosticsSync,\n        asCompletionItem,\n        asTextEdit,\n        asSymbolKind,\n        asSymbolTag,\n        asSymbolTags,\n        asReferenceParams,\n        asCodeAction,\n        asCodeActionSync,\n        asCodeActionContext,\n        asCodeActionContextSync,\n        asInlineValueContext,\n        asCommand,\n        asCodeLens,\n        asFormattingOptions,\n        asDocumentSymbolParams,\n        asCodeLensParams,\n        asDocumentLink,\n        asDocumentLinkParams,\n        asCallHierarchyItem,\n        asTypeHierarchyItem,\n        asInlayHint,\n        asWorkspaceSymbol,\n        asInlineCompletionParams,\n        asInlineCompletionContext\n    };\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReferencesFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass ReferencesFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'references').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.referencesProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideReferences: (document, position, options, token) => {\n                const client = this._client;\n                const _providerReferences = (document, position, options, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asReferences(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideReferences\n                    ? middleware.provideReferences(document, position, options, token, _providerReferences)\n                    : _providerReferences(document, position, options, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.ReferencesFeature = ReferencesFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nexport var DocumentUri;\n(function (DocumentUri) {\n    function is(value) {\n        return typeof value === 'string';\n    }\n    DocumentUri.is = is;\n})(DocumentUri || (DocumentUri = {}));\nexport var URI;\n(function (URI) {\n    function is(value) {\n        return typeof value === 'string';\n    }\n    URI.is = is;\n})(URI || (URI = {}));\nexport var integer;\n(function (integer) {\n    integer.MIN_VALUE = -2147483648;\n    integer.MAX_VALUE = 2147483647;\n    function is(value) {\n        return typeof value === 'number' && integer.MIN_VALUE <= value && value <= integer.MAX_VALUE;\n    }\n    integer.is = is;\n})(integer || (integer = {}));\nexport var uinteger;\n(function (uinteger) {\n    uinteger.MIN_VALUE = 0;\n    uinteger.MAX_VALUE = 2147483647;\n    function is(value) {\n        return typeof value === 'number' && uinteger.MIN_VALUE <= value && value <= uinteger.MAX_VALUE;\n    }\n    uinteger.is = is;\n})(uinteger || (uinteger = {}));\n/**\n * The Position namespace provides helper functions to work with\n * {@link Position} literals.\n */\nexport var Position;\n(function (Position) {\n    /**\n     * Creates a new Position literal from the given line and character.\n     * @param line The position's line.\n     * @param character The position's character.\n     */\n    function create(line, character) {\n        if (line === Number.MAX_VALUE) {\n            line = uinteger.MAX_VALUE;\n        }\n        if (character === Number.MAX_VALUE) {\n            character = uinteger.MAX_VALUE;\n        }\n        return { line, character };\n    }\n    Position.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Position} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.uinteger(candidate.line) && Is.uinteger(candidate.character);\n    }\n    Position.is = is;\n})(Position || (Position = {}));\n/**\n * The Range namespace provides helper functions to work with\n * {@link Range} literals.\n */\nexport var Range;\n(function (Range) {\n    function create(one, two, three, four) {\n        if (Is.uinteger(one) && Is.uinteger(two) && Is.uinteger(three) && Is.uinteger(four)) {\n            return { start: Position.create(one, two), end: Position.create(three, four) };\n        }\n        else if (Position.is(one) && Position.is(two)) {\n            return { start: one, end: two };\n        }\n        else {\n            throw new Error(`Range#create called with invalid arguments[${one}, ${two}, ${three}, ${four}]`);\n        }\n    }\n    Range.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Range} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n    }\n    Range.is = is;\n})(Range || (Range = {}));\n/**\n * The Location namespace provides helper functions to work with\n * {@link Location} literals.\n */\nexport var Location;\n(function (Location) {\n    /**\n     * Creates a Location literal.\n     * @param uri The location's uri.\n     * @param range The location's range.\n     */\n    function create(uri, range) {\n        return { uri, range };\n    }\n    Location.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Location} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n    }\n    Location.is = is;\n})(Location || (Location = {}));\n/**\n * The LocationLink namespace provides helper functions to work with\n * {@link LocationLink} literals.\n */\nexport var LocationLink;\n(function (LocationLink) {\n    /**\n     * Creates a LocationLink literal.\n     * @param targetUri The definition's uri.\n     * @param targetRange The full range of the definition.\n     * @param targetSelectionRange The span of the symbol definition at the target.\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\n     */\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\n        return { targetUri, targetRange, targetSelectionRange, originSelectionRange };\n    }\n    LocationLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link LocationLink} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\n            && Range.is(candidate.targetSelectionRange)\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\n    }\n    LocationLink.is = is;\n})(LocationLink || (LocationLink = {}));\n/**\n * The Color namespace provides helper functions to work with\n * {@link Color} literals.\n */\nexport var Color;\n(function (Color) {\n    /**\n     * Creates a new Color literal.\n     */\n    function create(red, green, blue, alpha) {\n        return {\n            red,\n            green,\n            blue,\n            alpha,\n        };\n    }\n    Color.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Color} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.numberRange(candidate.red, 0, 1)\n            && Is.numberRange(candidate.green, 0, 1)\n            && Is.numberRange(candidate.blue, 0, 1)\n            && Is.numberRange(candidate.alpha, 0, 1);\n    }\n    Color.is = is;\n})(Color || (Color = {}));\n/**\n * The ColorInformation namespace provides helper functions to work with\n * {@link ColorInformation} literals.\n */\nexport var ColorInformation;\n(function (ColorInformation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(range, color) {\n        return {\n            range,\n            color,\n        };\n    }\n    ColorInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.range) && Color.is(candidate.color);\n    }\n    ColorInformation.is = is;\n})(ColorInformation || (ColorInformation = {}));\n/**\n * The Color namespace provides helper functions to work with\n * {@link ColorPresentation} literals.\n */\nexport var ColorPresentation;\n(function (ColorPresentation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(label, textEdit, additionalTextEdits) {\n        return {\n            label,\n            textEdit,\n            additionalTextEdits,\n        };\n    }\n    ColorPresentation.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.label)\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\n    }\n    ColorPresentation.is = is;\n})(ColorPresentation || (ColorPresentation = {}));\n/**\n * A set of predefined range kinds.\n */\nexport var FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind.Comment = 'comment';\n    /**\n     * Folding range for an import or include\n     */\n    FoldingRangeKind.Imports = 'imports';\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind.Region = 'region';\n})(FoldingRangeKind || (FoldingRangeKind = {}));\n/**\n * The folding range namespace provides helper functions to work with\n * {@link FoldingRange} literals.\n */\nexport var FoldingRange;\n(function (FoldingRange) {\n    /**\n     * Creates a new FoldingRange literal.\n     */\n    function create(startLine, endLine, startCharacter, endCharacter, kind, collapsedText) {\n        const result = {\n            startLine,\n            endLine\n        };\n        if (Is.defined(startCharacter)) {\n            result.startCharacter = startCharacter;\n        }\n        if (Is.defined(endCharacter)) {\n            result.endCharacter = endCharacter;\n        }\n        if (Is.defined(kind)) {\n            result.kind = kind;\n        }\n        if (Is.defined(collapsedText)) {\n            result.collapsedText = collapsedText;\n        }\n        return result;\n    }\n    FoldingRange.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link FoldingRange} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.uinteger(candidate.startLine) && Is.uinteger(candidate.startLine)\n            && (Is.undefined(candidate.startCharacter) || Is.uinteger(candidate.startCharacter))\n            && (Is.undefined(candidate.endCharacter) || Is.uinteger(candidate.endCharacter))\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\n    }\n    FoldingRange.is = is;\n})(FoldingRange || (FoldingRange = {}));\n/**\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\n * {@link DiagnosticRelatedInformation} literals.\n */\nexport var DiagnosticRelatedInformation;\n(function (DiagnosticRelatedInformation) {\n    /**\n     * Creates a new DiagnosticRelatedInformation literal.\n     */\n    function create(location, message) {\n        return {\n            location,\n            message\n        };\n    }\n    DiagnosticRelatedInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link DiagnosticRelatedInformation} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\n    }\n    DiagnosticRelatedInformation.is = is;\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\n/**\n * The diagnostic's severity.\n */\nexport var DiagnosticSeverity;\n(function (DiagnosticSeverity) {\n    /**\n     * Reports an error.\n     */\n    DiagnosticSeverity.Error = 1;\n    /**\n     * Reports a warning.\n     */\n    DiagnosticSeverity.Warning = 2;\n    /**\n     * Reports an information.\n     */\n    DiagnosticSeverity.Information = 3;\n    /**\n     * Reports a hint.\n     */\n    DiagnosticSeverity.Hint = 4;\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\n/**\n * The diagnostic tags.\n *\n * @since 3.15.0\n */\nexport var DiagnosticTag;\n(function (DiagnosticTag) {\n    /**\n     * Unused or unnecessary code.\n     *\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\n     * an error squiggle.\n     */\n    DiagnosticTag.Unnecessary = 1;\n    /**\n     * Deprecated or obsolete code.\n     *\n     * Clients are allowed to rendered diagnostics with this tag strike through.\n     */\n    DiagnosticTag.Deprecated = 2;\n})(DiagnosticTag || (DiagnosticTag = {}));\n/**\n * The CodeDescription namespace provides functions to deal with descriptions for diagnostic codes.\n *\n * @since 3.16.0\n */\nexport var CodeDescription;\n(function (CodeDescription) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.href);\n    }\n    CodeDescription.is = is;\n})(CodeDescription || (CodeDescription = {}));\n/**\n * The Diagnostic namespace provides helper functions to work with\n * {@link Diagnostic} literals.\n */\nexport var Diagnostic;\n(function (Diagnostic) {\n    /**\n     * Creates a new Diagnostic literal.\n     */\n    function create(range, message, severity, code, source, relatedInformation) {\n        const result = { range, message };\n        if (Is.defined(severity)) {\n            result.severity = severity;\n        }\n        if (Is.defined(code)) {\n            result.code = code;\n        }\n        if (Is.defined(source)) {\n            result.source = source;\n        }\n        if (Is.defined(relatedInformation)) {\n            result.relatedInformation = relatedInformation;\n        }\n        return result;\n    }\n    Diagnostic.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Diagnostic} interface.\n     */\n    function is(value) {\n        var _a;\n        const candidate = value;\n        return Is.defined(candidate)\n            && Range.is(candidate.range)\n            && Is.string(candidate.message)\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n            && (Is.integer(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n            && (Is.undefined(candidate.codeDescription) || (Is.string((_a = candidate.codeDescription) === null || _a === void 0 ? void 0 : _a.href)))\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\n    }\n    Diagnostic.is = is;\n})(Diagnostic || (Diagnostic = {}));\n/**\n * The Command namespace provides helper functions to work with\n * {@link Command} literals.\n */\nexport var Command;\n(function (Command) {\n    /**\n     * Creates a new Command literal.\n     */\n    function create(title, command, ...args) {\n        const result = { title, command };\n        if (Is.defined(args) && args.length > 0) {\n            result.arguments = args;\n        }\n        return result;\n    }\n    Command.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Command} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.title) && (candidate.tooltip === undefined || Is.string(candidate.tooltip)) && Is.string(candidate.command);\n    }\n    Command.is = is;\n})(Command || (Command = {}));\n/**\n * The TextEdit namespace provides helper function to create replace,\n * insert and delete edits more easily.\n */\nexport var TextEdit;\n(function (TextEdit) {\n    /**\n     * Creates a replace text edit.\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     */\n    function replace(range, newText) {\n        return { range, newText };\n    }\n    TextEdit.replace = replace;\n    /**\n     * Creates an insert text edit.\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     */\n    function insert(position, newText) {\n        return { range: { start: position, end: position }, newText };\n    }\n    TextEdit.insert = insert;\n    /**\n     * Creates a delete text edit.\n     * @param range The range of text to be deleted.\n     */\n    function del(range) {\n        return { range, newText: '' };\n    }\n    TextEdit.del = del;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && Is.string(candidate.newText)\n            && Range.is(candidate.range);\n    }\n    TextEdit.is = is;\n})(TextEdit || (TextEdit = {}));\nexport var ChangeAnnotation;\n(function (ChangeAnnotation) {\n    function create(label, needsConfirmation, description) {\n        const result = { label };\n        if (needsConfirmation !== undefined) {\n            result.needsConfirmation = needsConfirmation;\n        }\n        if (description !== undefined) {\n            result.description = description;\n        }\n        return result;\n    }\n    ChangeAnnotation.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.label) &&\n            (Is.boolean(candidate.needsConfirmation) || candidate.needsConfirmation === undefined) &&\n            (Is.string(candidate.description) || candidate.description === undefined);\n    }\n    ChangeAnnotation.is = is;\n})(ChangeAnnotation || (ChangeAnnotation = {}));\nexport var ChangeAnnotationIdentifier;\n(function (ChangeAnnotationIdentifier) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate);\n    }\n    ChangeAnnotationIdentifier.is = is;\n})(ChangeAnnotationIdentifier || (ChangeAnnotationIdentifier = {}));\nexport var AnnotatedTextEdit;\n(function (AnnotatedTextEdit) {\n    /**\n     * Creates an annotated replace text edit.\n     *\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     * @param annotation The annotation.\n     */\n    function replace(range, newText, annotation) {\n        return { range, newText, annotationId: annotation };\n    }\n    AnnotatedTextEdit.replace = replace;\n    /**\n     * Creates an annotated insert text edit.\n     *\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     * @param annotation The annotation.\n     */\n    function insert(position, newText, annotation) {\n        return { range: { start: position, end: position }, newText, annotationId: annotation };\n    }\n    AnnotatedTextEdit.insert = insert;\n    /**\n     * Creates an annotated delete text edit.\n     *\n     * @param range The range of text to be deleted.\n     * @param annotation The annotation.\n     */\n    function del(range, annotation) {\n        return { range, newText: '', annotationId: annotation };\n    }\n    AnnotatedTextEdit.del = del;\n    function is(value) {\n        const candidate = value;\n        return TextEdit.is(candidate) && (ChangeAnnotation.is(candidate.annotationId) || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    AnnotatedTextEdit.is = is;\n})(AnnotatedTextEdit || (AnnotatedTextEdit = {}));\n/**\n * The TextDocumentEdit namespace provides helper function to create\n * an edit that manipulates a text document.\n */\nexport var TextDocumentEdit;\n(function (TextDocumentEdit) {\n    /**\n     * Creates a new `TextDocumentEdit`\n     */\n    function create(textDocument, edits) {\n        return { textDocument, edits };\n    }\n    TextDocumentEdit.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate)\n            && OptionalVersionedTextDocumentIdentifier.is(candidate.textDocument)\n            && Array.isArray(candidate.edits);\n    }\n    TextDocumentEdit.is = is;\n})(TextDocumentEdit || (TextDocumentEdit = {}));\nexport var CreateFile;\n(function (CreateFile) {\n    function create(uri, options, annotation) {\n        const result = {\n            kind: 'create',\n            uri\n        };\n        if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    CreateFile.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) && (candidate.options === undefined ||\n            ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    CreateFile.is = is;\n})(CreateFile || (CreateFile = {}));\nexport var RenameFile;\n(function (RenameFile) {\n    function create(oldUri, newUri, options, annotation) {\n        const result = {\n            kind: 'rename',\n            oldUri,\n            newUri\n        };\n        if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    RenameFile.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) && (candidate.options === undefined ||\n            ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    RenameFile.is = is;\n})(RenameFile || (RenameFile = {}));\nexport var DeleteFile;\n(function (DeleteFile) {\n    function create(uri, options, annotation) {\n        const result = {\n            kind: 'delete',\n            uri\n        };\n        if (options !== undefined && (options.recursive !== undefined || options.ignoreIfNotExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    DeleteFile.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) && (candidate.options === undefined ||\n            ((candidate.options.recursive === undefined || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === undefined || Is.boolean(candidate.options.ignoreIfNotExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    DeleteFile.is = is;\n})(DeleteFile || (DeleteFile = {}));\nexport var WorkspaceEdit;\n(function (WorkspaceEdit) {\n    function is(value) {\n        const candidate = value;\n        return candidate &&\n            (candidate.changes !== undefined || candidate.documentChanges !== undefined) &&\n            (candidate.documentChanges === undefined || candidate.documentChanges.every((change) => {\n                if (Is.string(change.kind)) {\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\n                }\n                else {\n                    return TextDocumentEdit.is(change);\n                }\n            }));\n    }\n    WorkspaceEdit.is = is;\n})(WorkspaceEdit || (WorkspaceEdit = {}));\nclass TextEditChangeImpl {\n    constructor(edits, changeAnnotations) {\n        this.edits = edits;\n        this.changeAnnotations = changeAnnotations;\n    }\n    insert(position, newText, annotation) {\n        let edit;\n        let id;\n        if (annotation === undefined) {\n            edit = TextEdit.insert(position, newText);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.insert(position, newText, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.insert(position, newText, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    replace(range, newText, annotation) {\n        let edit;\n        let id;\n        if (annotation === undefined) {\n            edit = TextEdit.replace(range, newText);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.replace(range, newText, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.replace(range, newText, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    delete(range, annotation) {\n        let edit;\n        let id;\n        if (annotation === undefined) {\n            edit = TextEdit.del(range);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.del(range, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.del(range, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    add(edit) {\n        this.edits.push(edit);\n    }\n    all() {\n        return this.edits;\n    }\n    clear() {\n        this.edits.splice(0, this.edits.length);\n    }\n    assertChangeAnnotations(value) {\n        if (value === undefined) {\n            throw new Error(`Text edit change is not configured to manage change annotations.`);\n        }\n    }\n}\nexport var SnippetTextEdit;\n(function (SnippetTextEdit) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && Range.is(candidate.range)\n            && StringValue.isSnippet(candidate.snippet)\n            && (candidate.annotationId === undefined ||\n                (ChangeAnnotation.is(candidate.annotationId) || ChangeAnnotationIdentifier.is(candidate.annotationId)));\n    }\n    SnippetTextEdit.is = is;\n})(SnippetTextEdit || (SnippetTextEdit = {}));\n/**\n * A helper class\n */\nclass ChangeAnnotations {\n    constructor(annotations) {\n        this._annotations = annotations === undefined ? Object.create(null) : annotations;\n        this._counter = 0;\n        this._size = 0;\n    }\n    all() {\n        return this._annotations;\n    }\n    get size() {\n        return this._size;\n    }\n    manage(idOrAnnotation, annotation) {\n        let id;\n        if (ChangeAnnotationIdentifier.is(idOrAnnotation)) {\n            id = idOrAnnotation;\n        }\n        else {\n            id = this.nextId();\n            annotation = idOrAnnotation;\n        }\n        if (this._annotations[id] !== undefined) {\n            throw new Error(`Id ${id} is already in use.`);\n        }\n        if (annotation === undefined) {\n            throw new Error(`No annotation provided for id ${id}`);\n        }\n        this._annotations[id] = annotation;\n        this._size++;\n        return id;\n    }\n    nextId() {\n        this._counter++;\n        return this._counter.toString();\n    }\n}\n/**\n * A workspace change helps constructing changes to a workspace.\n */\nexport class WorkspaceChange {\n    constructor(workspaceEdit) {\n        this._textEditChanges = Object.create(null);\n        if (workspaceEdit !== undefined) {\n            this._workspaceEdit = workspaceEdit;\n            if (workspaceEdit.documentChanges) {\n                this._changeAnnotations = new ChangeAnnotations(workspaceEdit.changeAnnotations);\n                workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                workspaceEdit.documentChanges.forEach((change) => {\n                    if (TextDocumentEdit.is(change)) {\n                        const textEditChange = new TextEditChangeImpl(change.edits, this._changeAnnotations);\n                        this._textEditChanges[change.textDocument.uri] = textEditChange;\n                    }\n                });\n            }\n            else if (workspaceEdit.changes) {\n                Object.keys(workspaceEdit.changes).forEach((key) => {\n                    const textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                    this._textEditChanges[key] = textEditChange;\n                });\n            }\n        }\n        else {\n            this._workspaceEdit = {};\n        }\n    }\n    /**\n     * Returns the underlying {@link WorkspaceEdit} literal\n     * use to be returned from a workspace edit operation like rename.\n     */\n    get edit() {\n        this.initDocumentChanges();\n        if (this._changeAnnotations !== undefined) {\n            if (this._changeAnnotations.size === 0) {\n                this._workspaceEdit.changeAnnotations = undefined;\n            }\n            else {\n                this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n            }\n        }\n        return this._workspaceEdit;\n    }\n    getTextEditChange(key) {\n        if (OptionalVersionedTextDocumentIdentifier.is(key)) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            const textDocument = { uri: key.uri, version: key.version };\n            let result = this._textEditChanges[textDocument.uri];\n            if (!result) {\n                const edits = [];\n                const textDocumentEdit = {\n                    textDocument,\n                    edits\n                };\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                result = new TextEditChangeImpl(edits, this._changeAnnotations);\n                this._textEditChanges[textDocument.uri] = result;\n            }\n            return result;\n        }\n        else {\n            this.initChanges();\n            if (this._workspaceEdit.changes === undefined) {\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\n            }\n            let result = this._textEditChanges[key];\n            if (!result) {\n                const edits = [];\n                this._workspaceEdit.changes[key] = edits;\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[key] = result;\n            }\n            return result;\n        }\n    }\n    initDocumentChanges() {\n        if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n            this._changeAnnotations = new ChangeAnnotations();\n            this._workspaceEdit.documentChanges = [];\n            this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n        }\n    }\n    initChanges() {\n        if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n            this._workspaceEdit.changes = Object.create(null);\n        }\n    }\n    createFile(uri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        let annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        let operation;\n        let id;\n        if (annotation === undefined) {\n            operation = CreateFile.create(uri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = CreateFile.create(uri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    renameFile(oldUri, newUri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        let annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        let operation;\n        let id;\n        if (annotation === undefined) {\n            operation = RenameFile.create(oldUri, newUri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = RenameFile.create(oldUri, newUri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    deleteFile(uri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        let annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        let operation;\n        let id;\n        if (annotation === undefined) {\n            operation = DeleteFile.create(uri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = DeleteFile.create(uri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n}\n/**\n * The TextDocumentIdentifier namespace provides helper functions to work with\n * {@link TextDocumentIdentifier} literals.\n */\nexport var TextDocumentIdentifier;\n(function (TextDocumentIdentifier) {\n    /**\n     * Creates a new TextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     */\n    function create(uri) {\n        return { uri };\n    }\n    TextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link TextDocumentIdentifier} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri);\n    }\n    TextDocumentIdentifier.is = is;\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\n/**\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n * {@link VersionedTextDocumentIdentifier} literals.\n */\nexport var VersionedTextDocumentIdentifier;\n(function (VersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new VersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param version The document's version.\n     */\n    function create(uri, version) {\n        return { uri, version };\n    }\n    VersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link VersionedTextDocumentIdentifier} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.integer(candidate.version);\n    }\n    VersionedTextDocumentIdentifier.is = is;\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\n/**\n * The OptionalVersionedTextDocumentIdentifier namespace provides helper functions to work with\n * {@link OptionalVersionedTextDocumentIdentifier} literals.\n */\nexport var OptionalVersionedTextDocumentIdentifier;\n(function (OptionalVersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new OptionalVersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param version The document's version.\n     */\n    function create(uri, version) {\n        return { uri, version };\n    }\n    OptionalVersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link OptionalVersionedTextDocumentIdentifier} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.integer(candidate.version));\n    }\n    OptionalVersionedTextDocumentIdentifier.is = is;\n})(OptionalVersionedTextDocumentIdentifier || (OptionalVersionedTextDocumentIdentifier = {}));\n/**\n * Predefined Language kinds\n * @since 3.18.0\n */\nexport var LanguageKind;\n(function (LanguageKind) {\n    LanguageKind.ABAP = 'abap';\n    LanguageKind.WindowsBat = 'bat';\n    LanguageKind.BibTeX = 'bibtex';\n    LanguageKind.Clojure = 'clojure';\n    LanguageKind.Coffeescript = 'coffeescript';\n    LanguageKind.C = 'c';\n    LanguageKind.CPP = 'cpp';\n    LanguageKind.CSharp = 'csharp';\n    LanguageKind.CSS = 'css';\n    /**\n     * @since 3.18.0\n     * @proposed\n     */\n    LanguageKind.D = 'd';\n    /**\n     * @since 3.18.0\n     * @proposed\n     */\n    LanguageKind.Delphi = 'pascal';\n    LanguageKind.Diff = 'diff';\n    LanguageKind.Dart = 'dart';\n    LanguageKind.Dockerfile = 'dockerfile';\n    LanguageKind.Elixir = 'elixir';\n    LanguageKind.Erlang = 'erlang';\n    LanguageKind.FSharp = 'fsharp';\n    LanguageKind.GitCommit = 'git-commit';\n    LanguageKind.GitRebase = 'rebase';\n    LanguageKind.Go = 'go';\n    LanguageKind.Groovy = 'groovy';\n    LanguageKind.Handlebars = 'handlebars';\n    LanguageKind.Haskell = 'haskell';\n    LanguageKind.HTML = 'html';\n    LanguageKind.Ini = 'ini';\n    LanguageKind.Java = 'java';\n    LanguageKind.JavaScript = 'javascript';\n    LanguageKind.JavaScriptReact = 'javascriptreact';\n    LanguageKind.JSON = 'json';\n    LanguageKind.LaTeX = 'latex';\n    LanguageKind.Less = 'less';\n    LanguageKind.Lua = 'lua';\n    LanguageKind.Makefile = 'makefile';\n    LanguageKind.Markdown = 'markdown';\n    LanguageKind.ObjectiveC = 'objective-c';\n    LanguageKind.ObjectiveCPP = 'objective-cpp';\n    /**\n     * @since 3.18.0\n     * @proposed\n     */\n    LanguageKind.Pascal = 'pascal';\n    LanguageKind.Perl = 'perl';\n    LanguageKind.Perl6 = 'perl6';\n    LanguageKind.PHP = 'php';\n    LanguageKind.Powershell = 'powershell';\n    LanguageKind.Pug = 'jade';\n    LanguageKind.Python = 'python';\n    LanguageKind.R = 'r';\n    LanguageKind.Razor = 'razor';\n    LanguageKind.Ruby = 'ruby';\n    LanguageKind.Rust = 'rust';\n    LanguageKind.SCSS = 'scss';\n    LanguageKind.SASS = 'sass';\n    LanguageKind.Scala = 'scala';\n    LanguageKind.ShaderLab = 'shaderlab';\n    LanguageKind.ShellScript = 'shellscript';\n    LanguageKind.SQL = 'sql';\n    LanguageKind.Swift = 'swift';\n    LanguageKind.TypeScript = 'typescript';\n    LanguageKind.TypeScriptReact = 'typescriptreact';\n    LanguageKind.TeX = 'tex';\n    LanguageKind.VisualBasic = 'vb';\n    LanguageKind.XML = 'xml';\n    LanguageKind.XSL = 'xsl';\n    LanguageKind.YAML = 'yaml';\n})(LanguageKind || (LanguageKind = {}));\n/**\n * The TextDocumentItem namespace provides helper functions to work with\n * {@link TextDocumentItem} literals.\n */\nexport var TextDocumentItem;\n(function (TextDocumentItem) {\n    /**\n     * Creates a new TextDocumentItem literal.\n     * @param uri The document's uri.\n     * @param languageId The document's language identifier.\n     * @param version The document's version number.\n     * @param text The document's text.\n     */\n    function create(uri, languageId, version, text) {\n        return { uri, languageId, version, text };\n    }\n    TextDocumentItem.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link TextDocumentItem} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.integer(candidate.version) && Is.string(candidate.text);\n    }\n    TextDocumentItem.is = is;\n})(TextDocumentItem || (TextDocumentItem = {}));\n/**\n * Describes the content type that a client supports in various\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n *\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\n * are reserved for internal usage.\n */\nexport var MarkupKind;\n(function (MarkupKind) {\n    /**\n     * Plain text is supported as a content format\n     */\n    MarkupKind.PlainText = 'plaintext';\n    /**\n     * Markdown is supported as a content format\n     */\n    MarkupKind.Markdown = 'markdown';\n    /**\n     * Checks whether the given value is a value of the {@link MarkupKind} type.\n     */\n    function is(value) {\n        const candidate = value;\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\n    }\n    MarkupKind.is = is;\n})(MarkupKind || (MarkupKind = {}));\nexport var MarkupContent;\n(function (MarkupContent) {\n    /**\n     * Checks whether the given value conforms to the {@link MarkupContent} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\n    }\n    MarkupContent.is = is;\n})(MarkupContent || (MarkupContent = {}));\n/**\n * The kind of a completion entry.\n */\nexport var CompletionItemKind;\n(function (CompletionItemKind) {\n    CompletionItemKind.Text = 1;\n    CompletionItemKind.Method = 2;\n    CompletionItemKind.Function = 3;\n    CompletionItemKind.Constructor = 4;\n    CompletionItemKind.Field = 5;\n    CompletionItemKind.Variable = 6;\n    CompletionItemKind.Class = 7;\n    CompletionItemKind.Interface = 8;\n    CompletionItemKind.Module = 9;\n    CompletionItemKind.Property = 10;\n    CompletionItemKind.Unit = 11;\n    CompletionItemKind.Value = 12;\n    CompletionItemKind.Enum = 13;\n    CompletionItemKind.Keyword = 14;\n    CompletionItemKind.Snippet = 15;\n    CompletionItemKind.Color = 16;\n    CompletionItemKind.File = 17;\n    CompletionItemKind.Reference = 18;\n    CompletionItemKind.Folder = 19;\n    CompletionItemKind.EnumMember = 20;\n    CompletionItemKind.Constant = 21;\n    CompletionItemKind.Struct = 22;\n    CompletionItemKind.Event = 23;\n    CompletionItemKind.Operator = 24;\n    CompletionItemKind.TypeParameter = 25;\n})(CompletionItemKind || (CompletionItemKind = {}));\n/**\n * Defines whether the insert text in a completion item should be interpreted as\n * plain text or a snippet.\n */\nexport var InsertTextFormat;\n(function (InsertTextFormat) {\n    /**\n     * The primary text to be inserted is treated as a plain string.\n     */\n    InsertTextFormat.PlainText = 1;\n    /**\n     * The primary text to be inserted is treated as a snippet.\n     *\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n     * the end of the snippet. Placeholders with equal identifiers are linked,\n     * that is typing in one will update others too.\n     *\n     * See also: https://microsoft.github.io/language-server-protocol/specifications/specification-current/#snippet_syntax\n     */\n    InsertTextFormat.Snippet = 2;\n})(InsertTextFormat || (InsertTextFormat = {}));\n/**\n * Completion item tags are extra annotations that tweak the rendering of a completion\n * item.\n *\n * @since 3.15.0\n */\nexport var CompletionItemTag;\n(function (CompletionItemTag) {\n    /**\n     * Render a completion as obsolete, usually using a strike-out.\n     */\n    CompletionItemTag.Deprecated = 1;\n})(CompletionItemTag || (CompletionItemTag = {}));\n/**\n * The InsertReplaceEdit namespace provides functions to deal with insert / replace edits.\n *\n * @since 3.16.0\n */\nexport var InsertReplaceEdit;\n(function (InsertReplaceEdit) {\n    /**\n     * Creates a new insert / replace edit\n     */\n    function create(newText, insert, replace) {\n        return { newText, insert, replace };\n    }\n    InsertReplaceEdit.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link InsertReplaceEdit} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.newText) && Range.is(candidate.insert) && Range.is(candidate.replace);\n    }\n    InsertReplaceEdit.is = is;\n})(InsertReplaceEdit || (InsertReplaceEdit = {}));\n/**\n * How whitespace and indentation is handled during completion\n * item insertion.\n *\n * @since 3.16.0\n */\nexport var InsertTextMode;\n(function (InsertTextMode) {\n    /**\n     * The insertion or replace strings is taken as it is. If the\n     * value is multi line the lines below the cursor will be\n     * inserted using the indentation defined in the string value.\n     * The client will not apply any kind of adjustments to the\n     * string.\n     */\n    InsertTextMode.asIs = 1;\n    /**\n     * The editor adjusts leading whitespace of new lines so that\n     * they match the indentation up to the cursor of the line for\n     * which the item is accepted.\n     *\n     * Consider a line like this: <2tabs><cursor><3tabs>foo. Accepting a\n     * multi line completion item is indented using 2 tabs and all\n     * following lines inserted will be indented using 2 tabs as well.\n     */\n    InsertTextMode.adjustIndentation = 2;\n})(InsertTextMode || (InsertTextMode = {}));\n/**\n * Defines how values from a set of defaults and an individual item will be\n * merged.\n *\n * @since 3.18.0\n */\nexport var ApplyKind;\n(function (ApplyKind) {\n    /**\n     * The value from the individual item (if provided and not `null`) will be\n     * used instead of the default.\n     */\n    ApplyKind.Replace = 1;\n    /**\n     * The value from the item will be merged with the default.\n     *\n     * The specific rules for mergeing values are defined against each field\n     * that supports merging.\n     */\n    ApplyKind.Merge = 2;\n})(ApplyKind || (ApplyKind = {}));\nexport var CompletionItemLabelDetails;\n(function (CompletionItemLabelDetails) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (Is.string(candidate.detail) || candidate.detail === undefined) &&\n            (Is.string(candidate.description) || candidate.description === undefined);\n    }\n    CompletionItemLabelDetails.is = is;\n})(CompletionItemLabelDetails || (CompletionItemLabelDetails = {}));\n/**\n * The CompletionItem namespace provides functions to deal with\n * completion items.\n */\nexport var CompletionItem;\n(function (CompletionItem) {\n    /**\n     * Create a completion item and seed it with a label.\n     * @param label The completion item's label\n     */\n    function create(label) {\n        return { label };\n    }\n    CompletionItem.create = create;\n})(CompletionItem || (CompletionItem = {}));\n/**\n * The CompletionList namespace provides functions to deal with\n * completion lists.\n */\nexport var CompletionList;\n(function (CompletionList) {\n    /**\n     * Creates a new completion list.\n     *\n     * @param items The completion items.\n     * @param isIncomplete The list is not complete.\n     */\n    function create(items, isIncomplete) {\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\n    }\n    CompletionList.create = create;\n})(CompletionList || (CompletionList = {}));\nexport var MarkedString;\n(function (MarkedString) {\n    /**\n     * Creates a marked string from plain text.\n     *\n     * @param plainText The plain text.\n     */\n    function fromPlainText(plainText) {\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    MarkedString.fromPlainText = fromPlainText;\n    /**\n     * Checks whether the given value conforms to the {@link MarkedString} type.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\n    }\n    MarkedString.is = is;\n})(MarkedString || (MarkedString = {}));\nexport var Hover;\n(function (Hover) {\n    /**\n     * Checks whether the given value conforms to the {@link Hover} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\n            MarkedString.is(candidate.contents) ||\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === undefined || Range.is(value.range));\n    }\n    Hover.is = is;\n})(Hover || (Hover = {}));\n/**\n * The ParameterInformation namespace provides helper functions to work with\n * {@link ParameterInformation} literals.\n */\nexport var ParameterInformation;\n(function (ParameterInformation) {\n    /**\n     * Creates a new parameter information literal.\n     *\n     * @param label A label string.\n     * @param documentation A doc string.\n     */\n    function create(label, documentation) {\n        return documentation ? { label, documentation } : { label };\n    }\n    ParameterInformation.create = create;\n})(ParameterInformation || (ParameterInformation = {}));\n/**\n * The SignatureInformation namespace provides helper functions to work with\n * {@link SignatureInformation} literals.\n */\nexport var SignatureInformation;\n(function (SignatureInformation) {\n    function create(label, documentation, ...parameters) {\n        const result = { label };\n        if (Is.defined(documentation)) {\n            result.documentation = documentation;\n        }\n        if (Is.defined(parameters)) {\n            result.parameters = parameters;\n        }\n        else {\n            result.parameters = [];\n        }\n        return result;\n    }\n    SignatureInformation.create = create;\n})(SignatureInformation || (SignatureInformation = {}));\n/**\n * A document highlight kind.\n */\nexport var DocumentHighlightKind;\n(function (DocumentHighlightKind) {\n    /**\n     * A textual occurrence.\n     */\n    DocumentHighlightKind.Text = 1;\n    /**\n     * Read-access of a symbol, like reading a variable.\n     */\n    DocumentHighlightKind.Read = 2;\n    /**\n     * Write-access of a symbol, like writing to a variable.\n     */\n    DocumentHighlightKind.Write = 3;\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\n/**\n * DocumentHighlight namespace to provide helper functions to work with\n * {@link DocumentHighlight} literals.\n */\nexport var DocumentHighlight;\n(function (DocumentHighlight) {\n    /**\n     * Create a DocumentHighlight object.\n     * @param range The range the highlight applies to.\n     * @param kind The highlight kind\n     */\n    function create(range, kind) {\n        const result = { range };\n        if (Is.number(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    DocumentHighlight.create = create;\n})(DocumentHighlight || (DocumentHighlight = {}));\n/**\n * A symbol kind.\n */\nexport var SymbolKind;\n(function (SymbolKind) {\n    SymbolKind.File = 1;\n    SymbolKind.Module = 2;\n    SymbolKind.Namespace = 3;\n    SymbolKind.Package = 4;\n    SymbolKind.Class = 5;\n    SymbolKind.Method = 6;\n    SymbolKind.Property = 7;\n    SymbolKind.Field = 8;\n    SymbolKind.Constructor = 9;\n    SymbolKind.Enum = 10;\n    SymbolKind.Interface = 11;\n    SymbolKind.Function = 12;\n    SymbolKind.Variable = 13;\n    SymbolKind.Constant = 14;\n    SymbolKind.String = 15;\n    SymbolKind.Number = 16;\n    SymbolKind.Boolean = 17;\n    SymbolKind.Array = 18;\n    SymbolKind.Object = 19;\n    SymbolKind.Key = 20;\n    SymbolKind.Null = 21;\n    SymbolKind.EnumMember = 22;\n    SymbolKind.Struct = 23;\n    SymbolKind.Event = 24;\n    SymbolKind.Operator = 25;\n    SymbolKind.TypeParameter = 26;\n})(SymbolKind || (SymbolKind = {}));\n/**\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\n *\n * @since 3.16\n */\nexport var SymbolTag;\n(function (SymbolTag) {\n    /**\n     * Render a symbol as obsolete, usually using a strike-out.\n     */\n    SymbolTag.Deprecated = 1;\n})(SymbolTag || (SymbolTag = {}));\nexport var SymbolInformation;\n(function (SymbolInformation) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the location of the symbol.\n     * @param uri The resource of the location of symbol.\n     * @param containerName The name of the symbol containing the symbol.\n     */\n    function create(name, kind, range, uri, containerName) {\n        const result = {\n            name,\n            kind,\n            location: { uri, range }\n        };\n        if (containerName) {\n            result.containerName = containerName;\n        }\n        return result;\n    }\n    SymbolInformation.create = create;\n})(SymbolInformation || (SymbolInformation = {}));\nexport var WorkspaceSymbol;\n(function (WorkspaceSymbol) {\n    /**\n     * Create a new workspace symbol.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param uri The resource of the location of the symbol.\n     * @param range An options range of the location.\n     * @returns A WorkspaceSymbol.\n     */\n    function create(name, kind, uri, range) {\n        return range !== undefined\n            ? { name, kind, location: { uri, range } }\n            : { name, kind, location: { uri } };\n    }\n    WorkspaceSymbol.create = create;\n})(WorkspaceSymbol || (WorkspaceSymbol = {}));\nexport var DocumentSymbol;\n(function (DocumentSymbol) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param detail The detail of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the symbol.\n     * @param selectionRange The selectionRange of the symbol.\n     * @param children Children of the symbol.\n     */\n    function create(name, detail, kind, range, selectionRange, children) {\n        const result = {\n            name,\n            detail,\n            kind,\n            range,\n            selectionRange\n        };\n        if (children !== undefined) {\n            result.children = children;\n        }\n        return result;\n    }\n    DocumentSymbol.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link DocumentSymbol} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return candidate &&\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\n            (candidate.detail === undefined || Is.string(candidate.detail)) &&\n            (candidate.deprecated === undefined || Is.boolean(candidate.deprecated)) &&\n            (candidate.children === undefined || Array.isArray(candidate.children)) &&\n            (candidate.tags === undefined || Array.isArray(candidate.tags));\n    }\n    DocumentSymbol.is = is;\n})(DocumentSymbol || (DocumentSymbol = {}));\n/**\n * A set of predefined code action kinds\n */\nexport var CodeActionKind;\n(function (CodeActionKind) {\n    /**\n     * Empty kind.\n     */\n    CodeActionKind.Empty = '';\n    /**\n     * Base kind for quickfix actions: 'quickfix'\n     */\n    CodeActionKind.QuickFix = 'quickfix';\n    /**\n     * Base kind for refactoring actions: 'refactor'\n     */\n    CodeActionKind.Refactor = 'refactor';\n    /**\n     * Base kind for refactoring extraction actions: 'refactor.extract'\n     *\n     * Example extract actions:\n     *\n     * - Extract method\n     * - Extract function\n     * - Extract variable\n     * - Extract interface from class\n     * - ...\n     */\n    CodeActionKind.RefactorExtract = 'refactor.extract';\n    /**\n     * Base kind for refactoring inline actions: 'refactor.inline'\n     *\n     * Example inline actions:\n     *\n     * - Inline function\n     * - Inline variable\n     * - Inline constant\n     * - ...\n     */\n    CodeActionKind.RefactorInline = 'refactor.inline';\n    /**\n     * Base kind for refactoring move actions: `refactor.move`\n     *\n     * Example move actions:\n     *\n     * - Move a function to a new file\n     * - Move a property between classes\n     * - Move method to base class\n     * - ...\n     *\n     * @since 3.18.0\n     * @proposed\n     */\n    CodeActionKind.RefactorMove = 'refactor.move';\n    /**\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\n     *\n     * Example rewrite actions:\n     *\n     * - Convert JavaScript function to class\n     * - Add or remove parameter\n     * - Encapsulate field\n     * - Make method static\n     * - Move method to base class\n     * - ...\n     */\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\n    /**\n     * Base kind for source actions: `source`\n     *\n     * Source code actions apply to the entire file.\n     */\n    CodeActionKind.Source = 'source';\n    /**\n     * Base kind for an organize imports source action: `source.organizeImports`\n     */\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\n    /**\n     * Base kind for auto-fix source actions: `source.fixAll`.\n     *\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\n     *\n     * @since 3.15.0\n     */\n    CodeActionKind.SourceFixAll = 'source.fixAll';\n    /**\n     * Base kind for all code actions applying to the entire notebook's scope. CodeActionKinds using\n     * this should always begin with `notebook.`\n     *\n     * @since 3.18.0\n     */\n    CodeActionKind.Notebook = 'notebook';\n})(CodeActionKind || (CodeActionKind = {}));\n/**\n * The reason why code actions were requested.\n *\n * @since 3.17.0\n */\nexport var CodeActionTriggerKind;\n(function (CodeActionTriggerKind) {\n    /**\n     * Code actions were explicitly requested by the user or by an extension.\n     */\n    CodeActionTriggerKind.Invoked = 1;\n    /**\n     * Code actions were requested automatically.\n     *\n     * This typically happens when current selection in a file changes, but can\n     * also be triggered when file content changes.\n     */\n    CodeActionTriggerKind.Automatic = 2;\n})(CodeActionTriggerKind || (CodeActionTriggerKind = {}));\n/**\n * The CodeActionContext namespace provides helper functions to work with\n * {@link CodeActionContext} literals.\n */\nexport var CodeActionContext;\n(function (CodeActionContext) {\n    /**\n     * Creates a new CodeActionContext literal.\n     */\n    function create(diagnostics, only, triggerKind) {\n        const result = { diagnostics };\n        if (only !== undefined && only !== null) {\n            result.only = only;\n        }\n        if (triggerKind !== undefined && triggerKind !== null) {\n            result.triggerKind = triggerKind;\n        }\n        return result;\n    }\n    CodeActionContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link CodeActionContext} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is)\n            && (candidate.only === undefined || Is.typedArray(candidate.only, Is.string))\n            && (candidate.triggerKind === undefined || candidate.triggerKind === CodeActionTriggerKind.Invoked || candidate.triggerKind === CodeActionTriggerKind.Automatic);\n    }\n    CodeActionContext.is = is;\n})(CodeActionContext || (CodeActionContext = {}));\n/**\n * Code action tags are extra annotations that tweak the behavior of a code action.\n *\n * @since 3.18.0 - proposed\n */\nexport var CodeActionTag;\n(function (CodeActionTag) {\n    /**\n     * Marks the code action as LLM-generated.\n     */\n    CodeActionTag.LLMGenerated = 1;\n    /**\n     * Checks whether the given literal conforms to the {@link CodeActionTag} interface.\n     */\n    function is(value) {\n        return Is.defined(value) && value === CodeActionTag.LLMGenerated;\n    }\n    CodeActionTag.is = is;\n})(CodeActionTag || (CodeActionTag = {}));\nexport var CodeAction;\n(function (CodeAction) {\n    function create(title, kindOrCommandOrEdit, kind) {\n        const result = { title };\n        let checkKind = true;\n        if (typeof kindOrCommandOrEdit === 'string') {\n            checkKind = false;\n            result.kind = kindOrCommandOrEdit;\n        }\n        else if (Command.is(kindOrCommandOrEdit)) {\n            result.command = kindOrCommandOrEdit;\n        }\n        else {\n            result.edit = kindOrCommandOrEdit;\n        }\n        if (checkKind && kind !== undefined) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    CodeAction.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.title) &&\n            (candidate.diagnostics === undefined || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\n            (candidate.kind === undefined || Is.string(candidate.kind)) &&\n            (candidate.edit !== undefined || candidate.command !== undefined) &&\n            (candidate.command === undefined || Command.is(candidate.command)) &&\n            (candidate.isPreferred === undefined || Is.boolean(candidate.isPreferred)) &&\n            (candidate.edit === undefined || WorkspaceEdit.is(candidate.edit)) &&\n            (candidate.tags === undefined || Is.typedArray(candidate.tags, CodeActionTag.is));\n    }\n    CodeAction.is = is;\n})(CodeAction || (CodeAction = {}));\n/**\n * The CodeLens namespace provides helper functions to work with\n * {@link CodeLens} literals.\n */\nexport var CodeLens;\n(function (CodeLens) {\n    /**\n     * Creates a new CodeLens literal.\n     */\n    function create(range, data) {\n        const result = { range };\n        if (Is.defined(data)) {\n            result.data = data;\n        }\n        return result;\n    }\n    CodeLens.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link CodeLens} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n    }\n    CodeLens.is = is;\n})(CodeLens || (CodeLens = {}));\n/**\n * The FormattingOptions namespace provides helper functions to work with\n * {@link FormattingOptions} literals.\n */\nexport var FormattingOptions;\n(function (FormattingOptions) {\n    /**\n     * Creates a new FormattingOptions literal.\n     */\n    function create(tabSize, insertSpaces) {\n        return { tabSize, insertSpaces };\n    }\n    FormattingOptions.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link FormattingOptions} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.uinteger(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n    }\n    FormattingOptions.is = is;\n})(FormattingOptions || (FormattingOptions = {}));\n/**\n * The DocumentLink namespace provides helper functions to work with\n * {@link DocumentLink} literals.\n */\nexport var DocumentLink;\n(function (DocumentLink) {\n    /**\n     * Creates a new DocumentLink literal.\n     */\n    function create(range, target, data) {\n        return { range, target, data };\n    }\n    DocumentLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link DocumentLink} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n    }\n    DocumentLink.is = is;\n})(DocumentLink || (DocumentLink = {}));\n/**\n * The SelectionRange namespace provides helper function to work with\n * SelectionRange literals.\n */\nexport var SelectionRange;\n(function (SelectionRange) {\n    /**\n     * Creates a new SelectionRange\n     * @param range the range.\n     * @param parent an optional parent.\n     */\n    function create(range, parent) {\n        return { range, parent };\n    }\n    SelectionRange.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\n    }\n    SelectionRange.is = is;\n})(SelectionRange || (SelectionRange = {}));\n/**\n * A set of predefined token types. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0\n */\nexport var SemanticTokenTypes;\n(function (SemanticTokenTypes) {\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\n    /**\n     * Represents a generic type. Acts as a fallback for types which can't be mapped to\n     * a specific type like class or enum.\n     */\n    SemanticTokenTypes[\"type\"] = \"type\";\n    SemanticTokenTypes[\"class\"] = \"class\";\n    SemanticTokenTypes[\"enum\"] = \"enum\";\n    SemanticTokenTypes[\"interface\"] = \"interface\";\n    SemanticTokenTypes[\"struct\"] = \"struct\";\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\n    SemanticTokenTypes[\"variable\"] = \"variable\";\n    SemanticTokenTypes[\"property\"] = \"property\";\n    SemanticTokenTypes[\"enumMember\"] = \"enumMember\";\n    SemanticTokenTypes[\"event\"] = \"event\";\n    SemanticTokenTypes[\"function\"] = \"function\";\n    SemanticTokenTypes[\"method\"] = \"method\";\n    SemanticTokenTypes[\"macro\"] = \"macro\";\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\n    SemanticTokenTypes[\"modifier\"] = \"modifier\";\n    SemanticTokenTypes[\"comment\"] = \"comment\";\n    SemanticTokenTypes[\"string\"] = \"string\";\n    SemanticTokenTypes[\"number\"] = \"number\";\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\n    SemanticTokenTypes[\"operator\"] = \"operator\";\n    /**\n     * @since 3.17.0\n     */\n    SemanticTokenTypes[\"decorator\"] = \"decorator\";\n    /**\n     * @since 3.18.0\n     */\n    SemanticTokenTypes[\"label\"] = \"label\";\n})(SemanticTokenTypes || (SemanticTokenTypes = {}));\n/**\n * A set of predefined token modifiers. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0\n */\nexport var SemanticTokenModifiers;\n(function (SemanticTokenModifiers) {\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\n    SemanticTokenModifiers[\"static\"] = \"static\";\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\n    SemanticTokenModifiers[\"async\"] = \"async\";\n    SemanticTokenModifiers[\"modification\"] = \"modification\";\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\n    SemanticTokenModifiers[\"defaultLibrary\"] = \"defaultLibrary\";\n})(SemanticTokenModifiers || (SemanticTokenModifiers = {}));\n/**\n * @since 3.16.0\n */\nexport var SemanticTokens;\n(function (SemanticTokens) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\n    }\n    SemanticTokens.is = is;\n})(SemanticTokens || (SemanticTokens = {}));\n/**\n * The InlineValueText namespace provides functions to deal with InlineValueTexts.\n *\n * @since 3.17.0\n */\nexport var InlineValueText;\n(function (InlineValueText) {\n    /**\n     * Creates a new InlineValueText literal.\n     */\n    function create(range, text) {\n        return { range, text };\n    }\n    InlineValueText.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.string(candidate.text);\n    }\n    InlineValueText.is = is;\n})(InlineValueText || (InlineValueText = {}));\n/**\n * The InlineValueVariableLookup namespace provides functions to deal with InlineValueVariableLookups.\n *\n * @since 3.17.0\n */\nexport var InlineValueVariableLookup;\n(function (InlineValueVariableLookup) {\n    /**\n     * Creates a new InlineValueText literal.\n     */\n    function create(range, variableName, caseSensitiveLookup) {\n        return { range, variableName, caseSensitiveLookup };\n    }\n    InlineValueVariableLookup.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.boolean(candidate.caseSensitiveLookup)\n            && (Is.string(candidate.variableName) || candidate.variableName === undefined);\n    }\n    InlineValueVariableLookup.is = is;\n})(InlineValueVariableLookup || (InlineValueVariableLookup = {}));\n/**\n * The InlineValueEvaluatableExpression namespace provides functions to deal with InlineValueEvaluatableExpression.\n *\n * @since 3.17.0\n */\nexport var InlineValueEvaluatableExpression;\n(function (InlineValueEvaluatableExpression) {\n    /**\n     * Creates a new InlineValueEvaluatableExpression literal.\n     */\n    function create(range, expression) {\n        return { range, expression };\n    }\n    InlineValueEvaluatableExpression.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && Range.is(candidate.range)\n            && (Is.string(candidate.expression) || candidate.expression === undefined);\n    }\n    InlineValueEvaluatableExpression.is = is;\n})(InlineValueEvaluatableExpression || (InlineValueEvaluatableExpression = {}));\n/**\n * The InlineValueContext namespace provides helper functions to work with\n * {@link InlineValueContext} literals.\n *\n * @since 3.17.0\n */\nexport var InlineValueContext;\n(function (InlineValueContext) {\n    /**\n     * Creates a new InlineValueContext literal.\n     */\n    function create(frameId, stoppedLocation) {\n        return { frameId, stoppedLocation };\n    }\n    InlineValueContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link InlineValueContext} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Range.is(value.stoppedLocation);\n    }\n    InlineValueContext.is = is;\n})(InlineValueContext || (InlineValueContext = {}));\n/**\n * Inlay hint kinds.\n *\n * @since 3.17.0\n */\nexport var InlayHintKind;\n(function (InlayHintKind) {\n    /**\n     * An inlay hint that for a type annotation.\n     */\n    InlayHintKind.Type = 1;\n    /**\n     * An inlay hint that is for a parameter.\n     */\n    InlayHintKind.Parameter = 2;\n    function is(value) {\n        return value === 1 || value === 2;\n    }\n    InlayHintKind.is = is;\n})(InlayHintKind || (InlayHintKind = {}));\nexport var InlayHintLabelPart;\n(function (InlayHintLabelPart) {\n    function create(value) {\n        return { value };\n    }\n    InlayHintLabelPart.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n            && (candidate.location === undefined || Location.is(candidate.location))\n            && (candidate.command === undefined || Command.is(candidate.command));\n    }\n    InlayHintLabelPart.is = is;\n})(InlayHintLabelPart || (InlayHintLabelPart = {}));\nexport var InlayHint;\n(function (InlayHint) {\n    function create(position, label, kind) {\n        const result = { position, label };\n        if (kind !== undefined) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    InlayHint.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.position)\n            && (Is.string(candidate.label) || Is.typedArray(candidate.label, InlayHintLabelPart.is))\n            && (candidate.kind === undefined || InlayHintKind.is(candidate.kind))\n            && (candidate.textEdits === undefined) || Is.typedArray(candidate.textEdits, TextEdit.is)\n            && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n            && (candidate.paddingLeft === undefined || Is.boolean(candidate.paddingLeft))\n            && (candidate.paddingRight === undefined || Is.boolean(candidate.paddingRight));\n    }\n    InlayHint.is = is;\n})(InlayHint || (InlayHint = {}));\nexport var StringValue;\n(function (StringValue) {\n    function createSnippet(value) {\n        return { kind: 'snippet', value };\n    }\n    StringValue.createSnippet = createSnippet;\n    function isSnippet(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && candidate.kind === 'snippet'\n            && Is.string(candidate.value);\n    }\n    StringValue.isSnippet = isSnippet;\n})(StringValue || (StringValue = {}));\nexport var InlineCompletionItem;\n(function (InlineCompletionItem) {\n    function create(insertText, filterText, range, command) {\n        return { insertText, filterText, range, command };\n    }\n    InlineCompletionItem.create = create;\n})(InlineCompletionItem || (InlineCompletionItem = {}));\nexport var InlineCompletionList;\n(function (InlineCompletionList) {\n    function create(items) {\n        return { items };\n    }\n    InlineCompletionList.create = create;\n})(InlineCompletionList || (InlineCompletionList = {}));\n/**\n * Describes how an {@link InlineCompletionItemProvider inline completion provider} was triggered.\n *\n * @since 3.18.0\n * @proposed\n */\nexport var InlineCompletionTriggerKind;\n(function (InlineCompletionTriggerKind) {\n    /**\n     * Completion was triggered explicitly by a user gesture.\n     */\n    InlineCompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered automatically while editing.\n     */\n    InlineCompletionTriggerKind.Automatic = 2;\n})(InlineCompletionTriggerKind || (InlineCompletionTriggerKind = {}));\nexport var SelectedCompletionInfo;\n(function (SelectedCompletionInfo) {\n    function create(range, text) {\n        return { range, text };\n    }\n    SelectedCompletionInfo.create = create;\n})(SelectedCompletionInfo || (SelectedCompletionInfo = {}));\nexport var InlineCompletionContext;\n(function (InlineCompletionContext) {\n    function create(triggerKind, selectedCompletionInfo) {\n        return { triggerKind, selectedCompletionInfo };\n    }\n    InlineCompletionContext.create = create;\n})(InlineCompletionContext || (InlineCompletionContext = {}));\nexport var WorkspaceFolder;\n(function (WorkspaceFolder) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && URI.is(candidate.uri) && Is.string(candidate.name);\n    }\n    WorkspaceFolder.is = is;\n})(WorkspaceFolder || (WorkspaceFolder = {}));\nexport const EOL = ['\\n', '\\r\\n', '\\r'];\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new ITextDocument literal from the given uri and content.\n     * @param uri The document's uri.\n     * @param languageId The document's language Id.\n     * @param version The document's version.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link ITextDocument} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.uinteger(candidate.lineCount)\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n    }\n    TextDocument.is = is;\n    function applyEdits(document, edits) {\n        let text = document.getText();\n        const sortedEdits = mergeSort(edits, (a, b) => {\n            const diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        let lastModifiedOffset = text.length;\n        for (let i = sortedEdits.length - 1; i >= 0; i--) {\n            const e = sortedEdits[i];\n            const startOffset = document.offsetAt(e.range.start);\n            const endOffset = document.offsetAt(e.range.end);\n            if (endOffset <= lastModifiedOffset) {\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n            }\n            else {\n                throw new Error('Overlapping edit');\n            }\n            lastModifiedOffset = startOffset;\n        }\n        return text;\n    }\n    TextDocument.applyEdits = applyEdits;\n    function mergeSort(data, compare) {\n        if (data.length <= 1) {\n            // sorted\n            return data;\n        }\n        const p = (data.length / 2) | 0;\n        const left = data.slice(0, p);\n        const right = data.slice(p);\n        mergeSort(left, compare);\n        mergeSort(right, compare);\n        let leftIdx = 0;\n        let rightIdx = 0;\n        let i = 0;\n        while (leftIdx < left.length && rightIdx < right.length) {\n            const ret = compare(left[leftIdx], right[rightIdx]);\n            if (ret <= 0) {\n                // smaller_equal -> take left to preserve order\n                data[i++] = left[leftIdx++];\n            }\n            else {\n                // greater -> take right\n                data[i++] = right[rightIdx++];\n            }\n        }\n        while (leftIdx < left.length) {\n            data[i++] = left[leftIdx++];\n        }\n        while (rightIdx < right.length) {\n            data[i++] = right[rightIdx++];\n        }\n        return data;\n    }\n})(TextDocument || (TextDocument = {}));\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nclass FullTextDocument {\n    constructor(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    get uri() {\n        return this._uri;\n    }\n    get languageId() {\n        return this._languageId;\n    }\n    get version() {\n        return this._version;\n    }\n    getText(range) {\n        if (range) {\n            const start = this.offsetAt(range.start);\n            const end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    }\n    update(event, version) {\n        this._content = event.text;\n        this._version = version;\n        this._lineOffsets = undefined;\n    }\n    getLineOffsets() {\n        if (this._lineOffsets === undefined) {\n            const lineOffsets = [];\n            const text = this._content;\n            let isLineStart = true;\n            for (let i = 0; i < text.length; i++) {\n                if (isLineStart) {\n                    lineOffsets.push(i);\n                    isLineStart = false;\n                }\n                const ch = text.charAt(i);\n                isLineStart = (ch === '\\r' || ch === '\\n');\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                    i++;\n                }\n            }\n            if (isLineStart && text.length > 0) {\n                lineOffsets.push(text.length);\n            }\n            this._lineOffsets = lineOffsets;\n        }\n        return this._lineOffsets;\n    }\n    positionAt(offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        const lineOffsets = this.getLineOffsets();\n        let low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return Position.create(0, offset);\n        }\n        while (low < high) {\n            const mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        const line = low - 1;\n        return Position.create(line, offset - lineOffsets[line]);\n    }\n    offsetAt(position) {\n        const lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        const lineOffset = lineOffsets[position.line];\n        const nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    }\n    get lineCount() {\n        return this.getLineOffsets().length;\n    }\n}\nvar Is;\n(function (Is) {\n    const toString = Object.prototype.toString;\n    function defined(value) {\n        return typeof value !== 'undefined';\n    }\n    Is.defined = defined;\n    function undefined(value) {\n        return typeof value === 'undefined';\n    }\n    Is.undefined = undefined;\n    function boolean(value) {\n        return value === true || value === false;\n    }\n    Is.boolean = boolean;\n    function string(value) {\n        return toString.call(value) === '[object String]';\n    }\n    Is.string = string;\n    function number(value) {\n        return toString.call(value) === '[object Number]';\n    }\n    Is.number = number;\n    function numberRange(value, min, max) {\n        return toString.call(value) === '[object Number]' && min <= value && value <= max;\n    }\n    Is.numberRange = numberRange;\n    function integer(value) {\n        return toString.call(value) === '[object Number]' && -2147483648 <= value && value <= 2147483647;\n    }\n    Is.integer = integer;\n    function uinteger(value) {\n        return toString.call(value) === '[object Number]' && 0 <= value && value <= 2147483647;\n    }\n    Is.uinteger = uinteger;\n    function func(value) {\n        return toString.call(value) === '[object Function]';\n    }\n    Is.func = func;\n    function objectLiteral(value) {\n        // Strictly speaking class instances pass this check as well. Since the LSP\n        // doesn't use classes we ignore this for now. If we do we need to add something\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n        return value !== null && typeof value === 'object';\n    }\n    Is.objectLiteral = objectLiteral;\n    function typedArray(value, check) {\n        return Array.isArray(value) && value.every(check);\n    }\n    Is.typedArray = typedArray;\n})(Is || (Is = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Declaration} or a typed array of {@link DeclarationLink}\n * or a Thenable that resolves to such.\n */\nvar DeclarationRequest;\n(function (DeclarationRequest) {\n    DeclarationRequest.method = 'textDocument/declaration';\n    DeclarationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\n    DeclarationRequest.capabilities = messages_1.CM.create('textDocument.declaration', 'declarationProvider');\n})(DeclarationRequest || (exports.DeclarationRequest = DeclarationRequest = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport type JSONLanguageStatus = { schemas: string[] };\n\nimport {\n\tworkspace, window, languages, commands, LogOutputChannel, ExtensionContext, extensions, Uri, ColorInformation,\n\tDiagnostic, StatusBarAlignment, TextEditor, TextDocument, FormattingOptions, CancellationToken, FoldingRange,\n\tProviderResult, TextEdit, Range, Position, Disposable, CompletionItem, CompletionList, CompletionContext, Hover, MarkdownString, FoldingContext, DocumentSymbol, SymbolInformation, l10n,\n\tRelativePattern\n} from 'vscode';\nimport {\n\tLanguageClientOptions, RequestType, NotificationType, FormattingOptions as LSPFormattingOptions, DocumentDiagnosticReportKind,\n\tDiagnostic as LSPDiagnostic,\n\tDidChangeConfigurationNotification, HandleDiagnosticsSignature, ResponseError, DocumentRangeFormattingParams,\n\tDocumentRangeFormattingRequest, ProvideCompletionItemsSignature, ProvideHoverSignature, BaseLanguageClient, ProvideFoldingRangeSignature, ProvideDocumentSymbolsSignature, ProvideDocumentColorsSignature\n} from 'vscode-languageclient';\n\n\nimport { hash } from './utils/hash';\nimport { createDocumentSymbolsLimitItem, createLanguageStatusItem, createLimitStatusItem } from './languageStatus';\nimport { getLanguageParticipants, LanguageParticipants } from './languageParticipants';\n\nnamespace VSCodeContentRequest {\n\texport const type: RequestType<string, string, any> = new RequestType('vscode/content');\n}\n\nnamespace SchemaContentChangeNotification {\n\texport const type: NotificationType<string | string[]> = new NotificationType('json/schemaContent');\n}\n\nnamespace ForceValidateRequest {\n\texport const type: RequestType<string, Diagnostic[], any> = new RequestType('json/validate');\n}\n\nnamespace LanguageStatusRequest {\n\texport const type: RequestType<string, JSONLanguageStatus, any> = new RequestType('json/languageStatus');\n}\n\nnamespace ValidateContentRequest {\n\texport const type: RequestType<{ schemaUri: string; content: string }, LSPDiagnostic[], any> = new RequestType('json/validateContent');\n}\ninterface SortOptions extends LSPFormattingOptions {\n}\n\ninterface DocumentSortingParams {\n\t/**\n\t * The uri of the document to sort.\n\t */\n\treadonly uri: string;\n\t/**\n\t * The sort options\n\t */\n\treadonly options: SortOptions;\n}\n\nnamespace DocumentSortingRequest {\n\texport interface ITextEdit {\n\t\trange: {\n\t\t\tstart: { line: number; character: number };\n\t\t\tend: { line: number; character: number };\n\t\t};\n\t\tnewText: string;\n\t}\n\texport const type: RequestType<DocumentSortingParams, ITextEdit[], any> = new RequestType('json/sort');\n}\n\nexport interface ISchemaAssociations {\n\t[pattern: string]: string[];\n}\n\nexport interface ISchemaAssociation {\n\tfileMatch: string[];\n\turi: string;\n}\n\nnamespace SchemaAssociationNotification {\n\texport const type: NotificationType<ISchemaAssociations | ISchemaAssociation[]> = new NotificationType('json/schemaAssociations');\n}\n\ntype Settings = {\n\tjson?: {\n\t\tschemas?: JSONSchemaSettings[];\n\t\tformat?: { enable?: boolean };\n\t\tkeepLines?: { enable?: boolean };\n\t\tvalidate?: { enable?: boolean };\n\t\tresultLimit?: number;\n\t\tjsonFoldingLimit?: number;\n\t\tjsoncFoldingLimit?: number;\n\t\tjsonColorDecoratorLimit?: number;\n\t\tjsoncColorDecoratorLimit?: number;\n\t};\n\thttp?: {\n\t\tproxy?: string;\n\t\tproxyStrictSSL?: boolean;\n\t};\n};\n\nexport type JSONSchemaSettings = {\n\tfileMatch?: string[];\n\turl?: string;\n\tschema?: any;\n\tfolderUri?: string;\n};\n\nexport namespace SettingIds {\n\texport const enableFormatter = 'json.format.enable';\n\texport const enableKeepLines = 'json.format.keepLines';\n\texport const enableValidation = 'json.validate.enable';\n\texport const enableSchemaDownload = 'json.schemaDownload.enable';\n\texport const maxItemsComputed = 'json.maxItemsComputed';\n\texport const editorFoldingMaximumRegions = 'editor.foldingMaximumRegions';\n\texport const editorColorDecoratorsLimit = 'editor.colorDecoratorsLimit';\n\n\texport const editorSection = 'editor';\n\texport const foldingMaximumRegions = 'foldingMaximumRegions';\n\texport const colorDecoratorsLimit = 'colorDecoratorsLimit';\n}\n\nexport interface TelemetryReporter {\n\tsendTelemetryEvent(eventName: string, properties?: {\n\t\t[key: string]: string;\n\t}, measurements?: {\n\t\t[key: string]: number;\n\t}): void;\n}\n\nexport type LanguageClientConstructor = (name: string, description: string, clientOptions: LanguageClientOptions) => BaseLanguageClient;\n\nexport interface Runtime {\n\tschemaRequests: SchemaRequestService;\n\ttelemetry?: TelemetryReporter;\n\treadonly timer: {\n\t\tsetTimeout(callback: (...args: any[]) => void, ms: number, ...args: any[]): Disposable;\n\t};\n\tlogOutputChannel: LogOutputChannel;\n}\n\nexport interface SchemaRequestService {\n\tgetContent(uri: string): Promise<string>;\n\tclearCache?(): Promise<string[]>;\n}\n\nexport const languageServerDescription = l10n.t('JSON Language Server');\n\nlet resultLimit = 5000;\nlet jsonFoldingLimit = 5000;\nlet jsoncFoldingLimit = 5000;\nlet jsonColorDecoratorLimit = 5000;\nlet jsoncColorDecoratorLimit = 5000;\n\nexport interface AsyncDisposable {\n\tdispose(): Promise<void>;\n}\n\nexport async function startClient(context: ExtensionContext, newLanguageClient: LanguageClientConstructor, runtime: Runtime): Promise<AsyncDisposable> {\n\tconst languageParticipants = getLanguageParticipants();\n\tcontext.subscriptions.push(languageParticipants);\n\n\tlet client: Disposable | undefined = await startClientWithParticipants(context, languageParticipants, newLanguageClient, runtime);\n\n\tlet restartTrigger: Disposable | undefined;\n\tlanguageParticipants.onDidChange(() => {\n\t\tif (restartTrigger) {\n\t\t\trestartTrigger.dispose();\n\t\t}\n\t\trestartTrigger = runtime.timer.setTimeout(async () => {\n\t\t\tif (client) {\n\t\t\t\truntime.logOutputChannel.info('Extensions have changed, restarting JSON server...');\n\t\t\t\truntime.logOutputChannel.info('');\n\t\t\t\tconst oldClient = client;\n\t\t\t\tclient = undefined;\n\t\t\t\tawait oldClient.dispose();\n\t\t\t\tclient = await startClientWithParticipants(context, languageParticipants, newLanguageClient, runtime);\n\t\t\t}\n\t\t}, 2000);\n\t});\n\n\treturn {\n\t\tdispose: async () => {\n\t\t\trestartTrigger?.dispose();\n\t\t\tawait client?.dispose();\n\t\t}\n\t};\n}\n\nasync function startClientWithParticipants(_context: ExtensionContext, languageParticipants: LanguageParticipants, newLanguageClient: LanguageClientConstructor, runtime: Runtime): Promise<AsyncDisposable> {\n\n\tconst toDispose: Disposable[] = [];\n\n\tlet rangeFormatting: Disposable | undefined = undefined;\n\n\tconst documentSelector = languageParticipants.documentSelector;\n\n\tconst schemaResolutionErrorStatusBarItem = window.createStatusBarItem('status.json.resolveError', StatusBarAlignment.Right, 0);\n\tschemaResolutionErrorStatusBarItem.name = l10n.t('JSON: Schema Resolution Error');\n\tschemaResolutionErrorStatusBarItem.text = '$(alert)';\n\ttoDispose.push(schemaResolutionErrorStatusBarItem);\n\n\tconst fileSchemaErrors = new Map<string, string>();\n\tlet schemaDownloadEnabled = true;\n\n\tlet isClientReady = false;\n\n\tconst documentSymbolsLimitStatusbarItem = createLimitStatusItem((limit: number) => createDocumentSymbolsLimitItem(documentSelector, SettingIds.maxItemsComputed, limit));\n\ttoDispose.push(documentSymbolsLimitStatusbarItem);\n\n\ttoDispose.push(commands.registerCommand('json.clearCache', async () => {\n\t\tif (isClientReady && runtime.schemaRequests.clearCache) {\n\t\t\tconst cachedSchemas = await runtime.schemaRequests.clearCache();\n\t\t\tawait client.sendNotification(SchemaContentChangeNotification.type, cachedSchemas);\n\t\t}\n\t\twindow.showInformationMessage(l10n.t('JSON schema cache cleared.'));\n\t}));\n\n\ttoDispose.push(commands.registerCommand('json.validate', async (schemaUri: Uri, content: string) => {\n\t\tconst diagnostics: LSPDiagnostic[] = await client.sendRequest(ValidateContentRequest.type, { schemaUri: schemaUri.toString(), content });\n\t\treturn diagnostics.map(client.protocol2CodeConverter.asDiagnostic);\n\t}));\n\n\ttoDispose.push(commands.registerCommand('json.sort', async () => {\n\n\t\tif (isClientReady) {\n\t\t\tconst textEditor = window.activeTextEditor;\n\t\t\tif (textEditor) {\n\t\t\t\tconst documentOptions = textEditor.options;\n\t\t\t\tconst textEdits = await getSortTextEdits(textEditor.document, documentOptions.tabSize, documentOptions.insertSpaces);\n\t\t\t\tconst success = await textEditor.edit(mutator => {\n\t\t\t\t\tfor (const edit of textEdits) {\n\t\t\t\t\t\tmutator.replace(client.protocol2CodeConverter.asRange(edit.range), edit.newText);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (!success) {\n\t\t\t\t\twindow.showErrorMessage(l10n.t('Failed to sort the JSONC document, please consider opening an issue.'));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}));\n\n\tfunction filterSchemaErrorDiagnostics(uri: Uri, diagnostics: Diagnostic[]): Diagnostic[] {\n\t\tconst schemaErrorIndex = diagnostics.findIndex(isSchemaResolveError);\n\t\tif (schemaErrorIndex !== -1) {\n\t\t\tconst schemaResolveDiagnostic = diagnostics[schemaErrorIndex];\n\t\t\tfileSchemaErrors.set(uri.toString(), schemaResolveDiagnostic.message);\n\t\t\tif (!schemaDownloadEnabled) {\n\t\t\t\tdiagnostics = diagnostics.filter(d => !isSchemaResolveError(d));\n\t\t\t}\n\t\t\tif (window.activeTextEditor && window.activeTextEditor.document.uri.toString() === uri.toString()) {\n\t\t\t\tschemaResolutionErrorStatusBarItem.show();\n\t\t\t}\n\t\t}\n\t\treturn diagnostics;\n\t}\n\n\t// Options to control the language client\n\tconst clientOptions: LanguageClientOptions = {\n\t\t// Register the server for json documents\n\t\tdocumentSelector,\n\t\tinitializationOptions: {\n\t\t\thandledSchemaProtocols: ['file'], // language server only loads file-URI. Fetching schemas with other protocols ('http'...) are made on the client.\n\t\t\tprovideFormatter: false, // tell the server to not provide formatting capability and ignore the `json.format.enable` setting.\n\t\t\tcustomCapabilities: { rangeFormatting: { editLimit: 10000 } }\n\t\t},\n\t\tsynchronize: {\n\t\t\t// Synchronize the setting section 'json' to the server\n\t\t\tconfigurationSection: ['json', 'http'],\n\t\t\tfileEvents: workspace.createFileSystemWatcher('**/*.json')\n\t\t},\n\t\tmiddleware: {\n\t\t\tworkspace: {\n\t\t\t\tdidChangeConfiguration: () => client.sendNotification(DidChangeConfigurationNotification.type, { settings: getSettings() })\n\t\t\t},\n\t\t\tprovideDiagnostics: async (uriOrDoc, previousResolutId, token, next) => {\n\t\t\t\tconst diagnostics = await next(uriOrDoc, previousResolutId, token);\n\t\t\t\tif (diagnostics && diagnostics.kind === DocumentDiagnosticReportKind.Full) {\n\t\t\t\t\tconst uri = uriOrDoc instanceof Uri ? uriOrDoc : uriOrDoc.uri;\n\t\t\t\t\tdiagnostics.items = filterSchemaErrorDiagnostics(uri, diagnostics.items);\n\t\t\t\t}\n\t\t\t\treturn diagnostics;\n\t\t\t},\n\t\t\thandleDiagnostics: (uri: Uri, diagnostics: Diagnostic[], next: HandleDiagnosticsSignature) => {\n\t\t\t\tdiagnostics = filterSchemaErrorDiagnostics(uri, diagnostics);\n\t\t\t\tnext(uri, diagnostics);\n\t\t\t},\n\t\t\t// testing the replace / insert mode\n\t\t\tprovideCompletionItem(document: TextDocument, position: Position, context: CompletionContext, token: CancellationToken, next: ProvideCompletionItemsSignature): ProviderResult<CompletionItem[] | CompletionList> {\n\t\t\t\tfunction update(item: CompletionItem) {\n\t\t\t\t\tconst range = item.range;\n\t\t\t\t\tif (range instanceof Range && range.end.isAfter(position) && range.start.isBeforeOrEqual(position)) {\n\t\t\t\t\t\titem.range = { inserting: new Range(range.start, position), replacing: range };\n\t\t\t\t\t}\n\t\t\t\t\tif (item.documentation instanceof MarkdownString) {\n\t\t\t\t\t\titem.documentation = updateMarkdownString(item.documentation);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tfunction updateProposals(r: CompletionItem[] | CompletionList | null | undefined): CompletionItem[] | CompletionList | null | undefined {\n\t\t\t\t\tif (r) {\n\t\t\t\t\t\t(Array.isArray(r) ? r : r.items).forEach(update);\n\t\t\t\t\t}\n\t\t\t\t\treturn r;\n\t\t\t\t}\n\n\t\t\t\tconst r = next(document, position, context, token);\n\t\t\t\tif (isThenable<CompletionItem[] | CompletionList | null | undefined>(r)) {\n\t\t\t\t\treturn r.then(updateProposals);\n\t\t\t\t}\n\t\t\t\treturn updateProposals(r);\n\t\t\t},\n\t\t\tprovideHover(document: TextDocument, position: Position, token: CancellationToken, next: ProvideHoverSignature) {\n\t\t\t\tfunction updateHover(r: Hover | null | undefined): Hover | null | undefined {\n\t\t\t\t\tif (r && Array.isArray(r.contents)) {\n\t\t\t\t\t\tr.contents = r.contents.map(h => h instanceof MarkdownString ? updateMarkdownString(h) : h);\n\t\t\t\t\t}\n\t\t\t\t\treturn r;\n\t\t\t\t}\n\t\t\t\tconst r = next(document, position, token);\n\t\t\t\tif (isThenable<Hover | null | undefined>(r)) {\n\t\t\t\t\treturn r.then(updateHover);\n\t\t\t\t}\n\t\t\t\treturn updateHover(r);\n\t\t\t},\n\t\t\tprovideFoldingRanges(document: TextDocument, context: FoldingContext, token: CancellationToken, next: ProvideFoldingRangeSignature) {\n\t\t\t\tconst r = next(document, context, token);\n\t\t\t\tif (isThenable<FoldingRange[] | null | undefined>(r)) {\n\t\t\t\t\treturn r;\n\t\t\t\t}\n\t\t\t\treturn r;\n\t\t\t},\n\t\t\tprovideDocumentColors(document: TextDocument, token: CancellationToken, next: ProvideDocumentColorsSignature) {\n\t\t\t\tconst r = next(document, token);\n\t\t\t\tif (isThenable<ColorInformation[] | null | undefined>(r)) {\n\t\t\t\t\treturn r;\n\t\t\t\t}\n\t\t\t\treturn r;\n\t\t\t},\n\t\t\tprovideDocumentSymbols(document: TextDocument, token: CancellationToken, next: ProvideDocumentSymbolsSignature) {\n\t\t\t\ttype T = SymbolInformation[] | DocumentSymbol[];\n\t\t\t\tfunction countDocumentSymbols(symbols: DocumentSymbol[]): number {\n\t\t\t\t\treturn symbols.reduce((previousValue, s) => previousValue + 1 + countDocumentSymbols(s.children), 0);\n\t\t\t\t}\n\t\t\t\tfunction isDocumentSymbol(r: T): r is DocumentSymbol[] {\n\t\t\t\t\treturn r[0] instanceof DocumentSymbol;\n\t\t\t\t}\n\t\t\t\tfunction checkLimit(r: T | null | undefined): T | null | undefined {\n\t\t\t\t\tif (Array.isArray(r) && (isDocumentSymbol(r) ? countDocumentSymbols(r) : r.length) > resultLimit) {\n\t\t\t\t\t\tdocumentSymbolsLimitStatusbarItem.update(document, resultLimit);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdocumentSymbolsLimitStatusbarItem.update(document, false);\n\t\t\t\t\t}\n\t\t\t\t\treturn r;\n\t\t\t\t}\n\t\t\t\tconst r = next(document, token);\n\t\t\t\tif (isThenable<T | undefined | null>(r)) {\n\t\t\t\t\treturn r.then(checkLimit);\n\t\t\t\t}\n\t\t\t\treturn checkLimit(r);\n\t\t\t}\n\t\t}\n\t};\n\n\tclientOptions.outputChannel = runtime.logOutputChannel;\n\t// Create the language client and start the client.\n\tconst client = newLanguageClient('json', languageServerDescription, clientOptions);\n\tclient.registerProposedFeatures();\n\n\tconst schemaDocuments: { [uri: string]: boolean } = {};\n\n\t// handle content request\n\tclient.onRequest(VSCodeContentRequest.type, async (uriPath: string) => {\n\t\tconst uri = Uri.parse(uriPath);\n\t\tconst uriString = uri.toString(true);\n\t\tif (uri.scheme === 'untitled') {\n\t\t\tthrow new ResponseError(3, l10n.t('Unable to load {0}', uriString));\n\t\t}\n\t\tif (uri.scheme === 'vscode') {\n\t\t\ttry {\n\t\t\t\truntime.logOutputChannel.info('read schema from vscode: ' + uriString);\n\t\t\t\tensureFilesystemWatcherInstalled(uri);\n\t\t\t\tconst content = await workspace.fs.readFile(uri);\n\t\t\t\treturn new TextDecoder().decode(content);\n\t\t\t} catch (e) {\n\t\t\t\tthrow new ResponseError(5, e.toString(), e);\n\t\t\t}\n\t\t} else if (uri.scheme !== 'http' && uri.scheme !== 'https') {\n\t\t\ttry {\n\t\t\t\tconst document = await workspace.openTextDocument(uri);\n\t\t\t\tschemaDocuments[uriString] = true;\n\t\t\t\treturn document.getText();\n\t\t\t} catch (e) {\n\t\t\t\tthrow new ResponseError(2, e.toString(), e);\n\t\t\t}\n\t\t} else if (schemaDownloadEnabled && workspace.isTrusted) {\n\t\t\tif (runtime.telemetry && uri.authority === 'schema.management.azure.com') {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"json.schema\" : {\n\t\t\t\t\t\t\"owner\": \"aeschli\",\n\t\t\t\t\t\t\"comment\": \"Measure the use of the Azure resource manager schemas\",\n\t\t\t\t\t\t\"schemaURL\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"comment\": \"The azure schema URL that was requested.\" }\n\t\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\truntime.telemetry.sendTelemetryEvent('json.schema', { schemaURL: uriString });\n\t\t\t}\n\t\t\ttry {\n\t\t\t\treturn await runtime.schemaRequests.getContent(uriString);\n\t\t\t} catch (e) {\n\t\t\t\tthrow new ResponseError(4, e.toString());\n\t\t\t}\n\t\t} else {\n\t\t\tif (!workspace.isTrusted) {\n\t\t\t\tthrow new ResponseError(1, l10n.t('Downloading schemas is disabled in untrusted workspaces'));\n\t\t\t}\n\t\t\tthrow new ResponseError(1, l10n.t('Downloading schemas is disabled through setting \\'{0}\\'', SettingIds.enableSchemaDownload));\n\t\t}\n\t});\n\n\tawait client.start();\n\n\tisClientReady = true;\n\n\tconst handleContentChange = (uriString: string) => {\n\t\tif (schemaDocuments[uriString]) {\n\t\t\tclient.sendNotification(SchemaContentChangeNotification.type, uriString);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\tconst handleActiveEditorChange = (activeEditor?: TextEditor) => {\n\t\tif (!activeEditor) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst activeDocUri = activeEditor.document.uri.toString();\n\n\t\tif (activeDocUri && fileSchemaErrors.has(activeDocUri)) {\n\t\t\tschemaResolutionErrorStatusBarItem.show();\n\t\t} else {\n\t\t\tschemaResolutionErrorStatusBarItem.hide();\n\t\t}\n\t};\n\tconst handleContentClosed = (uriString: string) => {\n\t\tif (handleContentChange(uriString)) {\n\t\t\tdelete schemaDocuments[uriString];\n\t\t}\n\t\tfileSchemaErrors.delete(uriString);\n\t};\n\n\tconst watchers: Map<string, Disposable> = new Map();\n\ttoDispose.push(new Disposable(() => {\n\t\tfor (const d of watchers.values()) {\n\t\t\td.dispose();\n\t\t}\n\t}));\n\n\n\tconst ensureFilesystemWatcherInstalled = (uri: Uri) => {\n\n\t\tconst uriString = uri.toString();\n\t\tif (!watchers.has(uriString)) {\n\t\t\ttry {\n\t\t\t\tconst watcher = workspace.createFileSystemWatcher(new RelativePattern(uri, '*'));\n\t\t\t\tconst handleChange = (uri: Uri) => {\n\t\t\t\t\truntime.logOutputChannel.info('schema change detected ' + uri.toString());\n\t\t\t\t\tclient.sendNotification(SchemaContentChangeNotification.type, uriString);\n\t\t\t\t};\n\t\t\t\tconst createListener = watcher.onDidCreate(handleChange);\n\t\t\t\tconst changeListener = watcher.onDidChange(handleChange);\n\t\t\t\tconst deleteListener = watcher.onDidDelete(() => {\n\t\t\t\t\tconst watcher = watchers.get(uriString);\n\t\t\t\t\tif (watcher) {\n\t\t\t\t\t\twatcher.dispose();\n\t\t\t\t\t\twatchers.delete(uriString);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\twatchers.set(uriString, Disposable.from(watcher, createListener, changeListener, deleteListener));\n\t\t\t} catch {\n\t\t\t\truntime.logOutputChannel.info('Problem installing a file system watcher for ' + uriString);\n\t\t\t}\n\t\t}\n\t};\n\n\ttoDispose.push(workspace.onDidChangeTextDocument(e => handleContentChange(e.document.uri.toString())));\n\ttoDispose.push(workspace.onDidCloseTextDocument(d => handleContentClosed(d.uri.toString())));\n\n\ttoDispose.push(window.onDidChangeActiveTextEditor(handleActiveEditorChange));\n\n\tconst handleRetryResolveSchemaCommand = () => {\n\t\tif (window.activeTextEditor) {\n\t\t\tschemaResolutionErrorStatusBarItem.text = '$(watch)';\n\t\t\tconst activeDocUri = window.activeTextEditor.document.uri.toString();\n\t\t\tclient.sendRequest(ForceValidateRequest.type, activeDocUri).then((diagnostics) => {\n\t\t\t\tconst schemaErrorIndex = diagnostics.findIndex(isSchemaResolveError);\n\t\t\t\tif (schemaErrorIndex !== -1) {\n\t\t\t\t\t// Show schema resolution errors in status bar only; ref: #51032\n\t\t\t\t\tconst schemaResolveDiagnostic = diagnostics[schemaErrorIndex];\n\t\t\t\t\tfileSchemaErrors.set(activeDocUri, schemaResolveDiagnostic.message);\n\t\t\t\t} else {\n\t\t\t\t\tschemaResolutionErrorStatusBarItem.hide();\n\t\t\t\t}\n\t\t\t\tschemaResolutionErrorStatusBarItem.text = '$(alert)';\n\t\t\t});\n\t\t}\n\t};\n\n\ttoDispose.push(commands.registerCommand('_json.retryResolveSchema', handleRetryResolveSchemaCommand));\n\n\tclient.sendNotification(SchemaAssociationNotification.type, await getSchemaAssociations());\n\n\ttoDispose.push(extensions.onDidChange(async _ => {\n\t\tclient.sendNotification(SchemaAssociationNotification.type, await getSchemaAssociations());\n\t}));\n\n\tconst associationWatcher = workspace.createFileSystemWatcher(new RelativePattern(\n\t\tUri.parse(`vscode://schemas-associations/`),\n\t\t'**/schemas-associations.json')\n\t);\n\ttoDispose.push(associationWatcher);\n\ttoDispose.push(associationWatcher.onDidChange(async _e => {\n\t\tclient.sendNotification(SchemaAssociationNotification.type, await getSchemaAssociations());\n\t}));\n\n\t// manually register / deregister format provider based on the `json.format.enable` setting avoiding issues with late registration. See #71652.\n\tupdateFormatterRegistration();\n\ttoDispose.push({ dispose: () => rangeFormatting && rangeFormatting.dispose() });\n\n\tupdateSchemaDownloadSetting();\n\n\ttoDispose.push(workspace.onDidChangeConfiguration(e => {\n\t\tif (e.affectsConfiguration(SettingIds.enableFormatter)) {\n\t\t\tupdateFormatterRegistration();\n\t\t} else if (e.affectsConfiguration(SettingIds.enableSchemaDownload)) {\n\t\t\tupdateSchemaDownloadSetting();\n\t\t} else if (e.affectsConfiguration(SettingIds.editorFoldingMaximumRegions) || e.affectsConfiguration(SettingIds.editorColorDecoratorsLimit)) {\n\t\t\tclient.sendNotification(DidChangeConfigurationNotification.type, { settings: getSettings() });\n\t\t}\n\t}));\n\ttoDispose.push(workspace.onDidGrantWorkspaceTrust(updateSchemaDownloadSetting));\n\n\ttoDispose.push(createLanguageStatusItem(documentSelector, (uri: string) => client.sendRequest(LanguageStatusRequest.type, uri)));\n\n\tfunction updateFormatterRegistration() {\n\t\tconst formatEnabled = workspace.getConfiguration().get(SettingIds.enableFormatter);\n\t\tif (!formatEnabled && rangeFormatting) {\n\t\t\trangeFormatting.dispose();\n\t\t\trangeFormatting = undefined;\n\t\t} else if (formatEnabled && !rangeFormatting) {\n\t\t\trangeFormatting = languages.registerDocumentRangeFormattingEditProvider(documentSelector, {\n\t\t\t\tprovideDocumentRangeFormattingEdits(document: TextDocument, range: Range, options: FormattingOptions, token: CancellationToken): ProviderResult<TextEdit[]> {\n\t\t\t\t\tconst filesConfig = workspace.getConfiguration('files', document);\n\t\t\t\t\tconst fileFormattingOptions = {\n\t\t\t\t\t\ttrimTrailingWhitespace: filesConfig.get<boolean>('trimTrailingWhitespace'),\n\t\t\t\t\t\ttrimFinalNewlines: filesConfig.get<boolean>('trimFinalNewlines'),\n\t\t\t\t\t\tinsertFinalNewline: filesConfig.get<boolean>('insertFinalNewline'),\n\t\t\t\t\t};\n\t\t\t\t\tconst params: DocumentRangeFormattingParams = {\n\t\t\t\t\t\ttextDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n\t\t\t\t\t\trange: client.code2ProtocolConverter.asRange(range),\n\t\t\t\t\t\toptions: client.code2ProtocolConverter.asFormattingOptions(options, fileFormattingOptions)\n\t\t\t\t\t};\n\n\t\t\t\t\treturn client.sendRequest(DocumentRangeFormattingRequest.type, params, token).then(\n\t\t\t\t\t\tclient.protocol2CodeConverter.asTextEdits,\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\tclient.handleFailedRequest(DocumentRangeFormattingRequest.type, undefined, error, []);\n\t\t\t\t\t\t\treturn Promise.resolve([]);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction updateSchemaDownloadSetting() {\n\t\tif (!workspace.isTrusted) {\n\t\t\tschemaResolutionErrorStatusBarItem.tooltip = l10n.t('Unable to download schemas in untrusted workspaces.');\n\t\t\tschemaResolutionErrorStatusBarItem.command = 'workbench.trust.manage';\n\t\t\treturn;\n\t\t}\n\t\tschemaDownloadEnabled = workspace.getConfiguration().get(SettingIds.enableSchemaDownload) !== false;\n\t\tif (schemaDownloadEnabled) {\n\t\t\tschemaResolutionErrorStatusBarItem.tooltip = l10n.t('Unable to resolve schema. Click to retry.');\n\t\t\tschemaResolutionErrorStatusBarItem.command = '_json.retryResolveSchema';\n\t\t\thandleRetryResolveSchemaCommand();\n\t\t} else {\n\t\t\tschemaResolutionErrorStatusBarItem.tooltip = l10n.t('Downloading schemas is disabled. Click to configure.');\n\t\t\tschemaResolutionErrorStatusBarItem.command = { command: 'workbench.action.openSettings', arguments: [SettingIds.enableSchemaDownload], title: '' };\n\t\t}\n\t}\n\n\tasync function getSortTextEdits(document: TextDocument, tabSize: string | number = 4, insertSpaces: string | boolean = true): Promise<TextEdit[]> {\n\t\tconst filesConfig = workspace.getConfiguration('files', document);\n\t\tconst options: SortOptions = {\n\t\t\ttabSize: Number(tabSize),\n\t\t\tinsertSpaces: Boolean(insertSpaces),\n\t\t\ttrimTrailingWhitespace: filesConfig.get<boolean>('trimTrailingWhitespace'),\n\t\t\ttrimFinalNewlines: filesConfig.get<boolean>('trimFinalNewlines'),\n\t\t\tinsertFinalNewline: filesConfig.get<boolean>('insertFinalNewline'),\n\t\t};\n\t\tconst params: DocumentSortingParams = {\n\t\t\turi: document.uri.toString(),\n\t\t\toptions\n\t\t};\n\t\tconst edits = await client.sendRequest(DocumentSortingRequest.type, params);\n\t\t// Here we convert the JSON objects to real TextEdit objects\n\t\treturn edits.map((edit) => {\n\t\t\treturn new TextEdit(\n\t\t\t\tnew Range(edit.range.start.line, edit.range.start.character, edit.range.end.line, edit.range.end.character),\n\t\t\t\tedit.newText\n\t\t\t);\n\t\t});\n\t}\n\n\treturn {\n\t\tdispose: async () => {\n\t\t\tawait client.stop();\n\t\t\ttoDispose.forEach(d => d.dispose());\n\t\t\trangeFormatting?.dispose();\n\t\t}\n\t};\n}\n\nasync function getSchemaAssociations(): Promise<ISchemaAssociation[]> {\n\treturn getSchemaExtensionAssociations()\n\t\t.concat(await getDynamicSchemaAssociations());\n}\n\nfunction getSchemaExtensionAssociations(): ISchemaAssociation[] {\n\tconst associations: ISchemaAssociation[] = [];\n\textensions.allAcrossExtensionHosts.forEach(extension => {\n\t\tconst packageJSON = extension.packageJSON;\n\t\tif (packageJSON && packageJSON.contributes && packageJSON.contributes.jsonValidation) {\n\t\t\tconst jsonValidation = packageJSON.contributes.jsonValidation;\n\t\t\tif (Array.isArray(jsonValidation)) {\n\t\t\t\tjsonValidation.forEach(jv => {\n\t\t\t\t\tlet { fileMatch, url } = jv;\n\t\t\t\t\tif (typeof fileMatch === 'string') {\n\t\t\t\t\t\tfileMatch = [fileMatch];\n\t\t\t\t\t}\n\t\t\t\t\tif (Array.isArray(fileMatch) && typeof url === 'string') {\n\t\t\t\t\t\tlet uri: string = url;\n\t\t\t\t\t\tif (uri[0] === '.' && uri[1] === '/') {\n\t\t\t\t\t\t\turi = Uri.joinPath(extension.extensionUri, uri).toString();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfileMatch = fileMatch.map(fm => {\n\t\t\t\t\t\t\tif (fm[0] === '%') {\n\t\t\t\t\t\t\t\tfm = fm.replace(/%APP_SETTINGS_HOME%/, '/User');\n\t\t\t\t\t\t\t\tfm = fm.replace(/%MACHINE_SETTINGS_HOME%/, '/Machine');\n\t\t\t\t\t\t\t\tfm = fm.replace(/%APP_WORKSPACES_HOME%/, '/Workspaces');\n\t\t\t\t\t\t\t} else if (!fm.match(/^(\\w+:\\/\\/|\\/|!)/)) {\n\t\t\t\t\t\t\t\tfm = '/' + fm;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn fm;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tassociations.push({ fileMatch, uri });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\treturn associations;\n}\n\nasync function getDynamicSchemaAssociations(): Promise<ISchemaAssociation[]> {\n\tconst result: ISchemaAssociation[] = [];\n\ttry {\n\t\tconst data = await workspace.fs.readFile(Uri.parse(`vscode://schemas-associations/schemas-associations.json`));\n\t\tconst rawStr = new TextDecoder().decode(data);\n\t\tconst obj = <Record<string, string[]>>JSON.parse(rawStr);\n\t\tfor (const item of Object.keys(obj)) {\n\t\t\tresult.push({\n\t\t\t\tfileMatch: obj[item],\n\t\t\t\turi: item\n\t\t\t});\n\t\t}\n\t} catch {\n\t\t// ignore\n\t}\n\treturn result;\n}\n\nfunction getSettings(): Settings {\n\tconst configuration = workspace.getConfiguration();\n\tconst httpSettings = workspace.getConfiguration('http');\n\n\tconst normalizeLimit = (settingValue: any) => Math.trunc(Math.max(0, Number(settingValue))) || 5000;\n\n\tresultLimit = normalizeLimit(workspace.getConfiguration().get(SettingIds.maxItemsComputed));\n\tconst editorJSONSettings = workspace.getConfiguration(SettingIds.editorSection, { languageId: 'json' });\n\tconst editorJSONCSettings = workspace.getConfiguration(SettingIds.editorSection, { languageId: 'jsonc' });\n\n\tjsonFoldingLimit = normalizeLimit(editorJSONSettings.get(SettingIds.foldingMaximumRegions));\n\tjsoncFoldingLimit = normalizeLimit(editorJSONCSettings.get(SettingIds.foldingMaximumRegions));\n\tjsonColorDecoratorLimit = normalizeLimit(editorJSONSettings.get(SettingIds.colorDecoratorsLimit));\n\tjsoncColorDecoratorLimit = normalizeLimit(editorJSONCSettings.get(SettingIds.colorDecoratorsLimit));\n\n\tconst schemas: JSONSchemaSettings[] = [];\n\n\tconst settings: Settings = {\n\t\thttp: {\n\t\t\tproxy: httpSettings.get('proxy'),\n\t\t\tproxyStrictSSL: httpSettings.get('proxyStrictSSL')\n\t\t},\n\t\tjson: {\n\t\t\tvalidate: { enable: configuration.get(SettingIds.enableValidation) },\n\t\t\tformat: { enable: configuration.get(SettingIds.enableFormatter) },\n\t\t\tkeepLines: { enable: configuration.get(SettingIds.enableKeepLines) },\n\t\t\tschemas,\n\t\t\tresultLimit: resultLimit + 1, // ask for one more so we can detect if the limit has been exceeded\n\t\t\tjsonFoldingLimit: jsonFoldingLimit + 1,\n\t\t\tjsoncFoldingLimit: jsoncFoldingLimit + 1,\n\t\t\tjsonColorDecoratorLimit: jsonColorDecoratorLimit + 1,\n\t\t\tjsoncColorDecoratorLimit: jsoncColorDecoratorLimit + 1\n\t\t}\n\t};\n\n\t/*\n\t * Add schemas from the settings\n\t * folderUri to which folder the setting is scoped to. `undefined` means global (also external files)\n\t * settingsLocation against which path relative schema URLs are resolved\n\t */\n\tconst collectSchemaSettings = (schemaSettings: JSONSchemaSettings[] | undefined, folderUri: string | undefined, settingsLocation: Uri | undefined) => {\n\t\tif (schemaSettings) {\n\t\t\tfor (const setting of schemaSettings) {\n\t\t\t\tconst url = getSchemaId(setting, settingsLocation);\n\t\t\t\tif (url) {\n\t\t\t\t\tconst schemaSetting: JSONSchemaSettings = { url, fileMatch: setting.fileMatch, folderUri, schema: setting.schema };\n\t\t\t\t\tschemas.push(schemaSetting);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tconst folders = workspace.workspaceFolders ?? [];\n\n\tconst schemaConfigInfo = workspace.getConfiguration('json', null).inspect<JSONSchemaSettings[]>('schemas');\n\tif (schemaConfigInfo) {\n\t\t// settings in user config\n\t\tcollectSchemaSettings(schemaConfigInfo.globalValue, undefined, undefined);\n\t\tif (workspace.workspaceFile) {\n\t\t\tif (schemaConfigInfo.workspaceValue) {\n\t\t\t\tconst settingsLocation = Uri.joinPath(workspace.workspaceFile, '..');\n\t\t\t\t// settings in the workspace configuration file apply to all files (also external files)\n\t\t\t\tcollectSchemaSettings(schemaConfigInfo.workspaceValue, undefined, settingsLocation);\n\t\t\t}\n\t\t\tfor (const folder of folders) {\n\t\t\t\tconst folderUri = folder.uri;\n\t\t\t\tconst folderSchemaConfigInfo = workspace.getConfiguration('json', folderUri).inspect<JSONSchemaSettings[]>('schemas');\n\t\t\t\tcollectSchemaSettings(folderSchemaConfigInfo?.workspaceFolderValue, folderUri.toString(false), folderUri);\n\t\t\t}\n\t\t} else {\n\t\t\tif (schemaConfigInfo.workspaceValue && folders.length === 1) {\n\t\t\t\t// single folder workspace: settings apply to all files (also external files)\n\t\t\t\tcollectSchemaSettings(schemaConfigInfo.workspaceValue, undefined, folders[0].uri);\n\t\t\t}\n\t\t}\n\t}\n\treturn settings;\n}\n\nfunction getSchemaId(schema: JSONSchemaSettings, settingsLocation?: Uri): string | undefined {\n\tlet url = schema.url;\n\tif (!url) {\n\t\tif (schema.schema) {\n\t\t\turl = schema.schema.id || `vscode://schemas/custom/${encodeURIComponent(hash(schema.schema).toString(16))}`;\n\t\t}\n\t} else if (settingsLocation && (url[0] === '.' || url[0] === '/')) {\n\t\turl = Uri.joinPath(settingsLocation, url).toString(false);\n\t}\n\treturn url;\n}\n\nfunction isThenable<T>(obj: ProviderResult<T>): obj is Thenable<T> {\n\treturn obj && (<any>obj)['then'];\n}\n\nfunction updateMarkdownString(h: MarkdownString): MarkdownString {\n\tconst n = new MarkdownString(h.value, true);\n\tn.isTrusted = h.isTrusted;\n\treturn n;\n}\n\nfunction isSchemaResolveError(d: Diagnostic) {\n\treturn d.code === /* SchemaResolveError */ 0x300;\n}\n\n\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst Is = __importStar(require(\"./utils/is\"));\nconst messages_1 = require(\"./messages\");\n/**\n * @since 3.17.0\n */\nvar DiagnosticServerCancellationData;\n(function (DiagnosticServerCancellationData) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.retriggerRequest);\n    }\n    DiagnosticServerCancellationData.is = is;\n})(DiagnosticServerCancellationData || (exports.DiagnosticServerCancellationData = DiagnosticServerCancellationData = {}));\n/**\n * The document diagnostic report kinds.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticReportKind;\n(function (DocumentDiagnosticReportKind) {\n    /**\n     * A diagnostic report with a full\n     * set of problems.\n     */\n    DocumentDiagnosticReportKind.Full = 'full';\n    /**\n     * A report indicating that the last\n     * returned report is still accurate.\n     */\n    DocumentDiagnosticReportKind.Unchanged = 'unchanged';\n})(DocumentDiagnosticReportKind || (exports.DocumentDiagnosticReportKind = DocumentDiagnosticReportKind = {}));\n/**\n * The document diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticRequest;\n(function (DocumentDiagnosticRequest) {\n    DocumentDiagnosticRequest.method = 'textDocument/diagnostic';\n    DocumentDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentDiagnosticRequest.type = new messages_1.ProtocolRequestType(DocumentDiagnosticRequest.method);\n    DocumentDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n    DocumentDiagnosticRequest.capabilities = messages_1.CM.create('textDocument.diagnostic', 'diagnosticProvider');\n})(DocumentDiagnosticRequest || (exports.DocumentDiagnosticRequest = DocumentDiagnosticRequest = {}));\n/**\n * The workspace diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar WorkspaceDiagnosticRequest;\n(function (WorkspaceDiagnosticRequest) {\n    WorkspaceDiagnosticRequest.method = 'workspace/diagnostic';\n    WorkspaceDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceDiagnosticRequest.type = new messages_1.ProtocolRequestType(WorkspaceDiagnosticRequest.method);\n    WorkspaceDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n    WorkspaceDiagnosticRequest.capabilities = messages_1.CM.create('workspace.diagnostics', 'diagnosticProvider.workspaceDiagnostics');\n})(WorkspaceDiagnosticRequest || (exports.WorkspaceDiagnosticRequest = WorkspaceDiagnosticRequest = {}));\n/**\n * The diagnostic refresh request definition.\n *\n * @since 3.17.0\n */\nvar DiagnosticRefreshRequest;\n(function (DiagnosticRefreshRequest) {\n    DiagnosticRefreshRequest.method = `workspace/diagnostic/refresh`;\n    DiagnosticRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    DiagnosticRefreshRequest.type = new messages_1.ProtocolRequestType0(DiagnosticRefreshRequest.method);\n    DiagnosticRefreshRequest.capabilities = messages_1.CM.create('workspace.diagnostics.refreshSupport', undefined);\n})(DiagnosticRefreshRequest || (exports.DiagnosticRefreshRequest = DiagnosticRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass ProtocolCompletionItem extends code.CompletionItem {\n    data;\n    fromEdit;\n    documentationFormat;\n    originalItemKind;\n    deprecated;\n    insertTextMode;\n    constructor(label) {\n        super(label);\n    }\n}\nexports.default = ProtocolCompletionItem;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event, EventEmitter, extensions } from 'vscode';\n\n/**\n * JSON language participant contribution.\n */\ninterface LanguageParticipantContribution {\n\t/**\n\t * The id of the language which participates with the JSON language server.\n\t */\n\tlanguageId: string;\n\t/**\n\t * true if the language allows comments and false otherwise.\n\t * TODO: implement server side setting\n\t */\n\tcomments?: boolean;\n}\n\nexport interface LanguageParticipants {\n\treadonly onDidChange: Event<void>;\n\treadonly documentSelector: string[];\n\thasLanguage(languageId: string): boolean;\n\tuseComments(languageId: string): boolean;\n\tdispose(): void;\n}\n\nexport function getLanguageParticipants(): LanguageParticipants {\n\tconst onDidChangeEmmiter = new EventEmitter<void>();\n\tlet languages = new Set<string>();\n\tlet comments = new Set<string>();\n\n\tfunction update() {\n\t\tconst oldLanguages = languages, oldComments = comments;\n\n\t\tlanguages = new Set();\n\t\tlanguages.add('json');\n\t\tlanguages.add('jsonc');\n\t\tlanguages.add('snippets');\n\t\tcomments = new Set();\n\t\tcomments.add('jsonc');\n\t\tcomments.add('snippets');\n\n\t\tfor (const extension of extensions.allAcrossExtensionHosts) {\n\t\t\tconst jsonLanguageParticipants = extension.packageJSON?.contributes?.jsonLanguageParticipants as LanguageParticipantContribution[];\n\t\t\tif (Array.isArray(jsonLanguageParticipants)) {\n\t\t\t\tfor (const jsonLanguageParticipant of jsonLanguageParticipants) {\n\t\t\t\t\tconst languageId = jsonLanguageParticipant.languageId;\n\t\t\t\t\tif (typeof languageId === 'string') {\n\t\t\t\t\t\tlanguages.add(languageId);\n\t\t\t\t\t\tif (jsonLanguageParticipant.comments === true) {\n\t\t\t\t\t\t\tcomments.add(languageId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn !isEqualSet(languages, oldLanguages) || !isEqualSet(comments, oldComments);\n\t}\n\tupdate();\n\n\tconst changeListener = extensions.onDidChange(_ => {\n\t\tif (update()) {\n\t\t\tonDidChangeEmmiter.fire();\n\t\t}\n\t});\n\n\treturn {\n\t\tonDidChange: onDidChangeEmmiter.event,\n\t\tget documentSelector() { return Array.from(languages); },\n\t\thasLanguage(languageId: string) { return languages.has(languageId); },\n\t\tuseComments(languageId: string) { return comments.has(languageId); },\n\t\tdispose: () => changeListener.dispose()\n\t};\n}\n\nfunction isEqualSet<T>(s1: Set<T>, s2: Set<T>) {\n\tif (s1.size !== s2.size) {\n\t\treturn false;\n\t}\n\tfor (const e of s1) {\n\t\tif (!s2.has(e)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CancellationTokenSource = exports.CancellationToken = void 0;\nconst ral_1 = __importDefault(require(\"./ral\"));\nconst Is = __importStar(require(\"./is\"));\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken || (exports.CancellationToken = CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = (0, ral_1.default)().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { handle.dispose(); } };\n});\nclass MutableToken {\n    _isCancelled = false;\n    _emitter;\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    _token;\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\twindow, languages, Uri, Disposable, commands, QuickPickItem,\n\textensions, workspace, Extension, WorkspaceFolder, QuickPickItemKind,\n\tThemeIcon, TextDocument, LanguageStatusSeverity, l10n, DocumentSelector\n} from 'vscode';\nimport { JSONLanguageStatus, JSONSchemaSettings } from './jsonClient';\n\ntype ShowSchemasInput = {\n\tschemas: string[];\n\turi: string;\n};\n\ninterface ShowSchemasItem extends QuickPickItem {\n\turi?: Uri;\n\tbuttonCommands?: (() => void)[];\n}\n\nfunction getExtensionSchemaAssociations() {\n\tconst associations: { fullUri: string; extension: Extension<any>; label: string }[] = [];\n\n\tfor (const extension of extensions.all) {\n\t\tconst jsonValidations = extension.packageJSON?.contributes?.jsonValidation;\n\t\tif (Array.isArray(jsonValidations)) {\n\t\t\tfor (const jsonValidation of jsonValidations) {\n\t\t\t\tlet uri = jsonValidation.url;\n\t\t\t\tif (typeof uri === 'string') {\n\t\t\t\t\tif (uri[0] === '.' && uri[1] === '/') {\n\t\t\t\t\t\turi = Uri.joinPath(extension.extensionUri, uri).toString(false);\n\t\t\t\t\t}\n\t\t\t\t\tassociations.push({ fullUri: uri, extension, label: jsonValidation.url });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\tfindExtension(uri: string): ShowSchemasItem | undefined {\n\t\t\tfor (const association of associations) {\n\t\t\t\tif (association.fullUri === uri) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: association.label,\n\t\t\t\t\t\tdetail: l10n.t('Configured by extension: {0}', association.extension.id),\n\t\t\t\t\t\turi: Uri.parse(association.fullUri),\n\t\t\t\t\t\tbuttons: [{ iconPath: new ThemeIcon('extensions'), tooltip: l10n.t('Open Extension') }],\n\t\t\t\t\t\tbuttonCommands: [() => commands.executeCommand('workbench.extensions.action.showExtensionsWithIds', [[association.extension.id]])]\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t};\n}\n\n//\n\nfunction getSettingsSchemaAssociations(uri: string) {\n\tconst resourceUri = Uri.parse(uri);\n\tconst workspaceFolder = workspace.getWorkspaceFolder(resourceUri);\n\n\tconst settings = workspace.getConfiguration('json', resourceUri).inspect<JSONSchemaSettings[]>('schemas');\n\n\tconst associations: { fullUri: string; workspaceFolder: WorkspaceFolder | undefined; label: string }[] = [];\n\n\tconst folderSettingSchemas = settings?.workspaceFolderValue;\n\tif (workspaceFolder && Array.isArray(folderSettingSchemas)) {\n\t\tfor (const setting of folderSettingSchemas) {\n\t\t\tconst uri = setting.url;\n\t\t\tif (typeof uri === 'string') {\n\t\t\t\tlet fullUri = uri;\n\t\t\t\tif (uri[0] === '.' && uri[1] === '/') {\n\t\t\t\t\tfullUri = Uri.joinPath(workspaceFolder.uri, uri).toString(false);\n\t\t\t\t}\n\t\t\t\tassociations.push({ fullUri, workspaceFolder, label: uri });\n\t\t\t}\n\t\t}\n\t}\n\tconst userSettingSchemas = settings?.globalValue;\n\tif (Array.isArray(userSettingSchemas)) {\n\t\tfor (const setting of userSettingSchemas) {\n\t\t\tconst uri = setting.url;\n\t\t\tif (typeof uri === 'string') {\n\t\t\t\tlet fullUri = uri;\n\t\t\t\tif (workspaceFolder && uri[0] === '.' && uri[1] === '/') {\n\t\t\t\t\tfullUri = Uri.joinPath(workspaceFolder.uri, uri).toString(false);\n\t\t\t\t}\n\t\t\t\tassociations.push({ fullUri, workspaceFolder: undefined, label: uri });\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\tfindSetting(uri: string): ShowSchemasItem | undefined {\n\t\t\tfor (const association of associations) {\n\t\t\t\tif (association.fullUri === uri) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: association.label,\n\t\t\t\t\t\tdetail: association.workspaceFolder ? l10n.t('Configured in workspace settings') : l10n.t('Configured in user settings'),\n\t\t\t\t\t\turi: Uri.parse(association.fullUri),\n\t\t\t\t\t\tbuttons: [{ iconPath: new ThemeIcon('gear'), tooltip: l10n.t('Open Settings') }],\n\t\t\t\t\t\tbuttonCommands: [() => commands.executeCommand(association.workspaceFolder ? 'workbench.action.openWorkspaceSettingsFile' : 'workbench.action.openSettingsJson', ['json.schemas'])]\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t};\n}\n\nfunction showSchemaList(input: ShowSchemasInput) {\n\n\tconst extensionSchemaAssocations = getExtensionSchemaAssociations();\n\tconst settingsSchemaAssocations = getSettingsSchemaAssociations(input.uri);\n\n\tconst extensionEntries = [];\n\tconst settingsEntries = [];\n\tconst otherEntries = [];\n\n\tfor (const schemaUri of input.schemas) {\n\t\tconst extensionEntry = extensionSchemaAssocations.findExtension(schemaUri);\n\t\tif (extensionEntry) {\n\t\t\textensionEntries.push(extensionEntry);\n\t\t\tcontinue;\n\t\t}\n\t\tconst settingsEntry = settingsSchemaAssocations.findSetting(schemaUri);\n\t\tif (settingsEntry) {\n\t\t\tsettingsEntries.push(settingsEntry);\n\t\t\tcontinue;\n\t\t}\n\t\totherEntries.push({ label: schemaUri, uri: Uri.parse(schemaUri) });\n\t}\n\n\tconst items: ShowSchemasItem[] = [...extensionEntries, ...settingsEntries, ...otherEntries];\n\tif (items.length === 0) {\n\t\titems.push({\n\t\t\tlabel: l10n.t('No schema configured for this file'),\n\t\t\tbuttons: [{ iconPath: new ThemeIcon('gear'), tooltip: l10n.t('Open Settings') }],\n\t\t\tbuttonCommands: [() => commands.executeCommand('workbench.action.openSettingsJson', ['json.schemas'])]\n\t\t});\n\t}\n\n\titems.push({ label: '', kind: QuickPickItemKind.Separator });\n\titems.push({ label: l10n.t('Learn more about JSON schema configuration...'), uri: Uri.parse('https://code.visualstudio.com/docs/languages/json#_json-schemas-and-settings') });\n\n\tconst quickPick = window.createQuickPick<ShowSchemasItem>();\n\tquickPick.placeholder = items.length ? l10n.t('Select the schema to use for {0}', input.uri) : undefined;\n\tquickPick.items = items;\n\tquickPick.show();\n\tquickPick.onDidAccept(() => {\n\t\tconst uri = quickPick.selectedItems[0].uri;\n\t\tif (uri) {\n\t\t\tcommands.executeCommand('vscode.open', uri);\n\t\t\tquickPick.dispose();\n\t\t}\n\t});\n\tquickPick.onDidTriggerItemButton(b => {\n\t\tconst index = b.item.buttons?.indexOf(b.button);\n\t\tif (index !== undefined && index >= 0 && b.item.buttonCommands && b.item.buttonCommands[index]) {\n\t\t\tb.item.buttonCommands[index]();\n\t\t}\n\t});\n}\n\nexport function createLanguageStatusItem(documentSelector: DocumentSelector, statusRequest: (uri: string) => Promise<JSONLanguageStatus>): Disposable {\n\tconst statusItem = languages.createLanguageStatusItem('json.projectStatus', documentSelector);\n\tstatusItem.name = l10n.t('JSON Validation Status');\n\tstatusItem.severity = LanguageStatusSeverity.Information;\n\n\tconst showSchemasCommand = commands.registerCommand('_json.showAssociatedSchemaList', showSchemaList);\n\n\tconst activeEditorListener = window.onDidChangeActiveTextEditor(() => {\n\t\tupdateLanguageStatus();\n\t});\n\n\tasync function updateLanguageStatus() {\n\t\tconst document = window.activeTextEditor?.document;\n\t\tif (document) {\n\t\t\ttry {\n\t\t\t\tstatusItem.text = '$(loading~spin)';\n\t\t\t\tstatusItem.detail = l10n.t('Loading JSON info');\n\t\t\t\tstatusItem.command = undefined;\n\n\t\t\t\tconst schemas = (await statusRequest(document.uri.toString())).schemas;\n\t\t\t\tstatusItem.detail = undefined;\n\t\t\t\tif (schemas.length === 0) {\n\t\t\t\t\tstatusItem.text = l10n.t('No schema validation');\n\t\t\t\t\tstatusItem.detail = l10n.t('no JSON schema configured');\n\t\t\t\t} else if (schemas.length === 1) {\n\t\t\t\t\tstatusItem.text = l10n.t('Schema validated');\n\t\t\t\t\tstatusItem.detail = l10n.t('JSON schema configured');\n\t\t\t\t} else {\n\t\t\t\t\tstatusItem.text = l10n.t('Schema validated');\n\t\t\t\t\tstatusItem.detail = l10n.t('multiple JSON schemas configured');\n\t\t\t\t}\n\t\t\t\tstatusItem.command = {\n\t\t\t\t\tcommand: '_json.showAssociatedSchemaList',\n\t\t\t\t\ttitle: l10n.t('Show Schemas'),\n\t\t\t\t\targuments: [{ schemas, uri: document.uri.toString() } satisfies ShowSchemasInput]\n\t\t\t\t};\n\t\t\t} catch (e) {\n\t\t\t\tstatusItem.text = l10n.t('Unable to compute used schemas: {0}', e.message);\n\t\t\t\tstatusItem.detail = undefined;\n\t\t\t\tstatusItem.command = undefined;\n\t\t\t}\n\t\t} else {\n\t\t\tstatusItem.text = l10n.t('Unable to compute used schemas: No document');\n\t\t\tstatusItem.detail = undefined;\n\t\t\tstatusItem.command = undefined;\n\t\t}\n\t}\n\n\tupdateLanguageStatus();\n\n\treturn Disposable.from(statusItem, activeEditorListener, showSchemasCommand);\n}\n\nexport function createLimitStatusItem(newItem: (limit: number) => Disposable) {\n\tlet statusItem: Disposable | undefined;\n\tconst activeLimits: Map<TextDocument, number> = new Map();\n\n\tconst toDispose: Disposable[] = [];\n\ttoDispose.push(window.onDidChangeActiveTextEditor(textEditor => {\n\t\tstatusItem?.dispose();\n\t\tstatusItem = undefined;\n\t\tconst doc = textEditor?.document;\n\t\tif (doc) {\n\t\t\tconst limit = activeLimits.get(doc);\n\t\t\tif (limit !== undefined) {\n\t\t\t\tstatusItem = newItem(limit);\n\t\t\t}\n\t\t}\n\t}));\n\ttoDispose.push(workspace.onDidCloseTextDocument(document => {\n\t\tactiveLimits.delete(document);\n\t}));\n\n\tfunction update(document: TextDocument, limitApplied: number | false) {\n\t\tif (limitApplied === false) {\n\t\t\tactiveLimits.delete(document);\n\t\t\tif (statusItem && document === window.activeTextEditor?.document) {\n\t\t\t\tstatusItem.dispose();\n\t\t\t\tstatusItem = undefined;\n\t\t\t}\n\t\t} else {\n\t\t\tactiveLimits.set(document, limitApplied);\n\t\t\tif (document === window.activeTextEditor?.document) {\n\t\t\t\tif (!statusItem || limitApplied !== activeLimits.get(document)) {\n\t\t\t\t\tstatusItem?.dispose();\n\t\t\t\t\tstatusItem = newItem(limitApplied);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\tupdate,\n\t\tdispose() {\n\t\t\tstatusItem?.dispose();\n\t\t\ttoDispose.forEach(d => d.dispose());\n\t\t\ttoDispose.length = 0;\n\t\t\tstatusItem = undefined;\n\t\t\tactiveLimits.clear();\n\t\t}\n\t};\n}\n\nconst openSettingsCommand = 'workbench.action.openSettings';\nconst configureSettingsLabel = l10n.t('Configure');\n\nexport function createDocumentSymbolsLimitItem(documentSelector: DocumentSelector, settingId: string, limit: number): Disposable {\n\tconst statusItem = languages.createLanguageStatusItem('json.documentSymbolsStatus', documentSelector);\n\tstatusItem.name = l10n.t('JSON Outline Status');\n\tstatusItem.severity = LanguageStatusSeverity.Warning;\n\tstatusItem.text = l10n.t('Outline');\n\tstatusItem.detail = l10n.t('only {0} document symbols shown for performance reasons', limit);\n\tstatusItem.command = { command: openSettingsCommand, arguments: [settingId], title: configureSettingsLabel };\n\treturn Disposable.from(statusItem);\n}\n\n\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inlay hints in a document. The request's parameter is of\n * type {@link InlayHintsParams}, the response is of type\n * {@link InlayHint InlayHint[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintRequest;\n(function (InlayHintRequest) {\n    InlayHintRequest.method = 'textDocument/inlayHint';\n    InlayHintRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintRequest.type = new messages_1.ProtocolRequestType(InlayHintRequest.method);\n    InlayHintRequest.capabilities = messages_1.CM.create('textDocument.inlayHint', 'inlayHintProvider');\n})(InlayHintRequest || (exports.InlayHintRequest = InlayHintRequest = {}));\n/**\n * A request to resolve additional properties for an inlay hint.\n * The request's parameter is of type {@link InlayHint}, the response is\n * of type {@link InlayHint} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintResolveRequest;\n(function (InlayHintResolveRequest) {\n    InlayHintResolveRequest.method = 'inlayHint/resolve';\n    InlayHintResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintResolveRequest.type = new messages_1.ProtocolRequestType(InlayHintResolveRequest.method);\n    InlayHintResolveRequest.capabilities = messages_1.CM.create('textDocument.inlayHint.resolveSupport', 'inlayHintProvider.resolveProvider');\n})(InlayHintResolveRequest || (exports.InlayHintResolveRequest = InlayHintResolveRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlayHintRefreshRequest;\n(function (InlayHintRefreshRequest) {\n    InlayHintRefreshRequest.method = `workspace/inlayHint/refresh`;\n    InlayHintRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlayHintRefreshRequest.type = new messages_1.ProtocolRequestType0(InlayHintRefreshRequest.method);\n    InlayHintRefreshRequest.capabilities = messages_1.CM.create('workspace.inlayHint.refreshSupport', undefined);\n})(InlayHintRefreshRequest || (exports.InlayHintRefreshRequest = InlayHintRefreshRequest = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unescape = void 0;\n/**\n * Un-escape a string that has been escaped with {@link escape}.\n *\n * If the {@link windowsPathsNoEscape} option is used, then square-brace\n * escapes are removed, but not backslash escapes.  For example, it will turn\n * the string `'[*]'` into `*`, but it will not turn `'\\\\*'` into `'*'`,\n * becuase `\\` is a path separator in `windowsPathsNoEscape` mode.\n *\n * When `windowsPathsNoEscape` is not set, then both brace escapes and\n * backslash escapes are removed.\n *\n * Slashes (and backslashes in `windowsPathsNoEscape` mode) cannot be escaped\n * or unescaped.\n */\nconst unescape = (s, { windowsPathsNoEscape = false, } = {}) => {\n    return windowsPathsNoEscape\n        ? s.replace(/\\[([^\\/\\\\])\\]/g, '$1')\n        : s.replace(/((?!\\\\).|^)\\[([^\\/\\\\])\\]/g, '$1$2').replace(/\\\\([^\\/])/g, '$1');\n};\nexports.unescape = unescape;\n//# sourceMappingURL=unescape.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextDocumentContentFeature = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass TextDocumentContentFeature {\n    _client;\n    _registrations = new Map();\n    constructor(client) {\n        this._client = client;\n    }\n    getState() {\n        const registrations = this._registrations.size > 0;\n        return { kind: 'workspace', id: vscode_languageserver_protocol_1.TextDocumentContentRequest.method, registrations };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.TextDocumentContentRequest.type;\n    }\n    getProviders() {\n        const result = [];\n        for (const registration of this._registrations.values()) {\n            result.push(...registration.providers);\n        }\n        return result;\n    }\n    fillClientCapabilities(capabilities) {\n        const textDocumentContent = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'textDocumentContent');\n        textDocumentContent.dynamicRegistration = true;\n    }\n    initialize(capabilities) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.TextDocumentContentRefreshRequest.type, async (params) => {\n            const uri = client.protocol2CodeConverter.asUri(params.uri);\n            for (const registrations of this._registrations.values()) {\n                for (const provider of registrations.providers) {\n                    if (provider.scheme === uri.scheme) {\n                        provider.onDidChangeEmitter.fire(uri);\n                    }\n                }\n            }\n        });\n        if (!capabilities?.workspace?.textDocumentContent) {\n            return;\n        }\n        const capability = capabilities.workspace.textDocumentContent;\n        const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\n        this.register({\n            id: id,\n            registerOptions: capability\n        });\n    }\n    register(data) {\n        const registrations = [];\n        const disposables = [];\n        for (const scheme of data.registerOptions.schemes) {\n            const [disposable, registration] = this.registerTextDocumentContentProvider(scheme);\n            registrations.push(registration);\n            disposables.push(disposable);\n        }\n        this._registrations.set(data.id, { disposable: vscode.Disposable.from(...disposables), providers: registrations });\n    }\n    registerTextDocumentContentProvider(scheme) {\n        const eventEmitter = new vscode.EventEmitter();\n        const provider = {\n            onDidChange: eventEmitter.event,\n            provideTextDocumentContent: (uri, token) => {\n                const client = this._client;\n                const provideTextDocumentContent = (uri, token) => {\n                    const params = {\n                        uri: client.code2ProtocolConverter.asUri(uri)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.TextDocumentContentRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return result.text;\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.TextDocumentContentRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideTextDocumentContent\n                    ? middleware.provideTextDocumentContent(uri, token, provideTextDocumentContent)\n                    : provideTextDocumentContent(uri, token);\n            }\n        };\n        return [vscode.workspace.registerTextDocumentContentProvider(scheme, provider), { scheme, onDidChangeEmitter: eventEmitter, provider }];\n    }\n    unregister(id) {\n        const registration = this._registrations.get(id);\n        if (registration !== undefined) {\n            this._registrations.delete(id);\n            registration.disposable.dispose();\n        }\n    }\n    clear() {\n        this._registrations.forEach((registration) => {\n            registration.disposable.dispose();\n        });\n        this._registrations.clear();\n    }\n}\nexports.TextDocumentContentFeature = TextDocumentContentFeature;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = exports.LinkedMap = exports.Touch = void 0;\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch || (exports.Touch = Touch = {}));\nclass LinkedMap {\n    [Symbol.toStringTag] = 'LinkedMap';\n    _map;\n    _head;\n    _tail;\n    _size;\n    _state;\n    constructor() {\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        return this._head?.value;\n    }\n    get last() {\n        return this._tail?.value;\n    }\n    before(key) {\n        const item = this._map.get(key);\n        return item ? item.previous?.value : undefined;\n    }\n    after(key) {\n        const item = this._map.get(key);\n        return item ? item.next?.value : undefined;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    _limit;\n    _ratio;\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProtocolDiagnostic = exports.DiagnosticCode = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst Is = __importStar(require(\"./utils/is\"));\nvar DiagnosticCode;\n(function (DiagnosticCode) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && (Is.number(candidate.value) || Is.string(candidate.value)) && Is.string(candidate.target);\n    }\n    DiagnosticCode.is = is;\n})(DiagnosticCode || (exports.DiagnosticCode = DiagnosticCode = {}));\nclass ProtocolDiagnostic extends vscode.Diagnostic {\n    data;\n    hasDiagnosticCode;\n    constructor(range, message, severity, data) {\n        super(range, message, severity);\n        this.data = data;\n        this.hasDiagnosticCode = false;\n    }\n}\nexports.ProtocolDiagnostic = ProtocolDiagnostic;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.escape = void 0;\n/**\n * Escape all magic characters in a glob pattern.\n *\n * If the {@link windowsPathsNoEscape | GlobOptions.windowsPathsNoEscape}\n * option is used, then characters are escaped by wrapping in `[]`, because\n * a magic character wrapped in a character class can only be satisfied by\n * that exact character.  In this mode, `\\` is _not_ escaped, because it is\n * not interpreted as a magic character, but instead as a path separator.\n */\nconst escape = (s, { windowsPathsNoEscape = false, } = {}) => {\n    // don't need to escape +@! because we escape the parens\n    // that make those magic, and escaping ! as [!] isn't valid,\n    // because [!]] is a valid glob class meaning not ']'.\n    return windowsPathsNoEscape\n        ? s.replace(/[?*()[\\]]/g, '[$&]')\n        : s.replace(/[?*()[\\]\\\\]/g, '\\\\$&');\n};\nexports.escape = escape;\n//# sourceMappingURL=escape.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = void 0;\nconst cancellation_1 = require(\"./cancellation\");\nvar CancellationState;\n(function (CancellationState) {\n    CancellationState.Continue = 0;\n    CancellationState.Cancelled = 1;\n})(CancellationState || (CancellationState = {}));\nclass SharedArraySenderStrategy {\n    buffers;\n    constructor() {\n        this.buffers = new Map();\n    }\n    enableCancellation(request) {\n        if (request.id === null) {\n            return;\n        }\n        const buffer = new SharedArrayBuffer(4);\n        const data = new Int32Array(buffer, 0, 1);\n        data[0] = CancellationState.Continue;\n        this.buffers.set(request.id, buffer);\n        request.$cancellationData = buffer;\n    }\n    async sendCancellation(_conn, id) {\n        const buffer = this.buffers.get(id);\n        if (buffer === undefined) {\n            return;\n        }\n        const data = new Int32Array(buffer, 0, 1);\n        Atomics.store(data, 0, CancellationState.Cancelled);\n    }\n    cleanup(id) {\n        this.buffers.delete(id);\n    }\n    dispose() {\n        this.buffers.clear();\n    }\n}\nexports.SharedArraySenderStrategy = SharedArraySenderStrategy;\nclass SharedArrayBufferCancellationToken {\n    data;\n    constructor(buffer) {\n        this.data = new Int32Array(buffer, 0, 1);\n    }\n    get isCancellationRequested() {\n        return Atomics.load(this.data, 0) === CancellationState.Cancelled;\n    }\n    get onCancellationRequested() {\n        throw new Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`);\n    }\n}\nclass SharedArrayBufferCancellationTokenSource {\n    token;\n    constructor(buffer) {\n        this.token = new SharedArrayBufferCancellationToken(buffer);\n    }\n    cancel() {\n    }\n    dispose() {\n    }\n}\nclass SharedArrayReceiverStrategy {\n    kind = 'request';\n    createCancellationTokenSource(request) {\n        const buffer = request.$cancellationData;\n        if (buffer === undefined) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n        return new SharedArrayBufferCancellationTokenSource(buffer);\n    }\n}\nexports.SharedArrayReceiverStrategy = SharedArrayReceiverStrategy;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = exports.Delayer = void 0;\nexports.setTestMode = setTestMode;\nexports.clearTestMode = clearTestMode;\nexports.map = map;\nexports.mapAsync = mapAsync;\nexports.forEach = forEach;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nclass Delayer {\n    defaultDelay;\n    timeout;\n    completionPromise;\n    onSuccess;\n    task;\n    constructor(defaultDelay) {\n        this.defaultDelay = defaultDelay;\n        this.timeout = undefined;\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n    }\n    trigger(task, delay = this.defaultDelay) {\n        this.task = task;\n        if (delay >= 0) {\n            this.cancelTimeout();\n        }\n        if (!this.completionPromise) {\n            this.completionPromise = new Promise((resolve) => {\n                this.onSuccess = resolve;\n            }).then(() => {\n                this.completionPromise = undefined;\n                this.onSuccess = undefined;\n                const result = this.task();\n                this.task = undefined;\n                return result;\n            });\n        }\n        if (delay >= 0 || this.timeout === void 0) {\n            this.timeout = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n                this.timeout = undefined;\n                this.onSuccess(undefined);\n            }, delay >= 0 ? delay : this.defaultDelay);\n        }\n        return this.completionPromise;\n    }\n    forceDelivery() {\n        if (!this.completionPromise) {\n            return undefined;\n        }\n        this.cancelTimeout();\n        const result = this.task();\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n        return result;\n    }\n    isTriggered() {\n        return this.timeout !== undefined;\n    }\n    cancel() {\n        this.cancelTimeout();\n        this.completionPromise = undefined;\n    }\n    cancelTimeout() {\n        if (this.timeout !== undefined) {\n            this.timeout.dispose();\n            this.timeout = undefined;\n        }\n    }\n}\nexports.Delayer = Delayer;\nclass Semaphore {\n    _capacity;\n    _active;\n    _waiting;\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\nlet $test = false;\nfunction setTestMode() {\n    $test = true;\n}\nfunction clearTestMode() {\n    $test = false;\n}\nconst defaultYieldTimeout = 15 /*ms*/;\nclass Timer {\n    yieldAfter;\n    startTime;\n    counter;\n    total;\n    counterInterval;\n    constructor(yieldAfter = defaultYieldTimeout) {\n        this.yieldAfter = $test === true ? Math.max(yieldAfter, 2) : Math.max(yieldAfter, defaultYieldTimeout);\n        this.startTime = Date.now();\n        this.counter = 0;\n        this.total = 0;\n        // start with a counter interval of 1.\n        this.counterInterval = 1;\n    }\n    start() {\n        this.counter = 0;\n        this.total = 0;\n        this.counterInterval = 1;\n        this.startTime = Date.now();\n    }\n    shouldYield() {\n        if (++this.counter >= this.counterInterval) {\n            const timeTaken = Date.now() - this.startTime;\n            const timeLeft = Math.max(0, this.yieldAfter - timeTaken);\n            this.total += this.counter;\n            this.counter = 0;\n            if (timeTaken >= this.yieldAfter || timeLeft <= 1) {\n                // Yield also if time left <= 1 since we compute the counter\n                // for max < 2 ms.\n                // Start with interval 1 again. We could do some calculation\n                // with using 80% of the last counter however other things (GC)\n                // affect the timing heavily since we have small timings (1 - 15ms).\n                this.counterInterval = 1;\n                this.total = 0;\n                return true;\n            }\n            else {\n                // Only increase the counter until we have spent <= 2 ms. Increasing\n                // the counter further is very fragile since timing is influenced\n                // by other things and can increase the counter too much. This will result\n                // that we yield in average after [14 - 16]ms.\n                switch (timeTaken) {\n                    case 0:\n                    case 1:\n                        this.counterInterval = this.total * 2;\n                        break;\n                }\n            }\n        }\n        return false;\n    }\n}\nasync function map(items, func, token, options) {\n    if (items.length === 0) {\n        return [];\n    }\n    const result = new Array(items.length);\n    const timer = new Timer(options?.yieldAfter);\n    function convertBatch(start) {\n        timer.start();\n        for (let i = start; i < items.length; i++) {\n            result[i] = func(items[i]);\n            if (timer.shouldYield()) {\n                options?.yieldCallback && options.yieldCallback();\n                return i + 1;\n            }\n        }\n        return -1;\n    }\n    // Convert the first batch sync on the same frame.\n    let index = convertBatch(0);\n    while (index !== -1) {\n        if (token !== undefined && token.isCancellationRequested) {\n            break;\n        }\n        index = await new Promise((resolve) => {\n            (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => {\n                if (token !== undefined && token.isCancellationRequested) {\n                    resolve(-1);\n                }\n                else {\n                    resolve(convertBatch(index));\n                }\n            });\n        });\n    }\n    return result;\n}\nasync function mapAsync(items, func, token, options) {\n    if (items.length === 0) {\n        return [];\n    }\n    const result = new Array(items.length);\n    const timer = new Timer(options?.yieldAfter);\n    async function convertBatch(start) {\n        timer.start();\n        for (let i = start; i < items.length; i++) {\n            result[i] = await func(items[i], token);\n            if (timer.shouldYield()) {\n                options?.yieldCallback && options.yieldCallback();\n                return i + 1;\n            }\n        }\n        return -1;\n    }\n    let index = await convertBatch(0);\n    while (index !== -1) {\n        if (token !== undefined && token.isCancellationRequested) {\n            break;\n        }\n        index = await new Promise((resolve) => {\n            (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => {\n                if (token !== undefined && token.isCancellationRequested) {\n                    resolve(-1);\n                }\n                else {\n                    resolve(convertBatch(index));\n                }\n            });\n        });\n    }\n    return result;\n}\nasync function forEach(items, func, token, options) {\n    if (items.length === 0) {\n        return;\n    }\n    const timer = new Timer(options?.yieldAfter);\n    function runBatch(start) {\n        timer.start();\n        for (let i = start; i < items.length; i++) {\n            func(items[i]);\n            if (timer.shouldYield()) {\n                options?.yieldCallback && options.yieldCallback();\n                return i + 1;\n            }\n        }\n        return -1;\n    }\n    // Convert the first batch sync on the same frame.\n    let index = runBatch(0);\n    while (index !== -1) {\n        if (token !== undefined && token.isCancellationRequested) {\n            break;\n        }\n        index = await new Promise((resolve) => {\n            (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => {\n                if (token !== undefined && token.isCancellationRequested) {\n                    resolve(-1);\n                }\n                else {\n                    resolve(runBatch(index));\n                }\n            });\n        });\n    }\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressPart = void 0;\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = __importStar(require(\"./utils/is\"));\nclass ProgressPart {\n    _client;\n    _token;\n    _infinite;\n    _reported;\n    // listener for LSP progress messages. Set in constructor.\n    _lspProgressDisposable;\n    // VS Code progress state. Set in Window.withProgress callback.\n    _progress;\n    _cancellationToken;\n    _tokenDisposable;\n    _resolve;\n    _reject;\n    constructor(_client, _token, done) {\n        this._client = _client;\n        this._token = _token;\n        this._reported = 0;\n        this._infinite = false;\n        this._lspProgressDisposable = this._client.onProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, (value) => {\n            switch (value.kind) {\n                case 'begin':\n                    this.begin(value);\n                    break;\n                case 'report':\n                    this.report(value);\n                    break;\n                case 'end':\n                    this.done();\n                    done && done(this);\n                    break;\n            }\n        });\n    }\n    begin(params) {\n        this._infinite = params.percentage === undefined;\n        // the progress as already been marked as done / canceled. Ignore begin call\n        if (this._lspProgressDisposable === undefined) {\n            return;\n        }\n        // Since we don't use commands this will be a silent window progress with a hidden notification.\n        void vscode_1.window.withProgress({ location: vscode_1.ProgressLocation.Window, cancellable: params.cancellable, title: params.title }, async (progress, cancellationToken) => {\n            // the progress as already been marked as done / canceled. Ignore begin call\n            if (this._lspProgressDisposable === undefined) {\n                return;\n            }\n            this._progress = progress;\n            this._cancellationToken = cancellationToken;\n            this._tokenDisposable = this._cancellationToken.onCancellationRequested(() => {\n                this._client.sendNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, { token: this._token });\n            });\n            this.report(params);\n            return new Promise((resolve, reject) => {\n                this._resolve = resolve;\n                this._reject = reject;\n            });\n        });\n    }\n    report(params) {\n        if (this._infinite && Is.string(params.message)) {\n            this._progress !== undefined && this._progress.report({ message: params.message });\n        }\n        else if (Is.number(params.percentage)) {\n            const percentage = Math.max(0, Math.min(params.percentage, 100));\n            const delta = Math.max(0, percentage - this._reported);\n            this._reported += delta;\n            this._progress !== undefined && this._progress.report({ message: params.message, increment: delta });\n        }\n    }\n    cancel() {\n        this.cleanup();\n        if (this._reject !== undefined) {\n            this._reject();\n            this._resolve = undefined;\n            this._reject = undefined;\n        }\n    }\n    done() {\n        this.cleanup();\n        if (this._resolve !== undefined) {\n            this._resolve();\n            this._resolve = undefined;\n            this._reject = undefined;\n        }\n    }\n    cleanup() {\n        if (this._lspProgressDisposable !== undefined) {\n            this._lspProgressDisposable.dispose();\n            this._lspProgressDisposable = undefined;\n        }\n        if (this._tokenDisposable !== undefined) {\n            this._tokenDisposable.dispose();\n            this._tokenDisposable = undefined;\n        }\n        this._progress = undefined;\n        this._cancellationToken = undefined;\n    }\n}\nexports.ProgressPart = ProgressPart;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorPresentationRequest = exports.DocumentColorRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to list all color symbols found in a given text document. The request's\n * parameter is of type {@link DocumentColorParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentColorRequest;\n(function (DocumentColorRequest) {\n    DocumentColorRequest.method = 'textDocument/documentColor';\n    DocumentColorRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\n    DocumentColorRequest.capabilities = messages_1.CM.create('textDocument.colorProvider', 'colorProvider');\n})(DocumentColorRequest || (exports.DocumentColorRequest = DocumentColorRequest = {}));\n/**\n * A request to list all presentation for a color. The request's\n * parameter is of type {@link ColorPresentationParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar ColorPresentationRequest;\n(function (ColorPresentationRequest) {\n    ColorPresentationRequest.method = 'textDocument/colorPresentation';\n    ColorPresentationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType(ColorPresentationRequest.method);\n    ColorPresentationRequest.capabilities = messages_1.CM.create('textDocument.colorProvider', 'colorProvider');\n})(ColorPresentationRequest || (exports.ColorPresentationRequest = ColorPresentationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nvar WorkDoneProgress;\n(function (WorkDoneProgress) {\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\n    function is(value) {\n        return value === WorkDoneProgress.type;\n    }\n    WorkDoneProgress.is = is;\n})(WorkDoneProgress || (exports.WorkDoneProgress = WorkDoneProgress = {}));\n/**\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\n * reporting from the server.\n */\nvar WorkDoneProgressCreateRequest;\n(function (WorkDoneProgressCreateRequest) {\n    WorkDoneProgressCreateRequest.method = 'window/workDoneProgress/create';\n    WorkDoneProgressCreateRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType(WorkDoneProgressCreateRequest.method);\n    WorkDoneProgressCreateRequest.capabilities = messages_1.CM.create('window.workDoneProgress', undefined);\n})(WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = WorkDoneProgressCreateRequest = {}));\n/**\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\n * initiated on the server side.\n */\nvar WorkDoneProgressCancelNotification;\n(function (WorkDoneProgressCancelNotification) {\n    WorkDoneProgressCancelNotification.method = 'window/workDoneProgress/cancel';\n    WorkDoneProgressCancelNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType(WorkDoneProgressCancelNotification.method);\n})(WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = WorkDoneProgressCancelNotification = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass ProtocolTypeHierarchyItem extends code.TypeHierarchyItem {\n    data;\n    constructor(kind, name, detail, uri, range, selectionRange, data) {\n        super(kind, name, detail, uri, range, selectionRange);\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nexports.default = ProtocolTypeHierarchyItem;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Return a hash value for an object.\n */\nexport function hash(obj: any, hashVal = 0): number {\n\tswitch (typeof obj) {\n\t\tcase 'object':\n\t\t\tif (obj === null) {\n\t\t\t\treturn numberHash(349, hashVal);\n\t\t\t} else if (Array.isArray(obj)) {\n\t\t\t\treturn arrayHash(obj, hashVal);\n\t\t\t}\n\t\t\treturn objectHash(obj, hashVal);\n\t\tcase 'string':\n\t\t\treturn stringHash(obj, hashVal);\n\t\tcase 'boolean':\n\t\t\treturn booleanHash(obj, hashVal);\n\t\tcase 'number':\n\t\t\treturn numberHash(obj, hashVal);\n\t\tcase 'undefined':\n\t\t\treturn 937 * 31;\n\t\tdefault:\n\t\t\treturn numberHash(obj, 617);\n\t}\n}\n\nfunction numberHash(val: number, initialHashVal: number): number {\n\treturn (((initialHashVal << 5) - initialHashVal) + val) | 0;  // hashVal * 31 + ch, keep as int32\n}\n\nfunction booleanHash(b: boolean, initialHashVal: number): number {\n\treturn numberHash(b ? 433 : 863, initialHashVal);\n}\n\nfunction stringHash(s: string, hashVal: number) {\n\thashVal = numberHash(149417, hashVal);\n\tfor (let i = 0, length = s.length; i < length; i++) {\n\t\thashVal = numberHash(s.charCodeAt(i), hashVal);\n\t}\n\treturn hashVal;\n}\n\nfunction arrayHash(arr: any[], initialHashVal: number): number {\n\tinitialHashVal = numberHash(104579, initialHashVal);\n\treturn arr.reduce((hashVal, item) => hash(item, hashVal), initialHashVal);\n}\n\nfunction objectHash(obj: any, initialHashVal: number): number {\n\tinitialHashVal = numberHash(181387, initialHashVal);\n\treturn Object.keys(obj).sort().reduce((hashVal, key) => {\n\t\thashVal = stringHash(key, hashVal);\n\t\treturn hash(obj[key], hashVal);\n\t}, initialHashVal);\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceFoldersFeature = void 0;\nexports.arrayDiff = arrayDiff;\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nfunction access(target, key) {\n    if (target === undefined || target === null) {\n        return undefined;\n    }\n    return target[key];\n}\nfunction arrayDiff(left, right) {\n    return left.filter(element => right.indexOf(element) < 0);\n}\nclass WorkspaceFoldersFeature {\n    _client;\n    _listeners;\n    _initialFolders;\n    constructor(client) {\n        this._client = client;\n        this._listeners = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._listeners.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\n    }\n    fillInitializeParams(params) {\n        const folders = vscode_1.workspace.workspaceFolders;\n        this.initializeWithFolders(folders);\n        if (folders === void 0) {\n            params.workspaceFolders = null;\n        }\n        else {\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\n        }\n    }\n    initializeWithFolders(currentWorkspaceFolders) {\n        this._initialFolders = currentWorkspaceFolders;\n    }\n    fillClientCapabilities(capabilities) {\n        capabilities.workspace = capabilities.workspace || {};\n        capabilities.workspace.workspaceFolders = true;\n    }\n    initialize(capabilities) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\n            const workspaceFolders = () => {\n                const folders = vscode_1.workspace.workspaceFolders;\n                if (folders === undefined) {\n                    return null;\n                }\n                const result = folders.map((folder) => {\n                    return this.asProtocol(folder);\n                });\n                return result;\n            };\n            const middleware = client.middleware.workspace;\n            return middleware && middleware.workspaceFolders\n                ? middleware.workspaceFolders(token, workspaceFolders)\n                : workspaceFolders(token);\n        });\n        const value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\n        let id;\n        if (typeof value === 'string') {\n            id = value;\n        }\n        else if (value === true) {\n            id = UUID.generateUuid();\n        }\n        if (id) {\n            this.register({ id: id, registerOptions: undefined });\n        }\n    }\n    sendInitialEvent(currentWorkspaceFolders) {\n        let promise;\n        if (this._initialFolders && currentWorkspaceFolders) {\n            const removed = arrayDiff(this._initialFolders, currentWorkspaceFolders);\n            const added = arrayDiff(currentWorkspaceFolders, this._initialFolders);\n            if (added.length > 0 || removed.length > 0) {\n                promise = this.doSendEvent(added, removed);\n            }\n        }\n        else if (this._initialFolders) {\n            promise = this.doSendEvent([], this._initialFolders);\n        }\n        else if (currentWorkspaceFolders) {\n            promise = this.doSendEvent(currentWorkspaceFolders, []);\n        }\n        if (promise !== undefined) {\n            promise.catch((error) => {\n                this._client.error(`Sending notification ${vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type.method} failed`, error);\n            });\n        }\n    }\n    doSendEvent(addedFolders, removedFolders) {\n        const params = {\n            event: {\n                added: addedFolders.map(folder => this.asProtocol(folder)),\n                removed: removedFolders.map(folder => this.asProtocol(folder))\n            }\n        };\n        return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\n    }\n    register(data) {\n        const id = data.id;\n        const client = this._client;\n        const disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\n            const didChangeWorkspaceFolders = (event) => {\n                return this.doSendEvent(event.added, event.removed);\n            };\n            const middleware = client.middleware.workspace;\n            const promise = middleware && middleware.didChangeWorkspaceFolders\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\n                : didChangeWorkspaceFolders(event);\n            promise.catch((error) => {\n                this._client.error(`Sending notification ${vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type.method} failed`, error);\n            });\n        });\n        this._listeners.set(id, disposable);\n        this.sendInitialEvent(vscode_1.workspace.workspaceFolders);\n    }\n    unregister(id) {\n        const disposable = this._listeners.get(id);\n        if (disposable === void 0) {\n            return;\n        }\n        this._listeners.delete(id);\n        disposable.dispose();\n    }\n    clear() {\n        for (const disposable of this._listeners.values()) {\n            disposable.dispose();\n        }\n        this._listeners.clear();\n    }\n    asProtocol(workspaceFolder) {\n        if (workspaceFolder === void 0) {\n            return null;\n        }\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\n    }\n}\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.DidRenameFilesNotification = exports.WillRenameFilesRequest = exports.DidCreateFilesNotification = exports.WillCreateFilesRequest = exports.FileOperationPatternKind = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A pattern kind describing if a glob pattern matches a file a folder or\n * both.\n *\n * @since 3.16.0\n */\nvar FileOperationPatternKind;\n(function (FileOperationPatternKind) {\n    /**\n     * The pattern matches a file only.\n     */\n    FileOperationPatternKind.file = 'file';\n    /**\n     * The pattern matches a folder only.\n     */\n    FileOperationPatternKind.folder = 'folder';\n})(FileOperationPatternKind || (exports.FileOperationPatternKind = FileOperationPatternKind = {}));\n/**\n * The will create files request is sent from the client to the server before files are actually\n * created as long as the creation is triggered from within the client.\n *\n * The request can return a `WorkspaceEdit` which will be applied to workspace before the\n * files are created. Hence the `WorkspaceEdit` can not manipulate the content of the file\n * to be created.\n *\n * @since 3.16.0\n */\nvar WillCreateFilesRequest;\n(function (WillCreateFilesRequest) {\n    WillCreateFilesRequest.method = 'workspace/willCreateFiles';\n    WillCreateFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillCreateFilesRequest.type = new messages_1.ProtocolRequestType(WillCreateFilesRequest.method);\n    WillCreateFilesRequest.capabilities = messages_1.CM.create('workspace.fileOperations.willCreate', 'workspace.fileOperations.willCreate');\n})(WillCreateFilesRequest || (exports.WillCreateFilesRequest = WillCreateFilesRequest = {}));\n/**\n * The did create files notification is sent from the client to the server when\n * files were created from within the client.\n *\n * @since 3.16.0\n */\nvar DidCreateFilesNotification;\n(function (DidCreateFilesNotification) {\n    DidCreateFilesNotification.method = 'workspace/didCreateFiles';\n    DidCreateFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCreateFilesNotification.type = new messages_1.ProtocolNotificationType(DidCreateFilesNotification.method);\n    DidCreateFilesNotification.capabilities = messages_1.CM.create('workspace.fileOperations.didCreate', 'workspace.fileOperations.didCreate');\n})(DidCreateFilesNotification || (exports.DidCreateFilesNotification = DidCreateFilesNotification = {}));\n/**\n * The will rename files request is sent from the client to the server before files are actually\n * renamed as long as the rename is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar WillRenameFilesRequest;\n(function (WillRenameFilesRequest) {\n    WillRenameFilesRequest.method = 'workspace/willRenameFiles';\n    WillRenameFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillRenameFilesRequest.type = new messages_1.ProtocolRequestType(WillRenameFilesRequest.method);\n    WillRenameFilesRequest.capabilities = messages_1.CM.create('workspace.fileOperations.willRename', 'workspace.fileOperations.willRename');\n})(WillRenameFilesRequest || (exports.WillRenameFilesRequest = WillRenameFilesRequest = {}));\n/**\n * The did rename files notification is sent from the client to the server when\n * files were renamed from within the client.\n *\n * @since 3.16.0\n */\nvar DidRenameFilesNotification;\n(function (DidRenameFilesNotification) {\n    DidRenameFilesNotification.method = 'workspace/didRenameFiles';\n    DidRenameFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidRenameFilesNotification.type = new messages_1.ProtocolNotificationType(DidRenameFilesNotification.method);\n    DidRenameFilesNotification.capabilities = messages_1.CM.create('workspace.fileOperations.didRename', 'workspace.fileOperations.didRename');\n})(DidRenameFilesNotification || (exports.DidRenameFilesNotification = DidRenameFilesNotification = {}));\n/**\n * The will delete files request is sent from the client to the server before files are actually\n * deleted as long as the deletion is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar DidDeleteFilesNotification;\n(function (DidDeleteFilesNotification) {\n    DidDeleteFilesNotification.method = 'workspace/didDeleteFiles';\n    DidDeleteFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidDeleteFilesNotification.type = new messages_1.ProtocolNotificationType(DidDeleteFilesNotification.method);\n    DidDeleteFilesNotification.capabilities = messages_1.CM.create('workspace.fileOperations.didDelete', 'workspace.fileOperations.didDelete');\n})(DidDeleteFilesNotification || (exports.DidDeleteFilesNotification = DidDeleteFilesNotification = {}));\n/**\n * The did delete files notification is sent from the client to the server when\n * files were deleted from within the client.\n *\n * @since 3.16.0\n */\nvar WillDeleteFilesRequest;\n(function (WillDeleteFilesRequest) {\n    WillDeleteFilesRequest.method = 'workspace/willDeleteFiles';\n    WillDeleteFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillDeleteFilesRequest.type = new messages_1.ProtocolRequestType(WillDeleteFilesRequest.method);\n    WillDeleteFilesRequest.capabilities = messages_1.CM.create('workspace.fileOperations.willDelete', 'workspace.fileOperations.willDelete');\n})(WillDeleteFilesRequest || (exports.WillDeleteFilesRequest = WillDeleteFilesRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.CallHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `CallHierarchyItem` in a document at a given position.\n * Can be used as an input to an incoming or outgoing call hierarchy.\n *\n * @since 3.16.0\n */\nvar CallHierarchyPrepareRequest;\n(function (CallHierarchyPrepareRequest) {\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\n    CallHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\n    CallHierarchyPrepareRequest.capabilities = messages_1.CM.create('textDocument.callHierarchy', 'callHierarchyProvider');\n})(CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = CallHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyIncomingCallsRequest;\n(function (CallHierarchyIncomingCallsRequest) {\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\n    CallHierarchyIncomingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\n})(CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = CallHierarchyIncomingCallsRequest = {}));\n/**\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyOutgoingCallsRequest;\n(function (CallHierarchyOutgoingCallsRequest) {\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\n    CallHierarchyOutgoingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\n})(CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = CallHierarchyOutgoingCallsRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolean = boolean;\nexports.string = string;\nexports.number = number;\nexports.error = error;\nexports.func = func;\nexports.array = array;\nexports.stringArray = stringArray;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nfunction error(value) {\n    return value instanceof Error;\n}\nfunction func(value) {\n    return typeof value === 'function';\n}\nfunction array(value) {\n    return Array.isArray(value);\n}\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FileSystemWatcherFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass FileSystemWatcherFeature {\n    _client;\n    _notifyFileEvent;\n    _watchers;\n    constructor(client, notifyFileEvent) {\n        this._client = client;\n        this._notifyFileEvent = notifyFileEvent;\n        this._watchers = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._watchers.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'didChangeWatchedFiles').relativePatternSupport = true;\n    }\n    initialize(_capabilities, _documentSelector) {\n    }\n    register(data) {\n        if (!Array.isArray(data.registerOptions.watchers)) {\n            return;\n        }\n        const disposables = [];\n        for (const watcher of data.registerOptions.watchers) {\n            const globPattern = this._client.protocol2CodeConverter.asGlobPattern(watcher.globPattern);\n            if (globPattern === undefined) {\n                continue;\n            }\n            let watchCreate = true, watchChange = true, watchDelete = true;\n            if (watcher.kind !== undefined && watcher.kind !== null) {\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) !== 0;\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) !== 0;\n            }\n            const fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(globPattern, !watchCreate, !watchChange, !watchDelete);\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, disposables);\n            disposables.push(fileSystemWatcher);\n        }\n        this._watchers.set(data.id, disposables);\n    }\n    registerRaw(id, fileSystemWatchers) {\n        const disposables = [];\n        for (const fileSystemWatcher of fileSystemWatchers) {\n            this.hookListeners(fileSystemWatcher, true, true, true, disposables);\n        }\n        this._watchers.set(id, disposables);\n    }\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\n        if (watchCreate) {\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\n            }), null, listeners);\n        }\n        if (watchChange) {\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\n            }), null, listeners);\n        }\n        if (watchDelete) {\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\n            }), null, listeners);\n        }\n    }\n    unregister(id) {\n        const disposables = this._watchers.get(id);\n        if (disposables) {\n            this._watchers.delete(id);\n            for (const disposable of disposables) {\n                disposable.dispose();\n            }\n        }\n    }\n    clear() {\n        this._watchers.forEach((disposables) => {\n            for (const disposable of disposables) {\n                disposable.dispose();\n            }\n        });\n        this._watchers.clear();\n    }\n}\nexports.FileSystemWatcherFeature = FileSystemWatcherFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emitter = exports.Event = void 0;\nconst ral_1 = __importDefault(require(\"./ral\"));\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event || (exports.Event = Event = {}));\nclass CallbackList {\n    _callbacks;\n    _contexts;\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                (0, ral_1.default)().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    _options;\n    static _noop = function () { };\n    _event;\n    _callbacks;\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlayHintsFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass InlayHintsFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.InlayHintRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const inlayHint = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'inlayHint');\n        inlayHint.dynamicRegistration = true;\n        inlayHint.resolveSupport = {\n            properties: ['tooltip', 'textEdits', 'label.tooltip', 'label.location', 'label.command']\n        };\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'inlayHint').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        this._client.onRequest(vscode_languageserver_protocol_1.InlayHintRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeInlayHints.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.inlayHintProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeInlayHints: eventEmitter.event,\n            provideInlayHints: (document, viewPort, token) => {\n                const client = this._client;\n                const provideInlayHints = async (document, viewPort, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(viewPort)\n                    };\n                    try {\n                        const values = await client.sendRequest(vscode_languageserver_protocol_1.InlayHintRequest.type, requestParams, token);\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asInlayHints(values, token);\n                    }\n                    catch (error) {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlayHintRequest.type, token, error, null);\n                    }\n                };\n                const middleware = client.middleware;\n                return middleware.provideInlayHints\n                    ? middleware.provideInlayHints(document, viewPort, token, provideInlayHints)\n                    : provideInlayHints(document, viewPort, token);\n            }\n        };\n        provider.resolveInlayHint = options.resolveProvider === true\n            ? (hint, token) => {\n                const client = this._client;\n                const resolveInlayHint = async (item, token) => {\n                    try {\n                        const value = await client.sendRequest(vscode_languageserver_protocol_1.InlayHintResolveRequest.type, client.code2ProtocolConverter.asInlayHint(item), token);\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        const result = client.protocol2CodeConverter.asInlayHint(value, token);\n                        return token.isCancellationRequested ? null : result;\n                    }\n                    catch (error) {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlayHintResolveRequest.type, token, error, null);\n                    }\n                };\n                const middleware = client.middleware;\n                return middleware.resolveInlayHint\n                    ? middleware.resolveInlayHint(hint, token, resolveInlayHint)\n                    : resolveInlayHint(hint, token);\n            }\n            : undefined;\n        return [this.registerProvider(selector, provider), { provider: provider, onDidChangeInlayHints: eventEmitter }];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.InlayHintsFeature = InlayHintsFeature;\n","\"use strict\";\n// translate the various posix character classes into unicode properties\n// this works across all unicode locales\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseClass = void 0;\n// { <posix class>: [<translation>, /u flag required, negated]\nconst posixClasses = {\n    '[:alnum:]': ['\\\\p{L}\\\\p{Nl}\\\\p{Nd}', true],\n    '[:alpha:]': ['\\\\p{L}\\\\p{Nl}', true],\n    '[:ascii:]': ['\\\\x' + '00-\\\\x' + '7f', false],\n    '[:blank:]': ['\\\\p{Zs}\\\\t', true],\n    '[:cntrl:]': ['\\\\p{Cc}', true],\n    '[:digit:]': ['\\\\p{Nd}', true],\n    '[:graph:]': ['\\\\p{Z}\\\\p{C}', true, true],\n    '[:lower:]': ['\\\\p{Ll}', true],\n    '[:print:]': ['\\\\p{C}', true],\n    '[:punct:]': ['\\\\p{P}', true],\n    '[:space:]': ['\\\\p{Z}\\\\t\\\\r\\\\n\\\\v\\\\f', true],\n    '[:upper:]': ['\\\\p{Lu}', true],\n    '[:word:]': ['\\\\p{L}\\\\p{Nl}\\\\p{Nd}\\\\p{Pc}', true],\n    '[:xdigit:]': ['A-Fa-f0-9', false],\n};\n// only need to escape a few things inside of brace expressions\n// escapes: [ \\ ] -\nconst braceEscape = (s) => s.replace(/[[\\]\\\\-]/g, '\\\\$&');\n// escape all regexp magic characters\nconst regexpEscape = (s) => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n// everything has already been escaped, we just have to join\nconst rangesToString = (ranges) => ranges.join('');\n// takes a glob string at a posix brace expression, and returns\n// an equivalent regular expression source, and boolean indicating\n// whether the /u flag needs to be applied, and the number of chars\n// consumed to parse the character class.\n// This also removes out of order ranges, and returns ($.) if the\n// entire class just no good.\nconst parseClass = (glob, position) => {\n    const pos = position;\n    /* c8 ignore start */\n    if (glob.charAt(pos) !== '[') {\n        throw new Error('not in a brace expression');\n    }\n    /* c8 ignore stop */\n    const ranges = [];\n    const negs = [];\n    let i = pos + 1;\n    let sawStart = false;\n    let uflag = false;\n    let escaping = false;\n    let negate = false;\n    let endPos = pos;\n    let rangeStart = '';\n    WHILE: while (i < glob.length) {\n        const c = glob.charAt(i);\n        if ((c === '!' || c === '^') && i === pos + 1) {\n            negate = true;\n            i++;\n            continue;\n        }\n        if (c === ']' && sawStart && !escaping) {\n            endPos = i + 1;\n            break;\n        }\n        sawStart = true;\n        if (c === '\\\\') {\n            if (!escaping) {\n                escaping = true;\n                i++;\n                continue;\n            }\n            // escaped \\ char, fall through and treat like normal char\n        }\n        if (c === '[' && !escaping) {\n            // either a posix class, a collation equivalent, or just a [\n            for (const [cls, [unip, u, neg]] of Object.entries(posixClasses)) {\n                if (glob.startsWith(cls, i)) {\n                    // invalid, [a-[] is fine, but not [a-[:alpha]]\n                    if (rangeStart) {\n                        return ['$.', false, glob.length - pos, true];\n                    }\n                    i += cls.length;\n                    if (neg)\n                        negs.push(unip);\n                    else\n                        ranges.push(unip);\n                    uflag = uflag || u;\n                    continue WHILE;\n                }\n            }\n        }\n        // now it's just a normal character, effectively\n        escaping = false;\n        if (rangeStart) {\n            // throw this range away if it's not valid, but others\n            // can still match.\n            if (c > rangeStart) {\n                ranges.push(braceEscape(rangeStart) + '-' + braceEscape(c));\n            }\n            else if (c === rangeStart) {\n                ranges.push(braceEscape(c));\n            }\n            rangeStart = '';\n            i++;\n            continue;\n        }\n        // now might be the start of a range.\n        // can be either c-d or c-] or c<more...>] or c] at this point\n        if (glob.startsWith('-]', i + 1)) {\n            ranges.push(braceEscape(c + '-'));\n            i += 2;\n            continue;\n        }\n        if (glob.startsWith('-', i + 1)) {\n            rangeStart = c;\n            i += 2;\n            continue;\n        }\n        // not the start of a range, just a single character\n        ranges.push(braceEscape(c));\n        i++;\n    }\n    if (endPos < i) {\n        // didn't see the end of the class, not a valid class,\n        // but might still be valid as a literal match.\n        return ['', false, 0, false];\n    }\n    // if we got no ranges and no negates, then we have a range that\n    // cannot possibly match anything, and that poisons the whole glob\n    if (!ranges.length && !negs.length) {\n        return ['$.', false, glob.length - pos, true];\n    }\n    // if we got one positive range, and it's a single character, then that's\n    // not actually a magic pattern, it's just that one literal character.\n    // we should not treat that as \"magic\", we should just return the literal\n    // character. [_] is a perfectly valid way to escape glob magic chars.\n    if (negs.length === 0 &&\n        ranges.length === 1 &&\n        /^\\\\?.$/.test(ranges[0]) &&\n        !negate) {\n        const r = ranges[0].length === 2 ? ranges[0].slice(-1) : ranges[0];\n        return [regexpEscape(r), false, endPos - pos, false];\n    }\n    const sranges = '[' + (negate ? '^' : '') + rangesToString(ranges) + ']';\n    const snegs = '[' + (negate ? '' : '^') + rangesToString(negs) + ']';\n    const comb = ranges.length && negs.length\n        ? '(' + sranges + '|' + snegs + ')'\n        : ranges.length\n            ? sranges\n            : snegs;\n    return [comb, uflag, endPos - pos, true];\n};\nexports.parseClass = parseClass;\n//# sourceMappingURL=brace-expressions.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeActionRequest = exports.DocumentSymbolRequest = exports.DocumentHighlightRequest = exports.ReferencesRequest = exports.DefinitionRequest = exports.SignatureHelpRequest = exports.SignatureHelpTriggerKind = exports.HoverRequest = exports.CompletionResolveRequest = exports.CompletionRequest = exports.CompletionTriggerKind = exports.PublishDiagnosticsNotification = exports.WatchKind = exports.GlobPattern = exports.RelativePattern = exports.FileChangeType = exports.DidChangeWatchedFilesNotification = exports.WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentNotification = exports.TextDocumentSaveReason = exports.DidSaveTextDocumentNotification = exports.DidCloseTextDocumentNotification = exports.DidChangeTextDocumentNotification = exports.TextDocumentContentChangeEvent = exports.DidOpenTextDocumentNotification = exports.TextDocumentSyncKind = exports.TelemetryEventNotification = exports.LogMessageNotification = exports.ShowMessageRequest = exports.ShowMessageNotification = exports.MessageType = exports.DidChangeConfigurationNotification = exports.ExitNotification = exports.ShutdownRequest = exports.InitializedNotification = exports.InitializeErrorCodes = exports.InitializeRequest = exports.WorkDoneProgressOptions = exports.TextDocumentRegistrationOptions = exports.StaticRegistrationOptions = exports.PositionEncodingKind = exports.RegularExpressionEngineKind = exports.FailureHandlingKind = exports.ResourceOperationKind = exports.UnregistrationRequest = exports.RegistrationRequest = exports.DocumentSelector = exports.NotebookCellTextDocumentFilter = exports.NotebookDocumentFilter = exports.TextDocumentFilter = void 0;\nexports.UniquenessLevel = exports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.WillRenameFilesRequest = exports.DidRenameFilesNotification = exports.WillCreateFilesRequest = exports.DidCreateFilesNotification = exports.FileOperationPatternKind = exports.LinkedEditingRangeRequest = exports.ShowDocumentRequest = exports.SemanticTokensRegistrationType = exports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.TokenFormat = exports.CallHierarchyPrepareRequest = exports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = exports.SelectionRangeRequest = exports.DeclarationRequest = exports.FoldingRangeRefreshRequest = exports.FoldingRangeRequest = exports.ColorPresentationRequest = exports.DocumentColorRequest = exports.ConfigurationRequest = exports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = exports.TypeDefinitionRequest = exports.ImplementationRequest = exports.ApplyWorkspaceEditRequest = exports.ExecuteCommandRequest = exports.PrepareRenameRequest = exports.RenameRequest = exports.PrepareSupportDefaultBehavior = exports.DocumentOnTypeFormattingRequest = exports.DocumentRangesFormattingRequest = exports.DocumentRangeFormattingRequest = exports.DocumentFormattingRequest = exports.DocumentLinkResolveRequest = exports.DocumentLinkRequest = exports.CodeLensRefreshRequest = exports.CodeLensResolveRequest = exports.CodeLensRequest = exports.WorkspaceSymbolResolveRequest = exports.WorkspaceSymbolRequest = exports.CodeActionResolveRequest = void 0;\nexports.TextDocumentContentRefreshRequest = exports.TextDocumentContentRequest = exports.InlineCompletionRequest = exports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = exports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = exports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = exports.InlineValueRefreshRequest = exports.InlineValueRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchySubtypesRequest = exports.TypeHierarchyPrepareRequest = exports.MonikerRequest = exports.MonikerKind = void 0;\nconst messages_1 = require(\"./messages\");\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = __importStar(require(\"./utils/is\"));\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\nObject.defineProperty(exports, \"ImplementationRequest\", { enumerable: true, get: function () { return protocol_implementation_1.ImplementationRequest; } });\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\nObject.defineProperty(exports, \"TypeDefinitionRequest\", { enumerable: true, get: function () { return protocol_typeDefinition_1.TypeDefinitionRequest; } });\nconst protocol_workspaceFolder_1 = require(\"./protocol.workspaceFolder\");\nObject.defineProperty(exports, \"WorkspaceFoldersRequest\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.WorkspaceFoldersRequest; } });\nObject.defineProperty(exports, \"DidChangeWorkspaceFoldersNotification\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.DidChangeWorkspaceFoldersNotification; } });\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\nObject.defineProperty(exports, \"ConfigurationRequest\", { enumerable: true, get: function () { return protocol_configuration_1.ConfigurationRequest; } });\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\nObject.defineProperty(exports, \"DocumentColorRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.DocumentColorRequest; } });\nObject.defineProperty(exports, \"ColorPresentationRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.ColorPresentationRequest; } });\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\nObject.defineProperty(exports, \"FoldingRangeRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRequest; } });\nObject.defineProperty(exports, \"FoldingRangeRefreshRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRefreshRequest; } });\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\nObject.defineProperty(exports, \"DeclarationRequest\", { enumerable: true, get: function () { return protocol_declaration_1.DeclarationRequest; } });\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\nObject.defineProperty(exports, \"SelectionRangeRequest\", { enumerable: true, get: function () { return protocol_selectionRange_1.SelectionRangeRequest; } });\nconst protocol_progress_1 = require(\"./protocol.progress\");\nObject.defineProperty(exports, \"WorkDoneProgress\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgress; } });\nObject.defineProperty(exports, \"WorkDoneProgressCreateRequest\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCreateRequest; } });\nObject.defineProperty(exports, \"WorkDoneProgressCancelNotification\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCancelNotification; } });\nconst protocol_callHierarchy_1 = require(\"./protocol.callHierarchy\");\nObject.defineProperty(exports, \"CallHierarchyIncomingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyIncomingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyOutgoingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyOutgoingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyPrepareRequest; } });\nconst protocol_semanticTokens_1 = require(\"./protocol.semanticTokens\");\nObject.defineProperty(exports, \"TokenFormat\", { enumerable: true, get: function () { return protocol_semanticTokens_1.TokenFormat; } });\nObject.defineProperty(exports, \"SemanticTokensRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRequest; } });\nObject.defineProperty(exports, \"SemanticTokensDeltaRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensDeltaRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRangeRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRangeRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRefreshRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRefreshRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRegistrationType\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRegistrationType; } });\nconst protocol_showDocument_1 = require(\"./protocol.showDocument\");\nObject.defineProperty(exports, \"ShowDocumentRequest\", { enumerable: true, get: function () { return protocol_showDocument_1.ShowDocumentRequest; } });\nconst protocol_linkedEditingRange_1 = require(\"./protocol.linkedEditingRange\");\nObject.defineProperty(exports, \"LinkedEditingRangeRequest\", { enumerable: true, get: function () { return protocol_linkedEditingRange_1.LinkedEditingRangeRequest; } });\nconst protocol_fileOperations_1 = require(\"./protocol.fileOperations\");\nObject.defineProperty(exports, \"FileOperationPatternKind\", { enumerable: true, get: function () { return protocol_fileOperations_1.FileOperationPatternKind; } });\nObject.defineProperty(exports, \"DidCreateFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidCreateFilesNotification; } });\nObject.defineProperty(exports, \"WillCreateFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillCreateFilesRequest; } });\nObject.defineProperty(exports, \"DidRenameFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidRenameFilesNotification; } });\nObject.defineProperty(exports, \"WillRenameFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillRenameFilesRequest; } });\nObject.defineProperty(exports, \"DidDeleteFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidDeleteFilesNotification; } });\nObject.defineProperty(exports, \"WillDeleteFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillDeleteFilesRequest; } });\nconst protocol_moniker_1 = require(\"./protocol.moniker\");\nObject.defineProperty(exports, \"UniquenessLevel\", { enumerable: true, get: function () { return protocol_moniker_1.UniquenessLevel; } });\nObject.defineProperty(exports, \"MonikerKind\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerKind; } });\nObject.defineProperty(exports, \"MonikerRequest\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerRequest; } });\nconst protocol_typeHierarchy_1 = require(\"./protocol.typeHierarchy\");\nObject.defineProperty(exports, \"TypeHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchyPrepareRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySubtypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySubtypesRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySupertypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySupertypesRequest; } });\nconst protocol_inlineValue_1 = require(\"./protocol.inlineValue\");\nObject.defineProperty(exports, \"InlineValueRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRequest; } });\nObject.defineProperty(exports, \"InlineValueRefreshRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRefreshRequest; } });\nconst protocol_inlayHint_1 = require(\"./protocol.inlayHint\");\nObject.defineProperty(exports, \"InlayHintRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRequest; } });\nObject.defineProperty(exports, \"InlayHintResolveRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintResolveRequest; } });\nObject.defineProperty(exports, \"InlayHintRefreshRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRefreshRequest; } });\nconst protocol_diagnostic_1 = require(\"./protocol.diagnostic\");\nObject.defineProperty(exports, \"DiagnosticServerCancellationData\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticServerCancellationData; } });\nObject.defineProperty(exports, \"DocumentDiagnosticReportKind\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticReportKind; } });\nObject.defineProperty(exports, \"DocumentDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticRequest; } });\nObject.defineProperty(exports, \"WorkspaceDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.WorkspaceDiagnosticRequest; } });\nObject.defineProperty(exports, \"DiagnosticRefreshRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticRefreshRequest; } });\nconst protocol_notebook_1 = require(\"./protocol.notebook\");\nObject.defineProperty(exports, \"NotebookCellKind\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellKind; } });\nObject.defineProperty(exports, \"ExecutionSummary\", { enumerable: true, get: function () { return protocol_notebook_1.ExecutionSummary; } });\nObject.defineProperty(exports, \"NotebookCell\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCell; } });\nObject.defineProperty(exports, \"NotebookDocument\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocument; } });\nObject.defineProperty(exports, \"NotebookDocumentSyncRegistrationType\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocumentSyncRegistrationType; } });\nObject.defineProperty(exports, \"DidOpenNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidOpenNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"NotebookCellArrayChange\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellArrayChange; } });\nObject.defineProperty(exports, \"DidChangeNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidChangeNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidSaveNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidSaveNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidCloseNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidCloseNotebookDocumentNotification; } });\nconst protocol_inlineCompletion_1 = require(\"./protocol.inlineCompletion\");\nObject.defineProperty(exports, \"InlineCompletionRequest\", { enumerable: true, get: function () { return protocol_inlineCompletion_1.InlineCompletionRequest; } });\nconst protocol_textDocumentContent_1 = require(\"./protocol.textDocumentContent\");\nObject.defineProperty(exports, \"TextDocumentContentRequest\", { enumerable: true, get: function () { return protocol_textDocumentContent_1.TextDocumentContentRequest; } });\nObject.defineProperty(exports, \"TextDocumentContentRefreshRequest\", { enumerable: true, get: function () { return protocol_textDocumentContent_1.TextDocumentContentRefreshRequest; } });\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * The TextDocumentFilter namespace provides helper functions to work with\n * {@link TextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar TextDocumentFilter;\n(function (TextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate) || (Is.string(candidate.language) || Is.string(candidate.scheme) || GlobPattern.is(candidate.pattern));\n    }\n    TextDocumentFilter.is = is;\n})(TextDocumentFilter || (exports.TextDocumentFilter = TextDocumentFilter = {}));\n/**\n * The NotebookDocumentFilter namespace provides helper functions to work with\n * {@link NotebookDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookDocumentFilter;\n(function (NotebookDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (Is.string(candidate.notebookType) || Is.string(candidate.scheme) || Is.string(candidate.pattern));\n    }\n    NotebookDocumentFilter.is = is;\n})(NotebookDocumentFilter || (exports.NotebookDocumentFilter = NotebookDocumentFilter = {}));\n/**\n * The NotebookCellTextDocumentFilter namespace provides helper functions to work with\n * {@link NotebookCellTextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookCellTextDocumentFilter;\n(function (NotebookCellTextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && (Is.string(candidate.notebook) || NotebookDocumentFilter.is(candidate.notebook))\n            && (candidate.language === undefined || Is.string(candidate.language));\n    }\n    NotebookCellTextDocumentFilter.is = is;\n})(NotebookCellTextDocumentFilter || (exports.NotebookCellTextDocumentFilter = NotebookCellTextDocumentFilter = {}));\n/**\n * The DocumentSelector namespace provides helper functions to work with\n * {@link DocumentSelector}s.\n */\nvar DocumentSelector;\n(function (DocumentSelector) {\n    function is(value) {\n        if (!Array.isArray(value)) {\n            return false;\n        }\n        for (const elem of value) {\n            if (!Is.string(elem) && !TextDocumentFilter.is(elem) && !NotebookCellTextDocumentFilter.is(elem)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    DocumentSelector.is = is;\n})(DocumentSelector || (exports.DocumentSelector = DocumentSelector = {}));\n/**\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\n * handler on the client side.\n */\nvar RegistrationRequest;\n(function (RegistrationRequest) {\n    RegistrationRequest.method = 'client/registerCapability';\n    RegistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    RegistrationRequest.type = new messages_1.ProtocolRequestType(RegistrationRequest.method);\n})(RegistrationRequest || (exports.RegistrationRequest = RegistrationRequest = {}));\n/**\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\n * handler on the client side.\n */\nvar UnregistrationRequest;\n(function (UnregistrationRequest) {\n    UnregistrationRequest.method = 'client/unregisterCapability';\n    UnregistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType(UnregistrationRequest.method);\n})(UnregistrationRequest || (exports.UnregistrationRequest = UnregistrationRequest = {}));\nvar ResourceOperationKind;\n(function (ResourceOperationKind) {\n    /**\n     * Supports creating new files and folders.\n     */\n    ResourceOperationKind.Create = 'create';\n    /**\n     * Supports renaming existing files and folders.\n     */\n    ResourceOperationKind.Rename = 'rename';\n    /**\n     * Supports deleting existing files and folders.\n     */\n    ResourceOperationKind.Delete = 'delete';\n})(ResourceOperationKind || (exports.ResourceOperationKind = ResourceOperationKind = {}));\nvar FailureHandlingKind;\n(function (FailureHandlingKind) {\n    /**\n     * Applying the workspace change is simply aborted if one of the changes provided\n     * fails. All operations executed before the failing operation stay executed.\n     */\n    FailureHandlingKind.Abort = 'abort';\n    /**\n     * All operations are executed transactional. That means they either all\n     * succeed or no changes at all are applied to the workspace.\n     */\n    FailureHandlingKind.Transactional = 'transactional';\n    /**\n     * If the workspace edit contains only textual file changes they are executed transactional.\n     * If resource changes (create, rename or delete file) are part of the change the failure\n     * handling strategy is abort.\n     */\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\n    /**\n     * The client tries to undo the operations already executed. But there is no\n     * guarantee that this is succeeding.\n     */\n    FailureHandlingKind.Undo = 'undo';\n})(FailureHandlingKind || (exports.FailureHandlingKind = FailureHandlingKind = {}));\n/**\n * Regular Expression Engines\n *\n * @since 3.18.0\n * @proposed\n */\nvar RegularExpressionEngineKind;\n(function (RegularExpressionEngineKind) {\n    RegularExpressionEngineKind.ES2020 = 'ES2020';\n})(RegularExpressionEngineKind || (exports.RegularExpressionEngineKind = RegularExpressionEngineKind = {}));\n/**\n * A set of predefined position encoding kinds.\n *\n * @since 3.17.0\n */\nvar PositionEncodingKind;\n(function (PositionEncodingKind) {\n    /**\n     * Character offsets count UTF-8 code units (e.g. bytes).\n     */\n    PositionEncodingKind.UTF8 = 'utf-8';\n    /**\n     * Character offsets count UTF-16 code units.\n     *\n     * This is the default and must always be supported\n     * by servers\n     */\n    PositionEncodingKind.UTF16 = 'utf-16';\n    /**\n     * Character offsets count UTF-32 code units.\n     *\n     * Implementation note: these are the same as Unicode codepoints,\n     * so this `PositionEncodingKind` may also be used for an\n     * encoding-agnostic representation of character offsets.\n     */\n    PositionEncodingKind.UTF32 = 'utf-32';\n})(PositionEncodingKind || (exports.PositionEncodingKind = PositionEncodingKind = {}));\n/**\n * The StaticRegistrationOptions namespace provides helper functions to work with\n * {@link StaticRegistrationOptions} literals.\n */\nvar StaticRegistrationOptions;\n(function (StaticRegistrationOptions) {\n    function hasId(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\n    }\n    StaticRegistrationOptions.hasId = hasId;\n})(StaticRegistrationOptions || (exports.StaticRegistrationOptions = StaticRegistrationOptions = {}));\n/**\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\n * {@link TextDocumentRegistrationOptions} literals.\n */\nvar TextDocumentRegistrationOptions;\n(function (TextDocumentRegistrationOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\n    }\n    TextDocumentRegistrationOptions.is = is;\n})(TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = TextDocumentRegistrationOptions = {}));\n/**\n * The WorkDoneProgressOptions namespace provides helper functions to work with\n * {@link WorkDoneProgressOptions} literals.\n */\nvar WorkDoneProgressOptions;\n(function (WorkDoneProgressOptions) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\n    }\n    WorkDoneProgressOptions.is = is;\n    function hasWorkDoneProgress(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.workDoneProgress);\n    }\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\n})(WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = WorkDoneProgressOptions = {}));\n/**\n * The initialize request is sent from the client to the server.\n * It is sent once as the request after starting up the server.\n * The requests parameter is of type {@link InitializeParams}\n * the response if of type {@link InitializeResult} of a Thenable that\n * resolves to such.\n */\nvar InitializeRequest;\n(function (InitializeRequest) {\n    InitializeRequest.method = 'initialize';\n    InitializeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializeRequest.type = new messages_1.ProtocolRequestType(InitializeRequest.method);\n})(InitializeRequest || (exports.InitializeRequest = InitializeRequest = {}));\n/**\n * Known error codes for an `InitializeErrorCodes`;\n */\nvar InitializeErrorCodes;\n(function (InitializeErrorCodes) {\n    /**\n     * If the protocol version provided by the client can't be handled by the server.\n     *\n     * @deprecated This initialize error got replaced by client capabilities. There is\n     * no version handshake in version 3.0x\n     */\n    InitializeErrorCodes.unknownProtocolVersion = 1;\n})(InitializeErrorCodes || (exports.InitializeErrorCodes = InitializeErrorCodes = {}));\n/**\n * The initialized notification is sent from the client to the\n * server after the client is fully initialized and the server\n * is allowed to send requests from the server to the client.\n */\nvar InitializedNotification;\n(function (InitializedNotification) {\n    InitializedNotification.method = 'initialized';\n    InitializedNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializedNotification.type = new messages_1.ProtocolNotificationType(InitializedNotification.method);\n})(InitializedNotification || (exports.InitializedNotification = InitializedNotification = {}));\n//---- Shutdown Method ----\n/**\n * A shutdown request is sent from the client to the server.\n * It is sent once when the client decides to shutdown the\n * server. The only notification that is sent after a shutdown request\n * is the exit event.\n */\nvar ShutdownRequest;\n(function (ShutdownRequest) {\n    ShutdownRequest.method = 'shutdown';\n    ShutdownRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0(ShutdownRequest.method);\n})(ShutdownRequest || (exports.ShutdownRequest = ShutdownRequest = {}));\n//---- Exit Notification ----\n/**\n * The exit event is sent from the client to the server to\n * ask the server to exit its process.\n */\nvar ExitNotification;\n(function (ExitNotification) {\n    ExitNotification.method = 'exit';\n    ExitNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExitNotification.type = new messages_1.ProtocolNotificationType0(ExitNotification.method);\n})(ExitNotification || (exports.ExitNotification = ExitNotification = {}));\n/**\n * The configuration change notification is sent from the client to the server\n * when the client's configuration has changed. The notification contains\n * the changed configuration as defined by the language client.\n */\nvar DidChangeConfigurationNotification;\n(function (DidChangeConfigurationNotification) {\n    DidChangeConfigurationNotification.method = 'workspace/didChangeConfiguration';\n    DidChangeConfigurationNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType(DidChangeConfigurationNotification.method);\n    DidChangeConfigurationNotification.capabilities = messages_1.CM.create('workspace.didChangeConfiguration', undefined);\n})(DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = DidChangeConfigurationNotification = {}));\n//---- Message show and log notifications ----\n/**\n * The message type\n */\nvar MessageType;\n(function (MessageType) {\n    /**\n     * An error message.\n     */\n    MessageType.Error = 1;\n    /**\n     * A warning message.\n     */\n    MessageType.Warning = 2;\n    /**\n     * An information message.\n     */\n    MessageType.Info = 3;\n    /**\n     * A log message.\n     */\n    MessageType.Log = 4;\n    /**\n     * A debug message.\n     *\n     * @since 3.18.0\n     * @proposed\n     */\n    MessageType.Debug = 5;\n})(MessageType || (exports.MessageType = MessageType = {}));\n/**\n * The show message notification is sent from a server to a client to ask\n * the client to display a particular message in the user interface.\n */\nvar ShowMessageNotification;\n(function (ShowMessageNotification) {\n    ShowMessageNotification.method = 'window/showMessage';\n    ShowMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType(ShowMessageNotification.method);\n    ShowMessageNotification.capabilities = messages_1.CM.create('window.showMessage', undefined);\n})(ShowMessageNotification || (exports.ShowMessageNotification = ShowMessageNotification = {}));\n/**\n * The show message request is sent from the server to the client to show a message\n * and a set of options actions to the user.\n */\nvar ShowMessageRequest;\n(function (ShowMessageRequest) {\n    ShowMessageRequest.method = 'window/showMessageRequest';\n    ShowMessageRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType(ShowMessageRequest.method);\n    ShowMessageRequest.capabilities = messages_1.CM.create('window.showMessage', undefined);\n})(ShowMessageRequest || (exports.ShowMessageRequest = ShowMessageRequest = {}));\n/**\n * The log message notification is sent from the server to the client to ask\n * the client to log a particular message.\n */\nvar LogMessageNotification;\n(function (LogMessageNotification) {\n    LogMessageNotification.method = 'window/logMessage';\n    LogMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType(LogMessageNotification.method);\n})(LogMessageNotification || (exports.LogMessageNotification = LogMessageNotification = {}));\n//---- Telemetry notification\n/**\n * The telemetry event notification is sent from the server to the client to ask\n * the client to log telemetry data.\n */\nvar TelemetryEventNotification;\n(function (TelemetryEventNotification) {\n    TelemetryEventNotification.method = 'telemetry/event';\n    TelemetryEventNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType(TelemetryEventNotification.method);\n})(TelemetryEventNotification || (exports.TelemetryEventNotification = TelemetryEventNotification = {}));\n/**\n * Defines how the host (editor) should sync\n * document changes to the language server.\n */\nvar TextDocumentSyncKind;\n(function (TextDocumentSyncKind) {\n    /**\n     * Documents should not be synced at all.\n     */\n    TextDocumentSyncKind.None = 0;\n    /**\n     * Documents are synced by always sending the full content\n     * of the document.\n     */\n    TextDocumentSyncKind.Full = 1;\n    /**\n     * Documents are synced by sending the full content on open.\n     * After that only incremental updates to the document are\n     * send.\n     */\n    TextDocumentSyncKind.Incremental = 2;\n})(TextDocumentSyncKind || (exports.TextDocumentSyncKind = TextDocumentSyncKind = {}));\n/**\n * The document open notification is sent from the client to the server to signal\n * newly opened text documents. The document's truth is now managed by the client\n * and the server must not try to read the document's truth using the document's\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\n * mean that its content is presented in an editor. An open notification must not\n * be sent more than once without a corresponding close notification send before.\n * This means open and close notification must be balanced and the max open count\n * is one.\n */\nvar DidOpenTextDocumentNotification;\n(function (DidOpenTextDocumentNotification) {\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\n    DidOpenTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\n    DidOpenTextDocumentNotification.capabilities = messages_1.CM.create('textDocument.synchronization', 'textDocumentSync.openClose');\n})(DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = DidOpenTextDocumentNotification = {}));\nvar TextDocumentContentChangeEvent;\n(function (TextDocumentContentChangeEvent) {\n    /**\n     * Checks whether the information describes a delta event.\n     */\n    function isIncremental(event) {\n        const candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    }\n    TextDocumentContentChangeEvent.isIncremental = isIncremental;\n    /**\n     * Checks whether the information describes a full replacement event.\n     */\n    function isFull(event) {\n        const candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    }\n    TextDocumentContentChangeEvent.isFull = isFull;\n})(TextDocumentContentChangeEvent || (exports.TextDocumentContentChangeEvent = TextDocumentContentChangeEvent = {}));\n/**\n * The document change notification is sent from the client to the server to signal\n * changes to a text document.\n */\nvar DidChangeTextDocumentNotification;\n(function (DidChangeTextDocumentNotification) {\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\n    DidChangeTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\n    DidChangeTextDocumentNotification.capabilities = messages_1.CM.create('textDocument.synchronization', 'textDocumentSync');\n})(DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = DidChangeTextDocumentNotification = {}));\n/**\n * The document close notification is sent from the client to the server when\n * the document got closed in the client. The document's truth now exists where\n * the document's uri points to (e.g. if the document's uri is a file uri the\n * truth now exists on disk). As with the open notification the close notification\n * is about managing the document's content. Receiving a close notification\n * doesn't mean that the document was open in an editor before. A close\n * notification requires a previous open notification to be sent.\n */\nvar DidCloseTextDocumentNotification;\n(function (DidCloseTextDocumentNotification) {\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\n    DidCloseTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\n    DidCloseTextDocumentNotification.capabilities = messages_1.CM.create('textDocument.synchronization', 'textDocumentSync.openClose');\n})(DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = DidCloseTextDocumentNotification = {}));\n/**\n * The document save notification is sent from the client to the server when\n * the document got saved in the client.\n */\nvar DidSaveTextDocumentNotification;\n(function (DidSaveTextDocumentNotification) {\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\n    DidSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\n    DidSaveTextDocumentNotification.capabilities = messages_1.CM.create('textDocument.synchronization.didSave', 'textDocumentSync.save');\n})(DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = DidSaveTextDocumentNotification = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nvar TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason || (exports.TextDocumentSaveReason = TextDocumentSaveReason = {}));\n/**\n * A document will save notification is sent from the client to the server before\n * the document is actually saved.\n */\nvar WillSaveTextDocumentNotification;\n(function (WillSaveTextDocumentNotification) {\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\n    WillSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\n    WillSaveTextDocumentNotification.capabilities = messages_1.CM.create('textDocument.synchronization.willSave', 'textDocumentSync.willSave');\n})(WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = WillSaveTextDocumentNotification = {}));\n/**\n * A document will save request is sent from the client to the server before\n * the document is actually saved. The request can return an array of TextEdits\n * which will be applied to the text document before it is saved. Please note that\n * clients might drop results if computing the text edits took too long or if a\n * server constantly fails on this request. This is done to keep the save fast and\n * reliable.\n */\nvar WillSaveTextDocumentWaitUntilRequest;\n(function (WillSaveTextDocumentWaitUntilRequest) {\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\n    WillSaveTextDocumentWaitUntilRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\n    WillSaveTextDocumentWaitUntilRequest.capabilities = messages_1.CM.create('textDocument.synchronization.willSaveWaitUntil', 'textDocumentSync.willSaveWaitUntil');\n})(WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = WillSaveTextDocumentWaitUntilRequest = {}));\n/**\n * The watched files notification is sent from the client to the server when\n * the client detects changes to file watched by the language client.\n */\nvar DidChangeWatchedFilesNotification;\n(function (DidChangeWatchedFilesNotification) {\n    DidChangeWatchedFilesNotification.method = 'workspace/didChangeWatchedFiles';\n    DidChangeWatchedFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType(DidChangeWatchedFilesNotification.method);\n    DidChangeWatchedFilesNotification.capabilities = messages_1.CM.create('workspace.didChangeWatchedFiles', undefined);\n})(DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = DidChangeWatchedFilesNotification = {}));\n/**\n * The file event type\n */\nvar FileChangeType;\n(function (FileChangeType) {\n    /**\n     * The file got created.\n     */\n    FileChangeType.Created = 1;\n    /**\n     * The file got changed.\n     */\n    FileChangeType.Changed = 2;\n    /**\n     * The file got deleted.\n     */\n    FileChangeType.Deleted = 3;\n})(FileChangeType || (exports.FileChangeType = FileChangeType = {}));\nvar RelativePattern;\n(function (RelativePattern) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (vscode_languageserver_types_1.URI.is(candidate.baseUri) || vscode_languageserver_types_1.WorkspaceFolder.is(candidate.baseUri)) && Is.string(candidate.pattern);\n    }\n    RelativePattern.is = is;\n})(RelativePattern || (exports.RelativePattern = RelativePattern = {}));\nvar GlobPattern;\n(function (GlobPattern) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate) || RelativePattern.is(candidate);\n    }\n    GlobPattern.is = is;\n})(GlobPattern || (exports.GlobPattern = GlobPattern = {}));\nvar WatchKind;\n(function (WatchKind) {\n    /**\n     * Interested in create events.\n     */\n    WatchKind.Create = 1;\n    /**\n     * Interested in change events\n     */\n    WatchKind.Change = 2;\n    /**\n     * Interested in delete events\n     */\n    WatchKind.Delete = 4;\n})(WatchKind || (exports.WatchKind = WatchKind = {}));\n/**\n * Diagnostics notification are sent from the server to the client to signal\n * results of validation runs.\n */\nvar PublishDiagnosticsNotification;\n(function (PublishDiagnosticsNotification) {\n    PublishDiagnosticsNotification.method = 'textDocument/publishDiagnostics';\n    PublishDiagnosticsNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType(PublishDiagnosticsNotification.method);\n    PublishDiagnosticsNotification.capabilities = messages_1.CM.create('textDocument.publishDiagnostics', undefined);\n})(PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = PublishDiagnosticsNotification = {}));\n/**\n * How a completion was triggered\n */\nvar CompletionTriggerKind;\n(function (CompletionTriggerKind) {\n    /**\n     * Completion was triggered by typing an identifier (24x7 code\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\n     */\n    CompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered by a trigger character specified by\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\n     */\n    CompletionTriggerKind.TriggerCharacter = 2;\n    /**\n     * Completion was re-triggered as current completion list is incomplete\n     */\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\n})(CompletionTriggerKind || (exports.CompletionTriggerKind = CompletionTriggerKind = {}));\n/**\n * Request to request completion at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response\n * is of type {@link CompletionItem CompletionItem[]} or {@link CompletionList}\n * or a Thenable that resolves to such.\n *\n * The request can delay the computation of the {@link CompletionItem.detail `detail`}\n * and {@link CompletionItem.documentation `documentation`} properties to the `completionItem/resolve`\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\n */\nvar CompletionRequest;\n(function (CompletionRequest) {\n    CompletionRequest.method = 'textDocument/completion';\n    CompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\n    CompletionRequest.capabilities = messages_1.CM.create('textDocument.completion', 'completionProvider');\n})(CompletionRequest || (exports.CompletionRequest = CompletionRequest = {}));\n/**\n * Request to resolve additional information for a given completion item.The request's\n * parameter is of type {@link CompletionItem} the response\n * is of type {@link CompletionItem} or a Thenable that resolves to such.\n */\nvar CompletionResolveRequest;\n(function (CompletionResolveRequest) {\n    CompletionResolveRequest.method = 'completionItem/resolve';\n    CompletionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\n    CompletionResolveRequest.capabilities = messages_1.CM.create('textDocument.completion.completionItem.resolveSupport', 'completionProvider.resolveProvider');\n})(CompletionResolveRequest || (exports.CompletionResolveRequest = CompletionResolveRequest = {}));\n/**\n * Request to request hover information at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response is of\n * type {@link Hover} or a Thenable that resolves to such.\n */\nvar HoverRequest;\n(function (HoverRequest) {\n    HoverRequest.method = 'textDocument/hover';\n    HoverRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\n    HoverRequest.capabilities = messages_1.CM.create('textDocument.hover', 'hoverProvider');\n})(HoverRequest || (exports.HoverRequest = HoverRequest = {}));\n/**\n * How a signature help was triggered.\n *\n * @since 3.15.0\n */\nvar SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    /**\n     * Signature help was invoked manually by the user or by a command.\n     */\n    SignatureHelpTriggerKind.Invoked = 1;\n    /**\n     * Signature help was triggered by a trigger character.\n     */\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\n    /**\n     * Signature help was triggered by the cursor moving or by the document content changing.\n     */\n    SignatureHelpTriggerKind.ContentChange = 3;\n})(SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = SignatureHelpTriggerKind = {}));\nvar SignatureHelpRequest;\n(function (SignatureHelpRequest) {\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\n    SignatureHelpRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\n    SignatureHelpRequest.capabilities = messages_1.CM.create('textDocument.signatureHelp', 'signatureHelpProvider');\n})(SignatureHelpRequest || (exports.SignatureHelpRequest = SignatureHelpRequest = {}));\n/**\n * A request to resolve the definition location of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPosition}\n * the response is of either type {@link Definition} or a typed array of\n * {@link DefinitionLink} or a Thenable that resolves to such.\n */\nvar DefinitionRequest;\n(function (DefinitionRequest) {\n    DefinitionRequest.method = 'textDocument/definition';\n    DefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\n    DefinitionRequest.capabilities = messages_1.CM.create('textDocument.definition', 'definitionProvider');\n})(DefinitionRequest || (exports.DefinitionRequest = DefinitionRequest = {}));\n/**\n * A request to resolve project-wide references for the symbol denoted\n * by the given text document position. The request's parameter is of\n * type {@link ReferenceParams} the response is of type\n * {@link Location Location[]} or a Thenable that resolves to such.\n */\nvar ReferencesRequest;\n(function (ReferencesRequest) {\n    ReferencesRequest.method = 'textDocument/references';\n    ReferencesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\n    ReferencesRequest.capabilities = messages_1.CM.create('textDocument.references', 'referencesProvider');\n})(ReferencesRequest || (exports.ReferencesRequest = ReferencesRequest = {}));\n/**\n * Request to resolve a {@link DocumentHighlight} for a given\n * text document position. The request's parameter is of type {@link TextDocumentPosition}\n * the request response is an array of type {@link DocumentHighlight}\n * or a Thenable that resolves to such.\n */\nvar DocumentHighlightRequest;\n(function (DocumentHighlightRequest) {\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\n    DocumentHighlightRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\n    DocumentHighlightRequest.capabilities = messages_1.CM.create('textDocument.documentHighlight', 'documentHighlightProvider');\n})(DocumentHighlightRequest || (exports.DocumentHighlightRequest = DocumentHighlightRequest = {}));\n/**\n * A request to list all symbols found in a given text document. The request's\n * parameter is of type {@link TextDocumentIdentifier} the\n * response is of type {@link SymbolInformation SymbolInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentSymbolRequest;\n(function (DocumentSymbolRequest) {\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\n    DocumentSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\n    DocumentSymbolRequest.capabilities = messages_1.CM.create('textDocument.documentSymbol', 'documentSymbolProvider');\n})(DocumentSymbolRequest || (exports.DocumentSymbolRequest = DocumentSymbolRequest = {}));\n/**\n * A request to provide commands for the given text document and range.\n */\nvar CodeActionRequest;\n(function (CodeActionRequest) {\n    CodeActionRequest.method = 'textDocument/codeAction';\n    CodeActionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\n    CodeActionRequest.capabilities = messages_1.CM.create('textDocument.codeAction', 'codeActionProvider');\n})(CodeActionRequest || (exports.CodeActionRequest = CodeActionRequest = {}));\n/**\n * Request to resolve additional information for a given code action.The request's\n * parameter is of type {@link CodeAction} the response\n * is of type {@link CodeAction} or a Thenable that resolves to such.\n */\nvar CodeActionResolveRequest;\n(function (CodeActionResolveRequest) {\n    CodeActionResolveRequest.method = 'codeAction/resolve';\n    CodeActionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionResolveRequest.type = new messages_1.ProtocolRequestType(CodeActionResolveRequest.method);\n    CodeActionResolveRequest.capabilities = messages_1.CM.create('textDocument.codeAction.resolveSupport', 'codeActionProvider.resolveProvider');\n})(CodeActionResolveRequest || (exports.CodeActionResolveRequest = CodeActionResolveRequest = {}));\n/**\n * A request to list project-wide symbols matching the query string given\n * by the {@link WorkspaceSymbolParams}. The response is\n * of type {@link SymbolInformation SymbolInformation[]} or a Thenable that\n * resolves to such.\n *\n * @since 3.17.0 - support for WorkspaceSymbol in the returned data. Clients\n *  need to advertise support for WorkspaceSymbols via the client capability\n *  `workspace.symbol.resolveSupport`.\n *\n */\nvar WorkspaceSymbolRequest;\n(function (WorkspaceSymbolRequest) {\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\n    WorkspaceSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\n    WorkspaceSymbolRequest.capabilities = messages_1.CM.create('workspace.symbol', 'workspaceSymbolProvider');\n})(WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = WorkspaceSymbolRequest = {}));\n/**\n * A request to resolve the range inside the workspace\n * symbol's location.\n *\n * @since 3.17.0\n */\nvar WorkspaceSymbolResolveRequest;\n(function (WorkspaceSymbolResolveRequest) {\n    WorkspaceSymbolResolveRequest.method = 'workspaceSymbol/resolve';\n    WorkspaceSymbolResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolResolveRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolResolveRequest.method);\n    WorkspaceSymbolResolveRequest.capabilities = messages_1.CM.create('workspace.symbol.resolveSupport', 'workspaceSymbolProvider.resolveProvider');\n})(WorkspaceSymbolResolveRequest || (exports.WorkspaceSymbolResolveRequest = WorkspaceSymbolResolveRequest = {}));\n/**\n * A request to provide code lens for the given text document.\n */\nvar CodeLensRequest;\n(function (CodeLensRequest) {\n    CodeLensRequest.method = 'textDocument/codeLens';\n    CodeLensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensRequest.type = new messages_1.ProtocolRequestType(CodeLensRequest.method);\n    CodeLensRequest.capabilities = messages_1.CM.create('textDocument.codeLens', 'codeLensProvider');\n})(CodeLensRequest || (exports.CodeLensRequest = CodeLensRequest = {}));\n/**\n * A request to resolve a command for a given code lens.\n */\nvar CodeLensResolveRequest;\n(function (CodeLensResolveRequest) {\n    CodeLensResolveRequest.method = 'codeLens/resolve';\n    CodeLensResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType(CodeLensResolveRequest.method);\n    CodeLensResolveRequest.capabilities = messages_1.CM.create('textDocument.codeLens.resolveSupport', 'codeLensProvider.resolveProvider');\n})(CodeLensResolveRequest || (exports.CodeLensResolveRequest = CodeLensResolveRequest = {}));\n/**\n * A request to refresh all code actions\n *\n * @since 3.16.0\n */\nvar CodeLensRefreshRequest;\n(function (CodeLensRefreshRequest) {\n    CodeLensRefreshRequest.method = `workspace/codeLens/refresh`;\n    CodeLensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    CodeLensRefreshRequest.type = new messages_1.ProtocolRequestType0(CodeLensRefreshRequest.method);\n    CodeLensRefreshRequest.capabilities = messages_1.CM.create('workspace.codeLens', undefined);\n})(CodeLensRefreshRequest || (exports.CodeLensRefreshRequest = CodeLensRefreshRequest = {}));\n/**\n * A request to provide document links\n */\nvar DocumentLinkRequest;\n(function (DocumentLinkRequest) {\n    DocumentLinkRequest.method = 'textDocument/documentLink';\n    DocumentLinkRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\n    DocumentLinkRequest.capabilities = messages_1.CM.create('textDocument.documentLink', 'documentLinkProvider');\n})(DocumentLinkRequest || (exports.DocumentLinkRequest = DocumentLinkRequest = {}));\n/**\n * Request to resolve additional information for a given document link. The request's\n * parameter is of type {@link DocumentLink} the response\n * is of type {@link DocumentLink} or a Thenable that resolves to such.\n */\nvar DocumentLinkResolveRequest;\n(function (DocumentLinkResolveRequest) {\n    DocumentLinkResolveRequest.method = 'documentLink/resolve';\n    DocumentLinkResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType(DocumentLinkResolveRequest.method);\n    DocumentLinkResolveRequest.capabilities = messages_1.CM.create('textDocument.documentLink', 'documentLinkProvider.resolveProvider');\n})(DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = DocumentLinkResolveRequest = {}));\n/**\n * A request to format a whole document.\n */\nvar DocumentFormattingRequest;\n(function (DocumentFormattingRequest) {\n    DocumentFormattingRequest.method = 'textDocument/formatting';\n    DocumentFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\n    DocumentFormattingRequest.capabilities = messages_1.CM.create('textDocument.formatting', 'documentFormattingProvider');\n})(DocumentFormattingRequest || (exports.DocumentFormattingRequest = DocumentFormattingRequest = {}));\n/**\n * A request to format a range in a document.\n */\nvar DocumentRangeFormattingRequest;\n(function (DocumentRangeFormattingRequest) {\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\n    DocumentRangeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\n    DocumentRangeFormattingRequest.capabilities = messages_1.CM.create('textDocument.rangeFormatting', 'documentRangeFormattingProvider');\n})(DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = DocumentRangeFormattingRequest = {}));\n/**\n * A request to format ranges in a document.\n *\n * @since 3.18.0\n * @proposed\n */\nvar DocumentRangesFormattingRequest;\n(function (DocumentRangesFormattingRequest) {\n    DocumentRangesFormattingRequest.method = 'textDocument/rangesFormatting';\n    DocumentRangesFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangesFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangesFormattingRequest.method);\n    DocumentRangesFormattingRequest.capabilities = messages_1.CM.create('textDocument.rangeFormatting.rangesSupport', 'documentRangeFormattingProvider.rangesSupport');\n})(DocumentRangesFormattingRequest || (exports.DocumentRangesFormattingRequest = DocumentRangesFormattingRequest = {}));\n/**\n * A request to format a document on type.\n */\nvar DocumentOnTypeFormattingRequest;\n(function (DocumentOnTypeFormattingRequest) {\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\n    DocumentOnTypeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\n    DocumentOnTypeFormattingRequest.capabilities = messages_1.CM.create('textDocument.onTypeFormatting', 'documentOnTypeFormattingProvider');\n})(DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = DocumentOnTypeFormattingRequest = {}));\n//---- Rename ----------------------------------------------\nvar PrepareSupportDefaultBehavior;\n(function (PrepareSupportDefaultBehavior) {\n    /**\n     * The client's default behavior is to select the identifier\n     * according the to language's syntax rule.\n     */\n    PrepareSupportDefaultBehavior.Identifier = 1;\n})(PrepareSupportDefaultBehavior || (exports.PrepareSupportDefaultBehavior = PrepareSupportDefaultBehavior = {}));\n/**\n * A request to rename a symbol.\n */\nvar RenameRequest;\n(function (RenameRequest) {\n    RenameRequest.method = 'textDocument/rename';\n    RenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\n    RenameRequest.capabilities = messages_1.CM.create('textDocument.rename', 'renameProvider');\n})(RenameRequest || (exports.RenameRequest = RenameRequest = {}));\n/**\n * A request to test and perform the setup necessary for a rename.\n *\n * @since 3.16 - support for default behavior\n */\nvar PrepareRenameRequest;\n(function (PrepareRenameRequest) {\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\n    PrepareRenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\n    PrepareRenameRequest.capabilities = messages_1.CM.create('textDocument.rename.prepareSupport', 'renameProvider.prepareProvider');\n})(PrepareRenameRequest || (exports.PrepareRenameRequest = PrepareRenameRequest = {}));\n/**\n * A request send from the client to the server to execute a command. The request might return\n * a workspace edit which the client will apply to the workspace.\n */\nvar ExecuteCommandRequest;\n(function (ExecuteCommandRequest) {\n    ExecuteCommandRequest.method = 'workspace/executeCommand';\n    ExecuteCommandRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType(ExecuteCommandRequest.method);\n    ExecuteCommandRequest.capabilities = messages_1.CM.create('workspace.executeCommand', 'executeCommandProvider');\n})(ExecuteCommandRequest || (exports.ExecuteCommandRequest = ExecuteCommandRequest = {}));\n/**\n * A request sent from the server to the client to modified certain resources.\n */\nvar ApplyWorkspaceEditRequest;\n(function (ApplyWorkspaceEditRequest) {\n    ApplyWorkspaceEditRequest.method = 'workspace/applyEdit';\n    ApplyWorkspaceEditRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\n    ApplyWorkspaceEditRequest.capabilities = messages_1.CM.create('workspace.applyEdit', undefined);\n})(ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = ApplyWorkspaceEditRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticFeature = exports.DiagnosticPullMode = exports.vsdiag = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst uuid_1 = require(\"./utils/uuid\");\nconst globPattern_1 = require(\"./utils/globPattern\");\nconst features_1 = require(\"./features\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar vsdiag;\n(function (vsdiag) {\n    let DocumentDiagnosticReportKind;\n    (function (DocumentDiagnosticReportKind) {\n        DocumentDiagnosticReportKind[\"full\"] = \"full\";\n        DocumentDiagnosticReportKind[\"unChanged\"] = \"unChanged\";\n    })(DocumentDiagnosticReportKind = vsdiag.DocumentDiagnosticReportKind || (vsdiag.DocumentDiagnosticReportKind = {}));\n})(vsdiag || (exports.vsdiag = vsdiag = {}));\nvar DiagnosticPullMode;\n(function (DiagnosticPullMode) {\n    DiagnosticPullMode[\"onType\"] = \"onType\";\n    DiagnosticPullMode[\"onSave\"] = \"onSave\";\n    DiagnosticPullMode[\"onFocus\"] = \"onFocus\";\n})(DiagnosticPullMode || (exports.DiagnosticPullMode = DiagnosticPullMode = {}));\nvar RequestStateKind;\n(function (RequestStateKind) {\n    RequestStateKind[\"active\"] = \"open\";\n    RequestStateKind[\"reschedule\"] = \"reschedule\";\n    RequestStateKind[\"outDated\"] = \"drop\";\n})(RequestStateKind || (RequestStateKind = {}));\nvar PullState;\n(function (PullState) {\n    PullState[PullState[\"document\"] = 1] = \"document\";\n    PullState[PullState[\"workspace\"] = 2] = \"workspace\";\n})(PullState || (PullState = {}));\nvar DocumentOrUri;\n(function (DocumentOrUri) {\n    function asKey(document) {\n        return document instanceof vscode_1.Uri ? document.toString() : document.uri.toString();\n    }\n    DocumentOrUri.asKey = asKey;\n})(DocumentOrUri || (DocumentOrUri = {}));\nclass DocumentPullStateTracker {\n    documentPullStates;\n    workspacePullStates;\n    constructor() {\n        this.documentPullStates = new Map();\n        this.workspacePullStates = new Map();\n    }\n    track(kind, document, arg1) {\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        const [key, uri, version] = document instanceof vscode_1.Uri\n            ? [document.toString(), document, arg1]\n            : [document.uri.toString(), document.uri, document.version];\n        let state = states.get(key);\n        if (state === undefined) {\n            state = { document: uri, pulledVersion: version, resultId: undefined };\n            states.set(key, state);\n        }\n        return state;\n    }\n    update(kind, document, arg1, arg2) {\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        const [key, uri, version, resultId] = document instanceof vscode_1.Uri\n            ? [document.toString(), document, arg1, arg2]\n            : [document.uri.toString(), document.uri, document.version, arg1];\n        let state = states.get(key);\n        if (state === undefined) {\n            state = { document: uri, pulledVersion: version, resultId };\n            states.set(key, state);\n        }\n        else {\n            state.pulledVersion = version;\n            state.resultId = resultId;\n        }\n    }\n    unTrack(kind, document) {\n        const key = DocumentOrUri.asKey(document);\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        states.delete(key);\n    }\n    tracks(kind, document) {\n        const key = DocumentOrUri.asKey(document);\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        return states.has(key);\n    }\n    getResultId(kind, document) {\n        const key = DocumentOrUri.asKey(document);\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        return states.get(key)?.resultId;\n    }\n    getAllResultIds() {\n        const result = [];\n        for (let [uri, value] of this.workspacePullStates) {\n            if (this.documentPullStates.has(uri)) {\n                value = this.documentPullStates.get(uri);\n            }\n            if (value.resultId !== undefined) {\n                result.push({ uri, value: value.resultId });\n            }\n        }\n        return result;\n    }\n}\nclass DiagnosticRequestor {\n    isDisposed;\n    client;\n    tabs;\n    options;\n    onDidChangeDiagnosticsEmitter;\n    provider;\n    diagnostics;\n    openRequests;\n    documentStates;\n    workspaceErrorCounter;\n    workspaceCancellation;\n    workspaceTimeout;\n    constructor(client, tabs, options) {\n        this.client = client;\n        this.tabs = tabs;\n        this.options = options;\n        this.isDisposed = false;\n        this.onDidChangeDiagnosticsEmitter = new vscode_1.EventEmitter();\n        this.provider = this.createProvider();\n        this.diagnostics = vscode_1.languages.createDiagnosticCollection(options.identifier);\n        this.openRequests = new Map();\n        this.documentStates = new DocumentPullStateTracker();\n        this.workspaceErrorCounter = 0;\n    }\n    knows(kind, document) {\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        return this.documentStates.tracks(kind, document) || this.openRequests.has(uri.toString());\n    }\n    forget(kind, document) {\n        this.documentStates.unTrack(kind, document);\n    }\n    pull(document, cb) {\n        if (this.isDisposed) {\n            return;\n        }\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        this.pullAsync(document).then(() => {\n            if (cb) {\n                cb();\n            }\n        }, (error) => {\n            this.client.error(`Document pull failed for text document ${uri.toString()}`, error, false);\n        });\n    }\n    async pullAsync(document, version) {\n        if (this.isDisposed) {\n            return;\n        }\n        const isUri = document instanceof vscode_1.Uri;\n        const uri = isUri ? document : document.uri;\n        const key = uri.toString();\n        version = isUri ? version : document.version;\n        const currentRequestState = this.openRequests.get(key);\n        const documentState = isUri\n            ? this.documentStates.track(PullState.document, document, version)\n            : this.documentStates.track(PullState.document, document);\n        if (currentRequestState === undefined) {\n            const tokenSource = new vscode_1.CancellationTokenSource();\n            this.openRequests.set(key, { state: RequestStateKind.active, document: document, version: version, tokenSource });\n            let report;\n            let afterState;\n            try {\n                report = await this.provider.provideDiagnostics(document, documentState.resultId, tokenSource.token) ?? { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] };\n            }\n            catch (error) {\n                if (error instanceof features_1.LSPCancellationError && vscode_languageserver_protocol_1.DiagnosticServerCancellationData.is(error.data) && error.data.retriggerRequest === false) {\n                    afterState = { state: RequestStateKind.outDated, document };\n                }\n                if (afterState === undefined && error instanceof vscode_1.CancellationError) {\n                    afterState = { state: RequestStateKind.reschedule, document };\n                }\n                else {\n                    throw error;\n                }\n            }\n            afterState = afterState ?? this.openRequests.get(key);\n            if (afterState === undefined) {\n                // This shouldn't happen. Log it\n                this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${key}`);\n                this.diagnostics.delete(uri);\n                return;\n            }\n            this.openRequests.delete(key);\n            if (!this.tabs.isVisible(document)) {\n                this.documentStates.unTrack(PullState.document, document);\n                return;\n            }\n            if (afterState.state === RequestStateKind.outDated) {\n                return;\n            }\n            // report is only undefined if the request has thrown.\n            if (report !== undefined) {\n                if (report.kind === vsdiag.DocumentDiagnosticReportKind.full) {\n                    this.diagnostics.set(uri, report.items);\n                }\n                documentState.pulledVersion = version;\n                documentState.resultId = report.resultId;\n            }\n            if (afterState.state === RequestStateKind.reschedule) {\n                this.pull(document);\n            }\n        }\n        else {\n            if (currentRequestState.state === RequestStateKind.active) {\n                // Cancel the current request and reschedule a new one when the old one returned.\n                currentRequestState.tokenSource.cancel();\n                this.openRequests.set(key, { state: RequestStateKind.reschedule, document: currentRequestState.document });\n            }\n            else if (currentRequestState.state === RequestStateKind.outDated) {\n                this.openRequests.set(key, { state: RequestStateKind.reschedule, document: currentRequestState.document });\n            }\n        }\n    }\n    forgetDocument(document) {\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        const key = uri.toString();\n        const request = this.openRequests.get(key);\n        if (this.options.workspaceDiagnostics) {\n            // If we run workspace diagnostic pull a last time for the diagnostics\n            // and the rely on getting them from the workspace result.\n            if (request !== undefined) {\n                this.openRequests.set(key, { state: RequestStateKind.reschedule, document: document });\n            }\n            else {\n                this.pull(document, () => {\n                    this.forget(PullState.document, document);\n                });\n            }\n        }\n        else {\n            // We have normal pull or inter file dependencies. In this case we\n            // clear the diagnostics (to have the same start as after startup).\n            // We also cancel outstanding requests.\n            if (request !== undefined) {\n                if (request.state === RequestStateKind.active) {\n                    request.tokenSource.cancel();\n                }\n                this.openRequests.set(key, { state: RequestStateKind.outDated, document: document });\n            }\n            this.diagnostics.delete(uri);\n            this.forget(PullState.document, document);\n        }\n    }\n    pullWorkspace() {\n        if (this.isDisposed) {\n            return;\n        }\n        this.pullWorkspaceAsync().then(() => {\n            this.workspaceTimeout = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n                this.pullWorkspace();\n            }, 2000);\n        }, (error) => {\n            if (!(error instanceof features_1.LSPCancellationError) && !vscode_languageserver_protocol_1.DiagnosticServerCancellationData.is(error.data)) {\n                this.client.error(`Workspace diagnostic pull failed.`, error, false);\n                this.workspaceErrorCounter++;\n            }\n            if (this.workspaceErrorCounter <= 5) {\n                this.workspaceTimeout = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n                    this.pullWorkspace();\n                }, 2000);\n            }\n        });\n    }\n    async pullWorkspaceAsync() {\n        if (!this.provider.provideWorkspaceDiagnostics || this.isDisposed) {\n            return;\n        }\n        if (this.workspaceCancellation !== undefined) {\n            this.workspaceCancellation.cancel();\n            this.workspaceCancellation = undefined;\n        }\n        this.workspaceCancellation = new vscode_1.CancellationTokenSource();\n        const previousResultIds = this.documentStates.getAllResultIds().map((item) => {\n            return {\n                uri: this.client.protocol2CodeConverter.asUri(item.uri),\n                value: item.value\n            };\n        });\n        await this.provider.provideWorkspaceDiagnostics(previousResultIds, this.workspaceCancellation.token, (chunk) => {\n            if (!chunk || this.isDisposed) {\n                return;\n            }\n            for (const item of chunk.items) {\n                if (item.kind === vsdiag.DocumentDiagnosticReportKind.full) {\n                    // Favour document pull result over workspace results. So skip if it is tracked\n                    // as a document result.\n                    if (!this.documentStates.tracks(PullState.document, item.uri)) {\n                        this.diagnostics.set(item.uri, item.items);\n                    }\n                }\n                this.documentStates.update(PullState.workspace, item.uri, item.version ?? undefined, item.resultId);\n            }\n        });\n    }\n    createProvider() {\n        const result = {\n            onDidChangeDiagnostics: this.onDidChangeDiagnosticsEmitter.event,\n            provideDiagnostics: (document, previousResultId, token) => {\n                const provideDiagnostics = (document, previousResultId, token) => {\n                    const params = {\n                        identifier: this.options.identifier,\n                        textDocument: { uri: this.client.code2ProtocolConverter.asUri(document instanceof vscode_1.Uri ? document : document.uri) },\n                        previousResultId: previousResultId\n                    };\n                    if (this.isDisposed === true || !this.client.isRunning()) {\n                        return { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] };\n                    }\n                    return this.client.sendRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, params, token).then(async (result) => {\n                        if (result === undefined || result === null || this.isDisposed || token.isCancellationRequested) {\n                            return { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] };\n                        }\n                        if (result.kind === vscode_languageserver_protocol_1.DocumentDiagnosticReportKind.Full) {\n                            return { kind: vsdiag.DocumentDiagnosticReportKind.full, resultId: result.resultId, items: await this.client.protocol2CodeConverter.asDiagnostics(result.items, token) };\n                        }\n                        else {\n                            return { kind: vsdiag.DocumentDiagnosticReportKind.unChanged, resultId: result.resultId };\n                        }\n                    }, (error) => {\n                        return this.client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, token, error, { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] }, true, true);\n                    });\n                };\n                const middleware = this.client.middleware;\n                return middleware.provideDiagnostics\n                    ? middleware.provideDiagnostics(document, previousResultId, token, provideDiagnostics)\n                    : provideDiagnostics(document, previousResultId, token);\n            }\n        };\n        if (this.options.workspaceDiagnostics) {\n            result.provideWorkspaceDiagnostics = (resultIds, token, resultReporter) => {\n                const convertReport = async (report) => {\n                    if (report.kind === vscode_languageserver_protocol_1.DocumentDiagnosticReportKind.Full) {\n                        return {\n                            kind: vsdiag.DocumentDiagnosticReportKind.full,\n                            uri: this.client.protocol2CodeConverter.asUri(report.uri),\n                            resultId: report.resultId,\n                            version: report.version,\n                            items: await this.client.protocol2CodeConverter.asDiagnostics(report.items, token)\n                        };\n                    }\n                    else {\n                        return {\n                            kind: vsdiag.DocumentDiagnosticReportKind.unChanged,\n                            uri: this.client.protocol2CodeConverter.asUri(report.uri),\n                            resultId: report.resultId,\n                            version: report.version\n                        };\n                    }\n                };\n                const convertPreviousResultIds = (resultIds) => {\n                    const converted = [];\n                    for (const item of resultIds) {\n                        converted.push({ uri: this.client.code2ProtocolConverter.asUri(item.uri), value: item.value });\n                    }\n                    return converted;\n                };\n                const provideDiagnostics = (resultIds, token, resultReporter) => {\n                    const partialResultToken = (0, uuid_1.generateUuid)();\n                    const disposable = this.client.onProgress(vscode_languageserver_protocol_1.WorkspaceDiagnosticRequest.partialResult, partialResultToken, async (partialResult) => {\n                        if (partialResult === undefined || partialResult === null) {\n                            resultReporter(null);\n                            return;\n                        }\n                        const converted = {\n                            items: []\n                        };\n                        for (const item of partialResult.items) {\n                            try {\n                                converted.items.push(await convertReport(item));\n                            }\n                            catch (error) {\n                                this.client.error(`Converting workspace diagnostics failed.`, error);\n                            }\n                        }\n                        resultReporter(converted);\n                    });\n                    const params = {\n                        identifier: this.options.identifier,\n                        previousResultIds: convertPreviousResultIds(resultIds),\n                        partialResultToken: partialResultToken\n                    };\n                    if (this.isDisposed === true || !this.client.isRunning()) {\n                        return { items: [] };\n                    }\n                    return this.client.sendRequest(vscode_languageserver_protocol_1.WorkspaceDiagnosticRequest.type, params, token).then(async (result) => {\n                        if (token.isCancellationRequested) {\n                            return { items: [] };\n                        }\n                        const converted = {\n                            items: []\n                        };\n                        for (const item of result.items) {\n                            converted.items.push(await convertReport(item));\n                        }\n                        disposable.dispose();\n                        resultReporter(converted);\n                        return { items: [] };\n                    }, (error) => {\n                        disposable.dispose();\n                        return this.client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, token, error, { items: [] });\n                    });\n                };\n                const middleware = this.client.middleware;\n                return middleware.provideWorkspaceDiagnostics\n                    ? middleware.provideWorkspaceDiagnostics(resultIds, token, resultReporter, provideDiagnostics)\n                    : provideDiagnostics(resultIds, token, resultReporter);\n            };\n        }\n        return result;\n    }\n    dispose() {\n        this.isDisposed = true;\n        // Cancel and clear workspace pull if present.\n        this.workspaceCancellation?.cancel();\n        this.workspaceTimeout?.dispose();\n        // Cancel all request and mark open requests as outdated.\n        for (const [key, request] of this.openRequests) {\n            if (request.state === RequestStateKind.active) {\n                request.tokenSource.cancel();\n            }\n            this.openRequests.set(key, { state: RequestStateKind.outDated, document: request.document });\n        }\n        // cleanup old diagnostics\n        this.diagnostics.dispose();\n    }\n}\nclass BackgroundScheduler {\n    client;\n    diagnosticRequestor;\n    lastDocumentToPull;\n    documents;\n    timeoutHandle;\n    // The problem is that there could be outstanding diagnostic requests\n    // when we shutdown which when we receive the result will trigger a\n    // reschedule. So we remember if the background scheduler got disposed\n    // and ignore those re-schedules\n    isDisposed;\n    constructor(client, diagnosticRequestor) {\n        this.client = client;\n        this.diagnosticRequestor = diagnosticRequestor;\n        this.documents = new vscode_languageserver_protocol_1.LinkedMap();\n        this.isDisposed = false;\n    }\n    add(document) {\n        if (this.isDisposed === true) {\n            return;\n        }\n        const key = DocumentOrUri.asKey(document);\n        if (this.documents.has(key)) {\n            return;\n        }\n        this.documents.set(key, document, vscode_languageserver_protocol_1.Touch.Last);\n        // Make sure we run up to that document. We could\n        // consider inserting it after the current last\n        // document for performance reasons but it might not catch\n        // all interfile dependencies.\n        this.lastDocumentToPull = document;\n    }\n    remove(document) {\n        const key = DocumentOrUri.asKey(document);\n        this.documents.delete(key);\n        // No more documents. Stop background activity.\n        if (this.documents.size === 0) {\n            this.stop();\n            return;\n        }\n        else if (key === this.lastDocumentToPullKey()) {\n            // The remove document was the one we would run up to. So\n            // take the one before it.\n            const before = this.documents.before(key);\n            if (before === undefined) {\n                this.stop();\n            }\n            else {\n                this.lastDocumentToPull = before;\n            }\n        }\n    }\n    trigger() {\n        this.lastDocumentToPull = this.documents.last;\n        this.runLoop();\n    }\n    runLoop() {\n        if (this.isDisposed === true) {\n            return;\n        }\n        // We have an empty background list. Make sure we stop\n        // background activity.\n        if (this.documents.size === 0) {\n            this.stop();\n            return;\n        }\n        // We have no last document anymore so stop the loop\n        if (this.lastDocumentToPull === undefined) {\n            return;\n        }\n        // We have a timeout in the loop. So we should not schedule\n        // another run.\n        if (this.timeoutHandle !== undefined) {\n            return;\n        }\n        this.timeoutHandle = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n            const document = this.documents.first;\n            if (document === undefined) {\n                return;\n            }\n            const key = DocumentOrUri.asKey(document);\n            this.diagnosticRequestor.pullAsync(document).catch((error) => {\n                this.client.error(`Document pull failed for text document ${key}`, error, false);\n            }).finally(() => {\n                this.timeoutHandle = undefined;\n                this.documents.set(key, document, vscode_languageserver_protocol_1.Touch.Last);\n                if (key !== this.lastDocumentToPullKey()) {\n                    this.runLoop();\n                }\n            });\n        }, 500);\n    }\n    dispose() {\n        this.isDisposed = true;\n        this.stop();\n        this.documents.clear();\n        this.lastDocumentToPull = undefined;\n    }\n    stop() {\n        this.timeoutHandle?.dispose();\n        this.timeoutHandle = undefined;\n        this.lastDocumentToPull = undefined;\n    }\n    lastDocumentToPullKey() {\n        return this.lastDocumentToPull !== undefined ? DocumentOrUri.asKey(this.lastDocumentToPull) : undefined;\n    }\n}\nclass DiagnosticFeatureProviderImpl {\n    disposable;\n    diagnosticRequestor;\n    activeTextDocument;\n    backgroundScheduler;\n    constructor(client, tabs, options) {\n        const diagnosticPullOptions = Object.assign({ onChange: false, onSave: false, onFocus: false }, client.clientOptions.diagnosticPullOptions);\n        const documentSelector = client.protocol2CodeConverter.asDocumentSelector(options.documentSelector);\n        const disposables = [];\n        const matchFilter = (filter, resource) => {\n            // The filter is a language id. We can't determine if it matches\n            // so we return false.\n            if (typeof filter === 'string') {\n                return false;\n            }\n            if (filter.language !== undefined && filter.language !== '*') {\n                return false;\n            }\n            if (filter.scheme !== undefined && filter.scheme !== '*' && filter.scheme !== resource.scheme) {\n                return false;\n            }\n            if (filter.pattern !== undefined && !(0, globPattern_1.matchGlobPattern)(filter.pattern, resource)) {\n                return false;\n            }\n            return true;\n        };\n        const matchResource = (resource) => {\n            const selector = options.documentSelector;\n            if (diagnosticPullOptions.match !== undefined) {\n                return diagnosticPullOptions.match(selector, resource);\n            }\n            for (const filter of selector) {\n                if (!vscode_languageserver_protocol_1.TextDocumentFilter.is(filter)) {\n                    continue;\n                }\n                if (matchFilter(filter, resource)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        const matches = (document) => {\n            return document instanceof vscode_1.Uri\n                ? matchResource(document)\n                : vscode_1.languages.match(documentSelector, document) > 0 && tabs.isVisible(document);\n        };\n        const matchesCell = (cell) => {\n            // Cells match if the language is allowed and if the containing notebook is visible.\n            return vscode_1.languages.match(documentSelector, cell.document) > 0 && tabs.isVisible(cell.notebook.uri);\n        };\n        const isActiveDocument = (document) => {\n            return document instanceof vscode_1.Uri\n                ? this.activeTextDocument?.uri.toString() === document.toString()\n                : this.activeTextDocument === document;\n        };\n        this.diagnosticRequestor = new DiagnosticRequestor(client, tabs, options);\n        this.backgroundScheduler = new BackgroundScheduler(client, this.diagnosticRequestor);\n        const addToBackgroundIfNeeded = (document) => {\n            if (!matches(document) || !options.interFileDependencies || isActiveDocument(document) || diagnosticPullOptions.onChange === false) {\n                return;\n            }\n            this.backgroundScheduler.add(document);\n        };\n        const considerDocument = (textDocument, mode) => {\n            return (diagnosticPullOptions.filter === undefined || !diagnosticPullOptions.filter(textDocument, mode)) && this.diagnosticRequestor.knows(PullState.document, textDocument);\n        };\n        this.activeTextDocument = vscode_1.window.activeTextEditor?.document;\n        disposables.push(vscode_1.window.onDidChangeActiveTextEditor((editor) => {\n            const oldActive = this.activeTextDocument;\n            this.activeTextDocument = editor?.document;\n            if (oldActive !== undefined) {\n                addToBackgroundIfNeeded(oldActive);\n            }\n            if (this.activeTextDocument !== undefined) {\n                this.backgroundScheduler.remove(this.activeTextDocument);\n                if (diagnosticPullOptions.onFocus === true && matches(this.activeTextDocument) && considerDocument(this.activeTextDocument, DiagnosticPullMode.onFocus)) {\n                    this.diagnosticRequestor.pull(this.activeTextDocument);\n                }\n            }\n        }));\n        // For pull model diagnostics we pull for documents visible in the UI.\n        // From an eventing point of view we still rely on open document events\n        // and filter the documents that are not visible in the UI instead of\n        // listening to Tab events. Major reason is event timing since we need\n        // to ensure that the pull is send after the document open has reached\n        // the server.\n        // We always pull on open.\n        const openFeature = client.getFeature(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.method);\n        disposables.push(openFeature.onNotificationSent((event) => {\n            const textDocument = event.textDocument;\n            // We already know about this document. This can happen via a tab open.\n            if (this.diagnosticRequestor.knows(PullState.document, textDocument)) {\n                return;\n            }\n            if (matches(textDocument)) {\n                this.diagnosticRequestor.pull(textDocument, () => { addToBackgroundIfNeeded(textDocument); });\n            }\n        }));\n        const notebookFeature = client.getFeature(vscode_languageserver_protocol_1.NotebookDocumentSyncRegistrationType.method);\n        disposables.push(notebookFeature.onOpenNotificationSent((event) => {\n            // Send a pull for all opened cells in the notebook.\n            for (const cell of event.getCells()) {\n                if (matchesCell(cell)) {\n                    this.diagnosticRequestor.pull(cell.document, () => { addToBackgroundIfNeeded(cell.document); });\n                }\n            }\n        }));\n        disposables.push(tabs.onOpen((opened) => {\n            for (const resource of opened) {\n                // We already know about this document. This can happen via a document open.\n                if (this.diagnosticRequestor.knows(PullState.document, resource)) {\n                    continue;\n                }\n                const uriStr = resource.toString();\n                let textDocument;\n                for (const item of vscode_1.workspace.textDocuments) {\n                    if (uriStr === item.uri.toString()) {\n                        textDocument = item;\n                        break;\n                    }\n                }\n                // In VS Code the event timing is as follows:\n                // 1. tab events are fired.\n                // 2. open document events are fired and internal data structures like\n                //    workspace.textDocuments and Window.activeTextEditor are updated.\n                //\n                // This means: for newly created tab/editors we don't find the underlying\n                // document yet. So we do nothing an rely on the underlying open document event\n                // to be fired.\n                if (textDocument !== undefined && matches(textDocument)) {\n                    this.diagnosticRequestor.pull(textDocument, () => { addToBackgroundIfNeeded(textDocument); });\n                }\n            }\n        }));\n        // Pull all diagnostics for documents that are already open\n        const pulledTextDocuments = new Set();\n        for (const textDocument of vscode_1.workspace.textDocuments) {\n            if (matches(textDocument)) {\n                this.diagnosticRequestor.pull(textDocument, () => { addToBackgroundIfNeeded(textDocument); });\n                pulledTextDocuments.add(textDocument.uri.toString());\n            }\n        }\n        // Do the same for already open notebook cells.\n        for (const notebookDocument of vscode_1.workspace.notebookDocuments) {\n            for (const cell of notebookDocument.getCells()) {\n                if (matchesCell(cell)) {\n                    this.diagnosticRequestor.pull(cell.document, () => { addToBackgroundIfNeeded(cell.document); });\n                    pulledTextDocuments.add(cell.document.uri.toString());\n                }\n            }\n        }\n        // Pull all tabs if not already pulled as text document\n        if (diagnosticPullOptions.onTabs === true) {\n            for (const resource of tabs.getTabResources()) {\n                if (!pulledTextDocuments.has(resource.toString()) && matches(resource)) {\n                    this.diagnosticRequestor.pull(resource, () => { addToBackgroundIfNeeded(resource); });\n                }\n            }\n        }\n        // We don't need to pull on tab open since we will receive a document open as well later on\n        // and that event allows us to use a document for a match check which will have a set\n        // language id.\n        if (diagnosticPullOptions.onChange === true) {\n            const changeFeature = client.getFeature(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.method);\n            disposables.push(changeFeature.onNotificationSent(async (event) => {\n                const textDocument = event.textDocument;\n                if (considerDocument(textDocument, DiagnosticPullMode.onType)) {\n                    this.diagnosticRequestor.pull(textDocument, () => { this.backgroundScheduler.trigger(); });\n                }\n            }));\n            disposables.push(notebookFeature.onChangeNotificationSent(async (event) => {\n                // Send a pull for all changed cells in the notebook.\n                const textEvents = event.cells?.textContent || [];\n                const changedCells = textEvents.map((c) => event.notebook.getCells().find(cell => cell.document.uri.toString() === c.document.uri.toString()));\n                for (const cell of changedCells) {\n                    if (cell && matchesCell(cell)) {\n                        this.diagnosticRequestor.pull(cell.document, () => { this.backgroundScheduler.trigger(); });\n                    }\n                }\n                // Clear out any closed cells.\n                const closedCells = event.cells?.structure?.didClose || [];\n                for (const cell of closedCells) {\n                    this.diagnosticRequestor.forgetDocument(cell.document);\n                }\n                // Send a pull for any new opened cells.\n                const openedCells = event.cells?.structure?.didOpen || [];\n                for (const cell of openedCells) {\n                    if (matchesCell(cell)) {\n                        this.diagnosticRequestor.pull(cell.document, () => { this.backgroundScheduler.trigger(); });\n                    }\n                }\n            }));\n        }\n        if (diagnosticPullOptions.onSave === true) {\n            const saveFeature = client.getFeature(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.method);\n            disposables.push(saveFeature.onNotificationSent((event) => {\n                const textDocument = event.textDocument;\n                if (considerDocument(textDocument, DiagnosticPullMode.onSave)) {\n                    this.diagnosticRequestor.pull(event.textDocument);\n                }\n            }));\n            disposables.push(notebookFeature.onSaveNotificationSent((event) => {\n                for (const cell of event.getCells()) {\n                    if (matchesCell(cell)) {\n                        this.diagnosticRequestor.pull(cell.document);\n                    }\n                }\n            }));\n        }\n        // When the document closes clear things up\n        const closeFeature = client.getFeature(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.method);\n        disposables.push(closeFeature.onNotificationSent((event) => {\n            this.cleanUpDocument(event.textDocument);\n        }));\n        disposables.push(notebookFeature.onCloseNotificationSent((event) => {\n            for (const cell of event.getCells()) {\n                this.cleanUpDocument(cell.document);\n            }\n        }));\n        // Same when a tabs closes.\n        tabs.onClose((closed) => {\n            for (const document of closed) {\n                this.cleanUpDocument(document);\n            }\n        });\n        // We received a did change from the server.\n        this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(() => {\n            for (const textDocument of vscode_1.workspace.textDocuments) {\n                if (matches(textDocument)) {\n                    this.diagnosticRequestor.pull(textDocument);\n                }\n            }\n        });\n        // da348dc5-c30a-4515-9d98-31ff3be38d14 is the test UUID to test the middle ware. So don't auto trigger pulls.\n        if (options.workspaceDiagnostics === true && options.identifier !== 'da348dc5-c30a-4515-9d98-31ff3be38d14') {\n            this.diagnosticRequestor.pullWorkspace();\n        }\n        this.disposable = vscode_1.Disposable.from(...disposables, this.backgroundScheduler, this.diagnosticRequestor);\n    }\n    get onDidChangeDiagnosticsEmitter() {\n        return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter;\n    }\n    get diagnostics() {\n        return this.diagnosticRequestor.provider;\n    }\n    forget(document) {\n        this.cleanUpDocument(document);\n    }\n    cleanUpDocument(document) {\n        this.backgroundScheduler.remove(document);\n        if (this.diagnosticRequestor.knows(PullState.document, document)) {\n            this.diagnosticRequestor.forgetDocument(document);\n        }\n    }\n}\nclass DiagnosticFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = ensure(ensure(capabilities, 'textDocument'), 'diagnostic');\n        capability.relatedInformation = true;\n        capability.tagSupport = { valueSet: [vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary, vscode_languageserver_protocol_1.DiagnosticTag.Deprecated] };\n        capability.codeDescriptionSupport = true;\n        capability.dataSupport = true;\n        capability.dynamicRegistration = true;\n        // We first need to decide how a UI will look with related documents.\n        // An easy implementation would be to only show related diagnostics for\n        // the active editor.\n        capability.relatedDocumentSupport = false;\n        ensure(ensure(capabilities, 'workspace'), 'diagnostics').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.DiagnosticRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeDiagnosticsEmitter.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.diagnosticProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    clear() {\n        super.clear();\n    }\n    refresh() {\n        for (const provider of this.getAllProviders()) {\n            provider.onDidChangeDiagnosticsEmitter.fire();\n        }\n    }\n    registerLanguageProvider(options) {\n        const provider = new DiagnosticFeatureProviderImpl(this._client, this._client.tabsModel, options);\n        return [provider.disposable, provider];\n    }\n}\nexports.DiagnosticFeature = DiagnosticFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass SelectionRangeFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SelectionRangeRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'selectionRange');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.selectionRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideSelectionRanges: (document, positions, token) => {\n                const client = this._client;\n                const provideSelectionRanges = async (document, positions, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        positions: client.code2ProtocolConverter.asPositionsSync(positions, token)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, requestParams, token).then((ranges) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asSelectionRanges(ranges, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideSelectionRanges\n                    ? middleware.provideSelectionRanges(document, positions, token, provideSelectionRanges)\n                    : provideSelectionRanges(document, positions, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.SelectionRangeFeature = SelectionRangeFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CM = exports.ProtocolNotificationType = exports.ProtocolNotificationType0 = exports.ProtocolRequestType = exports.ProtocolRequestType0 = exports.RegistrationType = exports.MessageDirection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nvar MessageDirection;\n(function (MessageDirection) {\n    MessageDirection[\"clientToServer\"] = \"clientToServer\";\n    MessageDirection[\"serverToClient\"] = \"serverToClient\";\n    MessageDirection[\"both\"] = \"both\";\n})(MessageDirection || (exports.MessageDirection = MessageDirection = {}));\nclass RegistrationType {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    ____;\n    method;\n    constructor(method) {\n        this.method = method;\n    }\n}\nexports.RegistrationType = RegistrationType;\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\n    /**\n     * Clients must not use these properties. They are here to ensure correct typing.\n     * in TypeScript\n     */\n    __;\n    ___;\n    ____;\n    _pr;\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType0 = ProtocolRequestType0;\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    __;\n    ___;\n    ____;\n    _pr;\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolRequestType = ProtocolRequestType;\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    ___;\n    ____;\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    ___;\n    ____;\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolNotificationType = ProtocolNotificationType;\nvar CM;\n(function (CM) {\n    function create(client, server) {\n        return { client, server };\n    }\n    CM.create = create;\n})(CM || (exports.CM = CM = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass ProtocolDocumentLink extends code.DocumentLink {\n    data;\n    constructor(range, target) {\n        super(range, target);\n    }\n}\nexports.default = ProtocolDocumentLink;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide selection ranges in a document. The request's\n * parameter is of type {@link SelectionRangeParams}, the\n * response is of type {@link SelectionRange SelectionRange[]} or a Thenable\n * that resolves to such.\n */\nvar SelectionRangeRequest;\n(function (SelectionRangeRequest) {\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\n    SelectionRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\n    SelectionRangeRequest.capabilities = messages_1.CM.create('textDocument.selectionRange', 'selectionRangeProvider');\n})(SelectionRangeRequest || (exports.SelectionRangeRequest = SelectionRangeRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorProviderFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass ColorProviderFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'colorProvider').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.colorProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideColorPresentations: (color, context, token) => {\n                const client = this._client;\n                const provideColorPresentations = (color, context, token) => {\n                    const requestParams = {\n                        color,\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\n                        range: client.code2ProtocolConverter.asRange(context.range)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return this._client.protocol2CodeConverter.asColorPresentations(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideColorPresentations\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\n                    : provideColorPresentations(color, context, token);\n            },\n            provideDocumentColors: (document, token) => {\n                const client = this._client;\n                const provideDocumentColors = (document, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return this._client.protocol2CodeConverter.asColorInformations(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentColors\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\n                    : provideDocumentColors(document, token);\n            }\n        };\n        return [vscode_1.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.ColorProviderFeature = ColorProviderFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" preserve=\"true\"/>\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConnectionOptions = exports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy = exports.ConnectionStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.TraceValue = exports.Trace = exports.NullLogger = exports.ProgressType = exports.ProgressToken = void 0;\nexports.createMessageConnection = createMessageConnection;\nconst ral_1 = __importDefault(require(\"./ral\"));\nconst Is = __importStar(require(\"./is\"));\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressToken;\n(function (ProgressToken) {\n    function is(value) {\n        return typeof value === 'string' || typeof value === 'number';\n    }\n    ProgressToken.is = is;\n})(ProgressToken || (exports.ProgressToken = ProgressToken = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    /**\n     * Clients must not use these properties. They are here to ensure correct typing.\n     * in TypeScript\n     */\n    __;\n    _pr;\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nvar StarRequestHandler;\n(function (StarRequestHandler) {\n    function is(value) {\n        return Is.func(value);\n    }\n    StarRequestHandler.is = is;\n})(StarRequestHandler || (StarRequestHandler = {}));\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Compact\"] = 2] = \"Compact\";\n    Trace[Trace[\"Verbose\"] = 3] = \"Verbose\";\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceValue;\n(function (TraceValue) {\n    /**\n     * Turn tracing off.\n     */\n    TraceValue.Off = 'off';\n    /**\n     * Trace messages only.\n     */\n    TraceValue.Messages = 'messages';\n    /**\n     * Compact message tracing.\n     */\n    TraceValue.Compact = 'compact';\n    /**\n     * Verbose message tracing.\n     */\n    TraceValue.Verbose = 'verbose';\n})(TraceValue || (exports.TraceValue = TraceValue = {}));\n/**\n * @deprecated Use TraceValue instead\n */\nexports.TraceValues = TraceValue;\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'compact':\n                return Trace.Compact;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Compact:\n                return 'compact';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return TraceFormat.Text;\n        }\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTrace');\n})(SetTraceNotification || (exports.SetTraceNotification = SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTrace');\n})(LogTraceNotification || (exports.LogTraceNotification = LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors || (exports.ConnectionErrors = ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    code;\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy || (exports.ConnectionStrategy = ConnectionStrategy = {}));\nvar IdCancellationReceiverStrategy;\n(function (IdCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.kind === undefined || candidate.kind === 'id') && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    IdCancellationReceiverStrategy.is = is;\n})(IdCancellationReceiverStrategy || (exports.IdCancellationReceiverStrategy = IdCancellationReceiverStrategy = {}));\nvar RequestCancellationReceiverStrategy;\n(function (RequestCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'request' && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    RequestCancellationReceiverStrategy.is = is;\n})(RequestCancellationReceiverStrategy || (exports.RequestCancellationReceiverStrategy = RequestCancellationReceiverStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        return IdCancellationReceiverStrategy.is(value) || RequestCancellationReceiverStrategy.is(value);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            return conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy || (exports.CancellationSenderStrategy = CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy || (exports.CancellationStrategy = CancellationStrategy = {}));\nvar MessageStrategy;\n(function (MessageStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.handleMessage);\n    }\n    MessageStrategy.is = is;\n})(MessageStrategy || (exports.MessageStrategy = MessageStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate\n            && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy) || MessageStrategy.is(candidate.messageStrategy) || Is.number(candidate.maxParallelism));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions || (exports.ConnectionOptions = ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSequenceNumber = 0;\n    let unknownResponseSequenceNumber = 0;\n    const version = '2.0';\n    const maxParallelism = options?.maxParallelism ?? -1;\n    let inFlight = 0;\n    let starRequestHandler = undefined;\n    const requestHandlers = new Map();\n    let starNotificationHandler = undefined;\n    const notificationHandlers = new Map();\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = new Map();\n    let knownCanceledRequests = new Set();\n    let requestTokens = new Map();\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function createRequestQueueKey(id) {\n        if (id === null) {\n            throw new Error(`Can't send requests with id null since the response can't be correlated.`);\n        }\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSequenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSequenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.Message.isRequest(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            // If we have unlimited parallelism we queue the response to keep\n            // the previous semantics.\n            if (maxParallelism === -1) {\n                queue.set(createResponseQueueKey(message.id), message);\n            }\n            else {\n                // If we have limited parallelism we resolve responses to avoid\n                // dead locks.\n                handleResponse(message);\n            }\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        if (maxParallelism !== -1 && inFlight >= maxParallelism) {\n            return;\n        }\n        timer = (0, ral_1.default)().timer.setImmediate(async () => {\n            timer = undefined;\n            if (messageQueue.size === 0) {\n                return;\n            }\n            if (maxParallelism !== -1 && inFlight >= maxParallelism) {\n                return;\n            }\n            const message = messageQueue.shift();\n            let result;\n            try {\n                inFlight++;\n                const messageStrategy = options?.messageStrategy;\n                if (MessageStrategy.is(messageStrategy)) {\n                    result = messageStrategy.handleMessage(message, handleMessage);\n                }\n                else {\n                    result = handleMessage(message);\n                }\n            }\n            catch (error) {\n                logger.error(`Processing message queue failed: ${error.toString()}`);\n            }\n            finally {\n                if (result instanceof Promise) {\n                    result.then(() => {\n                        inFlight--;\n                        triggerMessageQueue();\n                    }).catch((error) => {\n                        logger.error(`Processing message queue failed: ${error.toString()}`);\n                    });\n                }\n                else {\n                    inFlight--;\n                }\n                triggerMessageQueue();\n            }\n        });\n    }\n    async function handleMessage(message) {\n        if (messages_1.Message.isRequest(message)) {\n            return handleRequest(message);\n        }\n        else if (messages_1.Message.isNotification(message)) {\n            return handleNotification(message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            return handleResponse(message);\n        }\n        else {\n            return handleInvalidMessage(message);\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.Message.isNotification(message) && message.method === CancelNotification.type.method) {\n                const cancelId = message.params.id;\n                const key = createRequestQueueKey(cancelId);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.Message.isRequest(toCancel)) {\n                    const strategy = options?.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        requestTokens.delete(cancelId);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response).catch(() => logger.error(`Sending response for canceled message failed.`));\n                        return;\n                    }\n                }\n                const cancellationToken = requestTokens.get(cancelId);\n                // The request is already running. Cancel the token\n                if (cancellationToken !== undefined) {\n                    cancellationToken.cancel();\n                    traceReceivedNotification(message);\n                    return;\n                }\n                else {\n                    // Remember the cancel but still queue the message to\n                    // clean up state in process message.\n                    knownCanceledRequests.add(cancelId);\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    async function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return Promise.resolve();\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            return messageWriter.write(message);\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            return messageWriter.write(message);\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers.get(requestMessage.method);\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = requestMessage.id ?? String(Date.now()); //\n            const cancellationSource = IdCancellationReceiverStrategy.is(cancellationStrategy.receiver)\n                ? cancellationStrategy.receiver.createCancellationTokenSource(tokenKey)\n                : cancellationStrategy.receiver.createCancellationTokenSource(requestMessage);\n            if (requestMessage.id !== null && knownCanceledRequests.has(requestMessage.id)) {\n                cancellationSource.cancel();\n            }\n            if (requestMessage.id !== null) {\n                requestTokens.set(tokenKey, cancellationSource);\n            }\n            try {\n                let handlerResult;\n                if (requestHandler) {\n                    if (requestMessage.params === undefined) {\n                        if (type !== undefined && type.numberOfParams !== 0) {\n                            return replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines ${type.numberOfParams} params but received none.`), requestMessage.method, startTime);\n                        }\n                        handlerResult = requestHandler(cancellationSource.token);\n                    }\n                    else if (Array.isArray(requestMessage.params)) {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byName) {\n                            return replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by name but received parameters by position`), requestMessage.method, startTime);\n                        }\n                        handlerResult = requestHandler(...requestMessage.params, cancellationSource.token);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            return replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by position but received parameters by name`), requestMessage.method, startTime);\n                        }\n                        handlerResult = requestHandler(requestMessage.params, cancellationSource.token);\n                    }\n                }\n                else if (starRequestHandler) {\n                    handlerResult = starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const resultOrError = await handlerResult;\n                await reply(resultOrError, requestMessage.method, startTime);\n            }\n            catch (error) {\n                if (error instanceof messages_1.ResponseError) {\n                    await reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    await replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    await replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n            finally {\n                requestTokens.delete(tokenKey);\n            }\n        }\n        else {\n            await replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = responseMessage.id;\n            const responsePromise = responsePromises.get(key);\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise !== undefined) {\n                responsePromises.delete(key);\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    async function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            const cancelId = message.params.id;\n            knownCanceledRequests.delete(cancelId);\n            traceReceivedNotification(message);\n            return;\n        }\n        else {\n            const element = notificationHandlers.get(message.method);\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (notificationHandler) {\n                    if (message.params === undefined) {\n                        if (type !== undefined) {\n                            if (type.numberOfParams !== 0 && type.parameterStructures !== messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received none.`);\n                            }\n                        }\n                        await notificationHandler();\n                    }\n                    else if (Array.isArray(message.params)) {\n                        // There are JSON-RPC libraries that send progress message as positional params although\n                        // specified as named. So convert them if this is the case.\n                        const params = message.params;\n                        if (message.method === ProgressNotification.type.method && params.length === 2 && ProgressToken.is(params[0])) {\n                            await notificationHandler({ token: params[0], value: params[1] });\n                        }\n                        else {\n                            if (type !== undefined) {\n                                if (type.parameterStructures === messages_1.ParameterStructures.byName) {\n                                    logger.error(`Notification ${message.method} defines parameters by name but received parameters by position`);\n                                }\n                                if (type.numberOfParams !== message.params.length) {\n                                    logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received ${params.length} arguments`);\n                                }\n                            }\n                            await notificationHandler(...params);\n                        }\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            logger.error(`Notification ${message.method} defines parameters by position but received parameters by name`);\n                        }\n                        await notificationHandler(message.params);\n                    }\n                }\n                else if (starNotificationHandler) {\n                    await starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = responseMessage.id;\n            const responseHandler = responsePromises.get(key);\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function stringifyTrace(params) {\n        if (params === undefined || params === null) {\n            return undefined;\n        }\n        switch (trace) {\n            case Trace.Verbose:\n                return JSON.stringify(params, null, 4);\n            case Trace.Compact:\n                return JSON.stringify(params);\n            default:\n                return undefined;\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}`;\n                }\n                else {\n                    data = 'No parameters provided.';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}`;\n                }\n                else {\n                    data = 'No parameters provided.';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function nullToUndefined(param) {\n        if (param === null) {\n            return undefined;\n        }\n        else {\n            return param;\n        }\n    }\n    function isNamedParam(param) {\n        return param !== undefined && param !== null && !Array.isArray(param) && typeof param === 'object';\n    }\n    function computeSingleParam(parameterStructures, param) {\n        switch (parameterStructures) {\n            case messages_1.ParameterStructures.auto:\n                if (isNamedParam(param)) {\n                    return nullToUndefined(param);\n                }\n                else {\n                    return [undefinedToNull(param)];\n                }\n            case messages_1.ParameterStructures.byName:\n                if (!isNamedParam(param)) {\n                    throw new Error(`Received parameters by name but param is not an object literal.`);\n                }\n                return nullToUndefined(param);\n            case messages_1.ParameterStructures.byPosition:\n                return [undefinedToNull(param)];\n            default:\n                throw new Error(`Unknown parameter structure ${parameterStructures.toString()}`);\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = undefined;\n                break;\n            case 1:\n                result = computeSingleParam(type.parameterStructures, params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                const paramEnd = args.length;\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' notification parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            return messageWriter.write(notificationMessage).catch((error) => {\n                logger.error(`Sending notification failed.`);\n                throw error;\n            });\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method;\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    method = type;\n                    notificationHandlers.set(type, { type: undefined, handler });\n                }\n                else {\n                    method = type.method;\n                    notificationHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method !== undefined) {\n                        if (notificationHandlers.get(method)?.handler === handler) {\n                            notificationHandlers.delete(method);\n                        }\n                    }\n                    else if (starNotificationHandler === type) {\n                        starNotificationHandler = undefined;\n                    }\n                }\n            };\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    if (progressHandlers.get(token) === handler) {\n                        progressHandlers.delete(token);\n                    }\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            // This should not await but simple return to ensure that we don't have another\n            // async scheduling. Otherwise one send could overtake another send.\n            return connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            function sendCancellation(connection, id) {\n                const p = cancellationStrategy.sender.sendCancellation(connection, id);\n                if (p === undefined) {\n                    logger.log(`Received no promise from cancellation strategy when cancelling id ${id}`);\n                }\n                else {\n                    p.catch(() => {\n                        logger.log(`Sending cancellation messages for id ${id} failed.`);\n                    });\n                }\n            }\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                const last = args[args.length - 1];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                if (cancellation_1.CancellationToken.is(last)) {\n                    paramEnd = paramEnd - 1;\n                    token = last;\n                }\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' request parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            let tokenWasCancelled = false;\n            if (token !== undefined) {\n                if (token.isCancellationRequested) {\n                    tokenWasCancelled = true;\n                }\n                else {\n                    disposable = token.onCancellationRequested(() => {\n                        sendCancellation(connection, id);\n                    });\n                }\n            }\n            const requestMessage = {\n                jsonrpc: version,\n                id: id,\n                method: method,\n                params: messageParams\n            };\n            traceSendingRequest(requestMessage);\n            if (typeof cancellationStrategy.sender.enableCancellation === 'function') {\n                cancellationStrategy.sender.enableCancellation(requestMessage);\n            }\n            // eslint-disable-next-line no-async-promise-executor\n            return new Promise(async (resolve, reject) => {\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                try {\n                    responsePromises.set(id, responsePromise);\n                    await messageWriter.write(requestMessage);\n                    if (tokenWasCancelled) {\n                        sendCancellation(connection, id);\n                    }\n                }\n                catch (error) {\n                    // Writing the message failed. So we need to delete it from the response promises and\n                    // reject it.\n                    responsePromises.delete(id);\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, error.message ? error.message : 'Unknown reason'));\n                    logger.error(`Sending request failed.`);\n                    throw error;\n                }\n            });\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method = null;\n            if (StarRequestHandler.is(type)) {\n                method = undefined;\n                starRequestHandler = type;\n            }\n            else if (Is.string(type)) {\n                method = null;\n                if (handler !== undefined) {\n                    method = type;\n                    requestHandlers.set(type, { handler: handler, type: undefined });\n                }\n            }\n            else {\n                if (handler !== undefined) {\n                    method = type.method;\n                    requestHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method === null) {\n                        return;\n                    }\n                    if (method !== undefined) {\n                        if (requestHandlers.get(method)?.handler === handler) {\n                            requestHandlers.delete(method);\n                        }\n                    }\n                    else if (starRequestHandler === type) {\n                        starRequestHandler = undefined;\n                    }\n                }\n            };\n        },\n        hasPendingResponse: () => {\n            return responsePromises.size > 0;\n        },\n        trace: async (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                await connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        end: () => {\n            messageWriter.end();\n        },\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new messages_1.ResponseError(messages_1.ErrorCodes.PendingResponseRejected, 'Pending response rejected since connection got disposed');\n            for (const promise of responsePromises.values()) {\n                promise.reject(error);\n            }\n            responsePromises = new Map();\n            requestTokens = new Map();\n            knownCanceledRequests = new Set();\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            (0, ral_1.default)().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        const verbose = trace === Trace.Verbose || trace === Trace.Compact;\n        tracer.log(params.message, verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, async (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            await handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractMessageBuffer = void 0;\nconst CR = 13;\nconst LF = 10;\nconst CRLF = '\\r\\n';\nclass AbstractMessageBuffer {\n    _encoding;\n    _chunks;\n    _totalLength;\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this._chunks = [];\n        this._totalLength = 0;\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        const toAppend = typeof chunk === 'string' ? this.fromString(chunk, this._encoding) : chunk;\n        this._chunks.push(toAppend);\n        this._totalLength += toAppend.byteLength;\n    }\n    tryReadHeaders(lowerCaseKeys = false) {\n        if (this._chunks.length === 0) {\n            return undefined;\n        }\n        let state = 0;\n        let chunkIndex = 0;\n        let offset = 0;\n        let chunkBytesRead = 0;\n        row: while (chunkIndex < this._chunks.length) {\n            const chunk = this._chunks[chunkIndex];\n            offset = 0;\n            while (offset < chunk.length) {\n                const value = chunk[offset];\n                switch (value) {\n                    case CR:\n                        switch (state) {\n                            case 0:\n                                state = 1;\n                                break;\n                            case 2:\n                                state = 3;\n                                break;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    case LF:\n                        switch (state) {\n                            case 1:\n                                state = 2;\n                                break;\n                            case 3:\n                                state = 4;\n                                offset++;\n                                break row;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    default:\n                        state = 0;\n                }\n                offset++;\n            }\n            chunkBytesRead += chunk.byteLength;\n            chunkIndex++;\n        }\n        if (state !== 4) {\n            return undefined;\n        }\n        // The buffer contains the two CRLF at the end. So we will\n        // have two empty lines after the split at the end as well.\n        const buffer = this._read(chunkBytesRead + offset);\n        const result = new Map();\n        const headers = this.toString(buffer, 'ascii').split(CRLF);\n        if (headers.length < 2) {\n            return result;\n        }\n        for (let i = 0; i < headers.length - 2; i++) {\n            const header = headers[i];\n            const index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error(`Message header must separate key and value using ':'\\n${header}`);\n            }\n            const key = header.substr(0, index);\n            const value = header.substr(index + 1).trim();\n            result.set(lowerCaseKeys ? key.toLowerCase() : key, value);\n        }\n        return result;\n    }\n    tryReadBody(length) {\n        if (this._totalLength < length) {\n            return undefined;\n        }\n        return this._read(length);\n    }\n    get numberOfBytes() {\n        return this._totalLength;\n    }\n    _read(byteCount) {\n        if (byteCount === 0) {\n            return this.emptyBuffer();\n        }\n        if (byteCount > this._totalLength) {\n            throw new Error(`Cannot read so many bytes!`);\n        }\n        if (this._chunks[0].byteLength === byteCount) {\n            // super fast path, precisely first chunk must be returned\n            const chunk = this._chunks[0];\n            this._chunks.shift();\n            this._totalLength -= byteCount;\n            return this.asNative(chunk);\n        }\n        if (this._chunks[0].byteLength > byteCount) {\n            // fast path, the reading is entirely within the first chunk\n            const chunk = this._chunks[0];\n            const result = this.asNative(chunk, byteCount);\n            this._chunks[0] = chunk.slice(byteCount);\n            this._totalLength -= byteCount;\n            return result;\n        }\n        const result = this.allocNative(byteCount);\n        let resultOffset = 0;\n        const chunkIndex = 0;\n        while (byteCount > 0) {\n            const chunk = this._chunks[chunkIndex];\n            if (chunk.byteLength > byteCount) {\n                // this chunk will survive\n                const chunkPart = chunk.slice(0, byteCount);\n                result.set(chunkPart, resultOffset);\n                resultOffset += byteCount;\n                this._chunks[chunkIndex] = chunk.slice(byteCount);\n                this._totalLength -= byteCount;\n                byteCount -= byteCount;\n            }\n            else {\n                // this chunk will be entirely read\n                result.set(chunk, resultOffset);\n                resultOffset += chunk.byteLength;\n                this._chunks.shift();\n                this._totalLength -= chunk.byteLength;\n                byteCount -= chunk.byteLength;\n            }\n        }\n        return result;\n    }\n}\nexports.AbstractMessageBuffer = AbstractMessageBuffer;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineValueFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass InlineValueFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.InlineValueRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'inlineValue').dynamicRegistration = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'inlineValue').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        this._client.onRequest(vscode_languageserver_protocol_1.InlineValueRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeInlineValues.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.inlineValueProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeInlineValues: eventEmitter.event,\n            provideInlineValues: (document, viewPort, context, token) => {\n                const client = this._client;\n                const provideInlineValues = (document, viewPort, context, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(viewPort),\n                        context: client.code2ProtocolConverter.asInlineValueContext(context)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.InlineValueRequest.type, requestParams, token).then((values) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asInlineValues(values, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlineValueRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideInlineValues\n                    ? middleware.provideInlineValues(document, viewPort, context, token, provideInlineValues)\n                    : provideInlineValues(document, viewPort, context, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), { provider: provider, onDidChangeInlineValues: eventEmitter }];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.InlineValueFeature = InlineValueFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass ImplementationFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const implementationSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'implementation');\n        implementationSupport.dynamicRegistration = true;\n        implementationSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.implementationProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideImplementation: (document, position, token) => {\n                const client = this._client;\n                const provideImplementation = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDefinitionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideImplementation\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\n                    : provideImplementation(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.ImplementationFeature = ImplementationFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchySubtypesRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `TypeHierarchyItem` in a document at a given position.\n * Can be used as an input to a subtypes or supertypes type hierarchy.\n *\n * @since 3.17.0\n */\nvar TypeHierarchyPrepareRequest;\n(function (TypeHierarchyPrepareRequest) {\n    TypeHierarchyPrepareRequest.method = 'textDocument/prepareTypeHierarchy';\n    TypeHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(TypeHierarchyPrepareRequest.method);\n    TypeHierarchyPrepareRequest.capabilities = messages_1.CM.create('textDocument.typeHierarchy', 'typeHierarchyProvider');\n})(TypeHierarchyPrepareRequest || (exports.TypeHierarchyPrepareRequest = TypeHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the supertypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySupertypesRequest;\n(function (TypeHierarchySupertypesRequest) {\n    TypeHierarchySupertypesRequest.method = 'typeHierarchy/supertypes';\n    TypeHierarchySupertypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySupertypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySupertypesRequest.method);\n})(TypeHierarchySupertypesRequest || (exports.TypeHierarchySupertypesRequest = TypeHierarchySupertypesRequest = {}));\n/**\n * A request to resolve the subtypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySubtypesRequest;\n(function (TypeHierarchySubtypesRequest) {\n    TypeHierarchySubtypesRequest.method = 'typeHierarchy/subtypes';\n    TypeHierarchySubtypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySubtypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySubtypesRequest.method);\n})(TypeHierarchySubtypesRequest || (exports.TypeHierarchySubtypesRequest = TypeHierarchySubtypesRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = createProtocolConnection;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nfunction createProtocolConnection(input, output, logger, options) {\n    if (vscode_jsonrpc_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, vscode_jsonrpc_1.createMessageConnection)(input, output, logger, options);\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolean = boolean;\nexports.string = string;\nexports.number = number;\nexports.error = error;\nexports.func = func;\nexports.array = array;\nexports.stringArray = stringArray;\nexports.typedArray = typedArray;\nexports.objectLiteral = objectLiteral;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nfunction error(value) {\n    return value instanceof Error;\n}\nfunction func(value) {\n    return typeof value === 'function';\n}\nfunction array(value) {\n    return Array.isArray(value);\n}\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nfunction objectLiteral(value) {\n    // Strictly speaking class instances pass this check as well. Since the LSP\n    // doesn't use classes we ignore this for now. If we do we need to add something\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n    return value !== null && typeof value === 'object';\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass DeclarationFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const declarationSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'declaration');\n        declarationSupport.dynamicRegistration = true;\n        declarationSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.declarationProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDeclaration: (document, position, token) => {\n                const client = this._client;\n                const provideDeclaration = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDeclarationResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDeclaration\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\n                    : provideDeclaration(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.DeclarationFeature = DeclarationFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = void 0;\nconst ral_1 = __importDefault(require(\"./ral\"));\nclass Semaphore {\n    _capacity;\n    _active;\n    _waiting;\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, ral_1.default)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`Too many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentSymbolFeature = exports.SupportedSymbolTags = exports.SupportedSymbolKinds = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nexports.SupportedSymbolKinds = [\n    vscode_languageserver_protocol_1.SymbolKind.File,\n    vscode_languageserver_protocol_1.SymbolKind.Module,\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\n    vscode_languageserver_protocol_1.SymbolKind.Package,\n    vscode_languageserver_protocol_1.SymbolKind.Class,\n    vscode_languageserver_protocol_1.SymbolKind.Method,\n    vscode_languageserver_protocol_1.SymbolKind.Property,\n    vscode_languageserver_protocol_1.SymbolKind.Field,\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\n    vscode_languageserver_protocol_1.SymbolKind.Function,\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\n    vscode_languageserver_protocol_1.SymbolKind.String,\n    vscode_languageserver_protocol_1.SymbolKind.Number,\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\n    vscode_languageserver_protocol_1.SymbolKind.Array,\n    vscode_languageserver_protocol_1.SymbolKind.Object,\n    vscode_languageserver_protocol_1.SymbolKind.Key,\n    vscode_languageserver_protocol_1.SymbolKind.Null,\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\n    vscode_languageserver_protocol_1.SymbolKind.Event,\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\n];\nexports.SupportedSymbolTags = [\n    vscode_languageserver_protocol_1.SymbolTag.Deprecated\n];\nclass DocumentSymbolFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const symbolCapabilities = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'documentSymbol');\n        symbolCapabilities.dynamicRegistration = true;\n        symbolCapabilities.symbolKind = {\n            valueSet: exports.SupportedSymbolKinds\n        };\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\n        symbolCapabilities.tagSupport = {\n            valueSet: exports.SupportedSymbolTags\n        };\n        symbolCapabilities.labelSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentSymbolProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentSymbols: (document, token) => {\n                const client = this._client;\n                const _provideDocumentSymbols = async (document, token) => {\n                    try {\n                        const data = await client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token);\n                        if (token.isCancellationRequested || data === undefined || data === null) {\n                            return null;\n                        }\n                        if (data.length === 0) {\n                            return [];\n                        }\n                        else {\n                            const first = data[0];\n                            if (vscode_languageserver_protocol_1.DocumentSymbol.is(first)) {\n                                return await client.protocol2CodeConverter.asDocumentSymbols(data, token);\n                            }\n                            else {\n                                return await client.protocol2CodeConverter.asSymbolInformations(data, token);\n                            }\n                        }\n                    }\n                    catch (error) {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, token, error, null);\n                    }\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentSymbols\n                    ? middleware.provideDocumentSymbols(document, token, _provideDocumentSymbols)\n                    : _provideDocumentSymbols(document, token);\n            }\n        };\n        const metaData = options.label !== undefined ? { label: options.label } : undefined;\n        return [vscode_1.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, metaData), provider];\n    }\n}\nexports.DocumentSymbolFeature = DocumentSymbolFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Message = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType = exports.RequestType0 = exports.AbstractMessageSignature = exports.ParameterStructures = exports.ResponseError = exports.ErrorCodes = void 0;\nconst is = __importStar(require(\"./is\"));\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    /**\n     * This is the start range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code. No application error codes should\n     * be defined between the start and end range. For backwards\n     * compatibility the `ServerNotInitialized` and the `UnknownErrorCode`\n     * are left in the range.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeStart = -32099;\n    /** @deprecated use  jsonrpcReservedErrorRangeStart */\n    ErrorCodes.serverErrorStart = -32099;\n    /**\n     * An error occurred when write a message to the transport layer.\n     */\n    ErrorCodes.MessageWriteError = -32099;\n    /**\n     * An error occurred when reading a message from the transport layer.\n     */\n    ErrorCodes.MessageReadError = -32098;\n    /**\n     * The connection got disposed or lost and all pending responses got\n     * rejected.\n     */\n    ErrorCodes.PendingResponseRejected = -32097;\n    /**\n     * The connection is inactive and a use of it failed.\n     */\n    ErrorCodes.ConnectionInactive = -32096;\n    /**\n     * Error code indicating that a server received a notification or\n     * request before the server has received the `initialize` request.\n     */\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    /**\n     * This is the end range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeEnd = -32000;\n    /** @deprecated use  jsonrpcReservedErrorRangeEnd */\n    ErrorCodes.serverErrorEnd = -32000;\n})(ErrorCodes || (exports.ErrorCodes = ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    code;\n    data;\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        const result = {\n            code: this.code,\n            message: this.message\n        };\n        if (this.data !== undefined) {\n            result.data = this.data;\n        }\n        return result;\n    }\n}\nexports.ResponseError = ResponseError;\nclass ParameterStructures {\n    kind;\n    /**\n     * The parameter structure is automatically inferred on the number of parameters\n     * and the parameter type in case of a single param.\n     */\n    static auto = new ParameterStructures('auto');\n    /**\n     * Forces `byPosition` parameter structure. This is useful if you have a single\n     * parameter which has a literal type.\n     */\n    static byPosition = new ParameterStructures('byPosition');\n    /**\n     * Forces `byName` parameter structure. This is only useful when having a single\n     * parameter. The library will report errors if used with a different number of\n     * parameters.\n     */\n    static byName = new ParameterStructures('byName');\n    constructor(kind) {\n        this.kind = kind;\n    }\n    static is(value) {\n        return value === ParameterStructures.auto || value === ParameterStructures.byName || value === ParameterStructures.byPosition;\n    }\n    toString() {\n        return this.kind;\n    }\n}\nexports.ParameterStructures = ParameterStructures;\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    method;\n    numberOfParams;\n    constructor(method, numberOfParams) {\n        this.method = method;\n        this.numberOfParams = numberOfParams;\n    }\n    get parameterStructures() {\n        return ParameterStructures.auto;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n */\nclass RequestType0 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    _parameterStructures;\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    _parameterStructures;\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\nclass NotificationType extends AbstractMessageSignature {\n    _parameterStructures;\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    _parameterStructures;\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\nvar Message;\n(function (Message) {\n    /**\n     * Tests if the given message is a request message\n     */\n    function isRequest(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n    }\n    Message.isRequest = isRequest;\n    /**\n     * Tests if the given message is a notification message\n     */\n    function isNotification(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && message.id === void 0;\n    }\n    Message.isNotification = isNotification;\n    /**\n     * Tests if the given message is a response message\n     */\n    function isResponse(message) {\n        const candidate = message;\n        return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n    }\n    Message.isResponse = isResponse;\n})(Message || (exports.Message = Message = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass CallHierarchyProvider {\n    client;\n    middleware;\n    constructor(client) {\n        this.client = client;\n        this.middleware = client.middleware;\n    }\n    prepareCallHierarchy(document, position, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const prepareCallHierarchy = (document, position, token) => {\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asCallHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, token, error, null);\n            });\n        };\n        return middleware.prepareCallHierarchy\n            ? middleware.prepareCallHierarchy(document, position, token, prepareCallHierarchy)\n            : prepareCallHierarchy(document, position, token);\n    }\n    provideCallHierarchyIncomingCalls(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideCallHierarchyIncomingCalls = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asCallHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asCallHierarchyIncomingCalls(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideCallHierarchyIncomingCalls\n            ? middleware.provideCallHierarchyIncomingCalls(item, token, provideCallHierarchyIncomingCalls)\n            : provideCallHierarchyIncomingCalls(item, token);\n    }\n    provideCallHierarchyOutgoingCalls(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideCallHierarchyOutgoingCalls = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asCallHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asCallHierarchyOutgoingCalls(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideCallHierarchyOutgoingCalls\n            ? middleware.provideCallHierarchyOutgoingCalls(item, token, provideCallHierarchyOutgoingCalls)\n            : provideCallHierarchyOutgoingCalls(item, token);\n    }\n}\nclass CallHierarchyFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type);\n    }\n    fillClientCapabilities(cap) {\n        const capabilities = cap;\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'callHierarchy');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.callHierarchyProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const client = this._client;\n        const provider = new CallHierarchyProvider(client);\n        return [vscode_1.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(options.documentSelector), provider), provider];\n    }\n}\nexports.CallHierarchyFeature = CallHierarchyFeature;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineCompletionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline completions in a document. The request's parameter is of\n * type {@link InlineCompletionParams}, the response is of type\n * {@link InlineCompletion InlineCompletion[]} or a Thenable that resolves to such.\n *\n * @since 3.18.0\n * @proposed\n */\nvar InlineCompletionRequest;\n(function (InlineCompletionRequest) {\n    InlineCompletionRequest.method = 'textDocument/inlineCompletion';\n    InlineCompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineCompletionRequest.type = new messages_1.ProtocolRequestType(InlineCompletionRequest.method);\n    InlineCompletionRequest.capabilities = messages_1.CM.create('textDocument.inlineCompletion', 'inlineCompletionProvider');\n})(InlineCompletionRequest || (exports.InlineCompletionRequest = InlineCompletionRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.empty = void 0;\nexports.v4 = v4;\nexports.isUUID = isUUID;\nexports.parse = parse;\nexports.generateUuid = generateUuid;\nclass ValueUUID {\n    _value;\n    constructor(_value) {\n        this._value = _value;\n        // empty\n    }\n    asHex() {\n        return this._value;\n    }\n    equals(other) {\n        return this.asHex() === other.asHex();\n    }\n}\nclass V4UUID extends ValueUUID {\n    static _chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n    static _timeHighBits = ['8', '9', 'a', 'b'];\n    static _oneOf(array) {\n        return array[Math.floor(array.length * Math.random())];\n    }\n    static _randomHex() {\n        return V4UUID._oneOf(V4UUID._chars);\n    }\n    constructor() {\n        super([\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            '4',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._oneOf(V4UUID._timeHighBits),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n        ].join(''));\n    }\n}\n/**\n * An empty UUID that contains only zeros.\n */\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\nfunction v4() {\n    return new V4UUID();\n}\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nfunction isUUID(value) {\n    return _UUIDPattern.test(value);\n}\n/**\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\n * @param value A uuid string.\n */\nfunction parse(value) {\n    if (!isUUID(value)) {\n        throw new Error('invalid uuid');\n    }\n    return new ValueUUID(value);\n}\nfunction generateUuid() {\n    return v4().asHex();\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeRefreshRequest = exports.FoldingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide folding ranges in a document. The request's\n * parameter is of type {@link FoldingRangeParams}, the\n * response is of type {@link FoldingRangeList} or a Thenable\n * that resolves to such.\n */\nvar FoldingRangeRequest;\n(function (FoldingRangeRequest) {\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\n    FoldingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\n    FoldingRangeRequest.capabilities = messages_1.CM.create('textDocument.foldingRange', 'foldingRangeProvider');\n})(FoldingRangeRequest || (exports.FoldingRangeRequest = FoldingRangeRequest = {}));\n/**\n * @since 3.18.0\n * @proposed\n */\nvar FoldingRangeRefreshRequest;\n(function (FoldingRangeRefreshRequest) {\n    FoldingRangeRefreshRequest.method = `workspace/foldingRange/refresh`;\n    FoldingRangeRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    FoldingRangeRefreshRequest.type = new messages_1.ProtocolRequestType0(FoldingRangeRefreshRequest.method);\n    FoldingRangeRefreshRequest.capabilities = messages_1.CM.create('workspace.foldingRange.refreshSupport', undefined);\n})(FoldingRangeRefreshRequest || (exports.FoldingRangeRefreshRequest = FoldingRangeRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShowDocumentRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to show a document. This request might open an\n * external program depending on the value of the URI to open.\n * For example a request to open `https://code.visualstudio.com/`\n * will very likely open the URI in a WEB browser.\n *\n * @since 3.16.0\n*/\nvar ShowDocumentRequest;\n(function (ShowDocumentRequest) {\n    ShowDocumentRequest.method = 'window/showDocument';\n    ShowDocumentRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowDocumentRequest.type = new messages_1.ProtocolRequestType(ShowDocumentRequest.method);\n    ShowDocumentRequest.capabilities = messages_1.CM.create('window.showDocument.support', undefined);\n})(ShowDocumentRequest || (exports.ShowDocumentRequest = ShowDocumentRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigurationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n//---- Get Configuration request ----\n/**\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\n * configuration setting.\n *\n * This pull model replaces the old push model were the client signaled configuration change via an\n * event. If the server still needs to react to configuration changes (since the server caches the\n * result of `workspace/configuration` requests) the server should register for an empty configuration\n * change event and empty the cache if such an event is received.\n */\nvar ConfigurationRequest;\n(function (ConfigurationRequest) {\n    ConfigurationRequest.method = 'workspace/configuration';\n    ConfigurationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType(ConfigurationRequest.method);\n    ConfigurationRequest.capabilities = messages_1.CM.create('workspace.configuration', undefined);\n})(ConfigurationRequest || (exports.ConfigurationRequest = ConfigurationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidSaveTextDocumentFeature = exports.WillSaveWaitUntilFeature = exports.WillSaveFeature = exports.DidChangeTextDocumentFeature = exports.DidCloseTextDocumentFeature = exports.DidOpenTextDocumentFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass DidOpenTextDocumentFeature extends features_1.TextDocumentEventFeature {\n    _syncedDocuments;\n    _pendingOpenNotifications;\n    _delayOpen;\n    _pendingOpenListeners;\n    constructor(client, syncedDocuments) {\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, () => client.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), (data) => data, features_1.TextDocumentEventFeature.textDocumentFilter);\n        this._syncedDocuments = syncedDocuments;\n        this._pendingOpenNotifications = new Map();\n        this._delayOpen = client.clientOptions.textSynchronization?.delayOpenNotifications ?? false;\n    }\n    async callback(document) {\n        if (!this._delayOpen) {\n            return super.callback(document);\n        }\n        else {\n            if (!this.matches(document)) {\n                return;\n            }\n            const tabsModel = this._client.tabsModel;\n            if (tabsModel.isVisible(document)) {\n                return super.callback(document);\n            }\n            else {\n                this._pendingOpenNotifications.set(document.uri.toString(), document);\n            }\n        }\n    }\n    get openDocuments() {\n        return this._syncedDocuments.values();\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\n            this.register({ id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\n        }\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\n    }\n    register(data) {\n        super.register(data);\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        const documentSelector = this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector);\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\n            const uri = textDocument.uri.toString();\n            if (this._syncedDocuments.has(uri)) {\n                return;\n            }\n            if (vscode_1.languages.match(documentSelector, textDocument) > 0 && !this._client.hasDedicatedTextSynchronizationFeature(textDocument)) {\n                const tabsModel = this._client.tabsModel;\n                if (tabsModel.isVisible(textDocument)) {\n                    const middleware = this._client.middleware;\n                    const didOpen = (textDocument) => {\n                        return this._client.sendNotification(this._type, this._createParams(textDocument));\n                    };\n                    (middleware.didOpen ? middleware.didOpen(textDocument, didOpen) : didOpen(textDocument)).catch((error) => {\n                        this._client.error(`Sending document notification ${this._type.method} failed`, error);\n                    });\n                    this._syncedDocuments.set(uri, textDocument);\n                }\n                else {\n                    this._pendingOpenNotifications.set(uri, textDocument);\n                }\n            }\n        });\n        if (this._delayOpen && this._pendingOpenListeners === undefined) {\n            this._pendingOpenListeners = [];\n            const tabsModel = this._client.tabsModel;\n            this._pendingOpenListeners.push(tabsModel.onClose((closed) => {\n                for (const uri of closed) {\n                    this._pendingOpenNotifications.delete(uri.toString());\n                }\n            }));\n            this._pendingOpenListeners.push(tabsModel.onOpen((opened) => {\n                for (const uri of opened) {\n                    const document = this._pendingOpenNotifications.get(uri.toString());\n                    if (document !== undefined) {\n                        super.callback(document).catch(((error) => {\n                            this._client.error(`Sending document notification ${this._type.method} failed`, error);\n                        }));\n                        this._pendingOpenNotifications.delete(uri.toString());\n                    }\n                }\n            }));\n            this._pendingOpenListeners.push(vscode_1.workspace.onDidCloseTextDocument((document) => {\n                this._pendingOpenNotifications.delete(document.uri.toString());\n            }));\n        }\n    }\n    async sendPendingOpenNotifications(closingDocument) {\n        const notifications = Array.from(this._pendingOpenNotifications.values());\n        this._pendingOpenNotifications.clear();\n        for (const notification of notifications) {\n            if (closingDocument !== undefined && notification.uri.toString() === closingDocument) {\n                continue;\n            }\n            await super.callback(notification);\n        }\n    }\n    getTextDocument(data) {\n        return data;\n    }\n    notificationSent(textDocument, type, params) {\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\n        super.notificationSent(textDocument, type, params);\n    }\n    clear() {\n        this._pendingOpenNotifications.clear();\n        if (this._pendingOpenListeners !== undefined) {\n            for (const listener of this._pendingOpenListeners) {\n                listener.dispose();\n            }\n            this._pendingOpenListeners = undefined;\n        }\n        super.clear();\n    }\n}\nexports.DidOpenTextDocumentFeature = DidOpenTextDocumentFeature;\nclass DidCloseTextDocumentFeature extends features_1.TextDocumentEventFeature {\n    _syncedDocuments;\n    _pendingTextDocumentChanges;\n    constructor(client, syncedDocuments, pendingTextDocumentChanges) {\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, () => client.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), (data) => data, features_1.TextDocumentEventFeature.textDocumentFilter);\n        this._syncedDocuments = syncedDocuments;\n        this._pendingTextDocumentChanges = pendingTextDocumentChanges;\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\n            this.register({ id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\n        }\n    }\n    async callback(data) {\n        await super.callback(data);\n        this._pendingTextDocumentChanges.delete(data.uri.toString());\n    }\n    getTextDocument(data) {\n        return data;\n    }\n    notificationSent(textDocument, type, params) {\n        this._syncedDocuments.delete(textDocument.uri.toString());\n        super.notificationSent(textDocument, type, params);\n    }\n    unregister(id) {\n        const selector = this._selectors.get(id);\n        if (selector === undefined) {\n            return;\n        }\n        // The super call removed the selector from the map\n        // of selectors.\n        super.unregister(id);\n        const selectors = this._selectors.values();\n        this._syncedDocuments.forEach((textDocument) => {\n            if (vscode_1.languages.match(selector, textDocument) > 0 && !this._selectorFilter(selectors, textDocument) && !this._client.hasDedicatedTextSynchronizationFeature(textDocument)) {\n                const middleware = this._client.middleware;\n                const didClose = (textDocument) => {\n                    return this._client.sendNotification(this._type, this._createParams(textDocument));\n                };\n                this._syncedDocuments.delete(textDocument.uri.toString());\n                (middleware.didClose ? middleware.didClose(textDocument, didClose) : didClose(textDocument)).catch((error) => {\n                    this._client.error(`Sending document notification ${this._type.method} failed`, error);\n                });\n            }\n        });\n    }\n}\nexports.DidCloseTextDocumentFeature = DidCloseTextDocumentFeature;\nclass DidChangeTextDocumentFeature extends features_1.DynamicDocumentFeature {\n    _listener;\n    _changeData;\n    _onNotificationSent;\n    _onPendingChangeAdded;\n    _pendingTextDocumentChanges;\n    _syncKind;\n    constructor(client, pendingTextDocumentChanges) {\n        super(client);\n        this._changeData = new Map();\n        this._onNotificationSent = new vscode_1.EventEmitter();\n        this._onPendingChangeAdded = new vscode_1.EventEmitter();\n        this._pendingTextDocumentChanges = pendingTextDocumentChanges;\n        this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n    }\n    get onNotificationSent() {\n        return this._onNotificationSent.event;\n    }\n    get onPendingChangeAdded() {\n        return this._onPendingChangeAdded.event;\n    }\n    get syncKind() {\n        return this._syncKind;\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== undefined && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\n            });\n        }\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\n        }\n        this._changeData.set(data.id, {\n            syncKind: data.registerOptions.syncKind,\n            documentSelector: this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector),\n        });\n        this.updateSyncKind(data.registerOptions.syncKind);\n    }\n    *getDocumentSelectors() {\n        for (const data of this._changeData.values()) {\n            yield data.documentSelector;\n        }\n    }\n    async callback(event) {\n        // Text document changes are send for dirty changes as well. We don't\n        // have dirty / un-dirty events in the LSP so we ignore content changes\n        // with length zero.\n        if (event.contentChanges.length === 0) {\n            return;\n        }\n        // We need to capture the URI and version here since they might change on the text document\n        // until we reach did `didChange` call since the middleware support async execution.\n        const uri = event.document.uri;\n        const version = event.document.version;\n        const promises = [];\n        for (const changeData of this._changeData.values()) {\n            if (vscode_1.languages.match(changeData.documentSelector, event.document) > 0 && !this._client.hasDedicatedTextSynchronizationFeature(event.document)) {\n                const middleware = this._client.middleware;\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\n                    const didChange = async (event) => {\n                        const params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event, uri, version);\n                        await this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                        this.notificationSent(event.document, vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                    };\n                    promises.push(middleware.didChange ? middleware.didChange(event, event => didChange(event)) : didChange(event));\n                }\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n                    const didChange = async (event) => {\n                        const eventUri = event.document.uri.toString();\n                        this._pendingTextDocumentChanges.set(eventUri, event.document);\n                        this._onPendingChangeAdded.fire();\n                    };\n                    promises.push(middleware.didChange ? middleware.didChange(event, event => didChange(event)) : didChange(event));\n                }\n            }\n        }\n        return Promise.all(promises).then(undefined, (error) => {\n            this._client.error(`Sending document notification ${vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method} failed`, error);\n            throw error;\n        });\n    }\n    notificationSent(textDocument, type, params) {\n        this._onNotificationSent.fire({ textDocument, type, params });\n    }\n    unregister(id) {\n        this._changeData.delete(id);\n        if (this._changeData.size === 0) {\n            if (this._listener) {\n                this._listener.dispose();\n                this._listener = undefined;\n            }\n            this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n        }\n        else {\n            this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n            for (const changeData of this._changeData.values()) {\n                this.updateSyncKind(changeData.syncKind);\n                if (this._syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n                    break;\n                }\n            }\n        }\n    }\n    clear() {\n        this._pendingTextDocumentChanges.clear();\n        this._changeData.clear();\n        this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getPendingDocumentChanges(excludes) {\n        if (this._pendingTextDocumentChanges.size === 0) {\n            return [];\n        }\n        let result;\n        if (excludes.size === 0) {\n            result = Array.from(this._pendingTextDocumentChanges.values());\n            this._pendingTextDocumentChanges.clear();\n        }\n        else {\n            result = [];\n            for (const entry of this._pendingTextDocumentChanges) {\n                if (!excludes.has(entry[0])) {\n                    result.push(entry[1]);\n                    this._pendingTextDocumentChanges.delete(entry[0]);\n                }\n            }\n        }\n        return result;\n    }\n    getProvider(document) {\n        for (const changeData of this._changeData.values()) {\n            if (vscode_1.languages.match(changeData.documentSelector, document) > 0) {\n                return {\n                    send: (event) => {\n                        return this.callback(event);\n                    }\n                };\n            }\n        }\n        return undefined;\n    }\n    updateSyncKind(syncKind) {\n        if (this._syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n            return;\n        }\n        switch (syncKind) {\n            case vscode_languageserver_protocol_1.TextDocumentSyncKind.Full:\n                this._syncKind = syncKind;\n                break;\n            case vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental:\n                if (this._syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n                    this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental;\n                }\n                break;\n        }\n    }\n}\nexports.DidChangeTextDocumentFeature = DidChangeTextDocumentFeature;\nclass WillSaveFeature extends features_1.TextDocumentEventFeature {\n    constructor(client) {\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, () => client.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (event) => event.document, (selectors, willSaveEvent) => features_1.TextDocumentEventFeature.textDocumentFilter(selectors, willSaveEvent.document));\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        const value = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization');\n        value.willSave = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: { documentSelector: documentSelector }\n            });\n        }\n    }\n    getTextDocument(data) {\n        return data.document;\n    }\n}\nexports.WillSaveFeature = WillSaveFeature;\nclass WillSaveWaitUntilFeature extends features_1.DynamicDocumentFeature {\n    _listener;\n    _selectors;\n    constructor(client) {\n        super(client);\n        this._selectors = new Map();\n    }\n    getDocumentSelectors() {\n        return this._selectors.values();\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\n    }\n    fillClientCapabilities(capabilities) {\n        const value = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization');\n        value.willSaveWaitUntil = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: { documentSelector: documentSelector }\n            });\n        }\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\n        }\n        this._selectors.set(data.id, this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector));\n    }\n    callback(event) {\n        if (features_1.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(), event.document) && !this._client.hasDedicatedTextSynchronizationFeature(event.document)) {\n            const middleware = this._client.middleware;\n            const willSaveWaitUntil = (event) => {\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then(async (edits) => {\n                    const vEdits = await this._client.protocol2CodeConverter.asTextEdits(edits);\n                    return vEdits === undefined ? [] : vEdits;\n                });\n            };\n            event.waitUntil(middleware.willSaveWaitUntil\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\n                : willSaveWaitUntil(event));\n        }\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    clear() {\n        this._selectors.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n}\nexports.WillSaveWaitUntilFeature = WillSaveWaitUntilFeature;\nclass DidSaveTextDocumentFeature extends features_1.TextDocumentEventFeature {\n    _includeText;\n    constructor(client) {\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, () => client.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), (data) => data, features_1.TextDocumentEventFeature.textDocumentFilter);\n        this._includeText = false;\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').didSave = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\n            const saveOptions = typeof textDocumentSyncOptions.save === 'boolean'\n                ? { includeText: false }\n                : { includeText: !!textDocumentSyncOptions.save.includeText };\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, saveOptions)\n            });\n        }\n    }\n    register(data) {\n        this._includeText = !!data.registerOptions.includeText;\n        super.register(data);\n    }\n    getTextDocument(data) {\n        return data;\n    }\n}\nexports.DidSaveTextDocumentFeature = DidSaveTextDocumentFeature;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide ranges that can be edited together.\n *\n * @since 3.16.0\n */\nvar LinkedEditingRangeRequest;\n(function (LinkedEditingRangeRequest) {\n    LinkedEditingRangeRequest.method = 'textDocument/linkedEditingRange';\n    LinkedEditingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    LinkedEditingRangeRequest.type = new messages_1.ProtocolRequestType(LinkedEditingRangeRequest.method);\n    LinkedEditingRangeRequest.capabilities = messages_1.CM.create('textDocument.linkedEditingRange', 'linkedEditingRangeProvider');\n})(LinkedEditingRangeRequest || (exports.LinkedEditingRangeRequest = LinkedEditingRangeRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" preserve=\"true\"/>\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressType = exports.ProgressToken = exports.createMessageConnection = exports.NullLogger = exports.ConnectionOptions = exports.ConnectionStrategy = exports.AbstractMessageBuffer = exports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = exports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = exports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = exports.CancellationToken = exports.CancellationTokenSource = exports.Emitter = exports.Event = exports.Disposable = exports.LRUCache = exports.Touch = exports.LinkedMap = exports.ParameterStructures = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.ErrorCodes = exports.ResponseError = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType0 = exports.RequestType = exports.Message = exports.RAL = void 0;\nexports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.RequestCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy = exports.CancellationReceiverStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.TraceValue = exports.Trace = void 0;\nconst messages_1 = require(\"./messages\");\nObject.defineProperty(exports, \"Message\", { enumerable: true, get: function () { return messages_1.Message; } });\nObject.defineProperty(exports, \"RequestType\", { enumerable: true, get: function () { return messages_1.RequestType; } });\nObject.defineProperty(exports, \"RequestType0\", { enumerable: true, get: function () { return messages_1.RequestType0; } });\nObject.defineProperty(exports, \"RequestType1\", { enumerable: true, get: function () { return messages_1.RequestType1; } });\nObject.defineProperty(exports, \"RequestType2\", { enumerable: true, get: function () { return messages_1.RequestType2; } });\nObject.defineProperty(exports, \"RequestType3\", { enumerable: true, get: function () { return messages_1.RequestType3; } });\nObject.defineProperty(exports, \"RequestType4\", { enumerable: true, get: function () { return messages_1.RequestType4; } });\nObject.defineProperty(exports, \"RequestType5\", { enumerable: true, get: function () { return messages_1.RequestType5; } });\nObject.defineProperty(exports, \"RequestType6\", { enumerable: true, get: function () { return messages_1.RequestType6; } });\nObject.defineProperty(exports, \"RequestType7\", { enumerable: true, get: function () { return messages_1.RequestType7; } });\nObject.defineProperty(exports, \"RequestType8\", { enumerable: true, get: function () { return messages_1.RequestType8; } });\nObject.defineProperty(exports, \"RequestType9\", { enumerable: true, get: function () { return messages_1.RequestType9; } });\nObject.defineProperty(exports, \"ResponseError\", { enumerable: true, get: function () { return messages_1.ResponseError; } });\nObject.defineProperty(exports, \"ErrorCodes\", { enumerable: true, get: function () { return messages_1.ErrorCodes; } });\nObject.defineProperty(exports, \"NotificationType\", { enumerable: true, get: function () { return messages_1.NotificationType; } });\nObject.defineProperty(exports, \"NotificationType0\", { enumerable: true, get: function () { return messages_1.NotificationType0; } });\nObject.defineProperty(exports, \"NotificationType1\", { enumerable: true, get: function () { return messages_1.NotificationType1; } });\nObject.defineProperty(exports, \"NotificationType2\", { enumerable: true, get: function () { return messages_1.NotificationType2; } });\nObject.defineProperty(exports, \"NotificationType3\", { enumerable: true, get: function () { return messages_1.NotificationType3; } });\nObject.defineProperty(exports, \"NotificationType4\", { enumerable: true, get: function () { return messages_1.NotificationType4; } });\nObject.defineProperty(exports, \"NotificationType5\", { enumerable: true, get: function () { return messages_1.NotificationType5; } });\nObject.defineProperty(exports, \"NotificationType6\", { enumerable: true, get: function () { return messages_1.NotificationType6; } });\nObject.defineProperty(exports, \"NotificationType7\", { enumerable: true, get: function () { return messages_1.NotificationType7; } });\nObject.defineProperty(exports, \"NotificationType8\", { enumerable: true, get: function () { return messages_1.NotificationType8; } });\nObject.defineProperty(exports, \"NotificationType9\", { enumerable: true, get: function () { return messages_1.NotificationType9; } });\nObject.defineProperty(exports, \"ParameterStructures\", { enumerable: true, get: function () { return messages_1.ParameterStructures; } });\nconst linkedMap_1 = require(\"./linkedMap\");\nObject.defineProperty(exports, \"LinkedMap\", { enumerable: true, get: function () { return linkedMap_1.LinkedMap; } });\nObject.defineProperty(exports, \"LRUCache\", { enumerable: true, get: function () { return linkedMap_1.LRUCache; } });\nObject.defineProperty(exports, \"Touch\", { enumerable: true, get: function () { return linkedMap_1.Touch; } });\nconst disposable_1 = require(\"./disposable\");\nObject.defineProperty(exports, \"Disposable\", { enumerable: true, get: function () { return disposable_1.Disposable; } });\nconst events_1 = require(\"./events\");\nObject.defineProperty(exports, \"Event\", { enumerable: true, get: function () { return events_1.Event; } });\nObject.defineProperty(exports, \"Emitter\", { enumerable: true, get: function () { return events_1.Emitter; } });\nconst cancellation_1 = require(\"./cancellation\");\nObject.defineProperty(exports, \"CancellationTokenSource\", { enumerable: true, get: function () { return cancellation_1.CancellationTokenSource; } });\nObject.defineProperty(exports, \"CancellationToken\", { enumerable: true, get: function () { return cancellation_1.CancellationToken; } });\nconst sharedArrayCancellation_1 = require(\"./sharedArrayCancellation\");\nObject.defineProperty(exports, \"SharedArraySenderStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArraySenderStrategy; } });\nObject.defineProperty(exports, \"SharedArrayReceiverStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArrayReceiverStrategy; } });\nconst messageReader_1 = require(\"./messageReader\");\nObject.defineProperty(exports, \"MessageReader\", { enumerable: true, get: function () { return messageReader_1.MessageReader; } });\nObject.defineProperty(exports, \"AbstractMessageReader\", { enumerable: true, get: function () { return messageReader_1.AbstractMessageReader; } });\nObject.defineProperty(exports, \"ReadableStreamMessageReader\", { enumerable: true, get: function () { return messageReader_1.ReadableStreamMessageReader; } });\nconst messageWriter_1 = require(\"./messageWriter\");\nObject.defineProperty(exports, \"MessageWriter\", { enumerable: true, get: function () { return messageWriter_1.MessageWriter; } });\nObject.defineProperty(exports, \"AbstractMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.AbstractMessageWriter; } });\nObject.defineProperty(exports, \"WriteableStreamMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.WriteableStreamMessageWriter; } });\nconst messageBuffer_1 = require(\"./messageBuffer\");\nObject.defineProperty(exports, \"AbstractMessageBuffer\", { enumerable: true, get: function () { return messageBuffer_1.AbstractMessageBuffer; } });\nconst connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"ConnectionStrategy\", { enumerable: true, get: function () { return connection_1.ConnectionStrategy; } });\nObject.defineProperty(exports, \"ConnectionOptions\", { enumerable: true, get: function () { return connection_1.ConnectionOptions; } });\nObject.defineProperty(exports, \"NullLogger\", { enumerable: true, get: function () { return connection_1.NullLogger; } });\nObject.defineProperty(exports, \"createMessageConnection\", { enumerable: true, get: function () { return connection_1.createMessageConnection; } });\nObject.defineProperty(exports, \"ProgressToken\", { enumerable: true, get: function () { return connection_1.ProgressToken; } });\nObject.defineProperty(exports, \"ProgressType\", { enumerable: true, get: function () { return connection_1.ProgressType; } });\nObject.defineProperty(exports, \"Trace\", { enumerable: true, get: function () { return connection_1.Trace; } });\nObject.defineProperty(exports, \"TraceValue\", { enumerable: true, get: function () { return connection_1.TraceValue; } });\nObject.defineProperty(exports, \"TraceFormat\", { enumerable: true, get: function () { return connection_1.TraceFormat; } });\nObject.defineProperty(exports, \"SetTraceNotification\", { enumerable: true, get: function () { return connection_1.SetTraceNotification; } });\nObject.defineProperty(exports, \"LogTraceNotification\", { enumerable: true, get: function () { return connection_1.LogTraceNotification; } });\nObject.defineProperty(exports, \"ConnectionErrors\", { enumerable: true, get: function () { return connection_1.ConnectionErrors; } });\nObject.defineProperty(exports, \"ConnectionError\", { enumerable: true, get: function () { return connection_1.ConnectionError; } });\nObject.defineProperty(exports, \"CancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.CancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"IdCancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.IdCancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"RequestCancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.RequestCancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"CancellationSenderStrategy\", { enumerable: true, get: function () { return connection_1.CancellationSenderStrategy; } });\nObject.defineProperty(exports, \"CancellationStrategy\", { enumerable: true, get: function () { return connection_1.CancellationStrategy; } });\nObject.defineProperty(exports, \"MessageStrategy\", { enumerable: true, get: function () { return connection_1.MessageStrategy; } });\nObject.defineProperty(exports, \"TraceValues\", { enumerable: true, get: function () { return connection_1.TraceValues; } });\nconst ral_1 = __importDefault(require(\"./ral\"));\nexports.RAL = ral_1.default;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceFeature = exports.TextDocumentLanguageFeature = exports.TextDocumentEventFeature = exports.DynamicDocumentFeature = exports.DynamicFeature = exports.StaticFeature = exports.LSPCancellationError = void 0;\nexports.ensure = ensure;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = __importStar(require(\"./utils/is\"));\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass LSPCancellationError extends vscode_1.CancellationError {\n    data;\n    constructor(data) {\n        super();\n        this.data = data;\n    }\n}\nexports.LSPCancellationError = LSPCancellationError;\nfunction ensure(target, key) {\n    if (target[key] === undefined) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar StaticFeature;\n(function (StaticFeature) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null &&\n            Is.func(candidate.fillClientCapabilities) && Is.func(candidate.initialize) && Is.func(candidate.getState) && Is.func(candidate.clear) &&\n            (candidate.fillInitializeParams === undefined || Is.func(candidate.fillInitializeParams));\n    }\n    StaticFeature.is = is;\n})(StaticFeature || (exports.StaticFeature = StaticFeature = {}));\nvar DynamicFeature;\n(function (DynamicFeature) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null &&\n            Is.func(candidate.fillClientCapabilities) && Is.func(candidate.initialize) && Is.func(candidate.getState) && Is.func(candidate.clear) &&\n            (candidate.fillInitializeParams === undefined || Is.func(candidate.fillInitializeParams)) && Is.func(candidate.register) &&\n            Is.func(candidate.unregister) && candidate.registrationType !== undefined;\n    }\n    DynamicFeature.is = is;\n})(DynamicFeature || (exports.DynamicFeature = DynamicFeature = {}));\n/**\n * An abstract dynamic feature implementation that operates on documents (e.g. text\n * documents or notebooks).\n */\nclass DynamicDocumentFeature {\n    _client;\n    constructor(client) {\n        this._client = client;\n    }\n    /**\n     * Returns the state the feature is in.\n     */\n    getState() {\n        const selectors = this.getDocumentSelectors();\n        let count = 0;\n        for (const selector of selectors) {\n            count++;\n            for (const document of vscode_1.workspace.textDocuments) {\n                if (vscode_1.languages.match(selector, document) > 0) {\n                    return { kind: 'document', id: this.registrationType.method, registrations: true, matches: true };\n                }\n            }\n        }\n        const registrations = count > 0;\n        return { kind: 'document', id: this.registrationType.method, registrations, matches: false };\n    }\n}\nexports.DynamicDocumentFeature = DynamicDocumentFeature;\n/**\n * An abstract base class to implement features that react to events\n * emitted from text documents.\n */\nclass TextDocumentEventFeature extends DynamicDocumentFeature {\n    _event;\n    _type;\n    _middleware;\n    _createParams;\n    _textDocument;\n    _selectorFilter;\n    _listener;\n    _selectors;\n    _onNotificationSent;\n    static textDocumentFilter(selectors, textDocument) {\n        for (const selector of selectors) {\n            if (vscode_1.languages.match(selector, textDocument) > 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n    constructor(client, event, type, middleware, createParams, textDocument, selectorFilter) {\n        super(client);\n        this._event = event;\n        this._type = type;\n        this._middleware = middleware;\n        this._createParams = createParams;\n        this._textDocument = textDocument;\n        this._selectorFilter = selectorFilter;\n        this._selectors = new Map();\n        this._onNotificationSent = new vscode_1.EventEmitter();\n    }\n    getStateInfo() {\n        return [this._selectors.values(), false];\n    }\n    getDocumentSelectors() {\n        return this._selectors.values();\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = this._event((data) => {\n                this.callback(data).catch((error) => {\n                    this._client.error(`Sending document notification ${this._type.method} failed.`, error);\n                });\n            });\n        }\n        this._selectors.set(data.id, this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector));\n    }\n    async callback(data) {\n        const doSend = async (data) => {\n            const params = this._createParams(data);\n            await this._client.sendNotification(this._type, params);\n            this.notificationSent(this.getTextDocument(data), this._type, params);\n        };\n        if (this.matches(data)) {\n            const middleware = this._middleware();\n            return middleware ? middleware(data, (data) => doSend(data)) : doSend(data);\n        }\n    }\n    matches(data) {\n        if (this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(data))) {\n            return false;\n        }\n        return !this._selectorFilter || this._selectorFilter(this._selectors.values(), data);\n    }\n    get onNotificationSent() {\n        return this._onNotificationSent.event;\n    }\n    notificationSent(textDocument, type, params) {\n        this._onNotificationSent.fire({ textDocument, type, params });\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    clear() {\n        this._selectors.clear();\n        this._onNotificationSent.dispose();\n        this._onNotificationSent = new vscode_1.EventEmitter();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getProvider(document) {\n        for (const selector of this._selectors.values()) {\n            if (vscode_1.languages.match(selector, document) > 0) {\n                return {\n                    send: (data) => {\n                        return this.callback(data);\n                    }\n                };\n            }\n        }\n        return undefined;\n    }\n}\nexports.TextDocumentEventFeature = TextDocumentEventFeature;\n/**\n * A abstract feature implementation that registers language providers\n * for text documents using a given document selector.\n */\nclass TextDocumentLanguageFeature extends DynamicDocumentFeature {\n    _registrationType;\n    _registrations;\n    constructor(client, registrationType) {\n        super(client);\n        this._registrationType = registrationType;\n        this._registrations = new Map();\n    }\n    *getDocumentSelectors() {\n        for (const registration of this._registrations.values()) {\n            const selector = registration.data.registerOptions.documentSelector;\n            if (selector === null) {\n                continue;\n            }\n            yield this._client.protocol2CodeConverter.asDocumentSelector(selector);\n        }\n    }\n    get registrationType() {\n        return this._registrationType;\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        const registration = this.registerLanguageProvider(data.registerOptions, data.id);\n        this._registrations.set(data.id, { disposable: registration[0], data, provider: registration[1] });\n    }\n    unregister(id) {\n        const registration = this._registrations.get(id);\n        if (registration !== undefined) {\n            this._registrations.delete(id);\n            registration.disposable.dispose();\n        }\n    }\n    clear() {\n        this._registrations.forEach((value) => {\n            value.disposable.dispose();\n        });\n        this._registrations.clear();\n    }\n    getRegistration(documentSelector, capability) {\n        if (!capability) {\n            return [undefined, undefined];\n        }\n        else if (vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)) {\n            const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\n            const selector = capability.documentSelector ?? documentSelector;\n            if (selector) {\n                return [id, Object.assign({}, capability, { documentSelector: selector })];\n            }\n        }\n        else if (Is.boolean(capability) && capability === true || vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)) {\n            if (!documentSelector) {\n                return [undefined, undefined];\n            }\n            const options = (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\n            return [UUID.generateUuid(), options];\n        }\n        return [undefined, undefined];\n    }\n    getRegistrationOptions(documentSelector, capability) {\n        if (!documentSelector || !capability) {\n            return undefined;\n        }\n        return (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\n    }\n    getProvider(textDocument) {\n        for (const registration of this._registrations.values()) {\n            const selector = registration.data.registerOptions.documentSelector;\n            if (selector !== null && vscode_1.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(selector), textDocument) > 0) {\n                return registration.provider;\n            }\n        }\n        return undefined;\n    }\n    getAllProviders() {\n        const result = [];\n        for (const item of this._registrations.values()) {\n            result.push(item.provider);\n        }\n        return result;\n    }\n}\nexports.TextDocumentLanguageFeature = TextDocumentLanguageFeature;\nclass WorkspaceFeature {\n    _client;\n    _registrationType;\n    _registrations;\n    constructor(client, registrationType) {\n        this._client = client;\n        this._registrationType = registrationType;\n        this._registrations = new Map();\n    }\n    getState() {\n        const registrations = this._registrations.size > 0;\n        return { kind: 'workspace', id: this._registrationType.method, registrations };\n    }\n    get registrationType() {\n        return this._registrationType;\n    }\n    register(data) {\n        const registration = this.registerLanguageProvider(data.registerOptions);\n        this._registrations.set(data.id, { disposable: registration[0], provider: registration[1] });\n    }\n    unregister(id) {\n        const registration = this._registrations.get(id);\n        if (registration !== undefined) {\n            this._registrations.delete(id);\n            registration.disposable.dispose();\n        }\n    }\n    clear() {\n        this._registrations.forEach((registration) => {\n            registration.disposable.dispose();\n        });\n        this._registrations.clear();\n    }\n    getProviders() {\n        const result = [];\n        for (const registration of this._registrations.values()) {\n            result.push(registration.provider);\n        }\n        return result;\n    }\n}\nexports.WorkspaceFeature = WorkspaceFeature;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, ExtensionContext, Uri, l10n, window } from 'vscode';\nimport { LanguageClientOptions } from 'vscode-languageclient';\nimport { startClient, LanguageClientConstructor, SchemaRequestService, AsyncDisposable, languageServerDescription } from '../jsonClient';\nimport { LanguageClient } from 'vscode-languageclient/browser';\n\nlet client: AsyncDisposable | undefined;\n\n// this method is called when vs code is activated\nexport async function activate(context: ExtensionContext) {\n\tconst serverMain = Uri.joinPath(context.extensionUri, 'server/dist/browser/jsonServerMain.js');\n\ttry {\n\t\tconst worker = new Worker(serverMain.toString());\n\t\tworker.postMessage({ i10lLocation: l10n.uri?.toString(false) ?? '' });\n\n\t\tconst newLanguageClient: LanguageClientConstructor = (id: string, name: string, clientOptions: LanguageClientOptions) => {\n\t\t\treturn new LanguageClient(id, name, worker, clientOptions);\n\t\t};\n\n\t\tconst schemaRequests: SchemaRequestService = {\n\t\t\tgetContent(uri: string) {\n\t\t\t\treturn fetch(uri, { mode: 'cors' })\n\t\t\t\t\t.then(function (response: any) {\n\t\t\t\t\t\treturn response.text();\n\t\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst timer = {\n\t\t\tsetTimeout(callback: (...args: any[]) => void, ms: number, ...args: any[]): Disposable {\n\t\t\t\tconst handle = setTimeout(callback, ms, ...args);\n\t\t\t\treturn { dispose: () => clearTimeout(handle) };\n\t\t\t}\n\t\t};\n\n\t\tconst logOutputChannel = window.createOutputChannel(languageServerDescription, { log: true });\n\t\tcontext.subscriptions.push(logOutputChannel);\n\n\t\tclient = await startClient(context, newLanguageClient, { schemaRequests, timer, logOutputChannel });\n\n\t} catch (e) {\n\t\tconsole.log(e);\n\t}\n}\n\nexport async function deactivate(): Promise<void> {\n\tif (client) {\n\t\tawait client.dispose();\n\t\tclient = undefined;\n\t}\n}\n"],"names":["ownKeys","__createBinding","this","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","getOwnPropertyNames","ar","prototype","hasOwnProperty","call","length","mod","result","i","exports","code","ProtocolInlayHint","InlayHint","data","constructor","position","label","kind","super","DocumentOnTypeFormattingFeature","DocumentRangeFormattingFeature","DocumentFormattingFeature","vscode_1","vscode_languageserver_protocol_1","UUID","features_1","FileFormattingOptions","fromConfiguration","document","filesConfig","workspace","getConfiguration","trimTrailingWhitespace","trimFinalNewlines","insertFinalNewline","TextDocumentLanguageFeature","client","DocumentFormattingRequest","type","fillClientCapabilities","capabilities","ensure","dynamicRegistration","initialize","documentSelector","options","getRegistrationOptions","documentFormattingProvider","register","id","generateUuid","registerOptions","registerLanguageProvider","selector","provider","provideDocumentFormattingEdits","token","_client","params","textDocument","code2ProtocolConverter","asTextDocumentIdentifier","asFormattingOptions","sendRequest","then","isCancellationRequested","protocol2CodeConverter","asTextEdits","error","handleFailedRequest","middleware","languages","registerDocumentFormattingEditProvider","asDocumentSelector","DocumentRangeFormattingRequest","capability","rangesSupport","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","range","asRange","provideDocumentRangesFormattingEdits","ranges","asRanges","DocumentRangesFormattingRequest","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","provideOnTypeFormattingEdits","ch","asPosition","moreTriggerCharacter","registerOnTypeFormattingEditProvider","firstTriggerCharacter","TypeDefinitionFeature","TypeDefinitionRequest","typeDefinitionSupport","linkSupport","getRegistration","typeDefinitionProvider","provideTypeDefinition","asTextDocumentPositionParams","asDefinitionResult","registerProvider","registerTypeDefinitionProvider","ProgressFeature","progressPart_1","activeParts","Set","getState","WorkDoneProgressCreateRequest","method","registrations","size","target","key","workDoneProgress","deleteHandler","part","delete","onRequest","add","ProgressPart","clear","done","TypeHierarchyFeature","TypeHierarchyProvider","prepareTypeHierarchy","TypeHierarchyPrepareRequest","asTypeHierarchyItems","provideTypeHierarchySupertypes","item","asTypeHierarchyItem","TypeHierarchySupertypesRequest","provideTypeHierarchySubtypes","TypeHierarchySubtypesRequest","typeHierarchyProvider","registerTypeHierarchyProvider","__exportStar","p","__importDefault","BrowserMessageWriter","BrowserMessageReader","createMessageConnection","reader","writer","logger","api_1","NullLogger","ConnectionStrategy","is","connectionStrategy","default","install","AbstractMessageReader","_onData","_messageListener","port","Emitter","event","fire","addEventListener","fireError","onmessage","listen","callback","AbstractMessageWriter","errorCount","write","msg","postMessage","Promise","resolve","handleError","reject","end","RenameFeature","Is","RenameRequest","rename","prepareSupport","prepareSupportDefaultBehavior","PrepareSupportDefaultBehavior","Identifier","honorsChangeAnnotations","renameProvider","boolean","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","Range","isDefaultBehavior","defaultBehavior","Error","placeholder","message","registerRenameProvider","candidate","expand","str","slice","expand_","replace","slashPattern","escSlash","openPattern","escOpen","closePattern","escClose","commaPattern","escComma","periodPattern","escPeriod","escapeBraces","map","unescapeBraces","balanced_match_1","Math","random","escSlashPattern","RegExp","escOpenPattern","escClosePattern","escCommaPattern","escPeriodPattern","numeric","isNaN","charCodeAt","parseInt","parseCommaParts","parts","balanced","split","pre","body","post","postParts","shift","push","apply","embrace","isPadded","el","test","lte","y","gte","isTop","expansions","expansion","isNumericSequence","isAlphaSequence","isSequence","isOptions","indexOf","match","n","N","x","width","max","incr","abs","pad","some","c","String","fromCharCode","need","z","Array","join","j","DocumentLinkFeature","DocumentLinkRequest","documentLinkCapabilities","tooltipSupport","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","resolveProvider","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ProposedFeatures","LanguageClient","BaseLanguageClient","ShutdownMode","MessageTransports","SuspendMode","State","CloseAction","ErrorAction","RevealOutputChannelOn","c2p","p2c","async_1","diagnostic_1","notebook_1","configuration_1","textSynchronization_1","completion_1","hover_1","definition_1","signatureHelp_1","documentHighlight_1","documentSymbol_1","workspaceSymbol_1","reference_1","typeDefinition_1","implementation_1","colorProvider_1","codeAction_1","codeLens_1","formatting_1","rename_1","documentLink_1","executeCommand_1","foldingRange_1","declaration_1","selectionRange_1","callHierarchy_1","semanticTokens_1","linkedEditingRange_1","typeHierarchy_1","inlineValue_1","inlayHint_1","workspaceFolder_1","fileOperations_1","inlineCompletion_1","textDocumentContent_1","fileSystemWatcher_1","progress_1","ResolvedClientOptions","ClientState","sanitizeIsTrusted","isTrusted","stringArray","enabledCommands","DefaultErrorHandler","maxRestartCount","restarts","_error","_message","count","action","Continue","Shutdown","closed","Date","now","Restart","DoNotRestart","name","MessageReader","MessageWriter","Tabs","open","_onOpen","_onClose","disposable","EventEmitter","fillTabResources","window","tabGroups","onDidChangeTabs","opened","oldTabs","currentTabs","tab","values","has","toFire","Uri","parse","dispose","onClose","onOpen","isActive","activeTextEditor","uri","isVisible","scheme","NotebookDocumentSyncFeature","CellScheme","notebookDocuments","notebook","toString","getCells","find","cell","getTabResources","strings","uris","seen","group","all","tabs","input","TabInputText","TabInputTextDiff","modified","TabInputCustom","TabInputNotebook","_id","_name","_clientOptions","_state","_onStart","_onStop","_connection","_idleInterval","_ignoredRegistrations","_listeners","_disposed","_notificationHandlers","_notificationDisposables","_pendingNotificationHandlers","_requestHandlers","_requestDisposables","_pendingRequestHandlers","_progressHandlers","_pendingProgressHandlers","_progressDisposables","_initializeResult","_outputChannel","_disposeOutputChannel","_traceOutputChannel","_traceLogLevel","_capabilities","_diagnostics","_syncedDocuments","_didChangeTextDocumentFeature","_inFlightOpenNotifications","_pendingChangeSemaphore","_pendingChangeDelayer","_didOpenTextDocumentFeature","_fileEvents","_fileEventDelayer","_telemetryEmitter","_stateChangeEmitter","_trace","_traceFormat","TraceFormat","Text","_tracer","_c2p","_p2c","_tabsModel","clientOptions","markdown","supportHtml","supportThemeIcons","synchronize","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","progressOnInitialization","errorHandler","createDefaultErrorHandler","connectionOptions","uriConverters","workspaceFolder","diagnosticPullOptions","onChange","onSave","notebookDocumentOptions","textSynchronization","createTextSynchronizationOptions","Initial","Map","outputChannel","logLevel","LogLevel","Info","traceOutputChannel","Semaphore","Delayer","Trace","Off","log","messageOrDataObject","string","trace","traceObject","createConverter","code2Protocol","protocol2Code","registerBuiltinFeatures","delayOpenNotifications","tabsModel","onTelemetry","onDidChangeState","createOutputChannel","diagnostics","state","getPublicState","$state","oldState","newState","Starting","Running","StartFailed","Stopped","initializeResult","Stopping","ResponseError","ErrorCodes","ConnectionInactive","connection","$start","param","sendPendingOpenNotifications","syncKind","TextDocumentSyncKind","Full","sendPendingFullTextDocumentChanges","CancellationToken","LSPErrorCodes","RequestCancelled","_sendRequest","handler","set","activeConnection","sendNotification","needsPendingFullTextDocumentSync","openNotification","documentToClose","DidOpenTextDocumentNotification","DidCloseTextDocumentNotification","_sendNotification","bind","onNotification","sendProgress","onProgress","handleWorkDoneProgress","realHandler","WorkDoneProgress","setTrace","traceFormat","data2String","responseError","stack","showNotification","getLogMessage","showNotificationMessage","MessageType","warn","Warn","Warning","info","debug","Debug","JSON","stringify","showErrorMessage","showWarningMessage","showInformationMessage","selection","show","needsStart","needsStop","isRunning","start","promise","createOnStartPromise","createDiagnosticCollection","createConnection","LogMessageNotification","appendLine","ShowMessageNotification","ShowMessageRequest","messageFunc","actions","TelemetryEventNotification","ShowDocumentRequest","async","showDocument","asUri","external","success","env","openExternal","takeFocus","preserveFocus","showTextDocument","_resolve","_reject","refreshTrace","initOption","rootPath","workspaceFolders","fsPath","_clientGetRootPath","initParams","processId","clientInfo","appName","version","locale","getLocale","rootUri","file","computeClientCapabilities","func","fillInitializeParams","doInitialize","workDoneToken","cancel","positionEncoding","PositionEncodingKind","UTF16","textDocumentSyncOptions","number","textDocumentSync","None","openClose","change","save","includeText","assign","resolvedTextDocumentSync","PublishDiagnosticsNotification","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookLogLevelChanged","hookConfigurationChanged","initializeFeatures","stop","retry","title","folders","folder","timeout","shutdown","Stop","mode","cleanUp","tp","RAL","timer","setTimeout","exit","race","finally","cleanUpChannel","disposables","splice","feature","from","_features","entries","entry","reverse","notifyFileEvent","didChangeWatchedFile","trigger","fileEvents","DidChangeWatchedFilesNotification","changes","workSpaceMiddleware","catch","lock","getPendingDocumentChanges","asChangeTextDocumentParams","DidChangeTextDocumentNotification","notificationSent","triggerPendingChangeDelivery","_diagnosticQueue","_diagnosticQueueState","tokenSource","triggerDiagnosticQueue","setImmediate","workDiagnosticQueue","next","CancellationTokenSource","asDiagnostics","converted","setDiagnostics","language","transports","createMessageTransports","output","closeHandler","ConsoleLogger","createProtocolConnection","onError","hasPendingResponse","tracer","sendNotificationOrTraceOptions","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","handleConnectionError","handleConnectionClosed","handlerResult","handled","onDidChangeConfiguration","onDidChangeLogLevel","level","config","Messages","traceConfig","fromString","watchers","array","_dynamicFeatures","registerRaw","registerFeatures","features","registerFeature","DynamicFeature","registrationType","getFeature","request","hasDedicatedTextSynchronizationFeature","NotebookDocumentSyncRegistrationType","handles","pendingFullTextDocumentChanges","ConfigurationFeature","DidOpenTextDocumentFeature","DidChangeTextDocumentFeature","onPendingChangeAdded","WillSaveFeature","WillSaveWaitUntilFeature","DidSaveTextDocumentFeature","DidCloseTextDocumentFeature","FileSystemWatcherFeature","CompletionItemFeature","HoverFeature","SignatureHelpFeature","DefinitionFeature","ReferencesFeature","DocumentHighlightFeature","DocumentSymbolFeature","WorkspaceSymbolFeature","CodeActionFeature","CodeLensFeature","ExecuteCommandFeature","SyncConfigurationFeature","ImplementationFeature","ColorProviderFeature","WorkspaceFoldersFeature","FoldingRangeFeature","DeclarationFeature","SelectionRangeFeature","CallHierarchyFeature","SemanticTokensFeature","LinkedEditingFeature","DidCreateFilesFeature","DidRenameFilesFeature","DidDeleteFilesFeature","WillCreateFilesFeature","WillRenameFilesFeature","WillDeleteFilesFeature","InlineValueFeature","InlayHintsFeature","DiagnosticFeature","registerProposedFeatures","createAll","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Create","Rename","Delete","failureHandling","FailureHandlingKind","TextOnlyTransactional","normalizesLineEndings","changeAnnotationSupport","groupsOnLabel","metadataSupport","snippetEditSupport","relatedInformation","versionSupport","tagSupport","valueSet","DiagnosticTag","Unnecessary","Deprecated","codeDescriptionSupport","dataSupport","relativePatternSupport","windowCapabilities","messageActionItem","additionalPropertiesSupport","support","generalCapabilities","staleRequestSupport","retryOnContentModified","RequestsToCancelOnContentModified","regularExpressions","engine","parser","positionEncodings","allowedTags","preInitialize","handleRegisterCapability","nextParams","doRegisterCapability","registration","err","handleUnregisterCapability","doUnregisterCapability","unregistration","unregisterations","unregister","handleApplyEdit","resultOrError","doHandleApplyWorkspaceEdit","workspaceEditLock","edit","openTextDocuments","textDocuments","forEach","versionMismatch","TextDocumentEdit","changeUri","applied","asPromise","isRefactoring","metadata","static","SemanticTokensRequest","SemanticTokensRangeRequest","SemanticTokensDeltaRequest","CompletionResolveRequest","CodeLensResolveRequest","CodeActionResolveRequest","InlayHintResolveRequest","WorkspaceSymbolResolveRequest","defaultValue","throwOnCancel","PendingResponseRejected","ServerCancelled","LSPCancellationError","CancellationError","ContentModified","CancellableResolveCalls","serverOptions","_encoding","console","InlineCompletionItemFeature","TextDocumentContentFeature","InlineValueRefreshRequest","InlineValueRequest","messages_1","messageDirection","MessageDirection","clientToServer","ProtocolRequestType","CM","serverToClient","ProtocolRequestType0","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","_provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","MessageBuffer","AbstractMessageBuffer","Uint8Array","asciiDecoder","encoding","TextDecoder","emptyBuffer","TextEncoder","encode","decode","asNative","buffer","allocNative","ReadableStreamWrapper","socket","arrayBuffer","listener","Disposable","removeEventListener","onEnd","onData","WritableStreamWrapper","send","close","_textEncoder","_ril","freeze","messageBuffer","applicationJson","encoder","charset","decoder","stream","asReadableStream","asWritableStream","ms","args","handle","clearTimeout","setInterval","clearInterval","RIL","isArray","thenable","Number","every","elem","typedArray","check","resolved","WorkspaceSymbol","SymbolInformation","hasRange","containerName","locationOrUri","Location","module","require","vscode","SemanticTokensRegistrationType","tokenTypes","SemanticTokenTypes","namespace","class","enum","interface","struct","typeParameter","parameter","variable","property","enumMember","function","macro","keyword","comment","regexp","operator","decorator","tokenModifiers","SemanticTokenModifiers","declaration","definition","readonly","deprecated","abstract","modification","documentation","defaultLibrary","formats","TokenFormat","Relative","requests","full","delta","multilineTokenSupport","overlappingTokenSupport","serverCancelSupport","augmentsSyntaxTokens","refreshSupport","SemanticTokensRefreshRequest","getAllProviders","onDidChangeSemanticTokensEmitter","semanticTokensProvider","fullProvider","hasEditProvider","eventEmitter","documentProvider","onDidChangeSemanticTokens","provideDocumentSemanticTokens","asSemanticTokens","provideDocumentSemanticTokensEdits","previousResultId","SemanticTokens","asSemanticTokensEdits","rangeProvider","provideDocumentRangeSemanticTokens","legend","asSemanticTokensLegend","registerDocumentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","ProtocolCodeLens","CodeLens","ReadableStreamMessageReader","ral_1","events_1","semaphore_1","ResolvedMessageReaderOptions","onPartialMessage","errorEmitter","closeEmitter","partialMessageEmitter","asError","fireClose","firePartialMessage","fromOptions","contentDecoder","contentDecoders","contentTypeDecoder","contentTypeDecoders","readable","nextMessageLength","messageToken","partialMessageTimer","_partialMessageTimeout","readSemaphore","partialMessageTimeout","append","headers","tryReadHeaders","contentLength","fromEntries","tryReadBody","setPartialMessageTimer","clearPartialMessageTimer","bytes","waitingTime","ProtocolCallHierarchyItem","CallHierarchyItem","detail","selectionRange","CodeActionRequest","cap","isPreferredSupport","disabledSupport","resolveSupport","properties","codeActionLiteralSupport","codeActionKind","CodeActionKind","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorMove","RefactorRewrite","Source","SourceOrganizeImports","Notebook","documentationSupport","CodeActionTag","LLMGenerated","codeActionProvider","provideCodeActions","context","_provideCodeActions","asCodeActionContextSync","asCodeActionResult","resolveCodeAction","asCodeActionSync","asCodeAction","registerCodeActionsProvider","getMetadata","codeActionKinds","providedCodeActionKinds","asCodeActionKinds","asCodeActionDocumentations","browser_1","ImplementationRequest","WriteableStreamMessageWriter","ResolvedMessageWriterOptions","contentTypeEncoder","contentEncoder","writeSemaphore","byteLength","doWrite","proto","LinkedEditingRangeRequest","linkedEditingRangeProvider","provideLinkedEditingRanges","provideLinkedEditing","asLinkedEditingRanges","provideLinkedEditingRange","registerLinkedEditingRangeProvider","DiagnosticPullMode","vsdiag","InlineCompletionRequest","inlineCompletionProvider","provideInlineCompletionItems","asInlineCompletionParams","asInlineCompletionResult","registerInlineCompletionItemProvider","MonikerRequest","MonikerKind","UniquenessLevel","project","global","$import","$export","local","_commands","ExecuteCommandRequest","executeCommandProvider","executeCommand","command","arguments","commands","registerCommand","FoldingRangeRequest","rangeLimit","lineFoldingOnly","foldingRangeKind","FoldingRangeKind","Comment","Imports","Region","foldingRange","collapsedText","FoldingRangeRefreshRequest","onDidChangeFoldingRange","foldingRangeProvider","onDidChangeFoldingRanges","provideFoldingRanges","_","requestParams","asFoldingRanges","registerFoldingRangeProvider","ProtocolCodeAction","CodeAction","DidChangeWorkspaceFoldersNotification","WorkspaceFoldersRequest","ProtocolNotificationType","a","b","ma","maybeMatch","mb","r","reg","begs","beg","left","right","ai","bi","pop","unescape","escape","AST","Minimatch","makeRe","braceExpand","defaults","filter","GLOBSTAR","sep","minimatch","brace_expansion_1","assert_valid_pattern_js_1","ast_js_1","escape_js_1","unescape_js_1","pattern","assertValidPattern","nocomment","charAt","starDotExtRE","starDotExtTest","ext","f","startsWith","endsWith","starDotExtTestDot","starDotExtTestNocase","toLowerCase","starDotExtTestNocaseDot","starDotStarRE","starDotStarTest","includes","starDotStarTestDot","dotStarRE","dotStarTest","starRE","starTest","starTestDot","qmarksRE","qmarksTestNocase","$0","noext","qmarksTestNoExt","qmarksTestNocaseDot","qmarksTestNoExtDot","qmarksTestDot","qmarksTest","len","defaultPlatform","process","__MINIMATCH_TESTING_PLATFORM__","Symbol","def","keys","orig","parent","fromGlob","s","list","nobrace","mm","nonull","globMagic","windowsPathsNoEscape","nonegate","negate","empty","preserveMultipleSlashes","partial","globSet","globParts","nocase","isWindows","platform","windowsNoMagicRoot","allowWindowsEscape","make","hasMagic","magicalBraces","parseNegate","rawGlobParts","slashSplit","preprocess","__","isUNC","isDrive","ss","noglobstar","optimizationLevel","firstPhasePreProcess","secondPhasePreProcess","levelOneOptimize","adjascentGlobstarOptimize","gs","reduce","prev","levelTwoFileOptimize","didSomething","dd","gss","p2","other","splin","matched","partsMatch","emptyGSMatch","which","dot","negateOffset","matchOne","fileDrive","fileUNC","patternDrive","fdi","pdi","fd","pd","fi","pi","fl","pl","fr","pr","swallowee","hit","fastTest","re","toMMPattern","Reflect","twoStar","qmark","flags","pp","_src","ex","ff","filename","matchBase","flipNegate","ast_js_2","escape_js_2","unescape_js_2","connection_1","lspReservedErrorRangeStart","RequestFailed","lspReservedErrorRangeEnd","SupportedCompletionItemKinds","CompletionItemKind","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","Color","File","Reference","Folder","EnumMember","Constant","Struct","Event","Operator","TypeParameter","labelDetailsSupport","CompletionRequest","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","CompletionItemTag","insertReplaceSupport","insertTextModeSupport","InsertTextMode","asIs","adjustIndentation","insertTextMode","completionItemKind","completionList","itemDefaults","applyKindSupport","completionProvider","triggerCharacters","defaultCommitCharacters","allCommitCharacters","provideCompletionItems","asCompletionParams","asCompletionResult","provideCompletionItem","resolveCompletionItem","asCompletionItem","registerCompletionItemProvider","RegistrationType","registrationMethod","matchGlobPattern","resource","miniMatchPattern","baseUri","with","path","matcher","Worker","createMessageTransportsFromWorker","worker","DidCloseNotebookDocumentNotification","DidSaveNotebookDocumentNotification","DidChangeNotebookDocumentNotification","NotebookCellArrayChange","DidOpenNotebookDocumentNotification","NotebookDocument","NotebookCell","ExecutionSummary","NotebookCellKind","vscode_languageserver_types_1","Markup","Code","executionOrder","objectLiteral","uinteger","equals","one","equalsMetadata","oneArray","otherArray","oneKeys","otherKeys","sort","prop","DocumentUri","diff","two","executionSummary","notebookType","cells","integer","deleteCount","WorkspaceFeature","WorkspaceSymbolRequest","symbolCapabilities","symbolKind","SupportedSymbolKinds","SupportedSymbolTags","workspaceSymbolProvider","provideWorkspaceSymbols","query","asSymbolInformations","resolveWorkspaceSymbol","asWorkspaceSymbol","asSymbolInformation","registerWorkspaceSymbolProvider","CodeLensRequest","clc","CodeLensRefreshRequest","onDidChangeCodeLensEmitter","codeLensProvider","onDidChangeCodeLenses","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","asCodeLens","registerCodeLensProvider","TypeError","DefinitionRequest","definitionSupport","definitionProvider","provideDefinition","registerDefinitionProvider","uriConverter","trustMarkdown","_uriConverter","asDiagnostic","diagnostic","protocolDiagnostic_1","ProtocolDiagnostic","asDiagnosticSeverity","severity","ls","CodeDescription","codeDescription","href","DiagnosticCode","hasDiagnosticCode","diagnosticCode","source","DiagnosticRelatedInformation","asLocation","location","asRelatedInformation","tags","tag","asDiagnosticTag","asDiagnosticTags","Position","line","character","items","DiagnosticSeverity","Information","Hint","asDocumentation","asMarkdownString","MarkdownString","appendText","asCompletionItemTag","commitCharactersApplyKind","defaultRange","defaultInsertTextMode","defaultInsertTextFormat","defaultData","dataApplyKind","asCompletionItemTags","CompletionItemLabelDetails","labelDetails","description","asCompletionItemLabel","protocolCompletionItem_1","filterText","insertText","insertTextFormat","textEdit","newText","InsertReplaceEdit","inserting","insert","replacing","textEditText","InsertTextFormat","text","SnippetString","fromEdit","asCompletionInsertText","itemKind","original","originalItemKind","sortText","additionalTextEdits","asTextEditsSync","commitCharacters","applyKind","ApplyKind","Merge","char","applyCommitCharacters","asCommand","preselect","applyData","keepWhitespace","asTextEdit","TextEdit","asSignatureInformations","mapAsync","asSignatureInformation","SignatureInformation","parameters","asParameterInformations","activeParameter","asParameterInformation","ParameterInformation","asLocationLink","targetUri","targetRange","originSelectionRange","targetSelectionRange","asLocationResult","LocationLink","links","locations","asDocumentHighlight","DocumentHighlight","asDocumentHighlightKind","DocumentHighlightKind","Read","Write","asSymbolKind","SymbolKind","asSymbolTag","SymbolTag","asSymbolTags","protocolWorkspaceSymbol_1","fillTags","asDocumentSymbol","DocumentSymbol","children","child","concat","tooltip","kindMapping","asCodeActionKind","protocolCodeAction_1","asDiagnosticsSync","isPreferred","disabled","reason","isAI","protocolCodeLens_1","sharedMetadata","changeAnnotations","metaData","annotation","needsConfirmation","asWorkspaceEditEntryMetadata","asMetadata","WorkspaceEdit","CreateFile","createFile","annotationId","RenameFile","renameFile","oldUri","newUri","DeleteFile","deleteFile","edits","AnnotatedTextEdit","SnippetTextEdit","snippet","protocolDocumentLink_1","asColor","color","red","green","blue","alpha","asColorInformation","ci","ColorInformation","asColorPresentation","cp","presentation","ColorPresentation","asFoldingRangeKind","asFoldingRange","FoldingRange","startLine","endLine","asSelectionRange","SelectionRange","asInlineValue","inlineValue","InlineValueText","InlineValueVariableLookup","variableName","caseSensitiveLookup","InlineValueEvaluatableExpression","expression","asInlayHint","asInlayHintLabelPart","protocolInlayHint_1","textEdits","asTooltip","paddingLeft","paddingRight","InlayHintLabelPart","asCallHierarchyItem","protocolCallHierarchyItem_1","asCallHierarchyIncomingCall","CallHierarchyIncomingCall","fromRanges","asCallHierarchyOutgoingCall","CallHierarchyOutgoingCall","to","asSemanticTokensEdit","SemanticTokensEdit","Uint32Array","protocolTypeHierarchyItem_1","asGlobPattern","RelativePattern","URI","WorkspaceFolder","getWorkspaceFolder","asInlineCompletionItem","inlineCompletionItem","InlineCompletionItem","NotebookCellTextDocumentFilter","TextDocumentFilter","asHover","hover","Hover","CodeBlock","appendCodeblock","element","appendMarkdown","asHoverContent","contents","rangeDefaults","editRange","getCompletionItemDefaults","CompletionList","isIncomplete","asSignatureHelp","SignatureHelp","activeSignature","signatures","asDeclarationResult","asReferences","asDocumentSymbols","asCommands","doc","Command","foldingRanges","asColorInformations","colorInformation","asColorPresentations","colorPresentations","asSelectionRanges","selectionRanges","asInlineValues","inlineValues","asInlayHints","_token","resultId","SemanticTokensEdits","asCallHierarchyItems","asCallHierarchyIncomingCalls","asCallHierarchyOutgoingCalls","LinkedEditingRanges","asRegularExpression","wordPattern","InlineCompletionList","SignatureHelpRequest","signatureInformation","parameterInformation","labelOffsetSupport","activeParameterSupport","noActiveParameterSupport","signatureHelpProvider","provideSignatureHelp","providerSignatureHelp","asSignatureHelpParams","retriggerCharacters","registerSignatureHelpProvider","brace_expressions_js_1","types","isExtglobType","startNoDot","addPatternStart","justDots","reSpecials","regExpEscape","star","starNoEmpty","copyIn","toJSON","ret","isStart","unshift","isEnd","clone","ast","pos","opt","escaping","inBrace","braceStart","braceNeg","acc","substring","glob","uflag","toRegExpSource","nocaseMagicOnly","toUpperCase","_glob","allowDot","noEmpty","src","aps","needNoTrav","needNoDot","repeated","bodyDotAllowed","final","_hasMagic","needUflag","consumed","magic","parseClass","FileOperationFeature","_event","_registrationType","_clientCapability","_serverCapability","_listener","_filters","clientCapability","serverCapability","filterSize","fileOperations","filters","e","minimatchFilter","asMinimatchOptions","matches","getFileType","fileMatches","files","fileType","FileType","FileOperationPatternKind","Directory","index","fs","stat","ignoreCase","NotificationFileOperationFeature","_notificationType","_accessUri","_createParams","notificationType","accessUri","createParams","originalEvent","filteredEvent","doSend","CachingNotificationFileOperationFeature","_willListener","_fsPathFileTypes","cacheFileTypes","clearFileTypeCache","onDidCreateFiles","DidCreateFilesNotification","asDidCreateFilesParams","didCreateFiles","onDidRenameFiles","DidRenameFilesNotification","asDidRenameFilesParams","onWillRenameFiles","willRename","waitUntil","didRenameFiles","onDidDeleteFiles","DidDeleteFilesNotification","asDidDeleteFilesParams","onWillDeleteFiles","willDelete","didDeleteFiles","RequestFileOperationFeature","_requestType","requestType","onWillCreateFiles","WillCreateFilesRequest","asWillCreateFilesParams","willCreateFiles","WillRenameFilesRequest","asWillRenameFilesParams","willRenameFiles","WillDeleteFilesRequest","asWillDeleteFilesParams","willDeleteFiles","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","registerHoverProvider","toJSONObject","obj","res","configuration","ConfigurationRequest","scopeUri","section","lastIndexOf","substr","isCleared","DidChangeConfigurationNotification","configurationSection","sections","affectsConfiguration","didChangeConfiguration","settings","extractSettingsInformation","ensurePath","current","globPattern_1","Converter","$NotebookCell","$NotebookDocumentFilter","$NotebookDocumentSyncOptions","SyncInfo","asNotebookCells","base","asNotebookCell","deepCopy","asNotebookCellKind","props","asVersionedNotebookDocumentIdentifier","notebookDocument","asNotebookDocument","asTextContentChange","contentChanges","asNotebookDocumentChangeEvent","changedCells","structure","didOpen","asOpenTextDocumentParams","didClose","asCloseTextDocumentParams","textContent","compareMetaData","languageId","startTime","endTime","equalsTiming","timing","equalsExecution","isObjectLiteral","computeDiff","originalCells","modifiedCells","compareMetadata","originalLength","modifiedLength","startIndex","originalEndIndex","modifiedEndIndex","newCells","matchNotebook","asDocumentFilter","notebookSelector","NotebookDocumentSyncFeatureProvider","notebookSyncInfo","notebookDidOpen","onChangeNotificationSent","onOpenNotificationSent","onCloseNotificationSent","onSaveNotificationSent","onDidOpenNotebookDocument","onDidChangeNotebookDocument","didChangeNotebookDocument","onDidSaveNotebookDocument","didSave","onDidCloseNotebookDocument","getMatchingCellsConsideringSyncInfo","syncInfo","didOpenNotebookCellTextDocument","getSyncInfo","cellMatches","cellIsSynced","matchingCells","mergeCells","doSendChange","doSendOpen","didChangeNotebookCellTextDocument","didCloseNotebookCellTextDocument","cellUri","findIndex","doSendClose","deleted","getMatchingCells","getMatchingCellsFromEvent","newEvent","doSendSave","syncedCells","sendDidOpenNotebookDocument","cellDocuments","asTextDocumentItem","cellTextDocuments","notebooks","sendDidChangeNotebookDocument","getMatchingCellsFromSyncInfo","didChange","sendDidSaveNotebookDocument","sendDidCloseNotebookDocument","getSynchronizedCells","matchingCellsSet","cellChanges","cellChange","oldCells","addedCells","removedCells","filtered","filterCells","merged","cellSelector","cellLanguage","dedicatedChannel","_onChangeNotificationSent","_onOpenNotificationSent","_onCloseNotificationSent","_onSaveNotificationSent","onDidOpenTextDocument","notebookCell","findNotebookDocumentAndCell","onDidChangeTextDocument","onDidCloseTextDocument","synchronization","executionSummarySupport","notebookDocumentSync","getProvider","TextDocumentContentRefreshRequest","TextDocumentContentRequest","getText","asTextDocumentSaveReason","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","asCompletionTriggerKind","triggerKind","CompletionTriggerKind","TriggerCharacter","TriggerForIncompleteCompletions","Invoked","asSignatureHelpTriggerKind","SignatureHelpTriggerKind","Invoke","ContentChange","asWorkerPosition","MAX_VALUE","Diagnostic","protocolDiagnostic","asDiagnosticCode","asCodeActionTriggerKind","CodeActionTriggerKind","Automatic","asInlineCompletionContext","asInlineCompletionTriggerKind","selectedCompletionInfo","asSelectedCompletionInfo","InlineCompletionTriggerKind","asVersionedTextDocumentIdentifier","arg0","arg1","arg2","isTextDocument","isTextDocumentChangeEvent","rangeLength","asSaveTextDocumentParams","includeContent","asWillSaveTextDocumentParams","fileUri","triggerCharacter","isRetrigger","activeSignatureHelp","asPositions","asPositionsSync","protocolItem","format","InsertReplaceRange","asCompletionTextEdit","fillPrimaryInsertText","asReferenceParams","includeDeclaration","asCodeActionContext","only","CodeActionContext","asInlineValueContext","InlineValueContext","frameId","stoppedLocation","fileOptions","tabSize","insertSpaces","asDocumentSymbolParams","DocumentLink","ReferencesRequest","referencesProvider","provideReferences","_providerReferences","registerReferenceProvider","ChangeAnnotation","ChangeAnnotationIdentifier","TextDocumentIdentifier","VersionedTextDocumentIdentifier","OptionalVersionedTextDocumentIdentifier","LanguageKind","TextDocumentItem","MarkupContent","CompletionItem","MarkedString","FormattingOptions","InlayHintKind","StringValue","SelectedCompletionInfo","InlineCompletionContext","MIN_VALUE","three","four","numberRange","startCharacter","endCharacter","defined","_a","del","overwrite","ignoreIfExists","recursive","ignoreIfNotExists","TextEditChangeImpl","assertChangeAnnotations","manage","isSnippet","ChangeAnnotations","annotations","_annotations","_counter","_size","idOrAnnotation","nextId","WorkspaceChange","_textEditChanges","_workspaceEdit","_changeAnnotations","textEditChange","initDocumentChanges","getTextEditChange","textDocumentEdit","initChanges","optionsOrAnnotation","operation","ABAP","WindowsBat","BibTeX","Clojure","Coffeescript","C","CPP","CSharp","CSS","D","Delphi","Diff","Dart","Dockerfile","Elixir","Erlang","FSharp","GitCommit","GitRebase","Go","Groovy","Handlebars","Haskell","HTML","Ini","Java","JavaScript","JavaScriptReact","LaTeX","Less","Lua","Makefile","ObjectiveC","ObjectiveCPP","Pascal","Perl","Perl6","PHP","Powershell","Pug","Python","R","Razor","Ruby","Rust","SCSS","SASS","Scala","ShaderLab","ShellScript","SQL","Swift","TypeScript","TypeScriptReact","TeX","VisualBasic","XML","XSL","YAML","Replace","fromPlainText","plainText","Namespace","Package","Boolean","Key","Null","SourceFixAll","kindOrCommandOrEdit","checkKind","Type","Parameter","createSnippet","EOL","TextDocument","mergeSort","compare","leftIdx","rightIdx","content","FullTextDocument","lineCount","positionAt","offsetAt","applyEdits","sortedEdits","lastModifiedOffset","startOffset","endOffset","_uri","_languageId","_version","_content","_lineOffsets","update","getLineOffsets","lineOffsets","isLineStart","offset","min","low","high","mid","floor","lineOffset","nextLineOffset","DeclarationRequest","newLanguageClient","runtime","languageParticipants","getLanguageParticipants","subscriptions","restartTrigger","startClientWithParticipants","onDidChange","logOutputChannel","oldClient","VSCodeContentRequest","SchemaContentChangeNotification","ForceValidateRequest","LanguageStatusRequest","ValidateContentRequest","DocumentSortingRequest","SchemaAssociationNotification","SettingIds","RequestType","NotificationType","enableFormatter","enableKeepLines","enableValidation","enableSchemaDownload","maxItemsComputed","editorFoldingMaximumRegions","editorColorDecoratorsLimit","editorSection","foldingMaximumRegions","colorDecoratorsLimit","languageServerDescription","l10n","t","resultLimit","jsonFoldingLimit","jsoncFoldingLimit","jsonColorDecoratorLimit","jsoncColorDecoratorLimit","_context","toDispose","rangeFormatting","schemaResolutionErrorStatusBarItem","createStatusBarItem","StatusBarAlignment","Right","fileSchemaErrors","schemaDownloadEnabled","isClientReady","documentSymbolsLimitStatusbarItem","createLimitStatusItem","limit","createDocumentSymbolsLimitItem","filterSchemaErrorDiagnostics","schemaErrorIndex","isSchemaResolveError","schemaResolveDiagnostic","d","schemaRequests","clearCache","cachedSchemas","schemaUri","textEditor","documentOptions","getSortTextEdits","mutator","handledSchemaProtocols","provideFormatter","customCapabilities","editLimit","createFileSystemWatcher","getSettings","provideDiagnostics","uriOrDoc","previousResolutId","DocumentDiagnosticReportKind","isAfter","isBeforeOrEqual","updateMarkdownString","updateProposals","isThenable","updateHover","h","provideDocumentColors","provideDocumentSymbols","countDocumentSymbols","symbols","previousValue","checkLimit","isDocumentSymbol","schemaDocuments","uriPath","uriString","ensureFilesystemWatcherInstalled","readFile","openTextDocument","telemetry","authority","sendTelemetryEvent","schemaURL","getContent","handleContentChange","watcher","handleChange","createListener","onDidCreate","changeListener","deleteListener","onDidDelete","handleContentClosed","onDidChangeActiveTextEditor","activeEditor","activeDocUri","hide","handleRetryResolveSchemaCommand","getSchemaAssociations","extensions","associationWatcher","updateFormatterRegistration","formatEnabled","fileFormattingOptions","updateSchemaDownloadSetting","_e","onDidGrantWorkspaceTrust","createLanguageStatusItem","associations","allAcrossExtensionHosts","extension","packageJSON","contributes","jsonValidation","jv","fileMatch","url","joinPath","extensionUri","fm","getSchemaExtensionAssociations","rawStr","getDynamicSchemaAssociations","httpSettings","normalizeLimit","settingValue","trunc","editorJSONSettings","editorJSONCSettings","schemas","http","proxy","proxyStrictSSL","json","validate","enable","keepLines","collectSchemaSettings","schemaSettings","folderUri","settingsLocation","setting","getSchemaId","schemaSetting","schema","schemaConfigInfo","inspect","globalValue","workspaceFile","workspaceValue","folderSchemaConfigInfo","workspaceFolderValue","encodeURIComponent","hash","DiagnosticRefreshRequest","WorkspaceDiagnosticRequest","DocumentDiagnosticRequest","DiagnosticServerCancellationData","vscode_jsonrpc_1","retriggerRequest","Unchanged","partialResult","ProgressType","ProtocolCompletionItem","onDidChangeEmmiter","comments","oldLanguages","oldComments","jsonLanguageParticipants","jsonLanguageParticipant","isEqualSet","hasLanguage","useComments","s1","s2","onCancellationRequested","Cancelled","shortcutEvent","MutableToken","_isCancelled","_emitter","statusRequest","statusItem","LanguageStatusSeverity","showSchemasCommand","showSchemaList","activeEditorListener","updateLanguageStatus","newItem","activeLimits","limitApplied","settingId","openSettingsCommand","configureSettingsLabel","extensionSchemaAssocations","jsonValidations","fullUri","findExtension","association","buttons","iconPath","ThemeIcon","buttonCommands","getExtensionSchemaAssociations","settingsSchemaAssocations","resourceUri","folderSettingSchemas","userSettingSchemas","findSetting","getSettingsSchemaAssociations","extensionEntries","settingsEntries","otherEntries","extensionEntry","settingsEntry","QuickPickItemKind","Separator","quickPick","createQuickPick","onDidAccept","selectedItems","onDidTriggerItemButton","button","InlayHintRefreshRequest","InlayHintRequest","_registrations","getProviders","providers","onDidChangeEmitter","textDocumentContent","StaticRegistrationOptions","hasId","schemes","registerTextDocumentContentProvider","provideTextDocumentContent","Touch","LRUCache","LinkedMap","First","AsOld","Last","AsNew","toStringTag","_map","_head","_tail","isEmpty","first","last","before","previous","after","touch","addItemLast","addItemFirst","remove","removeItem","callbackfn","thisArg","iterator","trimOld","newSize","currentSize","fromJSON","_limit","_ratio","ratio","checkTrim","peek","round","SharedArrayReceiverStrategy","SharedArraySenderStrategy","cancellation_1","CancellationState","buffers","enableCancellation","SharedArrayBuffer","Int32Array","$cancellationData","sendCancellation","_conn","Atomics","store","cleanup","SharedArrayBufferCancellationToken","load","SharedArrayBufferCancellationTokenSource","createCancellationTokenSource","setTestMode","$test","clearTestMode","Timer","yieldAfter","convertBatch","shouldYield","yieldCallback","runBatch","defaultDelay","completionPromise","onSuccess","task","delay","cancelTimeout","forceDelivery","isTriggered","_capacity","_active","_waiting","capacity","thunk","runNext","active","doRunNext","counter","total","counterInterval","timeTaken","timeLeft","_infinite","_reported","_lspProgressDisposable","_progress","_cancellationToken","_tokenDisposable","begin","report","percentage","withProgress","ProgressLocation","Window","cancellable","progress","cancellationToken","WorkDoneProgressCancelNotification","increment","ColorPresentationRequest","DocumentColorRequest","ProtocolTypeHierarchyItem","TypeHierarchyItem","numberHash","val","initialHashVal","stringHash","hashVal","arr","objectHash","booleanHash","arrayDiff","access","_initialFolders","initializeWithFolders","asProtocol","currentWorkspaceFolders","sendInitialEvent","removed","added","doSendEvent","addedFolders","removedFolders","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","CallHierarchyOutgoingCallsRequest","CallHierarchyIncomingCallsRequest","CallHierarchyPrepareRequest","_notifyFileEvent","_watchers","_documentSelector","globPattern","watchCreate","watchChange","watchDelete","WatchKind","Change","fileSystemWatcher","hookListeners","fileSystemWatchers","listeners","FileChangeType","Created","Changed","Deleted","_disposable","CallbackList","_callbacks","_contexts","bucket","foundCallbackWithDifferentContext","invoke","callbacks","contexts","_options","thisArgs","onFirstListenerAdd","_noop","onLastListenerRemove","inlayHint","onDidChangeInlayHints","inlayHintProvider","provideInlayHints","viewPort","resolveInlayHint","hint","registerInlayHintsProvider","posixClasses","braceEscape","rangesToString","negs","sawStart","endPos","rangeStart","WHILE","cls","unip","u","neg","sranges","snegs","DocumentSymbolRequest","GlobPattern","WillSaveTextDocumentWaitUntilRequest","WillSaveTextDocumentNotification","DidSaveTextDocumentNotification","TextDocumentContentChangeEvent","InitializeErrorCodes","WorkDoneProgressOptions","TextDocumentRegistrationOptions","RegularExpressionEngineKind","DocumentSelector","NotebookDocumentFilter","SelectionRangeRequest","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolder_1","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","protocol_progress_1","protocol_callHierarchy_1","protocol_semanticTokens_1","protocol_showDocument_1","protocol_linkedEditingRange_1","protocol_fileOperations_1","protocol_moniker_1","protocol_typeHierarchy_1","protocol_inlineValue_1","protocol_inlayHint_1","protocol_diagnostic_1","protocol_notebook_1","protocol_inlineCompletion_1","protocol_textDocumentContent_1","Abort","Transactional","Undo","ES2020","UTF8","UTF32","hasWorkDoneProgress","unknownProtocolVersion","ProtocolNotificationType0","Log","Incremental","isIncremental","isFull","uuid_1","RequestStateKind","PullState","DocumentOrUri","asKey","DocumentPullStateTracker","documentPullStates","workspacePullStates","track","states","pulledVersion","unTrack","tracks","getResultId","getAllResultIds","DiagnosticRequestor","isDisposed","onDidChangeDiagnosticsEmitter","openRequests","documentStates","workspaceErrorCounter","workspaceCancellation","workspaceTimeout","createProvider","identifier","knows","forget","pull","cb","pullAsync","isUri","currentRequestState","documentState","afterState","outDated","reschedule","forgetDocument","workspaceDiagnostics","pullWorkspace","pullWorkspaceAsync","provideWorkspaceDiagnostics","previousResultIds","chunk","onDidChangeDiagnostics","unChanged","resultIds","resultReporter","convertReport","convertPreviousResultIds","partialResultToken","BackgroundScheduler","diagnosticRequestor","lastDocumentToPull","documents","timeoutHandle","lastDocumentToPullKey","runLoop","DiagnosticFeatureProviderImpl","activeTextDocument","backgroundScheduler","onFocus","matchFilter","matchResource","matchesCell","isActiveDocument","addToBackgroundIfNeeded","interFileDependencies","considerDocument","editor","oldActive","openFeature","onNotificationSent","notebookFeature","uriStr","pulledTextDocuments","onTabs","changeFeature","onType","closedCells","openedCells","saveFeature","closeFeature","cleanUpDocument","relatedDocumentSupport","diagnosticProvider","refresh","selectionRangeProvider","provideSelectionRanges","positions","registerSelectionRangeProvider","____","RequestType0","___","_pr","ParameterStructures","byName","NotificationType0","server","ProtocolDocumentLink","colorProvider","provideColorPresentations","registerColorProvider","ConnectionOptions","MessageStrategy","CancellationStrategy","CancellationSenderStrategy","CancellationReceiverStrategy","RequestCancellationReceiverStrategy","IdCancellationReceiverStrategy","ConnectionError","ConnectionErrors","LogTraceNotification","SetTraceNotification","TraceValues","TraceValue","ProgressToken","messageReader","messageWriter","_logger","sequenceNumber","notificationSequenceNumber","unknownResponseSequenceNumber","maxParallelism","starRequestHandler","inFlight","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","messageQueue","linkedMap_1","responsePromises","knownCanceledRequests","requestTokens","ConnectionState","New","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","cancellationStrategy","Message","cancelUndispatched","isListening","Listening","isClosed","Closed","Disposed","createRequestQueueKey","triggerMessageQueue","messageStrategy","handleMessage","isRequest","requestMessage","reply","jsonrpc","toJson","traceSendingResponse","replyError","Verbose","Compact","stringifyTrace","logLSPMessage","traceReceivedRequest","requestHandler","tokenKey","cancellationSource","receiver","numberOfParams","InvalidParams","parameterStructures","byPosition","InternalError","MethodNotFound","handleRequest","isNotification","notificationHandler","CancelNotification","cancelId","traceReceivedNotification","ProgressNotification","handleNotification","isResponse","handleResponse","responseMessage","responseHandler","handleInvalidMessage","toCancel","strategy","response","queue","addMessageToQueue","responsePromise","timerStart","traceReceivedResponse","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","nullToUndefined","isNamedParam","computeSingleParam","auto","computeMessageParams","messageParams","paramStart","paramEnd","notificationMessage","traceSendingNotification","_type","onUnhandledProgress","sender","throwIfNotListening","tokenWasCancelled","traceSendingRequest","MessageWriteError","StarRequestHandler","_value","onUnhandledNotification","onDispose","AlreadyListening","throwIfListening","verbose","setPrototypeOf","conn","_chunks","_totalLength","toAppend","lowerCaseKeys","chunkIndex","chunkBytesRead","row","_read","header","trim","numberOfBytes","byteCount","resultOffset","chunkPart","onDidChangeInlineValues","inlineValueProvider","provideInlineValues","registerInlineValuesProvider","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","declarationSupport","declarationProvider","provideDeclaration","registerDeclarationProvider","hierarchicalDocumentSymbolSupport","labelSupport","documentSymbolProvider","_provideDocumentSymbols","registerDocumentSymbolProvider","NotificationType9","NotificationType8","NotificationType7","NotificationType6","NotificationType5","NotificationType4","NotificationType3","NotificationType2","NotificationType1","RequestType9","RequestType8","RequestType7","RequestType6","RequestType5","RequestType4","RequestType3","RequestType2","RequestType1","AbstractMessageSignature","ParseError","InvalidRequest","jsonrpcReservedErrorRangeStart","serverErrorStart","MessageReadError","ServerNotInitialized","UnknownErrorCode","jsonrpcReservedErrorRangeEnd","serverErrorEnd","_parameterStructures","CallHierarchyProvider","prepareCallHierarchy","provideCallHierarchyIncomingCalls","provideCallHierarchyOutgoingCalls","callHierarchyProvider","registerCallHierarchyProvider","v4","isUUID","ValueUUID","asHex","V4UUID","_oneOf","_randomHex","_chars","_timeHighBits","_UUIDPattern","_ral","ral","TextDocumentEventFeature","_pendingOpenNotifications","_delayOpen","_pendingOpenListeners","syncedDocuments","textDocumentFilter","openDocuments","closingDocument","notifications","notification","getTextDocument","_pendingTextDocumentChanges","pendingTextDocumentChanges","_selectors","selectors","_selectorFilter","DynamicDocumentFeature","_changeData","_onNotificationSent","_onPendingChangeAdded","_syncKind","updateSyncKind","getDocumentSelectors","promises","changeData","eventUri","excludes","onWillSaveTextDocument","willSave","willSaveEvent","willSaveWaitUntil","vEdits","_includeText","onDidSaveTextDocument","saveOptions","disposable_1","sharedArrayCancellation_1","messageReader_1","messageWriter_1","messageBuffer_1","StaticFeature","_middleware","_textDocument","selectorFilter","getStateInfo","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","serverMain","i10lLocation","fetch","startClient"],"sourceRoot":""}