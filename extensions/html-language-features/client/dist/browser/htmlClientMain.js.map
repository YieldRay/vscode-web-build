{"version":3,"file":"htmlClientMain.js","mappings":"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","sources":["webpack:///../node_modules/vscode-languageclient/lib/common/protocolInlayHint.js","webpack:///../node_modules/vscode-languageclient/lib/common/formatting.js","webpack:///../node_modules/vscode-languageclient/lib/common/typeDefinition.js","webpack:///../node_modules/vscode-languageclient/lib/common/progress.js","webpack:///../node_modules/vscode-languageclient/lib/common/typeHierarchy.js","webpack:///../node_modules/vscode-jsonrpc/lib/browser/main.js","webpack:///../node_modules/vscode-languageclient/lib/common/rename.js","webpack:///../node_modules/@isaacs/brace-expansion/dist/commonjs/index.js","webpack:///../node_modules/vscode-languageclient/lib/common/documentLink.js","webpack:///../node_modules/vscode-languageclient/lib/common/client.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineValue.js","webpack:///../node_modules/vscode-languageclient/lib/common/documentHighlight.js","webpack:///../node_modules/vscode-jsonrpc/lib/browser/ril.js","webpack:///../node_modules/vscode-languageclient/lib/common/utils/is.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolWorkspaceSymbol.js","webpack:///external commonjs \"vscode\"","webpack:///../node_modules/vscode-languageclient/lib/common/semanticTokens.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolCodeLens.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/messageReader.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolCallHierarchyItem.js","webpack:///../node_modules/vscode-languageclient/lib/common/codeAction.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/browser/main.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/messageWriter.js","webpack:///../node_modules/vscode-languageclient/lib/common/linkedEditingRange.js","webpack:///../node_modules/vscode-languageclient/lib/common/api.js","webpack:///../node_modules/vscode-languageclient/lib/common/inlineCompletion.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.moniker.js","webpack:///../node_modules/vscode-languageclient/lib/common/executeCommand.js","webpack:///../node_modules/vscode-languageclient/lib/common/foldingRange.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolCodeAction.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/disposable.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolder.js","webpack:///../node_modules/@isaacs/balanced-match/dist/commonjs/index.js","webpack:///../node_modules/minimatch/dist/commonjs/index.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/api.js","webpack:///../node_modules/vscode-languageclient/lib/common/completion.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.js","webpack:///../node_modules/vscode-languageclient/lib/common/utils/globPattern.js","webpack:///../node_modules/vscode-languageclient/lib/browser/main.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.notebook.js","webpack:///../node_modules/vscode-languageclient/lib/common/workspaceSymbol.js","webpack:///../node_modules/vscode-languageclient/lib/common/codeLens.js","webpack:///../node_modules/vscode-uri/lib/umd/index.js","webpack:///../node_modules/minimatch/dist/commonjs/assert-valid-pattern.js","webpack:///../node_modules/vscode-languageclient/lib/common/definition.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolConverter.js","webpack:///../node_modules/vscode-languageclient/lib/common/signatureHelp.js","webpack:///../node_modules/minimatch/dist/commonjs/ast.js","webpack:///../node_modules/vscode-languageclient/lib/common/fileOperations.js","webpack:///../node_modules/vscode-languageclient/lib/common/hover.js","webpack:///../node_modules/vscode-languageclient/lib/common/configuration.js","webpack:///../node_modules/vscode-languageclient/lib/common/notebook.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.textDocumentContent.js","webpack:///../node_modules/vscode-languageclient/lib/common/codeConverter.js","webpack:///../node_modules/vscode-languageclient/lib/common/reference.js","webpack:///../node_modules/vscode-languageserver-types/lib/esm/main.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.diagnostic.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolCompletionItem.js","webpack:///./src/languageParticipants.ts","webpack:///../node_modules/vscode-jsonrpc/lib/common/cancellation.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.inlayHint.js","webpack:///../node_modules/minimatch/dist/commonjs/unescape.js","webpack:///../node_modules/vscode-languageclient/lib/common/textDocumentContent.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/linkedMap.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolDiagnostic.js","webpack:///../node_modules/minimatch/dist/commonjs/escape.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/sharedArrayCancellation.js","webpack:///../node_modules/vscode-languageclient/lib/common/utils/async.js","webpack:///../node_modules/vscode-languageclient/lib/common/progressPart.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolTypeHierarchyItem.js","webpack:///./src/requests.ts","webpack:///../node_modules/vscode-languageclient/lib/common/workspaceFolder.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.fileOperations.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/is.js","webpack:///./src/htmlClient.ts","webpack:///../node_modules/vscode-languageclient/lib/common/fileSystemWatcher.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/events.js","webpack:///../node_modules/vscode-languageclient/lib/common/inlayHint.js","webpack:///../node_modules/minimatch/dist/commonjs/brace-expressions.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.js","webpack:///../node_modules/vscode-languageclient/lib/common/diagnostic.js","webpack:///../node_modules/vscode-languageclient/lib/common/selectionRange.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/messages.js","webpack:///../node_modules/vscode-languageclient/lib/common/protocolDocumentLink.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js","webpack:///../node_modules/vscode-languageclient/lib/common/colorProvider.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/connection.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/messageBuffer.js","webpack:///../node_modules/vscode-languageclient/lib/common/inlineValue.js","webpack:///../node_modules/vscode-languageclient/lib/common/implementation.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.typeHierarchy.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/connection.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/utils/is.js","webpack:///./src/customData.ts","webpack:///../node_modules/vscode-languageclient/lib/common/declaration.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/semaphore.js","webpack:///../node_modules/vscode-languageclient/lib/common/documentSymbol.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/messages.js","webpack:///../node_modules/vscode-languageclient/lib/common/callHierarchy.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineCompletion.js","webpack:///../node_modules/vscode-languageclient/lib/common/utils/uuid.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/ral.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.showDocument.js","webpack:///./src/autoInsertion.ts","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js","webpack:///../node_modules/vscode-languageclient/lib/common/textSynchronization.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/common/protocol.linkedEditingRange.js","webpack:///../node_modules/vscode-jsonrpc/lib/common/api.js","webpack:///../node_modules/vscode-languageclient/lib/common/features.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/browser/htmlClientMain.ts"],"sourcesContent":["\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass ProtocolInlayHint extends code.InlayHint {\n    data;\n    constructor(position, label, kind) {\n        super(position, label, kind);\n    }\n}\nexports.default = ProtocolInlayHint;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentOnTypeFormattingFeature = exports.DocumentRangeFormattingFeature = exports.DocumentFormattingFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst features_1 = require(\"./features\");\nvar FileFormattingOptions;\n(function (FileFormattingOptions) {\n    function fromConfiguration(document) {\n        const filesConfig = vscode_1.workspace.getConfiguration('files', document);\n        return {\n            trimTrailingWhitespace: filesConfig.get('trimTrailingWhitespace'),\n            trimFinalNewlines: filesConfig.get('trimFinalNewlines'),\n            insertFinalNewline: filesConfig.get('insertFinalNewline'),\n        };\n    }\n    FileFormattingOptions.fromConfiguration = fromConfiguration;\n})(FileFormattingOptions || (FileFormattingOptions = {}));\nclass DocumentFormattingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'formatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentFormattingEdits: (document, options, token) => {\n                const client = this._client;\n                const provideDocumentFormattingEdits = (document, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentFormattingEdits\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\n                    : provideDocumentFormattingEdits(document, options, token);\n            }\n        };\n        return [vscode_1.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentFormattingFeature = DocumentFormattingFeature;\nclass DocumentRangeFormattingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'rangeFormatting');\n        capability.dynamicRegistration = true;\n        capability.rangesSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentRangeFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\n                const client = this._client;\n                const provideDocumentRangeFormattingEdits = (document, range, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(range),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentRangeFormattingEdits\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\n            }\n        };\n        if (options.rangesSupport) {\n            provider.provideDocumentRangesFormattingEdits = (document, ranges, options, token) => {\n                const client = this._client;\n                const provideDocumentRangesFormattingEdits = (document, ranges, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        ranges: client.code2ProtocolConverter.asRanges(ranges),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangesFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentRangesFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentRangesFormattingEdits\n                    ? middleware.provideDocumentRangesFormattingEdits(document, ranges, options, token, provideDocumentRangesFormattingEdits)\n                    : provideDocumentRangesFormattingEdits(document, ranges, options, token);\n            };\n        }\n        return [vscode_1.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentRangeFormattingFeature = DocumentRangeFormattingFeature;\nclass DocumentOnTypeFormattingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentOnTypeFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\n                const client = this._client;\n                const provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        position: client.code2ProtocolConverter.asPosition(position),\n                        ch: ch,\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideOnTypeFormattingEdits\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\n            }\n        };\n        const moreTriggerCharacter = options.moreTriggerCharacter || [];\n        return [vscode_1.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, options.firstTriggerCharacter, ...moreTriggerCharacter), provider];\n    }\n}\nexports.DocumentOnTypeFormattingFeature = DocumentOnTypeFormattingFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass TypeDefinitionFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\n        const typeDefinitionSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'typeDefinition');\n        typeDefinitionSupport.dynamicRegistration = true;\n        typeDefinitionSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.typeDefinitionProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideTypeDefinition: (document, position, token) => {\n                const client = this._client;\n                const provideTypeDefinition = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDefinitionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideTypeDefinition\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\n                    : provideTypeDefinition(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst progressPart_1 = require(\"./progressPart\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = Object.create(null);\n    }\n    return target[key];\n}\nclass ProgressFeature {\n    _client;\n    activeParts;\n    constructor(_client) {\n        this._client = _client;\n        this.activeParts = new Set();\n    }\n    getState() {\n        return { kind: 'window', id: vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.method, registrations: this.activeParts.size > 0 };\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(capabilities, 'window').workDoneProgress = true;\n    }\n    initialize() {\n        const client = this._client;\n        const deleteHandler = (part) => {\n            this.activeParts.delete(part);\n        };\n        const createHandler = (params) => {\n            this.activeParts.add(new progressPart_1.ProgressPart(this._client, params.token, deleteHandler));\n        };\n        client.onRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, createHandler);\n    }\n    clear() {\n        for (const part of this.activeParts) {\n            part.done();\n        }\n        this.activeParts.clear();\n    }\n}\nexports.ProgressFeature = ProgressFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchyFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass TypeHierarchyProvider {\n    client;\n    middleware;\n    constructor(client) {\n        this.client = client;\n        this.middleware = client.middleware;\n    }\n    prepareTypeHierarchy(document, position, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const prepareTypeHierarchy = (document, position, token) => {\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asTypeHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type, token, error, null);\n            });\n        };\n        return middleware.prepareTypeHierarchy\n            ? middleware.prepareTypeHierarchy(document, position, token, prepareTypeHierarchy)\n            : prepareTypeHierarchy(document, position, token);\n    }\n    provideTypeHierarchySupertypes(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideTypeHierarchySupertypes = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asTypeHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeHierarchySupertypesRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asTypeHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeHierarchySupertypesRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideTypeHierarchySupertypes\n            ? middleware.provideTypeHierarchySupertypes(item, token, provideTypeHierarchySupertypes)\n            : provideTypeHierarchySupertypes(item, token);\n    }\n    provideTypeHierarchySubtypes(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideTypeHierarchySubtypes = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asTypeHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeHierarchySubtypesRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asTypeHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeHierarchySubtypesRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideTypeHierarchySubtypes\n            ? middleware.provideTypeHierarchySubtypes(item, token, provideTypeHierarchySubtypes)\n            : provideTypeHierarchySubtypes(item, token);\n    }\n}\nclass TypeHierarchyFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'typeHierarchy');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.typeHierarchyProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const client = this._client;\n        const provider = new TypeHierarchyProvider(client);\n        return [vscode_1.languages.registerTypeHierarchyProvider(client.protocol2CodeConverter.asDocumentSelector(options.documentSelector), provider), provider];\n    }\n}\nexports.TypeHierarchyFeature = TypeHierarchyFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserMessageWriter = exports.BrowserMessageReader = void 0;\nexports.createMessageConnection = createMessageConnection;\nconst ril_1 = __importDefault(require(\"./ril\"));\n// Install the browser runtime abstract.\nril_1.default.install();\nconst api_1 = require(\"../common/api\");\n__exportStar(require(\"../common/api\"), exports);\nclass BrowserMessageReader extends api_1.AbstractMessageReader {\n    _onData;\n    _messageListener;\n    constructor(port) {\n        super();\n        this._onData = new api_1.Emitter();\n        this._messageListener = (event) => {\n            this._onData.fire(event.data);\n        };\n        port.addEventListener('error', (event) => this.fireError(event));\n        port.onmessage = this._messageListener;\n    }\n    listen(callback) {\n        return this._onData.event(callback);\n    }\n}\nexports.BrowserMessageReader = BrowserMessageReader;\nclass BrowserMessageWriter extends api_1.AbstractMessageWriter {\n    port;\n    errorCount;\n    constructor(port) {\n        super();\n        this.port = port;\n        this.errorCount = 0;\n        port.addEventListener('error', (event) => this.fireError(event));\n    }\n    write(msg) {\n        try {\n            this.port.postMessage(msg);\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.BrowserMessageWriter = BrowserMessageWriter;\nfunction createMessageConnection(reader, writer, logger, options) {\n    if (logger === undefined) {\n        logger = api_1.NullLogger;\n    }\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, api_1.createMessageConnection)(reader, writer, logger, options);\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RenameFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst Is = __importStar(require(\"./utils/is\"));\nconst features_1 = require(\"./features\");\nclass RenameFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const rename = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'rename');\n        rename.dynamicRegistration = true;\n        rename.prepareSupport = true;\n        rename.prepareSupportDefaultBehavior = vscode_languageserver_protocol_1.PrepareSupportDefaultBehavior.Identifier;\n        rename.honorsChangeAnnotations = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.renameProvider);\n        if (!options) {\n            return;\n        }\n        if (Is.boolean(capabilities.renameProvider)) {\n            options.prepareProvider = false;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideRenameEdits: (document, position, newName, token) => {\n                const client = this._client;\n                const provideRenameEdits = (document, position, newName, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        position: client.code2ProtocolConverter.asPosition(position),\n                        newName: newName\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asWorkspaceEdit(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, token, error, null, false);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideRenameEdits\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\n                    : provideRenameEdits(document, position, newName, token);\n            },\n            prepareRename: options.prepareProvider\n                ? (document, position, token) => {\n                    const client = this._client;\n                    const prepareRename = (document, position, token) => {\n                        const params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                            position: client.code2ProtocolConverter.asPosition(position),\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            if (vscode_languageserver_protocol_1.Range.is(result)) {\n                                return client.protocol2CodeConverter.asRange(result);\n                            }\n                            else if (this.isDefaultBehavior(result)) {\n                                return result.defaultBehavior === true\n                                    ? null\n                                    : Promise.reject(new Error(`The element can't be renamed.`));\n                            }\n                            else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\n                                return {\n                                    range: client.protocol2CodeConverter.asRange(result.range),\n                                    placeholder: result.placeholder\n                                };\n                            }\n                            // To cancel the rename vscode API expects a rejected promise.\n                            return Promise.reject(new Error(`The element can't be renamed.`));\n                        }, (error) => {\n                            if (typeof error.message === 'string') {\n                                throw new Error(error.message);\n                            }\n                            else {\n                                throw new Error(`The element can't be renamed.`);\n                            }\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.prepareRename\n                        ? middleware.prepareRename(document, position, token, prepareRename)\n                        : prepareRename(document, position, token);\n                }\n                : undefined\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n    isDefaultBehavior(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.defaultBehavior);\n    }\n}\nexports.RenameFeature = RenameFeature;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.expand = expand;\nconst balanced_match_1 = require(\"@isaacs/balanced-match\");\nconst escSlash = '\\0SLASH' + Math.random() + '\\0';\nconst escOpen = '\\0OPEN' + Math.random() + '\\0';\nconst escClose = '\\0CLOSE' + Math.random() + '\\0';\nconst escComma = '\\0COMMA' + Math.random() + '\\0';\nconst escPeriod = '\\0PERIOD' + Math.random() + '\\0';\nconst escSlashPattern = new RegExp(escSlash, 'g');\nconst escOpenPattern = new RegExp(escOpen, 'g');\nconst escClosePattern = new RegExp(escClose, 'g');\nconst escCommaPattern = new RegExp(escComma, 'g');\nconst escPeriodPattern = new RegExp(escPeriod, 'g');\nconst slashPattern = /\\\\\\\\/g;\nconst openPattern = /\\\\{/g;\nconst closePattern = /\\\\}/g;\nconst commaPattern = /\\\\,/g;\nconst periodPattern = /\\\\./g;\nfunction numeric(str) {\n    return !isNaN(str) ? parseInt(str, 10) : str.charCodeAt(0);\n}\nfunction escapeBraces(str) {\n    return str\n        .replace(slashPattern, escSlash)\n        .replace(openPattern, escOpen)\n        .replace(closePattern, escClose)\n        .replace(commaPattern, escComma)\n        .replace(periodPattern, escPeriod);\n}\nfunction unescapeBraces(str) {\n    return str\n        .replace(escSlashPattern, '\\\\')\n        .replace(escOpenPattern, '{')\n        .replace(escClosePattern, '}')\n        .replace(escCommaPattern, ',')\n        .replace(escPeriodPattern, '.');\n}\n/**\n * Basically just str.split(\",\"), but handling cases\n * where we have nested braced sections, which should be\n * treated as individual members, like {a,{b,c},d}\n */\nfunction parseCommaParts(str) {\n    if (!str) {\n        return [''];\n    }\n    const parts = [];\n    const m = (0, balanced_match_1.balanced)('{', '}', str);\n    if (!m) {\n        return str.split(',');\n    }\n    const { pre, body, post } = m;\n    const p = pre.split(',');\n    p[p.length - 1] += '{' + body + '}';\n    const postParts = parseCommaParts(post);\n    if (post.length) {\n        ;\n        p[p.length - 1] += postParts.shift();\n        p.push.apply(p, postParts);\n    }\n    parts.push.apply(parts, p);\n    return parts;\n}\nfunction expand(str) {\n    if (!str) {\n        return [];\n    }\n    // I don't know why Bash 4.3 does this, but it does.\n    // Anything starting with {} will have the first two bytes preserved\n    // but *only* at the top level, so {},a}b will not expand to anything,\n    // but a{},b}c will be expanded to [a}c,abc].\n    // One could argue that this is a bug in Bash, but since the goal of\n    // this module is to match Bash's rules, we escape a leading {}\n    if (str.slice(0, 2) === '{}') {\n        str = '\\\\{\\\\}' + str.slice(2);\n    }\n    return expand_(escapeBraces(str), true).map(unescapeBraces);\n}\nfunction embrace(str) {\n    return '{' + str + '}';\n}\nfunction isPadded(el) {\n    return /^-?0\\d/.test(el);\n}\nfunction lte(i, y) {\n    return i <= y;\n}\nfunction gte(i, y) {\n    return i >= y;\n}\nfunction expand_(str, isTop) {\n    /** @type {string[]} */\n    const expansions = [];\n    const m = (0, balanced_match_1.balanced)('{', '}', str);\n    if (!m)\n        return [str];\n    // no need to expand pre, since it is guaranteed to be free of brace-sets\n    const pre = m.pre;\n    const post = m.post.length ? expand_(m.post, false) : [''];\n    if (/\\$$/.test(m.pre)) {\n        for (let k = 0; k < post.length; k++) {\n            const expansion = pre + '{' + m.body + '}' + post[k];\n            expansions.push(expansion);\n        }\n    }\n    else {\n        const isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n        const isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n        const isSequence = isNumericSequence || isAlphaSequence;\n        const isOptions = m.body.indexOf(',') >= 0;\n        if (!isSequence && !isOptions) {\n            // {a},b}\n            if (m.post.match(/,(?!,).*\\}/)) {\n                str = m.pre + '{' + m.body + escClose + m.post;\n                return expand_(str);\n            }\n            return [str];\n        }\n        let n;\n        if (isSequence) {\n            n = m.body.split(/\\.\\./);\n        }\n        else {\n            n = parseCommaParts(m.body);\n            if (n.length === 1 && n[0] !== undefined) {\n                // x{{a,b}}y ==> x{a}y x{b}y\n                n = expand_(n[0], false).map(embrace);\n                //XXX is this necessary? Can't seem to hit it in tests.\n                /* c8 ignore start */\n                if (n.length === 1) {\n                    return post.map(p => m.pre + n[0] + p);\n                }\n                /* c8 ignore stop */\n            }\n        }\n        // at this point, n is the parts, and we know it's not a comma set\n        // with a single entry.\n        let N;\n        if (isSequence && n[0] !== undefined && n[1] !== undefined) {\n            const x = numeric(n[0]);\n            const y = numeric(n[1]);\n            const width = Math.max(n[0].length, n[1].length);\n            let incr = n.length === 3 && n[2] !== undefined ? Math.abs(numeric(n[2])) : 1;\n            let test = lte;\n            const reverse = y < x;\n            if (reverse) {\n                incr *= -1;\n                test = gte;\n            }\n            const pad = n.some(isPadded);\n            N = [];\n            for (let i = x; test(i, y); i += incr) {\n                let c;\n                if (isAlphaSequence) {\n                    c = String.fromCharCode(i);\n                    if (c === '\\\\') {\n                        c = '';\n                    }\n                }\n                else {\n                    c = String(i);\n                    if (pad) {\n                        const need = width - c.length;\n                        if (need > 0) {\n                            const z = new Array(need + 1).join('0');\n                            if (i < 0) {\n                                c = '-' + z + c.slice(1);\n                            }\n                            else {\n                                c = z + c;\n                            }\n                        }\n                    }\n                }\n                N.push(c);\n            }\n        }\n        else {\n            N = [];\n            for (let j = 0; j < n.length; j++) {\n                N.push.apply(N, expand_(n[j], false));\n            }\n        }\n        for (let j = 0; j < N.length; j++) {\n            for (let k = 0; k < post.length; k++) {\n                const expansion = pre + N[j] + post[k];\n                if (!isTop || isSequence || expansion) {\n                    expansions.push(expansion);\n                }\n            }\n        }\n    }\n    return expansions;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentLinkFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass DocumentLinkFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const documentLinkCapabilities = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'documentLink');\n        documentLinkCapabilities.dynamicRegistration = true;\n        documentLinkCapabilities.tooltipSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentLinkProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentLinks: (document, token) => {\n                const client = this._client;\n                const provideDocumentLinks = (document, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDocumentLinks(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentLinks\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\n                    : provideDocumentLinks(document, token);\n            },\n            resolveDocumentLink: options.resolveProvider\n                ? (link, token) => {\n                    const client = this._client;\n                    const resolveDocumentLink = (link, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return link;\n                            }\n                            return client.protocol2CodeConverter.asDocumentLink(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, token, error, link);\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.resolveDocumentLink\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\n                        : resolveDocumentLink(link, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentLinkFeature = DocumentLinkFeature;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProposedFeatures = exports.LanguageClient = exports.BaseLanguageClient = exports.ShutdownMode = exports.MessageTransports = exports.SuspendMode = exports.State = exports.CloseAction = exports.ErrorAction = exports.RevealOutputChannelOn = void 0;\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst c2p = __importStar(require(\"./codeConverter\"));\nconst p2c = __importStar(require(\"./protocolConverter\"));\nconst Is = __importStar(require(\"./utils/is\"));\nconst async_1 = require(\"./utils/async\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst progressPart_1 = require(\"./progressPart\");\nconst features_1 = require(\"./features\");\nconst diagnostic_1 = require(\"./diagnostic\");\nconst notebook_1 = require(\"./notebook\");\nconst configuration_1 = require(\"./configuration\");\nconst textSynchronization_1 = require(\"./textSynchronization\");\nconst completion_1 = require(\"./completion\");\nconst hover_1 = require(\"./hover\");\nconst definition_1 = require(\"./definition\");\nconst signatureHelp_1 = require(\"./signatureHelp\");\nconst documentHighlight_1 = require(\"./documentHighlight\");\nconst documentSymbol_1 = require(\"./documentSymbol\");\nconst workspaceSymbol_1 = require(\"./workspaceSymbol\");\nconst reference_1 = require(\"./reference\");\nconst typeDefinition_1 = require(\"./typeDefinition\");\nconst implementation_1 = require(\"./implementation\");\nconst colorProvider_1 = require(\"./colorProvider\");\nconst codeAction_1 = require(\"./codeAction\");\nconst codeLens_1 = require(\"./codeLens\");\nconst formatting_1 = require(\"./formatting\");\nconst rename_1 = require(\"./rename\");\nconst documentLink_1 = require(\"./documentLink\");\nconst executeCommand_1 = require(\"./executeCommand\");\nconst foldingRange_1 = require(\"./foldingRange\");\nconst declaration_1 = require(\"./declaration\");\nconst selectionRange_1 = require(\"./selectionRange\");\nconst callHierarchy_1 = require(\"./callHierarchy\");\nconst semanticTokens_1 = require(\"./semanticTokens\");\nconst linkedEditingRange_1 = require(\"./linkedEditingRange\");\nconst typeHierarchy_1 = require(\"./typeHierarchy\");\nconst inlineValue_1 = require(\"./inlineValue\");\nconst inlayHint_1 = require(\"./inlayHint\");\nconst workspaceFolder_1 = require(\"./workspaceFolder\");\nconst fileOperations_1 = require(\"./fileOperations\");\nconst inlineCompletion_1 = require(\"./inlineCompletion\");\nconst textDocumentContent_1 = require(\"./textDocumentContent\");\nconst fileSystemWatcher_1 = require(\"./fileSystemWatcher\");\nconst progress_1 = require(\"./progress\");\n/**\n * Controls when the output channel is revealed.\n */\nvar RevealOutputChannelOn;\n(function (RevealOutputChannelOn) {\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Debug\"] = 0] = \"Debug\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\n})(RevealOutputChannelOn || (exports.RevealOutputChannelOn = RevealOutputChannelOn = {}));\n/**\n * An action to be performed when the connection is producing errors.\n */\nvar ErrorAction;\n(function (ErrorAction) {\n    /**\n     * Continue running the server.\n     */\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\n    /**\n     * Shutdown the server.\n     */\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\n})(ErrorAction || (exports.ErrorAction = ErrorAction = {}));\n/**\n * An action to be performed when the connection to a server got closed.\n */\nvar CloseAction;\n(function (CloseAction) {\n    /**\n     * Don't restart the server. The connection stays closed.\n     */\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\n    /**\n     * Restart the server.\n     */\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\n})(CloseAction || (exports.CloseAction = CloseAction = {}));\n/**\n * Signals in which state the language client is in.\n */\nvar State;\n(function (State) {\n    /**\n     * The client is stopped or got never started.\n     */\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\n    /**\n     * The client is starting but not ready yet.\n     */\n    State[State[\"Starting\"] = 3] = \"Starting\";\n    /**\n     * The start has failed.\n     */\n    State[State[\"StartFailed\"] = 4] = \"StartFailed\";\n    /**\n     * The client is running and ready.\n     */\n    State[State[\"Running\"] = 2] = \"Running\";\n})(State || (exports.State = State = {}));\nvar SuspendMode;\n(function (SuspendMode) {\n    /**\n     * Don't allow suspend mode.\n     */\n    SuspendMode[\"off\"] = \"off\";\n    /**\n     * Support suspend mode even if not all\n     * registered providers have a corresponding\n     * activation listener.\n     */\n    SuspendMode[\"on\"] = \"on\";\n})(SuspendMode || (exports.SuspendMode = SuspendMode = {}));\nvar ResolvedClientOptions;\n(function (ResolvedClientOptions) {\n    function sanitizeIsTrusted(isTrusted) {\n        if (isTrusted === undefined || isTrusted === null) {\n            return false;\n        }\n        if ((typeof isTrusted === 'boolean') || (typeof isTrusted === 'object' && isTrusted !== null && Is.stringArray(isTrusted.enabledCommands))) {\n            return isTrusted;\n        }\n        return false;\n    }\n    ResolvedClientOptions.sanitizeIsTrusted = sanitizeIsTrusted;\n})(ResolvedClientOptions || (ResolvedClientOptions = {}));\nclass DefaultErrorHandler {\n    client;\n    maxRestartCount;\n    restarts;\n    constructor(client, maxRestartCount) {\n        this.client = client;\n        this.maxRestartCount = maxRestartCount;\n        this.restarts = [];\n    }\n    error(_error, _message, count) {\n        if (count && count <= 3) {\n            return { action: ErrorAction.Continue };\n        }\n        return { action: ErrorAction.Shutdown };\n    }\n    closed() {\n        this.restarts.push(Date.now());\n        if (this.restarts.length <= this.maxRestartCount) {\n            return { action: CloseAction.Restart };\n        }\n        else {\n            const diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\n            if (diff <= 3 * 60 * 1000) {\n                return { action: CloseAction.DoNotRestart, message: `The ${this.client.name} server crashed ${this.maxRestartCount + 1} times in the last 3 minutes. The server will not be restarted. See the output for more information.` };\n            }\n            else {\n                this.restarts.shift();\n                return { action: CloseAction.Restart };\n            }\n        }\n    }\n}\nvar ClientState;\n(function (ClientState) {\n    ClientState[\"Initial\"] = \"initial\";\n    ClientState[\"Starting\"] = \"starting\";\n    ClientState[\"StartFailed\"] = \"startFailed\";\n    ClientState[\"Running\"] = \"running\";\n    ClientState[\"Stopping\"] = \"stopping\";\n    ClientState[\"Stopped\"] = \"stopped\";\n})(ClientState || (ClientState = {}));\nvar MessageTransports;\n(function (MessageTransports) {\n    function is(value) {\n        const candidate = value;\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\n    }\n    MessageTransports.is = is;\n})(MessageTransports || (exports.MessageTransports = MessageTransports = {}));\nvar ShutdownMode;\n(function (ShutdownMode) {\n    ShutdownMode[\"Restart\"] = \"restart\";\n    ShutdownMode[\"Stop\"] = \"stop\";\n})(ShutdownMode || (exports.ShutdownMode = ShutdownMode = {}));\n/**\n * Manages the open tabs. We don't directly use the tab API since for\n * diagnostics we need to de-dupe tabs that show the same resources since\n * we pull on the model not the UI.\n */\nclass Tabs {\n    open;\n    _onOpen;\n    _onClose;\n    disposable;\n    constructor() {\n        this.open = new Set();\n        this._onOpen = new vscode_1.EventEmitter();\n        this._onClose = new vscode_1.EventEmitter();\n        Tabs.fillTabResources(this.open);\n        const openTabsHandler = (event) => {\n            if (event.closed.length === 0 && event.opened.length === 0) {\n                return;\n            }\n            const oldTabs = this.open;\n            const currentTabs = new Set();\n            Tabs.fillTabResources(currentTabs);\n            const closed = new Set();\n            const opened = new Set(currentTabs);\n            for (const tab of oldTabs.values()) {\n                if (currentTabs.has(tab)) {\n                    opened.delete(tab);\n                }\n                else {\n                    closed.add(tab);\n                }\n            }\n            this.open = currentTabs;\n            if (closed.size > 0) {\n                const toFire = new Set();\n                for (const item of closed) {\n                    toFire.add(vscode_1.Uri.parse(item));\n                }\n                this._onClose.fire(toFire);\n            }\n            if (opened.size > 0) {\n                const toFire = new Set();\n                for (const item of opened) {\n                    toFire.add(vscode_1.Uri.parse(item));\n                }\n                this._onOpen.fire(toFire);\n            }\n        };\n        if (vscode_1.window.tabGroups.onDidChangeTabs !== undefined) {\n            this.disposable = vscode_1.window.tabGroups.onDidChangeTabs(openTabsHandler);\n        }\n        else {\n            this.disposable = { dispose: () => { } };\n        }\n    }\n    get onClose() {\n        return this._onClose.event;\n    }\n    get onOpen() {\n        return this._onOpen.event;\n    }\n    dispose() {\n        this.disposable.dispose();\n    }\n    isActive(document) {\n        return document instanceof vscode_1.Uri\n            ? vscode_1.window.activeTextEditor?.document.uri === document\n            : vscode_1.window.activeTextEditor?.document === document;\n    }\n    isVisible(document) {\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        if (uri.scheme === notebook_1.NotebookDocumentSyncFeature.CellScheme) {\n            // Notebook cells aren't in the list of tabs, but the notebook should be.\n            return vscode_1.workspace.notebookDocuments.some(notebook => {\n                if (this.open.has(notebook.uri.toString())) {\n                    const cell = notebook.getCells().find(cell => cell.document.uri.toString() === uri.toString());\n                    return cell !== undefined;\n                }\n                return false;\n            });\n        }\n        return this.open.has(uri.toString());\n    }\n    getTabResources() {\n        const result = new Set();\n        Tabs.fillTabResources(new Set(), result);\n        return result;\n    }\n    static fillTabResources(strings, uris) {\n        const seen = strings ?? new Set();\n        for (const group of vscode_1.window.tabGroups.all) {\n            for (const tab of group.tabs) {\n                const input = tab.input;\n                let uri;\n                if (input instanceof vscode_1.TabInputText) {\n                    uri = input.uri;\n                }\n                else if (input instanceof vscode_1.TabInputTextDiff) {\n                    uri = input.modified;\n                }\n                else if (input instanceof vscode_1.TabInputCustom) {\n                    uri = input.uri;\n                }\n                else if (input instanceof vscode_1.TabInputNotebook) {\n                    uri = input.uri;\n                }\n                if (uri !== undefined && !seen.has(uri.toString())) {\n                    seen.add(uri.toString());\n                    uris !== undefined && uris.add(uri);\n                }\n            }\n        }\n    }\n}\nclass BaseLanguageClient {\n    _id;\n    _name;\n    _clientOptions;\n    _state;\n    _onStart;\n    _onStop;\n    _connection;\n    _idleInterval;\n    _ignoredRegistrations;\n    // private _idleStart: number | undefined;\n    _listeners;\n    _disposed;\n    _notificationHandlers;\n    _notificationDisposables;\n    _pendingNotificationHandlers;\n    _requestHandlers;\n    _requestDisposables;\n    _pendingRequestHandlers;\n    _progressHandlers;\n    _pendingProgressHandlers;\n    _progressDisposables;\n    _initializeResult;\n    _outputChannel;\n    _disposeOutputChannel;\n    _traceOutputChannel;\n    _traceLogLevel;\n    _capabilities;\n    _diagnostics;\n    _syncedDocuments;\n    _didChangeTextDocumentFeature;\n    _inFlightOpenNotifications;\n    _pendingChangeSemaphore;\n    _pendingChangeDelayer;\n    _didOpenTextDocumentFeature;\n    _fileEvents;\n    _fileEventDelayer;\n    _telemetryEmitter;\n    _stateChangeEmitter;\n    _trace;\n    _traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\n    _tracer;\n    _c2p;\n    _p2c;\n    _tabsModel;\n    constructor(id, name, clientOptions) {\n        this._id = id;\n        this._name = name;\n        clientOptions = clientOptions || {};\n        const markdown = {\n            isTrusted: false,\n            supportHtml: false,\n            supportThemeIcons: false\n        };\n        if (clientOptions.markdown !== undefined) {\n            markdown.isTrusted = ResolvedClientOptions.sanitizeIsTrusted(clientOptions.markdown.isTrusted);\n            markdown.supportHtml = clientOptions.markdown.supportHtml === true;\n            markdown.supportThemeIcons = clientOptions.markdown.supportThemeIcons === true;\n        }\n        // const defaultInterval = (clientOptions as TestOptions).$testMode ? 50 : 60000;\n        this._clientOptions = {\n            documentSelector: clientOptions.documentSelector ?? [],\n            synchronize: clientOptions.synchronize ?? {},\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\n            outputChannelName: clientOptions.outputChannelName ?? this._name,\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn ?? RevealOutputChannelOn.Error,\n            stdioEncoding: clientOptions.stdioEncoding ?? 'utf8',\n            initializationOptions: clientOptions.initializationOptions,\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\n            progressOnInitialization: !!clientOptions.progressOnInitialization,\n            errorHandler: clientOptions.errorHandler ?? this.createDefaultErrorHandler(clientOptions.connectionOptions?.maxRestartCount),\n            middleware: clientOptions.middleware ?? {},\n            uriConverters: clientOptions.uriConverters,\n            workspaceFolder: clientOptions.workspaceFolder,\n            connectionOptions: clientOptions.connectionOptions,\n            markdown,\n            // suspend: {\n            // \tmode: clientOptions.suspend?.mode ?? SuspendMode.off,\n            // \tcallback: clientOptions.suspend?.callback ?? (() => Promise.resolve(true)),\n            // \tinterval: clientOptions.suspend?.interval ? Math.max(clientOptions.suspend.interval, defaultInterval) : defaultInterval\n            // },\n            diagnosticPullOptions: clientOptions.diagnosticPullOptions ?? { onChange: true, onSave: false },\n            notebookDocumentOptions: clientOptions.notebookDocumentOptions ?? {},\n            textSynchronization: this.createTextSynchronizationOptions(clientOptions.textSynchronization)\n        };\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\n        this._state = ClientState.Initial;\n        this._ignoredRegistrations = new Set();\n        this._listeners = [];\n        this._notificationHandlers = new Map();\n        this._pendingNotificationHandlers = new Map();\n        this._notificationDisposables = new Map();\n        this._requestHandlers = new Map();\n        this._pendingRequestHandlers = new Map();\n        this._requestDisposables = new Map();\n        this._progressHandlers = new Map();\n        this._pendingProgressHandlers = new Map();\n        this._progressDisposables = new Map();\n        this._connection = undefined;\n        // this._idleStart = undefined;\n        this._initializeResult = undefined;\n        if (clientOptions.outputChannel) {\n            this._outputChannel = clientOptions.outputChannel;\n            this._disposeOutputChannel = false;\n            this._traceLogLevel = this._outputChannel.logLevel;\n        }\n        else {\n            this._outputChannel = undefined;\n            this._disposeOutputChannel = true;\n            this._traceLogLevel = vscode_1.LogLevel.Info;\n        }\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\n        if (this._traceOutputChannel !== undefined) {\n            this._traceLogLevel = this._traceOutputChannel.logLevel;\n        }\n        this._diagnostics = undefined;\n        this._inFlightOpenNotifications = new Set();\n        this._pendingChangeSemaphore = new async_1.Semaphore(1);\n        this._pendingChangeDelayer = new async_1.Delayer(250);\n        this._fileEvents = [];\n        this._fileEventDelayer = new async_1.Delayer(250);\n        this._onStop = undefined;\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\n        this._trace = vscode_languageserver_protocol_1.Trace.Off;\n        this._tracer = {\n            log: (messageOrDataObject, data) => {\n                if (Is.string(messageOrDataObject)) {\n                    this.trace(messageOrDataObject, data);\n                }\n                else {\n                    this.traceObject(messageOrDataObject);\n                }\n            },\n        };\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined, this._clientOptions.markdown.isTrusted, this._clientOptions.markdown.supportHtml, this._clientOptions.markdown.supportThemeIcons);\n        this._syncedDocuments = new Map();\n        this.registerBuiltinFeatures();\n    }\n    createTextSynchronizationOptions(options) {\n        if (!options) {\n            return { delayOpenNotifications: false };\n        }\n        if (typeof options.delayOpenNotifications === 'boolean') {\n            return { delayOpenNotifications: options.delayOpenNotifications };\n        }\n        return { delayOpenNotifications: false };\n    }\n    get name() {\n        return this._name;\n    }\n    get middleware() {\n        return this._clientOptions.middleware ?? Object.create(null);\n    }\n    get clientOptions() {\n        return this._clientOptions;\n    }\n    get protocol2CodeConverter() {\n        return this._p2c;\n    }\n    get code2ProtocolConverter() {\n        return this._c2p;\n    }\n    get tabsModel() {\n        if (this._tabsModel === undefined) {\n            this._tabsModel = new Tabs();\n        }\n        return this._tabsModel;\n    }\n    get onTelemetry() {\n        return this._telemetryEmitter.event;\n    }\n    get onDidChangeState() {\n        return this._stateChangeEmitter.event;\n    }\n    get outputChannel() {\n        if (!this._outputChannel) {\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name, { log: true });\n            if (this._traceOutputChannel === undefined) {\n                this._traceLogLevel = this._outputChannel.logLevel;\n            }\n        }\n        return this._outputChannel;\n    }\n    get traceOutputChannel() {\n        return this._traceOutputChannel ? this._traceOutputChannel : this.outputChannel;\n    }\n    get diagnostics() {\n        return this._diagnostics;\n    }\n    get state() {\n        return this.getPublicState();\n    }\n    get $state() {\n        return this._state;\n    }\n    set $state(value) {\n        const oldState = this.getPublicState();\n        this._state = value;\n        const newState = this.getPublicState();\n        if (newState !== oldState) {\n            this._stateChangeEmitter.fire({ oldState, newState });\n        }\n    }\n    getPublicState() {\n        switch (this.$state) {\n            case ClientState.Starting:\n                return State.Starting;\n            case ClientState.Running:\n                return State.Running;\n            case ClientState.StartFailed:\n                return State.StartFailed;\n            default:\n                return State.Stopped;\n        }\n    }\n    get initializeResult() {\n        return this._initializeResult;\n    }\n    async sendRequest(type, ...params) {\n        if (this.$state === ClientState.StartFailed || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive, `Client is not running`));\n        }\n        // Ensure we have a connection before we force the document sync.\n        const connection = await this.$start();\n        // Send ony depending open notifications\n        await this._didOpenTextDocumentFeature.sendPendingOpenNotifications();\n        // If any document is synced in full mode make sure we flush any pending\n        // full document syncs.\n        if (this._didChangeTextDocumentFeature.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n            await this.sendPendingFullTextDocumentChanges(connection);\n        }\n        let param = undefined;\n        let token = undefined;\n        // Separate cancellation tokens from other parameters for a better client interface\n        if (params.length === 1) {\n            // CancellationToken is an interface, so we need to check if the first param complies to it\n            if (vscode_languageserver_protocol_1.CancellationToken.is(params[0])) {\n                token = params[0];\n            }\n            else {\n                param = params[0];\n            }\n        }\n        else if (params.length === 2) {\n            param = params[0];\n            token = params[1];\n        }\n        if (token !== undefined && token.isCancellationRequested) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.LSPErrorCodes.RequestCancelled, 'Request got cancelled'));\n        }\n        const _sendRequest = this._clientOptions.middleware?.sendRequest;\n        if (_sendRequest !== undefined) {\n            // Return the general middleware invocation defining `next` as a utility function that reorganizes parameters to\n            // pass them to the original sendRequest function.\n            return _sendRequest(type, param, token, (type, param, token) => {\n                const params = [];\n                // Add the parameters if there are any\n                if (param !== undefined) {\n                    params.push(param);\n                }\n                // Add the cancellation token if there is one\n                if (token !== undefined) {\n                    params.push(token);\n                }\n                return connection.sendRequest(type, ...params);\n            });\n        }\n        else {\n            return connection.sendRequest(type, ...params);\n        }\n    }\n    onRequest(type, handler) {\n        const method = typeof type === 'string' ? type : type.method;\n        this._requestHandlers.set(method, handler);\n        const connection = this.activeConnection();\n        let disposable;\n        if (connection !== undefined) {\n            this._requestDisposables.set(method, connection.onRequest(type, handler));\n            disposable = {\n                dispose: () => {\n                    const disposable = this._requestDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._requestDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        else {\n            this._pendingRequestHandlers.set(method, handler);\n            disposable = {\n                dispose: () => {\n                    this._pendingRequestHandlers.delete(method);\n                    const disposable = this._requestDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._requestDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        return {\n            dispose: () => {\n                this._requestHandlers.delete(method);\n                disposable.dispose();\n            }\n        };\n    }\n    async sendNotification(type, params) {\n        if (this.$state === ClientState.StartFailed || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive, `Client is not running`));\n        }\n        const needsPendingFullTextDocumentSync = this._didChangeTextDocumentFeature.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full;\n        let openNotification;\n        if (needsPendingFullTextDocumentSync && typeof type !== 'string' && type.method === vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.method) {\n            openNotification = params?.textDocument.uri;\n            this._inFlightOpenNotifications.add(openNotification);\n        }\n        let documentToClose;\n        if (typeof type !== 'string' && type.method === vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.method) {\n            documentToClose = params.textDocument.uri;\n        }\n        // Ensure we have a connection before we force the document sync.\n        const connection = await this.$start();\n        // Send ony depending open notifications\n        await this._didOpenTextDocumentFeature.sendPendingOpenNotifications(documentToClose);\n        // If any document is synced in full mode make sure we flush any pending\n        // full document syncs.\n        if (needsPendingFullTextDocumentSync) {\n            await this.sendPendingFullTextDocumentChanges(connection);\n        }\n        // We need to remove the pending open notification before we actually\n        // send the notification over the connection. Otherwise there could be\n        // a request coming in that although the open notification got already put\n        // onto the wire will ignore pending document changes.\n        //\n        // Since the code path of connection.sendNotification is actually sync\n        // until the message is handed off to the writer and the writer has a semaphore\n        // lock with a capacity of 1 no additional async scheduling can happen until\n        // the message is actually handed off.\n        if (openNotification !== undefined) {\n            this._inFlightOpenNotifications.delete(openNotification);\n        }\n        const _sendNotification = this._clientOptions.middleware?.sendNotification;\n        return _sendNotification\n            ? _sendNotification(type, connection.sendNotification.bind(connection), params)\n            : connection.sendNotification(type, params);\n    }\n    onNotification(type, handler) {\n        const method = typeof type === 'string' ? type : type.method;\n        this._notificationHandlers.set(method, handler);\n        const connection = this.activeConnection();\n        let disposable;\n        if (connection !== undefined) {\n            this._notificationDisposables.set(method, connection.onNotification(type, handler));\n            disposable = {\n                dispose: () => {\n                    const disposable = this._notificationDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._notificationDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        else {\n            this._pendingNotificationHandlers.set(method, handler);\n            disposable = {\n                dispose: () => {\n                    this._pendingNotificationHandlers.delete(method);\n                    const disposable = this._notificationDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._notificationDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        return {\n            dispose: () => {\n                this._notificationHandlers.delete(method);\n                disposable.dispose();\n            }\n        };\n    }\n    async sendProgress(type, token, value) {\n        if (this.$state === ClientState.StartFailed || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive, `Client is not running`));\n        }\n        try {\n            // Ensure we have a connection before we force the document sync.\n            const connection = await this.$start();\n            return connection.sendProgress(type, token, value);\n        }\n        catch (error) {\n            this.error(`Sending progress for token ${token} failed.`, error);\n            throw error;\n        }\n    }\n    onProgress(type, token, handler) {\n        this._progressHandlers.set(token, { type, handler });\n        const connection = this.activeConnection();\n        let disposable;\n        const handleWorkDoneProgress = this._clientOptions.middleware?.handleWorkDoneProgress;\n        const realHandler = vscode_languageserver_protocol_1.WorkDoneProgress.is(type) && handleWorkDoneProgress !== undefined\n            ? (params) => {\n                handleWorkDoneProgress(token, params, () => handler(params));\n            }\n            : handler;\n        if (connection !== undefined) {\n            this._progressDisposables.set(token, connection.onProgress(type, token, realHandler));\n            disposable = {\n                dispose: () => {\n                    const disposable = this._progressDisposables.get(token);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._progressDisposables.delete(token);\n                    }\n                }\n            };\n        }\n        else {\n            this._pendingProgressHandlers.set(token, { type, handler });\n            disposable = {\n                dispose: () => {\n                    this._pendingProgressHandlers.delete(token);\n                    const disposable = this._progressDisposables.get(token);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._progressDisposables.delete(token);\n                    }\n                }\n            };\n        }\n        return {\n            dispose: () => {\n                this._progressHandlers.delete(token);\n                disposable.dispose();\n            }\n        };\n    }\n    createDefaultErrorHandler(maxRestartCount) {\n        if (maxRestartCount !== undefined && maxRestartCount < 0) {\n            throw new Error(`Invalid maxRestartCount: ${maxRestartCount}`);\n        }\n        return new DefaultErrorHandler(this, maxRestartCount ?? 4);\n    }\n    async setTrace(value) {\n        this._trace = value;\n        const connection = this.activeConnection();\n        if (connection !== undefined) {\n            await connection.trace(this._trace, this._tracer, {\n                sendNotification: false,\n                traceFormat: this._traceFormat\n            });\n        }\n    }\n    data2String(data) {\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\n            const responseError = data;\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\n        }\n        if (data instanceof Error) {\n            if (Is.string(data.stack)) {\n                return data.stack;\n            }\n            return data.message;\n        }\n        if (Is.string(data)) {\n            return data;\n        }\n        return data.toString();\n    }\n    error(message, data, showNotification = true) {\n        this.outputChannel.error(this.getLogMessage(message, data));\n        if (showNotification === 'force' || (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error)) {\n            this.showNotificationMessage(vscode_languageserver_protocol_1.MessageType.Error, message, data);\n        }\n    }\n    warn(message, data, showNotification = true) {\n        this.outputChannel.warn(this.getLogMessage(message, data));\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\n            this.showNotificationMessage(vscode_languageserver_protocol_1.MessageType.Warning, message, data);\n        }\n    }\n    info(message, data, showNotification = true) {\n        this.outputChannel.info(this.getLogMessage(message, data));\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\n            this.showNotificationMessage(vscode_languageserver_protocol_1.MessageType.Info, message, data);\n        }\n    }\n    debug(message, data, showNotification = true) {\n        this.outputChannel.debug(this.getLogMessage(message, data));\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Debug) {\n            this.showNotificationMessage(vscode_languageserver_protocol_1.MessageType.Debug, message, data);\n        }\n    }\n    trace(message, data) {\n        this.traceOutputChannel.trace(this.getLogMessage(message, data));\n    }\n    traceObject(data) {\n        this.traceOutputChannel.trace(JSON.stringify(data));\n    }\n    showNotificationMessage(type, message, data) {\n        message = message ?? 'A request has failed. See the output for more information.';\n        if (data) {\n            message += '\\n' + this.data2String(data);\n        }\n        const messageFunc = type === vscode_languageserver_protocol_1.MessageType.Error\n            ? vscode_1.window.showErrorMessage\n            : type === vscode_languageserver_protocol_1.MessageType.Warning\n                ? vscode_1.window.showWarningMessage\n                : vscode_1.window.showInformationMessage;\n        void messageFunc(message, 'Go to output').then((selection) => {\n            if (selection !== undefined) {\n                this.outputChannel.show(true);\n            }\n        });\n    }\n    getLogMessage(message, data) {\n        return data !== null && data !== undefined ? `${message}\\n${this.data2String(data)}` : message;\n    }\n    needsStart() {\n        return this.$state === ClientState.Initial || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped;\n    }\n    needsStop() {\n        return this.$state === ClientState.Starting || this.$state === ClientState.Running;\n    }\n    activeConnection() {\n        return this.$state === ClientState.Running && this._connection !== undefined ? this._connection : undefined;\n    }\n    isRunning() {\n        return this.$state === ClientState.Running;\n    }\n    async start() {\n        if (this._disposed === 'disposing' || this._disposed === 'disposed') {\n            throw new Error(`Client got disposed and can't be restarted.`);\n        }\n        if (this.$state === ClientState.Stopping) {\n            throw new Error(`Client is currently stopping. Can only restart a full stopped client`);\n        }\n        // We are already running or are in the process of getting up\n        // to speed.\n        if (this._onStart !== undefined) {\n            return this._onStart;\n        }\n        const [promise, resolve, reject] = this.createOnStartPromise();\n        this._onStart = promise;\n        // If we restart then the diagnostics collection is reused.\n        if (this._diagnostics === undefined) {\n            this._diagnostics = vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName ?? this._id);\n        }\n        // When we start make all buffer handlers pending so that they\n        // get added.\n        for (const [method, handler] of this._notificationHandlers) {\n            if (!this._pendingNotificationHandlers.has(method)) {\n                this._pendingNotificationHandlers.set(method, handler);\n            }\n        }\n        for (const [method, handler] of this._requestHandlers) {\n            if (!this._pendingRequestHandlers.has(method)) {\n                this._pendingRequestHandlers.set(method, handler);\n            }\n        }\n        for (const [token, data] of this._progressHandlers) {\n            if (!this._pendingProgressHandlers.has(token)) {\n                this._pendingProgressHandlers.set(token, data);\n            }\n        }\n        this.$state = ClientState.Starting;\n        try {\n            const connection = await this.createConnection();\n            connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, (message) => {\n                switch (message.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        this.error(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        this.warn(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        this.info(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Debug:\n                        this.debug(message.message, undefined, false);\n                        break;\n                    default:\n                        this.outputChannel.appendLine(message.message);\n                }\n            });\n            connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, (message) => {\n                switch (message.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        void vscode_1.window.showErrorMessage(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        void vscode_1.window.showWarningMessage(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        void vscode_1.window.showInformationMessage(message.message);\n                        break;\n                    default:\n                        void vscode_1.window.showInformationMessage(message.message);\n                }\n            });\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\n                let messageFunc;\n                switch (params.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        messageFunc = vscode_1.window.showErrorMessage;\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        messageFunc = vscode_1.window.showWarningMessage;\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        messageFunc = vscode_1.window.showInformationMessage;\n                        break;\n                    default:\n                        messageFunc = vscode_1.window.showInformationMessage;\n                }\n                const actions = params.actions || [];\n                return messageFunc(params.message, ...actions);\n            });\n            connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, (data) => {\n                this._telemetryEmitter.fire(data);\n            });\n            connection.onRequest(vscode_languageserver_protocol_1.ShowDocumentRequest.type, async (params, token) => {\n                const showDocument = async (params) => {\n                    const uri = this.protocol2CodeConverter.asUri(params.uri);\n                    try {\n                        if (params.external === true) {\n                            const success = await vscode_1.env.openExternal(uri);\n                            return { success };\n                        }\n                        else {\n                            const options = {};\n                            if (params.selection !== undefined) {\n                                options.selection = this.protocol2CodeConverter.asRange(params.selection);\n                            }\n                            if (params.takeFocus === undefined || params.takeFocus === false) {\n                                options.preserveFocus = true;\n                            }\n                            else if (params.takeFocus === true) {\n                                options.preserveFocus = false;\n                            }\n                            await vscode_1.window.showTextDocument(uri, options);\n                            return { success: true };\n                        }\n                    }\n                    catch (error) {\n                        return { success: false };\n                    }\n                };\n                const middleware = this._clientOptions.middleware.window?.showDocument;\n                if (middleware !== undefined) {\n                    return middleware(params, token, showDocument);\n                }\n                else {\n                    return showDocument(params);\n                }\n            });\n            connection.listen();\n            await this.initialize(connection);\n            resolve();\n        }\n        catch (error) {\n            this.$state = ClientState.StartFailed;\n            this.error(`${this._name} client: couldn't create connection to server.`, error, 'force');\n            reject(error);\n        }\n        return this._onStart;\n    }\n    createOnStartPromise() {\n        let resolve;\n        let reject;\n        const promise = new Promise((_resolve, _reject) => {\n            resolve = _resolve;\n            reject = _reject;\n        });\n        return [promise, resolve, reject];\n    }\n    async initialize(connection) {\n        this.refreshTrace(connection, false);\n        const initOption = this._clientOptions.initializationOptions;\n        // If the client is locked to a workspace folder use it. In this case the workspace folder\n        // feature is not registered and we need to initialize the value here.\n        const [rootPath, workspaceFolders] = this._clientOptions.workspaceFolder !== undefined\n            ? [this._clientOptions.workspaceFolder.uri.fsPath, [{ uri: this._c2p.asUri(this._clientOptions.workspaceFolder.uri), name: this._clientOptions.workspaceFolder.name }]]\n            : [this._clientGetRootPath(), null];\n        const initParams = {\n            processId: null,\n            clientInfo: {\n                name: vscode_1.env.appName,\n                version: vscode_1.version\n            },\n            locale: this.getLocale(),\n            rootPath: rootPath ? rootPath : null,\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\n            capabilities: this.computeClientCapabilities(),\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\n            workspaceFolders: workspaceFolders\n        };\n        this.fillInitializeParams(initParams);\n        if (this._clientOptions.progressOnInitialization) {\n            const token = UUID.generateUuid();\n            const part = new progressPart_1.ProgressPart(connection, token);\n            initParams.workDoneToken = token;\n            try {\n                const result = await this.doInitialize(connection, initParams);\n                part.done();\n                return result;\n            }\n            catch (error) {\n                part.cancel();\n                throw error;\n            }\n        }\n        else {\n            return this.doInitialize(connection, initParams);\n        }\n    }\n    async doInitialize(connection, initParams) {\n        try {\n            const result = await connection.initialize(initParams);\n            if (result.capabilities.positionEncoding !== undefined && result.capabilities.positionEncoding !== vscode_languageserver_protocol_1.PositionEncodingKind.UTF16) {\n                throw new Error(`Unsupported position encoding (${result.capabilities.positionEncoding}) received from server ${this.name}`);\n            }\n            this._initializeResult = result;\n            this.$state = ClientState.Running;\n            let textDocumentSyncOptions = undefined;\n            if (Is.number(result.capabilities.textDocumentSync)) {\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n                    textDocumentSyncOptions = {\n                        openClose: false,\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\n                        save: undefined\n                    };\n                }\n                else {\n                    textDocumentSyncOptions = {\n                        openClose: true,\n                        change: result.capabilities.textDocumentSync,\n                        save: {\n                            includeText: false\n                        }\n                    };\n                }\n            }\n            else if (result.capabilities.textDocumentSync !== undefined && result.capabilities.textDocumentSync !== null) {\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\n            }\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\n            connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, params => this.handleDiagnostics(params));\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\n            // Add pending notification, request and progress handlers.\n            for (const [method, handler] of this._pendingNotificationHandlers) {\n                this._notificationDisposables.set(method, connection.onNotification(method, handler));\n            }\n            this._pendingNotificationHandlers.clear();\n            for (const [method, handler] of this._pendingRequestHandlers) {\n                this._requestDisposables.set(method, connection.onRequest(method, handler));\n            }\n            this._pendingRequestHandlers.clear();\n            for (const [token, data] of this._pendingProgressHandlers) {\n                this._progressDisposables.set(token, connection.onProgress(data.type, token, data.handler));\n            }\n            this._pendingProgressHandlers.clear();\n            // if (this._clientOptions.suspend.mode !== SuspendMode.off) {\n            // \tthis._idleInterval =  RAL().timer.setInterval(() => this.checkSuspend(), this._clientOptions.suspend.interval);\n            // }\n            await connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\n            this.hookFileEvents(connection);\n            this.hookLogLevelChanged(connection);\n            this.hookConfigurationChanged(connection);\n            this.initializeFeatures(connection);\n            return result;\n        }\n        catch (error) {\n            if (this._clientOptions.initializationFailedHandler) {\n                if (this._clientOptions.initializationFailedHandler(error)) {\n                    void this.initialize(connection);\n                }\n                else {\n                    void this.stop();\n                }\n            }\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\n                void vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: 'retry' }).then(item => {\n                    if (item && item.id === 'retry') {\n                        void this.initialize(connection);\n                    }\n                    else {\n                        void this.stop();\n                    }\n                });\n            }\n            else {\n                if (error && error.message) {\n                    void vscode_1.window.showErrorMessage(error.message);\n                }\n                this.error('Server initialization failed.', error);\n                void this.stop();\n            }\n            throw error;\n        }\n    }\n    _clientGetRootPath() {\n        const folders = vscode_1.workspace.workspaceFolders;\n        if (!folders || folders.length === 0) {\n            return undefined;\n        }\n        const folder = folders[0];\n        if (folder.uri.scheme === 'file') {\n            return folder.uri.fsPath;\n        }\n        return undefined;\n    }\n    stop(timeout = 2000) {\n        // Wait 2 seconds on stop\n        return this.shutdown(ShutdownMode.Stop, timeout);\n    }\n    dispose(timeout = 2000) {\n        try {\n            this._disposed = 'disposing';\n            return this.stop(timeout);\n        }\n        finally {\n            this._disposed = 'disposed';\n        }\n    }\n    async shutdown(mode, timeout = 2000) {\n        // If the client is stopped or in its initial state return.\n        if (this.$state === ClientState.Stopped || this.$state === ClientState.Initial) {\n            return;\n        }\n        // If we are stopping the client and have a stop promise return it.\n        if (this.$state === ClientState.Stopping) {\n            if (this._onStop !== undefined) {\n                return this._onStop;\n            }\n            else {\n                throw new Error(`Client is stopping but no stop promise available.`);\n            }\n        }\n        const connection = this.activeConnection();\n        // We can't stop a client that is not running (e.g. has no connection). Especially not\n        // on that us starting since it can't be correctly synchronized.\n        if (connection === undefined || this.$state !== ClientState.Running) {\n            throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);\n        }\n        this._initializeResult = undefined;\n        this.$state = ClientState.Stopping;\n        this.cleanUp(mode);\n        const tp = new Promise(c => { (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(c, timeout); });\n        const shutdown = (async (connection) => {\n            await connection.shutdown();\n            await connection.exit();\n            return connection;\n        })(connection);\n        return this._onStop = Promise.race([tp, shutdown]).then((connection) => {\n            // The connection won the race with the timeout.\n            if (connection !== undefined) {\n                connection.end();\n                connection.dispose();\n            }\n            else {\n                this.error(`Stopping server timed out`, undefined, false);\n                throw new Error(`Stopping the server timed out`);\n            }\n        }, (error) => {\n            this.error(`Stopping server failed`, error, false);\n            throw error;\n        }).finally(() => {\n            this.$state = ClientState.Stopped;\n            mode === ShutdownMode.Stop && this.cleanUpChannel();\n            this._onStart = undefined;\n            this._onStop = undefined;\n            this._connection = undefined;\n            this._ignoredRegistrations.clear();\n        });\n    }\n    cleanUp(mode) {\n        // purge outstanding file events.\n        this._fileEvents = [];\n        this._fileEventDelayer.cancel();\n        const disposables = this._listeners.splice(0, this._listeners.length);\n        for (const disposable of disposables) {\n            disposable.dispose();\n        }\n        if (this._syncedDocuments) {\n            this._syncedDocuments.clear();\n        }\n        // Clear features in reverse order;\n        for (const feature of Array.from(this._features.entries()).map(entry => entry[1]).reverse()) {\n            feature.clear();\n        }\n        if ((mode === ShutdownMode.Stop || mode === ShutdownMode.Restart) && this._diagnostics !== undefined) {\n            this._diagnostics.dispose();\n            this._diagnostics = undefined;\n        }\n        if (this._idleInterval !== undefined) {\n            this._idleInterval.dispose();\n            this._idleInterval = undefined;\n        }\n        // this._idleStart = undefined;\n    }\n    cleanUpChannel() {\n        if (this._outputChannel !== undefined && this._disposeOutputChannel) {\n            this._outputChannel.dispose();\n            this._outputChannel = undefined;\n        }\n    }\n    notifyFileEvent(event) {\n        const client = this;\n        async function didChangeWatchedFile(event) {\n            client._fileEvents.push(event);\n            return client._fileEventDelayer.trigger(async () => {\n                const fileEvents = client._fileEvents;\n                client._fileEvents = [];\n                try {\n                    await client.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, { changes: fileEvents });\n                }\n                catch (error) {\n                    // Restore the file events.\n                    client._fileEvents.push(...fileEvents);\n                    throw error;\n                }\n            });\n        }\n        const workSpaceMiddleware = this.clientOptions.middleware?.workspace;\n        (workSpaceMiddleware?.didChangeWatchedFile ? workSpaceMiddleware.didChangeWatchedFile(event, didChangeWatchedFile) : didChangeWatchedFile(event)).catch((error) => {\n            client.error(`Notifying file events failed.`, error);\n        });\n    }\n    async sendPendingFullTextDocumentChanges(connection) {\n        return this._pendingChangeSemaphore.lock(async () => {\n            try {\n                const changes = this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._inFlightOpenNotifications);\n                if (changes.length === 0) {\n                    return;\n                }\n                for (const document of changes) {\n                    const params = this.code2ProtocolConverter.asChangeTextDocumentParams(document);\n                    // We await the send and not the delivery since it is more or less the same for\n                    // notifications.\n                    await connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                    this._didChangeTextDocumentFeature.notificationSent(document, vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                }\n            }\n            catch (error) {\n                this.error(`Sending pending changes failed`, error, false);\n                throw error;\n            }\n        });\n    }\n    triggerPendingChangeDelivery() {\n        this._pendingChangeDelayer.trigger(async () => {\n            const connection = this.activeConnection();\n            if (connection === undefined) {\n                this.triggerPendingChangeDelivery();\n                return;\n            }\n            await this.sendPendingFullTextDocumentChanges(connection);\n        }).catch((error) => this.error(`Delivering pending changes failed`, error, false));\n    }\n    _diagnosticQueue = new Map();\n    _diagnosticQueueState = { state: 'idle' };\n    handleDiagnostics(params) {\n        if (!this._diagnostics) {\n            return;\n        }\n        const key = params.uri;\n        if (this._diagnosticQueueState.state === 'busy' && this._diagnosticQueueState.document === key) {\n            // Cancel the active run;\n            this._diagnosticQueueState.tokenSource.cancel();\n        }\n        this._diagnosticQueue.set(params.uri, params.diagnostics);\n        this.triggerDiagnosticQueue();\n    }\n    triggerDiagnosticQueue() {\n        (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => { this.workDiagnosticQueue(); });\n    }\n    workDiagnosticQueue() {\n        if (this._diagnosticQueueState.state === 'busy') {\n            return;\n        }\n        const next = this._diagnosticQueue.entries().next();\n        if (next.done === true) {\n            // Nothing in the queue\n            return;\n        }\n        const [document, diagnostics] = next.value;\n        this._diagnosticQueue.delete(document);\n        const tokenSource = new vscode_1.CancellationTokenSource();\n        this._diagnosticQueueState = { state: 'busy', document: document, tokenSource };\n        this._p2c.asDiagnostics(diagnostics, tokenSource.token).then((converted) => {\n            if (!tokenSource.token.isCancellationRequested) {\n                const uri = this._p2c.asUri(document);\n                const middleware = this.clientOptions.middleware;\n                if (middleware.handleDiagnostics) {\n                    middleware.handleDiagnostics(uri, converted, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\n                }\n                else {\n                    this.setDiagnostics(uri, converted);\n                }\n            }\n        }).catch((error) => {\n            this.error(`Processing diagnostic queue failed.`, error);\n        }).finally(() => {\n            this._diagnosticQueueState = { state: 'idle' };\n            this.triggerDiagnosticQueue();\n        });\n    }\n    setDiagnostics(uri, diagnostics) {\n        if (!this._diagnostics) {\n            return;\n        }\n        this._diagnostics.set(uri, diagnostics);\n    }\n    getLocale() {\n        return vscode_1.env.language;\n    }\n    async $start() {\n        if (this.$state === ClientState.StartFailed) {\n            throw new Error(`Previous start failed. Can't restart server.`);\n        }\n        await this.start();\n        const connection = this.activeConnection();\n        if (connection === undefined) {\n            throw new Error(`Starting server failed`);\n        }\n        return connection;\n    }\n    async createConnection() {\n        const errorHandler = (error, message, count) => {\n            this.handleConnectionError(error, message, count).catch((error) => this.error(`Handling connection error failed`, error));\n        };\n        const closeHandler = () => {\n            this.handleConnectionClosed().catch((error) => this.error(`Handling connection close failed`, error));\n        };\n        const transports = await this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8');\n        this._connection = createConnection(transports.reader, transports.writer, errorHandler, closeHandler, this._clientOptions.connectionOptions);\n        return this._connection;\n    }\n    async handleConnectionClosed() {\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\n        if (this.$state === ClientState.Stopped) {\n            return;\n        }\n        try {\n            if (this._connection !== undefined) {\n                this._connection.dispose();\n            }\n        }\n        catch (error) {\n            // Disposing a connection could fail if error cases.\n        }\n        let handlerResult = { action: CloseAction.DoNotRestart };\n        if (this.$state !== ClientState.Stopping) {\n            try {\n                handlerResult = await this._clientOptions.errorHandler.closed();\n            }\n            catch (error) {\n                // Ignore errors coming from the error handler.\n            }\n        }\n        this._connection = undefined;\n        if (handlerResult.action === CloseAction.DoNotRestart) {\n            this.error(handlerResult.message ?? 'Connection to server got closed. Server will not be restarted.', undefined, handlerResult.handled === true ? false : 'force');\n            this.cleanUp(ShutdownMode.Stop);\n            if (this.$state === ClientState.Starting) {\n                this.$state = ClientState.StartFailed;\n            }\n            else {\n                this.$state = ClientState.Stopped;\n            }\n            this._onStop = Promise.resolve();\n            this._onStart = undefined;\n        }\n        else if (handlerResult.action === CloseAction.Restart) {\n            this.info(handlerResult.message ?? 'Connection to server got closed. Server will restart.', undefined, !handlerResult.handled);\n            this.cleanUp(ShutdownMode.Restart);\n            this.$state = ClientState.Initial;\n            this._onStop = Promise.resolve();\n            this._onStart = undefined;\n            this.start().catch((error) => this.error(`Restarting server failed`, error, 'force'));\n        }\n    }\n    async handleConnectionError(error, message, count) {\n        const handlerResult = await this._clientOptions.errorHandler.error(error, message, count);\n        if (handlerResult.action === ErrorAction.Shutdown) {\n            this.error(handlerResult.message ?? `Client ${this._name}: connection to server is erroring.\\n${error.message}\\nShutting down server.`, undefined, handlerResult.handled === true ? false : 'force');\n            this.stop().catch((error) => {\n                this.error(`Stopping server failed`, error, false);\n            });\n        }\n        else {\n            this.error(handlerResult.message ??\n                `Client ${this._name}: connection to server is erroring.\\n${error.message}`, undefined, handlerResult.handled === true ? false : 'force');\n        }\n    }\n    hookConfigurationChanged(connection) {\n        this._listeners.push(vscode_1.workspace.onDidChangeConfiguration(() => {\n            this.refreshTrace(connection, true);\n        }));\n    }\n    hookLogLevelChanged(connection) {\n        this._listeners.push(this.traceOutputChannel.onDidChangeLogLevel((level) => {\n            this._traceLogLevel = level;\n            this.refreshTrace(connection, true);\n        }));\n    }\n    refreshTrace(connection, sendNotification = false) {\n        const config = vscode_1.workspace.getConfiguration(this._id);\n        let trace = this._traceLogLevel !== vscode_1.LogLevel.Trace ? vscode_languageserver_protocol_1.Trace.Off : vscode_languageserver_protocol_1.Trace.Messages;\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\n        if (config && trace !== vscode_languageserver_protocol_1.Trace.Off) {\n            const traceConfig = config.get('trace.server', 'messages');\n            if (typeof traceConfig === 'string') {\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\n                if (trace === vscode_languageserver_protocol_1.Trace.Off) {\n                    trace = vscode_languageserver_protocol_1.Trace.Messages;\n                }\n            }\n            else {\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'messages'));\n                if (trace === vscode_languageserver_protocol_1.Trace.Off) {\n                    trace = vscode_languageserver_protocol_1.Trace.Messages;\n                }\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\n            }\n        }\n        this._trace = trace;\n        this._traceFormat = traceFormat;\n        connection.trace(this._trace, this._tracer, {\n            sendNotification,\n            traceFormat: this._traceFormat\n        }).catch((error) => { this.error(`Updating trace failed with error`, error, false); });\n    }\n    hookFileEvents(_connection) {\n        const fileEvents = this._clientOptions.synchronize.fileEvents;\n        if (!fileEvents) {\n            return;\n        }\n        let watchers;\n        if (Is.array(fileEvents)) {\n            watchers = fileEvents;\n        }\n        else {\n            watchers = [fileEvents];\n        }\n        if (!watchers) {\n            return;\n        }\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\n    }\n    _features = [];\n    _dynamicFeatures = new Map();\n    registerFeatures(features) {\n        for (const feature of features) {\n            this.registerFeature(feature);\n        }\n    }\n    registerFeature(feature) {\n        this._features.push(feature);\n        if (features_1.DynamicFeature.is(feature)) {\n            const registrationType = feature.registrationType;\n            this._dynamicFeatures.set(registrationType.method, feature);\n        }\n    }\n    getFeature(request) {\n        return this._dynamicFeatures.get(request);\n    }\n    hasDedicatedTextSynchronizationFeature(textDocument) {\n        const feature = this.getFeature(vscode_languageserver_protocol_1.NotebookDocumentSyncRegistrationType.method);\n        if (feature === undefined || !(feature instanceof notebook_1.NotebookDocumentSyncFeature)) {\n            return false;\n        }\n        return feature.handles(textDocument);\n    }\n    registerBuiltinFeatures() {\n        const pendingFullTextDocumentChanges = new Map();\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\n        this._didOpenTextDocumentFeature = new textSynchronization_1.DidOpenTextDocumentFeature(this, this._syncedDocuments);\n        this.registerFeature(this._didOpenTextDocumentFeature);\n        this._didChangeTextDocumentFeature = new textSynchronization_1.DidChangeTextDocumentFeature(this, pendingFullTextDocumentChanges);\n        this._didChangeTextDocumentFeature.onPendingChangeAdded(() => {\n            this.triggerPendingChangeDelivery();\n        });\n        this.registerFeature(this._didChangeTextDocumentFeature);\n        this.registerFeature(new textSynchronization_1.WillSaveFeature(this));\n        this.registerFeature(new textSynchronization_1.WillSaveWaitUntilFeature(this));\n        this.registerFeature(new textSynchronization_1.DidSaveTextDocumentFeature(this));\n        this.registerFeature(new textSynchronization_1.DidCloseTextDocumentFeature(this, this._syncedDocuments, pendingFullTextDocumentChanges));\n        this.registerFeature(new fileSystemWatcher_1.FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\n        this.registerFeature(new completion_1.CompletionItemFeature(this));\n        this.registerFeature(new hover_1.HoverFeature(this));\n        this.registerFeature(new signatureHelp_1.SignatureHelpFeature(this));\n        this.registerFeature(new definition_1.DefinitionFeature(this));\n        this.registerFeature(new reference_1.ReferencesFeature(this));\n        this.registerFeature(new documentHighlight_1.DocumentHighlightFeature(this));\n        this.registerFeature(new documentSymbol_1.DocumentSymbolFeature(this));\n        this.registerFeature(new workspaceSymbol_1.WorkspaceSymbolFeature(this));\n        this.registerFeature(new codeAction_1.CodeActionFeature(this));\n        this.registerFeature(new codeLens_1.CodeLensFeature(this));\n        this.registerFeature(new formatting_1.DocumentFormattingFeature(this));\n        this.registerFeature(new formatting_1.DocumentRangeFormattingFeature(this));\n        this.registerFeature(new formatting_1.DocumentOnTypeFormattingFeature(this));\n        this.registerFeature(new rename_1.RenameFeature(this));\n        this.registerFeature(new documentLink_1.DocumentLinkFeature(this));\n        this.registerFeature(new executeCommand_1.ExecuteCommandFeature(this));\n        this.registerFeature(new configuration_1.SyncConfigurationFeature(this));\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\n        // We only register the workspace folder feature if the client is not locked\n        // to a specific workspace folder.\n        if (this.clientOptions.workspaceFolder === undefined) {\n            this.registerFeature(new workspaceFolder_1.WorkspaceFoldersFeature(this));\n        }\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\n        this.registerFeature(new selectionRange_1.SelectionRangeFeature(this));\n        this.registerFeature(new progress_1.ProgressFeature(this));\n        this.registerFeature(new callHierarchy_1.CallHierarchyFeature(this));\n        this.registerFeature(new semanticTokens_1.SemanticTokensFeature(this));\n        this.registerFeature(new linkedEditingRange_1.LinkedEditingFeature(this));\n        this.registerFeature(new fileOperations_1.DidCreateFilesFeature(this));\n        this.registerFeature(new fileOperations_1.DidRenameFilesFeature(this));\n        this.registerFeature(new fileOperations_1.DidDeleteFilesFeature(this));\n        this.registerFeature(new fileOperations_1.WillCreateFilesFeature(this));\n        this.registerFeature(new fileOperations_1.WillRenameFilesFeature(this));\n        this.registerFeature(new fileOperations_1.WillDeleteFilesFeature(this));\n        this.registerFeature(new typeHierarchy_1.TypeHierarchyFeature(this));\n        this.registerFeature(new inlineValue_1.InlineValueFeature(this));\n        this.registerFeature(new inlayHint_1.InlayHintsFeature(this));\n        this.registerFeature(new diagnostic_1.DiagnosticFeature(this));\n        this.registerFeature(new notebook_1.NotebookDocumentSyncFeature(this));\n    }\n    registerProposedFeatures() {\n        this.registerFeatures(ProposedFeatures.createAll(this));\n    }\n    fillInitializeParams(params) {\n        for (const feature of this._features) {\n            if (Is.func(feature.fillInitializeParams)) {\n                feature.fillInitializeParams(params);\n            }\n        }\n    }\n    computeClientCapabilities() {\n        const result = {};\n        (0, features_1.ensure)(result, 'workspace').applyEdit = true;\n        const workspaceEdit = (0, features_1.ensure)((0, features_1.ensure)(result, 'workspace'), 'workspaceEdit');\n        workspaceEdit.documentChanges = true;\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\n        workspaceEdit.normalizesLineEndings = true;\n        workspaceEdit.changeAnnotationSupport = {\n            groupsOnLabel: true\n        };\n        workspaceEdit.metadataSupport = true;\n        workspaceEdit.snippetEditSupport = true;\n        const diagnostics = (0, features_1.ensure)((0, features_1.ensure)(result, 'textDocument'), 'publishDiagnostics');\n        diagnostics.relatedInformation = true;\n        diagnostics.versionSupport = false;\n        diagnostics.tagSupport = { valueSet: [vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary, vscode_languageserver_protocol_1.DiagnosticTag.Deprecated] };\n        diagnostics.codeDescriptionSupport = true;\n        diagnostics.dataSupport = true;\n        const textDocumentFilter = (0, features_1.ensure)((0, features_1.ensure)(result, 'textDocument'), 'filters');\n        textDocumentFilter.relativePatternSupport = true;\n        const windowCapabilities = (0, features_1.ensure)(result, 'window');\n        const showMessage = (0, features_1.ensure)(windowCapabilities, 'showMessage');\n        showMessage.messageActionItem = { additionalPropertiesSupport: true };\n        const showDocument = (0, features_1.ensure)(windowCapabilities, 'showDocument');\n        showDocument.support = true;\n        const generalCapabilities = (0, features_1.ensure)(result, 'general');\n        generalCapabilities.staleRequestSupport = {\n            cancel: true,\n            retryOnContentModified: Array.from(BaseLanguageClient.RequestsToCancelOnContentModified)\n        };\n        generalCapabilities.regularExpressions = { engine: 'ECMAScript', version: 'ES2020' };\n        generalCapabilities.markdown = {\n            parser: 'marked',\n            version: '1.1.0',\n        };\n        generalCapabilities.positionEncodings = ['utf-16'];\n        if (this._clientOptions.markdown.supportHtml) {\n            generalCapabilities.markdown.allowedTags = ['ul', 'li', 'p', 'code', 'blockquote', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'em', 'pre', 'table', 'thead', 'tbody', 'tr', 'th', 'td', 'div', 'del', 'a', 'strong', 'br', 'img', 'span'];\n        }\n        for (const feature of this._features) {\n            feature.fillClientCapabilities(result);\n        }\n        return result;\n    }\n    initializeFeatures(_connection) {\n        const documentSelector = this._clientOptions.documentSelector;\n        for (const feature of this._features) {\n            if (Is.func(feature.preInitialize)) {\n                feature.preInitialize(this._capabilities, documentSelector);\n            }\n        }\n        for (const feature of this._features) {\n            feature.initialize(this._capabilities, documentSelector);\n        }\n    }\n    async handleRegistrationRequest(params) {\n        const middleware = this.clientOptions.middleware?.handleRegisterCapability;\n        if (middleware) {\n            return middleware(params, nextParams => this.doRegisterCapability(nextParams));\n        }\n        else {\n            return this.doRegisterCapability(params);\n        }\n    }\n    async doRegisterCapability(params) {\n        // We will not receive a registration call before a client is running\n        // from a server. However if we stop or shutdown we might which might\n        // try to restart the server. So ignore registrations if we are not running\n        if (!this.isRunning()) {\n            for (const registration of params.registrations) {\n                this._ignoredRegistrations.add(registration.id);\n            }\n            return;\n        }\n        for (const registration of params.registrations) {\n            const feature = this._dynamicFeatures.get(registration.method);\n            if (feature === undefined) {\n                return Promise.reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\n            }\n            const options = registration.registerOptions ?? {};\n            options.documentSelector = options.documentSelector ?? this._clientOptions.documentSelector;\n            const data = {\n                id: registration.id,\n                registerOptions: options\n            };\n            try {\n                feature.register(data);\n            }\n            catch (err) {\n                return Promise.reject(err);\n            }\n        }\n    }\n    async handleUnregistrationRequest(params) {\n        const middleware = this.clientOptions.middleware?.handleUnregisterCapability;\n        if (middleware) {\n            return middleware(params, nextParams => this.doUnregisterCapability(nextParams));\n        }\n        else {\n            return this.doUnregisterCapability(params);\n        }\n    }\n    async doUnregisterCapability(params) {\n        for (const unregistration of params.unregisterations) {\n            if (this._ignoredRegistrations.has(unregistration.id)) {\n                continue;\n            }\n            const feature = this._dynamicFeatures.get(unregistration.method);\n            if (!feature) {\n                return Promise.reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\n            }\n            feature.unregister(unregistration.id);\n        }\n    }\n    async handleApplyWorkspaceEdit(params) {\n        const middleware = this.clientOptions.middleware?.workspace?.handleApplyEdit;\n        if (middleware) {\n            const resultOrError = await middleware(params, nextParams => this.doHandleApplyWorkspaceEdit(nextParams));\n            if (resultOrError instanceof vscode_languageserver_protocol_1.ResponseError) {\n                return Promise.reject(resultOrError);\n            }\n            return resultOrError;\n        }\n        else {\n            return this.doHandleApplyWorkspaceEdit(params);\n        }\n    }\n    workspaceEditLock = new async_1.Semaphore(1);\n    async doHandleApplyWorkspaceEdit(params) {\n        const workspaceEdit = params.edit;\n        // Make sure we convert workspace edits one after the other. Otherwise\n        // we might execute a workspace edit received first after we received another\n        // one since the conversion might race.\n        const converted = await this.workspaceEditLock.lock(() => {\n            return this._p2c.asWorkspaceEdit(workspaceEdit);\n        });\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\n        // However doing it here adds some safety since the server can lag more behind then an extension.\n        const openTextDocuments = new Map();\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\n        let versionMismatch = false;\n        if (workspaceEdit.documentChanges) {\n            for (const change of workspaceEdit.documentChanges) {\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\n                    const changeUri = this._p2c.asUri(change.textDocument.uri).toString();\n                    const textDocument = openTextDocuments.get(changeUri);\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\n                        versionMismatch = true;\n                        break;\n                    }\n                }\n            }\n        }\n        if (versionMismatch) {\n            return Promise.resolve({ applied: false });\n        }\n        return Is.asPromise(vscode_1.workspace.applyEdit(converted, { isRefactoring: params.metadata?.isRefactoring }).then((value) => { return { applied: value }; }));\n    }\n    static RequestsToCancelOnContentModified = new Set([\n        vscode_languageserver_protocol_1.SemanticTokensRequest.method,\n        vscode_languageserver_protocol_1.SemanticTokensRangeRequest.method,\n        vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.method\n    ]);\n    static CancellableResolveCalls = new Set([\n        vscode_languageserver_protocol_1.CompletionResolveRequest.method,\n        vscode_languageserver_protocol_1.CodeLensResolveRequest.method,\n        vscode_languageserver_protocol_1.CodeActionResolveRequest.method,\n        vscode_languageserver_protocol_1.InlayHintResolveRequest.method,\n        vscode_languageserver_protocol_1.DocumentLinkResolveRequest.method,\n        vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.method\n    ]);\n    handleFailedRequest(type, token, error, defaultValue, showNotification = true, throwOnCancel = false) {\n        // If we get a request cancel or a content modified don't log anything.\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError) {\n            // The connection got disposed while we were waiting for a response.\n            // Simply return the default value. Is the best we can do.\n            if (error.code === vscode_languageserver_protocol_1.ErrorCodes.PendingResponseRejected || error.code === vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive) {\n                return defaultValue;\n            }\n            if (error.code === vscode_languageserver_protocol_1.LSPErrorCodes.RequestCancelled || error.code === vscode_languageserver_protocol_1.LSPErrorCodes.ServerCancelled) {\n                if (token !== undefined && token.isCancellationRequested && !throwOnCancel) {\n                    return defaultValue;\n                }\n                else {\n                    if (error.data !== undefined) {\n                        throw new features_1.LSPCancellationError(error.data);\n                    }\n                    else {\n                        throw new vscode_1.CancellationError();\n                    }\n                }\n            }\n            else if (error.code === vscode_languageserver_protocol_1.LSPErrorCodes.ContentModified) {\n                if (BaseLanguageClient.RequestsToCancelOnContentModified.has(type.method) || BaseLanguageClient.CancellableResolveCalls.has(type.method)) {\n                    throw new vscode_1.CancellationError();\n                }\n                else {\n                    return defaultValue;\n                }\n            }\n        }\n        this.error(`Request ${type.method} failed.`, error, showNotification);\n        throw error;\n    }\n}\nexports.BaseLanguageClient = BaseLanguageClient;\nclass LanguageClient extends BaseLanguageClient {\n    serverOptions;\n    constructor(id, name, serverOptions, clientOptions) {\n        super(id, name, clientOptions);\n        this.serverOptions = serverOptions;\n    }\n    async createMessageTransports(_encoding) {\n        return this.serverOptions();\n    }\n}\nexports.LanguageClient = LanguageClient;\nclass ConsoleLogger {\n    error(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.error(message);\n    }\n    warn(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.warn(message);\n    }\n    info(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.info(message);\n    }\n    log(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.log(message);\n    }\n}\nfunction createConnection(input, output, errorHandler, closeHandler, options) {\n    const logger = new ConsoleLogger();\n    const connection = (0, vscode_languageserver_protocol_1.createProtocolConnection)(input, output, logger, options);\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\n    connection.onClose(closeHandler);\n    const result = {\n        listen: () => connection.listen(),\n        sendRequest: connection.sendRequest,\n        onRequest: connection.onRequest,\n        hasPendingResponse: connection.hasPendingResponse,\n        sendNotification: connection.sendNotification,\n        onNotification: connection.onNotification,\n        onProgress: connection.onProgress,\n        sendProgress: connection.sendProgress,\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\n            const defaultTraceOptions = {\n                sendNotification: false,\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\n            };\n            if (sendNotificationOrTraceOptions === undefined) {\n                return connection.trace(value, tracer, defaultTraceOptions);\n            }\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\n                return connection.trace(value, tracer, sendNotificationOrTraceOptions);\n            }\n            else {\n                return connection.trace(value, tracer, sendNotificationOrTraceOptions);\n            }\n        },\n        initialize: (params) => {\n            // This needs to return and MUST not be await to avoid any async\n            // scheduling. Otherwise messages might overtake each other.\n            return connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params);\n        },\n        shutdown: () => {\n            // This needs to return and MUST not be await to avoid any async\n            // scheduling. Otherwise messages might overtake each other.\n            return connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined);\n        },\n        exit: () => {\n            // This needs to return and MUST not be await to avoid any async\n            // scheduling. Otherwise messages might overtake each other.\n            return connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type);\n        },\n        end: () => connection.end(),\n        dispose: () => connection.dispose()\n    };\n    return result;\n}\n// Exporting proposed protocol.\nvar ProposedFeatures;\n(function (ProposedFeatures) {\n    function createAll(_client) {\n        const result = [\n            new inlineCompletion_1.InlineCompletionItemFeature(_client),\n            new textDocumentContent_1.TextDocumentContentFeature(_client)\n        ];\n        return result;\n    }\n    ProposedFeatures.createAll = createAll;\n})(ProposedFeatures || (exports.ProposedFeatures = ProposedFeatures = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineValueRefreshRequest = exports.InlineValueRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline values in a document. The request's parameter is of\n * type {@link InlineValueParams}, the response is of type\n * {@link InlineValue InlineValue[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlineValueRequest;\n(function (InlineValueRequest) {\n    InlineValueRequest.method = 'textDocument/inlineValue';\n    InlineValueRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineValueRequest.type = new messages_1.ProtocolRequestType(InlineValueRequest.method);\n    InlineValueRequest.capabilities = messages_1.CM.create('textDocument.inlineValue', 'inlineValueProvider');\n})(InlineValueRequest || (exports.InlineValueRequest = InlineValueRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlineValueRefreshRequest;\n(function (InlineValueRefreshRequest) {\n    InlineValueRefreshRequest.method = `workspace/inlineValue/refresh`;\n    InlineValueRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlineValueRefreshRequest.type = new messages_1.ProtocolRequestType0(InlineValueRefreshRequest.method);\n    InlineValueRefreshRequest.capabilities = messages_1.CM.create('workspace.inlineValue.refreshSupport', undefined);\n})(InlineValueRefreshRequest || (exports.InlineValueRefreshRequest = InlineValueRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentHighlightFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass DocumentHighlightFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentHighlightProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentHighlights: (document, position, token) => {\n                const client = this._client;\n                const _provideDocumentHighlights = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDocumentHighlights(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentHighlights\n                    ? middleware.provideDocumentHighlights(document, position, token, _provideDocumentHighlights)\n                    : _provideDocumentHighlights(document, position, token);\n            }\n        };\n        return [vscode_1.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentHighlightFeature = DocumentHighlightFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst api_1 = require(\"../common/api\");\nclass MessageBuffer extends api_1.AbstractMessageBuffer {\n    static emptyBuffer = new Uint8Array(0);\n    asciiDecoder;\n    constructor(encoding = 'utf-8') {\n        super(encoding);\n        this.asciiDecoder = new TextDecoder('ascii');\n    }\n    emptyBuffer() {\n        return MessageBuffer.emptyBuffer;\n    }\n    fromString(value, _encoding) {\n        return (new TextEncoder()).encode(value);\n    }\n    toString(value, encoding) {\n        if (encoding === 'ascii') {\n            return this.asciiDecoder.decode(value);\n        }\n        else {\n            return (new TextDecoder(encoding)).decode(value);\n        }\n    }\n    asNative(buffer, length) {\n        if (length === undefined) {\n            return buffer;\n        }\n        else {\n            return buffer.slice(0, length);\n        }\n    }\n    allocNative(length) {\n        return new Uint8Array(length);\n    }\n}\nclass ReadableStreamWrapper {\n    socket;\n    _onData;\n    _messageListener;\n    constructor(socket) {\n        this.socket = socket;\n        this._onData = new api_1.Emitter();\n        this._messageListener = (event) => {\n            const blob = event.data;\n            blob.arrayBuffer().then((buffer) => {\n                this._onData.fire(new Uint8Array(buffer));\n            }, () => {\n                (0, api_1.RAL)().console.error(`Converting blob to array buffer failed.`);\n            });\n        };\n        this.socket.addEventListener('message', this._messageListener);\n    }\n    onClose(listener) {\n        this.socket.addEventListener('close', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('close', listener));\n    }\n    onError(listener) {\n        this.socket.addEventListener('error', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('error', listener));\n    }\n    onEnd(listener) {\n        this.socket.addEventListener('end', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('end', listener));\n    }\n    onData(listener) {\n        return this._onData.event(listener);\n    }\n}\nclass WritableStreamWrapper {\n    socket;\n    constructor(socket) {\n        this.socket = socket;\n    }\n    onClose(listener) {\n        this.socket.addEventListener('close', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('close', listener));\n    }\n    onError(listener) {\n        this.socket.addEventListener('error', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('error', listener));\n    }\n    onEnd(listener) {\n        this.socket.addEventListener('end', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('end', listener));\n    }\n    write(data, encoding) {\n        if (typeof data === 'string') {\n            if (encoding !== undefined && encoding !== 'utf-8') {\n                throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${encoding}`);\n            }\n            this.socket.send(data);\n        }\n        else {\n            this.socket.send(data);\n        }\n        return Promise.resolve();\n    }\n    end() {\n        this.socket.close();\n    }\n}\nconst _textEncoder = new TextEncoder();\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                if (options.charset !== 'utf-8') {\n                    throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${options.charset}`);\n                }\n                return Promise.resolve(_textEncoder.encode(JSON.stringify(msg, undefined, 0)));\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                if (!(buffer instanceof Uint8Array)) {\n                    throw new Error(`In a Browser environments only Uint8Arrays are supported.`);\n                }\n                return Promise.resolve(JSON.parse(new TextDecoder(options.charset).decode(buffer)));\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (socket) => new ReadableStreamWrapper(socket),\n        asWritableStream: (socket) => new WritableStreamWrapper(socket)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setTimeout(callback, 0, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        },\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        api_1.RAL.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolean = boolean;\nexports.string = string;\nexports.number = number;\nexports.error = error;\nexports.func = func;\nexports.array = array;\nexports.stringArray = stringArray;\nexports.typedArray = typedArray;\nexports.thenable = thenable;\nexports.asPromise = asPromise;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nfunction error(value) {\n    return value instanceof Error;\n}\nfunction func(value) {\n    return typeof value === 'function';\n}\nfunction array(value) {\n    return Array.isArray(value);\n}\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nfunction thenable(value) {\n    return value && func(value.then);\n}\nfunction asPromise(value) {\n    if (value instanceof Promise) {\n        return value;\n    }\n    else if (thenable(value)) {\n        return new Promise((resolve, reject) => {\n            value.then((resolved) => resolve(resolved), (error) => reject(error));\n        });\n    }\n    else {\n        return Promise.resolve(value);\n    }\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Definition} or a Thenable that resolves to such.\n */\nvar TypeDefinitionRequest;\n(function (TypeDefinitionRequest) {\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\n    TypeDefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\n    TypeDefinitionRequest.capabilities = messages_1.CM.create('textDocument.typeDefinition', 'typeDefinitionProvider');\n})(TypeDefinitionRequest || (exports.TypeDefinitionRequest = TypeDefinitionRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass WorkspaceSymbol extends code.SymbolInformation {\n    data;\n    hasRange;\n    constructor(name, kind, containerName, locationOrUri, data) {\n        const hasRange = !(locationOrUri instanceof code.Uri);\n        super(name, kind, containerName, hasRange ? locationOrUri : new code.Location(locationOrUri, new code.Range(0, 0, 0, 0)));\n        this.hasRange = hasRange;\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nexports.default = WorkspaceSymbol;\n","module.exports = require(\"vscode\");","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensFeature = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst Is = __importStar(require(\"./utils/is\"));\nclass SemanticTokensFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SemanticTokensRegistrationType.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'semanticTokens');\n        capability.dynamicRegistration = true;\n        capability.tokenTypes = [\n            vscode_languageserver_protocol_1.SemanticTokenTypes.namespace,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.type,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.class,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.enum,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.interface,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.struct,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.typeParameter,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.parameter,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.variable,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.property,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.enumMember,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.event,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.function,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.method,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.macro,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.keyword,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.comment,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.string,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.number,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.regexp,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.operator,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.decorator,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.label\n        ];\n        capability.tokenModifiers = [\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.declaration,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.definition,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.readonly,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.static,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.deprecated,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.abstract,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.async,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.modification,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.documentation,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.defaultLibrary\n        ];\n        capability.formats = [vscode_languageserver_protocol_1.TokenFormat.Relative];\n        capability.requests = {\n            range: true,\n            full: {\n                delta: true\n            }\n        };\n        capability.multilineTokenSupport = false;\n        capability.overlappingTokenSupport = false;\n        capability.serverCancelSupport = true;\n        capability.augmentsSyntaxTokens = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'semanticTokens').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.SemanticTokensRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeSemanticTokensEmitter.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.semanticTokensProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const fullProvider = Is.boolean(options.full) ? options.full : options.full !== undefined;\n        const hasEditProvider = options.full !== undefined && typeof options.full !== 'boolean' && options.full.delta === true;\n        const eventEmitter = new vscode.EventEmitter();\n        const documentProvider = fullProvider\n            ? {\n                onDidChangeSemanticTokens: eventEmitter.event,\n                provideDocumentSemanticTokens: (document, token) => {\n                    const client = this._client;\n                    const middleware = client.middleware;\n                    const provideDocumentSemanticTokens = (document, token) => {\n                        const params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.SemanticTokensRequest.type, params, token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asSemanticTokens(result, token);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensRequest.type, token, error, null);\n                        });\n                    };\n                    return middleware.provideDocumentSemanticTokens\n                        ? middleware.provideDocumentSemanticTokens(document, token, provideDocumentSemanticTokens)\n                        : provideDocumentSemanticTokens(document, token);\n                },\n                provideDocumentSemanticTokensEdits: hasEditProvider\n                    ? (document, previousResultId, token) => {\n                        const client = this._client;\n                        const middleware = client.middleware;\n                        const provideDocumentSemanticTokensEdits = (document, previousResultId, token) => {\n                            const params = {\n                                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                                previousResultId\n                            };\n                            return client.sendRequest(vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type, params, token).then(async (result) => {\n                                if (token.isCancellationRequested) {\n                                    return null;\n                                }\n                                if (vscode_languageserver_protocol_1.SemanticTokens.is(result)) {\n                                    return await client.protocol2CodeConverter.asSemanticTokens(result, token);\n                                }\n                                else {\n                                    return await client.protocol2CodeConverter.asSemanticTokensEdits(result, token);\n                                }\n                            }, (error) => {\n                                return client.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type, token, error, null);\n                            });\n                        };\n                        return middleware.provideDocumentSemanticTokensEdits\n                            ? middleware.provideDocumentSemanticTokensEdits(document, previousResultId, token, provideDocumentSemanticTokensEdits)\n                            : provideDocumentSemanticTokensEdits(document, previousResultId, token);\n                    }\n                    : undefined\n            }\n            : undefined;\n        const hasRangeProvider = options.range === true;\n        const rangeProvider = hasRangeProvider\n            ? {\n                provideDocumentRangeSemanticTokens: (document, range, token) => {\n                    const client = this._client;\n                    const middleware = client.middleware;\n                    const provideDocumentRangeSemanticTokens = (document, range, token) => {\n                        const params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                            range: client.code2ProtocolConverter.asRange(range)\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type, params, token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asSemanticTokens(result, token);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type, token, error, null);\n                        });\n                    };\n                    return middleware.provideDocumentRangeSemanticTokens\n                        ? middleware.provideDocumentRangeSemanticTokens(document, range, token, provideDocumentRangeSemanticTokens)\n                        : provideDocumentRangeSemanticTokens(document, range, token);\n                }\n            }\n            : undefined;\n        const disposables = [];\n        const client = this._client;\n        const legend = client.protocol2CodeConverter.asSemanticTokensLegend(options.legend);\n        const documentSelector = client.protocol2CodeConverter.asDocumentSelector(selector);\n        if (documentProvider !== undefined) {\n            disposables.push(vscode.languages.registerDocumentSemanticTokensProvider(documentSelector, documentProvider, legend));\n        }\n        if (rangeProvider !== undefined) {\n            disposables.push(vscode.languages.registerDocumentRangeSemanticTokensProvider(documentSelector, rangeProvider, legend));\n        }\n        return [new vscode.Disposable(() => disposables.forEach(item => item.dispose())), { range: rangeProvider, full: documentProvider, onDidChangeSemanticTokensEmitter: eventEmitter }];\n    }\n}\nexports.SemanticTokensFeature = SemanticTokensFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass ProtocolCodeLens extends code.CodeLens {\n    data;\n    constructor(range) {\n        super(range);\n    }\n}\nexports.default = ProtocolCodeLens;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = void 0;\nconst ral_1 = __importDefault(require(\"./ral\"));\nconst Is = __importStar(require(\"./is\"));\nconst events_1 = require(\"./events\");\nconst semaphore_1 = require(\"./semaphore\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader || (exports.MessageReader = MessageReader = {}));\nclass AbstractMessageReader {\n    errorEmitter;\n    closeEmitter;\n    partialMessageEmitter;\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n        this.partialMessageEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options ?? 'utf-8';\n        }\n        else {\n            charset = options.charset ?? 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = (0, ral_1.default)().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    readable;\n    options;\n    callback;\n    nextMessageLength;\n    messageToken;\n    buffer;\n    partialMessageTimer;\n    _partialMessageTimeout;\n    readSemaphore;\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = (0, ral_1.default)().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.readSemaphore = new semaphore_1.Semaphore(1);\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        try {\n            this.buffer.append(data);\n            while (true) {\n                if (this.nextMessageLength === -1) {\n                    const headers = this.buffer.tryReadHeaders(true);\n                    if (!headers) {\n                        return;\n                    }\n                    const contentLength = headers.get('content-length');\n                    if (!contentLength) {\n                        this.fireError(new Error(`Header must provide a Content-Length property.\\n${JSON.stringify(Object.fromEntries(headers))}`));\n                        return;\n                    }\n                    const length = parseInt(contentLength);\n                    if (isNaN(length)) {\n                        this.fireError(new Error(`Content-Length value must be a number. Got ${contentLength}`));\n                        return;\n                    }\n                    this.nextMessageLength = length;\n                }\n                const body = this.buffer.tryReadBody(this.nextMessageLength);\n                if (body === undefined) {\n                    /** We haven't received the full message yet. */\n                    this.setPartialMessageTimer();\n                    return;\n                }\n                this.clearPartialMessageTimer();\n                this.nextMessageLength = -1;\n                // Make sure that we convert one received message after the\n                // other. Otherwise it could happen that a decoding of a second\n                // smaller message finished before the decoding of a first larger\n                // message and then we would deliver the second message first.\n                this.readSemaphore.lock(async () => {\n                    const bytes = this.options.contentDecoder !== undefined\n                        ? await this.options.contentDecoder.decode(body)\n                        : body;\n                    const message = await this.options.contentTypeDecoder.decode(bytes, this.options);\n                    this.callback(message);\n                }).catch((error) => {\n                    this.fireError(error);\n                });\n            }\n        }\n        catch (error) {\n            this.fireError(error);\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            this.partialMessageTimer.dispose();\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = (0, ral_1.default)().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass ProtocolCallHierarchyItem extends code.CallHierarchyItem {\n    data;\n    constructor(kind, name, detail, uri, range, selectionRange, data) {\n        super(kind, name, detail, uri, range, selectionRange);\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nexports.default = ProtocolCallHierarchyItem;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeActionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst features_1 = require(\"./features\");\nclass CodeActionFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const cap = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'codeAction');\n        cap.dynamicRegistration = true;\n        cap.isPreferredSupport = true;\n        cap.disabledSupport = true;\n        cap.dataSupport = true;\n        // We can only resolve the edit property.\n        cap.resolveSupport = {\n            properties: ['edit', 'command']\n        };\n        cap.codeActionLiteralSupport = {\n            codeActionKind: {\n                valueSet: [\n                    vscode_languageserver_protocol_1.CodeActionKind.Empty,\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorMove,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports,\n                    vscode_languageserver_protocol_1.CodeActionKind.Notebook\n                ]\n            }\n        };\n        cap.honorsChangeAnnotations = true;\n        cap.documentationSupport = true;\n        cap.tagSupport = {\n            valueSet: [vscode_languageserver_protocol_1.CodeActionTag.LLMGenerated]\n        };\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeActionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideCodeActions: (document, range, context, token) => {\n                const client = this._client;\n                const _provideCodeActions = async (document, range, context, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(range),\n                        context: client.code2ProtocolConverter.asCodeActionContextSync(context)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\n                        if (token.isCancellationRequested || values === null || values === undefined) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asCodeActionResult(values, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideCodeActions\n                    ? middleware.provideCodeActions(document, range, context, token, _provideCodeActions)\n                    : _provideCodeActions(document, range, context, token);\n            },\n            resolveCodeAction: options.resolveProvider\n                ? (item, token) => {\n                    const client = this._client;\n                    const middleware = this._client.middleware;\n                    const resolveCodeAction = async (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeActionResolveRequest.type, client.code2ProtocolConverter.asCodeActionSync(item), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return item;\n                            }\n                            return client.protocol2CodeConverter.asCodeAction(result, token);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeActionResolveRequest.type, token, error, item);\n                        });\n                    };\n                    return middleware.resolveCodeAction\n                        ? middleware.resolveCodeAction(item, token, resolveCodeAction)\n                        : resolveCodeAction(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, this.getMetadata(options)), provider];\n    }\n    getMetadata(options) {\n        if (options.codeActionKinds === undefined && options.documentation === undefined) {\n            return undefined;\n        }\n        return {\n            providedCodeActionKinds: this._client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds),\n            documentation: this._client.protocol2CodeConverter.asCodeActionDocumentations(options.documentation)\n        };\n    }\n}\nexports.CodeActionFeature = CodeActionFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = createProtocolConnection;\nconst browser_1 = require(\"vscode-jsonrpc/browser\");\n__exportStar(require(\"vscode-jsonrpc/browser\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nfunction createProtocolConnection(reader, writer, logger, options) {\n    return (0, browser_1.createMessageConnection)(reader, writer, logger, options);\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the implementation locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Definition} or a Thenable that resolves to such.\n */\nvar ImplementationRequest;\n(function (ImplementationRequest) {\n    ImplementationRequest.method = 'textDocument/implementation';\n    ImplementationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\n    ImplementationRequest.capabilities = messages_1.CM.create('textDocument.implementation', 'implementationProvider');\n})(ImplementationRequest || (exports.ImplementationRequest = ImplementationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = void 0;\nconst ral_1 = __importDefault(require(\"./ral\"));\nconst Is = __importStar(require(\"./is\"));\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter || (exports.MessageWriter = MessageWriter = {}));\nclass AbstractMessageWriter {\n    errorEmitter;\n    closeEmitter;\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options ?? 'utf-8', contentTypeEncoder: (0, ral_1.default)().applicationJson.encoder };\n        }\n        else {\n            return { charset: options.charset ?? 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: options.contentTypeEncoder ?? (0, ral_1.default)().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    writable;\n    options;\n    errorCount;\n    writeSemaphore;\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        return this.writeSemaphore.lock(async () => {\n            const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n                if (this.options.contentEncoder !== undefined) {\n                    return this.options.contentEncoder.encode(buffer);\n                }\n                else {\n                    return buffer;\n                }\n            });\n            return payload.then((buffer) => {\n                const headers = [];\n                headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n                headers.push(CRLF);\n                return this.doWrite(msg, headers, buffer);\n            }, (error) => {\n                this.fireError(error);\n                throw error;\n            });\n        });\n    }\n    async doWrite(msg, headers, data) {\n        try {\n            await this.writable.write(headers.join(''), 'ascii');\n            return this.writable.write(data);\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n        this.writable.end();\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingFeature = void 0;\nconst code = __importStar(require(\"vscode\"));\nconst proto = __importStar(require(\"vscode-languageserver-protocol\"));\nconst features_1 = require(\"./features\");\nclass LinkedEditingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, proto.LinkedEditingRangeRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const linkedEditingSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'linkedEditingRange');\n        linkedEditingSupport.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.linkedEditingRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideLinkedEditingRanges: (document, position, token) => {\n                const client = this._client;\n                const provideLinkedEditing = (document, position, token) => {\n                    return client.sendRequest(proto.LinkedEditingRangeRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asLinkedEditingRanges(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(proto.LinkedEditingRangeRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideLinkedEditingRange\n                    ? middleware.provideLinkedEditingRange(document, position, token, provideLinkedEditing)\n                    : provideLinkedEditing(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return code.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.LinkedEditingFeature = LinkedEditingFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticPullMode = exports.vsdiag = void 0;\n__exportStar(require(\"vscode-languageserver-protocol\"), exports);\n__exportStar(require(\"./features\"), exports);\nvar diagnostic_1 = require(\"./diagnostic\");\nObject.defineProperty(exports, \"vsdiag\", { enumerable: true, get: function () { return diagnostic_1.vsdiag; } });\nObject.defineProperty(exports, \"DiagnosticPullMode\", { enumerable: true, get: function () { return diagnostic_1.DiagnosticPullMode; } });\n__exportStar(require(\"./client\"), exports);\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineCompletionItemFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass InlineCompletionItemFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.InlineCompletionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const inlineCompletion = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'inlineCompletion');\n        inlineCompletion.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.inlineCompletionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideInlineCompletionItems: (document, position, context, token) => {\n                const client = this._client;\n                const middleware = this._client.middleware;\n                const provideInlineCompletionItems = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.InlineCompletionRequest.type, client.code2ProtocolConverter.asInlineCompletionParams(document, position, context), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asInlineCompletionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlineCompletionRequest.type, token, error, null);\n                    });\n                };\n                return middleware.provideInlineCompletionItems\n                    ? middleware.provideInlineCompletionItems(document, position, context, token, provideInlineCompletionItems)\n                    : provideInlineCompletionItems(document, position, context, token);\n            }\n        };\n        return [vscode_1.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.InlineCompletionItemFeature = InlineCompletionItemFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * Moniker uniqueness level to define scope of the moniker.\n *\n * @since 3.16.0\n */\nvar UniquenessLevel;\n(function (UniquenessLevel) {\n    /**\n     * The moniker is only unique inside a document\n     */\n    UniquenessLevel.document = 'document';\n    /**\n     * The moniker is unique inside a project for which a dump got created\n     */\n    UniquenessLevel.project = 'project';\n    /**\n     * The moniker is unique inside the group to which a project belongs\n     */\n    UniquenessLevel.group = 'group';\n    /**\n     * The moniker is unique inside the moniker scheme.\n     */\n    UniquenessLevel.scheme = 'scheme';\n    /**\n     * The moniker is globally unique\n     */\n    UniquenessLevel.global = 'global';\n})(UniquenessLevel || (exports.UniquenessLevel = UniquenessLevel = {}));\n/**\n * The moniker kind.\n *\n * @since 3.16.0\n */\nvar MonikerKind;\n(function (MonikerKind) {\n    /**\n     * The moniker represent a symbol that is imported into a project\n     */\n    MonikerKind.$import = 'import';\n    /**\n     * The moniker represents a symbol that is exported from a project\n     */\n    MonikerKind.$export = 'export';\n    /**\n     * The moniker represents a symbol that is local to a project (e.g. a local\n     * variable of a function, a class not visible outside the project, ...)\n     */\n    MonikerKind.local = 'local';\n})(MonikerKind || (exports.MonikerKind = MonikerKind = {}));\n/**\n * A request to get the moniker of a symbol at a given text document position.\n * The request parameter is of type {@link TextDocumentPositionParams}.\n * The response is of type {@link Moniker Moniker[]} or `null`.\n */\nvar MonikerRequest;\n(function (MonikerRequest) {\n    MonikerRequest.method = 'textDocument/moniker';\n    MonikerRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    MonikerRequest.type = new messages_1.ProtocolRequestType(MonikerRequest.method);\n    MonikerRequest.capabilities = messages_1.CM.create('textDocument.moniker', 'monikerProvider');\n})(MonikerRequest || (exports.MonikerRequest = MonikerRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExecuteCommandFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst features_1 = require(\"./features\");\nclass ExecuteCommandFeature {\n    _client;\n    _commands;\n    constructor(client) {\n        this._client = client;\n        this._commands = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._commands.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\n    }\n    initialize(capabilities) {\n        if (!capabilities.executeCommandProvider) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\n        });\n    }\n    register(data) {\n        const client = this._client;\n        const middleware = client.middleware;\n        const executeCommand = (command, args) => {\n            const params = {\n                command,\n                arguments: args\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, undefined, error, undefined);\n            });\n        };\n        if (data.registerOptions.commands) {\n            const disposables = [];\n            for (const command of data.registerOptions.commands) {\n                disposables.push(vscode_1.commands.registerCommand(command, (...args) => {\n                    return middleware.executeCommand\n                        ? middleware.executeCommand(command, args, executeCommand)\n                        : executeCommand(command, args);\n                }));\n            }\n            this._commands.set(data.id, disposables);\n        }\n    }\n    unregister(id) {\n        const disposables = this._commands.get(id);\n        if (disposables) {\n            this._commands.delete(id);\n            disposables.forEach(disposable => disposable.dispose());\n        }\n    }\n    clear() {\n        this._commands.forEach((value) => {\n            value.forEach(disposable => disposable.dispose());\n        });\n        this._commands.clear();\n    }\n}\nexports.ExecuteCommandFeature = ExecuteCommandFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass FoldingRangeFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'foldingRange');\n        capability.dynamicRegistration = true;\n        capability.rangeLimit = 5000;\n        capability.lineFoldingOnly = true;\n        capability.foldingRangeKind = { valueSet: [vscode_languageserver_protocol_1.FoldingRangeKind.Comment, vscode_languageserver_protocol_1.FoldingRangeKind.Imports, vscode_languageserver_protocol_1.FoldingRangeKind.Region] };\n        capability.foldingRange = { collapsedText: false };\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'foldingRange').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        this._client.onRequest(vscode_languageserver_protocol_1.FoldingRangeRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeFoldingRange.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.foldingRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeFoldingRanges: eventEmitter.event,\n            provideFoldingRanges: (document, context, token) => {\n                const client = this._client;\n                const provideFoldingRanges = (document, _, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asFoldingRanges(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideFoldingRanges\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\n                    : provideFoldingRanges(document, context, token);\n            }\n        };\n        return [vscode_1.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), { provider: provider, onDidChangeFoldingRange: eventEmitter }];\n    }\n}\nexports.FoldingRangeFeature = FoldingRangeFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode = __importStar(require(\"vscode\"));\nclass ProtocolCodeAction extends vscode.CodeAction {\n    data;\n    constructor(title, data) {\n        super(title);\n        this.data = data;\n    }\n}\nexports.default = ProtocolCodeAction;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Disposable = void 0;\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable || (exports.Disposable = Disposable = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\n */\nvar WorkspaceFoldersRequest;\n(function (WorkspaceFoldersRequest) {\n    WorkspaceFoldersRequest.method = 'workspace/workspaceFolders';\n    WorkspaceFoldersRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0(WorkspaceFoldersRequest.method);\n    WorkspaceFoldersRequest.capabilities = messages_1.CM.create('workspace.workspaceFolders', 'workspace.workspaceFolders');\n})(WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = WorkspaceFoldersRequest = {}));\n/**\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\n * folder configuration changes.\n */\nvar DidChangeWorkspaceFoldersNotification;\n(function (DidChangeWorkspaceFoldersNotification) {\n    DidChangeWorkspaceFoldersNotification.method = 'workspace/didChangeWorkspaceFolders';\n    DidChangeWorkspaceFoldersNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType(DidChangeWorkspaceFoldersNotification.method);\n    DidChangeWorkspaceFoldersNotification.capabilities = messages_1.CM.create(undefined, 'workspace.workspaceFolders.changeNotifications');\n})(DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = DidChangeWorkspaceFoldersNotification = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.range = exports.balanced = void 0;\nconst balanced = (a, b, str) => {\n    const ma = a instanceof RegExp ? maybeMatch(a, str) : a;\n    const mb = b instanceof RegExp ? maybeMatch(b, str) : b;\n    const r = ma !== null && mb != null && (0, exports.range)(ma, mb, str);\n    return (r && {\n        start: r[0],\n        end: r[1],\n        pre: str.slice(0, r[0]),\n        body: str.slice(r[0] + ma.length, r[1]),\n        post: str.slice(r[1] + mb.length),\n    });\n};\nexports.balanced = balanced;\nconst maybeMatch = (reg, str) => {\n    const m = str.match(reg);\n    return m ? m[0] : null;\n};\nconst range = (a, b, str) => {\n    let begs, beg, left, right = undefined, result;\n    let ai = str.indexOf(a);\n    let bi = str.indexOf(b, ai + 1);\n    let i = ai;\n    if (ai >= 0 && bi > 0) {\n        if (a === b) {\n            return [ai, bi];\n        }\n        begs = [];\n        left = str.length;\n        while (i >= 0 && !result) {\n            if (i === ai) {\n                begs.push(i);\n                ai = str.indexOf(a, i + 1);\n            }\n            else if (begs.length === 1) {\n                const r = begs.pop();\n                if (r !== undefined)\n                    result = [r, bi];\n            }\n            else {\n                beg = begs.pop();\n                if (beg !== undefined && beg < left) {\n                    left = beg;\n                    right = bi;\n                }\n                bi = str.indexOf(b, i + 1);\n            }\n            i = ai < bi && ai >= 0 ? ai : bi;\n        }\n        if (begs.length && right !== undefined) {\n            result = [left, right];\n        }\n    }\n    return result;\n};\nexports.range = range;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unescape = exports.escape = exports.AST = exports.Minimatch = exports.match = exports.makeRe = exports.braceExpand = exports.defaults = exports.filter = exports.GLOBSTAR = exports.sep = exports.minimatch = void 0;\nconst brace_expansion_1 = require(\"@isaacs/brace-expansion\");\nconst assert_valid_pattern_js_1 = require(\"./assert-valid-pattern.js\");\nconst ast_js_1 = require(\"./ast.js\");\nconst escape_js_1 = require(\"./escape.js\");\nconst unescape_js_1 = require(\"./unescape.js\");\nconst minimatch = (p, pattern, options = {}) => {\n    (0, assert_valid_pattern_js_1.assertValidPattern)(pattern);\n    // shortcut: comments match nothing.\n    if (!options.nocomment && pattern.charAt(0) === '#') {\n        return false;\n    }\n    return new Minimatch(pattern, options).match(p);\n};\nexports.minimatch = minimatch;\n// Optimized checking for the most common glob patterns.\nconst starDotExtRE = /^\\*+([^+@!?\\*\\[\\(]*)$/;\nconst starDotExtTest = (ext) => (f) => !f.startsWith('.') && f.endsWith(ext);\nconst starDotExtTestDot = (ext) => (f) => f.endsWith(ext);\nconst starDotExtTestNocase = (ext) => {\n    ext = ext.toLowerCase();\n    return (f) => !f.startsWith('.') && f.toLowerCase().endsWith(ext);\n};\nconst starDotExtTestNocaseDot = (ext) => {\n    ext = ext.toLowerCase();\n    return (f) => f.toLowerCase().endsWith(ext);\n};\nconst starDotStarRE = /^\\*+\\.\\*+$/;\nconst starDotStarTest = (f) => !f.startsWith('.') && f.includes('.');\nconst starDotStarTestDot = (f) => f !== '.' && f !== '..' && f.includes('.');\nconst dotStarRE = /^\\.\\*+$/;\nconst dotStarTest = (f) => f !== '.' && f !== '..' && f.startsWith('.');\nconst starRE = /^\\*+$/;\nconst starTest = (f) => f.length !== 0 && !f.startsWith('.');\nconst starTestDot = (f) => f.length !== 0 && f !== '.' && f !== '..';\nconst qmarksRE = /^\\?+([^+@!?\\*\\[\\(]*)?$/;\nconst qmarksTestNocase = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExt([$0]);\n    if (!ext)\n        return noext;\n    ext = ext.toLowerCase();\n    return (f) => noext(f) && f.toLowerCase().endsWith(ext);\n};\nconst qmarksTestNocaseDot = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExtDot([$0]);\n    if (!ext)\n        return noext;\n    ext = ext.toLowerCase();\n    return (f) => noext(f) && f.toLowerCase().endsWith(ext);\n};\nconst qmarksTestDot = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExtDot([$0]);\n    return !ext ? noext : (f) => noext(f) && f.endsWith(ext);\n};\nconst qmarksTest = ([$0, ext = '']) => {\n    const noext = qmarksTestNoExt([$0]);\n    return !ext ? noext : (f) => noext(f) && f.endsWith(ext);\n};\nconst qmarksTestNoExt = ([$0]) => {\n    const len = $0.length;\n    return (f) => f.length === len && !f.startsWith('.');\n};\nconst qmarksTestNoExtDot = ([$0]) => {\n    const len = $0.length;\n    return (f) => f.length === len && f !== '.' && f !== '..';\n};\n/* c8 ignore start */\nconst defaultPlatform = (typeof process === 'object' && process\n    ? (typeof process.env === 'object' &&\n        process.env &&\n        process.env.__MINIMATCH_TESTING_PLATFORM__) ||\n        process.platform\n    : 'posix');\nconst path = {\n    win32: { sep: '\\\\' },\n    posix: { sep: '/' },\n};\n/* c8 ignore stop */\nexports.sep = defaultPlatform === 'win32' ? path.win32.sep : path.posix.sep;\nexports.minimatch.sep = exports.sep;\nexports.GLOBSTAR = Symbol('globstar **');\nexports.minimatch.GLOBSTAR = exports.GLOBSTAR;\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nconst qmark = '[^/]';\n// * => any number of characters\nconst star = qmark + '*?';\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nconst twoStarDot = '(?:(?!(?:\\\\/|^)(?:\\\\.{1,2})($|\\\\/)).)*?';\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nconst twoStarNoDot = '(?:(?!(?:\\\\/|^)\\\\.).)*?';\nconst filter = (pattern, options = {}) => (p) => (0, exports.minimatch)(p, pattern, options);\nexports.filter = filter;\nexports.minimatch.filter = exports.filter;\nconst ext = (a, b = {}) => Object.assign({}, a, b);\nconst defaults = (def) => {\n    if (!def || typeof def !== 'object' || !Object.keys(def).length) {\n        return exports.minimatch;\n    }\n    const orig = exports.minimatch;\n    const m = (p, pattern, options = {}) => orig(p, pattern, ext(def, options));\n    return Object.assign(m, {\n        Minimatch: class Minimatch extends orig.Minimatch {\n            constructor(pattern, options = {}) {\n                super(pattern, ext(def, options));\n            }\n            static defaults(options) {\n                return orig.defaults(ext(def, options)).Minimatch;\n            }\n        },\n        AST: class AST extends orig.AST {\n            /* c8 ignore start */\n            constructor(type, parent, options = {}) {\n                super(type, parent, ext(def, options));\n            }\n            /* c8 ignore stop */\n            static fromGlob(pattern, options = {}) {\n                return orig.AST.fromGlob(pattern, ext(def, options));\n            }\n        },\n        unescape: (s, options = {}) => orig.unescape(s, ext(def, options)),\n        escape: (s, options = {}) => orig.escape(s, ext(def, options)),\n        filter: (pattern, options = {}) => orig.filter(pattern, ext(def, options)),\n        defaults: (options) => orig.defaults(ext(def, options)),\n        makeRe: (pattern, options = {}) => orig.makeRe(pattern, ext(def, options)),\n        braceExpand: (pattern, options = {}) => orig.braceExpand(pattern, ext(def, options)),\n        match: (list, pattern, options = {}) => orig.match(list, pattern, ext(def, options)),\n        sep: orig.sep,\n        GLOBSTAR: exports.GLOBSTAR,\n    });\n};\nexports.defaults = defaults;\nexports.minimatch.defaults = exports.defaults;\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nconst braceExpand = (pattern, options = {}) => {\n    (0, assert_valid_pattern_js_1.assertValidPattern)(pattern);\n    // Thanks to Yeting Li <https://github.com/yetingli> for\n    // improving this regexp to avoid a ReDOS vulnerability.\n    if (options.nobrace || !/\\{(?:(?!\\{).)*\\}/.test(pattern)) {\n        // shortcut. no need to expand.\n        return [pattern];\n    }\n    return (0, brace_expansion_1.expand)(pattern);\n};\nexports.braceExpand = braceExpand;\nexports.minimatch.braceExpand = exports.braceExpand;\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nconst makeRe = (pattern, options = {}) => new Minimatch(pattern, options).makeRe();\nexports.makeRe = makeRe;\nexports.minimatch.makeRe = exports.makeRe;\nconst match = (list, pattern, options = {}) => {\n    const mm = new Minimatch(pattern, options);\n    list = list.filter(f => mm.match(f));\n    if (mm.options.nonull && !list.length) {\n        list.push(pattern);\n    }\n    return list;\n};\nexports.match = match;\nexports.minimatch.match = exports.match;\n// replace stuff like \\* with *\nconst globMagic = /[?*]|[+@!]\\(.*?\\)|\\[|\\]/;\nconst regExpEscape = (s) => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\nclass Minimatch {\n    options;\n    set;\n    pattern;\n    windowsPathsNoEscape;\n    nonegate;\n    negate;\n    comment;\n    empty;\n    preserveMultipleSlashes;\n    partial;\n    globSet;\n    globParts;\n    nocase;\n    isWindows;\n    platform;\n    windowsNoMagicRoot;\n    regexp;\n    constructor(pattern, options = {}) {\n        (0, assert_valid_pattern_js_1.assertValidPattern)(pattern);\n        options = options || {};\n        this.options = options;\n        this.pattern = pattern;\n        this.platform = options.platform || defaultPlatform;\n        this.isWindows = this.platform === 'win32';\n        this.windowsPathsNoEscape =\n            !!options.windowsPathsNoEscape || options.allowWindowsEscape === false;\n        if (this.windowsPathsNoEscape) {\n            this.pattern = this.pattern.replace(/\\\\/g, '/');\n        }\n        this.preserveMultipleSlashes = !!options.preserveMultipleSlashes;\n        this.regexp = null;\n        this.negate = false;\n        this.nonegate = !!options.nonegate;\n        this.comment = false;\n        this.empty = false;\n        this.partial = !!options.partial;\n        this.nocase = !!this.options.nocase;\n        this.windowsNoMagicRoot =\n            options.windowsNoMagicRoot !== undefined\n                ? options.windowsNoMagicRoot\n                : !!(this.isWindows && this.nocase);\n        this.globSet = [];\n        this.globParts = [];\n        this.set = [];\n        // make the set of regexps etc.\n        this.make();\n    }\n    hasMagic() {\n        if (this.options.magicalBraces && this.set.length > 1) {\n            return true;\n        }\n        for (const pattern of this.set) {\n            for (const part of pattern) {\n                if (typeof part !== 'string')\n                    return true;\n            }\n        }\n        return false;\n    }\n    debug(..._) { }\n    make() {\n        const pattern = this.pattern;\n        const options = this.options;\n        // empty patterns and comments match nothing.\n        if (!options.nocomment && pattern.charAt(0) === '#') {\n            this.comment = true;\n            return;\n        }\n        if (!pattern) {\n            this.empty = true;\n            return;\n        }\n        // step 1: figure out negation, etc.\n        this.parseNegate();\n        // step 2: expand braces\n        this.globSet = [...new Set(this.braceExpand())];\n        if (options.debug) {\n            this.debug = (...args) => console.error(...args);\n        }\n        this.debug(this.pattern, this.globSet);\n        // step 3: now we have a set, so turn each one into a series of\n        // path-portion matching patterns.\n        // These will be regexps, except in the case of \"**\", which is\n        // set to the GLOBSTAR object for globstar behavior,\n        // and will not contain any / characters\n        //\n        // First, we preprocess to make the glob pattern sets a bit simpler\n        // and deduped.  There are some perf-killing patterns that can cause\n        // problems with a glob walk, but we can simplify them down a bit.\n        const rawGlobParts = this.globSet.map(s => this.slashSplit(s));\n        this.globParts = this.preprocess(rawGlobParts);\n        this.debug(this.pattern, this.globParts);\n        // glob --> regexps\n        let set = this.globParts.map((s, _, __) => {\n            if (this.isWindows && this.windowsNoMagicRoot) {\n                // check if it's a drive or unc path.\n                const isUNC = s[0] === '' &&\n                    s[1] === '' &&\n                    (s[2] === '?' || !globMagic.test(s[2])) &&\n                    !globMagic.test(s[3]);\n                const isDrive = /^[a-z]:/i.test(s[0]);\n                if (isUNC) {\n                    return [...s.slice(0, 4), ...s.slice(4).map(ss => this.parse(ss))];\n                }\n                else if (isDrive) {\n                    return [s[0], ...s.slice(1).map(ss => this.parse(ss))];\n                }\n            }\n            return s.map(ss => this.parse(ss));\n        });\n        this.debug(this.pattern, set);\n        // filter out everything that didn't compile properly.\n        this.set = set.filter(s => s.indexOf(false) === -1);\n        // do not treat the ? in UNC paths as magic\n        if (this.isWindows) {\n            for (let i = 0; i < this.set.length; i++) {\n                const p = this.set[i];\n                if (p[0] === '' &&\n                    p[1] === '' &&\n                    this.globParts[i][2] === '?' &&\n                    typeof p[3] === 'string' &&\n                    /^[a-z]:$/i.test(p[3])) {\n                    p[2] = '?';\n                }\n            }\n        }\n        this.debug(this.pattern, this.set);\n    }\n    // various transforms to equivalent pattern sets that are\n    // faster to process in a filesystem walk.  The goal is to\n    // eliminate what we can, and push all ** patterns as far\n    // to the right as possible, even if it increases the number\n    // of patterns that we have to process.\n    preprocess(globParts) {\n        // if we're not in globstar mode, then turn all ** into *\n        if (this.options.noglobstar) {\n            for (let i = 0; i < globParts.length; i++) {\n                for (let j = 0; j < globParts[i].length; j++) {\n                    if (globParts[i][j] === '**') {\n                        globParts[i][j] = '*';\n                    }\n                }\n            }\n        }\n        const { optimizationLevel = 1 } = this.options;\n        if (optimizationLevel >= 2) {\n            // aggressive optimization for the purpose of fs walking\n            globParts = this.firstPhasePreProcess(globParts);\n            globParts = this.secondPhasePreProcess(globParts);\n        }\n        else if (optimizationLevel >= 1) {\n            // just basic optimizations to remove some .. parts\n            globParts = this.levelOneOptimize(globParts);\n        }\n        else {\n            // just collapse multiple ** portions into one\n            globParts = this.adjascentGlobstarOptimize(globParts);\n        }\n        return globParts;\n    }\n    // just get rid of adjascent ** portions\n    adjascentGlobstarOptimize(globParts) {\n        return globParts.map(parts => {\n            let gs = -1;\n            while (-1 !== (gs = parts.indexOf('**', gs + 1))) {\n                let i = gs;\n                while (parts[i + 1] === '**') {\n                    i++;\n                }\n                if (i !== gs) {\n                    parts.splice(gs, i - gs);\n                }\n            }\n            return parts;\n        });\n    }\n    // get rid of adjascent ** and resolve .. portions\n    levelOneOptimize(globParts) {\n        return globParts.map(parts => {\n            parts = parts.reduce((set, part) => {\n                const prev = set[set.length - 1];\n                if (part === '**' && prev === '**') {\n                    return set;\n                }\n                if (part === '..') {\n                    if (prev && prev !== '..' && prev !== '.' && prev !== '**') {\n                        set.pop();\n                        return set;\n                    }\n                }\n                set.push(part);\n                return set;\n            }, []);\n            return parts.length === 0 ? [''] : parts;\n        });\n    }\n    levelTwoFileOptimize(parts) {\n        if (!Array.isArray(parts)) {\n            parts = this.slashSplit(parts);\n        }\n        let didSomething = false;\n        do {\n            didSomething = false;\n            // <pre>/<e>/<rest> -> <pre>/<rest>\n            if (!this.preserveMultipleSlashes) {\n                for (let i = 1; i < parts.length - 1; i++) {\n                    const p = parts[i];\n                    // don't squeeze out UNC patterns\n                    if (i === 1 && p === '' && parts[0] === '')\n                        continue;\n                    if (p === '.' || p === '') {\n                        didSomething = true;\n                        parts.splice(i, 1);\n                        i--;\n                    }\n                }\n                if (parts[0] === '.' &&\n                    parts.length === 2 &&\n                    (parts[1] === '.' || parts[1] === '')) {\n                    didSomething = true;\n                    parts.pop();\n                }\n            }\n            // <pre>/<p>/../<rest> -> <pre>/<rest>\n            let dd = 0;\n            while (-1 !== (dd = parts.indexOf('..', dd + 1))) {\n                const p = parts[dd - 1];\n                if (p && p !== '.' && p !== '..' && p !== '**') {\n                    didSomething = true;\n                    parts.splice(dd - 1, 2);\n                    dd -= 2;\n                }\n            }\n        } while (didSomething);\n        return parts.length === 0 ? [''] : parts;\n    }\n    // First phase: single-pattern processing\n    // <pre> is 1 or more portions\n    // <rest> is 1 or more portions\n    // <p> is any portion other than ., .., '', or **\n    // <e> is . or ''\n    //\n    // **/.. is *brutal* for filesystem walking performance, because\n    // it effectively resets the recursive walk each time it occurs,\n    // and ** cannot be reduced out by a .. pattern part like a regexp\n    // or most strings (other than .., ., and '') can be.\n    //\n    // <pre>/**/../<p>/<p>/<rest> -> {<pre>/../<p>/<p>/<rest>,<pre>/**/<p>/<p>/<rest>}\n    // <pre>/<e>/<rest> -> <pre>/<rest>\n    // <pre>/<p>/../<rest> -> <pre>/<rest>\n    // **/**/<rest> -> **/<rest>\n    //\n    // **/*/<rest> -> */**/<rest> <== not valid because ** doesn't follow\n    // this WOULD be allowed if ** did follow symlinks, or * didn't\n    firstPhasePreProcess(globParts) {\n        let didSomething = false;\n        do {\n            didSomething = false;\n            // <pre>/**/../<p>/<p>/<rest> -> {<pre>/../<p>/<p>/<rest>,<pre>/**/<p>/<p>/<rest>}\n            for (let parts of globParts) {\n                let gs = -1;\n                while (-1 !== (gs = parts.indexOf('**', gs + 1))) {\n                    let gss = gs;\n                    while (parts[gss + 1] === '**') {\n                        // <pre>/**/**/<rest> -> <pre>/**/<rest>\n                        gss++;\n                    }\n                    // eg, if gs is 2 and gss is 4, that means we have 3 **\n                    // parts, and can remove 2 of them.\n                    if (gss > gs) {\n                        parts.splice(gs + 1, gss - gs);\n                    }\n                    let next = parts[gs + 1];\n                    const p = parts[gs + 2];\n                    const p2 = parts[gs + 3];\n                    if (next !== '..')\n                        continue;\n                    if (!p ||\n                        p === '.' ||\n                        p === '..' ||\n                        !p2 ||\n                        p2 === '.' ||\n                        p2 === '..') {\n                        continue;\n                    }\n                    didSomething = true;\n                    // edit parts in place, and push the new one\n                    parts.splice(gs, 1);\n                    const other = parts.slice(0);\n                    other[gs] = '**';\n                    globParts.push(other);\n                    gs--;\n                }\n                // <pre>/<e>/<rest> -> <pre>/<rest>\n                if (!this.preserveMultipleSlashes) {\n                    for (let i = 1; i < parts.length - 1; i++) {\n                        const p = parts[i];\n                        // don't squeeze out UNC patterns\n                        if (i === 1 && p === '' && parts[0] === '')\n                            continue;\n                        if (p === '.' || p === '') {\n                            didSomething = true;\n                            parts.splice(i, 1);\n                            i--;\n                        }\n                    }\n                    if (parts[0] === '.' &&\n                        parts.length === 2 &&\n                        (parts[1] === '.' || parts[1] === '')) {\n                        didSomething = true;\n                        parts.pop();\n                    }\n                }\n                // <pre>/<p>/../<rest> -> <pre>/<rest>\n                let dd = 0;\n                while (-1 !== (dd = parts.indexOf('..', dd + 1))) {\n                    const p = parts[dd - 1];\n                    if (p && p !== '.' && p !== '..' && p !== '**') {\n                        didSomething = true;\n                        const needDot = dd === 1 && parts[dd + 1] === '**';\n                        const splin = needDot ? ['.'] : [];\n                        parts.splice(dd - 1, 2, ...splin);\n                        if (parts.length === 0)\n                            parts.push('');\n                        dd -= 2;\n                    }\n                }\n            }\n        } while (didSomething);\n        return globParts;\n    }\n    // second phase: multi-pattern dedupes\n    // {<pre>/*/<rest>,<pre>/<p>/<rest>} -> <pre>/*/<rest>\n    // {<pre>/<rest>,<pre>/<rest>} -> <pre>/<rest>\n    // {<pre>/**/<rest>,<pre>/<rest>} -> <pre>/**/<rest>\n    //\n    // {<pre>/**/<rest>,<pre>/**/<p>/<rest>} -> <pre>/**/<rest>\n    // ^-- not valid because ** doens't follow symlinks\n    secondPhasePreProcess(globParts) {\n        for (let i = 0; i < globParts.length - 1; i++) {\n            for (let j = i + 1; j < globParts.length; j++) {\n                const matched = this.partsMatch(globParts[i], globParts[j], !this.preserveMultipleSlashes);\n                if (matched) {\n                    globParts[i] = [];\n                    globParts[j] = matched;\n                    break;\n                }\n            }\n        }\n        return globParts.filter(gs => gs.length);\n    }\n    partsMatch(a, b, emptyGSMatch = false) {\n        let ai = 0;\n        let bi = 0;\n        let result = [];\n        let which = '';\n        while (ai < a.length && bi < b.length) {\n            if (a[ai] === b[bi]) {\n                result.push(which === 'b' ? b[bi] : a[ai]);\n                ai++;\n                bi++;\n            }\n            else if (emptyGSMatch && a[ai] === '**' && b[bi] === a[ai + 1]) {\n                result.push(a[ai]);\n                ai++;\n            }\n            else if (emptyGSMatch && b[bi] === '**' && a[ai] === b[bi + 1]) {\n                result.push(b[bi]);\n                bi++;\n            }\n            else if (a[ai] === '*' &&\n                b[bi] &&\n                (this.options.dot || !b[bi].startsWith('.')) &&\n                b[bi] !== '**') {\n                if (which === 'b')\n                    return false;\n                which = 'a';\n                result.push(a[ai]);\n                ai++;\n                bi++;\n            }\n            else if (b[bi] === '*' &&\n                a[ai] &&\n                (this.options.dot || !a[ai].startsWith('.')) &&\n                a[ai] !== '**') {\n                if (which === 'a')\n                    return false;\n                which = 'b';\n                result.push(b[bi]);\n                ai++;\n                bi++;\n            }\n            else {\n                return false;\n            }\n        }\n        // if we fall out of the loop, it means they two are identical\n        // as long as their lengths match\n        return a.length === b.length && result;\n    }\n    parseNegate() {\n        if (this.nonegate)\n            return;\n        const pattern = this.pattern;\n        let negate = false;\n        let negateOffset = 0;\n        for (let i = 0; i < pattern.length && pattern.charAt(i) === '!'; i++) {\n            negate = !negate;\n            negateOffset++;\n        }\n        if (negateOffset)\n            this.pattern = pattern.slice(negateOffset);\n        this.negate = negate;\n    }\n    // set partial to true to test if, for example,\n    // \"/a/b\" matches the start of \"/*/b/*/d\"\n    // Partial means, if you run out of file before you run\n    // out of pattern, then that's fine, as long as all\n    // the parts match.\n    matchOne(file, pattern, partial = false) {\n        const options = this.options;\n        // UNC paths like //?/X:/... can match X:/... and vice versa\n        // Drive letters in absolute drive or unc paths are always compared\n        // case-insensitively.\n        if (this.isWindows) {\n            const fileDrive = typeof file[0] === 'string' && /^[a-z]:$/i.test(file[0]);\n            const fileUNC = !fileDrive &&\n                file[0] === '' &&\n                file[1] === '' &&\n                file[2] === '?' &&\n                /^[a-z]:$/i.test(file[3]);\n            const patternDrive = typeof pattern[0] === 'string' && /^[a-z]:$/i.test(pattern[0]);\n            const patternUNC = !patternDrive &&\n                pattern[0] === '' &&\n                pattern[1] === '' &&\n                pattern[2] === '?' &&\n                typeof pattern[3] === 'string' &&\n                /^[a-z]:$/i.test(pattern[3]);\n            const fdi = fileUNC ? 3 : fileDrive ? 0 : undefined;\n            const pdi = patternUNC ? 3 : patternDrive ? 0 : undefined;\n            if (typeof fdi === 'number' && typeof pdi === 'number') {\n                const [fd, pd] = [file[fdi], pattern[pdi]];\n                if (fd.toLowerCase() === pd.toLowerCase()) {\n                    pattern[pdi] = fd;\n                    if (pdi > fdi) {\n                        pattern = pattern.slice(pdi);\n                    }\n                    else if (fdi > pdi) {\n                        file = file.slice(fdi);\n                    }\n                }\n            }\n        }\n        // resolve and reduce . and .. portions in the file as well.\n        // dont' need to do the second phase, because it's only one string[]\n        const { optimizationLevel = 1 } = this.options;\n        if (optimizationLevel >= 2) {\n            file = this.levelTwoFileOptimize(file);\n        }\n        this.debug('matchOne', this, { file, pattern });\n        this.debug('matchOne', file.length, pattern.length);\n        for (var fi = 0, pi = 0, fl = file.length, pl = pattern.length; fi < fl && pi < pl; fi++, pi++) {\n            this.debug('matchOne loop');\n            var p = pattern[pi];\n            var f = file[fi];\n            this.debug(pattern, p, f);\n            // should be impossible.\n            // some invalid regexp stuff in the set.\n            /* c8 ignore start */\n            if (p === false) {\n                return false;\n            }\n            /* c8 ignore stop */\n            if (p === exports.GLOBSTAR) {\n                this.debug('GLOBSTAR', [pattern, p, f]);\n                // \"**\"\n                // a/**/b/**/c would match the following:\n                // a/b/x/y/z/c\n                // a/x/y/z/b/c\n                // a/b/x/b/x/c\n                // a/b/c\n                // To do this, take the rest of the pattern after\n                // the **, and see if it would match the file remainder.\n                // If so, return success.\n                // If not, the ** \"swallows\" a segment, and try again.\n                // This is recursively awful.\n                //\n                // a/**/b/**/c matching a/b/x/y/z/c\n                // - a matches a\n                // - doublestar\n                //   - matchOne(b/x/y/z/c, b/**/c)\n                //     - b matches b\n                //     - doublestar\n                //       - matchOne(x/y/z/c, c) -> no\n                //       - matchOne(y/z/c, c) -> no\n                //       - matchOne(z/c, c) -> no\n                //       - matchOne(c, c) yes, hit\n                var fr = fi;\n                var pr = pi + 1;\n                if (pr === pl) {\n                    this.debug('** at the end');\n                    // a ** at the end will just swallow the rest.\n                    // We have found a match.\n                    // however, it will not swallow /.x, unless\n                    // options.dot is set.\n                    // . and .. are *never* matched by **, for explosively\n                    // exponential reasons.\n                    for (; fi < fl; fi++) {\n                        if (file[fi] === '.' ||\n                            file[fi] === '..' ||\n                            (!options.dot && file[fi].charAt(0) === '.'))\n                            return false;\n                    }\n                    return true;\n                }\n                // ok, let's see if we can swallow whatever we can.\n                while (fr < fl) {\n                    var swallowee = file[fr];\n                    this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee);\n                    // XXX remove this slice.  Just pass the start index.\n                    if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n                        this.debug('globstar found match!', fr, fl, swallowee);\n                        // found a match.\n                        return true;\n                    }\n                    else {\n                        // can't swallow \".\" or \"..\" ever.\n                        // can only swallow \".foo\" when explicitly asked.\n                        if (swallowee === '.' ||\n                            swallowee === '..' ||\n                            (!options.dot && swallowee.charAt(0) === '.')) {\n                            this.debug('dot detected!', file, fr, pattern, pr);\n                            break;\n                        }\n                        // ** swallows a segment, and continue.\n                        this.debug('globstar swallow a segment, and continue');\n                        fr++;\n                    }\n                }\n                // no match was found.\n                // However, in partial mode, we can't say this is necessarily over.\n                /* c8 ignore start */\n                if (partial) {\n                    // ran out of file\n                    this.debug('\\n>>> no match, partial?', file, fr, pattern, pr);\n                    if (fr === fl) {\n                        return true;\n                    }\n                }\n                /* c8 ignore stop */\n                return false;\n            }\n            // something other than **\n            // non-magic patterns just have to match exactly\n            // patterns with magic have been turned into regexps.\n            let hit;\n            if (typeof p === 'string') {\n                hit = f === p;\n                this.debug('string match', p, f, hit);\n            }\n            else {\n                hit = p.test(f);\n                this.debug('pattern match', p, f, hit);\n            }\n            if (!hit)\n                return false;\n        }\n        // Note: ending in / means that we'll get a final \"\"\n        // at the end of the pattern.  This can only match a\n        // corresponding \"\" at the end of the file.\n        // If the file ends in /, then it can only match a\n        // a pattern that ends in /, unless the pattern just\n        // doesn't have any more for it. But, a/b/ should *not*\n        // match \"a/b/*\", even though \"\" matches against the\n        // [^/]*? pattern, except in partial mode, where it might\n        // simply not be reached yet.\n        // However, a/b/ should still satisfy a/*\n        // now either we fell off the end of the pattern, or we're done.\n        if (fi === fl && pi === pl) {\n            // ran out of pattern and filename at the same time.\n            // an exact hit!\n            return true;\n        }\n        else if (fi === fl) {\n            // ran out of file, but still had pattern left.\n            // this is ok if we're doing the match as part of\n            // a glob fs traversal.\n            return partial;\n        }\n        else if (pi === pl) {\n            // ran out of pattern, still have file left.\n            // this is only acceptable if we're on the very last\n            // empty segment of a file with a trailing slash.\n            // a/* should match a/b/\n            return fi === fl - 1 && file[fi] === '';\n            /* c8 ignore start */\n        }\n        else {\n            // should be unreachable.\n            throw new Error('wtf?');\n        }\n        /* c8 ignore stop */\n    }\n    braceExpand() {\n        return (0, exports.braceExpand)(this.pattern, this.options);\n    }\n    parse(pattern) {\n        (0, assert_valid_pattern_js_1.assertValidPattern)(pattern);\n        const options = this.options;\n        // shortcuts\n        if (pattern === '**')\n            return exports.GLOBSTAR;\n        if (pattern === '')\n            return '';\n        // far and away, the most common glob pattern parts are\n        // *, *.*, and *.<ext>  Add a fast check method for those.\n        let m;\n        let fastTest = null;\n        if ((m = pattern.match(starRE))) {\n            fastTest = options.dot ? starTestDot : starTest;\n        }\n        else if ((m = pattern.match(starDotExtRE))) {\n            fastTest = (options.nocase\n                ? options.dot\n                    ? starDotExtTestNocaseDot\n                    : starDotExtTestNocase\n                : options.dot\n                    ? starDotExtTestDot\n                    : starDotExtTest)(m[1]);\n        }\n        else if ((m = pattern.match(qmarksRE))) {\n            fastTest = (options.nocase\n                ? options.dot\n                    ? qmarksTestNocaseDot\n                    : qmarksTestNocase\n                : options.dot\n                    ? qmarksTestDot\n                    : qmarksTest)(m);\n        }\n        else if ((m = pattern.match(starDotStarRE))) {\n            fastTest = options.dot ? starDotStarTestDot : starDotStarTest;\n        }\n        else if ((m = pattern.match(dotStarRE))) {\n            fastTest = dotStarTest;\n        }\n        const re = ast_js_1.AST.fromGlob(pattern, this.options).toMMPattern();\n        if (fastTest && typeof re === 'object') {\n            // Avoids overriding in frozen environments\n            Reflect.defineProperty(re, 'test', { value: fastTest });\n        }\n        return re;\n    }\n    makeRe() {\n        if (this.regexp || this.regexp === false)\n            return this.regexp;\n        // at this point, this.set is a 2d array of partial\n        // pattern strings, or \"**\".\n        //\n        // It's better to use .match().  This function shouldn't\n        // be used, really, but it's pretty convenient sometimes,\n        // when you just want to work with a regex.\n        const set = this.set;\n        if (!set.length) {\n            this.regexp = false;\n            return this.regexp;\n        }\n        const options = this.options;\n        const twoStar = options.noglobstar\n            ? star\n            : options.dot\n                ? twoStarDot\n                : twoStarNoDot;\n        const flags = new Set(options.nocase ? ['i'] : []);\n        // regexpify non-globstar patterns\n        // if ** is only item, then we just do one twoStar\n        // if ** is first, and there are more, prepend (\\/|twoStar\\/)? to next\n        // if ** is last, append (\\/twoStar|) to previous\n        // if ** is in the middle, append (\\/|\\/twoStar\\/) to previous\n        // then filter out GLOBSTAR symbols\n        let re = set\n            .map(pattern => {\n            const pp = pattern.map(p => {\n                if (p instanceof RegExp) {\n                    for (const f of p.flags.split(''))\n                        flags.add(f);\n                }\n                return typeof p === 'string'\n                    ? regExpEscape(p)\n                    : p === exports.GLOBSTAR\n                        ? exports.GLOBSTAR\n                        : p._src;\n            });\n            pp.forEach((p, i) => {\n                const next = pp[i + 1];\n                const prev = pp[i - 1];\n                if (p !== exports.GLOBSTAR || prev === exports.GLOBSTAR) {\n                    return;\n                }\n                if (prev === undefined) {\n                    if (next !== undefined && next !== exports.GLOBSTAR) {\n                        pp[i + 1] = '(?:\\\\/|' + twoStar + '\\\\/)?' + next;\n                    }\n                    else {\n                        pp[i] = twoStar;\n                    }\n                }\n                else if (next === undefined) {\n                    pp[i - 1] = prev + '(?:\\\\/|' + twoStar + ')?';\n                }\n                else if (next !== exports.GLOBSTAR) {\n                    pp[i - 1] = prev + '(?:\\\\/|\\\\/' + twoStar + '\\\\/)' + next;\n                    pp[i + 1] = exports.GLOBSTAR;\n                }\n            });\n            return pp.filter(p => p !== exports.GLOBSTAR).join('/');\n        })\n            .join('|');\n        // need to wrap in parens if we had more than one thing with |,\n        // otherwise only the first will be anchored to ^ and the last to $\n        const [open, close] = set.length > 1 ? ['(?:', ')'] : ['', ''];\n        // must match entire pattern\n        // ending in a * or ** will make it less strict.\n        re = '^' + open + re + close + '$';\n        // can match anything, as long as it's not this.\n        if (this.negate)\n            re = '^(?!' + re + ').+$';\n        try {\n            this.regexp = new RegExp(re, [...flags].join(''));\n            /* c8 ignore start */\n        }\n        catch (ex) {\n            // should be impossible\n            this.regexp = false;\n        }\n        /* c8 ignore stop */\n        return this.regexp;\n    }\n    slashSplit(p) {\n        // if p starts with // on windows, we preserve that\n        // so that UNC paths aren't broken.  Otherwise, any number of\n        // / characters are coalesced into one, unless\n        // preserveMultipleSlashes is set to true.\n        if (this.preserveMultipleSlashes) {\n            return p.split('/');\n        }\n        else if (this.isWindows && /^\\/\\/[^\\/]+/.test(p)) {\n            // add an extra '' for the one we lose\n            return ['', ...p.split(/\\/+/)];\n        }\n        else {\n            return p.split(/\\/+/);\n        }\n    }\n    match(f, partial = this.partial) {\n        this.debug('match', f, this.pattern);\n        // short-circuit in the case of busted things.\n        // comments, etc.\n        if (this.comment) {\n            return false;\n        }\n        if (this.empty) {\n            return f === '';\n        }\n        if (f === '/' && partial) {\n            return true;\n        }\n        const options = this.options;\n        // windows: need to use /, not \\\n        if (this.isWindows) {\n            f = f.split('\\\\').join('/');\n        }\n        // treat the test path as a set of pathparts.\n        const ff = this.slashSplit(f);\n        this.debug(this.pattern, 'split', ff);\n        // just ONE of the pattern sets in this.set needs to match\n        // in order for it to be valid.  If negating, then just one\n        // match means that we have failed.\n        // Either way, return on the first hit.\n        const set = this.set;\n        this.debug(this.pattern, 'set', set);\n        // Find the basename of the path by looking for the last non-empty segment\n        let filename = ff[ff.length - 1];\n        if (!filename) {\n            for (let i = ff.length - 2; !filename && i >= 0; i--) {\n                filename = ff[i];\n            }\n        }\n        for (let i = 0; i < set.length; i++) {\n            const pattern = set[i];\n            let file = ff;\n            if (options.matchBase && pattern.length === 1) {\n                file = [filename];\n            }\n            const hit = this.matchOne(file, pattern, partial);\n            if (hit) {\n                if (options.flipNegate) {\n                    return true;\n                }\n                return !this.negate;\n            }\n        }\n        // didn't get any hits.  this is success if it's a negative\n        // pattern, failure otherwise.\n        if (options.flipNegate) {\n            return false;\n        }\n        return this.negate;\n    }\n    static defaults(def) {\n        return exports.minimatch.defaults(def).Minimatch;\n    }\n}\nexports.Minimatch = Minimatch;\n/* c8 ignore start */\nvar ast_js_2 = require(\"./ast.js\");\nObject.defineProperty(exports, \"AST\", { enumerable: true, get: function () { return ast_js_2.AST; } });\nvar escape_js_2 = require(\"./escape.js\");\nObject.defineProperty(exports, \"escape\", { enumerable: true, get: function () { return escape_js_2.escape; } });\nvar unescape_js_2 = require(\"./unescape.js\");\nObject.defineProperty(exports, \"unescape\", { enumerable: true, get: function () { return unescape_js_2.unescape; } });\n/* c8 ignore stop */\nexports.minimatch.AST = ast_js_1.AST;\nexports.minimatch.Minimatch = Minimatch;\nexports.minimatch.escape = escape_js_1.escape;\nexports.minimatch.unescape = unescape_js_1.unescape;\n//# sourceMappingURL=index.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LSPErrorCodes = exports.createProtocolConnection = void 0;\n__exportStar(require(\"vscode-jsonrpc\"), exports);\n__exportStar(require(\"vscode-languageserver-types\"), exports);\n__exportStar(require(\"./messages\"), exports);\n__exportStar(require(\"./protocol\"), exports);\nvar connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"createProtocolConnection\", { enumerable: true, get: function () { return connection_1.createProtocolConnection; } });\nvar LSPErrorCodes;\n(function (LSPErrorCodes) {\n    /**\n    * This is the start range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeStart = -32899;\n    /**\n     * A request failed but it was syntactically correct, e.g the\n     * method name was known and the parameters were valid. The error\n     * message should contain human readable information about why\n     * the request failed.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.RequestFailed = -32803;\n    /**\n     * The server cancelled the request. This error code should\n     * only be used for requests that explicitly support being\n     * server cancellable.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.ServerCancelled = -32802;\n    /**\n     * The server detected that the content of a document got\n     * modified outside normal conditions. A server should\n     * NOT send this error code if it detects a content change\n     * in it unprocessed messages. The result even computed\n     * on an older state might still be useful for the client.\n     *\n     * If a client decides that a result is not of any use anymore\n     * the client should cancel the request.\n     */\n    LSPErrorCodes.ContentModified = -32801;\n    /**\n     * The client has canceled a request and a server has detected\n     * the cancel.\n     */\n    LSPErrorCodes.RequestCancelled = -32800;\n    /**\n    * This is the end range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeEnd = -32800;\n})(LSPErrorCodes || (exports.LSPErrorCodes = LSPErrorCodes = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CompletionItemFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst SupportedCompletionItemKinds = [\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\n];\nclass CompletionItemFeature extends features_1.TextDocumentLanguageFeature {\n    labelDetailsSupport;\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\n        this.labelDetailsSupport = new Map();\n    }\n    fillClientCapabilities(capabilities) {\n        const completion = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'completion');\n        completion.dynamicRegistration = true;\n        completion.contextSupport = true;\n        completion.completionItem = {\n            snippetSupport: true,\n            commitCharactersSupport: true,\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\n            deprecatedSupport: true,\n            preselectSupport: true,\n            tagSupport: { valueSet: [vscode_languageserver_protocol_1.CompletionItemTag.Deprecated] },\n            insertReplaceSupport: true,\n            resolveSupport: {\n                properties: ['documentation', 'detail', 'additionalTextEdits']\n            },\n            insertTextModeSupport: { valueSet: [vscode_languageserver_protocol_1.InsertTextMode.asIs, vscode_languageserver_protocol_1.InsertTextMode.adjustIndentation] },\n            labelDetailsSupport: true\n        };\n        completion.insertTextMode = vscode_languageserver_protocol_1.InsertTextMode.adjustIndentation;\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\n        completion.completionList = {\n            itemDefaults: [\n                'commitCharacters', 'editRange', 'insertTextFormat', 'insertTextMode', 'data'\n            ],\n            applyKindSupport: true,\n        };\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.completionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options, id) {\n        this.labelDetailsSupport.set(id, !!options.completionItem?.labelDetailsSupport);\n        const triggerCharacters = options.triggerCharacters ?? [];\n        const defaultCommitCharacters = options.allCommitCharacters;\n        const selector = options.documentSelector;\n        const provider = {\n            provideCompletionItems: (document, position, token, context) => {\n                const client = this._client;\n                const middleware = this._client.middleware;\n                const provideCompletionItems = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asCompletionResult(result, defaultCommitCharacters, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, token, error, null);\n                    });\n                };\n                return middleware.provideCompletionItem\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\n                    : provideCompletionItems(document, position, context, token);\n            },\n            resolveCompletionItem: options.resolveProvider\n                ? (item, token) => {\n                    const client = this._client;\n                    const middleware = this._client.middleware;\n                    const resolveCompletionItem = (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item, !!this.labelDetailsSupport.get(id)), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asCompletionItem(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, token, error, item);\n                        });\n                    };\n                    return middleware.resolveCompletionItem\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\n                        : resolveCompletionItem(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, ...triggerCharacters), provider];\n    }\n}\nexports.CompletionItemFeature = CompletionItemFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.SemanticTokensRegistrationType = exports.TokenFormat = void 0;\nconst messages_1 = require(\"./messages\");\n//------- 'textDocument/semanticTokens' -----\nvar TokenFormat;\n(function (TokenFormat) {\n    TokenFormat.Relative = 'relative';\n})(TokenFormat || (exports.TokenFormat = TokenFormat = {}));\nvar SemanticTokensRegistrationType;\n(function (SemanticTokensRegistrationType) {\n    SemanticTokensRegistrationType.method = 'textDocument/semanticTokens';\n    SemanticTokensRegistrationType.type = new messages_1.RegistrationType(SemanticTokensRegistrationType.method);\n})(SemanticTokensRegistrationType || (exports.SemanticTokensRegistrationType = SemanticTokensRegistrationType = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRequest;\n(function (SemanticTokensRequest) {\n    SemanticTokensRequest.method = 'textDocument/semanticTokens/full';\n    SemanticTokensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\n    SemanticTokensRequest.registrationMethod = SemanticTokensRegistrationType.method;\n    SemanticTokensRequest.capabilities = messages_1.CM.create('textDocument.semanticTokens', 'semanticTokensProvider');\n})(SemanticTokensRequest || (exports.SemanticTokensRequest = SemanticTokensRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensDeltaRequest;\n(function (SemanticTokensDeltaRequest) {\n    SemanticTokensDeltaRequest.method = 'textDocument/semanticTokens/full/delta';\n    SemanticTokensDeltaRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensDeltaRequest.type = new messages_1.ProtocolRequestType(SemanticTokensDeltaRequest.method);\n    SemanticTokensDeltaRequest.registrationMethod = SemanticTokensRegistrationType.method;\n    SemanticTokensDeltaRequest.capabilities = messages_1.CM.create('textDocument.semanticTokens.requests.full.delta', 'semanticTokensProvider.full.delta');\n})(SemanticTokensDeltaRequest || (exports.SemanticTokensDeltaRequest = SemanticTokensDeltaRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRangeRequest;\n(function (SemanticTokensRangeRequest) {\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\n    SemanticTokensRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\n    SemanticTokensRangeRequest.registrationMethod = SemanticTokensRegistrationType.method;\n    SemanticTokensRangeRequest.capabilities = messages_1.CM.create('textDocument.semanticTokens.requests.range', 'semanticTokensProvider.range');\n})(SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = SemanticTokensRangeRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRefreshRequest;\n(function (SemanticTokensRefreshRequest) {\n    SemanticTokensRefreshRequest.method = `workspace/semanticTokens/refresh`;\n    SemanticTokensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    SemanticTokensRefreshRequest.type = new messages_1.ProtocolRequestType0(SemanticTokensRefreshRequest.method);\n    SemanticTokensRefreshRequest.capabilities = messages_1.CM.create('workspace.semanticTokens.refreshSupport', undefined);\n})(SemanticTokensRefreshRequest || (exports.SemanticTokensRefreshRequest = SemanticTokensRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.matchGlobPattern = matchGlobPattern;\nconst minimatch = __importStar(require(\"minimatch\"));\nconst vscode_1 = require(\"vscode\");\nfunction matchGlobPattern(pattern, resource) {\n    let miniMatchPattern;\n    if (typeof pattern === 'string') {\n        miniMatchPattern = pattern.replace(/\\\\/g, '/');\n    }\n    else {\n        try {\n            const baseUri = vscode_1.Uri.parse(typeof pattern.baseUri === 'string' ? pattern.baseUri : pattern.baseUri.uri);\n            miniMatchPattern = baseUri.with({ path: baseUri.path + '/' + pattern.pattern }).fsPath.replace(/\\\\/g, '/');\n        }\n        catch (error) {\n            return false;\n        }\n    }\n    const matcher = new minimatch.Minimatch(miniMatchPattern, { noext: true });\n    if (!matcher.makeRe()) {\n        return false;\n    }\n    return matcher.match(resource.fsPath);\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LanguageClient = void 0;\nconst api_1 = require(\"../common/api\");\nconst browser_1 = require(\"vscode-languageserver-protocol/browser\");\n__exportStar(require(\"vscode-languageserver-protocol/browser\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nclass LanguageClient extends api_1.BaseLanguageClient {\n    serverOptions;\n    constructor(id, name, serverOptions, clientOptions) {\n        super(id, name, clientOptions);\n        this.serverOptions = serverOptions;\n    }\n    async createMessageTransports(_encoding) {\n        if (typeof this.serverOptions === 'function') {\n            const result = await this.serverOptions();\n            if (result instanceof Worker) {\n                return this.createMessageTransportsFromWorker(result);\n            }\n            else {\n                return result;\n            }\n        }\n        else {\n            return this.createMessageTransportsFromWorker(this.serverOptions);\n        }\n    }\n    createMessageTransportsFromWorker(worker) {\n        const reader = new browser_1.BrowserMessageReader(worker);\n        const writer = new browser_1.BrowserMessageWriter(worker);\n        return Promise.resolve({ reader, writer });\n    }\n}\nexports.LanguageClient = LanguageClient;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = void 0;\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = __importStar(require(\"./utils/is\"));\nconst messages_1 = require(\"./messages\");\n/**\n * A notebook cell kind.\n *\n * @since 3.17.0\n */\nvar NotebookCellKind;\n(function (NotebookCellKind) {\n    /**\n     * A markup-cell is formatted source that is used for display.\n     */\n    NotebookCellKind.Markup = 1;\n    /**\n     * A code-cell is source code.\n     */\n    NotebookCellKind.Code = 2;\n    function is(value) {\n        return value === 1 || value === 2;\n    }\n    NotebookCellKind.is = is;\n})(NotebookCellKind || (exports.NotebookCellKind = NotebookCellKind = {}));\nvar ExecutionSummary;\n(function (ExecutionSummary) {\n    function create(executionOrder, success) {\n        const result = { executionOrder };\n        if (success === true || success === false) {\n            result.success = success;\n        }\n        return result;\n    }\n    ExecutionSummary.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.executionOrder) && (candidate.success === undefined || Is.boolean(candidate.success));\n    }\n    ExecutionSummary.is = is;\n    function equals(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        return one.executionOrder === other.executionOrder && one.success === other.success;\n    }\n    ExecutionSummary.equals = equals;\n})(ExecutionSummary || (exports.ExecutionSummary = ExecutionSummary = {}));\nvar NotebookCell;\n(function (NotebookCell) {\n    function create(kind, document) {\n        return { kind, document };\n    }\n    NotebookCell.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && NotebookCellKind.is(candidate.kind) && vscode_languageserver_types_1.DocumentUri.is(candidate.document) &&\n            (candidate.metadata === undefined || Is.objectLiteral(candidate.metadata));\n    }\n    NotebookCell.is = is;\n    function diff(one, two) {\n        const result = new Set();\n        if (one.document !== two.document) {\n            result.add('document');\n        }\n        if (one.kind !== two.kind) {\n            result.add('kind');\n        }\n        if (one.executionSummary !== two.executionSummary) {\n            result.add('executionSummary');\n        }\n        if ((one.metadata !== undefined || two.metadata !== undefined) && !equalsMetadata(one.metadata, two.metadata)) {\n            result.add('metadata');\n        }\n        if ((one.executionSummary !== undefined || two.executionSummary !== undefined) && !ExecutionSummary.equals(one.executionSummary, two.executionSummary)) {\n            result.add('executionSummary');\n        }\n        return result;\n    }\n    NotebookCell.diff = diff;\n    function equalsMetadata(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        if (typeof one !== typeof other) {\n            return false;\n        }\n        if (typeof one !== 'object') {\n            return false;\n        }\n        const oneArray = Array.isArray(one);\n        const otherArray = Array.isArray(other);\n        if (oneArray !== otherArray) {\n            return false;\n        }\n        if (oneArray && otherArray) {\n            if (one.length !== other.length) {\n                return false;\n            }\n            for (let i = 0; i < one.length; i++) {\n                if (!equalsMetadata(one[i], other[i])) {\n                    return false;\n                }\n            }\n        }\n        if (Is.objectLiteral(one) && Is.objectLiteral(other)) {\n            const oneKeys = Object.keys(one);\n            const otherKeys = Object.keys(other);\n            if (oneKeys.length !== otherKeys.length) {\n                return false;\n            }\n            oneKeys.sort();\n            otherKeys.sort();\n            if (!equalsMetadata(oneKeys, otherKeys)) {\n                return false;\n            }\n            for (let i = 0; i < oneKeys.length; i++) {\n                const prop = oneKeys[i];\n                if (!equalsMetadata(one[prop], other[prop])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n})(NotebookCell || (exports.NotebookCell = NotebookCell = {}));\nvar NotebookDocument;\n(function (NotebookDocument) {\n    function create(uri, notebookType, version, cells) {\n        return { uri, notebookType, version, cells };\n    }\n    NotebookDocument.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.uri) && vscode_languageserver_types_1.integer.is(candidate.version) && Is.typedArray(candidate.cells, NotebookCell.is);\n    }\n    NotebookDocument.is = is;\n})(NotebookDocument || (exports.NotebookDocument = NotebookDocument = {}));\nvar NotebookDocumentSyncRegistrationType;\n(function (NotebookDocumentSyncRegistrationType) {\n    NotebookDocumentSyncRegistrationType.method = 'notebookDocument/sync';\n    NotebookDocumentSyncRegistrationType.messageDirection = messages_1.MessageDirection.clientToServer;\n    NotebookDocumentSyncRegistrationType.type = new messages_1.RegistrationType(NotebookDocumentSyncRegistrationType.method);\n})(NotebookDocumentSyncRegistrationType || (exports.NotebookDocumentSyncRegistrationType = NotebookDocumentSyncRegistrationType = {}));\n/**\n * A notification sent when a notebook opens.\n *\n * @since 3.17.0\n */\nvar DidOpenNotebookDocumentNotification;\n(function (DidOpenNotebookDocumentNotification) {\n    DidOpenNotebookDocumentNotification.method = 'notebookDocument/didOpen';\n    DidOpenNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenNotebookDocumentNotification.method);\n    DidOpenNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidOpenNotebookDocumentNotification || (exports.DidOpenNotebookDocumentNotification = DidOpenNotebookDocumentNotification = {}));\nvar NotebookCellArrayChange;\n(function (NotebookCellArrayChange) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.start) && vscode_languageserver_types_1.uinteger.is(candidate.deleteCount) && (candidate.cells === undefined || Is.typedArray(candidate.cells, NotebookCell.is));\n    }\n    NotebookCellArrayChange.is = is;\n    function create(start, deleteCount, cells) {\n        const result = { start, deleteCount };\n        if (cells !== undefined) {\n            result.cells = cells;\n        }\n        return result;\n    }\n    NotebookCellArrayChange.create = create;\n})(NotebookCellArrayChange || (exports.NotebookCellArrayChange = NotebookCellArrayChange = {}));\nvar DidChangeNotebookDocumentNotification;\n(function (DidChangeNotebookDocumentNotification) {\n    DidChangeNotebookDocumentNotification.method = 'notebookDocument/didChange';\n    DidChangeNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeNotebookDocumentNotification.method);\n    DidChangeNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidChangeNotebookDocumentNotification || (exports.DidChangeNotebookDocumentNotification = DidChangeNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook document is saved.\n *\n * @since 3.17.0\n */\nvar DidSaveNotebookDocumentNotification;\n(function (DidSaveNotebookDocumentNotification) {\n    DidSaveNotebookDocumentNotification.method = 'notebookDocument/didSave';\n    DidSaveNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveNotebookDocumentNotification.method);\n    DidSaveNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidSaveNotebookDocumentNotification || (exports.DidSaveNotebookDocumentNotification = DidSaveNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook closes.\n *\n * @since 3.17.0\n */\nvar DidCloseNotebookDocumentNotification;\n(function (DidCloseNotebookDocumentNotification) {\n    DidCloseNotebookDocumentNotification.method = 'notebookDocument/didClose';\n    DidCloseNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseNotebookDocumentNotification.method);\n    DidCloseNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidCloseNotebookDocumentNotification || (exports.DidCloseNotebookDocumentNotification = DidCloseNotebookDocumentNotification = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceSymbolFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst documentSymbol_1 = require(\"./documentSymbol\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass WorkspaceSymbolFeature extends features_1.WorkspaceFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const symbolCapabilities = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'symbol');\n        symbolCapabilities.dynamicRegistration = true;\n        symbolCapabilities.symbolKind = {\n            valueSet: documentSymbol_1.SupportedSymbolKinds\n        };\n        symbolCapabilities.tagSupport = {\n            valueSet: documentSymbol_1.SupportedSymbolTags\n        };\n        symbolCapabilities.resolveSupport = { properties: ['location.range'] };\n    }\n    initialize(capabilities) {\n        if (!capabilities.workspaceSymbolProvider) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: capabilities.workspaceSymbolProvider === true ? { workDoneProgress: false } : capabilities.workspaceSymbolProvider\n        });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideWorkspaceSymbols: (query, token) => {\n                const client = this._client;\n                const provideWorkspaceSymbols = (query, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asSymbolInformations(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideWorkspaceSymbols\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\n                    : provideWorkspaceSymbols(query, token);\n            },\n            resolveWorkspaceSymbol: options.resolveProvider === true\n                ? (item, token) => {\n                    const client = this._client;\n                    const resolveWorkspaceSymbol = (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.type, client.code2ProtocolConverter.asWorkspaceSymbol(item), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asSymbolInformation(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.type, token, error, null);\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.resolveWorkspaceSymbol\n                        ? middleware.resolveWorkspaceSymbol(item, token, resolveWorkspaceSymbol)\n                        : resolveWorkspaceSymbol(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerWorkspaceSymbolProvider(provider), provider];\n    }\n}\nexports.WorkspaceSymbolFeature = WorkspaceSymbolFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeLensFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst features_1 = require(\"./features\");\nclass CodeLensFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const clc = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'codeLens');\n        clc.dynamicRegistration = true;\n        clc.resolveSupport = { properties: ['command'] };\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'codeLens').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.CodeLensRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeCodeLensEmitter.fire();\n            }\n        });\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeLensProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeCodeLenses: eventEmitter.event,\n            provideCodeLenses: (document, token) => {\n                const client = this._client;\n                const provideCodeLenses = (document, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asCodeLenses(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideCodeLenses\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\n                    : provideCodeLenses(document, token);\n            },\n            resolveCodeLens: (options.resolveProvider)\n                ? (codeLens, token) => {\n                    const client = this._client;\n                    const resolveCodeLens = (codeLens, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return codeLens;\n                            }\n                            return client.protocol2CodeConverter.asCodeLens(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, token, error, codeLens);\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.resolveCodeLens\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\n                        : resolveCodeLens(codeLens, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), { provider, onDidChangeCodeLensEmitter: eventEmitter }];\n    }\n}\nexports.CodeLensFeature = CodeLensFeature;\n","!function(t,e){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)(\"object\"==typeof exports?exports:t)[n]=r[n]}}(this,(()=>(()=>{\"use strict\";var t={975:t=>{function e(t){if(\"string\"!=typeof t)throw new TypeError(\"Path must be a string. Received \"+JSON.stringify(t))}function r(t,e){for(var r,n=\"\",i=0,o=-1,s=0,a=0;a<=t.length;++a){if(a<t.length)r=t.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var h=n.lastIndexOf(\"/\");if(h!==n.length-1){-1===h?(n=\"\",i=0):i=(n=n.slice(0,h)).length-1-n.lastIndexOf(\"/\"),o=a,s=0;continue}}else if(2===n.length||1===n.length){n=\"\",i=0,o=a,s=0;continue}e&&(n.length>0?n+=\"/..\":n=\"..\",i=2)}else n.length>0?n+=\"/\"+t.slice(o+1,a):n=t.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===r&&-1!==s?++s:s=-1}return n}var n={resolve:function(){for(var t,n=\"\",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s;o>=0?s=arguments[o]:(void 0===t&&(t=process.cwd()),s=t),e(s),0!==s.length&&(n=s+\"/\"+n,i=47===s.charCodeAt(0))}return n=r(n,!i),i?n.length>0?\"/\"+n:\"/\":n.length>0?n:\".\"},normalize:function(t){if(e(t),0===t.length)return\".\";var n=47===t.charCodeAt(0),i=47===t.charCodeAt(t.length-1);return 0!==(t=r(t,!n)).length||n||(t=\".\"),t.length>0&&i&&(t+=\"/\"),n?\"/\"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return\".\";for(var t,r=0;r<arguments.length;++r){var i=arguments[r];e(i),i.length>0&&(void 0===t?t=i:t+=\"/\"+i)}return void 0===t?\".\":n.normalize(t)},relative:function(t,r){if(e(t),e(r),t===r)return\"\";if((t=n.resolve(t))===(r=n.resolve(r)))return\"\";for(var i=1;i<t.length&&47===t.charCodeAt(i);++i);for(var o=t.length,s=o-i,a=1;a<r.length&&47===r.charCodeAt(a);++a);for(var h=r.length-a,c=s<h?s:h,f=-1,u=0;u<=c;++u){if(u===c){if(h>c){if(47===r.charCodeAt(a+u))return r.slice(a+u+1);if(0===u)return r.slice(a+u)}else s>c&&(47===t.charCodeAt(i+u)?f=u:0===u&&(f=0));break}var l=t.charCodeAt(i+u);if(l!==r.charCodeAt(a+u))break;47===l&&(f=u)}var d=\"\";for(u=i+f+1;u<=o;++u)u!==o&&47!==t.charCodeAt(u)||(0===d.length?d+=\"..\":d+=\"/..\");return d.length>0?d+r.slice(a+f):(a+=f,47===r.charCodeAt(a)&&++a,r.slice(a))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return\".\";for(var r=t.charCodeAt(0),n=47===r,i=-1,o=!0,s=t.length-1;s>=1;--s)if(47===(r=t.charCodeAt(s))){if(!o){i=s;break}}else o=!1;return-1===i?n?\"/\":\".\":n&&1===i?\"//\":t.slice(0,i)},basename:function(t,r){if(void 0!==r&&\"string\"!=typeof r)throw new TypeError('\"ext\" argument must be a string');e(t);var n,i=0,o=-1,s=!0;if(void 0!==r&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return\"\";var a=r.length-1,h=-1;for(n=t.length-1;n>=0;--n){var c=t.charCodeAt(n);if(47===c){if(!s){i=n+1;break}}else-1===h&&(s=!1,h=n+1),a>=0&&(c===r.charCodeAt(a)?-1==--a&&(o=n):(a=-1,o=h))}return i===o?o=h:-1===o&&(o=t.length),t.slice(i,o)}for(n=t.length-1;n>=0;--n)if(47===t.charCodeAt(n)){if(!s){i=n+1;break}}else-1===o&&(s=!1,o=n+1);return-1===o?\"\":t.slice(i,o)},extname:function(t){e(t);for(var r=-1,n=0,i=-1,o=!0,s=0,a=t.length-1;a>=0;--a){var h=t.charCodeAt(a);if(47!==h)-1===i&&(o=!1,i=a+1),46===h?-1===r?r=a:1!==s&&(s=1):-1!==r&&(s=-1);else if(!o){n=a+1;break}}return-1===r||-1===i||0===s||1===s&&r===i-1&&r===n+1?\"\":t.slice(r,i)},format:function(t){if(null===t||\"object\"!=typeof t)throw new TypeError('The \"pathObject\" argument must be of type Object. Received type '+typeof t);return function(t,e){var r=e.dir||e.root,n=e.base||(e.name||\"\")+(e.ext||\"\");return r?r===e.root?r+n:r+\"/\"+n:n}(0,t)},parse:function(t){e(t);var r={root:\"\",dir:\"\",base:\"\",ext:\"\",name:\"\"};if(0===t.length)return r;var n,i=t.charCodeAt(0),o=47===i;o?(r.root=\"/\",n=1):n=0;for(var s=-1,a=0,h=-1,c=!0,f=t.length-1,u=0;f>=n;--f)if(47!==(i=t.charCodeAt(f)))-1===h&&(c=!1,h=f+1),46===i?-1===s?s=f:1!==u&&(u=1):-1!==s&&(u=-1);else if(!c){a=f+1;break}return-1===s||-1===h||0===u||1===u&&s===h-1&&s===a+1?-1!==h&&(r.base=r.name=0===a&&o?t.slice(1,h):t.slice(a,h)):(0===a&&o?(r.name=t.slice(1,s),r.base=t.slice(1,h)):(r.name=t.slice(a,s),r.base=t.slice(a,h)),r.ext=t.slice(s,h)),a>0?r.dir=t.slice(0,a-1):o&&(r.dir=\"/\"),r},sep:\"/\",delimiter:\":\",win32:null,posix:null};n.posix=n,t.exports=n},70:(t,e)=>{if(Object.defineProperty(e,\"__esModule\",{value:!0}),e.isWindows=void 0,\"object\"==typeof process)e.isWindows=\"win32\"===process.platform;else if(\"object\"==typeof navigator){let t=navigator.userAgent;e.isWindows=t.indexOf(\"Windows\")>=0}},231:(t,e,r)=>{Object.defineProperty(e,\"__esModule\",{value:!0}),e.uriToFsPath=e.URI=void 0;const n=r(70),i=/^\\w[\\w\\d+.-]*$/,o=/^\\//,s=/^\\/\\//;function a(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: \"\", authority: \"${t.authority}\", path: \"${t.path}\", query: \"${t.query}\", fragment: \"${t.fragment}\"}`);if(t.scheme&&!i.test(t.scheme))throw new Error(\"[UriError]: Scheme contains illegal characters.\");if(t.path)if(t.authority){if(!o.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character')}else if(s.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")')}const h=\"\",c=\"/\",f=/^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;class u{static isUri(t){return t instanceof u||!!t&&\"string\"==typeof t.authority&&\"string\"==typeof t.fragment&&\"string\"==typeof t.path&&\"string\"==typeof t.query&&\"string\"==typeof t.scheme&&\"string\"==typeof t.fsPath&&\"function\"==typeof t.with&&\"function\"==typeof t.toString}scheme;authority;path;query;fragment;constructor(t,e,r,n,i,o=!1){\"object\"==typeof t?(this.scheme=t.scheme||h,this.authority=t.authority||h,this.path=t.path||h,this.query=t.query||h,this.fragment=t.fragment||h):(this.scheme=function(t,e){return t||e?t:\"file\"}(t,o),this.authority=e||h,this.path=function(t,e){switch(t){case\"https\":case\"http\":case\"file\":e?e[0]!==c&&(e=c+e):e=c}return e}(this.scheme,r||h),this.query=n||h,this.fragment=i||h,a(this,o))}get fsPath(){return v(this,!1)}with(t){if(!t)return this;let{scheme:e,authority:r,path:n,query:i,fragment:o}=t;return void 0===e?e=this.scheme:null===e&&(e=h),void 0===r?r=this.authority:null===r&&(r=h),void 0===n?n=this.path:null===n&&(n=h),void 0===i?i=this.query:null===i&&(i=h),void 0===o?o=this.fragment:null===o&&(o=h),e===this.scheme&&r===this.authority&&n===this.path&&i===this.query&&o===this.fragment?this:new d(e,r,n,i,o)}static parse(t,e=!1){const r=f.exec(t);return r?new d(r[2]||h,w(r[4]||h),w(r[5]||h),w(r[7]||h),w(r[9]||h),e):new d(h,h,h,h,h)}static file(t){let e=h;if(n.isWindows&&(t=t.replace(/\\\\/g,c)),t[0]===c&&t[1]===c){const r=t.indexOf(c,2);-1===r?(e=t.substring(2),t=c):(e=t.substring(2,r),t=t.substring(r)||c)}return new d(\"file\",e,t,h,h)}static from(t){const e=new d(t.scheme,t.authority,t.path,t.query,t.fragment);return a(e,!0),e}toString(t=!1){return y(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof u)return t;{const e=new d(t);return e._formatted=t.external,e._fsPath=t._sep===l?t.fsPath:null,e}}return t}}e.URI=u;const l=n.isWindows?1:void 0;class d extends u{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=v(this,!1)),this._fsPath}toString(t=!1){return t?y(this,!0):(this._formatted||(this._formatted=y(this,!1)),this._formatted)}toJSON(){const t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=l),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t}}const p={58:\"%3A\",47:\"%2F\",63:\"%3F\",35:\"%23\",91:\"%5B\",93:\"%5D\",64:\"%40\",33:\"%21\",36:\"%24\",38:\"%26\",39:\"%27\",40:\"%28\",41:\"%29\",42:\"%2A\",43:\"%2B\",44:\"%2C\",59:\"%3B\",61:\"%3D\",32:\"%20\"};function g(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){const s=t.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||45===s||46===s||95===s||126===s||e&&47===s||r&&91===s||r&&93===s||r&&58===s)-1!==i&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),void 0!==n&&(n+=t.charAt(o));else{void 0===n&&(n=t.substr(0,o));const e=p[s];void 0!==e?(-1!==i&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=e):-1===i&&(i=o)}}return-1!==i&&(n+=encodeURIComponent(t.substring(i))),void 0!==n?n:t}function m(t){let e;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);35===n||63===n?(void 0===e&&(e=t.substr(0,r)),e+=p[n]):void 0!==e&&(e+=t[r])}return void 0!==e?e:t}function v(t,e){let r;return r=t.authority&&t.path.length>1&&\"file\"===t.scheme?`//${t.authority}${t.path}`:47===t.path.charCodeAt(0)&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&58===t.path.charCodeAt(2)?e?t.path.substr(1):t.path[1].toLowerCase()+t.path.substr(2):t.path,n.isWindows&&(r=r.replace(/\\//g,\"\\\\\")),r}function y(t,e){const r=e?m:g;let n=\"\",{scheme:i,authority:o,path:s,query:a,fragment:h}=t;if(i&&(n+=i,n+=\":\"),(o||\"file\"===i)&&(n+=c,n+=c),o){let t=o.indexOf(\"@\");if(-1!==t){const e=o.substr(0,t);o=o.substr(t+1),t=e.lastIndexOf(\":\"),-1===t?n+=r(e,!1,!1):(n+=r(e.substr(0,t),!1,!1),n+=\":\",n+=r(e.substr(t+1),!1,!0)),n+=\"@\"}o=o.toLowerCase(),t=o.lastIndexOf(\":\"),-1===t?n+=r(o,!1,!0):(n+=r(o.substr(0,t),!1,!0),n+=o.substr(t))}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2)){const t=s.charCodeAt(1);t>=65&&t<=90&&(s=`/${String.fromCharCode(t+32)}:${s.substr(3)}`)}else if(s.length>=2&&58===s.charCodeAt(1)){const t=s.charCodeAt(0);t>=65&&t<=90&&(s=`${String.fromCharCode(t+32)}:${s.substr(2)}`)}n+=r(s,!0,!1)}return a&&(n+=\"?\",n+=r(a,!1,!1)),h&&(n+=\"#\",n+=e?h:g(h,!1,!1)),n}function b(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+b(t.substr(3)):t}}e.uriToFsPath=v;const C=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function w(t){return t.match(C)?t.replace(C,(t=>b(t))):t}},552:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!(\"get\"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,\"default\",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)\"default\"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,\"__esModule\",{value:!0}),e.Utils=void 0;const s=o(r(975)),a=s.posix||s,h=\"/\";var c;!function(t){t.joinPath=function(t,...e){return t.with({path:a.join(t.path,...e)})},t.resolvePath=function(t,...e){let r=t.path,n=!1;r[0]!==h&&(r=h+r,n=!0);let i=a.resolve(r,...e);return n&&i[0]===h&&!t.authority&&(i=i.substring(1)),t.with({path:i})},t.dirname=function(t){if(0===t.path.length||t.path===h)return t;let e=a.dirname(t.path);return 1===e.length&&46===e.charCodeAt(0)&&(e=\"\"),t.with({path:e})},t.basename=function(t){return a.basename(t.path)},t.extname=function(t){return a.extname(t.path)}}(c||(e.Utils=c={}))}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}var n={};return(()=>{var t=n;Object.defineProperty(t,\"__esModule\",{value:!0}),t.Utils=t.URI=void 0;const e=r(231);Object.defineProperty(t,\"URI\",{enumerable:!0,get:function(){return e.URI}});const i=r(552);Object.defineProperty(t,\"Utils\",{enumerable:!0,get:function(){return i.Utils}})})(),n})()));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assertValidPattern = void 0;\nconst MAX_PATTERN_LENGTH = 1024 * 64;\nconst assertValidPattern = (pattern) => {\n    if (typeof pattern !== 'string') {\n        throw new TypeError('invalid pattern');\n    }\n    if (pattern.length > MAX_PATTERN_LENGTH) {\n        throw new TypeError('pattern is too long');\n    }\n};\nexports.assertValidPattern = assertValidPattern;\n//# sourceMappingURL=assert-valid-pattern.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefinitionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass DefinitionFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const definitionSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'definition');\n        definitionSupport.dynamicRegistration = true;\n        definitionSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.definitionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDefinition: (document, position, token) => {\n                const client = this._client;\n                const provideDefinition = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDefinitionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDefinition\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\n                    : provideDefinition(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.DefinitionFeature = DefinitionFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/vscode.proposed.codeActionAI.d.ts\" preserve: true/>\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConverter = createConverter;\nconst code = __importStar(require(\"vscode\"));\nconst ls = __importStar(require(\"vscode-languageserver-protocol\"));\nconst Is = __importStar(require(\"./utils/is\"));\nconst async = __importStar(require(\"./utils/async\"));\nconst protocolCompletionItem_1 = __importDefault(require(\"./protocolCompletionItem\"));\nconst protocolCodeLens_1 = __importDefault(require(\"./protocolCodeLens\"));\nconst protocolDocumentLink_1 = __importDefault(require(\"./protocolDocumentLink\"));\nconst protocolCodeAction_1 = __importDefault(require(\"./protocolCodeAction\"));\nconst protocolDiagnostic_1 = require(\"./protocolDiagnostic\");\nconst protocolCallHierarchyItem_1 = __importDefault(require(\"./protocolCallHierarchyItem\"));\nconst protocolTypeHierarchyItem_1 = __importDefault(require(\"./protocolTypeHierarchyItem\"));\nconst protocolWorkspaceSymbol_1 = __importDefault(require(\"./protocolWorkspaceSymbol\"));\nconst protocolInlayHint_1 = __importDefault(require(\"./protocolInlayHint\"));\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nvar CodeBlock;\n(function (CodeBlock) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\n    }\n    CodeBlock.is = is;\n})(CodeBlock || (CodeBlock = {}));\nfunction createConverter(uriConverter, trustMarkdown, supportHtml, supportThemeIcons) {\n    const nullConverter = (value) => code.Uri.parse(value);\n    const _uriConverter = uriConverter || nullConverter;\n    function asUri(value) {\n        return _uriConverter(value);\n    }\n    function asDocumentSelector(selector) {\n        const result = [];\n        for (const filter of selector) {\n            if (typeof filter === 'string') {\n                result.push(filter);\n            }\n            else if (vscode_languageserver_protocol_1.NotebookCellTextDocumentFilter.is(filter)) {\n                // We first need to check for the notebook cell filter since a TextDocumentFilter would\n                // match both (e.g. the notebook is optional).\n                if (typeof filter.notebook === 'string') {\n                    result.push({ notebookType: filter.notebook, language: filter.language });\n                }\n                else {\n                    const notebookType = filter.notebook.notebookType ?? '*';\n                    result.push({ notebookType: notebookType, scheme: filter.notebook.scheme, pattern: asGlobPattern(filter.notebook.pattern), language: filter.language });\n                }\n            }\n            else if (vscode_languageserver_protocol_1.TextDocumentFilter.is(filter)) {\n                result.push({ language: filter.language, scheme: filter.scheme, pattern: asGlobPattern(filter.pattern) });\n            }\n        }\n        return result;\n    }\n    async function asDiagnostics(diagnostics, token) {\n        return async.map(diagnostics, asDiagnostic, token);\n    }\n    function asDiagnosticsSync(diagnostics) {\n        const result = new Array(diagnostics.length);\n        for (let i = 0; i < diagnostics.length; i++) {\n            result[i] = asDiagnostic(diagnostics[i]);\n        }\n        return result;\n    }\n    function asDiagnostic(diagnostic) {\n        const result = new protocolDiagnostic_1.ProtocolDiagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity), diagnostic.data);\n        if (diagnostic.code !== undefined) {\n            if (typeof diagnostic.code === 'string' || typeof diagnostic.code === 'number') {\n                if (ls.CodeDescription.is(diagnostic.codeDescription)) {\n                    result.code = {\n                        value: diagnostic.code,\n                        target: asUri(diagnostic.codeDescription.href)\n                    };\n                }\n                else {\n                    result.code = diagnostic.code;\n                }\n            }\n            else if (protocolDiagnostic_1.DiagnosticCode.is(diagnostic.code)) {\n                // This is for backwards compatibility of a proposed API.\n                // We should remove this at some point.\n                result.hasDiagnosticCode = true;\n                const diagnosticCode = diagnostic.code;\n                result.code = {\n                    value: diagnosticCode.value,\n                    target: asUri(diagnosticCode.target)\n                };\n            }\n        }\n        if (diagnostic.source) {\n            result.source = diagnostic.source;\n        }\n        if (diagnostic.relatedInformation) {\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\n        }\n        if (Array.isArray(diagnostic.tags)) {\n            result.tags = asDiagnosticTags(diagnostic.tags);\n        }\n        return result;\n    }\n    function asRelatedInformation(relatedInformation) {\n        const result = new Array(relatedInformation.length);\n        for (let i = 0; i < relatedInformation.length; i++) {\n            const info = relatedInformation[i];\n            result[i] = new code.DiagnosticRelatedInformation(asLocation(info.location), info.message);\n        }\n        return result;\n    }\n    function asDiagnosticTags(tags) {\n        if (!tags) {\n            return undefined;\n        }\n        const result = [];\n        for (const tag of tags) {\n            const converted = asDiagnosticTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length > 0 ? result : undefined;\n    }\n    function asDiagnosticTag(tag) {\n        switch (tag) {\n            case ls.DiagnosticTag.Unnecessary:\n                return code.DiagnosticTag.Unnecessary;\n            case ls.DiagnosticTag.Deprecated:\n                return code.DiagnosticTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asPosition(value) {\n        return value ? new code.Position(value.line, value.character) : undefined;\n    }\n    function asRange(value) {\n        return value ? new code.Range(value.start.line, value.start.character, value.end.line, value.end.character) : undefined;\n    }\n    async function asRanges(items, token) {\n        return async.map(items, (range) => {\n            return new code.Range(range.start.line, range.start.character, range.end.line, range.end.character);\n        }, token);\n    }\n    function asDiagnosticSeverity(value) {\n        if (value === undefined || value === null) {\n            return code.DiagnosticSeverity.Error;\n        }\n        switch (value) {\n            case ls.DiagnosticSeverity.Error:\n                return code.DiagnosticSeverity.Error;\n            case ls.DiagnosticSeverity.Warning:\n                return code.DiagnosticSeverity.Warning;\n            case ls.DiagnosticSeverity.Information:\n                return code.DiagnosticSeverity.Information;\n            case ls.DiagnosticSeverity.Hint:\n                return code.DiagnosticSeverity.Hint;\n        }\n        return code.DiagnosticSeverity.Error;\n    }\n    function asHoverContent(value) {\n        if (Is.string(value)) {\n            return asMarkdownString(value);\n        }\n        else if (CodeBlock.is(value)) {\n            const result = asMarkdownString();\n            return result.appendCodeblock(value.value, value.language);\n        }\n        else if (Array.isArray(value)) {\n            const result = [];\n            for (const element of value) {\n                const item = asMarkdownString();\n                if (CodeBlock.is(element)) {\n                    item.appendCodeblock(element.value, element.language);\n                }\n                else {\n                    item.appendMarkdown(element);\n                }\n                result.push(item);\n            }\n            return result;\n        }\n        else {\n            return asMarkdownString(value);\n        }\n    }\n    function asDocumentation(value) {\n        if (Is.string(value)) {\n            return value;\n        }\n        else {\n            switch (value.kind) {\n                case ls.MarkupKind.Markdown:\n                    return asMarkdownString(value.value);\n                case ls.MarkupKind.PlainText:\n                    return value.value;\n                default:\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\n            }\n        }\n    }\n    function asMarkdownString(value) {\n        let result;\n        if (value === undefined || typeof value === 'string') {\n            result = new code.MarkdownString(value);\n        }\n        else {\n            switch (value.kind) {\n                case ls.MarkupKind.Markdown:\n                    result = new code.MarkdownString(value.value);\n                    break;\n                case ls.MarkupKind.PlainText:\n                    result = new code.MarkdownString();\n                    result.appendText(value.value);\n                    break;\n                default:\n                    result = new code.MarkdownString();\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\n                    break;\n            }\n        }\n        result.isTrusted = trustMarkdown;\n        result.supportHtml = supportHtml;\n        result.supportThemeIcons = supportThemeIcons;\n        return result;\n    }\n    function asHover(hover) {\n        if (!hover) {\n            return undefined;\n        }\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\n    }\n    async function asCompletionResult(value, allCommitCharacters, token) {\n        if (!value) {\n            return undefined;\n        }\n        if (Array.isArray(value)) {\n            return async.map(value, (item) => asCompletionItem(item, allCommitCharacters), token);\n        }\n        const list = value;\n        const { defaultRange, commitCharacters } = getCompletionItemDefaults(list, allCommitCharacters);\n        const converted = await async.map(list.items, (item) => {\n            return asCompletionItem(item, commitCharacters, list.applyKind?.commitCharacters, defaultRange, list.itemDefaults?.insertTextMode, list.itemDefaults?.insertTextFormat, list.itemDefaults?.data, list.applyKind?.data);\n        }, token);\n        return new code.CompletionList(converted, list.isIncomplete);\n    }\n    function getCompletionItemDefaults(list, allCommitCharacters) {\n        const rangeDefaults = list.itemDefaults?.editRange;\n        const commitCharacters = list.itemDefaults?.commitCharacters ?? allCommitCharacters;\n        return ls.Range.is(rangeDefaults)\n            ? { defaultRange: asRange(rangeDefaults), commitCharacters }\n            : rangeDefaults !== undefined\n                ? { defaultRange: { inserting: asRange(rangeDefaults.insert), replacing: asRange(rangeDefaults.replace) }, commitCharacters }\n                : { defaultRange: undefined, commitCharacters };\n    }\n    function asCompletionItemKind(value) {\n        // Protocol item kind is 1 based, codes item kind is zero based.\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\n            return [value - 1, undefined];\n        }\n        return [code.CompletionItemKind.Text, value];\n    }\n    function asCompletionItemTag(tag) {\n        switch (tag) {\n            case ls.CompletionItemTag.Deprecated:\n                return code.CompletionItemTag.Deprecated;\n        }\n        return undefined;\n    }\n    function asCompletionItemTags(tags) {\n        if (tags === undefined || tags === null) {\n            return [];\n        }\n        const result = [];\n        for (const tag of tags) {\n            const converted = asCompletionItemTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result;\n    }\n    function asCompletionItem(item, defaultCommitCharacters, commitCharactersApplyKind, defaultRange, defaultInsertTextMode, defaultInsertTextFormat, defaultData, dataApplyKind) {\n        const tags = asCompletionItemTags(item.tags);\n        const label = asCompletionItemLabel(item);\n        const result = new protocolCompletionItem_1.default(label);\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        const insertText = asCompletionInsertText(item, defaultRange, defaultInsertTextFormat);\n        if (insertText) {\n            result.insertText = insertText.text;\n            result.range = insertText.range;\n            result.fromEdit = insertText.fromEdit;\n        }\n        if (Is.number(item.kind)) {\n            const [itemKind, original] = asCompletionItemKind(item.kind);\n            result.kind = itemKind;\n            if (original) {\n                result.originalItemKind = original;\n            }\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = asTextEditsSync(item.additionalTextEdits);\n        }\n        const commitCharacters = applyCommitCharacters(item, defaultCommitCharacters, commitCharactersApplyKind);\n        if (commitCharacters) {\n            result.commitCharacters = commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.deprecated === true || item.deprecated === false) {\n            result.deprecated = item.deprecated;\n            if (item.deprecated === true) {\n                tags.push(code.CompletionItemTag.Deprecated);\n            }\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        const data = applyData(item, defaultData, dataApplyKind);\n        if (data !== undefined) {\n            result.data = data;\n        }\n        if (tags.length > 0) {\n            result.tags = tags;\n        }\n        const insertTextMode = item.insertTextMode ?? defaultInsertTextMode;\n        if (insertTextMode !== undefined) {\n            result.insertTextMode = insertTextMode;\n            if (insertTextMode === ls.InsertTextMode.asIs) {\n                result.keepWhitespace = true;\n            }\n        }\n        return result;\n    }\n    function applyCommitCharacters(item, defaultCommitCharacters, applyKind) {\n        if (applyKind === ls.ApplyKind.Merge) {\n            if (!defaultCommitCharacters && !item.commitCharacters) {\n                return undefined;\n            }\n            const set = new Set();\n            if (defaultCommitCharacters) {\n                for (const char of defaultCommitCharacters) {\n                    set.add(char);\n                }\n            }\n            if (Is.stringArray(item.commitCharacters)) {\n                for (const char of item.commitCharacters) {\n                    set.add(char);\n                }\n            }\n            return Array.from(set);\n        }\n        return item.commitCharacters !== undefined\n            ? Is.stringArray(item.commitCharacters) ? item.commitCharacters : undefined\n            : defaultCommitCharacters;\n    }\n    function applyData(item, defaultData, applyKind) {\n        if (applyKind === ls.ApplyKind.Merge) {\n            const data = {\n                ...defaultData,\n            };\n            if (item.data) {\n                Object.entries(item.data).forEach(([key, value]) => {\n                    if (value !== undefined && value !== null) {\n                        data[key] = value;\n                    }\n                });\n            }\n            return data;\n        }\n        return item.data ?? defaultData;\n    }\n    function asCompletionItemLabel(item) {\n        if (ls.CompletionItemLabelDetails.is(item.labelDetails)) {\n            return {\n                label: item.label,\n                detail: item.labelDetails.detail,\n                description: item.labelDetails.description\n            };\n        }\n        else {\n            return item.label;\n        }\n    }\n    function asCompletionInsertText(item, defaultRange, defaultInsertTextFormat) {\n        const insertTextFormat = item.insertTextFormat ?? defaultInsertTextFormat;\n        if (item.textEdit !== undefined || defaultRange !== undefined) {\n            const [range, newText] = item.textEdit !== undefined\n                ? getCompletionRangeAndText(item.textEdit)\n                : [defaultRange, item.textEditText ?? item.label];\n            if (insertTextFormat === ls.InsertTextFormat.Snippet) {\n                return { text: new code.SnippetString(newText), range: range, fromEdit: true };\n            }\n            else {\n                return { text: newText, range: range, fromEdit: true };\n            }\n        }\n        else if (item.insertText) {\n            if (insertTextFormat === ls.InsertTextFormat.Snippet) {\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\n            }\n            else {\n                return { text: item.insertText, fromEdit: false };\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n    function getCompletionRangeAndText(value) {\n        if (ls.InsertReplaceEdit.is(value)) {\n            return [{ inserting: asRange(value.insert), replacing: asRange(value.replace) }, value.newText];\n        }\n        else {\n            return [asRange(value.range), value.newText];\n        }\n    }\n    function asTextEdit(edit) {\n        if (!edit) {\n            return undefined;\n        }\n        return new code.TextEdit(asRange(edit.range), edit.newText);\n    }\n    async function asTextEdits(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asTextEdit, token);\n    }\n    function asTextEditsSync(items) {\n        if (!items) {\n            return undefined;\n        }\n        const result = new Array(items.length);\n        for (let i = 0; i < items.length; i++) {\n            result[i] = asTextEdit(items[i]);\n        }\n        return result;\n    }\n    async function asSignatureHelp(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        const result = new code.SignatureHelp();\n        if (Is.number(item.activeSignature)) {\n            result.activeSignature = item.activeSignature;\n        }\n        else {\n            // activeSignature was optional in the past\n            result.activeSignature = 0;\n        }\n        if (Is.number(item.activeParameter)) {\n            result.activeParameter = item.activeParameter;\n        }\n        else if (item.activeParameter === null) {\n            result.activeParameter = -1;\n        }\n        else {\n            // activeParameter was optional in the past\n            result.activeParameter = 0;\n        }\n        if (item.signatures) {\n            result.signatures = await asSignatureInformations(item.signatures, token);\n        }\n        return result;\n    }\n    async function asSignatureInformations(items, token) {\n        return async.mapAsync(items, asSignatureInformation, token);\n    }\n    async function asSignatureInformation(item, token) {\n        const result = new code.SignatureInformation(item.label);\n        if (item.documentation !== undefined) {\n            result.documentation = asDocumentation(item.documentation);\n        }\n        if (item.parameters !== undefined) {\n            result.parameters = await asParameterInformations(item.parameters, token);\n        }\n        if (item.activeParameter !== undefined) {\n            result.activeParameter = item.activeParameter ?? -1;\n        }\n        {\n            return result;\n        }\n    }\n    function asParameterInformations(items, token) {\n        return async.map(items, asParameterInformation, token);\n    }\n    function asParameterInformation(item) {\n        const result = new code.ParameterInformation(item.label);\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n        }\n        return result;\n    }\n    function asLocation(item) {\n        return item ? new code.Location(_uriConverter(item.uri), asRange(item.range)) : undefined;\n    }\n    async function asDeclarationResult(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        return asLocationResult(item, token);\n    }\n    async function asDefinitionResult(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        return asLocationResult(item, token);\n    }\n    function asLocationLink(item) {\n        if (!item) {\n            return undefined;\n        }\n        const result = {\n            targetUri: _uriConverter(item.targetUri),\n            targetRange: asRange(item.targetRange), // See issue: https://github.com/Microsoft/vscode/issues/58649\n            originSelectionRange: asRange(item.originSelectionRange),\n            targetSelectionRange: asRange(item.targetSelectionRange)\n        };\n        if (!result.targetSelectionRange) {\n            throw new Error(`targetSelectionRange must not be undefined or null`);\n        }\n        return result;\n    }\n    async function asLocationResult(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        if (Is.array(item)) {\n            if (item.length === 0) {\n                return [];\n            }\n            else if (ls.LocationLink.is(item[0])) {\n                const links = item;\n                return async.map(links, asLocationLink, token);\n            }\n            else {\n                const locations = item;\n                return async.map(locations, asLocation, token);\n            }\n        }\n        else if (ls.LocationLink.is(item)) {\n            return [asLocationLink(item)];\n        }\n        else {\n            return asLocation(item);\n        }\n    }\n    async function asReferences(values, token) {\n        if (!values) {\n            return undefined;\n        }\n        return async.map(values, asLocation, token);\n    }\n    async function asDocumentHighlights(values, token) {\n        if (!values) {\n            return undefined;\n        }\n        return async.map(values, asDocumentHighlight, token);\n    }\n    function asDocumentHighlight(item) {\n        const result = new code.DocumentHighlight(asRange(item.range));\n        if (Is.number(item.kind)) {\n            result.kind = asDocumentHighlightKind(item.kind);\n        }\n        return result;\n    }\n    function asDocumentHighlightKind(item) {\n        switch (item) {\n            case ls.DocumentHighlightKind.Text:\n                return code.DocumentHighlightKind.Text;\n            case ls.DocumentHighlightKind.Read:\n                return code.DocumentHighlightKind.Read;\n            case ls.DocumentHighlightKind.Write:\n                return code.DocumentHighlightKind.Write;\n        }\n        return code.DocumentHighlightKind.Text;\n    }\n    async function asSymbolInformations(values, token) {\n        if (!values) {\n            return undefined;\n        }\n        return async.map(values, asSymbolInformation, token);\n    }\n    function asSymbolKind(item) {\n        if (item <= ls.SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return item - 1;\n        }\n        return code.SymbolKind.Property;\n    }\n    function asSymbolTag(value) {\n        switch (value) {\n            case ls.SymbolTag.Deprecated:\n                return code.SymbolTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asSymbolTags(items) {\n        if (items === undefined || items === null) {\n            return undefined;\n        }\n        const result = [];\n        for (const item of items) {\n            const converted = asSymbolTag(item);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length === 0 ? undefined : result;\n    }\n    function asSymbolInformation(item) {\n        const data = item.data;\n        const location = item.location;\n        const result = location.range === undefined || data !== undefined\n            ? new protocolWorkspaceSymbol_1.default(item.name, asSymbolKind(item.kind), item.containerName ?? '', location.range === undefined ? _uriConverter(location.uri) : new code.Location(_uriConverter(item.location.uri), asRange(location.range)), data)\n            : new code.SymbolInformation(item.name, asSymbolKind(item.kind), item.containerName ?? '', new code.Location(_uriConverter(item.location.uri), asRange(location.range)));\n        fillTags(result, item);\n        return result;\n    }\n    async function asDocumentSymbols(values, token) {\n        if (values === undefined || values === null) {\n            return undefined;\n        }\n        return async.map(values, asDocumentSymbol, token);\n    }\n    function asDocumentSymbol(value) {\n        const result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\n        fillTags(result, value);\n        if (value.children !== undefined && value.children.length > 0) {\n            const children = [];\n            for (const child of value.children) {\n                children.push(asDocumentSymbol(child));\n            }\n            result.children = children;\n        }\n        return result;\n    }\n    function fillTags(result, value) {\n        result.tags = asSymbolTags(value.tags);\n        if (value.deprecated) {\n            if (!result.tags) {\n                result.tags = [code.SymbolTag.Deprecated];\n            }\n            else {\n                if (!result.tags.includes(code.SymbolTag.Deprecated)) {\n                    result.tags = result.tags.concat(code.SymbolTag.Deprecated);\n                }\n            }\n        }\n    }\n    function asCommand(item) {\n        const result = { title: item.title, command: item.command };\n        if (item.tooltip) {\n            result.tooltip = item.tooltip;\n        }\n        if (item.arguments) {\n            result.arguments = item.arguments;\n        }\n        return result;\n    }\n    async function asCommands(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asCommand, token);\n    }\n    const kindMapping = new Map();\n    kindMapping.set(ls.CodeActionKind.Empty, code.CodeActionKind.Empty);\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\n    function asCodeActionKind(item) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        let result = kindMapping.get(item);\n        if (result) {\n            return result;\n        }\n        const parts = item.split('.');\n        result = code.CodeActionKind.Empty;\n        for (const part of parts) {\n            result = result.append(part);\n        }\n        return result;\n    }\n    function asCodeActionKinds(items) {\n        if (items === undefined || items === null) {\n            return undefined;\n        }\n        return items.map(kind => asCodeActionKind(kind));\n    }\n    function asCodeActionDocumentations(items) {\n        if (items === undefined || items === null) {\n            return undefined;\n        }\n        return items.map(doc => ({ kind: asCodeActionKind(doc.kind), command: asCommand(doc.command) }));\n    }\n    async function asCodeAction(item, token) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        const result = new protocolCodeAction_1.default(item.title, item.data);\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics !== undefined) {\n            result.diagnostics = asDiagnosticsSync(item.diagnostics);\n        }\n        if (item.edit !== undefined) {\n            result.edit = await asWorkspaceEdit(item.edit, token);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        if (item.disabled !== undefined) {\n            result.disabled = { reason: item.disabled.reason };\n        }\n        if (item.tags?.includes(ls.CodeActionTag.LLMGenerated)) {\n            result.isAI = true;\n        }\n        return result;\n    }\n    function asCodeActionResult(items, token) {\n        return async.mapAsync(items, async (item) => {\n            if (ls.Command.is(item)) {\n                return asCommand(item);\n            }\n            else {\n                return asCodeAction(item, token);\n            }\n        }, token);\n    }\n    function asCodeLens(item) {\n        if (!item) {\n            return undefined;\n        }\n        const result = new protocolCodeLens_1.default(asRange(item.range));\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.data !== undefined && item.data !== null) {\n            result.data = item.data;\n        }\n        return result;\n    }\n    async function asCodeLenses(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asCodeLens, token);\n    }\n    async function asWorkspaceEdit(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        const sharedMetadata = new Map();\n        if (item.changeAnnotations !== undefined) {\n            const changeAnnotations = item.changeAnnotations;\n            await async.forEach(Object.keys(changeAnnotations), (key) => {\n                const metaData = asWorkspaceEditEntryMetadata(changeAnnotations[key]);\n                sharedMetadata.set(key, metaData);\n            }, token);\n        }\n        const asMetadata = (annotation) => {\n            if (annotation === undefined) {\n                return undefined;\n            }\n            else {\n                return sharedMetadata.get(annotation);\n            }\n        };\n        const result = new code.WorkspaceEdit();\n        if (item.documentChanges) {\n            const documentChanges = item.documentChanges;\n            await async.forEach(documentChanges, (change) => {\n                if (ls.CreateFile.is(change)) {\n                    result.createFile(_uriConverter(change.uri), change.options, asMetadata(change.annotationId));\n                }\n                else if (ls.RenameFile.is(change)) {\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options, asMetadata(change.annotationId));\n                }\n                else if (ls.DeleteFile.is(change)) {\n                    result.deleteFile(_uriConverter(change.uri), change.options, asMetadata(change.annotationId));\n                }\n                else if (ls.TextDocumentEdit.is(change)) {\n                    const uri = _uriConverter(change.textDocument.uri);\n                    const edits = [];\n                    for (const edit of change.edits) {\n                        if (ls.AnnotatedTextEdit.is(edit)) {\n                            edits.push([new code.TextEdit(asRange(edit.range), edit.newText), asMetadata(edit.annotationId)]);\n                        }\n                        else if (ls.SnippetTextEdit.is(edit)) {\n                            edits.push([new code.SnippetTextEdit(asRange(edit.range), new code.SnippetString(edit.snippet.value)), asMetadata(edit.annotationId)]);\n                        }\n                        else {\n                            edits.push([new code.TextEdit(asRange(edit.range), edit.newText), undefined]);\n                        }\n                    }\n                    result.set(uri, edits);\n                }\n                else {\n                    throw new Error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\n                }\n            }, token);\n        }\n        else if (item.changes) {\n            const changes = item.changes;\n            await async.forEach(Object.keys(changes), (key) => {\n                result.set(_uriConverter(key), asTextEditsSync(changes[key]));\n            }, token);\n        }\n        return result;\n    }\n    function asWorkspaceEditEntryMetadata(annotation) {\n        if (annotation === undefined) {\n            return undefined;\n        }\n        return { label: annotation.label, needsConfirmation: !!annotation.needsConfirmation, description: annotation.description };\n    }\n    function asDocumentLink(item) {\n        const range = asRange(item.range);\n        const target = item.target ? asUri(item.target) : undefined;\n        // target must be optional in DocumentLink\n        const link = new protocolDocumentLink_1.default(range, target);\n        if (item.tooltip !== undefined) {\n            link.tooltip = item.tooltip;\n        }\n        if (item.data !== undefined && item.data !== null) {\n            link.data = item.data;\n        }\n        return link;\n    }\n    async function asDocumentLinks(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asDocumentLink, token);\n    }\n    function asColor(color) {\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\n    }\n    function asColorInformation(ci) {\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\n    }\n    async function asColorInformations(colorInformation, token) {\n        if (!colorInformation) {\n            return undefined;\n        }\n        return async.map(colorInformation, asColorInformation, token);\n    }\n    function asColorPresentation(cp) {\n        const presentation = new code.ColorPresentation(cp.label);\n        presentation.additionalTextEdits = asTextEditsSync(cp.additionalTextEdits);\n        if (cp.textEdit) {\n            presentation.textEdit = asTextEdit(cp.textEdit);\n        }\n        return presentation;\n    }\n    async function asColorPresentations(colorPresentations, token) {\n        if (!colorPresentations) {\n            return undefined;\n        }\n        return async.map(colorPresentations, asColorPresentation, token);\n    }\n    function asFoldingRangeKind(kind) {\n        if (kind) {\n            switch (kind) {\n                case ls.FoldingRangeKind.Comment:\n                    return code.FoldingRangeKind.Comment;\n                case ls.FoldingRangeKind.Imports:\n                    return code.FoldingRangeKind.Imports;\n                case ls.FoldingRangeKind.Region:\n                    return code.FoldingRangeKind.Region;\n            }\n        }\n        return undefined;\n    }\n    function asFoldingRange(r) {\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\n    }\n    async function asFoldingRanges(foldingRanges, token) {\n        if (!foldingRanges) {\n            return undefined;\n        }\n        return async.map(foldingRanges, asFoldingRange, token);\n    }\n    function asSelectionRange(selectionRange) {\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\n    }\n    async function asSelectionRanges(selectionRanges, token) {\n        if (!Array.isArray(selectionRanges)) {\n            return [];\n        }\n        return async.map(selectionRanges, asSelectionRange, token);\n    }\n    function asInlineValue(inlineValue) {\n        if (ls.InlineValueText.is(inlineValue)) {\n            return new code.InlineValueText(asRange(inlineValue.range), inlineValue.text);\n        }\n        else if (ls.InlineValueVariableLookup.is(inlineValue)) {\n            return new code.InlineValueVariableLookup(asRange(inlineValue.range), inlineValue.variableName, inlineValue.caseSensitiveLookup);\n        }\n        else {\n            return new code.InlineValueEvaluatableExpression(asRange(inlineValue.range), inlineValue.expression);\n        }\n    }\n    async function asInlineValues(inlineValues, token) {\n        if (!Array.isArray(inlineValues)) {\n            return [];\n        }\n        return async.map(inlineValues, asInlineValue, token);\n    }\n    async function asInlayHint(value, token) {\n        const label = typeof value.label === 'string'\n            ? value.label\n            : await async.map(value.label, asInlayHintLabelPart, token);\n        const result = new protocolInlayHint_1.default(asPosition(value.position), label);\n        if (value.kind !== undefined) {\n            result.kind = value.kind;\n        }\n        if (value.textEdits !== undefined) {\n            result.textEdits = await asTextEdits(value.textEdits, token);\n        }\n        if (value.tooltip !== undefined) {\n            result.tooltip = asTooltip(value.tooltip);\n        }\n        if (value.paddingLeft !== undefined) {\n            result.paddingLeft = value.paddingLeft;\n        }\n        if (value.paddingRight !== undefined) {\n            result.paddingRight = value.paddingRight;\n        }\n        if (value.data !== undefined) {\n            result.data = value.data;\n        }\n        return result;\n    }\n    function asInlayHintLabelPart(part) {\n        const result = new code.InlayHintLabelPart(part.value);\n        if (part.location !== undefined) {\n            result.location = asLocation(part.location);\n        }\n        if (part.tooltip !== undefined) {\n            result.tooltip = asTooltip(part.tooltip);\n        }\n        if (part.command !== undefined) {\n            result.command = asCommand(part.command);\n        }\n        return result;\n    }\n    function asTooltip(value) {\n        if (typeof value === 'string') {\n            return value;\n        }\n        return asMarkdownString(value);\n    }\n    async function asInlayHints(values, token) {\n        if (!Array.isArray(values)) {\n            return undefined;\n        }\n        return async.mapAsync(values, asInlayHint, token);\n    }\n    function asCallHierarchyItem(item) {\n        if (item === null) {\n            return undefined;\n        }\n        const result = new protocolCallHierarchyItem_1.default(asSymbolKind(item.kind), item.name, item.detail || '', asUri(item.uri), asRange(item.range), asRange(item.selectionRange), item.data);\n        if (item.tags !== undefined) {\n            result.tags = asSymbolTags(item.tags);\n        }\n        return result;\n    }\n    async function asCallHierarchyItems(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.map(items, asCallHierarchyItem, token);\n    }\n    async function asCallHierarchyIncomingCall(item, token) {\n        return new code.CallHierarchyIncomingCall(asCallHierarchyItem(item.from), await asRanges(item.fromRanges, token));\n    }\n    async function asCallHierarchyIncomingCalls(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.mapAsync(items, asCallHierarchyIncomingCall, token);\n    }\n    async function asCallHierarchyOutgoingCall(item, token) {\n        return new code.CallHierarchyOutgoingCall(asCallHierarchyItem(item.to), await asRanges(item.fromRanges, token));\n    }\n    async function asCallHierarchyOutgoingCalls(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.mapAsync(items, asCallHierarchyOutgoingCall, token);\n    }\n    async function asSemanticTokens(value, _token) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        return new code.SemanticTokens(new Uint32Array(value.data), value.resultId);\n    }\n    function asSemanticTokensEdit(value) {\n        return new code.SemanticTokensEdit(value.start, value.deleteCount, value.data !== undefined ? new Uint32Array(value.data) : undefined);\n    }\n    async function asSemanticTokensEdits(value, _token) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        return new code.SemanticTokensEdits(value.edits.map(asSemanticTokensEdit), value.resultId);\n    }\n    function asSemanticTokensLegend(value) {\n        return value;\n    }\n    async function asLinkedEditingRanges(value, token) {\n        if (value === null || value === undefined) {\n            return undefined;\n        }\n        return new code.LinkedEditingRanges(await asRanges(value.ranges, token), asRegularExpression(value.wordPattern));\n    }\n    function asRegularExpression(value) {\n        if (value === null || value === undefined) {\n            return undefined;\n        }\n        return new RegExp(value);\n    }\n    function asTypeHierarchyItem(item) {\n        if (item === null) {\n            return undefined;\n        }\n        const result = new protocolTypeHierarchyItem_1.default(asSymbolKind(item.kind), item.name, item.detail || '', asUri(item.uri), asRange(item.range), asRange(item.selectionRange), item.data);\n        if (item.tags !== undefined) {\n            result.tags = asSymbolTags(item.tags);\n        }\n        return result;\n    }\n    async function asTypeHierarchyItems(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.map(items, asTypeHierarchyItem, token);\n    }\n    function asGlobPattern(pattern) {\n        if (Is.string(pattern)) {\n            return pattern;\n        }\n        if (ls.RelativePattern.is(pattern)) {\n            if (ls.URI.is(pattern.baseUri)) {\n                return new code.RelativePattern(asUri(pattern.baseUri), pattern.pattern);\n            }\n            else if (ls.WorkspaceFolder.is(pattern.baseUri)) {\n                const workspaceFolder = code.workspace.getWorkspaceFolder(asUri(pattern.baseUri.uri));\n                return workspaceFolder !== undefined ? new code.RelativePattern(workspaceFolder, pattern.pattern) : undefined;\n            }\n        }\n        return undefined;\n    }\n    async function asInlineCompletionResult(value, token) {\n        if (!value) {\n            return undefined;\n        }\n        if (Array.isArray(value)) {\n            return async.map(value, (item) => asInlineCompletionItem(item), token);\n        }\n        const list = value;\n        const converted = await async.map(list.items, (item) => {\n            return asInlineCompletionItem(item);\n        }, token);\n        return new code.InlineCompletionList(converted);\n    }\n    function asInlineCompletionItem(item) {\n        let insertText;\n        if (typeof item.insertText === 'string') {\n            insertText = item.insertText;\n        }\n        else {\n            insertText = new code.SnippetString(item.insertText.value);\n        }\n        let command = undefined;\n        if (item.command) {\n            command = asCommand(item.command);\n        }\n        const inlineCompletionItem = new code.InlineCompletionItem(insertText, asRange(item.range), command);\n        if (item.filterText) {\n            inlineCompletionItem.filterText = item.filterText;\n        }\n        return inlineCompletionItem;\n    }\n    return {\n        asUri,\n        asDocumentSelector,\n        asDiagnostics,\n        asDiagnostic,\n        asRange,\n        asRanges,\n        asPosition,\n        asDiagnosticSeverity,\n        asDiagnosticTag,\n        asHover,\n        asCompletionResult,\n        asCompletionItem,\n        asTextEdit,\n        asTextEdits,\n        asSignatureHelp,\n        asSignatureInformations,\n        asSignatureInformation,\n        asParameterInformations,\n        asParameterInformation,\n        asDeclarationResult,\n        asDefinitionResult,\n        asLocation,\n        asReferences,\n        asDocumentHighlights,\n        asDocumentHighlight,\n        asDocumentHighlightKind,\n        asSymbolKind,\n        asSymbolTag,\n        asSymbolTags,\n        asSymbolInformations,\n        asSymbolInformation,\n        asDocumentSymbols,\n        asDocumentSymbol,\n        asCommand,\n        asCommands,\n        asCodeAction,\n        asCodeActionKind,\n        asCodeActionKinds,\n        asCodeActionDocumentations,\n        asCodeActionResult,\n        asCodeLens,\n        asCodeLenses,\n        asWorkspaceEdit,\n        asDocumentLink,\n        asDocumentLinks,\n        asFoldingRangeKind,\n        asFoldingRange,\n        asFoldingRanges,\n        asColor,\n        asColorInformation,\n        asColorInformations,\n        asColorPresentation,\n        asColorPresentations,\n        asSelectionRange,\n        asSelectionRanges,\n        asInlineValue,\n        asInlineValues,\n        asInlayHint,\n        asInlayHints,\n        asSemanticTokensLegend,\n        asSemanticTokens,\n        asSemanticTokensEdit,\n        asSemanticTokensEdits,\n        asCallHierarchyItem,\n        asCallHierarchyItems,\n        asCallHierarchyIncomingCall,\n        asCallHierarchyIncomingCalls,\n        asCallHierarchyOutgoingCall,\n        asCallHierarchyOutgoingCalls,\n        asLinkedEditingRanges: asLinkedEditingRanges,\n        asTypeHierarchyItem,\n        asTypeHierarchyItems,\n        asGlobPattern,\n        asInlineCompletionResult,\n        asInlineCompletionItem\n    };\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SignatureHelpFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass SignatureHelpFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const config = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'signatureHelp');\n        config.dynamicRegistration = true;\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\n        config.signatureInformation.activeParameterSupport = true;\n        config.signatureInformation.noActiveParameterSupport = true;\n        config.contextSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.signatureHelpProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideSignatureHelp: (document, position, token, context) => {\n                const client = this._client;\n                const providerSignatureHelp = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asSignatureHelpParams(document, position, context), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asSignatureHelp(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideSignatureHelp\n                    ? middleware.provideSignatureHelp(document, position, context, token, providerSignatureHelp)\n                    : providerSignatureHelp(document, position, context, token);\n            }\n        };\n        return [this.registerProvider(options, provider), provider];\n    }\n    registerProvider(options, provider) {\n        const selector = this._client.protocol2CodeConverter.asDocumentSelector(options.documentSelector);\n        if (options.retriggerCharacters === undefined) {\n            const triggerCharacters = options.triggerCharacters || [];\n            return vscode_1.languages.registerSignatureHelpProvider(selector, provider, ...triggerCharacters);\n        }\n        else {\n            const metaData = {\n                triggerCharacters: options.triggerCharacters || [],\n                retriggerCharacters: options.retriggerCharacters || []\n            };\n            return vscode_1.languages.registerSignatureHelpProvider(selector, provider, metaData);\n        }\n    }\n}\nexports.SignatureHelpFeature = SignatureHelpFeature;\n","\"use strict\";\n// parse a single path portion\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AST = void 0;\nconst brace_expressions_js_1 = require(\"./brace-expressions.js\");\nconst unescape_js_1 = require(\"./unescape.js\");\nconst types = new Set(['!', '?', '+', '*', '@']);\nconst isExtglobType = (c) => types.has(c);\n// Patterns that get prepended to bind to the start of either the\n// entire string, or just a single path portion, to prevent dots\n// and/or traversal patterns, when needed.\n// Exts don't need the ^ or / bit, because the root binds that already.\nconst startNoTraversal = '(?!(?:^|/)\\\\.\\\\.?(?:$|/))';\nconst startNoDot = '(?!\\\\.)';\n// characters that indicate a start of pattern needs the \"no dots\" bit,\n// because a dot *might* be matched. ( is not in the list, because in\n// the case of a child extglob, it will handle the prevention itself.\nconst addPatternStart = new Set(['[', '.']);\n// cases where traversal is A-OK, no dot prevention needed\nconst justDots = new Set(['..', '.']);\nconst reSpecials = new Set('().*{}+?[]^$\\\\!');\nconst regExpEscape = (s) => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n// any single thing other than /\nconst qmark = '[^/]';\n// * => any number of characters\nconst star = qmark + '*?';\n// use + when we need to ensure that *something* matches, because the * is\n// the only thing in the path portion.\nconst starNoEmpty = qmark + '+?';\n// remove the \\ chars that we added if we end up doing a nonmagic compare\n// const deslash = (s: string) => s.replace(/\\\\(.)/g, '$1')\nclass AST {\n    type;\n    #root;\n    #hasMagic;\n    #uflag = false;\n    #parts = [];\n    #parent;\n    #parentIndex;\n    #negs;\n    #filledNegs = false;\n    #options;\n    #toString;\n    // set to true if it's an extglob with no children\n    // (which really means one child of '')\n    #emptyExt = false;\n    constructor(type, parent, options = {}) {\n        this.type = type;\n        // extglobs are inherently magical\n        if (type)\n            this.#hasMagic = true;\n        this.#parent = parent;\n        this.#root = this.#parent ? this.#parent.#root : this;\n        this.#options = this.#root === this ? options : this.#root.#options;\n        this.#negs = this.#root === this ? [] : this.#root.#negs;\n        if (type === '!' && !this.#root.#filledNegs)\n            this.#negs.push(this);\n        this.#parentIndex = this.#parent ? this.#parent.#parts.length : 0;\n    }\n    get hasMagic() {\n        /* c8 ignore start */\n        if (this.#hasMagic !== undefined)\n            return this.#hasMagic;\n        /* c8 ignore stop */\n        for (const p of this.#parts) {\n            if (typeof p === 'string')\n                continue;\n            if (p.type || p.hasMagic)\n                return (this.#hasMagic = true);\n        }\n        // note: will be undefined until we generate the regexp src and find out\n        return this.#hasMagic;\n    }\n    // reconstructs the pattern\n    toString() {\n        if (this.#toString !== undefined)\n            return this.#toString;\n        if (!this.type) {\n            return (this.#toString = this.#parts.map(p => String(p)).join(''));\n        }\n        else {\n            return (this.#toString =\n                this.type + '(' + this.#parts.map(p => String(p)).join('|') + ')');\n        }\n    }\n    #fillNegs() {\n        /* c8 ignore start */\n        if (this !== this.#root)\n            throw new Error('should only call on root');\n        if (this.#filledNegs)\n            return this;\n        /* c8 ignore stop */\n        // call toString() once to fill this out\n        this.toString();\n        this.#filledNegs = true;\n        let n;\n        while ((n = this.#negs.pop())) {\n            if (n.type !== '!')\n                continue;\n            // walk up the tree, appending everthing that comes AFTER parentIndex\n            let p = n;\n            let pp = p.#parent;\n            while (pp) {\n                for (let i = p.#parentIndex + 1; !pp.type && i < pp.#parts.length; i++) {\n                    for (const part of n.#parts) {\n                        /* c8 ignore start */\n                        if (typeof part === 'string') {\n                            throw new Error('string part in extglob AST??');\n                        }\n                        /* c8 ignore stop */\n                        part.copyIn(pp.#parts[i]);\n                    }\n                }\n                p = pp;\n                pp = p.#parent;\n            }\n        }\n        return this;\n    }\n    push(...parts) {\n        for (const p of parts) {\n            if (p === '')\n                continue;\n            /* c8 ignore start */\n            if (typeof p !== 'string' && !(p instanceof AST && p.#parent === this)) {\n                throw new Error('invalid part: ' + p);\n            }\n            /* c8 ignore stop */\n            this.#parts.push(p);\n        }\n    }\n    toJSON() {\n        const ret = this.type === null\n            ? this.#parts.slice().map(p => (typeof p === 'string' ? p : p.toJSON()))\n            : [this.type, ...this.#parts.map(p => p.toJSON())];\n        if (this.isStart() && !this.type)\n            ret.unshift([]);\n        if (this.isEnd() &&\n            (this === this.#root ||\n                (this.#root.#filledNegs && this.#parent?.type === '!'))) {\n            ret.push({});\n        }\n        return ret;\n    }\n    isStart() {\n        if (this.#root === this)\n            return true;\n        // if (this.type) return !!this.#parent?.isStart()\n        if (!this.#parent?.isStart())\n            return false;\n        if (this.#parentIndex === 0)\n            return true;\n        // if everything AHEAD of this is a negation, then it's still the \"start\"\n        const p = this.#parent;\n        for (let i = 0; i < this.#parentIndex; i++) {\n            const pp = p.#parts[i];\n            if (!(pp instanceof AST && pp.type === '!')) {\n                return false;\n            }\n        }\n        return true;\n    }\n    isEnd() {\n        if (this.#root === this)\n            return true;\n        if (this.#parent?.type === '!')\n            return true;\n        if (!this.#parent?.isEnd())\n            return false;\n        if (!this.type)\n            return this.#parent?.isEnd();\n        // if not root, it'll always have a parent\n        /* c8 ignore start */\n        const pl = this.#parent ? this.#parent.#parts.length : 0;\n        /* c8 ignore stop */\n        return this.#parentIndex === pl - 1;\n    }\n    copyIn(part) {\n        if (typeof part === 'string')\n            this.push(part);\n        else\n            this.push(part.clone(this));\n    }\n    clone(parent) {\n        const c = new AST(this.type, parent);\n        for (const p of this.#parts) {\n            c.copyIn(p);\n        }\n        return c;\n    }\n    static #parseAST(str, ast, pos, opt) {\n        let escaping = false;\n        let inBrace = false;\n        let braceStart = -1;\n        let braceNeg = false;\n        if (ast.type === null) {\n            // outside of a extglob, append until we find a start\n            let i = pos;\n            let acc = '';\n            while (i < str.length) {\n                const c = str.charAt(i++);\n                // still accumulate escapes at this point, but we do ignore\n                // starts that are escaped\n                if (escaping || c === '\\\\') {\n                    escaping = !escaping;\n                    acc += c;\n                    continue;\n                }\n                if (inBrace) {\n                    if (i === braceStart + 1) {\n                        if (c === '^' || c === '!') {\n                            braceNeg = true;\n                        }\n                    }\n                    else if (c === ']' && !(i === braceStart + 2 && braceNeg)) {\n                        inBrace = false;\n                    }\n                    acc += c;\n                    continue;\n                }\n                else if (c === '[') {\n                    inBrace = true;\n                    braceStart = i;\n                    braceNeg = false;\n                    acc += c;\n                    continue;\n                }\n                if (!opt.noext && isExtglobType(c) && str.charAt(i) === '(') {\n                    ast.push(acc);\n                    acc = '';\n                    const ext = new AST(c, ast);\n                    i = AST.#parseAST(str, ext, i, opt);\n                    ast.push(ext);\n                    continue;\n                }\n                acc += c;\n            }\n            ast.push(acc);\n            return i;\n        }\n        // some kind of extglob, pos is at the (\n        // find the next | or )\n        let i = pos + 1;\n        let part = new AST(null, ast);\n        const parts = [];\n        let acc = '';\n        while (i < str.length) {\n            const c = str.charAt(i++);\n            // still accumulate escapes at this point, but we do ignore\n            // starts that are escaped\n            if (escaping || c === '\\\\') {\n                escaping = !escaping;\n                acc += c;\n                continue;\n            }\n            if (inBrace) {\n                if (i === braceStart + 1) {\n                    if (c === '^' || c === '!') {\n                        braceNeg = true;\n                    }\n                }\n                else if (c === ']' && !(i === braceStart + 2 && braceNeg)) {\n                    inBrace = false;\n                }\n                acc += c;\n                continue;\n            }\n            else if (c === '[') {\n                inBrace = true;\n                braceStart = i;\n                braceNeg = false;\n                acc += c;\n                continue;\n            }\n            if (isExtglobType(c) && str.charAt(i) === '(') {\n                part.push(acc);\n                acc = '';\n                const ext = new AST(c, part);\n                part.push(ext);\n                i = AST.#parseAST(str, ext, i, opt);\n                continue;\n            }\n            if (c === '|') {\n                part.push(acc);\n                acc = '';\n                parts.push(part);\n                part = new AST(null, ast);\n                continue;\n            }\n            if (c === ')') {\n                if (acc === '' && ast.#parts.length === 0) {\n                    ast.#emptyExt = true;\n                }\n                part.push(acc);\n                acc = '';\n                ast.push(...parts, part);\n                return i;\n            }\n            acc += c;\n        }\n        // unfinished extglob\n        // if we got here, it was a malformed extglob! not an extglob, but\n        // maybe something else in there.\n        ast.type = null;\n        ast.#hasMagic = undefined;\n        ast.#parts = [str.substring(pos - 1)];\n        return i;\n    }\n    static fromGlob(pattern, options = {}) {\n        const ast = new AST(null, undefined, options);\n        AST.#parseAST(pattern, ast, 0, options);\n        return ast;\n    }\n    // returns the regular expression if there's magic, or the unescaped\n    // string if not.\n    toMMPattern() {\n        // should only be called on root\n        /* c8 ignore start */\n        if (this !== this.#root)\n            return this.#root.toMMPattern();\n        /* c8 ignore stop */\n        const glob = this.toString();\n        const [re, body, hasMagic, uflag] = this.toRegExpSource();\n        // if we're in nocase mode, and not nocaseMagicOnly, then we do\n        // still need a regular expression if we have to case-insensitively\n        // match capital/lowercase characters.\n        const anyMagic = hasMagic ||\n            this.#hasMagic ||\n            (this.#options.nocase &&\n                !this.#options.nocaseMagicOnly &&\n                glob.toUpperCase() !== glob.toLowerCase());\n        if (!anyMagic) {\n            return body;\n        }\n        const flags = (this.#options.nocase ? 'i' : '') + (uflag ? 'u' : '');\n        return Object.assign(new RegExp(`^${re}$`, flags), {\n            _src: re,\n            _glob: glob,\n        });\n    }\n    get options() {\n        return this.#options;\n    }\n    // returns the string match, the regexp source, whether there's magic\n    // in the regexp (so a regular expression is required) and whether or\n    // not the uflag is needed for the regular expression (for posix classes)\n    // TODO: instead of injecting the start/end at this point, just return\n    // the BODY of the regexp, along with the start/end portions suitable\n    // for binding the start/end in either a joined full-path makeRe context\n    // (where we bind to (^|/), or a standalone matchPart context (where\n    // we bind to ^, and not /).  Otherwise slashes get duped!\n    //\n    // In part-matching mode, the start is:\n    // - if not isStart: nothing\n    // - if traversal possible, but not allowed: ^(?!\\.\\.?$)\n    // - if dots allowed or not possible: ^\n    // - if dots possible and not allowed: ^(?!\\.)\n    // end is:\n    // - if not isEnd(): nothing\n    // - else: $\n    //\n    // In full-path matching mode, we put the slash at the START of the\n    // pattern, so start is:\n    // - if first pattern: same as part-matching mode\n    // - if not isStart(): nothing\n    // - if traversal possible, but not allowed: /(?!\\.\\.?(?:$|/))\n    // - if dots allowed or not possible: /\n    // - if dots possible and not allowed: /(?!\\.)\n    // end is:\n    // - if last pattern, same as part-matching mode\n    // - else nothing\n    //\n    // Always put the (?:$|/) on negated tails, though, because that has to be\n    // there to bind the end of the negated pattern portion, and it's easier to\n    // just stick it in now rather than try to inject it later in the middle of\n    // the pattern.\n    //\n    // We can just always return the same end, and leave it up to the caller\n    // to know whether it's going to be used joined or in parts.\n    // And, if the start is adjusted slightly, can do the same there:\n    // - if not isStart: nothing\n    // - if traversal possible, but not allowed: (?:/|^)(?!\\.\\.?$)\n    // - if dots allowed or not possible: (?:/|^)\n    // - if dots possible and not allowed: (?:/|^)(?!\\.)\n    //\n    // But it's better to have a simpler binding without a conditional, for\n    // performance, so probably better to return both start options.\n    //\n    // Then the caller just ignores the end if it's not the first pattern,\n    // and the start always gets applied.\n    //\n    // But that's always going to be $ if it's the ending pattern, or nothing,\n    // so the caller can just attach $ at the end of the pattern when building.\n    //\n    // So the todo is:\n    // - better detect what kind of start is needed\n    // - return both flavors of starting pattern\n    // - attach $ at the end of the pattern when creating the actual RegExp\n    //\n    // Ah, but wait, no, that all only applies to the root when the first pattern\n    // is not an extglob. If the first pattern IS an extglob, then we need all\n    // that dot prevention biz to live in the extglob portions, because eg\n    // +(*|.x*) can match .xy but not .yx.\n    //\n    // So, return the two flavors if it's #root and the first child is not an\n    // AST, otherwise leave it to the child AST to handle it, and there,\n    // use the (?:^|/) style of start binding.\n    //\n    // Even simplified further:\n    // - Since the start for a join is eg /(?!\\.) and the start for a part\n    // is ^(?!\\.), we can just prepend (?!\\.) to the pattern (either root\n    // or start or whatever) and prepend ^ or / at the Regexp construction.\n    toRegExpSource(allowDot) {\n        const dot = allowDot ?? !!this.#options.dot;\n        if (this.#root === this)\n            this.#fillNegs();\n        if (!this.type) {\n            const noEmpty = this.isStart() && this.isEnd();\n            const src = this.#parts\n                .map(p => {\n                const [re, _, hasMagic, uflag] = typeof p === 'string'\n                    ? AST.#parseGlob(p, this.#hasMagic, noEmpty)\n                    : p.toRegExpSource(allowDot);\n                this.#hasMagic = this.#hasMagic || hasMagic;\n                this.#uflag = this.#uflag || uflag;\n                return re;\n            })\n                .join('');\n            let start = '';\n            if (this.isStart()) {\n                if (typeof this.#parts[0] === 'string') {\n                    // this is the string that will match the start of the pattern,\n                    // so we need to protect against dots and such.\n                    // '.' and '..' cannot match unless the pattern is that exactly,\n                    // even if it starts with . or dot:true is set.\n                    const dotTravAllowed = this.#parts.length === 1 && justDots.has(this.#parts[0]);\n                    if (!dotTravAllowed) {\n                        const aps = addPatternStart;\n                        // check if we have a possibility of matching . or ..,\n                        // and prevent that.\n                        const needNoTrav = \n                        // dots are allowed, and the pattern starts with [ or .\n                        (dot && aps.has(src.charAt(0))) ||\n                            // the pattern starts with \\., and then [ or .\n                            (src.startsWith('\\\\.') && aps.has(src.charAt(2))) ||\n                            // the pattern starts with \\.\\., and then [ or .\n                            (src.startsWith('\\\\.\\\\.') && aps.has(src.charAt(4)));\n                        // no need to prevent dots if it can't match a dot, or if a\n                        // sub-pattern will be preventing it anyway.\n                        const needNoDot = !dot && !allowDot && aps.has(src.charAt(0));\n                        start = needNoTrav ? startNoTraversal : needNoDot ? startNoDot : '';\n                    }\n                }\n            }\n            // append the \"end of path portion\" pattern to negation tails\n            let end = '';\n            if (this.isEnd() &&\n                this.#root.#filledNegs &&\n                this.#parent?.type === '!') {\n                end = '(?:$|\\\\/)';\n            }\n            const final = start + src + end;\n            return [\n                final,\n                (0, unescape_js_1.unescape)(src),\n                (this.#hasMagic = !!this.#hasMagic),\n                this.#uflag,\n            ];\n        }\n        // We need to calculate the body *twice* if it's a repeat pattern\n        // at the start, once in nodot mode, then again in dot mode, so a\n        // pattern like *(?) can match 'x.y'\n        const repeated = this.type === '*' || this.type === '+';\n        // some kind of extglob\n        const start = this.type === '!' ? '(?:(?!(?:' : '(?:';\n        let body = this.#partsToRegExp(dot);\n        if (this.isStart() && this.isEnd() && !body && this.type !== '!') {\n            // invalid extglob, has to at least be *something* present, if it's\n            // the entire path portion.\n            const s = this.toString();\n            this.#parts = [s];\n            this.type = null;\n            this.#hasMagic = undefined;\n            return [s, (0, unescape_js_1.unescape)(this.toString()), false, false];\n        }\n        // XXX abstract out this map method\n        let bodyDotAllowed = !repeated || allowDot || dot || !startNoDot\n            ? ''\n            : this.#partsToRegExp(true);\n        if (bodyDotAllowed === body) {\n            bodyDotAllowed = '';\n        }\n        if (bodyDotAllowed) {\n            body = `(?:${body})(?:${bodyDotAllowed})*?`;\n        }\n        // an empty !() is exactly equivalent to a starNoEmpty\n        let final = '';\n        if (this.type === '!' && this.#emptyExt) {\n            final = (this.isStart() && !dot ? startNoDot : '') + starNoEmpty;\n        }\n        else {\n            const close = this.type === '!'\n                ? // !() must match something,but !(x) can match ''\n                    '))' +\n                        (this.isStart() && !dot && !allowDot ? startNoDot : '') +\n                        star +\n                        ')'\n                : this.type === '@'\n                    ? ')'\n                    : this.type === '?'\n                        ? ')?'\n                        : this.type === '+' && bodyDotAllowed\n                            ? ')'\n                            : this.type === '*' && bodyDotAllowed\n                                ? `)?`\n                                : `)${this.type}`;\n            final = start + body + close;\n        }\n        return [\n            final,\n            (0, unescape_js_1.unescape)(body),\n            (this.#hasMagic = !!this.#hasMagic),\n            this.#uflag,\n        ];\n    }\n    #partsToRegExp(dot) {\n        return this.#parts\n            .map(p => {\n            // extglob ASTs should only contain parent ASTs\n            /* c8 ignore start */\n            if (typeof p === 'string') {\n                throw new Error('string type in extglob ast??');\n            }\n            /* c8 ignore stop */\n            // can ignore hasMagic, because extglobs are already always magic\n            const [re, _, _hasMagic, uflag] = p.toRegExpSource(dot);\n            this.#uflag = this.#uflag || uflag;\n            return re;\n        })\n            .filter(p => !(this.isStart() && this.isEnd()) || !!p)\n            .join('|');\n    }\n    static #parseGlob(glob, hasMagic, noEmpty = false) {\n        let escaping = false;\n        let re = '';\n        let uflag = false;\n        for (let i = 0; i < glob.length; i++) {\n            const c = glob.charAt(i);\n            if (escaping) {\n                escaping = false;\n                re += (reSpecials.has(c) ? '\\\\' : '') + c;\n                continue;\n            }\n            if (c === '\\\\') {\n                if (i === glob.length - 1) {\n                    re += '\\\\\\\\';\n                }\n                else {\n                    escaping = true;\n                }\n                continue;\n            }\n            if (c === '[') {\n                const [src, needUflag, consumed, magic] = (0, brace_expressions_js_1.parseClass)(glob, i);\n                if (consumed) {\n                    re += src;\n                    uflag = uflag || needUflag;\n                    i += consumed - 1;\n                    hasMagic = hasMagic || magic;\n                    continue;\n                }\n            }\n            if (c === '*') {\n                if (noEmpty && glob === '*')\n                    re += starNoEmpty;\n                else\n                    re += star;\n                hasMagic = true;\n                continue;\n            }\n            if (c === '?') {\n                re += qmark;\n                hasMagic = true;\n                continue;\n            }\n            re += regExpEscape(c);\n        }\n        return [re, (0, unescape_js_1.unescape)(glob), !!hasMagic, uflag];\n    }\n}\nexports.AST = AST;\n//# sourceMappingURL=ast.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WillDeleteFilesFeature = exports.WillRenameFilesFeature = exports.WillCreateFilesFeature = exports.DidDeleteFilesFeature = exports.DidRenameFilesFeature = exports.DidCreateFilesFeature = void 0;\nconst code = __importStar(require(\"vscode\"));\nconst minimatch = __importStar(require(\"minimatch\"));\nconst proto = __importStar(require(\"vscode-languageserver-protocol\"));\nconst UUID = __importStar(require(\"./utils/uuid\"));\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nfunction access(target, key) {\n    return target[key];\n}\nfunction assign(target, key, value) {\n    target[key] = value;\n}\nclass FileOperationFeature {\n    _client;\n    _event;\n    _registrationType;\n    _clientCapability;\n    _serverCapability;\n    _listener;\n    // This property must stay private. Otherwise the type `minimatch.IMinimatch` becomes public and as a consequence we would need to\n    // ship the d.ts files for minimatch to make the compiler happy when compiling against the vscode-languageclient library\n    _filters;\n    constructor(client, event, registrationType, clientCapability, serverCapability) {\n        this._client = client;\n        this._event = event;\n        this._registrationType = registrationType;\n        this._clientCapability = clientCapability;\n        this._serverCapability = serverCapability;\n        this._filters = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this._registrationType.method, registrations: this._filters.size > 0 };\n    }\n    filterSize() {\n        return this._filters.size;\n    }\n    get registrationType() {\n        return this._registrationType;\n    }\n    fillClientCapabilities(capabilities) {\n        const value = ensure(ensure(capabilities, 'workspace'), 'fileOperations');\n        // this happens n times but it is the same value so we tolerate this.\n        assign(value, 'dynamicRegistration', true);\n        assign(value, this._clientCapability, true);\n    }\n    initialize(capabilities) {\n        const options = capabilities.workspace?.fileOperations;\n        const capability = options !== undefined ? access(options, this._serverCapability) : undefined;\n        if (capability?.filters !== undefined) {\n            try {\n                this.register({\n                    id: UUID.generateUuid(),\n                    registerOptions: { filters: capability.filters }\n                });\n            }\n            catch (e) {\n                this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${e}`);\n            }\n        }\n    }\n    register(data) {\n        if (!this._listener) {\n            this._listener = this._event(this.send, this);\n        }\n        const minimatchFilter = data.registerOptions.filters.map((filter) => {\n            const matcher = new minimatch.Minimatch(filter.pattern.glob, FileOperationFeature.asMinimatchOptions(filter.pattern.options));\n            if (!matcher.makeRe()) {\n                throw new Error(`Invalid pattern ${filter.pattern.glob}!`);\n            }\n            return { scheme: filter.scheme, matcher, kind: filter.pattern.matches };\n        });\n        this._filters.set(data.id, minimatchFilter);\n    }\n    unregister(id) {\n        this._filters.delete(id);\n        if (this._filters.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    clear() {\n        this._filters.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getFileType(uri) {\n        return FileOperationFeature.getFileType(uri);\n    }\n    async filter(event, prop) {\n        // (Asynchronously) map each file onto a boolean of whether it matches\n        // any of the globs.\n        const fileMatches = await Promise.all(event.files.map(async (item) => {\n            const uri = prop(item);\n            // Use fsPath to make this consistent with file system watchers but help\n            // minimatch to use '/' instead of `\\\\` if present.\n            const path = uri.fsPath.replace(/\\\\/g, '/');\n            for (const filters of this._filters.values()) {\n                for (const filter of filters) {\n                    if (filter.scheme !== undefined && filter.scheme !== uri.scheme) {\n                        continue;\n                    }\n                    if (filter.matcher.match(path)) {\n                        // The pattern matches. If kind is undefined then everything is ok\n                        if (filter.kind === undefined) {\n                            return true;\n                        }\n                        const fileType = await this.getFileType(uri);\n                        // If we can't determine the file type than we treat it as a match.\n                        // Dropping it would be another alternative.\n                        if (fileType === undefined) {\n                            this._client.info(`Unable to determine file type for ${uri.toString()}. Treating as a match.`);\n                            return true;\n                        }\n                        if ((fileType === code.FileType.File && filter.kind === proto.FileOperationPatternKind.file) || (fileType === code.FileType.Directory && filter.kind === proto.FileOperationPatternKind.folder)) {\n                            return true;\n                        }\n                    }\n                    else if (filter.kind === proto.FileOperationPatternKind.folder) {\n                        const fileType = await FileOperationFeature.getFileType(uri);\n                        if (fileType === code.FileType.Directory && filter.matcher.match(`${path}/`)) {\n                            return true;\n                        }\n                    }\n                }\n            }\n            return false;\n        }));\n        // Filter the files to those that matched.\n        const files = event.files.filter((_, index) => fileMatches[index]);\n        return { ...event, files };\n    }\n    static async getFileType(uri) {\n        try {\n            return (await code.workspace.fs.stat(uri)).type;\n        }\n        catch (e) {\n            return undefined;\n        }\n    }\n    static asMinimatchOptions(options) {\n        // The spec doesn't state that dot files don't match. So we make\n        // matching those the default.\n        const result = { dot: true };\n        if (options?.ignoreCase === true) {\n            result.nocase = true;\n        }\n        return result;\n    }\n}\nclass NotificationFileOperationFeature extends FileOperationFeature {\n    _notificationType;\n    _accessUri;\n    _createParams;\n    constructor(client, event, notificationType, clientCapability, serverCapability, accessUri, createParams) {\n        super(client, event, notificationType, clientCapability, serverCapability);\n        this._notificationType = notificationType;\n        this._accessUri = accessUri;\n        this._createParams = createParams;\n    }\n    async send(originalEvent) {\n        // Create a copy of the event that has the files filtered to match what the\n        // server wants.\n        const filteredEvent = await this.filter(originalEvent, this._accessUri);\n        if (filteredEvent.files.length) {\n            const next = async (event) => {\n                return this._client.sendNotification(this._notificationType, this._createParams(event));\n            };\n            return this.doSend(filteredEvent, next);\n        }\n    }\n}\nclass CachingNotificationFileOperationFeature extends NotificationFileOperationFeature {\n    _willListener;\n    _fsPathFileTypes = new Map();\n    async getFileType(uri) {\n        const fsPath = uri.fsPath;\n        if (this._fsPathFileTypes.has(fsPath)) {\n            return this._fsPathFileTypes.get(fsPath);\n        }\n        const type = await FileOperationFeature.getFileType(uri);\n        if (type) {\n            this._fsPathFileTypes.set(fsPath, type);\n        }\n        return type;\n    }\n    async cacheFileTypes(event, prop) {\n        // Calling filter will force the matching logic to run. For any item\n        // that requires a getFileType lookup, the overriden getFileType will\n        // be called that will cache the result so that when onDidRename fires,\n        // it can still be checked even though the item no longer exists on disk\n        // in its original location.\n        await this.filter(event, prop);\n    }\n    clearFileTypeCache() {\n        this._fsPathFileTypes.clear();\n    }\n    unregister(id) {\n        super.unregister(id);\n        if (this.filterSize() === 0 && this._willListener) {\n            this._willListener.dispose();\n            this._willListener = undefined;\n        }\n    }\n    clear() {\n        super.clear();\n        if (this._willListener) {\n            this._willListener.dispose();\n            this._willListener = undefined;\n        }\n    }\n}\nclass DidCreateFilesFeature extends NotificationFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onDidCreateFiles, proto.DidCreateFilesNotification.type, 'didCreate', 'didCreate', (i) => i, client.code2ProtocolConverter.asDidCreateFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.didCreateFiles\n            ? middleware.didCreateFiles(event, next)\n            : next(event);\n    }\n}\nexports.DidCreateFilesFeature = DidCreateFilesFeature;\nclass DidRenameFilesFeature extends CachingNotificationFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onDidRenameFiles, proto.DidRenameFilesNotification.type, 'didRename', 'didRename', (i) => i.oldUri, client.code2ProtocolConverter.asDidRenameFilesParams);\n    }\n    register(data) {\n        if (!this._willListener) {\n            this._willListener = code.workspace.onWillRenameFiles(this.willRename, this);\n        }\n        super.register(data);\n    }\n    willRename(e) {\n        e.waitUntil(this.cacheFileTypes(e, (i) => i.oldUri));\n    }\n    doSend(event, next) {\n        this.clearFileTypeCache();\n        const middleware = this._client.middleware.workspace;\n        return middleware?.didRenameFiles\n            ? middleware.didRenameFiles(event, next)\n            : next(event);\n    }\n}\nexports.DidRenameFilesFeature = DidRenameFilesFeature;\nclass DidDeleteFilesFeature extends CachingNotificationFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onDidDeleteFiles, proto.DidDeleteFilesNotification.type, 'didDelete', 'didDelete', (i) => i, client.code2ProtocolConverter.asDidDeleteFilesParams);\n    }\n    register(data) {\n        if (!this._willListener) {\n            this._willListener = code.workspace.onWillDeleteFiles(this.willDelete, this);\n        }\n        super.register(data);\n    }\n    willDelete(e) {\n        e.waitUntil(this.cacheFileTypes(e, (i) => i));\n    }\n    doSend(event, next) {\n        this.clearFileTypeCache();\n        const middleware = this._client.middleware.workspace;\n        return middleware?.didDeleteFiles\n            ? middleware.didDeleteFiles(event, next)\n            : next(event);\n    }\n}\nexports.DidDeleteFilesFeature = DidDeleteFilesFeature;\nclass RequestFileOperationFeature extends FileOperationFeature {\n    _requestType;\n    _accessUri;\n    _createParams;\n    constructor(client, event, requestType, clientCapability, serverCapability, accessUri, createParams) {\n        super(client, event, requestType, clientCapability, serverCapability);\n        this._requestType = requestType;\n        this._accessUri = accessUri;\n        this._createParams = createParams;\n    }\n    async send(originalEvent) {\n        const waitUntil = this.waitUntil(originalEvent);\n        originalEvent.waitUntil(waitUntil);\n    }\n    async waitUntil(originalEvent) {\n        // Create a copy of the event that has the files filtered to match what the\n        // server wants.\n        const filteredEvent = await this.filter(originalEvent, this._accessUri);\n        if (filteredEvent.files.length) {\n            const next = (event) => {\n                return this._client.sendRequest(this._requestType, this._createParams(event), event.token)\n                    .then(this._client.protocol2CodeConverter.asWorkspaceEdit);\n            };\n            return this.doSend(filteredEvent, next);\n        }\n        else {\n            return undefined;\n        }\n    }\n}\nclass WillCreateFilesFeature extends RequestFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onWillCreateFiles, proto.WillCreateFilesRequest.type, 'willCreate', 'willCreate', (i) => i, client.code2ProtocolConverter.asWillCreateFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.willCreateFiles\n            ? middleware.willCreateFiles(event, next)\n            : next(event);\n    }\n}\nexports.WillCreateFilesFeature = WillCreateFilesFeature;\nclass WillRenameFilesFeature extends RequestFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onWillRenameFiles, proto.WillRenameFilesRequest.type, 'willRename', 'willRename', (i) => i.oldUri, client.code2ProtocolConverter.asWillRenameFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.willRenameFiles\n            ? middleware.willRenameFiles(event, next)\n            : next(event);\n    }\n}\nexports.WillRenameFilesFeature = WillRenameFilesFeature;\nclass WillDeleteFilesFeature extends RequestFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onWillDeleteFiles, proto.WillDeleteFilesRequest.type, 'willDelete', 'willDelete', (i) => i, client.code2ProtocolConverter.asWillDeleteFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.willDeleteFiles\n            ? middleware.willDeleteFiles(event, next)\n            : next(event);\n    }\n}\nexports.WillDeleteFilesFeature = WillDeleteFilesFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HoverFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass HoverFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const hoverCapability = ((0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'hover'));\n        hoverCapability.dynamicRegistration = true;\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.hoverProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideHover: (document, position, token) => {\n                const client = this._client;\n                const provideHover = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asHover(result);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideHover\n                    ? middleware.provideHover(document, position, token, provideHover)\n                    : provideHover(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.HoverFeature = HoverFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SyncConfigurationFeature = exports.ConfigurationFeature = void 0;\nexports.toJSONObject = toJSONObject;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = __importStar(require(\"./utils/is\"));\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst features_1 = require(\"./features\");\n/**\n * Configuration pull model. From server to client.\n */\nclass ConfigurationFeature {\n    _client;\n    constructor(client) {\n        this._client = client;\n    }\n    getState() {\n        return { kind: 'static' };\n    }\n    fillClientCapabilities(capabilities) {\n        capabilities.workspace = capabilities.workspace || {};\n        capabilities.workspace.configuration = true;\n    }\n    initialize() {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\n            const configuration = (params) => {\n                const result = [];\n                for (const item of params.items) {\n                    const resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\n                }\n                return result;\n            };\n            const middleware = client.middleware.workspace;\n            return middleware && middleware.configuration\n                ? middleware.configuration(params, token, configuration)\n                : configuration(params, token);\n        });\n    }\n    getConfiguration(resource, section) {\n        let result = null;\n        if (section) {\n            const index = section.lastIndexOf('.');\n            if (index === -1) {\n                result = toJSONObject(vscode_1.workspace.getConfiguration(undefined, resource).get(section));\n            }\n            else {\n                const config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\n                if (config) {\n                    result = toJSONObject(config.get(section.substr(index + 1)));\n                }\n            }\n        }\n        else {\n            const config = vscode_1.workspace.getConfiguration(undefined, resource);\n            result = {};\n            for (const key of Object.keys(config)) {\n                if (config.has(key)) {\n                    result[key] = toJSONObject(config.get(key));\n                }\n            }\n        }\n        if (result === undefined) {\n            result = null;\n        }\n        return result;\n    }\n    clear() {\n    }\n}\nexports.ConfigurationFeature = ConfigurationFeature;\nfunction toJSONObject(obj) {\n    if (obj) {\n        if (Array.isArray(obj)) {\n            return obj.map(toJSONObject);\n        }\n        else if (typeof obj === 'object') {\n            const res = Object.create(null);\n            for (const key in obj) {\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                    res[key] = toJSONObject(obj[key]);\n                }\n            }\n            return res;\n        }\n    }\n    return obj;\n}\nclass SyncConfigurationFeature {\n    _client;\n    isCleared;\n    _listeners;\n    constructor(_client) {\n        this._client = _client;\n        this.isCleared = false;\n        this._listeners = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._listeners.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\n    }\n    initialize() {\n        this.isCleared = false;\n        const section = this._client.clientOptions.synchronize?.configurationSection;\n        if (section !== undefined) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: {\n                    section: section\n                }\n            });\n        }\n    }\n    register(data) {\n        const disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\n        });\n        this._listeners.set(data.id, disposable);\n        if (data.registerOptions.section !== undefined) {\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\n        }\n    }\n    unregister(id) {\n        const disposable = this._listeners.get(id);\n        if (disposable) {\n            this._listeners.delete(id);\n            disposable.dispose();\n        }\n    }\n    clear() {\n        for (const disposable of this._listeners.values()) {\n            disposable.dispose();\n        }\n        this._listeners.clear();\n        this.isCleared = true;\n    }\n    onDidChangeConfiguration(configurationSection, event) {\n        if (this.isCleared) {\n            return;\n        }\n        let sections;\n        if (Is.string(configurationSection)) {\n            sections = [configurationSection];\n        }\n        else {\n            sections = configurationSection;\n        }\n        if (sections !== undefined && event !== undefined) {\n            const affected = sections.some((section) => event.affectsConfiguration(section));\n            if (!affected) {\n                return;\n            }\n        }\n        const didChangeConfiguration = async (sections) => {\n            if (sections === undefined) {\n                return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\n            }\n            else {\n                return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\n            }\n        };\n        const middleware = this._client.middleware.workspace?.didChangeConfiguration;\n        (middleware ? middleware(sections, didChangeConfiguration) : didChangeConfiguration(sections)).catch((error) => {\n            this._client.error(`Sending notification ${vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type.method} failed`, error);\n        });\n    }\n    extractSettingsInformation(keys) {\n        function ensurePath(config, path) {\n            let current = config;\n            for (let i = 0; i < path.length - 1; i++) {\n                let obj = current[path[i]];\n                if (!obj) {\n                    obj = Object.create(null);\n                    current[path[i]] = obj;\n                }\n                current = obj;\n            }\n            return current;\n        }\n        const resource = this._client.clientOptions.workspaceFolder\n            ? this._client.clientOptions.workspaceFolder.uri\n            : undefined;\n        const result = Object.create(null);\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n            const index = key.indexOf('.');\n            let config = null;\n            if (index >= 0) {\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\n            }\n            else {\n                config = vscode_1.workspace.getConfiguration(undefined, resource).get(key);\n            }\n            if (config) {\n                const path = keys[i].split('.');\n                ensurePath(result, path)[path[path.length - 1]] = toJSONObject(config);\n            }\n        }\n        return result;\n    }\n}\nexports.SyncConfigurationFeature = SyncConfigurationFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NotebookDocumentSyncFeature = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst proto = __importStar(require(\"vscode-languageserver-protocol\"));\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst Is = __importStar(require(\"./utils/is\"));\nconst globPattern_1 = require(\"./utils/globPattern\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar Converter;\n(function (Converter) {\n    let c2p;\n    (function (c2p) {\n        function asVersionedNotebookDocumentIdentifier(notebookDocument, base) {\n            return {\n                version: notebookDocument.version,\n                uri: base.asUri(notebookDocument.uri)\n            };\n        }\n        c2p.asVersionedNotebookDocumentIdentifier = asVersionedNotebookDocumentIdentifier;\n        function asNotebookDocument(notebookDocument, cells, base) {\n            const result = proto.NotebookDocument.create(base.asUri(notebookDocument.uri), notebookDocument.notebookType, notebookDocument.version, asNotebookCells(cells, base));\n            if (Object.keys(notebookDocument.metadata).length > 0) {\n                result.metadata = asMetadata(notebookDocument.metadata);\n            }\n            return result;\n        }\n        c2p.asNotebookDocument = asNotebookDocument;\n        function asNotebookCells(cells, base) {\n            return cells.map(cell => asNotebookCell(cell, base));\n        }\n        c2p.asNotebookCells = asNotebookCells;\n        function asMetadata(metadata) {\n            const seen = new Set();\n            return deepCopy(seen, metadata);\n        }\n        c2p.asMetadata = asMetadata;\n        function asNotebookCell(cell, base) {\n            const result = proto.NotebookCell.create(asNotebookCellKind(cell.kind), base.asUri(cell.document.uri));\n            if (Object.keys(cell.metadata).length > 0) {\n                result.metadata = asMetadata(cell.metadata);\n            }\n            if (cell.executionSummary !== undefined && (Is.number(cell.executionSummary.executionOrder) && Is.boolean(cell.executionSummary.success))) {\n                result.executionSummary = {\n                    executionOrder: cell.executionSummary.executionOrder,\n                    success: cell.executionSummary.success\n                };\n            }\n            return result;\n        }\n        c2p.asNotebookCell = asNotebookCell;\n        function asNotebookCellKind(kind) {\n            switch (kind) {\n                case vscode.NotebookCellKind.Markup:\n                    return proto.NotebookCellKind.Markup;\n                case vscode.NotebookCellKind.Code:\n                    return proto.NotebookCellKind.Code;\n            }\n        }\n        function deepCopy(seen, value) {\n            if (seen.has(value)) {\n                throw new Error(`Can't deep copy cyclic structures.`);\n            }\n            if (Array.isArray(value)) {\n                const result = [];\n                for (const elem of value) {\n                    if (elem !== null && typeof elem === 'object' || Array.isArray(elem)) {\n                        result.push(deepCopy(seen, elem));\n                    }\n                    else {\n                        if (elem instanceof RegExp) {\n                            throw new Error(`Can't transfer regular expressions to the server`);\n                        }\n                        result.push(elem);\n                    }\n                }\n                return result;\n            }\n            else {\n                const props = Object.keys(value);\n                const result = Object.create(null);\n                for (const prop of props) {\n                    const elem = value[prop];\n                    if (elem !== null && typeof elem === 'object' || Array.isArray(elem)) {\n                        result[prop] = deepCopy(seen, elem);\n                    }\n                    else {\n                        if (elem instanceof RegExp) {\n                            throw new Error(`Can't transfer regular expressions to the server`);\n                        }\n                        result[prop] = elem;\n                    }\n                }\n                return result;\n            }\n        }\n        function asTextContentChange(event, base) {\n            const params = base.asChangeTextDocumentParams(event, event.document.uri, event.document.version);\n            return { document: params.textDocument, changes: params.contentChanges };\n        }\n        c2p.asTextContentChange = asTextContentChange;\n        function asNotebookDocumentChangeEvent(event, base) {\n            const result = Object.create(null);\n            if (event.metadata) {\n                result.metadata = Converter.c2p.asMetadata(event.metadata);\n            }\n            if (event.cells !== undefined) {\n                const cells = Object.create(null);\n                const changedCells = event.cells;\n                if (changedCells.structure) {\n                    cells.structure = {\n                        array: {\n                            start: changedCells.structure.array.start,\n                            deleteCount: changedCells.structure.array.deleteCount,\n                            cells: changedCells.structure.array.cells !== undefined ? changedCells.structure.array.cells.map(cell => Converter.c2p.asNotebookCell(cell, base)) : undefined\n                        },\n                        didOpen: changedCells.structure.didOpen !== undefined\n                            ? changedCells.structure.didOpen.map(cell => base.asOpenTextDocumentParams(cell.document).textDocument)\n                            : undefined,\n                        didClose: changedCells.structure.didClose !== undefined\n                            ? changedCells.structure.didClose.map(cell => base.asCloseTextDocumentParams(cell.document).textDocument)\n                            : undefined\n                    };\n                }\n                if (changedCells.data !== undefined) {\n                    cells.data = changedCells.data.map(cell => Converter.c2p.asNotebookCell(cell, base));\n                }\n                if (changedCells.textContent !== undefined) {\n                    cells.textContent = changedCells.textContent.map(event => Converter.c2p.asTextContentChange(event, base));\n                }\n                if (Object.keys(cells).length > 0) {\n                    result.cells = cells;\n                }\n            }\n            return result;\n        }\n        c2p.asNotebookDocumentChangeEvent = asNotebookDocumentChangeEvent;\n    })(c2p = Converter.c2p || (Converter.c2p = {}));\n})(Converter || (Converter = {}));\nvar $NotebookCell;\n(function ($NotebookCell) {\n    function computeDiff(originalCells, modifiedCells, compareMetadata) {\n        const originalLength = originalCells.length;\n        const modifiedLength = modifiedCells.length;\n        let startIndex = 0;\n        while (startIndex < modifiedLength && startIndex < originalLength && equals(originalCells[startIndex], modifiedCells[startIndex], compareMetadata)) {\n            startIndex++;\n        }\n        if (startIndex < modifiedLength && startIndex < originalLength) {\n            let originalEndIndex = originalLength - 1;\n            let modifiedEndIndex = modifiedLength - 1;\n            while (originalEndIndex >= 0 && modifiedEndIndex >= 0 && equals(originalCells[originalEndIndex], modifiedCells[modifiedEndIndex], compareMetadata)) {\n                originalEndIndex--;\n                modifiedEndIndex--;\n            }\n            const deleteCount = (originalEndIndex + 1) - startIndex;\n            const newCells = startIndex === modifiedEndIndex + 1 ? undefined : modifiedCells.slice(startIndex, modifiedEndIndex + 1);\n            return newCells !== undefined ? { start: startIndex, deleteCount, cells: newCells } : { start: startIndex, deleteCount };\n        }\n        else if (startIndex < modifiedLength) {\n            return { start: startIndex, deleteCount: 0, cells: modifiedCells.slice(startIndex) };\n        }\n        else if (startIndex < originalLength) {\n            return { start: startIndex, deleteCount: originalLength - startIndex };\n        }\n        else {\n            // The two arrays are the same.\n            return undefined;\n        }\n    }\n    $NotebookCell.computeDiff = computeDiff;\n    /**\n     * We only sync kind, document, execution and metadata to the server. So we only need to compare those.\n     */\n    function equals(one, other, compareMetaData = true) {\n        if (one.kind !== other.kind || one.document.uri.toString() !== other.document.uri.toString() || one.document.languageId !== other.document.languageId ||\n            !equalsExecution(one.executionSummary, other.executionSummary)) {\n            return false;\n        }\n        return !compareMetaData || (compareMetaData && equalsMetadata(one.metadata, other.metadata));\n    }\n    function equalsExecution(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === undefined || other === undefined) {\n            return false;\n        }\n        return one.executionOrder === other.executionOrder && one.success === other.success && equalsTiming(one.timing, other.timing);\n    }\n    function equalsTiming(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === undefined || other === undefined) {\n            return false;\n        }\n        return one.startTime === other.startTime && one.endTime === other.endTime;\n    }\n    function equalsMetadata(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        if (typeof one !== typeof other) {\n            return false;\n        }\n        if (typeof one !== 'object') {\n            return false;\n        }\n        const oneArray = Array.isArray(one);\n        const otherArray = Array.isArray(other);\n        if (oneArray !== otherArray) {\n            return false;\n        }\n        if (oneArray && otherArray) {\n            if (one.length !== other.length) {\n                return false;\n            }\n            for (let i = 0; i < one.length; i++) {\n                if (!equalsMetadata(one[i], other[i])) {\n                    return false;\n                }\n            }\n        }\n        if (isObjectLiteral(one) && isObjectLiteral(other)) {\n            const oneKeys = Object.keys(one);\n            const otherKeys = Object.keys(other);\n            if (oneKeys.length !== otherKeys.length) {\n                return false;\n            }\n            oneKeys.sort();\n            otherKeys.sort();\n            if (!equalsMetadata(oneKeys, otherKeys)) {\n                return false;\n            }\n            for (let i = 0; i < oneKeys.length; i++) {\n                const prop = oneKeys[i];\n                if (!equalsMetadata(one[prop], other[prop])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    function isObjectLiteral(value) {\n        return value !== null && typeof value === 'object';\n    }\n    $NotebookCell.isObjectLiteral = isObjectLiteral;\n})($NotebookCell || ($NotebookCell = {}));\nvar $NotebookDocumentFilter;\n(function ($NotebookDocumentFilter) {\n    function matchNotebook(filter, notebookDocument) {\n        if (typeof filter === 'string') {\n            return filter === '*' || notebookDocument.notebookType === filter;\n        }\n        if (filter.notebookType !== undefined && filter.notebookType !== '*' && notebookDocument.notebookType !== filter.notebookType) {\n            return false;\n        }\n        const uri = notebookDocument.uri;\n        if (filter.scheme !== undefined && filter.scheme !== '*' && uri.scheme !== filter.scheme) {\n            return false;\n        }\n        if (filter.pattern !== undefined) {\n            if (!(0, globPattern_1.matchGlobPattern)(filter.pattern, uri)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    $NotebookDocumentFilter.matchNotebook = matchNotebook;\n})($NotebookDocumentFilter || ($NotebookDocumentFilter = {}));\nvar $NotebookDocumentSyncOptions;\n(function ($NotebookDocumentSyncOptions) {\n    function asDocumentSelector(options) {\n        const selector = options.notebookSelector;\n        const result = [];\n        for (const element of selector) {\n            const notebookType = (typeof element.notebook === 'string' ? element.notebook : element.notebook?.notebookType) ?? '*';\n            const scheme = (typeof element.notebook === 'string') ? undefined : element.notebook?.scheme;\n            const pattern = (typeof element.notebook === 'string') ? undefined : element.notebook?.pattern;\n            if (element.cells !== undefined) {\n                for (const cell of element.cells) {\n                    result.push(asDocumentFilter(notebookType, scheme, pattern, cell.language));\n                }\n            }\n            else {\n                result.push(asDocumentFilter(notebookType, scheme, pattern, undefined));\n            }\n        }\n        return result;\n    }\n    $NotebookDocumentSyncOptions.asDocumentSelector = asDocumentSelector;\n    function asDocumentFilter(notebookType, scheme, pattern, language) {\n        return scheme === undefined && pattern === undefined\n            ? { notebook: notebookType, language }\n            : { notebook: { notebookType, scheme, pattern }, language };\n    }\n})($NotebookDocumentSyncOptions || ($NotebookDocumentSyncOptions = {}));\nvar SyncInfo;\n(function (SyncInfo) {\n    function create(cells) {\n        return {\n            cells,\n            uris: new Set(cells.map(cell => cell.document.uri.toString()))\n        };\n    }\n    SyncInfo.create = create;\n})(SyncInfo || (SyncInfo = {}));\nclass NotebookDocumentSyncFeatureProvider {\n    client;\n    options;\n    notebookSyncInfo;\n    notebookDidOpen;\n    disposables;\n    selector;\n    onChangeNotificationSent;\n    onOpenNotificationSent;\n    onCloseNotificationSent;\n    onSaveNotificationSent;\n    constructor(client, options, onChangeNotificationSent, onOpenNotificationSent, onCloseNotificationSent, onSaveNotificationSent) {\n        this.client = client;\n        this.options = options;\n        this.notebookSyncInfo = new Map();\n        this.notebookDidOpen = new Set();\n        this.disposables = [];\n        this.selector = client.protocol2CodeConverter.asDocumentSelector($NotebookDocumentSyncOptions.asDocumentSelector(options));\n        this.onChangeNotificationSent = onChangeNotificationSent;\n        this.onOpenNotificationSent = onOpenNotificationSent;\n        this.onCloseNotificationSent = onCloseNotificationSent;\n        this.onSaveNotificationSent = onSaveNotificationSent;\n        // open\n        vscode.workspace.onDidOpenNotebookDocument((notebookDocument) => {\n            this.notebookDidOpen.add(notebookDocument.uri.toString());\n            this.didOpen(notebookDocument);\n        }, undefined, this.disposables);\n        for (const notebookDocument of vscode.workspace.notebookDocuments) {\n            this.notebookDidOpen.add(notebookDocument.uri.toString());\n            this.didOpen(notebookDocument);\n        }\n        // Notebook document changed.\n        vscode.workspace.onDidChangeNotebookDocument(event => this.didChangeNotebookDocument(event), undefined, this.disposables);\n        //save\n        if (this.options.save === true) {\n            vscode.workspace.onDidSaveNotebookDocument(notebookDocument => this.didSave(notebookDocument), undefined, this.disposables);\n        }\n        // close\n        vscode.workspace.onDidCloseNotebookDocument((notebookDocument) => {\n            this.didClose(notebookDocument);\n            this.notebookDidOpen.delete(notebookDocument.uri.toString());\n        }, undefined, this.disposables);\n    }\n    getState() {\n        for (const notebook of vscode.workspace.notebookDocuments) {\n            const matchingCells = this.getMatchingCellsConsideringSyncInfo(notebook);\n            if (matchingCells !== undefined) {\n                return { kind: 'document', id: '$internal', registrations: true, matches: true };\n            }\n        }\n        return { kind: 'document', id: '$internal', registrations: true, matches: false };\n    }\n    get mode() {\n        return 'notebook';\n    }\n    handles(textDocument) {\n        if (vscode.languages.match(this.selector, textDocument) > 0) {\n            return true;\n        }\n        // Work around for https://github.com/microsoft/vscode/issues/202163\n        const key = textDocument.uri.toString();\n        for (const syncInfo of this.notebookSyncInfo.values()) {\n            if (syncInfo.uris.has(key)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    didOpenNotebookCellTextDocument(notebookDocument, cell) {\n        if (vscode.languages.match(this.selector, cell.document) === 0) {\n            return;\n        }\n        if (!this.notebookDidOpen.has(notebookDocument.uri.toString())) {\n            // We have never received an open notification for the notebook document.\n            // VS Code guarantees that we first get cell document open and then\n            // notebook open. So simply wait for the notebook open.\n            return;\n        }\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        // In VS Code we receive a notebook open before a cell document open.\n        // The document and the cell is synced.\n        const cellMatches = this.cellMatches(notebookDocument, cell);\n        if (syncInfo !== undefined) {\n            const cellIsSynced = syncInfo.uris.has(cell.document.uri.toString());\n            if ((cellMatches && cellIsSynced) || (!cellMatches && !cellIsSynced)) {\n                // The cell doesn't match and was not synced or it matches and is synced.\n                // In both cases nothing to do.\n                //\n                // Note that if the language mode of a document changes we remove the\n                // cell and add it back to update the language mode on the server side.\n                return;\n            }\n            if (cellMatches) {\n                // don't use cells from above since there might be more matching cells in the notebook\n                // Since we had a matching cell above we will have matching cells now.\n                const matchingCells = this.mergeCells(notebookDocument, syncInfo, [cell]);\n                if (matchingCells !== undefined) {\n                    const event = this.asNotebookDocumentChangeEvent(notebookDocument, undefined, syncInfo, matchingCells);\n                    if (event !== undefined) {\n                        this.doSendChange(event, matchingCells).catch(() => { });\n                    }\n                }\n            }\n        }\n        else {\n            // No sync info. But we have a open event for the notebook document\n            // itself. If the cell matches then we need to send an open with\n            // exactly that cell.\n            if (cellMatches) {\n                this.doSendOpen(notebookDocument, [cell]).catch(() => { });\n            }\n        }\n    }\n    didChangeNotebookCellTextDocument(notebookDocument, cell, event) {\n        // No match with the selector\n        if (vscode.languages.match(this.selector, event.document) === 0) {\n            return;\n        }\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        // Notebook got never synced. So it doesn't matter if a cell document changes.\n        if (syncInfo === undefined || !syncInfo.uris.has(cell.document.uri.toString())) {\n            return;\n        }\n        this.doSendChange({\n            notebook: notebookDocument,\n            cells: { textContent: [event] }\n        }, syncInfo.cells).catch(() => { });\n    }\n    didCloseNotebookCellTextDocument(notebookDocument, cell) {\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        if (syncInfo === undefined) {\n            // The notebook document got never synced. So it doesn't matter if a cell\n            // document closes.\n            return;\n        }\n        const cellUri = cell.document.uri;\n        const index = syncInfo.cells.findIndex((item) => item.document.uri.toString() === cellUri.toString());\n        if (index === -1) {\n            // The cell never got synced or it got deleted and we now received the document\n            // close event.\n            return;\n        }\n        if (index === 0 && syncInfo.cells.length === 1) {\n            // The last cell. Close the notebook document in the server.\n            this.doSendClose(notebookDocument, syncInfo.cells).catch(() => { });\n        }\n        else {\n            const newCells = syncInfo.cells.slice();\n            const deleted = newCells.splice(index, 1);\n            this.doSendChange({\n                notebook: notebookDocument,\n                cells: {\n                    structure: {\n                        array: { start: index, deleteCount: 1 },\n                        didClose: deleted\n                    }\n                }\n            }, newCells).catch(() => { });\n        }\n    }\n    dispose() {\n        for (const disposable of this.disposables) {\n            disposable.dispose();\n        }\n    }\n    didOpen(notebookDocument, matchingCells, syncInfo = this.getSyncInfo(notebookDocument)) {\n        if (syncInfo !== undefined) {\n            if (matchingCells === undefined) {\n                matchingCells = syncInfo.cells.slice();\n            }\n            if (matchingCells !== undefined) {\n                const event = this.asNotebookDocumentChangeEvent(notebookDocument, undefined, syncInfo, matchingCells);\n                if (event !== undefined) {\n                    this.doSendChange(event, matchingCells).catch(() => { });\n                }\n            }\n            else {\n                this.doSendClose(notebookDocument, []).catch(() => { });\n            }\n        }\n        else {\n            matchingCells = this.getMatchingCells(notebookDocument);\n            // Check if we need to sync the notebook document.\n            if (matchingCells === undefined) {\n                return;\n            }\n            this.doSendOpen(notebookDocument, matchingCells).catch(() => { });\n        }\n    }\n    didChangeNotebookDocument(event) {\n        const notebookDocument = event.notebook;\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        if (syncInfo === undefined) {\n            // We have no changes to the cells. Since the notebook wasn't synced\n            // it will not be synced now.\n            if (event.contentChanges.length === 0) {\n                return;\n            }\n            // Check if we have new matching cells.\n            const cells = this.getMatchingCells(notebookDocument);\n            // No matching cells and the notebook never synced. So still no need\n            // to sync it.\n            if (cells === undefined) {\n                return;\n            }\n            // Open the notebook document and ignore the rest of the changes\n            // this the notebooks will be synced with the correct settings.\n            this.didOpen(notebookDocument, cells, syncInfo);\n        }\n        else {\n            // The notebook is synced. First check if we have no matching\n            // cells anymore and if so close the notebook\n            const cells = this.getMatchingCellsFromEvent(notebookDocument, syncInfo, event);\n            if (cells === undefined) {\n                this.didClose(notebookDocument, syncInfo);\n                return;\n            }\n            const newEvent = this.asNotebookDocumentChangeEvent(event.notebook, event, syncInfo, cells);\n            if (newEvent !== undefined) {\n                this.doSendChange(newEvent, cells).catch(() => { });\n            }\n        }\n    }\n    didSave(notebookDocument) {\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        if (syncInfo === undefined) {\n            return;\n        }\n        this.doSendSave(notebookDocument).catch(() => { });\n    }\n    didClose(notebookDocument, syncInfo = this.getSyncInfo(notebookDocument)) {\n        if (syncInfo === undefined) {\n            return;\n        }\n        const syncedCells = notebookDocument.getCells().filter(cell => syncInfo.uris.has(cell.document.uri.toString()));\n        this.doSendClose(notebookDocument, syncedCells).catch(() => { });\n    }\n    async sendDidOpenNotebookDocument(notebookDocument) {\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        if (syncInfo !== undefined) {\n            throw new Error(`Notebook document ${notebookDocument.uri.toString()} is already open`);\n        }\n        const cells = this.getMatchingCells(notebookDocument);\n        if (cells === undefined) {\n            return;\n        }\n        return this.doSendOpen(notebookDocument, cells);\n    }\n    async doSendOpen(notebookDocument, cells) {\n        const send = async (notebookDocument, cells) => {\n            const cellDocuments = cells.map(cell => this.client.code2ProtocolConverter.asTextDocumentItem(cell.document));\n            try {\n                await this.client.sendNotification(proto.DidOpenNotebookDocumentNotification.type, {\n                    notebookDocument: Converter.c2p.asNotebookDocument(notebookDocument, cells, this.client.code2ProtocolConverter),\n                    cellTextDocuments: cellDocuments\n                });\n                this.onOpenNotificationSent.fire(notebookDocument);\n            }\n            catch (error) {\n                this.client.error('Sending DidOpenNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        this.notebookSyncInfo.set(notebookDocument.uri.toString(), SyncInfo.create(cells));\n        return middleware?.didOpen !== undefined ? middleware.didOpen(notebookDocument, cells, send) : send(notebookDocument, cells);\n    }\n    async sendDidChangeNotebookDocument(event) {\n        const cells = this.getMatchingCellsFromSyncInfo(event.notebook);\n        if (cells === undefined) {\n            throw new Error(`Received changed event for un-synced notebook ${event.notebook.uri.toString()}`);\n        }\n        return this.doSendChange(event, cells);\n    }\n    async doSendChange(event, cells) {\n        const send = async (event) => {\n            try {\n                await this.client.sendNotification(proto.DidChangeNotebookDocumentNotification.type, {\n                    notebookDocument: Converter.c2p.asVersionedNotebookDocumentIdentifier(event.notebook, this.client.code2ProtocolConverter),\n                    change: Converter.c2p.asNotebookDocumentChangeEvent(event, this.client.code2ProtocolConverter)\n                });\n                this.onChangeNotificationSent.fire(event);\n            }\n            catch (error) {\n                this.client.error('Sending DidChangeNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        if (event.cells?.structure !== undefined) {\n            this.notebookSyncInfo.set(event.notebook.uri.toString(), SyncInfo.create(cells));\n        }\n        return middleware?.didChange !== undefined ? middleware?.didChange(event, send) : send(event);\n    }\n    async sendDidSaveNotebookDocument(notebookDocument) {\n        return this.doSendSave(notebookDocument);\n    }\n    async doSendSave(notebookDocument) {\n        const send = async (notebookDocument) => {\n            try {\n                await this.client.sendNotification(proto.DidSaveNotebookDocumentNotification.type, {\n                    notebookDocument: { uri: this.client.code2ProtocolConverter.asUri(notebookDocument.uri) }\n                });\n                this.onSaveNotificationSent.fire(notebookDocument);\n            }\n            catch (error) {\n                this.client.error('Sending DidSaveNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        return middleware?.didSave !== undefined ? middleware.didSave(notebookDocument, send) : send(notebookDocument);\n    }\n    async sendDidCloseNotebookDocument(notebookDocument) {\n        const cells = this.getMatchingCellsFromSyncInfo(notebookDocument);\n        if (cells === undefined) {\n            throw new Error(`Received close event for un-synced notebook ${notebookDocument.uri.toString()}`);\n        }\n        return this.doSendClose(notebookDocument, cells);\n    }\n    async doSendClose(notebookDocument, cells) {\n        const send = async (notebookDocument, cells) => {\n            try {\n                await this.client.sendNotification(proto.DidCloseNotebookDocumentNotification.type, {\n                    notebookDocument: { uri: this.client.code2ProtocolConverter.asUri(notebookDocument.uri) },\n                    cellTextDocuments: cells.map(cell => this.client.code2ProtocolConverter.asTextDocumentIdentifier(cell.document))\n                });\n                this.onCloseNotificationSent.fire(notebookDocument);\n            }\n            catch (error) {\n                this.client.error('Sending DidCloseNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        this.notebookSyncInfo.delete(notebookDocument.uri.toString());\n        return middleware?.didClose !== undefined ? middleware.didClose(notebookDocument, cells, send) : send(notebookDocument, cells);\n    }\n    getSynchronizedCells(notebookDocument) {\n        const syncInfo = this.getSyncInfo(notebookDocument);\n        return syncInfo?.cells;\n    }\n    asNotebookDocumentChangeEvent(notebook, event, syncInfo, matchingCells) {\n        if (event !== undefined && event.notebook !== notebook) {\n            throw new Error('Notebook must be identical');\n        }\n        const result = {\n            notebook: notebook\n        };\n        if (event?.metadata !== undefined) {\n            result.metadata = Converter.c2p.asMetadata(event.metadata);\n        }\n        let matchingCellsSet;\n        if (event?.cellChanges !== undefined && event.cellChanges.length > 0) {\n            const data = [];\n            // Only consider the new matching cells.\n            matchingCellsSet = new Set(matchingCells.map(cell => cell.document.uri.toString()));\n            for (const cellChange of event.cellChanges) {\n                if (matchingCellsSet.has(cellChange.cell.document.uri.toString()) && (cellChange.executionSummary !== undefined || cellChange.metadata !== undefined)) {\n                    data.push(cellChange.cell);\n                }\n            }\n            if (data.length > 0) {\n                result.cells = result.cells ?? {};\n                result.cells.data = data;\n            }\n        }\n        if (((event?.contentChanges !== undefined && event.contentChanges.length > 0) || event === undefined) && syncInfo !== undefined && matchingCells !== undefined) {\n            // We still have matching cells. Check if the cell changes\n            // affect the notebook on the server side.\n            const oldCells = syncInfo.cells;\n            const newCells = matchingCells;\n            // meta data changes are reported using on the cell itself. So we can ignore comparing\n            // it which has a positive effect on performance.\n            const diff = $NotebookCell.computeDiff(oldCells, newCells, false);\n            let addedCells;\n            let removedCells;\n            if (diff !== undefined) {\n                addedCells = diff.cells === undefined\n                    ? new Map()\n                    : new Map(diff.cells.map(cell => [cell.document.uri.toString(), cell]));\n                removedCells = diff.deleteCount === 0\n                    ? new Map()\n                    : new Map(oldCells.slice(diff.start, diff.start + diff.deleteCount).map(cell => [cell.document.uri.toString(), cell]));\n                // Remove the onces that got deleted and inserted again.\n                for (const key of Array.from(removedCells.keys())) {\n                    if (addedCells.has(key)) {\n                        removedCells.delete(key);\n                        addedCells.delete(key);\n                    }\n                }\n                result.cells = result.cells ?? {};\n                const didOpen = [];\n                const didClose = [];\n                if (addedCells.size > 0 || removedCells.size > 0) {\n                    for (const cell of addedCells.values()) {\n                        didOpen.push(cell);\n                    }\n                    for (const cell of removedCells.values()) {\n                        didClose.push(cell);\n                    }\n                }\n                result.cells.structure = {\n                    array: diff,\n                    didOpen,\n                    didClose\n                };\n            }\n        }\n        // The notebook is a property as well.\n        return Object.keys(result).length > 1 ? result : undefined;\n    }\n    getMatchingCells(notebookDocument, cells = notebookDocument.getCells()) {\n        if (this.options.notebookSelector === undefined) {\n            return undefined;\n        }\n        for (const item of this.options.notebookSelector) {\n            if (item.notebook === undefined || $NotebookDocumentFilter.matchNotebook(item.notebook, notebookDocument)) {\n                const filtered = this.filterCells(notebookDocument, cells, item.cells);\n                return filtered.length === 0 ? undefined : filtered;\n            }\n        }\n        return undefined;\n    }\n    getMatchingCellsFromEvent(notebookDocument, syncInfo, event) {\n        if (this.options.notebookSelector === undefined) {\n            return undefined;\n        }\n        let selector;\n        for (const item of this.options.notebookSelector) {\n            if (item.notebook === undefined || $NotebookDocumentFilter.matchNotebook(item.notebook, notebookDocument)) {\n                selector = item;\n                break;\n            }\n        }\n        if (selector === undefined) {\n            return undefined;\n        }\n        if ((event.cellChanges === undefined || event.cellChanges.length === 0) && (event.contentChanges === undefined || event.contentChanges.length === 0)) {\n            return syncInfo.cells;\n        }\n        let cells;\n        if (event.cellChanges !== undefined && event.cellChanges.length > 0) {\n            const changedCells = event.cellChanges.map(item => item.cell);\n            const filtered = this.filterCells(notebookDocument, changedCells, selector.cells);\n            if (filtered.length !== changedCells.length) {\n                cells = new Set(syncInfo.uris);\n                for (const cell of changedCells) {\n                    cells.delete(cell.document.uri.toString());\n                }\n                for (const cell of filtered) {\n                    cells.add(cell.document.uri.toString());\n                }\n            }\n        }\n        if (event.contentChanges !== undefined && event.contentChanges.length > 0) {\n            if (cells === undefined) {\n                cells = new Set(syncInfo.uris);\n            }\n            for (const item of event.contentChanges) {\n                for (const cell of item.removedCells) {\n                    cells.delete(cell.document.uri.toString());\n                }\n                const filtered = this.filterCells(notebookDocument, new Array(...item.addedCells), selector.cells);\n                for (const cell of filtered) {\n                    cells.add(cell.document.uri.toString());\n                }\n            }\n        }\n        if (cells === undefined) {\n            return syncInfo.cells;\n        }\n        // Only return the cells that are still in the set, but keep the order\n        // as present in the current notebook.\n        const result = [];\n        const current = notebookDocument.getCells();\n        for (const cell of current) {\n            if (cells.has(cell.document.uri.toString())) {\n                result.push(cell);\n            }\n        }\n        return result;\n    }\n    getMatchingCellsFromSyncInfo(notebook) {\n        const syncInfo = this.getSyncInfo(notebook);\n        return syncInfo !== undefined ? syncInfo.cells : undefined;\n    }\n    getMatchingCellsConsideringSyncInfo(notebook) {\n        const syncInfo = this.getSyncInfo(notebook);\n        return syncInfo !== undefined ? syncInfo.cells : this.getMatchingCells(notebook);\n    }\n    mergeCells(notebookDocument, syncInfo, cells) {\n        const result = [];\n        const merged = new Set(syncInfo.uris);\n        for (const cell of cells) {\n            merged.add(cell.document.uri.toString());\n        }\n        // Keep the cell order of the current notebook.\n        for (const cell of notebookDocument.getCells()) {\n            if (merged.has(cell.document.uri.toString())) {\n                result.push(cell);\n            }\n        }\n        return result;\n    }\n    cellMatches(notebookDocument, cell) {\n        const cells = this.getMatchingCells(notebookDocument, [cell]);\n        return cells !== undefined && cells[0] === cell;\n    }\n    filterCells(notebookDocument, cells, cellSelector) {\n        const filtered = cellSelector !== undefined ? cells.filter((cell) => {\n            const cellLanguage = cell.document.languageId;\n            return cellSelector.some((filter => (filter.language === '*' || cellLanguage === filter.language)));\n        }) : cells;\n        return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells === 'function'\n            ? this.client.clientOptions.notebookDocumentOptions.filterCells(notebookDocument, filtered)\n            : filtered;\n    }\n    getSyncInfo(notebook) {\n        return this.notebookSyncInfo.get(notebook.uri.toString());\n    }\n}\nclass NotebookDocumentSyncFeature {\n    static CellScheme = 'vscode-notebook-cell';\n    client;\n    registrations;\n    dedicatedChannel;\n    _onChangeNotificationSent;\n    _onOpenNotificationSent;\n    _onCloseNotificationSent;\n    _onSaveNotificationSent;\n    constructor(client) {\n        this.client = client;\n        this.registrations = new Map();\n        this.registrationType = proto.NotebookDocumentSyncRegistrationType.type;\n        this._onChangeNotificationSent = new vscode.EventEmitter();\n        this._onOpenNotificationSent = new vscode.EventEmitter();\n        this._onCloseNotificationSent = new vscode.EventEmitter();\n        this._onSaveNotificationSent = new vscode.EventEmitter();\n        // We don't receive an event for cells where the document changes its language mode\n        // Since we allow servers to filter on the language mode we fire such an event ourselves.\n        vscode.workspace.onDidOpenTextDocument((textDocument) => {\n            if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n                return;\n            }\n            const [notebookDocument, notebookCell] = this.findNotebookDocumentAndCell(textDocument);\n            if (notebookDocument === undefined || notebookCell === undefined) {\n                return;\n            }\n            for (const provider of this.registrations.values()) {\n                if (provider instanceof NotebookDocumentSyncFeatureProvider) {\n                    provider.didOpenNotebookCellTextDocument(notebookDocument, notebookCell);\n                }\n            }\n        });\n        vscode.workspace.onDidChangeTextDocument((event) => {\n            if (event.contentChanges.length === 0) {\n                return;\n            }\n            const textDocument = event.document;\n            if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n                return;\n            }\n            const [notebookDocument, cell] = this.findNotebookDocumentAndCell(textDocument);\n            if (notebookDocument === undefined || cell === undefined) {\n                return;\n            }\n            for (const provider of this.registrations.values()) {\n                if (provider instanceof NotebookDocumentSyncFeatureProvider) {\n                    provider.didChangeNotebookCellTextDocument(notebookDocument, cell, event);\n                }\n            }\n        });\n        vscode.workspace.onDidCloseTextDocument((textDocument) => {\n            if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n                return;\n            }\n            // There are two cases when we receive a close for a text document\n            // 1: the cell got removed. This is handled in `onDidChangeNotebookCells`\n            // 2: the language mode of a cell changed. This keeps the URI stable so\n            //    we will still find the cell and the notebook document.\n            const [notebookDocument, notebookCell] = this.findNotebookDocumentAndCell(textDocument);\n            if (notebookDocument === undefined || notebookCell === undefined) {\n                return;\n            }\n            for (const provider of this.registrations.values()) {\n                if (provider instanceof NotebookDocumentSyncFeatureProvider) {\n                    provider.didCloseNotebookCellTextDocument(notebookDocument, notebookCell);\n                }\n            }\n        });\n    }\n    getState() {\n        if (this.registrations.size === 0) {\n            return { kind: 'document', id: this.registrationType.method, registrations: false, matches: false };\n        }\n        for (const provider of this.registrations.values()) {\n            const state = provider.getState();\n            if (state.kind === 'document' && state.registrations === true && state.matches === true) {\n                return { kind: 'document', id: this.registrationType.method, registrations: true, matches: true };\n            }\n        }\n        return { kind: 'document', id: this.registrationType.method, registrations: true, matches: false };\n    }\n    registrationType;\n    get onOpenNotificationSent() {\n        return this._onOpenNotificationSent.event;\n    }\n    get onChangeNotificationSent() {\n        return this._onChangeNotificationSent.event;\n    }\n    get onCloseNotificationSent() {\n        return this._onCloseNotificationSent.event;\n    }\n    get onSaveNotificationSent() {\n        return this._onSaveNotificationSent.event;\n    }\n    fillClientCapabilities(capabilities) {\n        const synchronization = ensure(ensure(capabilities, 'notebookDocument'), 'synchronization');\n        synchronization.dynamicRegistration = true;\n        synchronization.executionSummarySupport = true;\n    }\n    preInitialize(capabilities) {\n        const options = capabilities.notebookDocumentSync;\n        if (options === undefined) {\n            return;\n        }\n        this.dedicatedChannel = this.client.protocol2CodeConverter.asDocumentSelector($NotebookDocumentSyncOptions.asDocumentSelector(options));\n    }\n    initialize(capabilities) {\n        const options = capabilities.notebookDocumentSync;\n        if (options === undefined) {\n            return;\n        }\n        const id = options.id ?? UUID.generateUuid();\n        this.register({ id, registerOptions: options });\n    }\n    register(data) {\n        const provider = new NotebookDocumentSyncFeatureProvider(this.client, data.registerOptions, this._onChangeNotificationSent, this._onOpenNotificationSent, this._onCloseNotificationSent, this._onSaveNotificationSent);\n        this.registrations.set(data.id, provider);\n    }\n    unregister(id) {\n        const provider = this.registrations.get(id);\n        if (provider !== undefined) {\n            this.registrations.delete(id);\n            provider.dispose();\n        }\n    }\n    clear() {\n        for (const provider of this.registrations.values()) {\n            provider.dispose();\n        }\n        this.registrations.clear();\n        this._onChangeNotificationSent.dispose();\n        this._onChangeNotificationSent = new vscode.EventEmitter();\n        this._onOpenNotificationSent.dispose();\n        this._onOpenNotificationSent = new vscode.EventEmitter();\n        this._onCloseNotificationSent.dispose();\n        this._onCloseNotificationSent = new vscode.EventEmitter();\n        this._onSaveNotificationSent.dispose();\n        this._onSaveNotificationSent = new vscode.EventEmitter();\n    }\n    handles(textDocument) {\n        if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n            return false;\n        }\n        if (this.dedicatedChannel !== undefined && vscode.languages.match(this.dedicatedChannel, textDocument) > 0) {\n            return true;\n        }\n        for (const provider of this.registrations.values()) {\n            if (provider.handles(textDocument)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    getProvider(notebookCell) {\n        for (const provider of this.registrations.values()) {\n            if (provider.handles(notebookCell.document)) {\n                return provider;\n            }\n        }\n        return undefined;\n    }\n    findNotebookDocumentAndCell(textDocument) {\n        const uri = textDocument.uri.toString();\n        for (const notebookDocument of vscode.workspace.notebookDocuments) {\n            for (const cell of notebookDocument.getCells()) {\n                if (cell.document.uri.toString() === uri) {\n                    return [notebookDocument, cell];\n                }\n            }\n        }\n        return [undefined, undefined];\n    }\n}\nexports.NotebookDocumentSyncFeature = NotebookDocumentSyncFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextDocumentContentRefreshRequest = exports.TextDocumentContentRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/textDocumentContent` request is sent from the client to the\n * server to request the content of a text document.\n *\n * @since 3.18.0\n * @proposed\n */\nvar TextDocumentContentRequest;\n(function (TextDocumentContentRequest) {\n    TextDocumentContentRequest.method = 'workspace/textDocumentContent';\n    TextDocumentContentRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TextDocumentContentRequest.type = new messages_1.ProtocolRequestType(TextDocumentContentRequest.method);\n    TextDocumentContentRequest.capabilities = messages_1.CM.create('workspace.textDocumentContent', 'workspace.textDocumentContent');\n})(TextDocumentContentRequest || (exports.TextDocumentContentRequest = TextDocumentContentRequest = {}));\n/**\n * The `workspace/textDocumentContent` request is sent from the server to the client to refresh\n * the content of a specific text document.\n *\n * @since 3.18.0\n * @proposed\n */\nvar TextDocumentContentRefreshRequest;\n(function (TextDocumentContentRefreshRequest) {\n    TextDocumentContentRefreshRequest.method = `workspace/textDocumentContent/refresh`;\n    TextDocumentContentRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    TextDocumentContentRefreshRequest.type = new messages_1.ProtocolRequestType(TextDocumentContentRefreshRequest.method);\n})(TextDocumentContentRefreshRequest || (exports.TextDocumentContentRefreshRequest = TextDocumentContentRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/vscode.proposed.codeActionAI.d.ts\" preserve: true/>\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConverter = createConverter;\nconst code = __importStar(require(\"vscode\"));\nconst proto = __importStar(require(\"vscode-languageserver-protocol\"));\nconst Is = __importStar(require(\"./utils/is\"));\nconst async = __importStar(require(\"./utils/async\"));\nconst protocolCompletionItem_1 = __importDefault(require(\"./protocolCompletionItem\"));\nconst protocolCodeLens_1 = __importDefault(require(\"./protocolCodeLens\"));\nconst protocolDocumentLink_1 = __importDefault(require(\"./protocolDocumentLink\"));\nconst protocolCodeAction_1 = __importDefault(require(\"./protocolCodeAction\"));\nconst protocolDiagnostic_1 = require(\"./protocolDiagnostic\");\nconst protocolCallHierarchyItem_1 = __importDefault(require(\"./protocolCallHierarchyItem\"));\nconst protocolTypeHierarchyItem_1 = __importDefault(require(\"./protocolTypeHierarchyItem\"));\nconst protocolWorkspaceSymbol_1 = __importDefault(require(\"./protocolWorkspaceSymbol\"));\nconst protocolInlayHint_1 = __importDefault(require(\"./protocolInlayHint\"));\nvar InsertReplaceRange;\n(function (InsertReplaceRange) {\n    function is(value) {\n        const candidate = value;\n        return candidate && !!candidate.inserting && !!candidate.replacing;\n    }\n    InsertReplaceRange.is = is;\n})(InsertReplaceRange || (InsertReplaceRange = {}));\nfunction createConverter(uriConverter) {\n    const nullConverter = (value) => value.toString();\n    const _uriConverter = uriConverter || nullConverter;\n    function asUri(value) {\n        return _uriConverter(value);\n    }\n    function asTextDocumentIdentifier(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri)\n        };\n    }\n    function asTextDocumentItem(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri),\n            languageId: textDocument.languageId,\n            version: textDocument.version,\n            text: textDocument.getText()\n        };\n    }\n    function asVersionedTextDocumentIdentifier(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri),\n            version: textDocument.version\n        };\n    }\n    function asOpenTextDocumentParams(textDocument) {\n        return {\n            textDocument: asTextDocumentItem(textDocument)\n        };\n    }\n    function isTextDocumentChangeEvent(value) {\n        const candidate = value;\n        return !!candidate.document && !!candidate.contentChanges;\n    }\n    function isTextDocument(value) {\n        const candidate = value;\n        return !!candidate.uri && !!candidate.version;\n    }\n    function asChangeTextDocumentParams(arg0, arg1, arg2) {\n        if (isTextDocument(arg0)) {\n            const result = {\n                textDocument: {\n                    uri: _uriConverter(arg0.uri),\n                    version: arg0.version\n                },\n                contentChanges: [{ text: arg0.getText() }]\n            };\n            return result;\n        }\n        else if (isTextDocumentChangeEvent(arg0)) {\n            const uri = arg1;\n            const version = arg2;\n            const result = {\n                textDocument: {\n                    uri: _uriConverter(uri),\n                    version: version\n                },\n                contentChanges: arg0.contentChanges.map((change) => {\n                    const range = change.range;\n                    return {\n                        range: {\n                            start: { line: range.start.line, character: range.start.character },\n                            end: { line: range.end.line, character: range.end.character }\n                        },\n                        rangeLength: change.rangeLength,\n                        text: change.text\n                    };\n                })\n            };\n            return result;\n        }\n        else {\n            throw Error('Unsupported text document change parameter');\n        }\n    }\n    function asCloseTextDocumentParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\n        const result = {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n        if (includeContent) {\n            result.text = textDocument.getText();\n        }\n        return result;\n    }\n    function asTextDocumentSaveReason(reason) {\n        switch (reason) {\n            case code.TextDocumentSaveReason.Manual:\n                return proto.TextDocumentSaveReason.Manual;\n            case code.TextDocumentSaveReason.AfterDelay:\n                return proto.TextDocumentSaveReason.AfterDelay;\n            case code.TextDocumentSaveReason.FocusOut:\n                return proto.TextDocumentSaveReason.FocusOut;\n        }\n        return proto.TextDocumentSaveReason.Manual;\n    }\n    function asWillSaveTextDocumentParams(event) {\n        return {\n            textDocument: asTextDocumentIdentifier(event.document),\n            reason: asTextDocumentSaveReason(event.reason)\n        };\n    }\n    function asDidCreateFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asDidRenameFilesParams(event) {\n        return {\n            files: event.files.map((file) => ({\n                oldUri: _uriConverter(file.oldUri),\n                newUri: _uriConverter(file.newUri),\n            })),\n        };\n    }\n    function asDidDeleteFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asWillCreateFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asWillRenameFilesParams(event) {\n        return {\n            files: event.files.map((file) => ({\n                oldUri: _uriConverter(file.oldUri),\n                newUri: _uriConverter(file.newUri),\n            })),\n        };\n    }\n    function asWillDeleteFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asTextDocumentPositionParams(textDocument, position) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position)\n        };\n    }\n    function asCompletionTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case code.CompletionTriggerKind.TriggerCharacter:\n                return proto.CompletionTriggerKind.TriggerCharacter;\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\n            default:\n                return proto.CompletionTriggerKind.Invoked;\n        }\n    }\n    function asCompletionParams(textDocument, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: {\n                triggerKind: asCompletionTriggerKind(context.triggerKind),\n                triggerCharacter: context.triggerCharacter\n            }\n        };\n    }\n    function asSignatureHelpTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case code.SignatureHelpTriggerKind.Invoke:\n                return proto.SignatureHelpTriggerKind.Invoked;\n            case code.SignatureHelpTriggerKind.TriggerCharacter:\n                return proto.SignatureHelpTriggerKind.TriggerCharacter;\n            case code.SignatureHelpTriggerKind.ContentChange:\n                return proto.SignatureHelpTriggerKind.ContentChange;\n        }\n    }\n    function asParameterInformation(value) {\n        // We leave the documentation out on purpose since it usually adds no\n        // value for the server.\n        return {\n            label: value.label\n        };\n    }\n    function asParameterInformations(values) {\n        return values.map(asParameterInformation);\n    }\n    function asSignatureInformation(value) {\n        // We leave the documentation out on purpose since it usually adds no\n        // value for the server.\n        return {\n            label: value.label,\n            parameters: asParameterInformations(value.parameters)\n        };\n    }\n    function asSignatureInformations(values) {\n        return values.map(asSignatureInformation);\n    }\n    function asSignatureHelp(value) {\n        if (value === undefined) {\n            return value;\n        }\n        return {\n            signatures: asSignatureInformations(value.signatures),\n            activeSignature: value.activeSignature,\n            activeParameter: value.activeParameter\n        };\n    }\n    function asSignatureHelpParams(textDocument, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: {\n                isRetrigger: context.isRetrigger,\n                triggerCharacter: context.triggerCharacter,\n                triggerKind: asSignatureHelpTriggerKind(context.triggerKind),\n                activeSignatureHelp: asSignatureHelp(context.activeSignatureHelp)\n            }\n        };\n    }\n    function asWorkerPosition(position) {\n        return { line: position.line, character: position.character };\n    }\n    function asPosition(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return { line: value.line > proto.uinteger.MAX_VALUE ? proto.uinteger.MAX_VALUE : value.line, character: value.character > proto.uinteger.MAX_VALUE ? proto.uinteger.MAX_VALUE : value.character };\n    }\n    function asPositions(values, token) {\n        return async.map(values, asPosition, token);\n    }\n    function asPositionsSync(values) {\n        return values.map(asPosition);\n    }\n    function asRange(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return { start: asPosition(value.start), end: asPosition(value.end) };\n    }\n    function asRanges(values) {\n        return values.map(asRange);\n    }\n    function asLocation(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return proto.Location.create(asUri(value.uri), asRange(value.range));\n    }\n    function asDiagnosticSeverity(value) {\n        switch (value) {\n            case code.DiagnosticSeverity.Error:\n                return proto.DiagnosticSeverity.Error;\n            case code.DiagnosticSeverity.Warning:\n                return proto.DiagnosticSeverity.Warning;\n            case code.DiagnosticSeverity.Information:\n                return proto.DiagnosticSeverity.Information;\n            case code.DiagnosticSeverity.Hint:\n                return proto.DiagnosticSeverity.Hint;\n        }\n    }\n    function asDiagnosticTags(tags) {\n        if (!tags) {\n            return undefined;\n        }\n        const result = [];\n        for (const tag of tags) {\n            const converted = asDiagnosticTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length > 0 ? result : undefined;\n    }\n    function asDiagnosticTag(tag) {\n        switch (tag) {\n            case code.DiagnosticTag.Unnecessary:\n                return proto.DiagnosticTag.Unnecessary;\n            case code.DiagnosticTag.Deprecated:\n                return proto.DiagnosticTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asRelatedInformation(item) {\n        return {\n            message: item.message,\n            location: asLocation(item.location)\n        };\n    }\n    function asRelatedInformations(items) {\n        return items.map(asRelatedInformation);\n    }\n    function asDiagnosticCode(value) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        if (Is.number(value) || Is.string(value)) {\n            return value;\n        }\n        return { value: value.value, target: asUri(value.target) };\n    }\n    function asDiagnostic(item) {\n        const result = proto.Diagnostic.create(asRange(item.range), item.message);\n        const protocolDiagnostic = item instanceof protocolDiagnostic_1.ProtocolDiagnostic ? item : undefined;\n        if (protocolDiagnostic !== undefined && protocolDiagnostic.data !== undefined) {\n            result.data = protocolDiagnostic.data;\n        }\n        const code = asDiagnosticCode(item.code);\n        if (protocolDiagnostic_1.DiagnosticCode.is(code)) {\n            if (protocolDiagnostic !== undefined && protocolDiagnostic.hasDiagnosticCode) {\n                result.code = code;\n            }\n            else {\n                result.code = code.value;\n                result.codeDescription = { href: code.target };\n            }\n        }\n        else {\n            result.code = code;\n        }\n        if (Is.number(item.severity)) {\n            result.severity = asDiagnosticSeverity(item.severity);\n        }\n        if (Array.isArray(item.tags)) {\n            result.tags = asDiagnosticTags(item.tags);\n        }\n        if (item.relatedInformation) {\n            result.relatedInformation = asRelatedInformations(item.relatedInformation);\n        }\n        if (item.source) {\n            result.source = item.source;\n        }\n        return result;\n    }\n    function asDiagnostics(items, token) {\n        if (items === undefined || items === null) {\n            return items;\n        }\n        return async.map(items, asDiagnostic, token);\n    }\n    function asDiagnosticsSync(items) {\n        if (items === undefined || items === null) {\n            return items;\n        }\n        return items.map(asDiagnostic);\n    }\n    function asDocumentation(format, documentation) {\n        switch (format) {\n            case '$string':\n                return documentation;\n            case proto.MarkupKind.PlainText:\n                return { kind: format, value: documentation };\n            case proto.MarkupKind.Markdown:\n                return { kind: format, value: documentation.value };\n            default:\n                return `Unsupported Markup content received. Kind is: ${format}`;\n        }\n    }\n    function asCompletionItemTag(tag) {\n        switch (tag) {\n            case code.CompletionItemTag.Deprecated:\n                return proto.CompletionItemTag.Deprecated;\n        }\n        return undefined;\n    }\n    function asCompletionItemTags(tags) {\n        if (tags === undefined) {\n            return tags;\n        }\n        const result = [];\n        for (const tag of tags) {\n            const converted = asCompletionItemTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result;\n    }\n    function asCompletionItemKind(value, original) {\n        if (original !== undefined) {\n            return original;\n        }\n        return value + 1;\n    }\n    function asCompletionItem(item, labelDetailsSupport = false) {\n        let label;\n        let labelDetails;\n        if (Is.string(item.label)) {\n            label = item.label;\n        }\n        else {\n            label = item.label.label;\n            if (labelDetailsSupport && (item.label.detail !== undefined || item.label.description !== undefined)) {\n                labelDetails = { detail: item.label.detail, description: item.label.description };\n            }\n        }\n        const result = { label: label };\n        if (labelDetails !== undefined) {\n            result.labelDetails = labelDetails;\n        }\n        const protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        // We only send items back we created. So this can't be something else than\n        // a string right now.\n        if (item.documentation) {\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\n                result.documentation = item.documentation;\n            }\n            else {\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\n            }\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        fillPrimaryInsertText(result, item);\n        if (Is.number(item.kind)) {\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\n        }\n        if (item.commitCharacters) {\n            result.commitCharacters = item.commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        const tags = asCompletionItemTags(item.tags);\n        if (protocolItem) {\n            if (protocolItem.data !== undefined) {\n                result.data = protocolItem.data;\n            }\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\n                if (protocolItem.deprecated === true && tags !== undefined && tags.length > 0) {\n                    const index = tags.indexOf(code.CompletionItemTag.Deprecated);\n                    if (index !== -1) {\n                        tags.splice(index, 1);\n                    }\n                }\n                result.deprecated = protocolItem.deprecated;\n            }\n            if (protocolItem.insertTextMode !== undefined) {\n                result.insertTextMode = protocolItem.insertTextMode;\n            }\n        }\n        if (tags !== undefined && tags.length > 0) {\n            result.tags = tags;\n        }\n        if (result.insertTextMode === undefined && item.keepWhitespace === true) {\n            result.insertTextMode = proto.InsertTextMode.adjustIndentation;\n        }\n        return result;\n    }\n    function fillPrimaryInsertText(target, source) {\n        let format = proto.InsertTextFormat.PlainText;\n        let text = undefined;\n        let range = undefined;\n        if (source.textEdit) {\n            text = source.textEdit.newText;\n            range = source.textEdit.range;\n        }\n        else if (source.insertText instanceof code.SnippetString) {\n            format = proto.InsertTextFormat.Snippet;\n            text = source.insertText.value;\n        }\n        else {\n            text = source.insertText;\n        }\n        if (source.range) {\n            range = source.range;\n        }\n        target.insertTextFormat = format;\n        if (source.fromEdit && text !== undefined && range !== undefined) {\n            target.textEdit = asCompletionTextEdit(text, range);\n        }\n        else {\n            target.insertText = text;\n        }\n    }\n    function asCompletionTextEdit(newText, range) {\n        if (InsertReplaceRange.is(range)) {\n            return proto.InsertReplaceEdit.create(newText, asRange(range.inserting), asRange(range.replacing));\n        }\n        else {\n            return { newText, range: asRange(range) };\n        }\n    }\n    function asTextEdit(edit) {\n        return { range: asRange(edit.range), newText: edit.newText };\n    }\n    function asTextEdits(edits) {\n        if (edits === undefined || edits === null) {\n            return edits;\n        }\n        return edits.map(asTextEdit);\n    }\n    function asSymbolKind(item) {\n        if (item <= code.SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return (item + 1);\n        }\n        return proto.SymbolKind.Property;\n    }\n    function asSymbolTag(item) {\n        return item;\n    }\n    function asSymbolTags(items) {\n        return items.map(asSymbolTag);\n    }\n    function asReferenceParams(textDocument, position, options) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: { includeDeclaration: options.includeDeclaration }\n        };\n    }\n    async function asCodeAction(item, token) {\n        const result = proto.CodeAction.create(item.title);\n        if (item instanceof protocolCodeAction_1.default && item.data !== undefined) {\n            result.data = item.data;\n        }\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics !== undefined) {\n            result.diagnostics = await asDiagnostics(item.diagnostics, token);\n        }\n        if (item.edit !== undefined) {\n            throw new Error(`VS Code code actions can only be converted to a protocol code action without an edit.`);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        if (item.disabled !== undefined) {\n            result.disabled = { reason: item.disabled.reason };\n        }\n        if (item.isAI) {\n            result.tags ??= [];\n            result.tags.push(proto.CodeActionTag.LLMGenerated);\n        }\n        return result;\n    }\n    function asCodeActionSync(item) {\n        const result = proto.CodeAction.create(item.title);\n        if (item instanceof protocolCodeAction_1.default && item.data !== undefined) {\n            result.data = item.data;\n        }\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics !== undefined) {\n            result.diagnostics = asDiagnosticsSync(item.diagnostics);\n        }\n        if (item.edit !== undefined) {\n            throw new Error(`VS Code code actions can only be converted to a protocol code action without an edit.`);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        if (item.disabled !== undefined) {\n            result.disabled = { reason: item.disabled.reason };\n        }\n        if (item.isAI) {\n            result.tags ??= [];\n            result.tags.push(proto.CodeActionTag.LLMGenerated);\n        }\n        return result;\n    }\n    async function asCodeActionContext(context, token) {\n        if (context === undefined || context === null) {\n            return context;\n        }\n        let only;\n        if (context.only && Is.string(context.only.value)) {\n            only = [context.only.value];\n        }\n        return proto.CodeActionContext.create(await asDiagnostics(context.diagnostics, token), only, asCodeActionTriggerKind(context.triggerKind));\n    }\n    function asCodeActionContextSync(context) {\n        if (context === undefined || context === null) {\n            return context;\n        }\n        let only;\n        if (context.only && Is.string(context.only.value)) {\n            only = [context.only.value];\n        }\n        return proto.CodeActionContext.create(asDiagnosticsSync(context.diagnostics), only, asCodeActionTriggerKind(context.triggerKind));\n    }\n    function asCodeActionTriggerKind(kind) {\n        switch (kind) {\n            case code.CodeActionTriggerKind.Invoke:\n                return proto.CodeActionTriggerKind.Invoked;\n            case code.CodeActionTriggerKind.Automatic:\n                return proto.CodeActionTriggerKind.Automatic;\n            default:\n                return undefined;\n        }\n    }\n    function asCodeActionKind(item) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        return item.value;\n    }\n    function asInlineValueContext(context) {\n        return proto.InlineValueContext.create(context.frameId, asRange(context.stoppedLocation));\n    }\n    function asInlineCompletionParams(document, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(document), position: asPosition(position),\n            context: asInlineCompletionContext(context)\n        };\n    }\n    function asInlineCompletionContext(context) {\n        return {\n            triggerKind: asInlineCompletionTriggerKind(context.triggerKind),\n            selectedCompletionInfo: asSelectedCompletionInfo(context.selectedCompletionInfo)\n        };\n    }\n    function asInlineCompletionTriggerKind(kind) {\n        switch (kind) {\n            case code.InlineCompletionTriggerKind.Invoke:\n                return proto.InlineCompletionTriggerKind.Invoked;\n            case code.InlineCompletionTriggerKind.Automatic:\n                return proto.InlineCompletionTriggerKind.Automatic;\n        }\n    }\n    function asSelectedCompletionInfo(info) {\n        if (info === undefined || info === null) {\n            return undefined;\n        }\n        return { range: asRange(info.range), text: info.text };\n    }\n    function asCommand(item) {\n        const result = proto.Command.create(item.title, item.command);\n        if (item.tooltip) {\n            result.tooltip = item.tooltip;\n        }\n        if (item.arguments) {\n            result.arguments = item.arguments;\n        }\n        return result;\n    }\n    function asCodeLens(item) {\n        const result = proto.CodeLens.create(asRange(item.range));\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item instanceof protocolCodeLens_1.default) {\n            if (item.data) {\n                result.data = item.data;\n            }\n        }\n        return result;\n    }\n    function asFormattingOptions(options, fileOptions) {\n        const result = { tabSize: options.tabSize, insertSpaces: options.insertSpaces };\n        if (fileOptions.trimTrailingWhitespace) {\n            result.trimTrailingWhitespace = true;\n        }\n        if (fileOptions.trimFinalNewlines) {\n            result.trimFinalNewlines = true;\n        }\n        if (fileOptions.insertFinalNewline) {\n            result.insertFinalNewline = true;\n        }\n        return result;\n    }\n    function asDocumentSymbolParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asCodeLensParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asDocumentLink(item) {\n        const result = proto.DocumentLink.create(asRange(item.range));\n        if (item.target) {\n            result.target = asUri(item.target);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = item.tooltip;\n        }\n        const protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\n        if (protocolItem && protocolItem.data) {\n            result.data = protocolItem.data;\n        }\n        return result;\n    }\n    function asDocumentLinkParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asCallHierarchyItem(value) {\n        const result = {\n            name: value.name,\n            kind: asSymbolKind(value.kind),\n            uri: asUri(value.uri),\n            range: asRange(value.range),\n            selectionRange: asRange(value.selectionRange)\n        };\n        if (value.detail !== undefined && value.detail.length > 0) {\n            result.detail = value.detail;\n        }\n        if (value.tags !== undefined) {\n            result.tags = asSymbolTags(value.tags);\n        }\n        if (value instanceof protocolCallHierarchyItem_1.default && value.data !== undefined) {\n            result.data = value.data;\n        }\n        return result;\n    }\n    function asTypeHierarchyItem(value) {\n        const result = {\n            name: value.name,\n            kind: asSymbolKind(value.kind),\n            uri: asUri(value.uri),\n            range: asRange(value.range),\n            selectionRange: asRange(value.selectionRange),\n        };\n        if (value.detail !== undefined && value.detail.length > 0) {\n            result.detail = value.detail;\n        }\n        if (value.tags !== undefined) {\n            result.tags = asSymbolTags(value.tags);\n        }\n        if (value instanceof protocolTypeHierarchyItem_1.default && value.data !== undefined) {\n            result.data = value.data;\n        }\n        return result;\n    }\n    function asWorkspaceSymbol(item) {\n        const result = item instanceof protocolWorkspaceSymbol_1.default\n            ? { name: item.name, kind: asSymbolKind(item.kind), location: item.hasRange ? asLocation(item.location) : { uri: _uriConverter(item.location.uri) }, data: item.data }\n            : { name: item.name, kind: asSymbolKind(item.kind), location: asLocation(item.location) };\n        if (item.tags !== undefined) {\n            result.tags = asSymbolTags(item.tags);\n        }\n        if (item.containerName !== '') {\n            result.containerName = item.containerName;\n        }\n        return result;\n    }\n    function asInlayHint(item) {\n        const label = typeof item.label === 'string'\n            ? item.label\n            : item.label.map(asInlayHintLabelPart);\n        const result = proto.InlayHint.create(asPosition(item.position), label);\n        if (item.kind !== undefined) {\n            result.kind = item.kind;\n        }\n        if (item.textEdits !== undefined) {\n            result.textEdits = asTextEdits(item.textEdits);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = asTooltip(item.tooltip);\n        }\n        if (item.paddingLeft !== undefined) {\n            result.paddingLeft = item.paddingLeft;\n        }\n        if (item.paddingRight !== undefined) {\n            result.paddingRight = item.paddingRight;\n        }\n        if (item instanceof protocolInlayHint_1.default && item.data !== undefined) {\n            result.data = item.data;\n        }\n        return result;\n    }\n    function asInlayHintLabelPart(item) {\n        const result = proto.InlayHintLabelPart.create(item.value);\n        if (item.location !== undefined) {\n            result.location = asLocation(item.location);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = asTooltip(item.tooltip);\n        }\n        return result;\n    }\n    function asTooltip(value) {\n        if (typeof value === 'string') {\n            return value;\n        }\n        const result = {\n            kind: proto.MarkupKind.Markdown,\n            value: value.value\n        };\n        return result;\n    }\n    return {\n        asUri,\n        asTextDocumentIdentifier,\n        asTextDocumentItem,\n        asVersionedTextDocumentIdentifier,\n        asOpenTextDocumentParams,\n        asChangeTextDocumentParams,\n        asCloseTextDocumentParams,\n        asSaveTextDocumentParams,\n        asWillSaveTextDocumentParams,\n        asDidCreateFilesParams,\n        asDidRenameFilesParams,\n        asDidDeleteFilesParams,\n        asWillCreateFilesParams,\n        asWillRenameFilesParams,\n        asWillDeleteFilesParams,\n        asTextDocumentPositionParams,\n        asCompletionParams,\n        asSignatureHelpParams,\n        asWorkerPosition,\n        asRange,\n        asRanges,\n        asPosition,\n        asPositions,\n        asPositionsSync,\n        asLocation,\n        asDiagnosticSeverity,\n        asDiagnosticTag,\n        asDiagnostic,\n        asDiagnostics,\n        asDiagnosticsSync,\n        asCompletionItem,\n        asTextEdit,\n        asSymbolKind,\n        asSymbolTag,\n        asSymbolTags,\n        asReferenceParams,\n        asCodeAction,\n        asCodeActionSync,\n        asCodeActionContext,\n        asCodeActionContextSync,\n        asInlineValueContext,\n        asCommand,\n        asCodeLens,\n        asFormattingOptions,\n        asDocumentSymbolParams,\n        asCodeLensParams,\n        asDocumentLink,\n        asDocumentLinkParams,\n        asCallHierarchyItem,\n        asTypeHierarchyItem,\n        asInlayHint,\n        asWorkspaceSymbol,\n        asInlineCompletionParams,\n        asInlineCompletionContext\n    };\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReferencesFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass ReferencesFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'references').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.referencesProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideReferences: (document, position, options, token) => {\n                const client = this._client;\n                const _providerReferences = (document, position, options, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asReferences(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideReferences\n                    ? middleware.provideReferences(document, position, options, token, _providerReferences)\n                    : _providerReferences(document, position, options, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.ReferencesFeature = ReferencesFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nexport var DocumentUri;\n(function (DocumentUri) {\n    function is(value) {\n        return typeof value === 'string';\n    }\n    DocumentUri.is = is;\n})(DocumentUri || (DocumentUri = {}));\nexport var URI;\n(function (URI) {\n    function is(value) {\n        return typeof value === 'string';\n    }\n    URI.is = is;\n})(URI || (URI = {}));\nexport var integer;\n(function (integer) {\n    integer.MIN_VALUE = -2147483648;\n    integer.MAX_VALUE = 2147483647;\n    function is(value) {\n        return typeof value === 'number' && integer.MIN_VALUE <= value && value <= integer.MAX_VALUE;\n    }\n    integer.is = is;\n})(integer || (integer = {}));\nexport var uinteger;\n(function (uinteger) {\n    uinteger.MIN_VALUE = 0;\n    uinteger.MAX_VALUE = 2147483647;\n    function is(value) {\n        return typeof value === 'number' && uinteger.MIN_VALUE <= value && value <= uinteger.MAX_VALUE;\n    }\n    uinteger.is = is;\n})(uinteger || (uinteger = {}));\n/**\n * The Position namespace provides helper functions to work with\n * {@link Position} literals.\n */\nexport var Position;\n(function (Position) {\n    /**\n     * Creates a new Position literal from the given line and character.\n     * @param line The position's line.\n     * @param character The position's character.\n     */\n    function create(line, character) {\n        if (line === Number.MAX_VALUE) {\n            line = uinteger.MAX_VALUE;\n        }\n        if (character === Number.MAX_VALUE) {\n            character = uinteger.MAX_VALUE;\n        }\n        return { line, character };\n    }\n    Position.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Position} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.uinteger(candidate.line) && Is.uinteger(candidate.character);\n    }\n    Position.is = is;\n})(Position || (Position = {}));\n/**\n * The Range namespace provides helper functions to work with\n * {@link Range} literals.\n */\nexport var Range;\n(function (Range) {\n    function create(one, two, three, four) {\n        if (Is.uinteger(one) && Is.uinteger(two) && Is.uinteger(three) && Is.uinteger(four)) {\n            return { start: Position.create(one, two), end: Position.create(three, four) };\n        }\n        else if (Position.is(one) && Position.is(two)) {\n            return { start: one, end: two };\n        }\n        else {\n            throw new Error(`Range#create called with invalid arguments[${one}, ${two}, ${three}, ${four}]`);\n        }\n    }\n    Range.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Range} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n    }\n    Range.is = is;\n})(Range || (Range = {}));\n/**\n * The Location namespace provides helper functions to work with\n * {@link Location} literals.\n */\nexport var Location;\n(function (Location) {\n    /**\n     * Creates a Location literal.\n     * @param uri The location's uri.\n     * @param range The location's range.\n     */\n    function create(uri, range) {\n        return { uri, range };\n    }\n    Location.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Location} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n    }\n    Location.is = is;\n})(Location || (Location = {}));\n/**\n * The LocationLink namespace provides helper functions to work with\n * {@link LocationLink} literals.\n */\nexport var LocationLink;\n(function (LocationLink) {\n    /**\n     * Creates a LocationLink literal.\n     * @param targetUri The definition's uri.\n     * @param targetRange The full range of the definition.\n     * @param targetSelectionRange The span of the symbol definition at the target.\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\n     */\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\n        return { targetUri, targetRange, targetSelectionRange, originSelectionRange };\n    }\n    LocationLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link LocationLink} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\n            && Range.is(candidate.targetSelectionRange)\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\n    }\n    LocationLink.is = is;\n})(LocationLink || (LocationLink = {}));\n/**\n * The Color namespace provides helper functions to work with\n * {@link Color} literals.\n */\nexport var Color;\n(function (Color) {\n    /**\n     * Creates a new Color literal.\n     */\n    function create(red, green, blue, alpha) {\n        return {\n            red,\n            green,\n            blue,\n            alpha,\n        };\n    }\n    Color.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Color} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.numberRange(candidate.red, 0, 1)\n            && Is.numberRange(candidate.green, 0, 1)\n            && Is.numberRange(candidate.blue, 0, 1)\n            && Is.numberRange(candidate.alpha, 0, 1);\n    }\n    Color.is = is;\n})(Color || (Color = {}));\n/**\n * The ColorInformation namespace provides helper functions to work with\n * {@link ColorInformation} literals.\n */\nexport var ColorInformation;\n(function (ColorInformation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(range, color) {\n        return {\n            range,\n            color,\n        };\n    }\n    ColorInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.range) && Color.is(candidate.color);\n    }\n    ColorInformation.is = is;\n})(ColorInformation || (ColorInformation = {}));\n/**\n * The Color namespace provides helper functions to work with\n * {@link ColorPresentation} literals.\n */\nexport var ColorPresentation;\n(function (ColorPresentation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(label, textEdit, additionalTextEdits) {\n        return {\n            label,\n            textEdit,\n            additionalTextEdits,\n        };\n    }\n    ColorPresentation.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.label)\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\n    }\n    ColorPresentation.is = is;\n})(ColorPresentation || (ColorPresentation = {}));\n/**\n * A set of predefined range kinds.\n */\nexport var FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind.Comment = 'comment';\n    /**\n     * Folding range for an import or include\n     */\n    FoldingRangeKind.Imports = 'imports';\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind.Region = 'region';\n})(FoldingRangeKind || (FoldingRangeKind = {}));\n/**\n * The folding range namespace provides helper functions to work with\n * {@link FoldingRange} literals.\n */\nexport var FoldingRange;\n(function (FoldingRange) {\n    /**\n     * Creates a new FoldingRange literal.\n     */\n    function create(startLine, endLine, startCharacter, endCharacter, kind, collapsedText) {\n        const result = {\n            startLine,\n            endLine\n        };\n        if (Is.defined(startCharacter)) {\n            result.startCharacter = startCharacter;\n        }\n        if (Is.defined(endCharacter)) {\n            result.endCharacter = endCharacter;\n        }\n        if (Is.defined(kind)) {\n            result.kind = kind;\n        }\n        if (Is.defined(collapsedText)) {\n            result.collapsedText = collapsedText;\n        }\n        return result;\n    }\n    FoldingRange.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link FoldingRange} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.uinteger(candidate.startLine) && Is.uinteger(candidate.startLine)\n            && (Is.undefined(candidate.startCharacter) || Is.uinteger(candidate.startCharacter))\n            && (Is.undefined(candidate.endCharacter) || Is.uinteger(candidate.endCharacter))\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\n    }\n    FoldingRange.is = is;\n})(FoldingRange || (FoldingRange = {}));\n/**\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\n * {@link DiagnosticRelatedInformation} literals.\n */\nexport var DiagnosticRelatedInformation;\n(function (DiagnosticRelatedInformation) {\n    /**\n     * Creates a new DiagnosticRelatedInformation literal.\n     */\n    function create(location, message) {\n        return {\n            location,\n            message\n        };\n    }\n    DiagnosticRelatedInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link DiagnosticRelatedInformation} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\n    }\n    DiagnosticRelatedInformation.is = is;\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\n/**\n * The diagnostic's severity.\n */\nexport var DiagnosticSeverity;\n(function (DiagnosticSeverity) {\n    /**\n     * Reports an error.\n     */\n    DiagnosticSeverity.Error = 1;\n    /**\n     * Reports a warning.\n     */\n    DiagnosticSeverity.Warning = 2;\n    /**\n     * Reports an information.\n     */\n    DiagnosticSeverity.Information = 3;\n    /**\n     * Reports a hint.\n     */\n    DiagnosticSeverity.Hint = 4;\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\n/**\n * The diagnostic tags.\n *\n * @since 3.15.0\n */\nexport var DiagnosticTag;\n(function (DiagnosticTag) {\n    /**\n     * Unused or unnecessary code.\n     *\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\n     * an error squiggle.\n     */\n    DiagnosticTag.Unnecessary = 1;\n    /**\n     * Deprecated or obsolete code.\n     *\n     * Clients are allowed to rendered diagnostics with this tag strike through.\n     */\n    DiagnosticTag.Deprecated = 2;\n})(DiagnosticTag || (DiagnosticTag = {}));\n/**\n * The CodeDescription namespace provides functions to deal with descriptions for diagnostic codes.\n *\n * @since 3.16.0\n */\nexport var CodeDescription;\n(function (CodeDescription) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.href);\n    }\n    CodeDescription.is = is;\n})(CodeDescription || (CodeDescription = {}));\n/**\n * The Diagnostic namespace provides helper functions to work with\n * {@link Diagnostic} literals.\n */\nexport var Diagnostic;\n(function (Diagnostic) {\n    /**\n     * Creates a new Diagnostic literal.\n     */\n    function create(range, message, severity, code, source, relatedInformation) {\n        const result = { range, message };\n        if (Is.defined(severity)) {\n            result.severity = severity;\n        }\n        if (Is.defined(code)) {\n            result.code = code;\n        }\n        if (Is.defined(source)) {\n            result.source = source;\n        }\n        if (Is.defined(relatedInformation)) {\n            result.relatedInformation = relatedInformation;\n        }\n        return result;\n    }\n    Diagnostic.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Diagnostic} interface.\n     */\n    function is(value) {\n        var _a;\n        const candidate = value;\n        return Is.defined(candidate)\n            && Range.is(candidate.range)\n            && Is.string(candidate.message)\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n            && (Is.integer(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n            && (Is.undefined(candidate.codeDescription) || (Is.string((_a = candidate.codeDescription) === null || _a === void 0 ? void 0 : _a.href)))\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\n    }\n    Diagnostic.is = is;\n})(Diagnostic || (Diagnostic = {}));\n/**\n * The Command namespace provides helper functions to work with\n * {@link Command} literals.\n */\nexport var Command;\n(function (Command) {\n    /**\n     * Creates a new Command literal.\n     */\n    function create(title, command, ...args) {\n        const result = { title, command };\n        if (Is.defined(args) && args.length > 0) {\n            result.arguments = args;\n        }\n        return result;\n    }\n    Command.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Command} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.title) && (candidate.tooltip === undefined || Is.string(candidate.tooltip)) && Is.string(candidate.command);\n    }\n    Command.is = is;\n})(Command || (Command = {}));\n/**\n * The TextEdit namespace provides helper function to create replace,\n * insert and delete edits more easily.\n */\nexport var TextEdit;\n(function (TextEdit) {\n    /**\n     * Creates a replace text edit.\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     */\n    function replace(range, newText) {\n        return { range, newText };\n    }\n    TextEdit.replace = replace;\n    /**\n     * Creates an insert text edit.\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     */\n    function insert(position, newText) {\n        return { range: { start: position, end: position }, newText };\n    }\n    TextEdit.insert = insert;\n    /**\n     * Creates a delete text edit.\n     * @param range The range of text to be deleted.\n     */\n    function del(range) {\n        return { range, newText: '' };\n    }\n    TextEdit.del = del;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && Is.string(candidate.newText)\n            && Range.is(candidate.range);\n    }\n    TextEdit.is = is;\n})(TextEdit || (TextEdit = {}));\nexport var ChangeAnnotation;\n(function (ChangeAnnotation) {\n    function create(label, needsConfirmation, description) {\n        const result = { label };\n        if (needsConfirmation !== undefined) {\n            result.needsConfirmation = needsConfirmation;\n        }\n        if (description !== undefined) {\n            result.description = description;\n        }\n        return result;\n    }\n    ChangeAnnotation.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.label) &&\n            (Is.boolean(candidate.needsConfirmation) || candidate.needsConfirmation === undefined) &&\n            (Is.string(candidate.description) || candidate.description === undefined);\n    }\n    ChangeAnnotation.is = is;\n})(ChangeAnnotation || (ChangeAnnotation = {}));\nexport var ChangeAnnotationIdentifier;\n(function (ChangeAnnotationIdentifier) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate);\n    }\n    ChangeAnnotationIdentifier.is = is;\n})(ChangeAnnotationIdentifier || (ChangeAnnotationIdentifier = {}));\nexport var AnnotatedTextEdit;\n(function (AnnotatedTextEdit) {\n    /**\n     * Creates an annotated replace text edit.\n     *\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     * @param annotation The annotation.\n     */\n    function replace(range, newText, annotation) {\n        return { range, newText, annotationId: annotation };\n    }\n    AnnotatedTextEdit.replace = replace;\n    /**\n     * Creates an annotated insert text edit.\n     *\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     * @param annotation The annotation.\n     */\n    function insert(position, newText, annotation) {\n        return { range: { start: position, end: position }, newText, annotationId: annotation };\n    }\n    AnnotatedTextEdit.insert = insert;\n    /**\n     * Creates an annotated delete text edit.\n     *\n     * @param range The range of text to be deleted.\n     * @param annotation The annotation.\n     */\n    function del(range, annotation) {\n        return { range, newText: '', annotationId: annotation };\n    }\n    AnnotatedTextEdit.del = del;\n    function is(value) {\n        const candidate = value;\n        return TextEdit.is(candidate) && (ChangeAnnotation.is(candidate.annotationId) || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    AnnotatedTextEdit.is = is;\n})(AnnotatedTextEdit || (AnnotatedTextEdit = {}));\n/**\n * The TextDocumentEdit namespace provides helper function to create\n * an edit that manipulates a text document.\n */\nexport var TextDocumentEdit;\n(function (TextDocumentEdit) {\n    /**\n     * Creates a new `TextDocumentEdit`\n     */\n    function create(textDocument, edits) {\n        return { textDocument, edits };\n    }\n    TextDocumentEdit.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate)\n            && OptionalVersionedTextDocumentIdentifier.is(candidate.textDocument)\n            && Array.isArray(candidate.edits);\n    }\n    TextDocumentEdit.is = is;\n})(TextDocumentEdit || (TextDocumentEdit = {}));\nexport var CreateFile;\n(function (CreateFile) {\n    function create(uri, options, annotation) {\n        const result = {\n            kind: 'create',\n            uri\n        };\n        if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    CreateFile.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) && (candidate.options === undefined ||\n            ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    CreateFile.is = is;\n})(CreateFile || (CreateFile = {}));\nexport var RenameFile;\n(function (RenameFile) {\n    function create(oldUri, newUri, options, annotation) {\n        const result = {\n            kind: 'rename',\n            oldUri,\n            newUri\n        };\n        if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    RenameFile.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) && (candidate.options === undefined ||\n            ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    RenameFile.is = is;\n})(RenameFile || (RenameFile = {}));\nexport var DeleteFile;\n(function (DeleteFile) {\n    function create(uri, options, annotation) {\n        const result = {\n            kind: 'delete',\n            uri\n        };\n        if (options !== undefined && (options.recursive !== undefined || options.ignoreIfNotExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    DeleteFile.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) && (candidate.options === undefined ||\n            ((candidate.options.recursive === undefined || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === undefined || Is.boolean(candidate.options.ignoreIfNotExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    DeleteFile.is = is;\n})(DeleteFile || (DeleteFile = {}));\nexport var WorkspaceEdit;\n(function (WorkspaceEdit) {\n    function is(value) {\n        const candidate = value;\n        return candidate &&\n            (candidate.changes !== undefined || candidate.documentChanges !== undefined) &&\n            (candidate.documentChanges === undefined || candidate.documentChanges.every((change) => {\n                if (Is.string(change.kind)) {\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\n                }\n                else {\n                    return TextDocumentEdit.is(change);\n                }\n            }));\n    }\n    WorkspaceEdit.is = is;\n})(WorkspaceEdit || (WorkspaceEdit = {}));\nclass TextEditChangeImpl {\n    constructor(edits, changeAnnotations) {\n        this.edits = edits;\n        this.changeAnnotations = changeAnnotations;\n    }\n    insert(position, newText, annotation) {\n        let edit;\n        let id;\n        if (annotation === undefined) {\n            edit = TextEdit.insert(position, newText);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.insert(position, newText, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.insert(position, newText, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    replace(range, newText, annotation) {\n        let edit;\n        let id;\n        if (annotation === undefined) {\n            edit = TextEdit.replace(range, newText);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.replace(range, newText, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.replace(range, newText, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    delete(range, annotation) {\n        let edit;\n        let id;\n        if (annotation === undefined) {\n            edit = TextEdit.del(range);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.del(range, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.del(range, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    add(edit) {\n        this.edits.push(edit);\n    }\n    all() {\n        return this.edits;\n    }\n    clear() {\n        this.edits.splice(0, this.edits.length);\n    }\n    assertChangeAnnotations(value) {\n        if (value === undefined) {\n            throw new Error(`Text edit change is not configured to manage change annotations.`);\n        }\n    }\n}\nexport var SnippetTextEdit;\n(function (SnippetTextEdit) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && Range.is(candidate.range)\n            && StringValue.isSnippet(candidate.snippet)\n            && (candidate.annotationId === undefined ||\n                (ChangeAnnotation.is(candidate.annotationId) || ChangeAnnotationIdentifier.is(candidate.annotationId)));\n    }\n    SnippetTextEdit.is = is;\n})(SnippetTextEdit || (SnippetTextEdit = {}));\n/**\n * A helper class\n */\nclass ChangeAnnotations {\n    constructor(annotations) {\n        this._annotations = annotations === undefined ? Object.create(null) : annotations;\n        this._counter = 0;\n        this._size = 0;\n    }\n    all() {\n        return this._annotations;\n    }\n    get size() {\n        return this._size;\n    }\n    manage(idOrAnnotation, annotation) {\n        let id;\n        if (ChangeAnnotationIdentifier.is(idOrAnnotation)) {\n            id = idOrAnnotation;\n        }\n        else {\n            id = this.nextId();\n            annotation = idOrAnnotation;\n        }\n        if (this._annotations[id] !== undefined) {\n            throw new Error(`Id ${id} is already in use.`);\n        }\n        if (annotation === undefined) {\n            throw new Error(`No annotation provided for id ${id}`);\n        }\n        this._annotations[id] = annotation;\n        this._size++;\n        return id;\n    }\n    nextId() {\n        this._counter++;\n        return this._counter.toString();\n    }\n}\n/**\n * A workspace change helps constructing changes to a workspace.\n */\nexport class WorkspaceChange {\n    constructor(workspaceEdit) {\n        this._textEditChanges = Object.create(null);\n        if (workspaceEdit !== undefined) {\n            this._workspaceEdit = workspaceEdit;\n            if (workspaceEdit.documentChanges) {\n                this._changeAnnotations = new ChangeAnnotations(workspaceEdit.changeAnnotations);\n                workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                workspaceEdit.documentChanges.forEach((change) => {\n                    if (TextDocumentEdit.is(change)) {\n                        const textEditChange = new TextEditChangeImpl(change.edits, this._changeAnnotations);\n                        this._textEditChanges[change.textDocument.uri] = textEditChange;\n                    }\n                });\n            }\n            else if (workspaceEdit.changes) {\n                Object.keys(workspaceEdit.changes).forEach((key) => {\n                    const textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                    this._textEditChanges[key] = textEditChange;\n                });\n            }\n        }\n        else {\n            this._workspaceEdit = {};\n        }\n    }\n    /**\n     * Returns the underlying {@link WorkspaceEdit} literal\n     * use to be returned from a workspace edit operation like rename.\n     */\n    get edit() {\n        this.initDocumentChanges();\n        if (this._changeAnnotations !== undefined) {\n            if (this._changeAnnotations.size === 0) {\n                this._workspaceEdit.changeAnnotations = undefined;\n            }\n            else {\n                this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n            }\n        }\n        return this._workspaceEdit;\n    }\n    getTextEditChange(key) {\n        if (OptionalVersionedTextDocumentIdentifier.is(key)) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            const textDocument = { uri: key.uri, version: key.version };\n            let result = this._textEditChanges[textDocument.uri];\n            if (!result) {\n                const edits = [];\n                const textDocumentEdit = {\n                    textDocument,\n                    edits\n                };\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                result = new TextEditChangeImpl(edits, this._changeAnnotations);\n                this._textEditChanges[textDocument.uri] = result;\n            }\n            return result;\n        }\n        else {\n            this.initChanges();\n            if (this._workspaceEdit.changes === undefined) {\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\n            }\n            let result = this._textEditChanges[key];\n            if (!result) {\n                const edits = [];\n                this._workspaceEdit.changes[key] = edits;\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[key] = result;\n            }\n            return result;\n        }\n    }\n    initDocumentChanges() {\n        if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n            this._changeAnnotations = new ChangeAnnotations();\n            this._workspaceEdit.documentChanges = [];\n            this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n        }\n    }\n    initChanges() {\n        if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n            this._workspaceEdit.changes = Object.create(null);\n        }\n    }\n    createFile(uri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        let annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        let operation;\n        let id;\n        if (annotation === undefined) {\n            operation = CreateFile.create(uri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = CreateFile.create(uri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    renameFile(oldUri, newUri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        let annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        let operation;\n        let id;\n        if (annotation === undefined) {\n            operation = RenameFile.create(oldUri, newUri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = RenameFile.create(oldUri, newUri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    deleteFile(uri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        let annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        let operation;\n        let id;\n        if (annotation === undefined) {\n            operation = DeleteFile.create(uri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = DeleteFile.create(uri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n}\n/**\n * The TextDocumentIdentifier namespace provides helper functions to work with\n * {@link TextDocumentIdentifier} literals.\n */\nexport var TextDocumentIdentifier;\n(function (TextDocumentIdentifier) {\n    /**\n     * Creates a new TextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     */\n    function create(uri) {\n        return { uri };\n    }\n    TextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link TextDocumentIdentifier} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri);\n    }\n    TextDocumentIdentifier.is = is;\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\n/**\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n * {@link VersionedTextDocumentIdentifier} literals.\n */\nexport var VersionedTextDocumentIdentifier;\n(function (VersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new VersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param version The document's version.\n     */\n    function create(uri, version) {\n        return { uri, version };\n    }\n    VersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link VersionedTextDocumentIdentifier} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.integer(candidate.version);\n    }\n    VersionedTextDocumentIdentifier.is = is;\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\n/**\n * The OptionalVersionedTextDocumentIdentifier namespace provides helper functions to work with\n * {@link OptionalVersionedTextDocumentIdentifier} literals.\n */\nexport var OptionalVersionedTextDocumentIdentifier;\n(function (OptionalVersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new OptionalVersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param version The document's version.\n     */\n    function create(uri, version) {\n        return { uri, version };\n    }\n    OptionalVersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link OptionalVersionedTextDocumentIdentifier} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.integer(candidate.version));\n    }\n    OptionalVersionedTextDocumentIdentifier.is = is;\n})(OptionalVersionedTextDocumentIdentifier || (OptionalVersionedTextDocumentIdentifier = {}));\n/**\n * Predefined Language kinds\n * @since 3.18.0\n */\nexport var LanguageKind;\n(function (LanguageKind) {\n    LanguageKind.ABAP = 'abap';\n    LanguageKind.WindowsBat = 'bat';\n    LanguageKind.BibTeX = 'bibtex';\n    LanguageKind.Clojure = 'clojure';\n    LanguageKind.Coffeescript = 'coffeescript';\n    LanguageKind.C = 'c';\n    LanguageKind.CPP = 'cpp';\n    LanguageKind.CSharp = 'csharp';\n    LanguageKind.CSS = 'css';\n    /**\n     * @since 3.18.0\n     * @proposed\n     */\n    LanguageKind.D = 'd';\n    /**\n     * @since 3.18.0\n     * @proposed\n     */\n    LanguageKind.Delphi = 'pascal';\n    LanguageKind.Diff = 'diff';\n    LanguageKind.Dart = 'dart';\n    LanguageKind.Dockerfile = 'dockerfile';\n    LanguageKind.Elixir = 'elixir';\n    LanguageKind.Erlang = 'erlang';\n    LanguageKind.FSharp = 'fsharp';\n    LanguageKind.GitCommit = 'git-commit';\n    LanguageKind.GitRebase = 'rebase';\n    LanguageKind.Go = 'go';\n    LanguageKind.Groovy = 'groovy';\n    LanguageKind.Handlebars = 'handlebars';\n    LanguageKind.Haskell = 'haskell';\n    LanguageKind.HTML = 'html';\n    LanguageKind.Ini = 'ini';\n    LanguageKind.Java = 'java';\n    LanguageKind.JavaScript = 'javascript';\n    LanguageKind.JavaScriptReact = 'javascriptreact';\n    LanguageKind.JSON = 'json';\n    LanguageKind.LaTeX = 'latex';\n    LanguageKind.Less = 'less';\n    LanguageKind.Lua = 'lua';\n    LanguageKind.Makefile = 'makefile';\n    LanguageKind.Markdown = 'markdown';\n    LanguageKind.ObjectiveC = 'objective-c';\n    LanguageKind.ObjectiveCPP = 'objective-cpp';\n    /**\n     * @since 3.18.0\n     * @proposed\n     */\n    LanguageKind.Pascal = 'pascal';\n    LanguageKind.Perl = 'perl';\n    LanguageKind.Perl6 = 'perl6';\n    LanguageKind.PHP = 'php';\n    LanguageKind.Powershell = 'powershell';\n    LanguageKind.Pug = 'jade';\n    LanguageKind.Python = 'python';\n    LanguageKind.R = 'r';\n    LanguageKind.Razor = 'razor';\n    LanguageKind.Ruby = 'ruby';\n    LanguageKind.Rust = 'rust';\n    LanguageKind.SCSS = 'scss';\n    LanguageKind.SASS = 'sass';\n    LanguageKind.Scala = 'scala';\n    LanguageKind.ShaderLab = 'shaderlab';\n    LanguageKind.ShellScript = 'shellscript';\n    LanguageKind.SQL = 'sql';\n    LanguageKind.Swift = 'swift';\n    LanguageKind.TypeScript = 'typescript';\n    LanguageKind.TypeScriptReact = 'typescriptreact';\n    LanguageKind.TeX = 'tex';\n    LanguageKind.VisualBasic = 'vb';\n    LanguageKind.XML = 'xml';\n    LanguageKind.XSL = 'xsl';\n    LanguageKind.YAML = 'yaml';\n})(LanguageKind || (LanguageKind = {}));\n/**\n * The TextDocumentItem namespace provides helper functions to work with\n * {@link TextDocumentItem} literals.\n */\nexport var TextDocumentItem;\n(function (TextDocumentItem) {\n    /**\n     * Creates a new TextDocumentItem literal.\n     * @param uri The document's uri.\n     * @param languageId The document's language identifier.\n     * @param version The document's version number.\n     * @param text The document's text.\n     */\n    function create(uri, languageId, version, text) {\n        return { uri, languageId, version, text };\n    }\n    TextDocumentItem.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link TextDocumentItem} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.integer(candidate.version) && Is.string(candidate.text);\n    }\n    TextDocumentItem.is = is;\n})(TextDocumentItem || (TextDocumentItem = {}));\n/**\n * Describes the content type that a client supports in various\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n *\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\n * are reserved for internal usage.\n */\nexport var MarkupKind;\n(function (MarkupKind) {\n    /**\n     * Plain text is supported as a content format\n     */\n    MarkupKind.PlainText = 'plaintext';\n    /**\n     * Markdown is supported as a content format\n     */\n    MarkupKind.Markdown = 'markdown';\n    /**\n     * Checks whether the given value is a value of the {@link MarkupKind} type.\n     */\n    function is(value) {\n        const candidate = value;\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\n    }\n    MarkupKind.is = is;\n})(MarkupKind || (MarkupKind = {}));\nexport var MarkupContent;\n(function (MarkupContent) {\n    /**\n     * Checks whether the given value conforms to the {@link MarkupContent} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\n    }\n    MarkupContent.is = is;\n})(MarkupContent || (MarkupContent = {}));\n/**\n * The kind of a completion entry.\n */\nexport var CompletionItemKind;\n(function (CompletionItemKind) {\n    CompletionItemKind.Text = 1;\n    CompletionItemKind.Method = 2;\n    CompletionItemKind.Function = 3;\n    CompletionItemKind.Constructor = 4;\n    CompletionItemKind.Field = 5;\n    CompletionItemKind.Variable = 6;\n    CompletionItemKind.Class = 7;\n    CompletionItemKind.Interface = 8;\n    CompletionItemKind.Module = 9;\n    CompletionItemKind.Property = 10;\n    CompletionItemKind.Unit = 11;\n    CompletionItemKind.Value = 12;\n    CompletionItemKind.Enum = 13;\n    CompletionItemKind.Keyword = 14;\n    CompletionItemKind.Snippet = 15;\n    CompletionItemKind.Color = 16;\n    CompletionItemKind.File = 17;\n    CompletionItemKind.Reference = 18;\n    CompletionItemKind.Folder = 19;\n    CompletionItemKind.EnumMember = 20;\n    CompletionItemKind.Constant = 21;\n    CompletionItemKind.Struct = 22;\n    CompletionItemKind.Event = 23;\n    CompletionItemKind.Operator = 24;\n    CompletionItemKind.TypeParameter = 25;\n})(CompletionItemKind || (CompletionItemKind = {}));\n/**\n * Defines whether the insert text in a completion item should be interpreted as\n * plain text or a snippet.\n */\nexport var InsertTextFormat;\n(function (InsertTextFormat) {\n    /**\n     * The primary text to be inserted is treated as a plain string.\n     */\n    InsertTextFormat.PlainText = 1;\n    /**\n     * The primary text to be inserted is treated as a snippet.\n     *\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n     * the end of the snippet. Placeholders with equal identifiers are linked,\n     * that is typing in one will update others too.\n     *\n     * See also: https://microsoft.github.io/language-server-protocol/specifications/specification-current/#snippet_syntax\n     */\n    InsertTextFormat.Snippet = 2;\n})(InsertTextFormat || (InsertTextFormat = {}));\n/**\n * Completion item tags are extra annotations that tweak the rendering of a completion\n * item.\n *\n * @since 3.15.0\n */\nexport var CompletionItemTag;\n(function (CompletionItemTag) {\n    /**\n     * Render a completion as obsolete, usually using a strike-out.\n     */\n    CompletionItemTag.Deprecated = 1;\n})(CompletionItemTag || (CompletionItemTag = {}));\n/**\n * The InsertReplaceEdit namespace provides functions to deal with insert / replace edits.\n *\n * @since 3.16.0\n */\nexport var InsertReplaceEdit;\n(function (InsertReplaceEdit) {\n    /**\n     * Creates a new insert / replace edit\n     */\n    function create(newText, insert, replace) {\n        return { newText, insert, replace };\n    }\n    InsertReplaceEdit.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link InsertReplaceEdit} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.newText) && Range.is(candidate.insert) && Range.is(candidate.replace);\n    }\n    InsertReplaceEdit.is = is;\n})(InsertReplaceEdit || (InsertReplaceEdit = {}));\n/**\n * How whitespace and indentation is handled during completion\n * item insertion.\n *\n * @since 3.16.0\n */\nexport var InsertTextMode;\n(function (InsertTextMode) {\n    /**\n     * The insertion or replace strings is taken as it is. If the\n     * value is multi line the lines below the cursor will be\n     * inserted using the indentation defined in the string value.\n     * The client will not apply any kind of adjustments to the\n     * string.\n     */\n    InsertTextMode.asIs = 1;\n    /**\n     * The editor adjusts leading whitespace of new lines so that\n     * they match the indentation up to the cursor of the line for\n     * which the item is accepted.\n     *\n     * Consider a line like this: <2tabs><cursor><3tabs>foo. Accepting a\n     * multi line completion item is indented using 2 tabs and all\n     * following lines inserted will be indented using 2 tabs as well.\n     */\n    InsertTextMode.adjustIndentation = 2;\n})(InsertTextMode || (InsertTextMode = {}));\n/**\n * Defines how values from a set of defaults and an individual item will be\n * merged.\n *\n * @since 3.18.0\n */\nexport var ApplyKind;\n(function (ApplyKind) {\n    /**\n     * The value from the individual item (if provided and not `null`) will be\n     * used instead of the default.\n     */\n    ApplyKind.Replace = 1;\n    /**\n     * The value from the item will be merged with the default.\n     *\n     * The specific rules for mergeing values are defined against each field\n     * that supports merging.\n     */\n    ApplyKind.Merge = 2;\n})(ApplyKind || (ApplyKind = {}));\nexport var CompletionItemLabelDetails;\n(function (CompletionItemLabelDetails) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (Is.string(candidate.detail) || candidate.detail === undefined) &&\n            (Is.string(candidate.description) || candidate.description === undefined);\n    }\n    CompletionItemLabelDetails.is = is;\n})(CompletionItemLabelDetails || (CompletionItemLabelDetails = {}));\n/**\n * The CompletionItem namespace provides functions to deal with\n * completion items.\n */\nexport var CompletionItem;\n(function (CompletionItem) {\n    /**\n     * Create a completion item and seed it with a label.\n     * @param label The completion item's label\n     */\n    function create(label) {\n        return { label };\n    }\n    CompletionItem.create = create;\n})(CompletionItem || (CompletionItem = {}));\n/**\n * The CompletionList namespace provides functions to deal with\n * completion lists.\n */\nexport var CompletionList;\n(function (CompletionList) {\n    /**\n     * Creates a new completion list.\n     *\n     * @param items The completion items.\n     * @param isIncomplete The list is not complete.\n     */\n    function create(items, isIncomplete) {\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\n    }\n    CompletionList.create = create;\n})(CompletionList || (CompletionList = {}));\nexport var MarkedString;\n(function (MarkedString) {\n    /**\n     * Creates a marked string from plain text.\n     *\n     * @param plainText The plain text.\n     */\n    function fromPlainText(plainText) {\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    MarkedString.fromPlainText = fromPlainText;\n    /**\n     * Checks whether the given value conforms to the {@link MarkedString} type.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\n    }\n    MarkedString.is = is;\n})(MarkedString || (MarkedString = {}));\nexport var Hover;\n(function (Hover) {\n    /**\n     * Checks whether the given value conforms to the {@link Hover} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\n            MarkedString.is(candidate.contents) ||\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === undefined || Range.is(value.range));\n    }\n    Hover.is = is;\n})(Hover || (Hover = {}));\n/**\n * The ParameterInformation namespace provides helper functions to work with\n * {@link ParameterInformation} literals.\n */\nexport var ParameterInformation;\n(function (ParameterInformation) {\n    /**\n     * Creates a new parameter information literal.\n     *\n     * @param label A label string.\n     * @param documentation A doc string.\n     */\n    function create(label, documentation) {\n        return documentation ? { label, documentation } : { label };\n    }\n    ParameterInformation.create = create;\n})(ParameterInformation || (ParameterInformation = {}));\n/**\n * The SignatureInformation namespace provides helper functions to work with\n * {@link SignatureInformation} literals.\n */\nexport var SignatureInformation;\n(function (SignatureInformation) {\n    function create(label, documentation, ...parameters) {\n        const result = { label };\n        if (Is.defined(documentation)) {\n            result.documentation = documentation;\n        }\n        if (Is.defined(parameters)) {\n            result.parameters = parameters;\n        }\n        else {\n            result.parameters = [];\n        }\n        return result;\n    }\n    SignatureInformation.create = create;\n})(SignatureInformation || (SignatureInformation = {}));\n/**\n * A document highlight kind.\n */\nexport var DocumentHighlightKind;\n(function (DocumentHighlightKind) {\n    /**\n     * A textual occurrence.\n     */\n    DocumentHighlightKind.Text = 1;\n    /**\n     * Read-access of a symbol, like reading a variable.\n     */\n    DocumentHighlightKind.Read = 2;\n    /**\n     * Write-access of a symbol, like writing to a variable.\n     */\n    DocumentHighlightKind.Write = 3;\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\n/**\n * DocumentHighlight namespace to provide helper functions to work with\n * {@link DocumentHighlight} literals.\n */\nexport var DocumentHighlight;\n(function (DocumentHighlight) {\n    /**\n     * Create a DocumentHighlight object.\n     * @param range The range the highlight applies to.\n     * @param kind The highlight kind\n     */\n    function create(range, kind) {\n        const result = { range };\n        if (Is.number(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    DocumentHighlight.create = create;\n})(DocumentHighlight || (DocumentHighlight = {}));\n/**\n * A symbol kind.\n */\nexport var SymbolKind;\n(function (SymbolKind) {\n    SymbolKind.File = 1;\n    SymbolKind.Module = 2;\n    SymbolKind.Namespace = 3;\n    SymbolKind.Package = 4;\n    SymbolKind.Class = 5;\n    SymbolKind.Method = 6;\n    SymbolKind.Property = 7;\n    SymbolKind.Field = 8;\n    SymbolKind.Constructor = 9;\n    SymbolKind.Enum = 10;\n    SymbolKind.Interface = 11;\n    SymbolKind.Function = 12;\n    SymbolKind.Variable = 13;\n    SymbolKind.Constant = 14;\n    SymbolKind.String = 15;\n    SymbolKind.Number = 16;\n    SymbolKind.Boolean = 17;\n    SymbolKind.Array = 18;\n    SymbolKind.Object = 19;\n    SymbolKind.Key = 20;\n    SymbolKind.Null = 21;\n    SymbolKind.EnumMember = 22;\n    SymbolKind.Struct = 23;\n    SymbolKind.Event = 24;\n    SymbolKind.Operator = 25;\n    SymbolKind.TypeParameter = 26;\n})(SymbolKind || (SymbolKind = {}));\n/**\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\n *\n * @since 3.16\n */\nexport var SymbolTag;\n(function (SymbolTag) {\n    /**\n     * Render a symbol as obsolete, usually using a strike-out.\n     */\n    SymbolTag.Deprecated = 1;\n})(SymbolTag || (SymbolTag = {}));\nexport var SymbolInformation;\n(function (SymbolInformation) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the location of the symbol.\n     * @param uri The resource of the location of symbol.\n     * @param containerName The name of the symbol containing the symbol.\n     */\n    function create(name, kind, range, uri, containerName) {\n        const result = {\n            name,\n            kind,\n            location: { uri, range }\n        };\n        if (containerName) {\n            result.containerName = containerName;\n        }\n        return result;\n    }\n    SymbolInformation.create = create;\n})(SymbolInformation || (SymbolInformation = {}));\nexport var WorkspaceSymbol;\n(function (WorkspaceSymbol) {\n    /**\n     * Create a new workspace symbol.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param uri The resource of the location of the symbol.\n     * @param range An options range of the location.\n     * @returns A WorkspaceSymbol.\n     */\n    function create(name, kind, uri, range) {\n        return range !== undefined\n            ? { name, kind, location: { uri, range } }\n            : { name, kind, location: { uri } };\n    }\n    WorkspaceSymbol.create = create;\n})(WorkspaceSymbol || (WorkspaceSymbol = {}));\nexport var DocumentSymbol;\n(function (DocumentSymbol) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param detail The detail of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the symbol.\n     * @param selectionRange The selectionRange of the symbol.\n     * @param children Children of the symbol.\n     */\n    function create(name, detail, kind, range, selectionRange, children) {\n        const result = {\n            name,\n            detail,\n            kind,\n            range,\n            selectionRange\n        };\n        if (children !== undefined) {\n            result.children = children;\n        }\n        return result;\n    }\n    DocumentSymbol.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link DocumentSymbol} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return candidate &&\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\n            (candidate.detail === undefined || Is.string(candidate.detail)) &&\n            (candidate.deprecated === undefined || Is.boolean(candidate.deprecated)) &&\n            (candidate.children === undefined || Array.isArray(candidate.children)) &&\n            (candidate.tags === undefined || Array.isArray(candidate.tags));\n    }\n    DocumentSymbol.is = is;\n})(DocumentSymbol || (DocumentSymbol = {}));\n/**\n * A set of predefined code action kinds\n */\nexport var CodeActionKind;\n(function (CodeActionKind) {\n    /**\n     * Empty kind.\n     */\n    CodeActionKind.Empty = '';\n    /**\n     * Base kind for quickfix actions: 'quickfix'\n     */\n    CodeActionKind.QuickFix = 'quickfix';\n    /**\n     * Base kind for refactoring actions: 'refactor'\n     */\n    CodeActionKind.Refactor = 'refactor';\n    /**\n     * Base kind for refactoring extraction actions: 'refactor.extract'\n     *\n     * Example extract actions:\n     *\n     * - Extract method\n     * - Extract function\n     * - Extract variable\n     * - Extract interface from class\n     * - ...\n     */\n    CodeActionKind.RefactorExtract = 'refactor.extract';\n    /**\n     * Base kind for refactoring inline actions: 'refactor.inline'\n     *\n     * Example inline actions:\n     *\n     * - Inline function\n     * - Inline variable\n     * - Inline constant\n     * - ...\n     */\n    CodeActionKind.RefactorInline = 'refactor.inline';\n    /**\n     * Base kind for refactoring move actions: `refactor.move`\n     *\n     * Example move actions:\n     *\n     * - Move a function to a new file\n     * - Move a property between classes\n     * - Move method to base class\n     * - ...\n     *\n     * @since 3.18.0\n     * @proposed\n     */\n    CodeActionKind.RefactorMove = 'refactor.move';\n    /**\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\n     *\n     * Example rewrite actions:\n     *\n     * - Convert JavaScript function to class\n     * - Add or remove parameter\n     * - Encapsulate field\n     * - Make method static\n     * - Move method to base class\n     * - ...\n     */\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\n    /**\n     * Base kind for source actions: `source`\n     *\n     * Source code actions apply to the entire file.\n     */\n    CodeActionKind.Source = 'source';\n    /**\n     * Base kind for an organize imports source action: `source.organizeImports`\n     */\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\n    /**\n     * Base kind for auto-fix source actions: `source.fixAll`.\n     *\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\n     *\n     * @since 3.15.0\n     */\n    CodeActionKind.SourceFixAll = 'source.fixAll';\n    /**\n     * Base kind for all code actions applying to the entire notebook's scope. CodeActionKinds using\n     * this should always begin with `notebook.`\n     *\n     * @since 3.18.0\n     */\n    CodeActionKind.Notebook = 'notebook';\n})(CodeActionKind || (CodeActionKind = {}));\n/**\n * The reason why code actions were requested.\n *\n * @since 3.17.0\n */\nexport var CodeActionTriggerKind;\n(function (CodeActionTriggerKind) {\n    /**\n     * Code actions were explicitly requested by the user or by an extension.\n     */\n    CodeActionTriggerKind.Invoked = 1;\n    /**\n     * Code actions were requested automatically.\n     *\n     * This typically happens when current selection in a file changes, but can\n     * also be triggered when file content changes.\n     */\n    CodeActionTriggerKind.Automatic = 2;\n})(CodeActionTriggerKind || (CodeActionTriggerKind = {}));\n/**\n * The CodeActionContext namespace provides helper functions to work with\n * {@link CodeActionContext} literals.\n */\nexport var CodeActionContext;\n(function (CodeActionContext) {\n    /**\n     * Creates a new CodeActionContext literal.\n     */\n    function create(diagnostics, only, triggerKind) {\n        const result = { diagnostics };\n        if (only !== undefined && only !== null) {\n            result.only = only;\n        }\n        if (triggerKind !== undefined && triggerKind !== null) {\n            result.triggerKind = triggerKind;\n        }\n        return result;\n    }\n    CodeActionContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link CodeActionContext} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is)\n            && (candidate.only === undefined || Is.typedArray(candidate.only, Is.string))\n            && (candidate.triggerKind === undefined || candidate.triggerKind === CodeActionTriggerKind.Invoked || candidate.triggerKind === CodeActionTriggerKind.Automatic);\n    }\n    CodeActionContext.is = is;\n})(CodeActionContext || (CodeActionContext = {}));\n/**\n * Code action tags are extra annotations that tweak the behavior of a code action.\n *\n * @since 3.18.0 - proposed\n */\nexport var CodeActionTag;\n(function (CodeActionTag) {\n    /**\n     * Marks the code action as LLM-generated.\n     */\n    CodeActionTag.LLMGenerated = 1;\n    /**\n     * Checks whether the given literal conforms to the {@link CodeActionTag} interface.\n     */\n    function is(value) {\n        return Is.defined(value) && value === CodeActionTag.LLMGenerated;\n    }\n    CodeActionTag.is = is;\n})(CodeActionTag || (CodeActionTag = {}));\nexport var CodeAction;\n(function (CodeAction) {\n    function create(title, kindOrCommandOrEdit, kind) {\n        const result = { title };\n        let checkKind = true;\n        if (typeof kindOrCommandOrEdit === 'string') {\n            checkKind = false;\n            result.kind = kindOrCommandOrEdit;\n        }\n        else if (Command.is(kindOrCommandOrEdit)) {\n            result.command = kindOrCommandOrEdit;\n        }\n        else {\n            result.edit = kindOrCommandOrEdit;\n        }\n        if (checkKind && kind !== undefined) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    CodeAction.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.title) &&\n            (candidate.diagnostics === undefined || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\n            (candidate.kind === undefined || Is.string(candidate.kind)) &&\n            (candidate.edit !== undefined || candidate.command !== undefined) &&\n            (candidate.command === undefined || Command.is(candidate.command)) &&\n            (candidate.isPreferred === undefined || Is.boolean(candidate.isPreferred)) &&\n            (candidate.edit === undefined || WorkspaceEdit.is(candidate.edit)) &&\n            (candidate.tags === undefined || Is.typedArray(candidate.tags, CodeActionTag.is));\n    }\n    CodeAction.is = is;\n})(CodeAction || (CodeAction = {}));\n/**\n * The CodeLens namespace provides helper functions to work with\n * {@link CodeLens} literals.\n */\nexport var CodeLens;\n(function (CodeLens) {\n    /**\n     * Creates a new CodeLens literal.\n     */\n    function create(range, data) {\n        const result = { range };\n        if (Is.defined(data)) {\n            result.data = data;\n        }\n        return result;\n    }\n    CodeLens.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link CodeLens} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n    }\n    CodeLens.is = is;\n})(CodeLens || (CodeLens = {}));\n/**\n * The FormattingOptions namespace provides helper functions to work with\n * {@link FormattingOptions} literals.\n */\nexport var FormattingOptions;\n(function (FormattingOptions) {\n    /**\n     * Creates a new FormattingOptions literal.\n     */\n    function create(tabSize, insertSpaces) {\n        return { tabSize, insertSpaces };\n    }\n    FormattingOptions.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link FormattingOptions} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.uinteger(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n    }\n    FormattingOptions.is = is;\n})(FormattingOptions || (FormattingOptions = {}));\n/**\n * The DocumentLink namespace provides helper functions to work with\n * {@link DocumentLink} literals.\n */\nexport var DocumentLink;\n(function (DocumentLink) {\n    /**\n     * Creates a new DocumentLink literal.\n     */\n    function create(range, target, data) {\n        return { range, target, data };\n    }\n    DocumentLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link DocumentLink} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n    }\n    DocumentLink.is = is;\n})(DocumentLink || (DocumentLink = {}));\n/**\n * The SelectionRange namespace provides helper function to work with\n * SelectionRange literals.\n */\nexport var SelectionRange;\n(function (SelectionRange) {\n    /**\n     * Creates a new SelectionRange\n     * @param range the range.\n     * @param parent an optional parent.\n     */\n    function create(range, parent) {\n        return { range, parent };\n    }\n    SelectionRange.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\n    }\n    SelectionRange.is = is;\n})(SelectionRange || (SelectionRange = {}));\n/**\n * A set of predefined token types. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0\n */\nexport var SemanticTokenTypes;\n(function (SemanticTokenTypes) {\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\n    /**\n     * Represents a generic type. Acts as a fallback for types which can't be mapped to\n     * a specific type like class or enum.\n     */\n    SemanticTokenTypes[\"type\"] = \"type\";\n    SemanticTokenTypes[\"class\"] = \"class\";\n    SemanticTokenTypes[\"enum\"] = \"enum\";\n    SemanticTokenTypes[\"interface\"] = \"interface\";\n    SemanticTokenTypes[\"struct\"] = \"struct\";\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\n    SemanticTokenTypes[\"variable\"] = \"variable\";\n    SemanticTokenTypes[\"property\"] = \"property\";\n    SemanticTokenTypes[\"enumMember\"] = \"enumMember\";\n    SemanticTokenTypes[\"event\"] = \"event\";\n    SemanticTokenTypes[\"function\"] = \"function\";\n    SemanticTokenTypes[\"method\"] = \"method\";\n    SemanticTokenTypes[\"macro\"] = \"macro\";\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\n    SemanticTokenTypes[\"modifier\"] = \"modifier\";\n    SemanticTokenTypes[\"comment\"] = \"comment\";\n    SemanticTokenTypes[\"string\"] = \"string\";\n    SemanticTokenTypes[\"number\"] = \"number\";\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\n    SemanticTokenTypes[\"operator\"] = \"operator\";\n    /**\n     * @since 3.17.0\n     */\n    SemanticTokenTypes[\"decorator\"] = \"decorator\";\n    /**\n     * @since 3.18.0\n     */\n    SemanticTokenTypes[\"label\"] = \"label\";\n})(SemanticTokenTypes || (SemanticTokenTypes = {}));\n/**\n * A set of predefined token modifiers. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0\n */\nexport var SemanticTokenModifiers;\n(function (SemanticTokenModifiers) {\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\n    SemanticTokenModifiers[\"static\"] = \"static\";\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\n    SemanticTokenModifiers[\"async\"] = \"async\";\n    SemanticTokenModifiers[\"modification\"] = \"modification\";\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\n    SemanticTokenModifiers[\"defaultLibrary\"] = \"defaultLibrary\";\n})(SemanticTokenModifiers || (SemanticTokenModifiers = {}));\n/**\n * @since 3.16.0\n */\nexport var SemanticTokens;\n(function (SemanticTokens) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\n    }\n    SemanticTokens.is = is;\n})(SemanticTokens || (SemanticTokens = {}));\n/**\n * The InlineValueText namespace provides functions to deal with InlineValueTexts.\n *\n * @since 3.17.0\n */\nexport var InlineValueText;\n(function (InlineValueText) {\n    /**\n     * Creates a new InlineValueText literal.\n     */\n    function create(range, text) {\n        return { range, text };\n    }\n    InlineValueText.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.string(candidate.text);\n    }\n    InlineValueText.is = is;\n})(InlineValueText || (InlineValueText = {}));\n/**\n * The InlineValueVariableLookup namespace provides functions to deal with InlineValueVariableLookups.\n *\n * @since 3.17.0\n */\nexport var InlineValueVariableLookup;\n(function (InlineValueVariableLookup) {\n    /**\n     * Creates a new InlineValueText literal.\n     */\n    function create(range, variableName, caseSensitiveLookup) {\n        return { range, variableName, caseSensitiveLookup };\n    }\n    InlineValueVariableLookup.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.boolean(candidate.caseSensitiveLookup)\n            && (Is.string(candidate.variableName) || candidate.variableName === undefined);\n    }\n    InlineValueVariableLookup.is = is;\n})(InlineValueVariableLookup || (InlineValueVariableLookup = {}));\n/**\n * The InlineValueEvaluatableExpression namespace provides functions to deal with InlineValueEvaluatableExpression.\n *\n * @since 3.17.0\n */\nexport var InlineValueEvaluatableExpression;\n(function (InlineValueEvaluatableExpression) {\n    /**\n     * Creates a new InlineValueEvaluatableExpression literal.\n     */\n    function create(range, expression) {\n        return { range, expression };\n    }\n    InlineValueEvaluatableExpression.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && Range.is(candidate.range)\n            && (Is.string(candidate.expression) || candidate.expression === undefined);\n    }\n    InlineValueEvaluatableExpression.is = is;\n})(InlineValueEvaluatableExpression || (InlineValueEvaluatableExpression = {}));\n/**\n * The InlineValueContext namespace provides helper functions to work with\n * {@link InlineValueContext} literals.\n *\n * @since 3.17.0\n */\nexport var InlineValueContext;\n(function (InlineValueContext) {\n    /**\n     * Creates a new InlineValueContext literal.\n     */\n    function create(frameId, stoppedLocation) {\n        return { frameId, stoppedLocation };\n    }\n    InlineValueContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link InlineValueContext} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Range.is(value.stoppedLocation);\n    }\n    InlineValueContext.is = is;\n})(InlineValueContext || (InlineValueContext = {}));\n/**\n * Inlay hint kinds.\n *\n * @since 3.17.0\n */\nexport var InlayHintKind;\n(function (InlayHintKind) {\n    /**\n     * An inlay hint that for a type annotation.\n     */\n    InlayHintKind.Type = 1;\n    /**\n     * An inlay hint that is for a parameter.\n     */\n    InlayHintKind.Parameter = 2;\n    function is(value) {\n        return value === 1 || value === 2;\n    }\n    InlayHintKind.is = is;\n})(InlayHintKind || (InlayHintKind = {}));\nexport var InlayHintLabelPart;\n(function (InlayHintLabelPart) {\n    function create(value) {\n        return { value };\n    }\n    InlayHintLabelPart.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n            && (candidate.location === undefined || Location.is(candidate.location))\n            && (candidate.command === undefined || Command.is(candidate.command));\n    }\n    InlayHintLabelPart.is = is;\n})(InlayHintLabelPart || (InlayHintLabelPart = {}));\nexport var InlayHint;\n(function (InlayHint) {\n    function create(position, label, kind) {\n        const result = { position, label };\n        if (kind !== undefined) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    InlayHint.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.position)\n            && (Is.string(candidate.label) || Is.typedArray(candidate.label, InlayHintLabelPart.is))\n            && (candidate.kind === undefined || InlayHintKind.is(candidate.kind))\n            && (candidate.textEdits === undefined) || Is.typedArray(candidate.textEdits, TextEdit.is)\n            && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n            && (candidate.paddingLeft === undefined || Is.boolean(candidate.paddingLeft))\n            && (candidate.paddingRight === undefined || Is.boolean(candidate.paddingRight));\n    }\n    InlayHint.is = is;\n})(InlayHint || (InlayHint = {}));\nexport var StringValue;\n(function (StringValue) {\n    function createSnippet(value) {\n        return { kind: 'snippet', value };\n    }\n    StringValue.createSnippet = createSnippet;\n    function isSnippet(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && candidate.kind === 'snippet'\n            && Is.string(candidate.value);\n    }\n    StringValue.isSnippet = isSnippet;\n})(StringValue || (StringValue = {}));\nexport var InlineCompletionItem;\n(function (InlineCompletionItem) {\n    function create(insertText, filterText, range, command) {\n        return { insertText, filterText, range, command };\n    }\n    InlineCompletionItem.create = create;\n})(InlineCompletionItem || (InlineCompletionItem = {}));\nexport var InlineCompletionList;\n(function (InlineCompletionList) {\n    function create(items) {\n        return { items };\n    }\n    InlineCompletionList.create = create;\n})(InlineCompletionList || (InlineCompletionList = {}));\n/**\n * Describes how an {@link InlineCompletionItemProvider inline completion provider} was triggered.\n *\n * @since 3.18.0\n * @proposed\n */\nexport var InlineCompletionTriggerKind;\n(function (InlineCompletionTriggerKind) {\n    /**\n     * Completion was triggered explicitly by a user gesture.\n     */\n    InlineCompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered automatically while editing.\n     */\n    InlineCompletionTriggerKind.Automatic = 2;\n})(InlineCompletionTriggerKind || (InlineCompletionTriggerKind = {}));\nexport var SelectedCompletionInfo;\n(function (SelectedCompletionInfo) {\n    function create(range, text) {\n        return { range, text };\n    }\n    SelectedCompletionInfo.create = create;\n})(SelectedCompletionInfo || (SelectedCompletionInfo = {}));\nexport var InlineCompletionContext;\n(function (InlineCompletionContext) {\n    function create(triggerKind, selectedCompletionInfo) {\n        return { triggerKind, selectedCompletionInfo };\n    }\n    InlineCompletionContext.create = create;\n})(InlineCompletionContext || (InlineCompletionContext = {}));\nexport var WorkspaceFolder;\n(function (WorkspaceFolder) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && URI.is(candidate.uri) && Is.string(candidate.name);\n    }\n    WorkspaceFolder.is = is;\n})(WorkspaceFolder || (WorkspaceFolder = {}));\nexport const EOL = ['\\n', '\\r\\n', '\\r'];\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new ITextDocument literal from the given uri and content.\n     * @param uri The document's uri.\n     * @param languageId The document's language Id.\n     * @param version The document's version.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link ITextDocument} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.uinteger(candidate.lineCount)\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n    }\n    TextDocument.is = is;\n    function applyEdits(document, edits) {\n        let text = document.getText();\n        const sortedEdits = mergeSort(edits, (a, b) => {\n            const diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        let lastModifiedOffset = text.length;\n        for (let i = sortedEdits.length - 1; i >= 0; i--) {\n            const e = sortedEdits[i];\n            const startOffset = document.offsetAt(e.range.start);\n            const endOffset = document.offsetAt(e.range.end);\n            if (endOffset <= lastModifiedOffset) {\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n            }\n            else {\n                throw new Error('Overlapping edit');\n            }\n            lastModifiedOffset = startOffset;\n        }\n        return text;\n    }\n    TextDocument.applyEdits = applyEdits;\n    function mergeSort(data, compare) {\n        if (data.length <= 1) {\n            // sorted\n            return data;\n        }\n        const p = (data.length / 2) | 0;\n        const left = data.slice(0, p);\n        const right = data.slice(p);\n        mergeSort(left, compare);\n        mergeSort(right, compare);\n        let leftIdx = 0;\n        let rightIdx = 0;\n        let i = 0;\n        while (leftIdx < left.length && rightIdx < right.length) {\n            const ret = compare(left[leftIdx], right[rightIdx]);\n            if (ret <= 0) {\n                // smaller_equal -> take left to preserve order\n                data[i++] = left[leftIdx++];\n            }\n            else {\n                // greater -> take right\n                data[i++] = right[rightIdx++];\n            }\n        }\n        while (leftIdx < left.length) {\n            data[i++] = left[leftIdx++];\n        }\n        while (rightIdx < right.length) {\n            data[i++] = right[rightIdx++];\n        }\n        return data;\n    }\n})(TextDocument || (TextDocument = {}));\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nclass FullTextDocument {\n    constructor(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    get uri() {\n        return this._uri;\n    }\n    get languageId() {\n        return this._languageId;\n    }\n    get version() {\n        return this._version;\n    }\n    getText(range) {\n        if (range) {\n            const start = this.offsetAt(range.start);\n            const end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    }\n    update(event, version) {\n        this._content = event.text;\n        this._version = version;\n        this._lineOffsets = undefined;\n    }\n    getLineOffsets() {\n        if (this._lineOffsets === undefined) {\n            const lineOffsets = [];\n            const text = this._content;\n            let isLineStart = true;\n            for (let i = 0; i < text.length; i++) {\n                if (isLineStart) {\n                    lineOffsets.push(i);\n                    isLineStart = false;\n                }\n                const ch = text.charAt(i);\n                isLineStart = (ch === '\\r' || ch === '\\n');\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                    i++;\n                }\n            }\n            if (isLineStart && text.length > 0) {\n                lineOffsets.push(text.length);\n            }\n            this._lineOffsets = lineOffsets;\n        }\n        return this._lineOffsets;\n    }\n    positionAt(offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        const lineOffsets = this.getLineOffsets();\n        let low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return Position.create(0, offset);\n        }\n        while (low < high) {\n            const mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        const line = low - 1;\n        return Position.create(line, offset - lineOffsets[line]);\n    }\n    offsetAt(position) {\n        const lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        const lineOffset = lineOffsets[position.line];\n        const nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    }\n    get lineCount() {\n        return this.getLineOffsets().length;\n    }\n}\nvar Is;\n(function (Is) {\n    const toString = Object.prototype.toString;\n    function defined(value) {\n        return typeof value !== 'undefined';\n    }\n    Is.defined = defined;\n    function undefined(value) {\n        return typeof value === 'undefined';\n    }\n    Is.undefined = undefined;\n    function boolean(value) {\n        return value === true || value === false;\n    }\n    Is.boolean = boolean;\n    function string(value) {\n        return toString.call(value) === '[object String]';\n    }\n    Is.string = string;\n    function number(value) {\n        return toString.call(value) === '[object Number]';\n    }\n    Is.number = number;\n    function numberRange(value, min, max) {\n        return toString.call(value) === '[object Number]' && min <= value && value <= max;\n    }\n    Is.numberRange = numberRange;\n    function integer(value) {\n        return toString.call(value) === '[object Number]' && -2147483648 <= value && value <= 2147483647;\n    }\n    Is.integer = integer;\n    function uinteger(value) {\n        return toString.call(value) === '[object Number]' && 0 <= value && value <= 2147483647;\n    }\n    Is.uinteger = uinteger;\n    function func(value) {\n        return toString.call(value) === '[object Function]';\n    }\n    Is.func = func;\n    function objectLiteral(value) {\n        // Strictly speaking class instances pass this check as well. Since the LSP\n        // doesn't use classes we ignore this for now. If we do we need to add something\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n        return value !== null && typeof value === 'object';\n    }\n    Is.objectLiteral = objectLiteral;\n    function typedArray(value, check) {\n        return Array.isArray(value) && value.every(check);\n    }\n    Is.typedArray = typedArray;\n})(Is || (Is = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Declaration} or a typed array of {@link DeclarationLink}\n * or a Thenable that resolves to such.\n */\nvar DeclarationRequest;\n(function (DeclarationRequest) {\n    DeclarationRequest.method = 'textDocument/declaration';\n    DeclarationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\n    DeclarationRequest.capabilities = messages_1.CM.create('textDocument.declaration', 'declarationProvider');\n})(DeclarationRequest || (exports.DeclarationRequest = DeclarationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst Is = __importStar(require(\"./utils/is\"));\nconst messages_1 = require(\"./messages\");\n/**\n * @since 3.17.0\n */\nvar DiagnosticServerCancellationData;\n(function (DiagnosticServerCancellationData) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.retriggerRequest);\n    }\n    DiagnosticServerCancellationData.is = is;\n})(DiagnosticServerCancellationData || (exports.DiagnosticServerCancellationData = DiagnosticServerCancellationData = {}));\n/**\n * The document diagnostic report kinds.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticReportKind;\n(function (DocumentDiagnosticReportKind) {\n    /**\n     * A diagnostic report with a full\n     * set of problems.\n     */\n    DocumentDiagnosticReportKind.Full = 'full';\n    /**\n     * A report indicating that the last\n     * returned report is still accurate.\n     */\n    DocumentDiagnosticReportKind.Unchanged = 'unchanged';\n})(DocumentDiagnosticReportKind || (exports.DocumentDiagnosticReportKind = DocumentDiagnosticReportKind = {}));\n/**\n * The document diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticRequest;\n(function (DocumentDiagnosticRequest) {\n    DocumentDiagnosticRequest.method = 'textDocument/diagnostic';\n    DocumentDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentDiagnosticRequest.type = new messages_1.ProtocolRequestType(DocumentDiagnosticRequest.method);\n    DocumentDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n    DocumentDiagnosticRequest.capabilities = messages_1.CM.create('textDocument.diagnostic', 'diagnosticProvider');\n})(DocumentDiagnosticRequest || (exports.DocumentDiagnosticRequest = DocumentDiagnosticRequest = {}));\n/**\n * The workspace diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar WorkspaceDiagnosticRequest;\n(function (WorkspaceDiagnosticRequest) {\n    WorkspaceDiagnosticRequest.method = 'workspace/diagnostic';\n    WorkspaceDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceDiagnosticRequest.type = new messages_1.ProtocolRequestType(WorkspaceDiagnosticRequest.method);\n    WorkspaceDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n    WorkspaceDiagnosticRequest.capabilities = messages_1.CM.create('workspace.diagnostics', 'diagnosticProvider.workspaceDiagnostics');\n})(WorkspaceDiagnosticRequest || (exports.WorkspaceDiagnosticRequest = WorkspaceDiagnosticRequest = {}));\n/**\n * The diagnostic refresh request definition.\n *\n * @since 3.17.0\n */\nvar DiagnosticRefreshRequest;\n(function (DiagnosticRefreshRequest) {\n    DiagnosticRefreshRequest.method = `workspace/diagnostic/refresh`;\n    DiagnosticRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    DiagnosticRefreshRequest.type = new messages_1.ProtocolRequestType0(DiagnosticRefreshRequest.method);\n    DiagnosticRefreshRequest.capabilities = messages_1.CM.create('workspace.diagnostics.refreshSupport', undefined);\n})(DiagnosticRefreshRequest || (exports.DiagnosticRefreshRequest = DiagnosticRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass ProtocolCompletionItem extends code.CompletionItem {\n    data;\n    fromEdit;\n    documentationFormat;\n    originalItemKind;\n    deprecated;\n    insertTextMode;\n    constructor(label) {\n        super(label);\n    }\n}\nexports.default = ProtocolCompletionItem;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event, EventEmitter, extensions } from 'vscode';\n\n/**\n * HTML language participant contribution.\n */\ninterface LanguageParticipantContribution {\n\t/**\n\t * The id of the language which participates with the HTML language server.\n\t */\n\tlanguageId: string;\n\t/**\n\t * true if the language activates the auto insertion and false otherwise.\n\t */\n\tautoInsert?: boolean;\n}\n\nexport interface LanguageParticipants {\n\treadonly onDidChange: Event<void>;\n\treadonly documentSelector: string[];\n\thasLanguage(languageId: string): boolean;\n\tuseAutoInsert(languageId: string): boolean;\n\tdispose(): void;\n}\n\nexport function getLanguageParticipants(): LanguageParticipants {\n\tconst onDidChangeEmmiter = new EventEmitter<void>();\n\tlet languages = new Set<string>();\n\tlet autoInsert = new Set<string>();\n\n\tfunction update() {\n\t\tconst oldLanguages = languages, oldAutoInsert = autoInsert;\n\n\t\tlanguages = new Set();\n\t\tlanguages.add('html');\n\t\tautoInsert = new Set();\n\t\tautoInsert.add('html');\n\n\t\tfor (const extension of extensions.allAcrossExtensionHosts) {\n\t\t\tconst htmlLanguageParticipants = extension.packageJSON?.contributes?.htmlLanguageParticipants as LanguageParticipantContribution[];\n\t\t\tif (Array.isArray(htmlLanguageParticipants)) {\n\t\t\t\tfor (const htmlLanguageParticipant of htmlLanguageParticipants) {\n\t\t\t\t\tconst languageId = htmlLanguageParticipant.languageId;\n\t\t\t\t\tif (typeof languageId === 'string') {\n\t\t\t\t\t\tlanguages.add(languageId);\n\t\t\t\t\t\tif (htmlLanguageParticipant.autoInsert !== false) {\n\t\t\t\t\t\t\tautoInsert.add(languageId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn !isEqualSet(languages, oldLanguages) || !isEqualSet(autoInsert, oldAutoInsert);\n\t}\n\tupdate();\n\n\tconst changeListener = extensions.onDidChange(_ => {\n\t\tif (update()) {\n\t\t\tonDidChangeEmmiter.fire();\n\t\t}\n\t});\n\n\treturn {\n\t\tonDidChange: onDidChangeEmmiter.event,\n\t\tget documentSelector() { return Array.from(languages); },\n\t\thasLanguage(languageId: string) { return languages.has(languageId); },\n\t\tuseAutoInsert(languageId: string) { return autoInsert.has(languageId); },\n\t\tdispose: () => changeListener.dispose()\n\t};\n}\n\nfunction isEqualSet<T>(s1: Set<T>, s2: Set<T>) {\n\tif (s1.size !== s2.size) {\n\t\treturn false;\n\t}\n\tfor (const e of s1) {\n\t\tif (!s2.has(e)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CancellationTokenSource = exports.CancellationToken = void 0;\nconst ral_1 = __importDefault(require(\"./ral\"));\nconst Is = __importStar(require(\"./is\"));\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken || (exports.CancellationToken = CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = (0, ral_1.default)().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { handle.dispose(); } };\n});\nclass MutableToken {\n    _isCancelled = false;\n    _emitter;\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    _token;\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inlay hints in a document. The request's parameter is of\n * type {@link InlayHintsParams}, the response is of type\n * {@link InlayHint InlayHint[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintRequest;\n(function (InlayHintRequest) {\n    InlayHintRequest.method = 'textDocument/inlayHint';\n    InlayHintRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintRequest.type = new messages_1.ProtocolRequestType(InlayHintRequest.method);\n    InlayHintRequest.capabilities = messages_1.CM.create('textDocument.inlayHint', 'inlayHintProvider');\n})(InlayHintRequest || (exports.InlayHintRequest = InlayHintRequest = {}));\n/**\n * A request to resolve additional properties for an inlay hint.\n * The request's parameter is of type {@link InlayHint}, the response is\n * of type {@link InlayHint} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintResolveRequest;\n(function (InlayHintResolveRequest) {\n    InlayHintResolveRequest.method = 'inlayHint/resolve';\n    InlayHintResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintResolveRequest.type = new messages_1.ProtocolRequestType(InlayHintResolveRequest.method);\n    InlayHintResolveRequest.capabilities = messages_1.CM.create('textDocument.inlayHint.resolveSupport', 'inlayHintProvider.resolveProvider');\n})(InlayHintResolveRequest || (exports.InlayHintResolveRequest = InlayHintResolveRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlayHintRefreshRequest;\n(function (InlayHintRefreshRequest) {\n    InlayHintRefreshRequest.method = `workspace/inlayHint/refresh`;\n    InlayHintRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlayHintRefreshRequest.type = new messages_1.ProtocolRequestType0(InlayHintRefreshRequest.method);\n    InlayHintRefreshRequest.capabilities = messages_1.CM.create('workspace.inlayHint.refreshSupport', undefined);\n})(InlayHintRefreshRequest || (exports.InlayHintRefreshRequest = InlayHintRefreshRequest = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unescape = void 0;\n/**\n * Un-escape a string that has been escaped with {@link escape}.\n *\n * If the {@link windowsPathsNoEscape} option is used, then square-brace\n * escapes are removed, but not backslash escapes.  For example, it will turn\n * the string `'[*]'` into `*`, but it will not turn `'\\\\*'` into `'*'`,\n * becuase `\\` is a path separator in `windowsPathsNoEscape` mode.\n *\n * When `windowsPathsNoEscape` is not set, then both brace escapes and\n * backslash escapes are removed.\n *\n * Slashes (and backslashes in `windowsPathsNoEscape` mode) cannot be escaped\n * or unescaped.\n */\nconst unescape = (s, { windowsPathsNoEscape = false, } = {}) => {\n    return windowsPathsNoEscape\n        ? s.replace(/\\[([^\\/\\\\])\\]/g, '$1')\n        : s.replace(/((?!\\\\).|^)\\[([^\\/\\\\])\\]/g, '$1$2').replace(/\\\\([^\\/])/g, '$1');\n};\nexports.unescape = unescape;\n//# sourceMappingURL=unescape.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextDocumentContentFeature = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass TextDocumentContentFeature {\n    _client;\n    _registrations = new Map();\n    constructor(client) {\n        this._client = client;\n    }\n    getState() {\n        const registrations = this._registrations.size > 0;\n        return { kind: 'workspace', id: vscode_languageserver_protocol_1.TextDocumentContentRequest.method, registrations };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.TextDocumentContentRequest.type;\n    }\n    getProviders() {\n        const result = [];\n        for (const registration of this._registrations.values()) {\n            result.push(...registration.providers);\n        }\n        return result;\n    }\n    fillClientCapabilities(capabilities) {\n        const textDocumentContent = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'textDocumentContent');\n        textDocumentContent.dynamicRegistration = true;\n    }\n    initialize(capabilities) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.TextDocumentContentRefreshRequest.type, async (params) => {\n            const uri = client.protocol2CodeConverter.asUri(params.uri);\n            for (const registrations of this._registrations.values()) {\n                for (const provider of registrations.providers) {\n                    if (provider.scheme === uri.scheme) {\n                        provider.onDidChangeEmitter.fire(uri);\n                    }\n                }\n            }\n        });\n        if (!capabilities?.workspace?.textDocumentContent) {\n            return;\n        }\n        const capability = capabilities.workspace.textDocumentContent;\n        const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\n        this.register({\n            id: id,\n            registerOptions: capability\n        });\n    }\n    register(data) {\n        const registrations = [];\n        const disposables = [];\n        for (const scheme of data.registerOptions.schemes) {\n            const [disposable, registration] = this.registerTextDocumentContentProvider(scheme);\n            registrations.push(registration);\n            disposables.push(disposable);\n        }\n        this._registrations.set(data.id, { disposable: vscode.Disposable.from(...disposables), providers: registrations });\n    }\n    registerTextDocumentContentProvider(scheme) {\n        const eventEmitter = new vscode.EventEmitter();\n        const provider = {\n            onDidChange: eventEmitter.event,\n            provideTextDocumentContent: (uri, token) => {\n                const client = this._client;\n                const provideTextDocumentContent = (uri, token) => {\n                    const params = {\n                        uri: client.code2ProtocolConverter.asUri(uri)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.TextDocumentContentRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return result.text;\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.TextDocumentContentRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideTextDocumentContent\n                    ? middleware.provideTextDocumentContent(uri, token, provideTextDocumentContent)\n                    : provideTextDocumentContent(uri, token);\n            }\n        };\n        return [vscode.workspace.registerTextDocumentContentProvider(scheme, provider), { scheme, onDidChangeEmitter: eventEmitter, provider }];\n    }\n    unregister(id) {\n        const registration = this._registrations.get(id);\n        if (registration !== undefined) {\n            this._registrations.delete(id);\n            registration.disposable.dispose();\n        }\n    }\n    clear() {\n        this._registrations.forEach((registration) => {\n            registration.disposable.dispose();\n        });\n        this._registrations.clear();\n    }\n}\nexports.TextDocumentContentFeature = TextDocumentContentFeature;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = exports.LinkedMap = exports.Touch = void 0;\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch || (exports.Touch = Touch = {}));\nclass LinkedMap {\n    [Symbol.toStringTag] = 'LinkedMap';\n    _map;\n    _head;\n    _tail;\n    _size;\n    _state;\n    constructor() {\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        return this._head?.value;\n    }\n    get last() {\n        return this._tail?.value;\n    }\n    before(key) {\n        const item = this._map.get(key);\n        return item ? item.previous?.value : undefined;\n    }\n    after(key) {\n        const item = this._map.get(key);\n        return item ? item.next?.value : undefined;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    _limit;\n    _ratio;\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProtocolDiagnostic = exports.DiagnosticCode = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst Is = __importStar(require(\"./utils/is\"));\nvar DiagnosticCode;\n(function (DiagnosticCode) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && (Is.number(candidate.value) || Is.string(candidate.value)) && Is.string(candidate.target);\n    }\n    DiagnosticCode.is = is;\n})(DiagnosticCode || (exports.DiagnosticCode = DiagnosticCode = {}));\nclass ProtocolDiagnostic extends vscode.Diagnostic {\n    data;\n    hasDiagnosticCode;\n    constructor(range, message, severity, data) {\n        super(range, message, severity);\n        this.data = data;\n        this.hasDiagnosticCode = false;\n    }\n}\nexports.ProtocolDiagnostic = ProtocolDiagnostic;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.escape = void 0;\n/**\n * Escape all magic characters in a glob pattern.\n *\n * If the {@link windowsPathsNoEscape | GlobOptions.windowsPathsNoEscape}\n * option is used, then characters are escaped by wrapping in `[]`, because\n * a magic character wrapped in a character class can only be satisfied by\n * that exact character.  In this mode, `\\` is _not_ escaped, because it is\n * not interpreted as a magic character, but instead as a path separator.\n */\nconst escape = (s, { windowsPathsNoEscape = false, } = {}) => {\n    // don't need to escape +@! because we escape the parens\n    // that make those magic, and escaping ! as [!] isn't valid,\n    // because [!]] is a valid glob class meaning not ']'.\n    return windowsPathsNoEscape\n        ? s.replace(/[?*()[\\]]/g, '[$&]')\n        : s.replace(/[?*()[\\]\\\\]/g, '\\\\$&');\n};\nexports.escape = escape;\n//# sourceMappingURL=escape.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = void 0;\nconst cancellation_1 = require(\"./cancellation\");\nvar CancellationState;\n(function (CancellationState) {\n    CancellationState.Continue = 0;\n    CancellationState.Cancelled = 1;\n})(CancellationState || (CancellationState = {}));\nclass SharedArraySenderStrategy {\n    buffers;\n    constructor() {\n        this.buffers = new Map();\n    }\n    enableCancellation(request) {\n        if (request.id === null) {\n            return;\n        }\n        const buffer = new SharedArrayBuffer(4);\n        const data = new Int32Array(buffer, 0, 1);\n        data[0] = CancellationState.Continue;\n        this.buffers.set(request.id, buffer);\n        request.$cancellationData = buffer;\n    }\n    async sendCancellation(_conn, id) {\n        const buffer = this.buffers.get(id);\n        if (buffer === undefined) {\n            return;\n        }\n        const data = new Int32Array(buffer, 0, 1);\n        Atomics.store(data, 0, CancellationState.Cancelled);\n    }\n    cleanup(id) {\n        this.buffers.delete(id);\n    }\n    dispose() {\n        this.buffers.clear();\n    }\n}\nexports.SharedArraySenderStrategy = SharedArraySenderStrategy;\nclass SharedArrayBufferCancellationToken {\n    data;\n    constructor(buffer) {\n        this.data = new Int32Array(buffer, 0, 1);\n    }\n    get isCancellationRequested() {\n        return Atomics.load(this.data, 0) === CancellationState.Cancelled;\n    }\n    get onCancellationRequested() {\n        throw new Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`);\n    }\n}\nclass SharedArrayBufferCancellationTokenSource {\n    token;\n    constructor(buffer) {\n        this.token = new SharedArrayBufferCancellationToken(buffer);\n    }\n    cancel() {\n    }\n    dispose() {\n    }\n}\nclass SharedArrayReceiverStrategy {\n    kind = 'request';\n    createCancellationTokenSource(request) {\n        const buffer = request.$cancellationData;\n        if (buffer === undefined) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n        return new SharedArrayBufferCancellationTokenSource(buffer);\n    }\n}\nexports.SharedArrayReceiverStrategy = SharedArrayReceiverStrategy;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = exports.Delayer = void 0;\nexports.setTestMode = setTestMode;\nexports.clearTestMode = clearTestMode;\nexports.map = map;\nexports.mapAsync = mapAsync;\nexports.forEach = forEach;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nclass Delayer {\n    defaultDelay;\n    timeout;\n    completionPromise;\n    onSuccess;\n    task;\n    constructor(defaultDelay) {\n        this.defaultDelay = defaultDelay;\n        this.timeout = undefined;\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n    }\n    trigger(task, delay = this.defaultDelay) {\n        this.task = task;\n        if (delay >= 0) {\n            this.cancelTimeout();\n        }\n        if (!this.completionPromise) {\n            this.completionPromise = new Promise((resolve) => {\n                this.onSuccess = resolve;\n            }).then(() => {\n                this.completionPromise = undefined;\n                this.onSuccess = undefined;\n                const result = this.task();\n                this.task = undefined;\n                return result;\n            });\n        }\n        if (delay >= 0 || this.timeout === void 0) {\n            this.timeout = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n                this.timeout = undefined;\n                this.onSuccess(undefined);\n            }, delay >= 0 ? delay : this.defaultDelay);\n        }\n        return this.completionPromise;\n    }\n    forceDelivery() {\n        if (!this.completionPromise) {\n            return undefined;\n        }\n        this.cancelTimeout();\n        const result = this.task();\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n        return result;\n    }\n    isTriggered() {\n        return this.timeout !== undefined;\n    }\n    cancel() {\n        this.cancelTimeout();\n        this.completionPromise = undefined;\n    }\n    cancelTimeout() {\n        if (this.timeout !== undefined) {\n            this.timeout.dispose();\n            this.timeout = undefined;\n        }\n    }\n}\nexports.Delayer = Delayer;\nclass Semaphore {\n    _capacity;\n    _active;\n    _waiting;\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\nlet $test = false;\nfunction setTestMode() {\n    $test = true;\n}\nfunction clearTestMode() {\n    $test = false;\n}\nconst defaultYieldTimeout = 15 /*ms*/;\nclass Timer {\n    yieldAfter;\n    startTime;\n    counter;\n    total;\n    counterInterval;\n    constructor(yieldAfter = defaultYieldTimeout) {\n        this.yieldAfter = $test === true ? Math.max(yieldAfter, 2) : Math.max(yieldAfter, defaultYieldTimeout);\n        this.startTime = Date.now();\n        this.counter = 0;\n        this.total = 0;\n        // start with a counter interval of 1.\n        this.counterInterval = 1;\n    }\n    start() {\n        this.counter = 0;\n        this.total = 0;\n        this.counterInterval = 1;\n        this.startTime = Date.now();\n    }\n    shouldYield() {\n        if (++this.counter >= this.counterInterval) {\n            const timeTaken = Date.now() - this.startTime;\n            const timeLeft = Math.max(0, this.yieldAfter - timeTaken);\n            this.total += this.counter;\n            this.counter = 0;\n            if (timeTaken >= this.yieldAfter || timeLeft <= 1) {\n                // Yield also if time left <= 1 since we compute the counter\n                // for max < 2 ms.\n                // Start with interval 1 again. We could do some calculation\n                // with using 80% of the last counter however other things (GC)\n                // affect the timing heavily since we have small timings (1 - 15ms).\n                this.counterInterval = 1;\n                this.total = 0;\n                return true;\n            }\n            else {\n                // Only increase the counter until we have spent <= 2 ms. Increasing\n                // the counter further is very fragile since timing is influenced\n                // by other things and can increase the counter too much. This will result\n                // that we yield in average after [14 - 16]ms.\n                switch (timeTaken) {\n                    case 0:\n                    case 1:\n                        this.counterInterval = this.total * 2;\n                        break;\n                }\n            }\n        }\n        return false;\n    }\n}\nasync function map(items, func, token, options) {\n    if (items.length === 0) {\n        return [];\n    }\n    const result = new Array(items.length);\n    const timer = new Timer(options?.yieldAfter);\n    function convertBatch(start) {\n        timer.start();\n        for (let i = start; i < items.length; i++) {\n            result[i] = func(items[i]);\n            if (timer.shouldYield()) {\n                options?.yieldCallback && options.yieldCallback();\n                return i + 1;\n            }\n        }\n        return -1;\n    }\n    // Convert the first batch sync on the same frame.\n    let index = convertBatch(0);\n    while (index !== -1) {\n        if (token !== undefined && token.isCancellationRequested) {\n            break;\n        }\n        index = await new Promise((resolve) => {\n            (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => {\n                if (token !== undefined && token.isCancellationRequested) {\n                    resolve(-1);\n                }\n                else {\n                    resolve(convertBatch(index));\n                }\n            });\n        });\n    }\n    return result;\n}\nasync function mapAsync(items, func, token, options) {\n    if (items.length === 0) {\n        return [];\n    }\n    const result = new Array(items.length);\n    const timer = new Timer(options?.yieldAfter);\n    async function convertBatch(start) {\n        timer.start();\n        for (let i = start; i < items.length; i++) {\n            result[i] = await func(items[i], token);\n            if (timer.shouldYield()) {\n                options?.yieldCallback && options.yieldCallback();\n                return i + 1;\n            }\n        }\n        return -1;\n    }\n    let index = await convertBatch(0);\n    while (index !== -1) {\n        if (token !== undefined && token.isCancellationRequested) {\n            break;\n        }\n        index = await new Promise((resolve) => {\n            (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => {\n                if (token !== undefined && token.isCancellationRequested) {\n                    resolve(-1);\n                }\n                else {\n                    resolve(convertBatch(index));\n                }\n            });\n        });\n    }\n    return result;\n}\nasync function forEach(items, func, token, options) {\n    if (items.length === 0) {\n        return;\n    }\n    const timer = new Timer(options?.yieldAfter);\n    function runBatch(start) {\n        timer.start();\n        for (let i = start; i < items.length; i++) {\n            func(items[i]);\n            if (timer.shouldYield()) {\n                options?.yieldCallback && options.yieldCallback();\n                return i + 1;\n            }\n        }\n        return -1;\n    }\n    // Convert the first batch sync on the same frame.\n    let index = runBatch(0);\n    while (index !== -1) {\n        if (token !== undefined && token.isCancellationRequested) {\n            break;\n        }\n        index = await new Promise((resolve) => {\n            (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => {\n                if (token !== undefined && token.isCancellationRequested) {\n                    resolve(-1);\n                }\n                else {\n                    resolve(runBatch(index));\n                }\n            });\n        });\n    }\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressPart = void 0;\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = __importStar(require(\"./utils/is\"));\nclass ProgressPart {\n    _client;\n    _token;\n    _infinite;\n    _reported;\n    // listener for LSP progress messages. Set in constructor.\n    _lspProgressDisposable;\n    // VS Code progress state. Set in Window.withProgress callback.\n    _progress;\n    _cancellationToken;\n    _tokenDisposable;\n    _resolve;\n    _reject;\n    constructor(_client, _token, done) {\n        this._client = _client;\n        this._token = _token;\n        this._reported = 0;\n        this._infinite = false;\n        this._lspProgressDisposable = this._client.onProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, (value) => {\n            switch (value.kind) {\n                case 'begin':\n                    this.begin(value);\n                    break;\n                case 'report':\n                    this.report(value);\n                    break;\n                case 'end':\n                    this.done();\n                    done && done(this);\n                    break;\n            }\n        });\n    }\n    begin(params) {\n        this._infinite = params.percentage === undefined;\n        // the progress as already been marked as done / canceled. Ignore begin call\n        if (this._lspProgressDisposable === undefined) {\n            return;\n        }\n        // Since we don't use commands this will be a silent window progress with a hidden notification.\n        void vscode_1.window.withProgress({ location: vscode_1.ProgressLocation.Window, cancellable: params.cancellable, title: params.title }, async (progress, cancellationToken) => {\n            // the progress as already been marked as done / canceled. Ignore begin call\n            if (this._lspProgressDisposable === undefined) {\n                return;\n            }\n            this._progress = progress;\n            this._cancellationToken = cancellationToken;\n            this._tokenDisposable = this._cancellationToken.onCancellationRequested(() => {\n                this._client.sendNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, { token: this._token });\n            });\n            this.report(params);\n            return new Promise((resolve, reject) => {\n                this._resolve = resolve;\n                this._reject = reject;\n            });\n        });\n    }\n    report(params) {\n        if (this._infinite && Is.string(params.message)) {\n            this._progress !== undefined && this._progress.report({ message: params.message });\n        }\n        else if (Is.number(params.percentage)) {\n            const percentage = Math.max(0, Math.min(params.percentage, 100));\n            const delta = Math.max(0, percentage - this._reported);\n            this._reported += delta;\n            this._progress !== undefined && this._progress.report({ message: params.message, increment: delta });\n        }\n    }\n    cancel() {\n        this.cleanup();\n        if (this._reject !== undefined) {\n            this._reject();\n            this._resolve = undefined;\n            this._reject = undefined;\n        }\n    }\n    done() {\n        this.cleanup();\n        if (this._resolve !== undefined) {\n            this._resolve();\n            this._resolve = undefined;\n            this._reject = undefined;\n        }\n    }\n    cleanup() {\n        if (this._lspProgressDisposable !== undefined) {\n            this._lspProgressDisposable.dispose();\n            this._lspProgressDisposable = undefined;\n        }\n        if (this._tokenDisposable !== undefined) {\n            this._tokenDisposable.dispose();\n            this._tokenDisposable = undefined;\n        }\n        this._progress = undefined;\n        this._cancellationToken = undefined;\n    }\n}\nexports.ProgressPart = ProgressPart;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorPresentationRequest = exports.DocumentColorRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to list all color symbols found in a given text document. The request's\n * parameter is of type {@link DocumentColorParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentColorRequest;\n(function (DocumentColorRequest) {\n    DocumentColorRequest.method = 'textDocument/documentColor';\n    DocumentColorRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\n    DocumentColorRequest.capabilities = messages_1.CM.create('textDocument.colorProvider', 'colorProvider');\n})(DocumentColorRequest || (exports.DocumentColorRequest = DocumentColorRequest = {}));\n/**\n * A request to list all presentation for a color. The request's\n * parameter is of type {@link ColorPresentationParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar ColorPresentationRequest;\n(function (ColorPresentationRequest) {\n    ColorPresentationRequest.method = 'textDocument/colorPresentation';\n    ColorPresentationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType(ColorPresentationRequest.method);\n    ColorPresentationRequest.capabilities = messages_1.CM.create('textDocument.colorProvider', 'colorProvider');\n})(ColorPresentationRequest || (exports.ColorPresentationRequest = ColorPresentationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nvar WorkDoneProgress;\n(function (WorkDoneProgress) {\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\n    function is(value) {\n        return value === WorkDoneProgress.type;\n    }\n    WorkDoneProgress.is = is;\n})(WorkDoneProgress || (exports.WorkDoneProgress = WorkDoneProgress = {}));\n/**\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\n * reporting from the server.\n */\nvar WorkDoneProgressCreateRequest;\n(function (WorkDoneProgressCreateRequest) {\n    WorkDoneProgressCreateRequest.method = 'window/workDoneProgress/create';\n    WorkDoneProgressCreateRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType(WorkDoneProgressCreateRequest.method);\n    WorkDoneProgressCreateRequest.capabilities = messages_1.CM.create('window.workDoneProgress', undefined);\n})(WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = WorkDoneProgressCreateRequest = {}));\n/**\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\n * initiated on the server side.\n */\nvar WorkDoneProgressCancelNotification;\n(function (WorkDoneProgressCancelNotification) {\n    WorkDoneProgressCancelNotification.method = 'window/workDoneProgress/cancel';\n    WorkDoneProgressCancelNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType(WorkDoneProgressCancelNotification.method);\n})(WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = WorkDoneProgressCancelNotification = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass ProtocolTypeHierarchyItem extends code.TypeHierarchyItem {\n    data;\n    constructor(kind, name, detail, uri, range, selectionRange, data) {\n        super(kind, name, detail, uri, range, selectionRange);\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nexports.default = ProtocolTypeHierarchyItem;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Uri, workspace, Disposable } from 'vscode';\nimport { RequestType, BaseLanguageClient } from 'vscode-languageclient';\nimport { Runtime } from './htmlClient';\n\nexport namespace FsStatRequest {\n\texport const type: RequestType<string, FileStat, any> = new RequestType('fs/stat');\n}\n\nexport namespace FsReadDirRequest {\n\texport const type: RequestType<string, [string, FileType][], any> = new RequestType('fs/readDir');\n}\n\nexport function serveFileSystemRequests(client: BaseLanguageClient, runtime: Runtime): Disposable {\n\tconst disposables = [];\n\tdisposables.push(client.onRequest(FsReadDirRequest.type, (uriString: string) => {\n\t\tconst uri = Uri.parse(uriString);\n\t\tif (uri.scheme === 'file' && runtime.fileFs) {\n\t\t\treturn runtime.fileFs.readDirectory(uriString);\n\t\t}\n\t\treturn workspace.fs.readDirectory(uri);\n\t}));\n\tdisposables.push(client.onRequest(FsStatRequest.type, (uriString: string) => {\n\t\tconst uri = Uri.parse(uriString);\n\t\tif (uri.scheme === 'file' && runtime.fileFs) {\n\t\t\treturn runtime.fileFs.stat(uriString);\n\t\t}\n\t\treturn workspace.fs.stat(uri);\n\t}));\n\treturn Disposable.from(...disposables);\n}\n\nexport enum FileType {\n\t/**\n\t * The file type is unknown.\n\t */\n\tUnknown = 0,\n\t/**\n\t * A regular file.\n\t */\n\tFile = 1,\n\t/**\n\t * A directory.\n\t */\n\tDirectory = 2,\n\t/**\n\t * A symbolic link to a file.\n\t */\n\tSymbolicLink = 64\n}\nexport interface FileStat {\n\t/**\n\t * The type of the file, e.g. is a regular file, a directory, or symbolic link\n\t * to a file.\n\t */\n\ttype: FileType;\n\t/**\n\t * The creation timestamp in milliseconds elapsed since January 1, 1970 00:00:00 UTC.\n\t */\n\tctime: number;\n\t/**\n\t * The modification timestamp in milliseconds elapsed since January 1, 1970 00:00:00 UTC.\n\t */\n\tmtime: number;\n\t/**\n\t * The size in bytes.\n\t */\n\tsize: number;\n}\n\nexport interface FileSystemProvider {\n\tstat(uri: string): Promise<FileStat>;\n\treadDirectory(uri: string): Promise<[string, FileType][]>;\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceFoldersFeature = void 0;\nexports.arrayDiff = arrayDiff;\nconst UUID = __importStar(require(\"./utils/uuid\"));\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nfunction access(target, key) {\n    if (target === undefined || target === null) {\n        return undefined;\n    }\n    return target[key];\n}\nfunction arrayDiff(left, right) {\n    return left.filter(element => right.indexOf(element) < 0);\n}\nclass WorkspaceFoldersFeature {\n    _client;\n    _listeners;\n    _initialFolders;\n    constructor(client) {\n        this._client = client;\n        this._listeners = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._listeners.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\n    }\n    fillInitializeParams(params) {\n        const folders = vscode_1.workspace.workspaceFolders;\n        this.initializeWithFolders(folders);\n        if (folders === void 0) {\n            params.workspaceFolders = null;\n        }\n        else {\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\n        }\n    }\n    initializeWithFolders(currentWorkspaceFolders) {\n        this._initialFolders = currentWorkspaceFolders;\n    }\n    fillClientCapabilities(capabilities) {\n        capabilities.workspace = capabilities.workspace || {};\n        capabilities.workspace.workspaceFolders = true;\n    }\n    initialize(capabilities) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\n            const workspaceFolders = () => {\n                const folders = vscode_1.workspace.workspaceFolders;\n                if (folders === undefined) {\n                    return null;\n                }\n                const result = folders.map((folder) => {\n                    return this.asProtocol(folder);\n                });\n                return result;\n            };\n            const middleware = client.middleware.workspace;\n            return middleware && middleware.workspaceFolders\n                ? middleware.workspaceFolders(token, workspaceFolders)\n                : workspaceFolders(token);\n        });\n        const value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\n        let id;\n        if (typeof value === 'string') {\n            id = value;\n        }\n        else if (value === true) {\n            id = UUID.generateUuid();\n        }\n        if (id) {\n            this.register({ id: id, registerOptions: undefined });\n        }\n    }\n    sendInitialEvent(currentWorkspaceFolders) {\n        let promise;\n        if (this._initialFolders && currentWorkspaceFolders) {\n            const removed = arrayDiff(this._initialFolders, currentWorkspaceFolders);\n            const added = arrayDiff(currentWorkspaceFolders, this._initialFolders);\n            if (added.length > 0 || removed.length > 0) {\n                promise = this.doSendEvent(added, removed);\n            }\n        }\n        else if (this._initialFolders) {\n            promise = this.doSendEvent([], this._initialFolders);\n        }\n        else if (currentWorkspaceFolders) {\n            promise = this.doSendEvent(currentWorkspaceFolders, []);\n        }\n        if (promise !== undefined) {\n            promise.catch((error) => {\n                this._client.error(`Sending notification ${vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type.method} failed`, error);\n            });\n        }\n    }\n    doSendEvent(addedFolders, removedFolders) {\n        const params = {\n            event: {\n                added: addedFolders.map(folder => this.asProtocol(folder)),\n                removed: removedFolders.map(folder => this.asProtocol(folder))\n            }\n        };\n        return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\n    }\n    register(data) {\n        const id = data.id;\n        const client = this._client;\n        const disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\n            const didChangeWorkspaceFolders = (event) => {\n                return this.doSendEvent(event.added, event.removed);\n            };\n            const middleware = client.middleware.workspace;\n            const promise = middleware && middleware.didChangeWorkspaceFolders\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\n                : didChangeWorkspaceFolders(event);\n            promise.catch((error) => {\n                this._client.error(`Sending notification ${vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type.method} failed`, error);\n            });\n        });\n        this._listeners.set(id, disposable);\n        this.sendInitialEvent(vscode_1.workspace.workspaceFolders);\n    }\n    unregister(id) {\n        const disposable = this._listeners.get(id);\n        if (disposable === void 0) {\n            return;\n        }\n        this._listeners.delete(id);\n        disposable.dispose();\n    }\n    clear() {\n        for (const disposable of this._listeners.values()) {\n            disposable.dispose();\n        }\n        this._listeners.clear();\n    }\n    asProtocol(workspaceFolder) {\n        if (workspaceFolder === void 0) {\n            return null;\n        }\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\n    }\n}\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.DidRenameFilesNotification = exports.WillRenameFilesRequest = exports.DidCreateFilesNotification = exports.WillCreateFilesRequest = exports.FileOperationPatternKind = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A pattern kind describing if a glob pattern matches a file a folder or\n * both.\n *\n * @since 3.16.0\n */\nvar FileOperationPatternKind;\n(function (FileOperationPatternKind) {\n    /**\n     * The pattern matches a file only.\n     */\n    FileOperationPatternKind.file = 'file';\n    /**\n     * The pattern matches a folder only.\n     */\n    FileOperationPatternKind.folder = 'folder';\n})(FileOperationPatternKind || (exports.FileOperationPatternKind = FileOperationPatternKind = {}));\n/**\n * The will create files request is sent from the client to the server before files are actually\n * created as long as the creation is triggered from within the client.\n *\n * The request can return a `WorkspaceEdit` which will be applied to workspace before the\n * files are created. Hence the `WorkspaceEdit` can not manipulate the content of the file\n * to be created.\n *\n * @since 3.16.0\n */\nvar WillCreateFilesRequest;\n(function (WillCreateFilesRequest) {\n    WillCreateFilesRequest.method = 'workspace/willCreateFiles';\n    WillCreateFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillCreateFilesRequest.type = new messages_1.ProtocolRequestType(WillCreateFilesRequest.method);\n    WillCreateFilesRequest.capabilities = messages_1.CM.create('workspace.fileOperations.willCreate', 'workspace.fileOperations.willCreate');\n})(WillCreateFilesRequest || (exports.WillCreateFilesRequest = WillCreateFilesRequest = {}));\n/**\n * The did create files notification is sent from the client to the server when\n * files were created from within the client.\n *\n * @since 3.16.0\n */\nvar DidCreateFilesNotification;\n(function (DidCreateFilesNotification) {\n    DidCreateFilesNotification.method = 'workspace/didCreateFiles';\n    DidCreateFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCreateFilesNotification.type = new messages_1.ProtocolNotificationType(DidCreateFilesNotification.method);\n    DidCreateFilesNotification.capabilities = messages_1.CM.create('workspace.fileOperations.didCreate', 'workspace.fileOperations.didCreate');\n})(DidCreateFilesNotification || (exports.DidCreateFilesNotification = DidCreateFilesNotification = {}));\n/**\n * The will rename files request is sent from the client to the server before files are actually\n * renamed as long as the rename is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar WillRenameFilesRequest;\n(function (WillRenameFilesRequest) {\n    WillRenameFilesRequest.method = 'workspace/willRenameFiles';\n    WillRenameFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillRenameFilesRequest.type = new messages_1.ProtocolRequestType(WillRenameFilesRequest.method);\n    WillRenameFilesRequest.capabilities = messages_1.CM.create('workspace.fileOperations.willRename', 'workspace.fileOperations.willRename');\n})(WillRenameFilesRequest || (exports.WillRenameFilesRequest = WillRenameFilesRequest = {}));\n/**\n * The did rename files notification is sent from the client to the server when\n * files were renamed from within the client.\n *\n * @since 3.16.0\n */\nvar DidRenameFilesNotification;\n(function (DidRenameFilesNotification) {\n    DidRenameFilesNotification.method = 'workspace/didRenameFiles';\n    DidRenameFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidRenameFilesNotification.type = new messages_1.ProtocolNotificationType(DidRenameFilesNotification.method);\n    DidRenameFilesNotification.capabilities = messages_1.CM.create('workspace.fileOperations.didRename', 'workspace.fileOperations.didRename');\n})(DidRenameFilesNotification || (exports.DidRenameFilesNotification = DidRenameFilesNotification = {}));\n/**\n * The will delete files request is sent from the client to the server before files are actually\n * deleted as long as the deletion is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar DidDeleteFilesNotification;\n(function (DidDeleteFilesNotification) {\n    DidDeleteFilesNotification.method = 'workspace/didDeleteFiles';\n    DidDeleteFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidDeleteFilesNotification.type = new messages_1.ProtocolNotificationType(DidDeleteFilesNotification.method);\n    DidDeleteFilesNotification.capabilities = messages_1.CM.create('workspace.fileOperations.didDelete', 'workspace.fileOperations.didDelete');\n})(DidDeleteFilesNotification || (exports.DidDeleteFilesNotification = DidDeleteFilesNotification = {}));\n/**\n * The did delete files notification is sent from the client to the server when\n * files were deleted from within the client.\n *\n * @since 3.16.0\n */\nvar WillDeleteFilesRequest;\n(function (WillDeleteFilesRequest) {\n    WillDeleteFilesRequest.method = 'workspace/willDeleteFiles';\n    WillDeleteFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillDeleteFilesRequest.type = new messages_1.ProtocolRequestType(WillDeleteFilesRequest.method);\n    WillDeleteFilesRequest.capabilities = messages_1.CM.create('workspace.fileOperations.willDelete', 'workspace.fileOperations.willDelete');\n})(WillDeleteFilesRequest || (exports.WillDeleteFilesRequest = WillDeleteFilesRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.CallHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `CallHierarchyItem` in a document at a given position.\n * Can be used as an input to an incoming or outgoing call hierarchy.\n *\n * @since 3.16.0\n */\nvar CallHierarchyPrepareRequest;\n(function (CallHierarchyPrepareRequest) {\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\n    CallHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\n    CallHierarchyPrepareRequest.capabilities = messages_1.CM.create('textDocument.callHierarchy', 'callHierarchyProvider');\n})(CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = CallHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyIncomingCallsRequest;\n(function (CallHierarchyIncomingCallsRequest) {\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\n    CallHierarchyIncomingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\n})(CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = CallHierarchyIncomingCallsRequest = {}));\n/**\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyOutgoingCallsRequest;\n(function (CallHierarchyOutgoingCallsRequest) {\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\n    CallHierarchyOutgoingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\n})(CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = CallHierarchyOutgoingCallsRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolean = boolean;\nexports.string = string;\nexports.number = number;\nexports.error = error;\nexports.func = func;\nexports.array = array;\nexports.stringArray = stringArray;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nfunction error(value) {\n    return value instanceof Error;\n}\nfunction func(value) {\n    return typeof value === 'function';\n}\nfunction array(value) {\n    return Array.isArray(value);\n}\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n\nimport {\n\tlanguages, ExtensionContext, Position, TextDocument, Range, CompletionItem, CompletionItemKind, SnippetString, workspace, extensions,\n\tDisposable, FormattingOptions, CancellationToken, ProviderResult, TextEdit, CompletionContext, CompletionList, SemanticTokensLegend,\n\tDocumentSemanticTokensProvider, DocumentRangeSemanticTokensProvider, SemanticTokens, window, commands, l10n,\n\tLogOutputChannel\n} from 'vscode';\nimport {\n\tLanguageClientOptions, RequestType, DocumentRangeFormattingParams,\n\tDocumentRangeFormattingRequest, ProvideCompletionItemsSignature, TextDocumentIdentifier, RequestType0, Range as LspRange, Position as LspPosition, NotificationType, BaseLanguageClient\n} from 'vscode-languageclient';\nimport { FileSystemProvider, serveFileSystemRequests } from './requests';\nimport { getCustomDataSource } from './customData';\nimport { activateAutoInsertion } from './autoInsertion';\nimport { getLanguageParticipants, LanguageParticipants } from './languageParticipants';\n\nnamespace CustomDataChangedNotification {\n\texport const type: NotificationType<string[]> = new NotificationType('html/customDataChanged');\n}\n\nnamespace CustomDataContent {\n\texport const type: RequestType<string, string, any> = new RequestType('html/customDataContent');\n}\n\ninterface AutoInsertParams {\n\t/**\n\t * The auto insert kind\n\t */\n\tkind: 'autoQuote' | 'autoClose';\n\t/**\n\t * The text document.\n\t */\n\ttextDocument: TextDocumentIdentifier;\n\t/**\n\t * The position inside the text document.\n\t */\n\tposition: LspPosition;\n}\n\nnamespace AutoInsertRequest {\n\texport const type: RequestType<AutoInsertParams, string, any> = new RequestType('html/autoInsert');\n}\n\n// experimental: semantic tokens\ninterface SemanticTokenParams {\n\ttextDocument: TextDocumentIdentifier;\n\tranges?: LspRange[];\n}\nnamespace SemanticTokenRequest {\n\texport const type: RequestType<SemanticTokenParams, number[] | null, any> = new RequestType('html/semanticTokens');\n}\nnamespace SemanticTokenLegendRequest {\n\texport const type: RequestType0<{ types: string[]; modifiers: string[] } | null, any> = new RequestType0('html/semanticTokenLegend');\n}\n\nnamespace SettingIds {\n\texport const linkedEditing = 'editor.linkedEditing';\n\texport const formatEnable = 'html.format.enable';\n\n}\n\nexport interface TelemetryReporter {\n\tsendTelemetryEvent(eventName: string, properties?: {\n\t\t[key: string]: string;\n\t}, measurements?: {\n\t\t[key: string]: number;\n\t}): void;\n}\n\nexport type LanguageClientConstructor = (name: string, description: string, clientOptions: LanguageClientOptions) => BaseLanguageClient;\n\nexport const languageServerDescription = l10n.t('HTML Language Server');\n\nexport interface Runtime {\n\tTextDecoder: typeof TextDecoder;\n\tfileFs?: FileSystemProvider;\n\ttelemetry?: TelemetryReporter;\n\treadonly timer: {\n\t\tsetTimeout(callback: (...args: any[]) => void, ms: number, ...args: any[]): Disposable;\n\t};\n}\n\nexport interface AsyncDisposable {\n\tdispose(): Promise<void>;\n}\n\nexport async function startClient(context: ExtensionContext, newLanguageClient: LanguageClientConstructor, runtime: Runtime): Promise<AsyncDisposable> {\n\n\tconst logOutputChannel = window.createOutputChannel(languageServerDescription, { log: true });\n\n\tconst languageParticipants = getLanguageParticipants();\n\tcontext.subscriptions.push(languageParticipants);\n\n\tlet client: Disposable | undefined = await startClientWithParticipants(languageParticipants, newLanguageClient, logOutputChannel, runtime);\n\n\tconst promptForLinkedEditingKey = 'html.promptForLinkedEditing';\n\tif (extensions.getExtension('formulahendry.auto-rename-tag') !== undefined && (context.globalState.get(promptForLinkedEditingKey) !== false)) {\n\t\tconst config = workspace.getConfiguration('editor', { languageId: 'html' });\n\t\tif (!config.get('linkedEditing') && !config.get('renameOnType')) {\n\t\t\tconst activeEditorListener = window.onDidChangeActiveTextEditor(async e => {\n\t\t\t\tif (e && languageParticipants.hasLanguage(e.document.languageId)) {\n\t\t\t\t\tcontext.globalState.update(promptForLinkedEditingKey, false);\n\t\t\t\t\tactiveEditorListener.dispose();\n\t\t\t\t\tconst configure = l10n.t('Configure');\n\t\t\t\t\tconst res = await window.showInformationMessage(l10n.t('VS Code now has built-in support for auto-renaming tags. Do you want to enable it?'), configure);\n\t\t\t\t\tif (res === configure) {\n\t\t\t\t\t\tcommands.executeCommand('workbench.action.openSettings', SettingIds.linkedEditing);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontext.subscriptions.push(activeEditorListener);\n\t\t}\n\t}\n\n\tlet restartTrigger: Disposable | undefined;\n\tlanguageParticipants.onDidChange(() => {\n\t\tif (restartTrigger) {\n\t\t\trestartTrigger.dispose();\n\t\t}\n\t\trestartTrigger = runtime.timer.setTimeout(async () => {\n\t\t\tif (client) {\n\t\t\t\tlogOutputChannel.info('Extensions have changed, restarting HTML server...');\n\t\t\t\tlogOutputChannel.info('');\n\t\t\t\tconst oldClient = client;\n\t\t\t\tclient = undefined;\n\t\t\t\tawait oldClient.dispose();\n\t\t\t\tclient = await startClientWithParticipants(languageParticipants, newLanguageClient, logOutputChannel, runtime);\n\t\t\t}\n\t\t}, 2000);\n\t});\n\n\treturn {\n\t\tdispose: async () => {\n\t\t\trestartTrigger?.dispose();\n\t\t\tawait client?.dispose();\n\t\t\tlogOutputChannel.dispose();\n\t\t}\n\t};\n}\n\nasync function startClientWithParticipants(languageParticipants: LanguageParticipants, newLanguageClient: LanguageClientConstructor, logOutputChannel: LogOutputChannel, runtime: Runtime): Promise<AsyncDisposable> {\n\n\tconst toDispose: Disposable[] = [];\n\n\tconst documentSelector = languageParticipants.documentSelector;\n\tconst embeddedLanguages = { css: true, javascript: true };\n\n\tlet rangeFormatting: Disposable | undefined = undefined;\n\n\t// Options to control the language client\n\tconst clientOptions: LanguageClientOptions = {\n\t\tdocumentSelector,\n\t\tsynchronize: {\n\t\t\tconfigurationSection: ['html', 'css', 'javascript', 'js/ts'], // the settings to synchronize\n\t\t},\n\t\tinitializationOptions: {\n\t\t\tembeddedLanguages,\n\t\t\thandledSchemas: ['file'],\n\t\t\tprovideFormatter: false, // tell the server to not provide formatting capability and ignore the `html.format.enable` setting.\n\t\t\tcustomCapabilities: { rangeFormatting: { editLimit: 10000 } }\n\t\t},\n\t\tmiddleware: {\n\t\t\t// testing the replace / insert mode\n\t\t\tprovideCompletionItem(document: TextDocument, position: Position, context: CompletionContext, token: CancellationToken, next: ProvideCompletionItemsSignature): ProviderResult<CompletionItem[] | CompletionList> {\n\t\t\t\tfunction updateRanges(item: CompletionItem) {\n\t\t\t\t\tconst range = item.range;\n\t\t\t\t\tif (range instanceof Range && range.end.isAfter(position) && range.start.isBeforeOrEqual(position)) {\n\t\t\t\t\t\titem.range = { inserting: new Range(range.start, position), replacing: range };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfunction updateProposals(r: CompletionItem[] | CompletionList | null | undefined): CompletionItem[] | CompletionList | null | undefined {\n\t\t\t\t\tif (r) {\n\t\t\t\t\t\t(Array.isArray(r) ? r : r.items).forEach(updateRanges);\n\t\t\t\t\t}\n\t\t\t\t\treturn r;\n\t\t\t\t}\n\t\t\t\tconst isThenable = <T>(obj: ProviderResult<T>): obj is Thenable<T> => obj && (<any>obj)['then'];\n\n\t\t\t\tconst r = next(document, position, context, token);\n\t\t\t\tif (isThenable<CompletionItem[] | CompletionList | null | undefined>(r)) {\n\t\t\t\t\treturn r.then(updateProposals);\n\t\t\t\t}\n\t\t\t\treturn updateProposals(r);\n\t\t\t}\n\t\t}\n\t};\n\tclientOptions.outputChannel = logOutputChannel;\n\n\t// Create the language client and start the client.\n\tconst client = newLanguageClient('html', languageServerDescription, clientOptions);\n\tclient.registerProposedFeatures();\n\n\tawait client.start();\n\n\ttoDispose.push(serveFileSystemRequests(client, runtime));\n\n\tconst customDataSource = getCustomDataSource(runtime, toDispose);\n\n\tclient.sendNotification(CustomDataChangedNotification.type, customDataSource.uris);\n\tcustomDataSource.onDidChange(() => {\n\t\tclient.sendNotification(CustomDataChangedNotification.type, customDataSource.uris);\n\t}, undefined, toDispose);\n\ttoDispose.push(client.onRequest(CustomDataContent.type, customDataSource.getContent));\n\n\n\tconst insertRequestor = (kind: 'autoQuote' | 'autoClose', document: TextDocument, position: Position): Promise<string> => {\n\t\tconst param: AutoInsertParams = {\n\t\t\tkind,\n\t\t\ttextDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n\t\t\tposition: client.code2ProtocolConverter.asPosition(position)\n\t\t};\n\t\treturn client.sendRequest(AutoInsertRequest.type, param);\n\t};\n\n\tconst disposable = activateAutoInsertion(insertRequestor, languageParticipants, runtime);\n\ttoDispose.push(disposable);\n\n\tconst disposable2 = client.onTelemetry(e => {\n\t\truntime.telemetry?.sendTelemetryEvent(e.key, e.data);\n\t});\n\ttoDispose.push(disposable2);\n\n\t// manually register / deregister format provider based on the `html.format.enable` setting avoiding issues with late registration. See #71652.\n\tupdateFormatterRegistration();\n\ttoDispose.push({ dispose: () => rangeFormatting && rangeFormatting.dispose() });\n\ttoDispose.push(workspace.onDidChangeConfiguration(e => e.affectsConfiguration(SettingIds.formatEnable) && updateFormatterRegistration()));\n\n\tclient.sendRequest(SemanticTokenLegendRequest.type).then(legend => {\n\t\tif (legend) {\n\t\t\tconst provider: DocumentSemanticTokensProvider & DocumentRangeSemanticTokensProvider = {\n\t\t\t\tprovideDocumentSemanticTokens(doc) {\n\t\t\t\t\tconst params: SemanticTokenParams = {\n\t\t\t\t\t\ttextDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(doc),\n\t\t\t\t\t};\n\t\t\t\t\treturn client.sendRequest(SemanticTokenRequest.type, params).then(data => {\n\t\t\t\t\t\treturn data && new SemanticTokens(new Uint32Array(data));\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tprovideDocumentRangeSemanticTokens(doc, range) {\n\t\t\t\t\tconst params: SemanticTokenParams = {\n\t\t\t\t\t\ttextDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(doc),\n\t\t\t\t\t\tranges: [client.code2ProtocolConverter.asRange(range)]\n\t\t\t\t\t};\n\t\t\t\t\treturn client.sendRequest(SemanticTokenRequest.type, params).then(data => {\n\t\t\t\t\t\treturn data && new SemanticTokens(new Uint32Array(data));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\ttoDispose.push(languages.registerDocumentSemanticTokensProvider(documentSelector, provider, new SemanticTokensLegend(legend.types, legend.modifiers)));\n\t\t}\n\t});\n\n\tfunction updateFormatterRegistration() {\n\t\tconst formatEnabled = workspace.getConfiguration().get(SettingIds.formatEnable);\n\t\tif (!formatEnabled && rangeFormatting) {\n\t\t\trangeFormatting.dispose();\n\t\t\trangeFormatting = undefined;\n\t\t} else if (formatEnabled && !rangeFormatting) {\n\t\t\trangeFormatting = languages.registerDocumentRangeFormattingEditProvider(documentSelector, {\n\t\t\t\tprovideDocumentRangeFormattingEdits(document: TextDocument, range: Range, options: FormattingOptions, token: CancellationToken): ProviderResult<TextEdit[]> {\n\t\t\t\t\tconst filesConfig = workspace.getConfiguration('files', document);\n\t\t\t\t\tconst fileFormattingOptions = {\n\t\t\t\t\t\ttrimTrailingWhitespace: filesConfig.get<boolean>('trimTrailingWhitespace'),\n\t\t\t\t\t\ttrimFinalNewlines: filesConfig.get<boolean>('trimFinalNewlines'),\n\t\t\t\t\t\tinsertFinalNewline: filesConfig.get<boolean>('insertFinalNewline'),\n\t\t\t\t\t};\n\t\t\t\t\tconst params: DocumentRangeFormattingParams = {\n\t\t\t\t\t\ttextDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n\t\t\t\t\t\trange: client.code2ProtocolConverter.asRange(range),\n\t\t\t\t\t\toptions: client.code2ProtocolConverter.asFormattingOptions(options, fileFormattingOptions)\n\t\t\t\t\t};\n\t\t\t\t\treturn client.sendRequest(DocumentRangeFormattingRequest.type, params, token).then(\n\t\t\t\t\t\tclient.protocol2CodeConverter.asTextEdits,\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\tclient.handleFailedRequest(DocumentRangeFormattingRequest.type, undefined, error, []);\n\t\t\t\t\t\t\treturn Promise.resolve([]);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tconst regionCompletionRegExpr = /^(\\s*)(<(!(-(-\\s*(#\\w*)?)?)?)?)?$/;\n\tconst htmlSnippetCompletionRegExpr = /^(\\s*)(<(h(t(m(l)?)?)?)?)?$/;\n\ttoDispose.push(languages.registerCompletionItemProvider(documentSelector, {\n\t\tprovideCompletionItems(doc, pos) {\n\t\t\tconst results: CompletionItem[] = [];\n\t\t\tconst lineUntilPos = doc.getText(new Range(new Position(pos.line, 0), pos));\n\t\t\tconst match = lineUntilPos.match(regionCompletionRegExpr);\n\t\t\tif (match) {\n\t\t\t\tconst range = new Range(new Position(pos.line, match[1].length), pos);\n\t\t\t\tconst beginProposal = new CompletionItem('#region', CompletionItemKind.Snippet);\n\t\t\t\tbeginProposal.range = range;\n\t\t\t\tbeginProposal.insertText = new SnippetString('<!-- #region $1-->');\n\t\t\t\tbeginProposal.documentation = l10n.t('Folding Region Start');\n\t\t\t\tbeginProposal.filterText = match[2];\n\t\t\t\tbeginProposal.sortText = 'za';\n\t\t\t\tresults.push(beginProposal);\n\t\t\t\tconst endProposal = new CompletionItem('#endregion', CompletionItemKind.Snippet);\n\t\t\t\tendProposal.range = range;\n\t\t\t\tendProposal.insertText = new SnippetString('<!-- #endregion -->');\n\t\t\t\tendProposal.documentation = l10n.t('Folding Region End');\n\t\t\t\tendProposal.filterText = match[2];\n\t\t\t\tendProposal.sortText = 'zb';\n\t\t\t\tresults.push(endProposal);\n\t\t\t}\n\t\t\tconst match2 = lineUntilPos.match(htmlSnippetCompletionRegExpr);\n\t\t\tif (match2 && doc.getText(new Range(new Position(0, 0), pos)).match(htmlSnippetCompletionRegExpr)) {\n\t\t\t\tconst range = new Range(new Position(pos.line, match2[1].length), pos);\n\t\t\t\tconst snippetProposal = new CompletionItem('HTML sample', CompletionItemKind.Snippet);\n\t\t\t\tsnippetProposal.range = range;\n\t\t\t\tconst content = ['<!DOCTYPE html>',\n\t\t\t\t\t'<html>',\n\t\t\t\t\t'<head>',\n\t\t\t\t\t'\\t<meta charset=\\'utf-8\\'>',\n\t\t\t\t\t'\\t<meta http-equiv=\\'X-UA-Compatible\\' content=\\'IE=edge\\'>',\n\t\t\t\t\t'\\t<title>${1:Page Title}</title>',\n\t\t\t\t\t'\\t<meta name=\\'viewport\\' content=\\'width=device-width, initial-scale=1\\'>',\n\t\t\t\t\t'\\t<link rel=\\'stylesheet\\' type=\\'text/css\\' media=\\'screen\\' href=\\'${2:main.css}\\'>',\n\t\t\t\t\t'\\t<script src=\\'${3:main.js}\\'></script>',\n\t\t\t\t\t'</head>',\n\t\t\t\t\t'<body>',\n\t\t\t\t\t'\\t$0',\n\t\t\t\t\t'</body>',\n\t\t\t\t\t'</html>'].join('\\n');\n\t\t\t\tsnippetProposal.insertText = new SnippetString(content);\n\t\t\t\tsnippetProposal.documentation = l10n.t('Simple HTML5 starting point');\n\t\t\t\tsnippetProposal.filterText = match2[2];\n\t\t\t\tsnippetProposal.sortText = 'za';\n\t\t\t\tresults.push(snippetProposal);\n\t\t\t}\n\t\t\treturn results;\n\t\t}\n\t}));\n\n\treturn {\n\t\tdispose: async () => {\n\t\t\tawait client.stop();\n\t\t\ttoDispose.forEach(d => d.dispose());\n\t\t\trangeFormatting?.dispose();\n\t\t}\n\t};\n\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FileSystemWatcherFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass FileSystemWatcherFeature {\n    _client;\n    _notifyFileEvent;\n    _watchers;\n    constructor(client, notifyFileEvent) {\n        this._client = client;\n        this._notifyFileEvent = notifyFileEvent;\n        this._watchers = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._watchers.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'didChangeWatchedFiles').relativePatternSupport = true;\n    }\n    initialize(_capabilities, _documentSelector) {\n    }\n    register(data) {\n        if (!Array.isArray(data.registerOptions.watchers)) {\n            return;\n        }\n        const disposables = [];\n        for (const watcher of data.registerOptions.watchers) {\n            const globPattern = this._client.protocol2CodeConverter.asGlobPattern(watcher.globPattern);\n            if (globPattern === undefined) {\n                continue;\n            }\n            let watchCreate = true, watchChange = true, watchDelete = true;\n            if (watcher.kind !== undefined && watcher.kind !== null) {\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) !== 0;\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) !== 0;\n            }\n            const fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(globPattern, !watchCreate, !watchChange, !watchDelete);\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, disposables);\n            disposables.push(fileSystemWatcher);\n        }\n        this._watchers.set(data.id, disposables);\n    }\n    registerRaw(id, fileSystemWatchers) {\n        const disposables = [];\n        for (const fileSystemWatcher of fileSystemWatchers) {\n            this.hookListeners(fileSystemWatcher, true, true, true, disposables);\n        }\n        this._watchers.set(id, disposables);\n    }\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\n        if (watchCreate) {\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\n            }), null, listeners);\n        }\n        if (watchChange) {\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\n            }), null, listeners);\n        }\n        if (watchDelete) {\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\n            }), null, listeners);\n        }\n    }\n    unregister(id) {\n        const disposables = this._watchers.get(id);\n        if (disposables) {\n            this._watchers.delete(id);\n            for (const disposable of disposables) {\n                disposable.dispose();\n            }\n        }\n    }\n    clear() {\n        this._watchers.forEach((disposables) => {\n            for (const disposable of disposables) {\n                disposable.dispose();\n            }\n        });\n        this._watchers.clear();\n    }\n}\nexports.FileSystemWatcherFeature = FileSystemWatcherFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emitter = exports.Event = void 0;\nconst ral_1 = __importDefault(require(\"./ral\"));\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event || (exports.Event = Event = {}));\nclass CallbackList {\n    _callbacks;\n    _contexts;\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                (0, ral_1.default)().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    _options;\n    static _noop = function () { };\n    _event;\n    _callbacks;\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlayHintsFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass InlayHintsFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.InlayHintRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const inlayHint = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'inlayHint');\n        inlayHint.dynamicRegistration = true;\n        inlayHint.resolveSupport = {\n            properties: ['tooltip', 'textEdits', 'label.tooltip', 'label.location', 'label.command']\n        };\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'inlayHint').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        this._client.onRequest(vscode_languageserver_protocol_1.InlayHintRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeInlayHints.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.inlayHintProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeInlayHints: eventEmitter.event,\n            provideInlayHints: (document, viewPort, token) => {\n                const client = this._client;\n                const provideInlayHints = async (document, viewPort, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(viewPort)\n                    };\n                    try {\n                        const values = await client.sendRequest(vscode_languageserver_protocol_1.InlayHintRequest.type, requestParams, token);\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asInlayHints(values, token);\n                    }\n                    catch (error) {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlayHintRequest.type, token, error, null);\n                    }\n                };\n                const middleware = client.middleware;\n                return middleware.provideInlayHints\n                    ? middleware.provideInlayHints(document, viewPort, token, provideInlayHints)\n                    : provideInlayHints(document, viewPort, token);\n            }\n        };\n        provider.resolveInlayHint = options.resolveProvider === true\n            ? (hint, token) => {\n                const client = this._client;\n                const resolveInlayHint = async (item, token) => {\n                    try {\n                        const value = await client.sendRequest(vscode_languageserver_protocol_1.InlayHintResolveRequest.type, client.code2ProtocolConverter.asInlayHint(item), token);\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        const result = client.protocol2CodeConverter.asInlayHint(value, token);\n                        return token.isCancellationRequested ? null : result;\n                    }\n                    catch (error) {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlayHintResolveRequest.type, token, error, null);\n                    }\n                };\n                const middleware = client.middleware;\n                return middleware.resolveInlayHint\n                    ? middleware.resolveInlayHint(hint, token, resolveInlayHint)\n                    : resolveInlayHint(hint, token);\n            }\n            : undefined;\n        return [this.registerProvider(selector, provider), { provider: provider, onDidChangeInlayHints: eventEmitter }];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.InlayHintsFeature = InlayHintsFeature;\n","\"use strict\";\n// translate the various posix character classes into unicode properties\n// this works across all unicode locales\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseClass = void 0;\n// { <posix class>: [<translation>, /u flag required, negated]\nconst posixClasses = {\n    '[:alnum:]': ['\\\\p{L}\\\\p{Nl}\\\\p{Nd}', true],\n    '[:alpha:]': ['\\\\p{L}\\\\p{Nl}', true],\n    '[:ascii:]': ['\\\\x' + '00-\\\\x' + '7f', false],\n    '[:blank:]': ['\\\\p{Zs}\\\\t', true],\n    '[:cntrl:]': ['\\\\p{Cc}', true],\n    '[:digit:]': ['\\\\p{Nd}', true],\n    '[:graph:]': ['\\\\p{Z}\\\\p{C}', true, true],\n    '[:lower:]': ['\\\\p{Ll}', true],\n    '[:print:]': ['\\\\p{C}', true],\n    '[:punct:]': ['\\\\p{P}', true],\n    '[:space:]': ['\\\\p{Z}\\\\t\\\\r\\\\n\\\\v\\\\f', true],\n    '[:upper:]': ['\\\\p{Lu}', true],\n    '[:word:]': ['\\\\p{L}\\\\p{Nl}\\\\p{Nd}\\\\p{Pc}', true],\n    '[:xdigit:]': ['A-Fa-f0-9', false],\n};\n// only need to escape a few things inside of brace expressions\n// escapes: [ \\ ] -\nconst braceEscape = (s) => s.replace(/[[\\]\\\\-]/g, '\\\\$&');\n// escape all regexp magic characters\nconst regexpEscape = (s) => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n// everything has already been escaped, we just have to join\nconst rangesToString = (ranges) => ranges.join('');\n// takes a glob string at a posix brace expression, and returns\n// an equivalent regular expression source, and boolean indicating\n// whether the /u flag needs to be applied, and the number of chars\n// consumed to parse the character class.\n// This also removes out of order ranges, and returns ($.) if the\n// entire class just no good.\nconst parseClass = (glob, position) => {\n    const pos = position;\n    /* c8 ignore start */\n    if (glob.charAt(pos) !== '[') {\n        throw new Error('not in a brace expression');\n    }\n    /* c8 ignore stop */\n    const ranges = [];\n    const negs = [];\n    let i = pos + 1;\n    let sawStart = false;\n    let uflag = false;\n    let escaping = false;\n    let negate = false;\n    let endPos = pos;\n    let rangeStart = '';\n    WHILE: while (i < glob.length) {\n        const c = glob.charAt(i);\n        if ((c === '!' || c === '^') && i === pos + 1) {\n            negate = true;\n            i++;\n            continue;\n        }\n        if (c === ']' && sawStart && !escaping) {\n            endPos = i + 1;\n            break;\n        }\n        sawStart = true;\n        if (c === '\\\\') {\n            if (!escaping) {\n                escaping = true;\n                i++;\n                continue;\n            }\n            // escaped \\ char, fall through and treat like normal char\n        }\n        if (c === '[' && !escaping) {\n            // either a posix class, a collation equivalent, or just a [\n            for (const [cls, [unip, u, neg]] of Object.entries(posixClasses)) {\n                if (glob.startsWith(cls, i)) {\n                    // invalid, [a-[] is fine, but not [a-[:alpha]]\n                    if (rangeStart) {\n                        return ['$.', false, glob.length - pos, true];\n                    }\n                    i += cls.length;\n                    if (neg)\n                        negs.push(unip);\n                    else\n                        ranges.push(unip);\n                    uflag = uflag || u;\n                    continue WHILE;\n                }\n            }\n        }\n        // now it's just a normal character, effectively\n        escaping = false;\n        if (rangeStart) {\n            // throw this range away if it's not valid, but others\n            // can still match.\n            if (c > rangeStart) {\n                ranges.push(braceEscape(rangeStart) + '-' + braceEscape(c));\n            }\n            else if (c === rangeStart) {\n                ranges.push(braceEscape(c));\n            }\n            rangeStart = '';\n            i++;\n            continue;\n        }\n        // now might be the start of a range.\n        // can be either c-d or c-] or c<more...>] or c] at this point\n        if (glob.startsWith('-]', i + 1)) {\n            ranges.push(braceEscape(c + '-'));\n            i += 2;\n            continue;\n        }\n        if (glob.startsWith('-', i + 1)) {\n            rangeStart = c;\n            i += 2;\n            continue;\n        }\n        // not the start of a range, just a single character\n        ranges.push(braceEscape(c));\n        i++;\n    }\n    if (endPos < i) {\n        // didn't see the end of the class, not a valid class,\n        // but might still be valid as a literal match.\n        return ['', false, 0, false];\n    }\n    // if we got no ranges and no negates, then we have a range that\n    // cannot possibly match anything, and that poisons the whole glob\n    if (!ranges.length && !negs.length) {\n        return ['$.', false, glob.length - pos, true];\n    }\n    // if we got one positive range, and it's a single character, then that's\n    // not actually a magic pattern, it's just that one literal character.\n    // we should not treat that as \"magic\", we should just return the literal\n    // character. [_] is a perfectly valid way to escape glob magic chars.\n    if (negs.length === 0 &&\n        ranges.length === 1 &&\n        /^\\\\?.$/.test(ranges[0]) &&\n        !negate) {\n        const r = ranges[0].length === 2 ? ranges[0].slice(-1) : ranges[0];\n        return [regexpEscape(r), false, endPos - pos, false];\n    }\n    const sranges = '[' + (negate ? '^' : '') + rangesToString(ranges) + ']';\n    const snegs = '[' + (negate ? '' : '^') + rangesToString(negs) + ']';\n    const comb = ranges.length && negs.length\n        ? '(' + sranges + '|' + snegs + ')'\n        : ranges.length\n            ? sranges\n            : snegs;\n    return [comb, uflag, endPos - pos, true];\n};\nexports.parseClass = parseClass;\n//# sourceMappingURL=brace-expressions.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeActionRequest = exports.DocumentSymbolRequest = exports.DocumentHighlightRequest = exports.ReferencesRequest = exports.DefinitionRequest = exports.SignatureHelpRequest = exports.SignatureHelpTriggerKind = exports.HoverRequest = exports.CompletionResolveRequest = exports.CompletionRequest = exports.CompletionTriggerKind = exports.PublishDiagnosticsNotification = exports.WatchKind = exports.GlobPattern = exports.RelativePattern = exports.FileChangeType = exports.DidChangeWatchedFilesNotification = exports.WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentNotification = exports.TextDocumentSaveReason = exports.DidSaveTextDocumentNotification = exports.DidCloseTextDocumentNotification = exports.DidChangeTextDocumentNotification = exports.TextDocumentContentChangeEvent = exports.DidOpenTextDocumentNotification = exports.TextDocumentSyncKind = exports.TelemetryEventNotification = exports.LogMessageNotification = exports.ShowMessageRequest = exports.ShowMessageNotification = exports.MessageType = exports.DidChangeConfigurationNotification = exports.ExitNotification = exports.ShutdownRequest = exports.InitializedNotification = exports.InitializeErrorCodes = exports.InitializeRequest = exports.WorkDoneProgressOptions = exports.TextDocumentRegistrationOptions = exports.StaticRegistrationOptions = exports.PositionEncodingKind = exports.RegularExpressionEngineKind = exports.FailureHandlingKind = exports.ResourceOperationKind = exports.UnregistrationRequest = exports.RegistrationRequest = exports.DocumentSelector = exports.NotebookCellTextDocumentFilter = exports.NotebookDocumentFilter = exports.TextDocumentFilter = void 0;\nexports.UniquenessLevel = exports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.WillRenameFilesRequest = exports.DidRenameFilesNotification = exports.WillCreateFilesRequest = exports.DidCreateFilesNotification = exports.FileOperationPatternKind = exports.LinkedEditingRangeRequest = exports.ShowDocumentRequest = exports.SemanticTokensRegistrationType = exports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.TokenFormat = exports.CallHierarchyPrepareRequest = exports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = exports.SelectionRangeRequest = exports.DeclarationRequest = exports.FoldingRangeRefreshRequest = exports.FoldingRangeRequest = exports.ColorPresentationRequest = exports.DocumentColorRequest = exports.ConfigurationRequest = exports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = exports.TypeDefinitionRequest = exports.ImplementationRequest = exports.ApplyWorkspaceEditRequest = exports.ExecuteCommandRequest = exports.PrepareRenameRequest = exports.RenameRequest = exports.PrepareSupportDefaultBehavior = exports.DocumentOnTypeFormattingRequest = exports.DocumentRangesFormattingRequest = exports.DocumentRangeFormattingRequest = exports.DocumentFormattingRequest = exports.DocumentLinkResolveRequest = exports.DocumentLinkRequest = exports.CodeLensRefreshRequest = exports.CodeLensResolveRequest = exports.CodeLensRequest = exports.WorkspaceSymbolResolveRequest = exports.WorkspaceSymbolRequest = exports.CodeActionResolveRequest = void 0;\nexports.TextDocumentContentRefreshRequest = exports.TextDocumentContentRequest = exports.InlineCompletionRequest = exports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = exports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = exports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = exports.InlineValueRefreshRequest = exports.InlineValueRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchySubtypesRequest = exports.TypeHierarchyPrepareRequest = exports.MonikerRequest = exports.MonikerKind = void 0;\nconst messages_1 = require(\"./messages\");\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = __importStar(require(\"./utils/is\"));\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\nObject.defineProperty(exports, \"ImplementationRequest\", { enumerable: true, get: function () { return protocol_implementation_1.ImplementationRequest; } });\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\nObject.defineProperty(exports, \"TypeDefinitionRequest\", { enumerable: true, get: function () { return protocol_typeDefinition_1.TypeDefinitionRequest; } });\nconst protocol_workspaceFolder_1 = require(\"./protocol.workspaceFolder\");\nObject.defineProperty(exports, \"WorkspaceFoldersRequest\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.WorkspaceFoldersRequest; } });\nObject.defineProperty(exports, \"DidChangeWorkspaceFoldersNotification\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.DidChangeWorkspaceFoldersNotification; } });\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\nObject.defineProperty(exports, \"ConfigurationRequest\", { enumerable: true, get: function () { return protocol_configuration_1.ConfigurationRequest; } });\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\nObject.defineProperty(exports, \"DocumentColorRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.DocumentColorRequest; } });\nObject.defineProperty(exports, \"ColorPresentationRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.ColorPresentationRequest; } });\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\nObject.defineProperty(exports, \"FoldingRangeRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRequest; } });\nObject.defineProperty(exports, \"FoldingRangeRefreshRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRefreshRequest; } });\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\nObject.defineProperty(exports, \"DeclarationRequest\", { enumerable: true, get: function () { return protocol_declaration_1.DeclarationRequest; } });\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\nObject.defineProperty(exports, \"SelectionRangeRequest\", { enumerable: true, get: function () { return protocol_selectionRange_1.SelectionRangeRequest; } });\nconst protocol_progress_1 = require(\"./protocol.progress\");\nObject.defineProperty(exports, \"WorkDoneProgress\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgress; } });\nObject.defineProperty(exports, \"WorkDoneProgressCreateRequest\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCreateRequest; } });\nObject.defineProperty(exports, \"WorkDoneProgressCancelNotification\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCancelNotification; } });\nconst protocol_callHierarchy_1 = require(\"./protocol.callHierarchy\");\nObject.defineProperty(exports, \"CallHierarchyIncomingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyIncomingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyOutgoingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyOutgoingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyPrepareRequest; } });\nconst protocol_semanticTokens_1 = require(\"./protocol.semanticTokens\");\nObject.defineProperty(exports, \"TokenFormat\", { enumerable: true, get: function () { return protocol_semanticTokens_1.TokenFormat; } });\nObject.defineProperty(exports, \"SemanticTokensRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRequest; } });\nObject.defineProperty(exports, \"SemanticTokensDeltaRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensDeltaRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRangeRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRangeRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRefreshRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRefreshRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRegistrationType\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRegistrationType; } });\nconst protocol_showDocument_1 = require(\"./protocol.showDocument\");\nObject.defineProperty(exports, \"ShowDocumentRequest\", { enumerable: true, get: function () { return protocol_showDocument_1.ShowDocumentRequest; } });\nconst protocol_linkedEditingRange_1 = require(\"./protocol.linkedEditingRange\");\nObject.defineProperty(exports, \"LinkedEditingRangeRequest\", { enumerable: true, get: function () { return protocol_linkedEditingRange_1.LinkedEditingRangeRequest; } });\nconst protocol_fileOperations_1 = require(\"./protocol.fileOperations\");\nObject.defineProperty(exports, \"FileOperationPatternKind\", { enumerable: true, get: function () { return protocol_fileOperations_1.FileOperationPatternKind; } });\nObject.defineProperty(exports, \"DidCreateFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidCreateFilesNotification; } });\nObject.defineProperty(exports, \"WillCreateFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillCreateFilesRequest; } });\nObject.defineProperty(exports, \"DidRenameFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidRenameFilesNotification; } });\nObject.defineProperty(exports, \"WillRenameFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillRenameFilesRequest; } });\nObject.defineProperty(exports, \"DidDeleteFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidDeleteFilesNotification; } });\nObject.defineProperty(exports, \"WillDeleteFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillDeleteFilesRequest; } });\nconst protocol_moniker_1 = require(\"./protocol.moniker\");\nObject.defineProperty(exports, \"UniquenessLevel\", { enumerable: true, get: function () { return protocol_moniker_1.UniquenessLevel; } });\nObject.defineProperty(exports, \"MonikerKind\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerKind; } });\nObject.defineProperty(exports, \"MonikerRequest\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerRequest; } });\nconst protocol_typeHierarchy_1 = require(\"./protocol.typeHierarchy\");\nObject.defineProperty(exports, \"TypeHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchyPrepareRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySubtypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySubtypesRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySupertypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySupertypesRequest; } });\nconst protocol_inlineValue_1 = require(\"./protocol.inlineValue\");\nObject.defineProperty(exports, \"InlineValueRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRequest; } });\nObject.defineProperty(exports, \"InlineValueRefreshRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRefreshRequest; } });\nconst protocol_inlayHint_1 = require(\"./protocol.inlayHint\");\nObject.defineProperty(exports, \"InlayHintRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRequest; } });\nObject.defineProperty(exports, \"InlayHintResolveRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintResolveRequest; } });\nObject.defineProperty(exports, \"InlayHintRefreshRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRefreshRequest; } });\nconst protocol_diagnostic_1 = require(\"./protocol.diagnostic\");\nObject.defineProperty(exports, \"DiagnosticServerCancellationData\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticServerCancellationData; } });\nObject.defineProperty(exports, \"DocumentDiagnosticReportKind\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticReportKind; } });\nObject.defineProperty(exports, \"DocumentDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticRequest; } });\nObject.defineProperty(exports, \"WorkspaceDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.WorkspaceDiagnosticRequest; } });\nObject.defineProperty(exports, \"DiagnosticRefreshRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticRefreshRequest; } });\nconst protocol_notebook_1 = require(\"./protocol.notebook\");\nObject.defineProperty(exports, \"NotebookCellKind\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellKind; } });\nObject.defineProperty(exports, \"ExecutionSummary\", { enumerable: true, get: function () { return protocol_notebook_1.ExecutionSummary; } });\nObject.defineProperty(exports, \"NotebookCell\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCell; } });\nObject.defineProperty(exports, \"NotebookDocument\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocument; } });\nObject.defineProperty(exports, \"NotebookDocumentSyncRegistrationType\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocumentSyncRegistrationType; } });\nObject.defineProperty(exports, \"DidOpenNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidOpenNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"NotebookCellArrayChange\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellArrayChange; } });\nObject.defineProperty(exports, \"DidChangeNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidChangeNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidSaveNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidSaveNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidCloseNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidCloseNotebookDocumentNotification; } });\nconst protocol_inlineCompletion_1 = require(\"./protocol.inlineCompletion\");\nObject.defineProperty(exports, \"InlineCompletionRequest\", { enumerable: true, get: function () { return protocol_inlineCompletion_1.InlineCompletionRequest; } });\nconst protocol_textDocumentContent_1 = require(\"./protocol.textDocumentContent\");\nObject.defineProperty(exports, \"TextDocumentContentRequest\", { enumerable: true, get: function () { return protocol_textDocumentContent_1.TextDocumentContentRequest; } });\nObject.defineProperty(exports, \"TextDocumentContentRefreshRequest\", { enumerable: true, get: function () { return protocol_textDocumentContent_1.TextDocumentContentRefreshRequest; } });\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * The TextDocumentFilter namespace provides helper functions to work with\n * {@link TextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar TextDocumentFilter;\n(function (TextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate) || (Is.string(candidate.language) || Is.string(candidate.scheme) || GlobPattern.is(candidate.pattern));\n    }\n    TextDocumentFilter.is = is;\n})(TextDocumentFilter || (exports.TextDocumentFilter = TextDocumentFilter = {}));\n/**\n * The NotebookDocumentFilter namespace provides helper functions to work with\n * {@link NotebookDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookDocumentFilter;\n(function (NotebookDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (Is.string(candidate.notebookType) || Is.string(candidate.scheme) || Is.string(candidate.pattern));\n    }\n    NotebookDocumentFilter.is = is;\n})(NotebookDocumentFilter || (exports.NotebookDocumentFilter = NotebookDocumentFilter = {}));\n/**\n * The NotebookCellTextDocumentFilter namespace provides helper functions to work with\n * {@link NotebookCellTextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookCellTextDocumentFilter;\n(function (NotebookCellTextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && (Is.string(candidate.notebook) || NotebookDocumentFilter.is(candidate.notebook))\n            && (candidate.language === undefined || Is.string(candidate.language));\n    }\n    NotebookCellTextDocumentFilter.is = is;\n})(NotebookCellTextDocumentFilter || (exports.NotebookCellTextDocumentFilter = NotebookCellTextDocumentFilter = {}));\n/**\n * The DocumentSelector namespace provides helper functions to work with\n * {@link DocumentSelector}s.\n */\nvar DocumentSelector;\n(function (DocumentSelector) {\n    function is(value) {\n        if (!Array.isArray(value)) {\n            return false;\n        }\n        for (const elem of value) {\n            if (!Is.string(elem) && !TextDocumentFilter.is(elem) && !NotebookCellTextDocumentFilter.is(elem)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    DocumentSelector.is = is;\n})(DocumentSelector || (exports.DocumentSelector = DocumentSelector = {}));\n/**\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\n * handler on the client side.\n */\nvar RegistrationRequest;\n(function (RegistrationRequest) {\n    RegistrationRequest.method = 'client/registerCapability';\n    RegistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    RegistrationRequest.type = new messages_1.ProtocolRequestType(RegistrationRequest.method);\n})(RegistrationRequest || (exports.RegistrationRequest = RegistrationRequest = {}));\n/**\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\n * handler on the client side.\n */\nvar UnregistrationRequest;\n(function (UnregistrationRequest) {\n    UnregistrationRequest.method = 'client/unregisterCapability';\n    UnregistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType(UnregistrationRequest.method);\n})(UnregistrationRequest || (exports.UnregistrationRequest = UnregistrationRequest = {}));\nvar ResourceOperationKind;\n(function (ResourceOperationKind) {\n    /**\n     * Supports creating new files and folders.\n     */\n    ResourceOperationKind.Create = 'create';\n    /**\n     * Supports renaming existing files and folders.\n     */\n    ResourceOperationKind.Rename = 'rename';\n    /**\n     * Supports deleting existing files and folders.\n     */\n    ResourceOperationKind.Delete = 'delete';\n})(ResourceOperationKind || (exports.ResourceOperationKind = ResourceOperationKind = {}));\nvar FailureHandlingKind;\n(function (FailureHandlingKind) {\n    /**\n     * Applying the workspace change is simply aborted if one of the changes provided\n     * fails. All operations executed before the failing operation stay executed.\n     */\n    FailureHandlingKind.Abort = 'abort';\n    /**\n     * All operations are executed transactional. That means they either all\n     * succeed or no changes at all are applied to the workspace.\n     */\n    FailureHandlingKind.Transactional = 'transactional';\n    /**\n     * If the workspace edit contains only textual file changes they are executed transactional.\n     * If resource changes (create, rename or delete file) are part of the change the failure\n     * handling strategy is abort.\n     */\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\n    /**\n     * The client tries to undo the operations already executed. But there is no\n     * guarantee that this is succeeding.\n     */\n    FailureHandlingKind.Undo = 'undo';\n})(FailureHandlingKind || (exports.FailureHandlingKind = FailureHandlingKind = {}));\n/**\n * Regular Expression Engines\n *\n * @since 3.18.0\n * @proposed\n */\nvar RegularExpressionEngineKind;\n(function (RegularExpressionEngineKind) {\n    RegularExpressionEngineKind.ES2020 = 'ES2020';\n})(RegularExpressionEngineKind || (exports.RegularExpressionEngineKind = RegularExpressionEngineKind = {}));\n/**\n * A set of predefined position encoding kinds.\n *\n * @since 3.17.0\n */\nvar PositionEncodingKind;\n(function (PositionEncodingKind) {\n    /**\n     * Character offsets count UTF-8 code units (e.g. bytes).\n     */\n    PositionEncodingKind.UTF8 = 'utf-8';\n    /**\n     * Character offsets count UTF-16 code units.\n     *\n     * This is the default and must always be supported\n     * by servers\n     */\n    PositionEncodingKind.UTF16 = 'utf-16';\n    /**\n     * Character offsets count UTF-32 code units.\n     *\n     * Implementation note: these are the same as Unicode codepoints,\n     * so this `PositionEncodingKind` may also be used for an\n     * encoding-agnostic representation of character offsets.\n     */\n    PositionEncodingKind.UTF32 = 'utf-32';\n})(PositionEncodingKind || (exports.PositionEncodingKind = PositionEncodingKind = {}));\n/**\n * The StaticRegistrationOptions namespace provides helper functions to work with\n * {@link StaticRegistrationOptions} literals.\n */\nvar StaticRegistrationOptions;\n(function (StaticRegistrationOptions) {\n    function hasId(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\n    }\n    StaticRegistrationOptions.hasId = hasId;\n})(StaticRegistrationOptions || (exports.StaticRegistrationOptions = StaticRegistrationOptions = {}));\n/**\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\n * {@link TextDocumentRegistrationOptions} literals.\n */\nvar TextDocumentRegistrationOptions;\n(function (TextDocumentRegistrationOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\n    }\n    TextDocumentRegistrationOptions.is = is;\n})(TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = TextDocumentRegistrationOptions = {}));\n/**\n * The WorkDoneProgressOptions namespace provides helper functions to work with\n * {@link WorkDoneProgressOptions} literals.\n */\nvar WorkDoneProgressOptions;\n(function (WorkDoneProgressOptions) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\n    }\n    WorkDoneProgressOptions.is = is;\n    function hasWorkDoneProgress(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.workDoneProgress);\n    }\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\n})(WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = WorkDoneProgressOptions = {}));\n/**\n * The initialize request is sent from the client to the server.\n * It is sent once as the request after starting up the server.\n * The requests parameter is of type {@link InitializeParams}\n * the response if of type {@link InitializeResult} of a Thenable that\n * resolves to such.\n */\nvar InitializeRequest;\n(function (InitializeRequest) {\n    InitializeRequest.method = 'initialize';\n    InitializeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializeRequest.type = new messages_1.ProtocolRequestType(InitializeRequest.method);\n})(InitializeRequest || (exports.InitializeRequest = InitializeRequest = {}));\n/**\n * Known error codes for an `InitializeErrorCodes`;\n */\nvar InitializeErrorCodes;\n(function (InitializeErrorCodes) {\n    /**\n     * If the protocol version provided by the client can't be handled by the server.\n     *\n     * @deprecated This initialize error got replaced by client capabilities. There is\n     * no version handshake in version 3.0x\n     */\n    InitializeErrorCodes.unknownProtocolVersion = 1;\n})(InitializeErrorCodes || (exports.InitializeErrorCodes = InitializeErrorCodes = {}));\n/**\n * The initialized notification is sent from the client to the\n * server after the client is fully initialized and the server\n * is allowed to send requests from the server to the client.\n */\nvar InitializedNotification;\n(function (InitializedNotification) {\n    InitializedNotification.method = 'initialized';\n    InitializedNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializedNotification.type = new messages_1.ProtocolNotificationType(InitializedNotification.method);\n})(InitializedNotification || (exports.InitializedNotification = InitializedNotification = {}));\n//---- Shutdown Method ----\n/**\n * A shutdown request is sent from the client to the server.\n * It is sent once when the client decides to shutdown the\n * server. The only notification that is sent after a shutdown request\n * is the exit event.\n */\nvar ShutdownRequest;\n(function (ShutdownRequest) {\n    ShutdownRequest.method = 'shutdown';\n    ShutdownRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0(ShutdownRequest.method);\n})(ShutdownRequest || (exports.ShutdownRequest = ShutdownRequest = {}));\n//---- Exit Notification ----\n/**\n * The exit event is sent from the client to the server to\n * ask the server to exit its process.\n */\nvar ExitNotification;\n(function (ExitNotification) {\n    ExitNotification.method = 'exit';\n    ExitNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExitNotification.type = new messages_1.ProtocolNotificationType0(ExitNotification.method);\n})(ExitNotification || (exports.ExitNotification = ExitNotification = {}));\n/**\n * The configuration change notification is sent from the client to the server\n * when the client's configuration has changed. The notification contains\n * the changed configuration as defined by the language client.\n */\nvar DidChangeConfigurationNotification;\n(function (DidChangeConfigurationNotification) {\n    DidChangeConfigurationNotification.method = 'workspace/didChangeConfiguration';\n    DidChangeConfigurationNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType(DidChangeConfigurationNotification.method);\n    DidChangeConfigurationNotification.capabilities = messages_1.CM.create('workspace.didChangeConfiguration', undefined);\n})(DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = DidChangeConfigurationNotification = {}));\n//---- Message show and log notifications ----\n/**\n * The message type\n */\nvar MessageType;\n(function (MessageType) {\n    /**\n     * An error message.\n     */\n    MessageType.Error = 1;\n    /**\n     * A warning message.\n     */\n    MessageType.Warning = 2;\n    /**\n     * An information message.\n     */\n    MessageType.Info = 3;\n    /**\n     * A log message.\n     */\n    MessageType.Log = 4;\n    /**\n     * A debug message.\n     *\n     * @since 3.18.0\n     * @proposed\n     */\n    MessageType.Debug = 5;\n})(MessageType || (exports.MessageType = MessageType = {}));\n/**\n * The show message notification is sent from a server to a client to ask\n * the client to display a particular message in the user interface.\n */\nvar ShowMessageNotification;\n(function (ShowMessageNotification) {\n    ShowMessageNotification.method = 'window/showMessage';\n    ShowMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType(ShowMessageNotification.method);\n    ShowMessageNotification.capabilities = messages_1.CM.create('window.showMessage', undefined);\n})(ShowMessageNotification || (exports.ShowMessageNotification = ShowMessageNotification = {}));\n/**\n * The show message request is sent from the server to the client to show a message\n * and a set of options actions to the user.\n */\nvar ShowMessageRequest;\n(function (ShowMessageRequest) {\n    ShowMessageRequest.method = 'window/showMessageRequest';\n    ShowMessageRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType(ShowMessageRequest.method);\n    ShowMessageRequest.capabilities = messages_1.CM.create('window.showMessage', undefined);\n})(ShowMessageRequest || (exports.ShowMessageRequest = ShowMessageRequest = {}));\n/**\n * The log message notification is sent from the server to the client to ask\n * the client to log a particular message.\n */\nvar LogMessageNotification;\n(function (LogMessageNotification) {\n    LogMessageNotification.method = 'window/logMessage';\n    LogMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType(LogMessageNotification.method);\n})(LogMessageNotification || (exports.LogMessageNotification = LogMessageNotification = {}));\n//---- Telemetry notification\n/**\n * The telemetry event notification is sent from the server to the client to ask\n * the client to log telemetry data.\n */\nvar TelemetryEventNotification;\n(function (TelemetryEventNotification) {\n    TelemetryEventNotification.method = 'telemetry/event';\n    TelemetryEventNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType(TelemetryEventNotification.method);\n})(TelemetryEventNotification || (exports.TelemetryEventNotification = TelemetryEventNotification = {}));\n/**\n * Defines how the host (editor) should sync\n * document changes to the language server.\n */\nvar TextDocumentSyncKind;\n(function (TextDocumentSyncKind) {\n    /**\n     * Documents should not be synced at all.\n     */\n    TextDocumentSyncKind.None = 0;\n    /**\n     * Documents are synced by always sending the full content\n     * of the document.\n     */\n    TextDocumentSyncKind.Full = 1;\n    /**\n     * Documents are synced by sending the full content on open.\n     * After that only incremental updates to the document are\n     * send.\n     */\n    TextDocumentSyncKind.Incremental = 2;\n})(TextDocumentSyncKind || (exports.TextDocumentSyncKind = TextDocumentSyncKind = {}));\n/**\n * The document open notification is sent from the client to the server to signal\n * newly opened text documents. The document's truth is now managed by the client\n * and the server must not try to read the document's truth using the document's\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\n * mean that its content is presented in an editor. An open notification must not\n * be sent more than once without a corresponding close notification send before.\n * This means open and close notification must be balanced and the max open count\n * is one.\n */\nvar DidOpenTextDocumentNotification;\n(function (DidOpenTextDocumentNotification) {\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\n    DidOpenTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\n    DidOpenTextDocumentNotification.capabilities = messages_1.CM.create('textDocument.synchronization', 'textDocumentSync.openClose');\n})(DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = DidOpenTextDocumentNotification = {}));\nvar TextDocumentContentChangeEvent;\n(function (TextDocumentContentChangeEvent) {\n    /**\n     * Checks whether the information describes a delta event.\n     */\n    function isIncremental(event) {\n        const candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    }\n    TextDocumentContentChangeEvent.isIncremental = isIncremental;\n    /**\n     * Checks whether the information describes a full replacement event.\n     */\n    function isFull(event) {\n        const candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    }\n    TextDocumentContentChangeEvent.isFull = isFull;\n})(TextDocumentContentChangeEvent || (exports.TextDocumentContentChangeEvent = TextDocumentContentChangeEvent = {}));\n/**\n * The document change notification is sent from the client to the server to signal\n * changes to a text document.\n */\nvar DidChangeTextDocumentNotification;\n(function (DidChangeTextDocumentNotification) {\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\n    DidChangeTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\n    DidChangeTextDocumentNotification.capabilities = messages_1.CM.create('textDocument.synchronization', 'textDocumentSync');\n})(DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = DidChangeTextDocumentNotification = {}));\n/**\n * The document close notification is sent from the client to the server when\n * the document got closed in the client. The document's truth now exists where\n * the document's uri points to (e.g. if the document's uri is a file uri the\n * truth now exists on disk). As with the open notification the close notification\n * is about managing the document's content. Receiving a close notification\n * doesn't mean that the document was open in an editor before. A close\n * notification requires a previous open notification to be sent.\n */\nvar DidCloseTextDocumentNotification;\n(function (DidCloseTextDocumentNotification) {\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\n    DidCloseTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\n    DidCloseTextDocumentNotification.capabilities = messages_1.CM.create('textDocument.synchronization', 'textDocumentSync.openClose');\n})(DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = DidCloseTextDocumentNotification = {}));\n/**\n * The document save notification is sent from the client to the server when\n * the document got saved in the client.\n */\nvar DidSaveTextDocumentNotification;\n(function (DidSaveTextDocumentNotification) {\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\n    DidSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\n    DidSaveTextDocumentNotification.capabilities = messages_1.CM.create('textDocument.synchronization.didSave', 'textDocumentSync.save');\n})(DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = DidSaveTextDocumentNotification = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nvar TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason || (exports.TextDocumentSaveReason = TextDocumentSaveReason = {}));\n/**\n * A document will save notification is sent from the client to the server before\n * the document is actually saved.\n */\nvar WillSaveTextDocumentNotification;\n(function (WillSaveTextDocumentNotification) {\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\n    WillSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\n    WillSaveTextDocumentNotification.capabilities = messages_1.CM.create('textDocument.synchronization.willSave', 'textDocumentSync.willSave');\n})(WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = WillSaveTextDocumentNotification = {}));\n/**\n * A document will save request is sent from the client to the server before\n * the document is actually saved. The request can return an array of TextEdits\n * which will be applied to the text document before it is saved. Please note that\n * clients might drop results if computing the text edits took too long or if a\n * server constantly fails on this request. This is done to keep the save fast and\n * reliable.\n */\nvar WillSaveTextDocumentWaitUntilRequest;\n(function (WillSaveTextDocumentWaitUntilRequest) {\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\n    WillSaveTextDocumentWaitUntilRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\n    WillSaveTextDocumentWaitUntilRequest.capabilities = messages_1.CM.create('textDocument.synchronization.willSaveWaitUntil', 'textDocumentSync.willSaveWaitUntil');\n})(WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = WillSaveTextDocumentWaitUntilRequest = {}));\n/**\n * The watched files notification is sent from the client to the server when\n * the client detects changes to file watched by the language client.\n */\nvar DidChangeWatchedFilesNotification;\n(function (DidChangeWatchedFilesNotification) {\n    DidChangeWatchedFilesNotification.method = 'workspace/didChangeWatchedFiles';\n    DidChangeWatchedFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType(DidChangeWatchedFilesNotification.method);\n    DidChangeWatchedFilesNotification.capabilities = messages_1.CM.create('workspace.didChangeWatchedFiles', undefined);\n})(DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = DidChangeWatchedFilesNotification = {}));\n/**\n * The file event type\n */\nvar FileChangeType;\n(function (FileChangeType) {\n    /**\n     * The file got created.\n     */\n    FileChangeType.Created = 1;\n    /**\n     * The file got changed.\n     */\n    FileChangeType.Changed = 2;\n    /**\n     * The file got deleted.\n     */\n    FileChangeType.Deleted = 3;\n})(FileChangeType || (exports.FileChangeType = FileChangeType = {}));\nvar RelativePattern;\n(function (RelativePattern) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (vscode_languageserver_types_1.URI.is(candidate.baseUri) || vscode_languageserver_types_1.WorkspaceFolder.is(candidate.baseUri)) && Is.string(candidate.pattern);\n    }\n    RelativePattern.is = is;\n})(RelativePattern || (exports.RelativePattern = RelativePattern = {}));\nvar GlobPattern;\n(function (GlobPattern) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate) || RelativePattern.is(candidate);\n    }\n    GlobPattern.is = is;\n})(GlobPattern || (exports.GlobPattern = GlobPattern = {}));\nvar WatchKind;\n(function (WatchKind) {\n    /**\n     * Interested in create events.\n     */\n    WatchKind.Create = 1;\n    /**\n     * Interested in change events\n     */\n    WatchKind.Change = 2;\n    /**\n     * Interested in delete events\n     */\n    WatchKind.Delete = 4;\n})(WatchKind || (exports.WatchKind = WatchKind = {}));\n/**\n * Diagnostics notification are sent from the server to the client to signal\n * results of validation runs.\n */\nvar PublishDiagnosticsNotification;\n(function (PublishDiagnosticsNotification) {\n    PublishDiagnosticsNotification.method = 'textDocument/publishDiagnostics';\n    PublishDiagnosticsNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType(PublishDiagnosticsNotification.method);\n    PublishDiagnosticsNotification.capabilities = messages_1.CM.create('textDocument.publishDiagnostics', undefined);\n})(PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = PublishDiagnosticsNotification = {}));\n/**\n * How a completion was triggered\n */\nvar CompletionTriggerKind;\n(function (CompletionTriggerKind) {\n    /**\n     * Completion was triggered by typing an identifier (24x7 code\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\n     */\n    CompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered by a trigger character specified by\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\n     */\n    CompletionTriggerKind.TriggerCharacter = 2;\n    /**\n     * Completion was re-triggered as current completion list is incomplete\n     */\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\n})(CompletionTriggerKind || (exports.CompletionTriggerKind = CompletionTriggerKind = {}));\n/**\n * Request to request completion at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response\n * is of type {@link CompletionItem CompletionItem[]} or {@link CompletionList}\n * or a Thenable that resolves to such.\n *\n * The request can delay the computation of the {@link CompletionItem.detail `detail`}\n * and {@link CompletionItem.documentation `documentation`} properties to the `completionItem/resolve`\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\n */\nvar CompletionRequest;\n(function (CompletionRequest) {\n    CompletionRequest.method = 'textDocument/completion';\n    CompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\n    CompletionRequest.capabilities = messages_1.CM.create('textDocument.completion', 'completionProvider');\n})(CompletionRequest || (exports.CompletionRequest = CompletionRequest = {}));\n/**\n * Request to resolve additional information for a given completion item.The request's\n * parameter is of type {@link CompletionItem} the response\n * is of type {@link CompletionItem} or a Thenable that resolves to such.\n */\nvar CompletionResolveRequest;\n(function (CompletionResolveRequest) {\n    CompletionResolveRequest.method = 'completionItem/resolve';\n    CompletionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\n    CompletionResolveRequest.capabilities = messages_1.CM.create('textDocument.completion.completionItem.resolveSupport', 'completionProvider.resolveProvider');\n})(CompletionResolveRequest || (exports.CompletionResolveRequest = CompletionResolveRequest = {}));\n/**\n * Request to request hover information at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response is of\n * type {@link Hover} or a Thenable that resolves to such.\n */\nvar HoverRequest;\n(function (HoverRequest) {\n    HoverRequest.method = 'textDocument/hover';\n    HoverRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\n    HoverRequest.capabilities = messages_1.CM.create('textDocument.hover', 'hoverProvider');\n})(HoverRequest || (exports.HoverRequest = HoverRequest = {}));\n/**\n * How a signature help was triggered.\n *\n * @since 3.15.0\n */\nvar SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    /**\n     * Signature help was invoked manually by the user or by a command.\n     */\n    SignatureHelpTriggerKind.Invoked = 1;\n    /**\n     * Signature help was triggered by a trigger character.\n     */\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\n    /**\n     * Signature help was triggered by the cursor moving or by the document content changing.\n     */\n    SignatureHelpTriggerKind.ContentChange = 3;\n})(SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = SignatureHelpTriggerKind = {}));\nvar SignatureHelpRequest;\n(function (SignatureHelpRequest) {\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\n    SignatureHelpRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\n    SignatureHelpRequest.capabilities = messages_1.CM.create('textDocument.signatureHelp', 'signatureHelpProvider');\n})(SignatureHelpRequest || (exports.SignatureHelpRequest = SignatureHelpRequest = {}));\n/**\n * A request to resolve the definition location of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPosition}\n * the response is of either type {@link Definition} or a typed array of\n * {@link DefinitionLink} or a Thenable that resolves to such.\n */\nvar DefinitionRequest;\n(function (DefinitionRequest) {\n    DefinitionRequest.method = 'textDocument/definition';\n    DefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\n    DefinitionRequest.capabilities = messages_1.CM.create('textDocument.definition', 'definitionProvider');\n})(DefinitionRequest || (exports.DefinitionRequest = DefinitionRequest = {}));\n/**\n * A request to resolve project-wide references for the symbol denoted\n * by the given text document position. The request's parameter is of\n * type {@link ReferenceParams} the response is of type\n * {@link Location Location[]} or a Thenable that resolves to such.\n */\nvar ReferencesRequest;\n(function (ReferencesRequest) {\n    ReferencesRequest.method = 'textDocument/references';\n    ReferencesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\n    ReferencesRequest.capabilities = messages_1.CM.create('textDocument.references', 'referencesProvider');\n})(ReferencesRequest || (exports.ReferencesRequest = ReferencesRequest = {}));\n/**\n * Request to resolve a {@link DocumentHighlight} for a given\n * text document position. The request's parameter is of type {@link TextDocumentPosition}\n * the request response is an array of type {@link DocumentHighlight}\n * or a Thenable that resolves to such.\n */\nvar DocumentHighlightRequest;\n(function (DocumentHighlightRequest) {\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\n    DocumentHighlightRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\n    DocumentHighlightRequest.capabilities = messages_1.CM.create('textDocument.documentHighlight', 'documentHighlightProvider');\n})(DocumentHighlightRequest || (exports.DocumentHighlightRequest = DocumentHighlightRequest = {}));\n/**\n * A request to list all symbols found in a given text document. The request's\n * parameter is of type {@link TextDocumentIdentifier} the\n * response is of type {@link SymbolInformation SymbolInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentSymbolRequest;\n(function (DocumentSymbolRequest) {\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\n    DocumentSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\n    DocumentSymbolRequest.capabilities = messages_1.CM.create('textDocument.documentSymbol', 'documentSymbolProvider');\n})(DocumentSymbolRequest || (exports.DocumentSymbolRequest = DocumentSymbolRequest = {}));\n/**\n * A request to provide commands for the given text document and range.\n */\nvar CodeActionRequest;\n(function (CodeActionRequest) {\n    CodeActionRequest.method = 'textDocument/codeAction';\n    CodeActionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\n    CodeActionRequest.capabilities = messages_1.CM.create('textDocument.codeAction', 'codeActionProvider');\n})(CodeActionRequest || (exports.CodeActionRequest = CodeActionRequest = {}));\n/**\n * Request to resolve additional information for a given code action.The request's\n * parameter is of type {@link CodeAction} the response\n * is of type {@link CodeAction} or a Thenable that resolves to such.\n */\nvar CodeActionResolveRequest;\n(function (CodeActionResolveRequest) {\n    CodeActionResolveRequest.method = 'codeAction/resolve';\n    CodeActionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionResolveRequest.type = new messages_1.ProtocolRequestType(CodeActionResolveRequest.method);\n    CodeActionResolveRequest.capabilities = messages_1.CM.create('textDocument.codeAction.resolveSupport', 'codeActionProvider.resolveProvider');\n})(CodeActionResolveRequest || (exports.CodeActionResolveRequest = CodeActionResolveRequest = {}));\n/**\n * A request to list project-wide symbols matching the query string given\n * by the {@link WorkspaceSymbolParams}. The response is\n * of type {@link SymbolInformation SymbolInformation[]} or a Thenable that\n * resolves to such.\n *\n * @since 3.17.0 - support for WorkspaceSymbol in the returned data. Clients\n *  need to advertise support for WorkspaceSymbols via the client capability\n *  `workspace.symbol.resolveSupport`.\n *\n */\nvar WorkspaceSymbolRequest;\n(function (WorkspaceSymbolRequest) {\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\n    WorkspaceSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\n    WorkspaceSymbolRequest.capabilities = messages_1.CM.create('workspace.symbol', 'workspaceSymbolProvider');\n})(WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = WorkspaceSymbolRequest = {}));\n/**\n * A request to resolve the range inside the workspace\n * symbol's location.\n *\n * @since 3.17.0\n */\nvar WorkspaceSymbolResolveRequest;\n(function (WorkspaceSymbolResolveRequest) {\n    WorkspaceSymbolResolveRequest.method = 'workspaceSymbol/resolve';\n    WorkspaceSymbolResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolResolveRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolResolveRequest.method);\n    WorkspaceSymbolResolveRequest.capabilities = messages_1.CM.create('workspace.symbol.resolveSupport', 'workspaceSymbolProvider.resolveProvider');\n})(WorkspaceSymbolResolveRequest || (exports.WorkspaceSymbolResolveRequest = WorkspaceSymbolResolveRequest = {}));\n/**\n * A request to provide code lens for the given text document.\n */\nvar CodeLensRequest;\n(function (CodeLensRequest) {\n    CodeLensRequest.method = 'textDocument/codeLens';\n    CodeLensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensRequest.type = new messages_1.ProtocolRequestType(CodeLensRequest.method);\n    CodeLensRequest.capabilities = messages_1.CM.create('textDocument.codeLens', 'codeLensProvider');\n})(CodeLensRequest || (exports.CodeLensRequest = CodeLensRequest = {}));\n/**\n * A request to resolve a command for a given code lens.\n */\nvar CodeLensResolveRequest;\n(function (CodeLensResolveRequest) {\n    CodeLensResolveRequest.method = 'codeLens/resolve';\n    CodeLensResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType(CodeLensResolveRequest.method);\n    CodeLensResolveRequest.capabilities = messages_1.CM.create('textDocument.codeLens.resolveSupport', 'codeLensProvider.resolveProvider');\n})(CodeLensResolveRequest || (exports.CodeLensResolveRequest = CodeLensResolveRequest = {}));\n/**\n * A request to refresh all code actions\n *\n * @since 3.16.0\n */\nvar CodeLensRefreshRequest;\n(function (CodeLensRefreshRequest) {\n    CodeLensRefreshRequest.method = `workspace/codeLens/refresh`;\n    CodeLensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    CodeLensRefreshRequest.type = new messages_1.ProtocolRequestType0(CodeLensRefreshRequest.method);\n    CodeLensRefreshRequest.capabilities = messages_1.CM.create('workspace.codeLens', undefined);\n})(CodeLensRefreshRequest || (exports.CodeLensRefreshRequest = CodeLensRefreshRequest = {}));\n/**\n * A request to provide document links\n */\nvar DocumentLinkRequest;\n(function (DocumentLinkRequest) {\n    DocumentLinkRequest.method = 'textDocument/documentLink';\n    DocumentLinkRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\n    DocumentLinkRequest.capabilities = messages_1.CM.create('textDocument.documentLink', 'documentLinkProvider');\n})(DocumentLinkRequest || (exports.DocumentLinkRequest = DocumentLinkRequest = {}));\n/**\n * Request to resolve additional information for a given document link. The request's\n * parameter is of type {@link DocumentLink} the response\n * is of type {@link DocumentLink} or a Thenable that resolves to such.\n */\nvar DocumentLinkResolveRequest;\n(function (DocumentLinkResolveRequest) {\n    DocumentLinkResolveRequest.method = 'documentLink/resolve';\n    DocumentLinkResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType(DocumentLinkResolveRequest.method);\n    DocumentLinkResolveRequest.capabilities = messages_1.CM.create('textDocument.documentLink', 'documentLinkProvider.resolveProvider');\n})(DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = DocumentLinkResolveRequest = {}));\n/**\n * A request to format a whole document.\n */\nvar DocumentFormattingRequest;\n(function (DocumentFormattingRequest) {\n    DocumentFormattingRequest.method = 'textDocument/formatting';\n    DocumentFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\n    DocumentFormattingRequest.capabilities = messages_1.CM.create('textDocument.formatting', 'documentFormattingProvider');\n})(DocumentFormattingRequest || (exports.DocumentFormattingRequest = DocumentFormattingRequest = {}));\n/**\n * A request to format a range in a document.\n */\nvar DocumentRangeFormattingRequest;\n(function (DocumentRangeFormattingRequest) {\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\n    DocumentRangeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\n    DocumentRangeFormattingRequest.capabilities = messages_1.CM.create('textDocument.rangeFormatting', 'documentRangeFormattingProvider');\n})(DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = DocumentRangeFormattingRequest = {}));\n/**\n * A request to format ranges in a document.\n *\n * @since 3.18.0\n * @proposed\n */\nvar DocumentRangesFormattingRequest;\n(function (DocumentRangesFormattingRequest) {\n    DocumentRangesFormattingRequest.method = 'textDocument/rangesFormatting';\n    DocumentRangesFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangesFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangesFormattingRequest.method);\n    DocumentRangesFormattingRequest.capabilities = messages_1.CM.create('textDocument.rangeFormatting.rangesSupport', 'documentRangeFormattingProvider.rangesSupport');\n})(DocumentRangesFormattingRequest || (exports.DocumentRangesFormattingRequest = DocumentRangesFormattingRequest = {}));\n/**\n * A request to format a document on type.\n */\nvar DocumentOnTypeFormattingRequest;\n(function (DocumentOnTypeFormattingRequest) {\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\n    DocumentOnTypeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\n    DocumentOnTypeFormattingRequest.capabilities = messages_1.CM.create('textDocument.onTypeFormatting', 'documentOnTypeFormattingProvider');\n})(DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = DocumentOnTypeFormattingRequest = {}));\n//---- Rename ----------------------------------------------\nvar PrepareSupportDefaultBehavior;\n(function (PrepareSupportDefaultBehavior) {\n    /**\n     * The client's default behavior is to select the identifier\n     * according the to language's syntax rule.\n     */\n    PrepareSupportDefaultBehavior.Identifier = 1;\n})(PrepareSupportDefaultBehavior || (exports.PrepareSupportDefaultBehavior = PrepareSupportDefaultBehavior = {}));\n/**\n * A request to rename a symbol.\n */\nvar RenameRequest;\n(function (RenameRequest) {\n    RenameRequest.method = 'textDocument/rename';\n    RenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\n    RenameRequest.capabilities = messages_1.CM.create('textDocument.rename', 'renameProvider');\n})(RenameRequest || (exports.RenameRequest = RenameRequest = {}));\n/**\n * A request to test and perform the setup necessary for a rename.\n *\n * @since 3.16 - support for default behavior\n */\nvar PrepareRenameRequest;\n(function (PrepareRenameRequest) {\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\n    PrepareRenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\n    PrepareRenameRequest.capabilities = messages_1.CM.create('textDocument.rename.prepareSupport', 'renameProvider.prepareProvider');\n})(PrepareRenameRequest || (exports.PrepareRenameRequest = PrepareRenameRequest = {}));\n/**\n * A request send from the client to the server to execute a command. The request might return\n * a workspace edit which the client will apply to the workspace.\n */\nvar ExecuteCommandRequest;\n(function (ExecuteCommandRequest) {\n    ExecuteCommandRequest.method = 'workspace/executeCommand';\n    ExecuteCommandRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType(ExecuteCommandRequest.method);\n    ExecuteCommandRequest.capabilities = messages_1.CM.create('workspace.executeCommand', 'executeCommandProvider');\n})(ExecuteCommandRequest || (exports.ExecuteCommandRequest = ExecuteCommandRequest = {}));\n/**\n * A request sent from the server to the client to modified certain resources.\n */\nvar ApplyWorkspaceEditRequest;\n(function (ApplyWorkspaceEditRequest) {\n    ApplyWorkspaceEditRequest.method = 'workspace/applyEdit';\n    ApplyWorkspaceEditRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\n    ApplyWorkspaceEditRequest.capabilities = messages_1.CM.create('workspace.applyEdit', undefined);\n})(ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = ApplyWorkspaceEditRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticFeature = exports.DiagnosticPullMode = exports.vsdiag = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst uuid_1 = require(\"./utils/uuid\");\nconst globPattern_1 = require(\"./utils/globPattern\");\nconst features_1 = require(\"./features\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar vsdiag;\n(function (vsdiag) {\n    let DocumentDiagnosticReportKind;\n    (function (DocumentDiagnosticReportKind) {\n        DocumentDiagnosticReportKind[\"full\"] = \"full\";\n        DocumentDiagnosticReportKind[\"unChanged\"] = \"unChanged\";\n    })(DocumentDiagnosticReportKind = vsdiag.DocumentDiagnosticReportKind || (vsdiag.DocumentDiagnosticReportKind = {}));\n})(vsdiag || (exports.vsdiag = vsdiag = {}));\nvar DiagnosticPullMode;\n(function (DiagnosticPullMode) {\n    DiagnosticPullMode[\"onType\"] = \"onType\";\n    DiagnosticPullMode[\"onSave\"] = \"onSave\";\n    DiagnosticPullMode[\"onFocus\"] = \"onFocus\";\n})(DiagnosticPullMode || (exports.DiagnosticPullMode = DiagnosticPullMode = {}));\nvar RequestStateKind;\n(function (RequestStateKind) {\n    RequestStateKind[\"active\"] = \"open\";\n    RequestStateKind[\"reschedule\"] = \"reschedule\";\n    RequestStateKind[\"outDated\"] = \"drop\";\n})(RequestStateKind || (RequestStateKind = {}));\nvar PullState;\n(function (PullState) {\n    PullState[PullState[\"document\"] = 1] = \"document\";\n    PullState[PullState[\"workspace\"] = 2] = \"workspace\";\n})(PullState || (PullState = {}));\nvar DocumentOrUri;\n(function (DocumentOrUri) {\n    function asKey(document) {\n        return document instanceof vscode_1.Uri ? document.toString() : document.uri.toString();\n    }\n    DocumentOrUri.asKey = asKey;\n})(DocumentOrUri || (DocumentOrUri = {}));\nclass DocumentPullStateTracker {\n    documentPullStates;\n    workspacePullStates;\n    constructor() {\n        this.documentPullStates = new Map();\n        this.workspacePullStates = new Map();\n    }\n    track(kind, document, arg1) {\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        const [key, uri, version] = document instanceof vscode_1.Uri\n            ? [document.toString(), document, arg1]\n            : [document.uri.toString(), document.uri, document.version];\n        let state = states.get(key);\n        if (state === undefined) {\n            state = { document: uri, pulledVersion: version, resultId: undefined };\n            states.set(key, state);\n        }\n        return state;\n    }\n    update(kind, document, arg1, arg2) {\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        const [key, uri, version, resultId] = document instanceof vscode_1.Uri\n            ? [document.toString(), document, arg1, arg2]\n            : [document.uri.toString(), document.uri, document.version, arg1];\n        let state = states.get(key);\n        if (state === undefined) {\n            state = { document: uri, pulledVersion: version, resultId };\n            states.set(key, state);\n        }\n        else {\n            state.pulledVersion = version;\n            state.resultId = resultId;\n        }\n    }\n    unTrack(kind, document) {\n        const key = DocumentOrUri.asKey(document);\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        states.delete(key);\n    }\n    tracks(kind, document) {\n        const key = DocumentOrUri.asKey(document);\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        return states.has(key);\n    }\n    getResultId(kind, document) {\n        const key = DocumentOrUri.asKey(document);\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        return states.get(key)?.resultId;\n    }\n    getAllResultIds() {\n        const result = [];\n        for (let [uri, value] of this.workspacePullStates) {\n            if (this.documentPullStates.has(uri)) {\n                value = this.documentPullStates.get(uri);\n            }\n            if (value.resultId !== undefined) {\n                result.push({ uri, value: value.resultId });\n            }\n        }\n        return result;\n    }\n}\nclass DiagnosticRequestor {\n    isDisposed;\n    client;\n    tabs;\n    options;\n    onDidChangeDiagnosticsEmitter;\n    provider;\n    diagnostics;\n    openRequests;\n    documentStates;\n    workspaceErrorCounter;\n    workspaceCancellation;\n    workspaceTimeout;\n    constructor(client, tabs, options) {\n        this.client = client;\n        this.tabs = tabs;\n        this.options = options;\n        this.isDisposed = false;\n        this.onDidChangeDiagnosticsEmitter = new vscode_1.EventEmitter();\n        this.provider = this.createProvider();\n        this.diagnostics = vscode_1.languages.createDiagnosticCollection(options.identifier);\n        this.openRequests = new Map();\n        this.documentStates = new DocumentPullStateTracker();\n        this.workspaceErrorCounter = 0;\n    }\n    knows(kind, document) {\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        return this.documentStates.tracks(kind, document) || this.openRequests.has(uri.toString());\n    }\n    forget(kind, document) {\n        this.documentStates.unTrack(kind, document);\n    }\n    pull(document, cb) {\n        if (this.isDisposed) {\n            return;\n        }\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        this.pullAsync(document).then(() => {\n            if (cb) {\n                cb();\n            }\n        }, (error) => {\n            this.client.error(`Document pull failed for text document ${uri.toString()}`, error, false);\n        });\n    }\n    async pullAsync(document, version) {\n        if (this.isDisposed) {\n            return;\n        }\n        const isUri = document instanceof vscode_1.Uri;\n        const uri = isUri ? document : document.uri;\n        const key = uri.toString();\n        version = isUri ? version : document.version;\n        const currentRequestState = this.openRequests.get(key);\n        const documentState = isUri\n            ? this.documentStates.track(PullState.document, document, version)\n            : this.documentStates.track(PullState.document, document);\n        if (currentRequestState === undefined) {\n            const tokenSource = new vscode_1.CancellationTokenSource();\n            this.openRequests.set(key, { state: RequestStateKind.active, document: document, version: version, tokenSource });\n            let report;\n            let afterState;\n            try {\n                report = await this.provider.provideDiagnostics(document, documentState.resultId, tokenSource.token) ?? { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] };\n            }\n            catch (error) {\n                if (error instanceof features_1.LSPCancellationError && vscode_languageserver_protocol_1.DiagnosticServerCancellationData.is(error.data) && error.data.retriggerRequest === false) {\n                    afterState = { state: RequestStateKind.outDated, document };\n                }\n                if (afterState === undefined && error instanceof vscode_1.CancellationError) {\n                    afterState = { state: RequestStateKind.reschedule, document };\n                }\n                else {\n                    throw error;\n                }\n            }\n            afterState = afterState ?? this.openRequests.get(key);\n            if (afterState === undefined) {\n                // This shouldn't happen. Log it\n                this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${key}`);\n                this.diagnostics.delete(uri);\n                return;\n            }\n            this.openRequests.delete(key);\n            if (!this.tabs.isVisible(document)) {\n                this.documentStates.unTrack(PullState.document, document);\n                return;\n            }\n            if (afterState.state === RequestStateKind.outDated) {\n                return;\n            }\n            // report is only undefined if the request has thrown.\n            if (report !== undefined) {\n                if (report.kind === vsdiag.DocumentDiagnosticReportKind.full) {\n                    this.diagnostics.set(uri, report.items);\n                }\n                documentState.pulledVersion = version;\n                documentState.resultId = report.resultId;\n            }\n            if (afterState.state === RequestStateKind.reschedule) {\n                this.pull(document);\n            }\n        }\n        else {\n            if (currentRequestState.state === RequestStateKind.active) {\n                // Cancel the current request and reschedule a new one when the old one returned.\n                currentRequestState.tokenSource.cancel();\n                this.openRequests.set(key, { state: RequestStateKind.reschedule, document: currentRequestState.document });\n            }\n            else if (currentRequestState.state === RequestStateKind.outDated) {\n                this.openRequests.set(key, { state: RequestStateKind.reschedule, document: currentRequestState.document });\n            }\n        }\n    }\n    forgetDocument(document) {\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        const key = uri.toString();\n        const request = this.openRequests.get(key);\n        if (this.options.workspaceDiagnostics) {\n            // If we run workspace diagnostic pull a last time for the diagnostics\n            // and the rely on getting them from the workspace result.\n            if (request !== undefined) {\n                this.openRequests.set(key, { state: RequestStateKind.reschedule, document: document });\n            }\n            else {\n                this.pull(document, () => {\n                    this.forget(PullState.document, document);\n                });\n            }\n        }\n        else {\n            // We have normal pull or inter file dependencies. In this case we\n            // clear the diagnostics (to have the same start as after startup).\n            // We also cancel outstanding requests.\n            if (request !== undefined) {\n                if (request.state === RequestStateKind.active) {\n                    request.tokenSource.cancel();\n                }\n                this.openRequests.set(key, { state: RequestStateKind.outDated, document: document });\n            }\n            this.diagnostics.delete(uri);\n            this.forget(PullState.document, document);\n        }\n    }\n    pullWorkspace() {\n        if (this.isDisposed) {\n            return;\n        }\n        this.pullWorkspaceAsync().then(() => {\n            this.workspaceTimeout = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n                this.pullWorkspace();\n            }, 2000);\n        }, (error) => {\n            if (!(error instanceof features_1.LSPCancellationError) && !vscode_languageserver_protocol_1.DiagnosticServerCancellationData.is(error.data)) {\n                this.client.error(`Workspace diagnostic pull failed.`, error, false);\n                this.workspaceErrorCounter++;\n            }\n            if (this.workspaceErrorCounter <= 5) {\n                this.workspaceTimeout = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n                    this.pullWorkspace();\n                }, 2000);\n            }\n        });\n    }\n    async pullWorkspaceAsync() {\n        if (!this.provider.provideWorkspaceDiagnostics || this.isDisposed) {\n            return;\n        }\n        if (this.workspaceCancellation !== undefined) {\n            this.workspaceCancellation.cancel();\n            this.workspaceCancellation = undefined;\n        }\n        this.workspaceCancellation = new vscode_1.CancellationTokenSource();\n        const previousResultIds = this.documentStates.getAllResultIds().map((item) => {\n            return {\n                uri: this.client.protocol2CodeConverter.asUri(item.uri),\n                value: item.value\n            };\n        });\n        await this.provider.provideWorkspaceDiagnostics(previousResultIds, this.workspaceCancellation.token, (chunk) => {\n            if (!chunk || this.isDisposed) {\n                return;\n            }\n            for (const item of chunk.items) {\n                if (item.kind === vsdiag.DocumentDiagnosticReportKind.full) {\n                    // Favour document pull result over workspace results. So skip if it is tracked\n                    // as a document result.\n                    if (!this.documentStates.tracks(PullState.document, item.uri)) {\n                        this.diagnostics.set(item.uri, item.items);\n                    }\n                }\n                this.documentStates.update(PullState.workspace, item.uri, item.version ?? undefined, item.resultId);\n            }\n        });\n    }\n    createProvider() {\n        const result = {\n            onDidChangeDiagnostics: this.onDidChangeDiagnosticsEmitter.event,\n            provideDiagnostics: (document, previousResultId, token) => {\n                const provideDiagnostics = (document, previousResultId, token) => {\n                    const params = {\n                        identifier: this.options.identifier,\n                        textDocument: { uri: this.client.code2ProtocolConverter.asUri(document instanceof vscode_1.Uri ? document : document.uri) },\n                        previousResultId: previousResultId\n                    };\n                    if (this.isDisposed === true || !this.client.isRunning()) {\n                        return { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] };\n                    }\n                    return this.client.sendRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, params, token).then(async (result) => {\n                        if (result === undefined || result === null || this.isDisposed || token.isCancellationRequested) {\n                            return { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] };\n                        }\n                        if (result.kind === vscode_languageserver_protocol_1.DocumentDiagnosticReportKind.Full) {\n                            return { kind: vsdiag.DocumentDiagnosticReportKind.full, resultId: result.resultId, items: await this.client.protocol2CodeConverter.asDiagnostics(result.items, token) };\n                        }\n                        else {\n                            return { kind: vsdiag.DocumentDiagnosticReportKind.unChanged, resultId: result.resultId };\n                        }\n                    }, (error) => {\n                        return this.client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, token, error, { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] }, true, true);\n                    });\n                };\n                const middleware = this.client.middleware;\n                return middleware.provideDiagnostics\n                    ? middleware.provideDiagnostics(document, previousResultId, token, provideDiagnostics)\n                    : provideDiagnostics(document, previousResultId, token);\n            }\n        };\n        if (this.options.workspaceDiagnostics) {\n            result.provideWorkspaceDiagnostics = (resultIds, token, resultReporter) => {\n                const convertReport = async (report) => {\n                    if (report.kind === vscode_languageserver_protocol_1.DocumentDiagnosticReportKind.Full) {\n                        return {\n                            kind: vsdiag.DocumentDiagnosticReportKind.full,\n                            uri: this.client.protocol2CodeConverter.asUri(report.uri),\n                            resultId: report.resultId,\n                            version: report.version,\n                            items: await this.client.protocol2CodeConverter.asDiagnostics(report.items, token)\n                        };\n                    }\n                    else {\n                        return {\n                            kind: vsdiag.DocumentDiagnosticReportKind.unChanged,\n                            uri: this.client.protocol2CodeConverter.asUri(report.uri),\n                            resultId: report.resultId,\n                            version: report.version\n                        };\n                    }\n                };\n                const convertPreviousResultIds = (resultIds) => {\n                    const converted = [];\n                    for (const item of resultIds) {\n                        converted.push({ uri: this.client.code2ProtocolConverter.asUri(item.uri), value: item.value });\n                    }\n                    return converted;\n                };\n                const provideDiagnostics = (resultIds, token, resultReporter) => {\n                    const partialResultToken = (0, uuid_1.generateUuid)();\n                    const disposable = this.client.onProgress(vscode_languageserver_protocol_1.WorkspaceDiagnosticRequest.partialResult, partialResultToken, async (partialResult) => {\n                        if (partialResult === undefined || partialResult === null) {\n                            resultReporter(null);\n                            return;\n                        }\n                        const converted = {\n                            items: []\n                        };\n                        for (const item of partialResult.items) {\n                            try {\n                                converted.items.push(await convertReport(item));\n                            }\n                            catch (error) {\n                                this.client.error(`Converting workspace diagnostics failed.`, error);\n                            }\n                        }\n                        resultReporter(converted);\n                    });\n                    const params = {\n                        identifier: this.options.identifier,\n                        previousResultIds: convertPreviousResultIds(resultIds),\n                        partialResultToken: partialResultToken\n                    };\n                    if (this.isDisposed === true || !this.client.isRunning()) {\n                        return { items: [] };\n                    }\n                    return this.client.sendRequest(vscode_languageserver_protocol_1.WorkspaceDiagnosticRequest.type, params, token).then(async (result) => {\n                        if (token.isCancellationRequested) {\n                            return { items: [] };\n                        }\n                        const converted = {\n                            items: []\n                        };\n                        for (const item of result.items) {\n                            converted.items.push(await convertReport(item));\n                        }\n                        disposable.dispose();\n                        resultReporter(converted);\n                        return { items: [] };\n                    }, (error) => {\n                        disposable.dispose();\n                        return this.client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, token, error, { items: [] });\n                    });\n                };\n                const middleware = this.client.middleware;\n                return middleware.provideWorkspaceDiagnostics\n                    ? middleware.provideWorkspaceDiagnostics(resultIds, token, resultReporter, provideDiagnostics)\n                    : provideDiagnostics(resultIds, token, resultReporter);\n            };\n        }\n        return result;\n    }\n    dispose() {\n        this.isDisposed = true;\n        // Cancel and clear workspace pull if present.\n        this.workspaceCancellation?.cancel();\n        this.workspaceTimeout?.dispose();\n        // Cancel all request and mark open requests as outdated.\n        for (const [key, request] of this.openRequests) {\n            if (request.state === RequestStateKind.active) {\n                request.tokenSource.cancel();\n            }\n            this.openRequests.set(key, { state: RequestStateKind.outDated, document: request.document });\n        }\n        // cleanup old diagnostics\n        this.diagnostics.dispose();\n    }\n}\nclass BackgroundScheduler {\n    client;\n    diagnosticRequestor;\n    lastDocumentToPull;\n    documents;\n    timeoutHandle;\n    // The problem is that there could be outstanding diagnostic requests\n    // when we shutdown which when we receive the result will trigger a\n    // reschedule. So we remember if the background scheduler got disposed\n    // and ignore those re-schedules\n    isDisposed;\n    constructor(client, diagnosticRequestor) {\n        this.client = client;\n        this.diagnosticRequestor = diagnosticRequestor;\n        this.documents = new vscode_languageserver_protocol_1.LinkedMap();\n        this.isDisposed = false;\n    }\n    add(document) {\n        if (this.isDisposed === true) {\n            return;\n        }\n        const key = DocumentOrUri.asKey(document);\n        if (this.documents.has(key)) {\n            return;\n        }\n        this.documents.set(key, document, vscode_languageserver_protocol_1.Touch.Last);\n        // Make sure we run up to that document. We could\n        // consider inserting it after the current last\n        // document for performance reasons but it might not catch\n        // all interfile dependencies.\n        this.lastDocumentToPull = document;\n    }\n    remove(document) {\n        const key = DocumentOrUri.asKey(document);\n        this.documents.delete(key);\n        // No more documents. Stop background activity.\n        if (this.documents.size === 0) {\n            this.stop();\n            return;\n        }\n        else if (key === this.lastDocumentToPullKey()) {\n            // The remove document was the one we would run up to. So\n            // take the one before it.\n            const before = this.documents.before(key);\n            if (before === undefined) {\n                this.stop();\n            }\n            else {\n                this.lastDocumentToPull = before;\n            }\n        }\n    }\n    trigger() {\n        this.lastDocumentToPull = this.documents.last;\n        this.runLoop();\n    }\n    runLoop() {\n        if (this.isDisposed === true) {\n            return;\n        }\n        // We have an empty background list. Make sure we stop\n        // background activity.\n        if (this.documents.size === 0) {\n            this.stop();\n            return;\n        }\n        // We have no last document anymore so stop the loop\n        if (this.lastDocumentToPull === undefined) {\n            return;\n        }\n        // We have a timeout in the loop. So we should not schedule\n        // another run.\n        if (this.timeoutHandle !== undefined) {\n            return;\n        }\n        this.timeoutHandle = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n            const document = this.documents.first;\n            if (document === undefined) {\n                return;\n            }\n            const key = DocumentOrUri.asKey(document);\n            this.diagnosticRequestor.pullAsync(document).catch((error) => {\n                this.client.error(`Document pull failed for text document ${key}`, error, false);\n            }).finally(() => {\n                this.timeoutHandle = undefined;\n                this.documents.set(key, document, vscode_languageserver_protocol_1.Touch.Last);\n                if (key !== this.lastDocumentToPullKey()) {\n                    this.runLoop();\n                }\n            });\n        }, 500);\n    }\n    dispose() {\n        this.isDisposed = true;\n        this.stop();\n        this.documents.clear();\n        this.lastDocumentToPull = undefined;\n    }\n    stop() {\n        this.timeoutHandle?.dispose();\n        this.timeoutHandle = undefined;\n        this.lastDocumentToPull = undefined;\n    }\n    lastDocumentToPullKey() {\n        return this.lastDocumentToPull !== undefined ? DocumentOrUri.asKey(this.lastDocumentToPull) : undefined;\n    }\n}\nclass DiagnosticFeatureProviderImpl {\n    disposable;\n    diagnosticRequestor;\n    activeTextDocument;\n    backgroundScheduler;\n    constructor(client, tabs, options) {\n        const diagnosticPullOptions = Object.assign({ onChange: false, onSave: false, onFocus: false }, client.clientOptions.diagnosticPullOptions);\n        const documentSelector = client.protocol2CodeConverter.asDocumentSelector(options.documentSelector);\n        const disposables = [];\n        const matchFilter = (filter, resource) => {\n            // The filter is a language id. We can't determine if it matches\n            // so we return false.\n            if (typeof filter === 'string') {\n                return false;\n            }\n            if (filter.language !== undefined && filter.language !== '*') {\n                return false;\n            }\n            if (filter.scheme !== undefined && filter.scheme !== '*' && filter.scheme !== resource.scheme) {\n                return false;\n            }\n            if (filter.pattern !== undefined && !(0, globPattern_1.matchGlobPattern)(filter.pattern, resource)) {\n                return false;\n            }\n            return true;\n        };\n        const matchResource = (resource) => {\n            const selector = options.documentSelector;\n            if (diagnosticPullOptions.match !== undefined) {\n                return diagnosticPullOptions.match(selector, resource);\n            }\n            for (const filter of selector) {\n                if (!vscode_languageserver_protocol_1.TextDocumentFilter.is(filter)) {\n                    continue;\n                }\n                if (matchFilter(filter, resource)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        const matches = (document) => {\n            return document instanceof vscode_1.Uri\n                ? matchResource(document)\n                : vscode_1.languages.match(documentSelector, document) > 0 && tabs.isVisible(document);\n        };\n        const matchesCell = (cell) => {\n            // Cells match if the language is allowed and if the containing notebook is visible.\n            return vscode_1.languages.match(documentSelector, cell.document) > 0 && tabs.isVisible(cell.notebook.uri);\n        };\n        const isActiveDocument = (document) => {\n            return document instanceof vscode_1.Uri\n                ? this.activeTextDocument?.uri.toString() === document.toString()\n                : this.activeTextDocument === document;\n        };\n        this.diagnosticRequestor = new DiagnosticRequestor(client, tabs, options);\n        this.backgroundScheduler = new BackgroundScheduler(client, this.diagnosticRequestor);\n        const addToBackgroundIfNeeded = (document) => {\n            if (!matches(document) || !options.interFileDependencies || isActiveDocument(document) || diagnosticPullOptions.onChange === false) {\n                return;\n            }\n            this.backgroundScheduler.add(document);\n        };\n        const considerDocument = (textDocument, mode) => {\n            return (diagnosticPullOptions.filter === undefined || !diagnosticPullOptions.filter(textDocument, mode)) && this.diagnosticRequestor.knows(PullState.document, textDocument);\n        };\n        this.activeTextDocument = vscode_1.window.activeTextEditor?.document;\n        disposables.push(vscode_1.window.onDidChangeActiveTextEditor((editor) => {\n            const oldActive = this.activeTextDocument;\n            this.activeTextDocument = editor?.document;\n            if (oldActive !== undefined) {\n                addToBackgroundIfNeeded(oldActive);\n            }\n            if (this.activeTextDocument !== undefined) {\n                this.backgroundScheduler.remove(this.activeTextDocument);\n                if (diagnosticPullOptions.onFocus === true && matches(this.activeTextDocument) && considerDocument(this.activeTextDocument, DiagnosticPullMode.onFocus)) {\n                    this.diagnosticRequestor.pull(this.activeTextDocument);\n                }\n            }\n        }));\n        // For pull model diagnostics we pull for documents visible in the UI.\n        // From an eventing point of view we still rely on open document events\n        // and filter the documents that are not visible in the UI instead of\n        // listening to Tab events. Major reason is event timing since we need\n        // to ensure that the pull is send after the document open has reached\n        // the server.\n        // We always pull on open.\n        const openFeature = client.getFeature(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.method);\n        disposables.push(openFeature.onNotificationSent((event) => {\n            const textDocument = event.textDocument;\n            // We already know about this document. This can happen via a tab open.\n            if (this.diagnosticRequestor.knows(PullState.document, textDocument)) {\n                return;\n            }\n            if (matches(textDocument)) {\n                this.diagnosticRequestor.pull(textDocument, () => { addToBackgroundIfNeeded(textDocument); });\n            }\n        }));\n        const notebookFeature = client.getFeature(vscode_languageserver_protocol_1.NotebookDocumentSyncRegistrationType.method);\n        disposables.push(notebookFeature.onOpenNotificationSent((event) => {\n            // Send a pull for all opened cells in the notebook.\n            for (const cell of event.getCells()) {\n                if (matchesCell(cell)) {\n                    this.diagnosticRequestor.pull(cell.document, () => { addToBackgroundIfNeeded(cell.document); });\n                }\n            }\n        }));\n        disposables.push(tabs.onOpen((opened) => {\n            for (const resource of opened) {\n                // We already know about this document. This can happen via a document open.\n                if (this.diagnosticRequestor.knows(PullState.document, resource)) {\n                    continue;\n                }\n                const uriStr = resource.toString();\n                let textDocument;\n                for (const item of vscode_1.workspace.textDocuments) {\n                    if (uriStr === item.uri.toString()) {\n                        textDocument = item;\n                        break;\n                    }\n                }\n                // In VS Code the event timing is as follows:\n                // 1. tab events are fired.\n                // 2. open document events are fired and internal data structures like\n                //    workspace.textDocuments and Window.activeTextEditor are updated.\n                //\n                // This means: for newly created tab/editors we don't find the underlying\n                // document yet. So we do nothing an rely on the underlying open document event\n                // to be fired.\n                if (textDocument !== undefined && matches(textDocument)) {\n                    this.diagnosticRequestor.pull(textDocument, () => { addToBackgroundIfNeeded(textDocument); });\n                }\n            }\n        }));\n        // Pull all diagnostics for documents that are already open\n        const pulledTextDocuments = new Set();\n        for (const textDocument of vscode_1.workspace.textDocuments) {\n            if (matches(textDocument)) {\n                this.diagnosticRequestor.pull(textDocument, () => { addToBackgroundIfNeeded(textDocument); });\n                pulledTextDocuments.add(textDocument.uri.toString());\n            }\n        }\n        // Do the same for already open notebook cells.\n        for (const notebookDocument of vscode_1.workspace.notebookDocuments) {\n            for (const cell of notebookDocument.getCells()) {\n                if (matchesCell(cell)) {\n                    this.diagnosticRequestor.pull(cell.document, () => { addToBackgroundIfNeeded(cell.document); });\n                    pulledTextDocuments.add(cell.document.uri.toString());\n                }\n            }\n        }\n        // Pull all tabs if not already pulled as text document\n        if (diagnosticPullOptions.onTabs === true) {\n            for (const resource of tabs.getTabResources()) {\n                if (!pulledTextDocuments.has(resource.toString()) && matches(resource)) {\n                    this.diagnosticRequestor.pull(resource, () => { addToBackgroundIfNeeded(resource); });\n                }\n            }\n        }\n        // We don't need to pull on tab open since we will receive a document open as well later on\n        // and that event allows us to use a document for a match check which will have a set\n        // language id.\n        if (diagnosticPullOptions.onChange === true) {\n            const changeFeature = client.getFeature(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.method);\n            disposables.push(changeFeature.onNotificationSent(async (event) => {\n                const textDocument = event.textDocument;\n                if (considerDocument(textDocument, DiagnosticPullMode.onType)) {\n                    this.diagnosticRequestor.pull(textDocument, () => { this.backgroundScheduler.trigger(); });\n                }\n            }));\n            disposables.push(notebookFeature.onChangeNotificationSent(async (event) => {\n                // Send a pull for all changed cells in the notebook.\n                const textEvents = event.cells?.textContent || [];\n                const changedCells = textEvents.map((c) => event.notebook.getCells().find(cell => cell.document.uri.toString() === c.document.uri.toString()));\n                for (const cell of changedCells) {\n                    if (cell && matchesCell(cell)) {\n                        this.diagnosticRequestor.pull(cell.document, () => { this.backgroundScheduler.trigger(); });\n                    }\n                }\n                // Clear out any closed cells.\n                const closedCells = event.cells?.structure?.didClose || [];\n                for (const cell of closedCells) {\n                    this.diagnosticRequestor.forgetDocument(cell.document);\n                }\n                // Send a pull for any new opened cells.\n                const openedCells = event.cells?.structure?.didOpen || [];\n                for (const cell of openedCells) {\n                    if (matchesCell(cell)) {\n                        this.diagnosticRequestor.pull(cell.document, () => { this.backgroundScheduler.trigger(); });\n                    }\n                }\n            }));\n        }\n        if (diagnosticPullOptions.onSave === true) {\n            const saveFeature = client.getFeature(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.method);\n            disposables.push(saveFeature.onNotificationSent((event) => {\n                const textDocument = event.textDocument;\n                if (considerDocument(textDocument, DiagnosticPullMode.onSave)) {\n                    this.diagnosticRequestor.pull(event.textDocument);\n                }\n            }));\n            disposables.push(notebookFeature.onSaveNotificationSent((event) => {\n                for (const cell of event.getCells()) {\n                    if (matchesCell(cell)) {\n                        this.diagnosticRequestor.pull(cell.document);\n                    }\n                }\n            }));\n        }\n        // When the document closes clear things up\n        const closeFeature = client.getFeature(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.method);\n        disposables.push(closeFeature.onNotificationSent((event) => {\n            this.cleanUpDocument(event.textDocument);\n        }));\n        disposables.push(notebookFeature.onCloseNotificationSent((event) => {\n            for (const cell of event.getCells()) {\n                this.cleanUpDocument(cell.document);\n            }\n        }));\n        // Same when a tabs closes.\n        tabs.onClose((closed) => {\n            for (const document of closed) {\n                this.cleanUpDocument(document);\n            }\n        });\n        // We received a did change from the server.\n        this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(() => {\n            for (const textDocument of vscode_1.workspace.textDocuments) {\n                if (matches(textDocument)) {\n                    this.diagnosticRequestor.pull(textDocument);\n                }\n            }\n        });\n        // da348dc5-c30a-4515-9d98-31ff3be38d14 is the test UUID to test the middle ware. So don't auto trigger pulls.\n        if (options.workspaceDiagnostics === true && options.identifier !== 'da348dc5-c30a-4515-9d98-31ff3be38d14') {\n            this.diagnosticRequestor.pullWorkspace();\n        }\n        this.disposable = vscode_1.Disposable.from(...disposables, this.backgroundScheduler, this.diagnosticRequestor);\n    }\n    get onDidChangeDiagnosticsEmitter() {\n        return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter;\n    }\n    get diagnostics() {\n        return this.diagnosticRequestor.provider;\n    }\n    forget(document) {\n        this.cleanUpDocument(document);\n    }\n    cleanUpDocument(document) {\n        this.backgroundScheduler.remove(document);\n        if (this.diagnosticRequestor.knows(PullState.document, document)) {\n            this.diagnosticRequestor.forgetDocument(document);\n        }\n    }\n}\nclass DiagnosticFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = ensure(ensure(capabilities, 'textDocument'), 'diagnostic');\n        capability.relatedInformation = true;\n        capability.tagSupport = { valueSet: [vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary, vscode_languageserver_protocol_1.DiagnosticTag.Deprecated] };\n        capability.codeDescriptionSupport = true;\n        capability.dataSupport = true;\n        capability.dynamicRegistration = true;\n        // We first need to decide how a UI will look with related documents.\n        // An easy implementation would be to only show related diagnostics for\n        // the active editor.\n        capability.relatedDocumentSupport = false;\n        ensure(ensure(capabilities, 'workspace'), 'diagnostics').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.DiagnosticRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeDiagnosticsEmitter.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.diagnosticProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    clear() {\n        super.clear();\n    }\n    refresh() {\n        for (const provider of this.getAllProviders()) {\n            provider.onDidChangeDiagnosticsEmitter.fire();\n        }\n    }\n    registerLanguageProvider(options) {\n        const provider = new DiagnosticFeatureProviderImpl(this._client, this._client.tabsModel, options);\n        return [provider.disposable, provider];\n    }\n}\nexports.DiagnosticFeature = DiagnosticFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass SelectionRangeFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SelectionRangeRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'selectionRange');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.selectionRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideSelectionRanges: (document, positions, token) => {\n                const client = this._client;\n                const provideSelectionRanges = async (document, positions, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        positions: client.code2ProtocolConverter.asPositionsSync(positions, token)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, requestParams, token).then((ranges) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asSelectionRanges(ranges, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideSelectionRanges\n                    ? middleware.provideSelectionRanges(document, positions, token, provideSelectionRanges)\n                    : provideSelectionRanges(document, positions, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.SelectionRangeFeature = SelectionRangeFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CM = exports.ProtocolNotificationType = exports.ProtocolNotificationType0 = exports.ProtocolRequestType = exports.ProtocolRequestType0 = exports.RegistrationType = exports.MessageDirection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nvar MessageDirection;\n(function (MessageDirection) {\n    MessageDirection[\"clientToServer\"] = \"clientToServer\";\n    MessageDirection[\"serverToClient\"] = \"serverToClient\";\n    MessageDirection[\"both\"] = \"both\";\n})(MessageDirection || (exports.MessageDirection = MessageDirection = {}));\nclass RegistrationType {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    ____;\n    method;\n    constructor(method) {\n        this.method = method;\n    }\n}\nexports.RegistrationType = RegistrationType;\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\n    /**\n     * Clients must not use these properties. They are here to ensure correct typing.\n     * in TypeScript\n     */\n    __;\n    ___;\n    ____;\n    _pr;\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType0 = ProtocolRequestType0;\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    __;\n    ___;\n    ____;\n    _pr;\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolRequestType = ProtocolRequestType;\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    ___;\n    ____;\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    ___;\n    ____;\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolNotificationType = ProtocolNotificationType;\nvar CM;\n(function (CM) {\n    function create(client, server) {\n        return { client, server };\n    }\n    CM.create = create;\n})(CM || (exports.CM = CM = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = __importStar(require(\"vscode\"));\nclass ProtocolDocumentLink extends code.DocumentLink {\n    data;\n    constructor(range, target) {\n        super(range, target);\n    }\n}\nexports.default = ProtocolDocumentLink;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide selection ranges in a document. The request's\n * parameter is of type {@link SelectionRangeParams}, the\n * response is of type {@link SelectionRange SelectionRange[]} or a Thenable\n * that resolves to such.\n */\nvar SelectionRangeRequest;\n(function (SelectionRangeRequest) {\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\n    SelectionRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\n    SelectionRangeRequest.capabilities = messages_1.CM.create('textDocument.selectionRange', 'selectionRangeProvider');\n})(SelectionRangeRequest || (exports.SelectionRangeRequest = SelectionRangeRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorProviderFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass ColorProviderFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'colorProvider').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.colorProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideColorPresentations: (color, context, token) => {\n                const client = this._client;\n                const provideColorPresentations = (color, context, token) => {\n                    const requestParams = {\n                        color,\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\n                        range: client.code2ProtocolConverter.asRange(context.range)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return this._client.protocol2CodeConverter.asColorPresentations(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideColorPresentations\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\n                    : provideColorPresentations(color, context, token);\n            },\n            provideDocumentColors: (document, token) => {\n                const client = this._client;\n                const provideDocumentColors = (document, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return this._client.protocol2CodeConverter.asColorInformations(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentColors\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\n                    : provideDocumentColors(document, token);\n            }\n        };\n        return [vscode_1.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.ColorProviderFeature = ColorProviderFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" preserve=\"true\"/>\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConnectionOptions = exports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy = exports.ConnectionStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.TraceValue = exports.Trace = exports.NullLogger = exports.ProgressType = exports.ProgressToken = void 0;\nexports.createMessageConnection = createMessageConnection;\nconst ral_1 = __importDefault(require(\"./ral\"));\nconst Is = __importStar(require(\"./is\"));\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressToken;\n(function (ProgressToken) {\n    function is(value) {\n        return typeof value === 'string' || typeof value === 'number';\n    }\n    ProgressToken.is = is;\n})(ProgressToken || (exports.ProgressToken = ProgressToken = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    /**\n     * Clients must not use these properties. They are here to ensure correct typing.\n     * in TypeScript\n     */\n    __;\n    _pr;\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nvar StarRequestHandler;\n(function (StarRequestHandler) {\n    function is(value) {\n        return Is.func(value);\n    }\n    StarRequestHandler.is = is;\n})(StarRequestHandler || (StarRequestHandler = {}));\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Compact\"] = 2] = \"Compact\";\n    Trace[Trace[\"Verbose\"] = 3] = \"Verbose\";\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceValue;\n(function (TraceValue) {\n    /**\n     * Turn tracing off.\n     */\n    TraceValue.Off = 'off';\n    /**\n     * Trace messages only.\n     */\n    TraceValue.Messages = 'messages';\n    /**\n     * Compact message tracing.\n     */\n    TraceValue.Compact = 'compact';\n    /**\n     * Verbose message tracing.\n     */\n    TraceValue.Verbose = 'verbose';\n})(TraceValue || (exports.TraceValue = TraceValue = {}));\n/**\n * @deprecated Use TraceValue instead\n */\nexports.TraceValues = TraceValue;\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'compact':\n                return Trace.Compact;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Compact:\n                return 'compact';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return TraceFormat.Text;\n        }\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTrace');\n})(SetTraceNotification || (exports.SetTraceNotification = SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTrace');\n})(LogTraceNotification || (exports.LogTraceNotification = LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors || (exports.ConnectionErrors = ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    code;\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy || (exports.ConnectionStrategy = ConnectionStrategy = {}));\nvar IdCancellationReceiverStrategy;\n(function (IdCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.kind === undefined || candidate.kind === 'id') && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    IdCancellationReceiverStrategy.is = is;\n})(IdCancellationReceiverStrategy || (exports.IdCancellationReceiverStrategy = IdCancellationReceiverStrategy = {}));\nvar RequestCancellationReceiverStrategy;\n(function (RequestCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'request' && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    RequestCancellationReceiverStrategy.is = is;\n})(RequestCancellationReceiverStrategy || (exports.RequestCancellationReceiverStrategy = RequestCancellationReceiverStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        return IdCancellationReceiverStrategy.is(value) || RequestCancellationReceiverStrategy.is(value);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            return conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy || (exports.CancellationSenderStrategy = CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy || (exports.CancellationStrategy = CancellationStrategy = {}));\nvar MessageStrategy;\n(function (MessageStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.handleMessage);\n    }\n    MessageStrategy.is = is;\n})(MessageStrategy || (exports.MessageStrategy = MessageStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate\n            && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy) || MessageStrategy.is(candidate.messageStrategy) || Is.number(candidate.maxParallelism));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions || (exports.ConnectionOptions = ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSequenceNumber = 0;\n    let unknownResponseSequenceNumber = 0;\n    const version = '2.0';\n    const maxParallelism = options?.maxParallelism ?? -1;\n    let inFlight = 0;\n    let starRequestHandler = undefined;\n    const requestHandlers = new Map();\n    let starNotificationHandler = undefined;\n    const notificationHandlers = new Map();\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = new Map();\n    let knownCanceledRequests = new Set();\n    let requestTokens = new Map();\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function createRequestQueueKey(id) {\n        if (id === null) {\n            throw new Error(`Can't send requests with id null since the response can't be correlated.`);\n        }\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSequenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSequenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.Message.isRequest(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            // If we have unlimited parallelism we queue the response to keep\n            // the previous semantics.\n            if (maxParallelism === -1) {\n                queue.set(createResponseQueueKey(message.id), message);\n            }\n            else {\n                // If we have limited parallelism we resolve responses to avoid\n                // dead locks.\n                handleResponse(message);\n            }\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        if (maxParallelism !== -1 && inFlight >= maxParallelism) {\n            return;\n        }\n        timer = (0, ral_1.default)().timer.setImmediate(async () => {\n            timer = undefined;\n            if (messageQueue.size === 0) {\n                return;\n            }\n            if (maxParallelism !== -1 && inFlight >= maxParallelism) {\n                return;\n            }\n            const message = messageQueue.shift();\n            let result;\n            try {\n                inFlight++;\n                const messageStrategy = options?.messageStrategy;\n                if (MessageStrategy.is(messageStrategy)) {\n                    result = messageStrategy.handleMessage(message, handleMessage);\n                }\n                else {\n                    result = handleMessage(message);\n                }\n            }\n            catch (error) {\n                logger.error(`Processing message queue failed: ${error.toString()}`);\n            }\n            finally {\n                if (result instanceof Promise) {\n                    result.then(() => {\n                        inFlight--;\n                        triggerMessageQueue();\n                    }).catch((error) => {\n                        logger.error(`Processing message queue failed: ${error.toString()}`);\n                    });\n                }\n                else {\n                    inFlight--;\n                }\n                triggerMessageQueue();\n            }\n        });\n    }\n    async function handleMessage(message) {\n        if (messages_1.Message.isRequest(message)) {\n            return handleRequest(message);\n        }\n        else if (messages_1.Message.isNotification(message)) {\n            return handleNotification(message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            return handleResponse(message);\n        }\n        else {\n            return handleInvalidMessage(message);\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.Message.isNotification(message) && message.method === CancelNotification.type.method) {\n                const cancelId = message.params.id;\n                const key = createRequestQueueKey(cancelId);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.Message.isRequest(toCancel)) {\n                    const strategy = options?.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        requestTokens.delete(cancelId);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response).catch(() => logger.error(`Sending response for canceled message failed.`));\n                        return;\n                    }\n                }\n                const cancellationToken = requestTokens.get(cancelId);\n                // The request is already running. Cancel the token\n                if (cancellationToken !== undefined) {\n                    cancellationToken.cancel();\n                    traceReceivedNotification(message);\n                    return;\n                }\n                else {\n                    // Remember the cancel but still queue the message to\n                    // clean up state in process message.\n                    knownCanceledRequests.add(cancelId);\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    async function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return Promise.resolve();\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            return messageWriter.write(message);\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            return messageWriter.write(message);\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers.get(requestMessage.method);\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = requestMessage.id ?? String(Date.now()); //\n            const cancellationSource = IdCancellationReceiverStrategy.is(cancellationStrategy.receiver)\n                ? cancellationStrategy.receiver.createCancellationTokenSource(tokenKey)\n                : cancellationStrategy.receiver.createCancellationTokenSource(requestMessage);\n            if (requestMessage.id !== null && knownCanceledRequests.has(requestMessage.id)) {\n                cancellationSource.cancel();\n            }\n            if (requestMessage.id !== null) {\n                requestTokens.set(tokenKey, cancellationSource);\n            }\n            try {\n                let handlerResult;\n                if (requestHandler) {\n                    if (requestMessage.params === undefined) {\n                        if (type !== undefined && type.numberOfParams !== 0) {\n                            return replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines ${type.numberOfParams} params but received none.`), requestMessage.method, startTime);\n                        }\n                        handlerResult = requestHandler(cancellationSource.token);\n                    }\n                    else if (Array.isArray(requestMessage.params)) {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byName) {\n                            return replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by name but received parameters by position`), requestMessage.method, startTime);\n                        }\n                        handlerResult = requestHandler(...requestMessage.params, cancellationSource.token);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            return replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by position but received parameters by name`), requestMessage.method, startTime);\n                        }\n                        handlerResult = requestHandler(requestMessage.params, cancellationSource.token);\n                    }\n                }\n                else if (starRequestHandler) {\n                    handlerResult = starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const resultOrError = await handlerResult;\n                await reply(resultOrError, requestMessage.method, startTime);\n            }\n            catch (error) {\n                if (error instanceof messages_1.ResponseError) {\n                    await reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    await replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    await replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n            finally {\n                requestTokens.delete(tokenKey);\n            }\n        }\n        else {\n            await replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = responseMessage.id;\n            const responsePromise = responsePromises.get(key);\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise !== undefined) {\n                responsePromises.delete(key);\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    async function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            const cancelId = message.params.id;\n            knownCanceledRequests.delete(cancelId);\n            traceReceivedNotification(message);\n            return;\n        }\n        else {\n            const element = notificationHandlers.get(message.method);\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (notificationHandler) {\n                    if (message.params === undefined) {\n                        if (type !== undefined) {\n                            if (type.numberOfParams !== 0 && type.parameterStructures !== messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received none.`);\n                            }\n                        }\n                        await notificationHandler();\n                    }\n                    else if (Array.isArray(message.params)) {\n                        // There are JSON-RPC libraries that send progress message as positional params although\n                        // specified as named. So convert them if this is the case.\n                        const params = message.params;\n                        if (message.method === ProgressNotification.type.method && params.length === 2 && ProgressToken.is(params[0])) {\n                            await notificationHandler({ token: params[0], value: params[1] });\n                        }\n                        else {\n                            if (type !== undefined) {\n                                if (type.parameterStructures === messages_1.ParameterStructures.byName) {\n                                    logger.error(`Notification ${message.method} defines parameters by name but received parameters by position`);\n                                }\n                                if (type.numberOfParams !== message.params.length) {\n                                    logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received ${params.length} arguments`);\n                                }\n                            }\n                            await notificationHandler(...params);\n                        }\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            logger.error(`Notification ${message.method} defines parameters by position but received parameters by name`);\n                        }\n                        await notificationHandler(message.params);\n                    }\n                }\n                else if (starNotificationHandler) {\n                    await starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = responseMessage.id;\n            const responseHandler = responsePromises.get(key);\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function stringifyTrace(params) {\n        if (params === undefined || params === null) {\n            return undefined;\n        }\n        switch (trace) {\n            case Trace.Verbose:\n                return JSON.stringify(params, null, 4);\n            case Trace.Compact:\n                return JSON.stringify(params);\n            default:\n                return undefined;\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}`;\n                }\n                else {\n                    data = 'No parameters provided.';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}`;\n                }\n                else {\n                    data = 'No parameters provided.';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function nullToUndefined(param) {\n        if (param === null) {\n            return undefined;\n        }\n        else {\n            return param;\n        }\n    }\n    function isNamedParam(param) {\n        return param !== undefined && param !== null && !Array.isArray(param) && typeof param === 'object';\n    }\n    function computeSingleParam(parameterStructures, param) {\n        switch (parameterStructures) {\n            case messages_1.ParameterStructures.auto:\n                if (isNamedParam(param)) {\n                    return nullToUndefined(param);\n                }\n                else {\n                    return [undefinedToNull(param)];\n                }\n            case messages_1.ParameterStructures.byName:\n                if (!isNamedParam(param)) {\n                    throw new Error(`Received parameters by name but param is not an object literal.`);\n                }\n                return nullToUndefined(param);\n            case messages_1.ParameterStructures.byPosition:\n                return [undefinedToNull(param)];\n            default:\n                throw new Error(`Unknown parameter structure ${parameterStructures.toString()}`);\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = undefined;\n                break;\n            case 1:\n                result = computeSingleParam(type.parameterStructures, params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                const paramEnd = args.length;\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' notification parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            return messageWriter.write(notificationMessage).catch((error) => {\n                logger.error(`Sending notification failed.`);\n                throw error;\n            });\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method;\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    method = type;\n                    notificationHandlers.set(type, { type: undefined, handler });\n                }\n                else {\n                    method = type.method;\n                    notificationHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method !== undefined) {\n                        if (notificationHandlers.get(method)?.handler === handler) {\n                            notificationHandlers.delete(method);\n                        }\n                    }\n                    else if (starNotificationHandler === type) {\n                        starNotificationHandler = undefined;\n                    }\n                }\n            };\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    if (progressHandlers.get(token) === handler) {\n                        progressHandlers.delete(token);\n                    }\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            // This should not await but simple return to ensure that we don't have another\n            // async scheduling. Otherwise one send could overtake another send.\n            return connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            function sendCancellation(connection, id) {\n                const p = cancellationStrategy.sender.sendCancellation(connection, id);\n                if (p === undefined) {\n                    logger.log(`Received no promise from cancellation strategy when cancelling id ${id}`);\n                }\n                else {\n                    p.catch(() => {\n                        logger.log(`Sending cancellation messages for id ${id} failed.`);\n                    });\n                }\n            }\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                const last = args[args.length - 1];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                if (cancellation_1.CancellationToken.is(last)) {\n                    paramEnd = paramEnd - 1;\n                    token = last;\n                }\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' request parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            let tokenWasCancelled = false;\n            if (token !== undefined) {\n                if (token.isCancellationRequested) {\n                    tokenWasCancelled = true;\n                }\n                else {\n                    disposable = token.onCancellationRequested(() => {\n                        sendCancellation(connection, id);\n                    });\n                }\n            }\n            const requestMessage = {\n                jsonrpc: version,\n                id: id,\n                method: method,\n                params: messageParams\n            };\n            traceSendingRequest(requestMessage);\n            if (typeof cancellationStrategy.sender.enableCancellation === 'function') {\n                cancellationStrategy.sender.enableCancellation(requestMessage);\n            }\n            // eslint-disable-next-line no-async-promise-executor\n            return new Promise(async (resolve, reject) => {\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                try {\n                    responsePromises.set(id, responsePromise);\n                    await messageWriter.write(requestMessage);\n                    if (tokenWasCancelled) {\n                        sendCancellation(connection, id);\n                    }\n                }\n                catch (error) {\n                    // Writing the message failed. So we need to delete it from the response promises and\n                    // reject it.\n                    responsePromises.delete(id);\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, error.message ? error.message : 'Unknown reason'));\n                    logger.error(`Sending request failed.`);\n                    throw error;\n                }\n            });\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method = null;\n            if (StarRequestHandler.is(type)) {\n                method = undefined;\n                starRequestHandler = type;\n            }\n            else if (Is.string(type)) {\n                method = null;\n                if (handler !== undefined) {\n                    method = type;\n                    requestHandlers.set(type, { handler: handler, type: undefined });\n                }\n            }\n            else {\n                if (handler !== undefined) {\n                    method = type.method;\n                    requestHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method === null) {\n                        return;\n                    }\n                    if (method !== undefined) {\n                        if (requestHandlers.get(method)?.handler === handler) {\n                            requestHandlers.delete(method);\n                        }\n                    }\n                    else if (starRequestHandler === type) {\n                        starRequestHandler = undefined;\n                    }\n                }\n            };\n        },\n        hasPendingResponse: () => {\n            return responsePromises.size > 0;\n        },\n        trace: async (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                await connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        end: () => {\n            messageWriter.end();\n        },\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new messages_1.ResponseError(messages_1.ErrorCodes.PendingResponseRejected, 'Pending response rejected since connection got disposed');\n            for (const promise of responsePromises.values()) {\n                promise.reject(error);\n            }\n            responsePromises = new Map();\n            requestTokens = new Map();\n            knownCanceledRequests = new Set();\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            (0, ral_1.default)().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        const verbose = trace === Trace.Verbose || trace === Trace.Compact;\n        tracer.log(params.message, verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, async (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            await handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractMessageBuffer = void 0;\nconst CR = 13;\nconst LF = 10;\nconst CRLF = '\\r\\n';\nclass AbstractMessageBuffer {\n    _encoding;\n    _chunks;\n    _totalLength;\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this._chunks = [];\n        this._totalLength = 0;\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        const toAppend = typeof chunk === 'string' ? this.fromString(chunk, this._encoding) : chunk;\n        this._chunks.push(toAppend);\n        this._totalLength += toAppend.byteLength;\n    }\n    tryReadHeaders(lowerCaseKeys = false) {\n        if (this._chunks.length === 0) {\n            return undefined;\n        }\n        let state = 0;\n        let chunkIndex = 0;\n        let offset = 0;\n        let chunkBytesRead = 0;\n        row: while (chunkIndex < this._chunks.length) {\n            const chunk = this._chunks[chunkIndex];\n            offset = 0;\n            while (offset < chunk.length) {\n                const value = chunk[offset];\n                switch (value) {\n                    case CR:\n                        switch (state) {\n                            case 0:\n                                state = 1;\n                                break;\n                            case 2:\n                                state = 3;\n                                break;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    case LF:\n                        switch (state) {\n                            case 1:\n                                state = 2;\n                                break;\n                            case 3:\n                                state = 4;\n                                offset++;\n                                break row;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    default:\n                        state = 0;\n                }\n                offset++;\n            }\n            chunkBytesRead += chunk.byteLength;\n            chunkIndex++;\n        }\n        if (state !== 4) {\n            return undefined;\n        }\n        // The buffer contains the two CRLF at the end. So we will\n        // have two empty lines after the split at the end as well.\n        const buffer = this._read(chunkBytesRead + offset);\n        const result = new Map();\n        const headers = this.toString(buffer, 'ascii').split(CRLF);\n        if (headers.length < 2) {\n            return result;\n        }\n        for (let i = 0; i < headers.length - 2; i++) {\n            const header = headers[i];\n            const index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error(`Message header must separate key and value using ':'\\n${header}`);\n            }\n            const key = header.substr(0, index);\n            const value = header.substr(index + 1).trim();\n            result.set(lowerCaseKeys ? key.toLowerCase() : key, value);\n        }\n        return result;\n    }\n    tryReadBody(length) {\n        if (this._totalLength < length) {\n            return undefined;\n        }\n        return this._read(length);\n    }\n    get numberOfBytes() {\n        return this._totalLength;\n    }\n    _read(byteCount) {\n        if (byteCount === 0) {\n            return this.emptyBuffer();\n        }\n        if (byteCount > this._totalLength) {\n            throw new Error(`Cannot read so many bytes!`);\n        }\n        if (this._chunks[0].byteLength === byteCount) {\n            // super fast path, precisely first chunk must be returned\n            const chunk = this._chunks[0];\n            this._chunks.shift();\n            this._totalLength -= byteCount;\n            return this.asNative(chunk);\n        }\n        if (this._chunks[0].byteLength > byteCount) {\n            // fast path, the reading is entirely within the first chunk\n            const chunk = this._chunks[0];\n            const result = this.asNative(chunk, byteCount);\n            this._chunks[0] = chunk.slice(byteCount);\n            this._totalLength -= byteCount;\n            return result;\n        }\n        const result = this.allocNative(byteCount);\n        let resultOffset = 0;\n        const chunkIndex = 0;\n        while (byteCount > 0) {\n            const chunk = this._chunks[chunkIndex];\n            if (chunk.byteLength > byteCount) {\n                // this chunk will survive\n                const chunkPart = chunk.slice(0, byteCount);\n                result.set(chunkPart, resultOffset);\n                resultOffset += byteCount;\n                this._chunks[chunkIndex] = chunk.slice(byteCount);\n                this._totalLength -= byteCount;\n                byteCount -= byteCount;\n            }\n            else {\n                // this chunk will be entirely read\n                result.set(chunk, resultOffset);\n                resultOffset += chunk.byteLength;\n                this._chunks.shift();\n                this._totalLength -= chunk.byteLength;\n                byteCount -= chunk.byteLength;\n            }\n        }\n        return result;\n    }\n}\nexports.AbstractMessageBuffer = AbstractMessageBuffer;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineValueFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass InlineValueFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.InlineValueRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'inlineValue').dynamicRegistration = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'inlineValue').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        this._client.onRequest(vscode_languageserver_protocol_1.InlineValueRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeInlineValues.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.inlineValueProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeInlineValues: eventEmitter.event,\n            provideInlineValues: (document, viewPort, context, token) => {\n                const client = this._client;\n                const provideInlineValues = (document, viewPort, context, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(viewPort),\n                        context: client.code2ProtocolConverter.asInlineValueContext(context)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.InlineValueRequest.type, requestParams, token).then((values) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asInlineValues(values, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlineValueRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideInlineValues\n                    ? middleware.provideInlineValues(document, viewPort, context, token, provideInlineValues)\n                    : provideInlineValues(document, viewPort, context, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), { provider: provider, onDidChangeInlineValues: eventEmitter }];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.InlineValueFeature = InlineValueFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass ImplementationFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const implementationSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'implementation');\n        implementationSupport.dynamicRegistration = true;\n        implementationSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.implementationProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideImplementation: (document, position, token) => {\n                const client = this._client;\n                const provideImplementation = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDefinitionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideImplementation\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\n                    : provideImplementation(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.ImplementationFeature = ImplementationFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchySubtypesRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `TypeHierarchyItem` in a document at a given position.\n * Can be used as an input to a subtypes or supertypes type hierarchy.\n *\n * @since 3.17.0\n */\nvar TypeHierarchyPrepareRequest;\n(function (TypeHierarchyPrepareRequest) {\n    TypeHierarchyPrepareRequest.method = 'textDocument/prepareTypeHierarchy';\n    TypeHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(TypeHierarchyPrepareRequest.method);\n    TypeHierarchyPrepareRequest.capabilities = messages_1.CM.create('textDocument.typeHierarchy', 'typeHierarchyProvider');\n})(TypeHierarchyPrepareRequest || (exports.TypeHierarchyPrepareRequest = TypeHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the supertypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySupertypesRequest;\n(function (TypeHierarchySupertypesRequest) {\n    TypeHierarchySupertypesRequest.method = 'typeHierarchy/supertypes';\n    TypeHierarchySupertypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySupertypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySupertypesRequest.method);\n})(TypeHierarchySupertypesRequest || (exports.TypeHierarchySupertypesRequest = TypeHierarchySupertypesRequest = {}));\n/**\n * A request to resolve the subtypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySubtypesRequest;\n(function (TypeHierarchySubtypesRequest) {\n    TypeHierarchySubtypesRequest.method = 'typeHierarchy/subtypes';\n    TypeHierarchySubtypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySubtypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySubtypesRequest.method);\n})(TypeHierarchySubtypesRequest || (exports.TypeHierarchySubtypesRequest = TypeHierarchySubtypesRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = createProtocolConnection;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nfunction createProtocolConnection(input, output, logger, options) {\n    if (vscode_jsonrpc_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, vscode_jsonrpc_1.createMessageConnection)(input, output, logger, options);\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolean = boolean;\nexports.string = string;\nexports.number = number;\nexports.error = error;\nexports.func = func;\nexports.array = array;\nexports.stringArray = stringArray;\nexports.typedArray = typedArray;\nexports.objectLiteral = objectLiteral;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nfunction error(value) {\n    return value instanceof Error;\n}\nfunction func(value) {\n    return typeof value === 'function';\n}\nfunction array(value) {\n    return Array.isArray(value);\n}\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nfunction objectLiteral(value) {\n    // Strictly speaking class instances pass this check as well. Since the LSP\n    // doesn't use classes we ignore this for now. If we do we need to add something\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n    return value !== null && typeof value === 'object';\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { workspace, extensions, Uri, EventEmitter, Disposable } from 'vscode';\nimport { Runtime } from './htmlClient';\nimport { Utils } from 'vscode-uri';\n\n\nexport function getCustomDataSource(runtime: Runtime, toDispose: Disposable[]) {\n\tlet localExtensionUris = new Set<string>();\n\tlet externalExtensionUris = new Set<string>();\n\tconst workspaceUris = new Set<string>();\n\n\tcollectInWorkspaces(workspaceUris);\n\tcollectInExtensions(localExtensionUris, externalExtensionUris);\n\n\tconst onChange = new EventEmitter<void>();\n\n\ttoDispose.push(extensions.onDidChange(_ => {\n\t\tconst newLocalExtensionUris = new Set<string>();\n\t\tconst newExternalExtensionUris = new Set<string>();\n\t\tcollectInExtensions(newLocalExtensionUris, newExternalExtensionUris);\n\t\tif (hasChanges(newLocalExtensionUris, localExtensionUris) || hasChanges(newExternalExtensionUris, externalExtensionUris)) {\n\t\t\tlocalExtensionUris = newLocalExtensionUris;\n\t\t\texternalExtensionUris = newExternalExtensionUris;\n\t\t\tonChange.fire();\n\t\t}\n\t}));\n\ttoDispose.push(workspace.onDidChangeConfiguration(e => {\n\t\tif (e.affectsConfiguration('html.customData')) {\n\t\t\tworkspaceUris.clear();\n\t\t\tcollectInWorkspaces(workspaceUris);\n\t\t\tonChange.fire();\n\t\t}\n\t}));\n\n\ttoDispose.push(workspace.onDidChangeTextDocument(e => {\n\t\tconst path = e.document.uri.toString();\n\t\tif (externalExtensionUris.has(path) || workspaceUris.has(path)) {\n\t\t\tonChange.fire();\n\t\t}\n\t}));\n\n\treturn {\n\t\tget uris() {\n\t\t\treturn [...localExtensionUris].concat([...externalExtensionUris], [...workspaceUris]);\n\t\t},\n\t\tget onDidChange() {\n\t\t\treturn onChange.event;\n\t\t},\n\t\tgetContent(uriString: string): Thenable<string> {\n\t\t\tconst uri = Uri.parse(uriString);\n\t\t\tif (localExtensionUris.has(uriString)) {\n\t\t\t\treturn workspace.fs.readFile(uri).then(buffer => {\n\t\t\t\t\treturn new runtime.TextDecoder().decode(buffer);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn workspace.openTextDocument(uri).then(doc => {\n\t\t\t\treturn doc.getText();\n\t\t\t});\n\t\t}\n\t};\n}\n\nfunction hasChanges(s1: Set<string>, s2: Set<string>) {\n\tif (s1.size !== s2.size) {\n\t\treturn true;\n\t}\n\tfor (const uri of s1) {\n\t\tif (!s2.has(uri)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction isURI(uriOrPath: string) {\n\treturn /^(?<scheme>\\w[\\w\\d+.-]*):/.test(uriOrPath);\n}\n\n\nfunction collectInWorkspaces(workspaceUris: Set<string>): Set<string> {\n\tconst workspaceFolders = workspace.workspaceFolders;\n\n\tconst dataPaths = new Set<string>();\n\n\tif (!workspaceFolders) {\n\t\treturn dataPaths;\n\t}\n\n\tconst collect = (uriOrPaths: string[] | undefined, rootFolder: Uri) => {\n\t\tif (Array.isArray(uriOrPaths)) {\n\t\t\tfor (const uriOrPath of uriOrPaths) {\n\t\t\t\tif (typeof uriOrPath === 'string') {\n\t\t\t\t\tif (!isURI(uriOrPath)) {\n\t\t\t\t\t\t// path in the workspace\n\t\t\t\t\t\tworkspaceUris.add(Utils.resolvePath(rootFolder, uriOrPath).toString());\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// external uri\n\t\t\t\t\t\tworkspaceUris.add(uriOrPath);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tfor (let i = 0; i < workspaceFolders.length; i++) {\n\t\tconst folderUri = workspaceFolders[i].uri;\n\t\tconst allHtmlConfig = workspace.getConfiguration('html', folderUri);\n\t\tconst customDataInspect = allHtmlConfig.inspect<string[]>('customData');\n\t\tif (customDataInspect) {\n\t\t\tcollect(customDataInspect.workspaceFolderValue, folderUri);\n\t\t\tif (i === 0) {\n\t\t\t\tif (workspace.workspaceFile) {\n\t\t\t\t\tcollect(customDataInspect.workspaceValue, workspace.workspaceFile);\n\t\t\t\t}\n\t\t\t\tcollect(customDataInspect.globalValue, folderUri);\n\t\t\t}\n\t\t}\n\n\t}\n\treturn dataPaths;\n}\n\nfunction collectInExtensions(localExtensionUris: Set<string>, externalUris: Set<string>): void {\n\tfor (const extension of extensions.allAcrossExtensionHosts) {\n\t\tconst customData = extension.packageJSON?.contributes?.html?.customData;\n\t\tif (Array.isArray(customData)) {\n\t\t\tfor (const uriOrPath of customData) {\n\t\t\t\tif (!isURI(uriOrPath)) {\n\t\t\t\t\t// relative path in an extension\n\t\t\t\t\tlocalExtensionUris.add(Uri.joinPath(extension.extensionUri, uriOrPath).toString());\n\t\t\t\t} else {\n\t\t\t\t\t// external uri\n\t\t\t\t\texternalUris.add(uriOrPath);\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass DeclarationFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const declarationSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'declaration');\n        declarationSupport.dynamicRegistration = true;\n        declarationSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.declarationProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDeclaration: (document, position, token) => {\n                const client = this._client;\n                const provideDeclaration = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDeclarationResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDeclaration\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\n                    : provideDeclaration(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.DeclarationFeature = DeclarationFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = void 0;\nconst ral_1 = __importDefault(require(\"./ral\"));\nclass Semaphore {\n    _capacity;\n    _active;\n    _waiting;\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, ral_1.default)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`Too many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentSymbolFeature = exports.SupportedSymbolTags = exports.SupportedSymbolKinds = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nexports.SupportedSymbolKinds = [\n    vscode_languageserver_protocol_1.SymbolKind.File,\n    vscode_languageserver_protocol_1.SymbolKind.Module,\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\n    vscode_languageserver_protocol_1.SymbolKind.Package,\n    vscode_languageserver_protocol_1.SymbolKind.Class,\n    vscode_languageserver_protocol_1.SymbolKind.Method,\n    vscode_languageserver_protocol_1.SymbolKind.Property,\n    vscode_languageserver_protocol_1.SymbolKind.Field,\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\n    vscode_languageserver_protocol_1.SymbolKind.Function,\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\n    vscode_languageserver_protocol_1.SymbolKind.String,\n    vscode_languageserver_protocol_1.SymbolKind.Number,\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\n    vscode_languageserver_protocol_1.SymbolKind.Array,\n    vscode_languageserver_protocol_1.SymbolKind.Object,\n    vscode_languageserver_protocol_1.SymbolKind.Key,\n    vscode_languageserver_protocol_1.SymbolKind.Null,\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\n    vscode_languageserver_protocol_1.SymbolKind.Event,\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\n];\nexports.SupportedSymbolTags = [\n    vscode_languageserver_protocol_1.SymbolTag.Deprecated\n];\nclass DocumentSymbolFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const symbolCapabilities = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'documentSymbol');\n        symbolCapabilities.dynamicRegistration = true;\n        symbolCapabilities.symbolKind = {\n            valueSet: exports.SupportedSymbolKinds\n        };\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\n        symbolCapabilities.tagSupport = {\n            valueSet: exports.SupportedSymbolTags\n        };\n        symbolCapabilities.labelSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentSymbolProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentSymbols: (document, token) => {\n                const client = this._client;\n                const _provideDocumentSymbols = async (document, token) => {\n                    try {\n                        const data = await client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token);\n                        if (token.isCancellationRequested || data === undefined || data === null) {\n                            return null;\n                        }\n                        if (data.length === 0) {\n                            return [];\n                        }\n                        else {\n                            const first = data[0];\n                            if (vscode_languageserver_protocol_1.DocumentSymbol.is(first)) {\n                                return await client.protocol2CodeConverter.asDocumentSymbols(data, token);\n                            }\n                            else {\n                                return await client.protocol2CodeConverter.asSymbolInformations(data, token);\n                            }\n                        }\n                    }\n                    catch (error) {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, token, error, null);\n                    }\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentSymbols\n                    ? middleware.provideDocumentSymbols(document, token, _provideDocumentSymbols)\n                    : _provideDocumentSymbols(document, token);\n            }\n        };\n        const metaData = options.label !== undefined ? { label: options.label } : undefined;\n        return [vscode_1.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, metaData), provider];\n    }\n}\nexports.DocumentSymbolFeature = DocumentSymbolFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Message = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType = exports.RequestType0 = exports.AbstractMessageSignature = exports.ParameterStructures = exports.ResponseError = exports.ErrorCodes = void 0;\nconst is = __importStar(require(\"./is\"));\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    /**\n     * This is the start range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code. No application error codes should\n     * be defined between the start and end range. For backwards\n     * compatibility the `ServerNotInitialized` and the `UnknownErrorCode`\n     * are left in the range.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeStart = -32099;\n    /** @deprecated use  jsonrpcReservedErrorRangeStart */\n    ErrorCodes.serverErrorStart = -32099;\n    /**\n     * An error occurred when write a message to the transport layer.\n     */\n    ErrorCodes.MessageWriteError = -32099;\n    /**\n     * An error occurred when reading a message from the transport layer.\n     */\n    ErrorCodes.MessageReadError = -32098;\n    /**\n     * The connection got disposed or lost and all pending responses got\n     * rejected.\n     */\n    ErrorCodes.PendingResponseRejected = -32097;\n    /**\n     * The connection is inactive and a use of it failed.\n     */\n    ErrorCodes.ConnectionInactive = -32096;\n    /**\n     * Error code indicating that a server received a notification or\n     * request before the server has received the `initialize` request.\n     */\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    /**\n     * This is the end range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeEnd = -32000;\n    /** @deprecated use  jsonrpcReservedErrorRangeEnd */\n    ErrorCodes.serverErrorEnd = -32000;\n})(ErrorCodes || (exports.ErrorCodes = ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    code;\n    data;\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        const result = {\n            code: this.code,\n            message: this.message\n        };\n        if (this.data !== undefined) {\n            result.data = this.data;\n        }\n        return result;\n    }\n}\nexports.ResponseError = ResponseError;\nclass ParameterStructures {\n    kind;\n    /**\n     * The parameter structure is automatically inferred on the number of parameters\n     * and the parameter type in case of a single param.\n     */\n    static auto = new ParameterStructures('auto');\n    /**\n     * Forces `byPosition` parameter structure. This is useful if you have a single\n     * parameter which has a literal type.\n     */\n    static byPosition = new ParameterStructures('byPosition');\n    /**\n     * Forces `byName` parameter structure. This is only useful when having a single\n     * parameter. The library will report errors if used with a different number of\n     * parameters.\n     */\n    static byName = new ParameterStructures('byName');\n    constructor(kind) {\n        this.kind = kind;\n    }\n    static is(value) {\n        return value === ParameterStructures.auto || value === ParameterStructures.byName || value === ParameterStructures.byPosition;\n    }\n    toString() {\n        return this.kind;\n    }\n}\nexports.ParameterStructures = ParameterStructures;\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    method;\n    numberOfParams;\n    constructor(method, numberOfParams) {\n        this.method = method;\n        this.numberOfParams = numberOfParams;\n    }\n    get parameterStructures() {\n        return ParameterStructures.auto;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n */\nclass RequestType0 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    _parameterStructures;\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    _parameterStructures;\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\nclass NotificationType extends AbstractMessageSignature {\n    _parameterStructures;\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    _parameterStructures;\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    /**\n     * Clients must not use this property. It is here to ensure correct typing.\n     */\n    _;\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\nvar Message;\n(function (Message) {\n    /**\n     * Tests if the given message is a request message\n     */\n    function isRequest(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n    }\n    Message.isRequest = isRequest;\n    /**\n     * Tests if the given message is a notification message\n     */\n    function isNotification(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && message.id === void 0;\n    }\n    Message.isNotification = isNotification;\n    /**\n     * Tests if the given message is a response message\n     */\n    function isResponse(message) {\n        const candidate = message;\n        return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n    }\n    Message.isResponse = isResponse;\n})(Message || (exports.Message = Message = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass CallHierarchyProvider {\n    client;\n    middleware;\n    constructor(client) {\n        this.client = client;\n        this.middleware = client.middleware;\n    }\n    prepareCallHierarchy(document, position, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const prepareCallHierarchy = (document, position, token) => {\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asCallHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, token, error, null);\n            });\n        };\n        return middleware.prepareCallHierarchy\n            ? middleware.prepareCallHierarchy(document, position, token, prepareCallHierarchy)\n            : prepareCallHierarchy(document, position, token);\n    }\n    provideCallHierarchyIncomingCalls(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideCallHierarchyIncomingCalls = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asCallHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asCallHierarchyIncomingCalls(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideCallHierarchyIncomingCalls\n            ? middleware.provideCallHierarchyIncomingCalls(item, token, provideCallHierarchyIncomingCalls)\n            : provideCallHierarchyIncomingCalls(item, token);\n    }\n    provideCallHierarchyOutgoingCalls(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideCallHierarchyOutgoingCalls = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asCallHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asCallHierarchyOutgoingCalls(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideCallHierarchyOutgoingCalls\n            ? middleware.provideCallHierarchyOutgoingCalls(item, token, provideCallHierarchyOutgoingCalls)\n            : provideCallHierarchyOutgoingCalls(item, token);\n    }\n}\nclass CallHierarchyFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type);\n    }\n    fillClientCapabilities(cap) {\n        const capabilities = cap;\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'callHierarchy');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.callHierarchyProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const client = this._client;\n        const provider = new CallHierarchyProvider(client);\n        return [vscode_1.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(options.documentSelector), provider), provider];\n    }\n}\nexports.CallHierarchyFeature = CallHierarchyFeature;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineCompletionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline completions in a document. The request's parameter is of\n * type {@link InlineCompletionParams}, the response is of type\n * {@link InlineCompletion InlineCompletion[]} or a Thenable that resolves to such.\n *\n * @since 3.18.0\n * @proposed\n */\nvar InlineCompletionRequest;\n(function (InlineCompletionRequest) {\n    InlineCompletionRequest.method = 'textDocument/inlineCompletion';\n    InlineCompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineCompletionRequest.type = new messages_1.ProtocolRequestType(InlineCompletionRequest.method);\n    InlineCompletionRequest.capabilities = messages_1.CM.create('textDocument.inlineCompletion', 'inlineCompletionProvider');\n})(InlineCompletionRequest || (exports.InlineCompletionRequest = InlineCompletionRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.empty = void 0;\nexports.v4 = v4;\nexports.isUUID = isUUID;\nexports.parse = parse;\nexports.generateUuid = generateUuid;\nclass ValueUUID {\n    _value;\n    constructor(_value) {\n        this._value = _value;\n        // empty\n    }\n    asHex() {\n        return this._value;\n    }\n    equals(other) {\n        return this.asHex() === other.asHex();\n    }\n}\nclass V4UUID extends ValueUUID {\n    static _chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n    static _timeHighBits = ['8', '9', 'a', 'b'];\n    static _oneOf(array) {\n        return array[Math.floor(array.length * Math.random())];\n    }\n    static _randomHex() {\n        return V4UUID._oneOf(V4UUID._chars);\n    }\n    constructor() {\n        super([\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            '4',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._oneOf(V4UUID._timeHighBits),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n        ].join(''));\n    }\n}\n/**\n * An empty UUID that contains only zeros.\n */\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\nfunction v4() {\n    return new V4UUID();\n}\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nfunction isUUID(value) {\n    return _UUIDPattern.test(value);\n}\n/**\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\n * @param value A uuid string.\n */\nfunction parse(value) {\n    if (!isUUID(value)) {\n        throw new Error('invalid uuid');\n    }\n    return new ValueUUID(value);\n}\nfunction generateUuid() {\n    return v4().asHex();\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeRefreshRequest = exports.FoldingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide folding ranges in a document. The request's\n * parameter is of type {@link FoldingRangeParams}, the\n * response is of type {@link FoldingRangeList} or a Thenable\n * that resolves to such.\n */\nvar FoldingRangeRequest;\n(function (FoldingRangeRequest) {\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\n    FoldingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\n    FoldingRangeRequest.capabilities = messages_1.CM.create('textDocument.foldingRange', 'foldingRangeProvider');\n})(FoldingRangeRequest || (exports.FoldingRangeRequest = FoldingRangeRequest = {}));\n/**\n * @since 3.18.0\n * @proposed\n */\nvar FoldingRangeRefreshRequest;\n(function (FoldingRangeRefreshRequest) {\n    FoldingRangeRefreshRequest.method = `workspace/foldingRange/refresh`;\n    FoldingRangeRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    FoldingRangeRefreshRequest.type = new messages_1.ProtocolRequestType0(FoldingRangeRefreshRequest.method);\n    FoldingRangeRefreshRequest.capabilities = messages_1.CM.create('workspace.foldingRange.refreshSupport', undefined);\n})(FoldingRangeRefreshRequest || (exports.FoldingRangeRefreshRequest = FoldingRangeRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShowDocumentRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to show a document. This request might open an\n * external program depending on the value of the URI to open.\n * For example a request to open `https://code.visualstudio.com/`\n * will very likely open the URI in a WEB browser.\n *\n * @since 3.16.0\n*/\nvar ShowDocumentRequest;\n(function (ShowDocumentRequest) {\n    ShowDocumentRequest.method = 'window/showDocument';\n    ShowDocumentRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowDocumentRequest.type = new messages_1.ProtocolRequestType(ShowDocumentRequest.method);\n    ShowDocumentRequest.capabilities = messages_1.CM.create('window.showDocument.support', undefined);\n})(ShowDocumentRequest || (exports.ShowDocumentRequest = ShowDocumentRequest = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { window, workspace, Disposable, TextDocument, Position, SnippetString, TextDocumentChangeEvent, TextDocumentChangeReason, TextDocumentContentChangeEvent } from 'vscode';\nimport { Runtime } from './htmlClient';\nimport { LanguageParticipants } from './languageParticipants';\n\nexport function activateAutoInsertion(provider: (kind: 'autoQuote' | 'autoClose', document: TextDocument, position: Position) => Thenable<string>, languageParticipants: LanguageParticipants, runtime: Runtime): Disposable {\n\tconst disposables: Disposable[] = [];\n\tworkspace.onDidChangeTextDocument(onDidChangeTextDocument, null, disposables);\n\n\tlet anyIsEnabled = false;\n\tconst isEnabled = {\n\t\t'autoQuote': false,\n\t\t'autoClose': false\n\t};\n\tupdateEnabledState();\n\twindow.onDidChangeActiveTextEditor(updateEnabledState, null, disposables);\n\n\tlet timeout: Disposable | undefined = undefined;\n\n\tdisposables.push({\n\t\tdispose: () => {\n\t\t\ttimeout?.dispose();\n\t\t}\n\t});\n\n\tfunction updateEnabledState() {\n\t\tanyIsEnabled = false;\n\t\tconst editor = window.activeTextEditor;\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\t\tconst document = editor.document;\n\t\tif (!languageParticipants.useAutoInsert(document.languageId)) {\n\t\t\treturn;\n\t\t}\n\t\tconst configurations = workspace.getConfiguration(undefined, document.uri);\n\t\tisEnabled['autoQuote'] = configurations.get<boolean>('html.autoCreateQuotes') ?? false;\n\t\tisEnabled['autoClose'] = configurations.get<boolean>('html.autoClosingTags') ?? false;\n\t\tanyIsEnabled = isEnabled['autoQuote'] || isEnabled['autoClose'];\n\t}\n\n\tfunction onDidChangeTextDocument({ document, contentChanges, reason }: TextDocumentChangeEvent) {\n\t\tif (!anyIsEnabled || contentChanges.length === 0 || reason === TextDocumentChangeReason.Undo || reason === TextDocumentChangeReason.Redo) {\n\t\t\treturn;\n\t\t}\n\t\tconst activeDocument = window.activeTextEditor && window.activeTextEditor.document;\n\t\tif (document !== activeDocument) {\n\t\t\treturn;\n\t\t}\n\t\tif (timeout) {\n\t\t\ttimeout.dispose();\n\t\t}\n\n\t\tconst lastChange = contentChanges[contentChanges.length - 1];\n\t\tif (lastChange.rangeLength === 0 && isSingleLine(lastChange.text)) {\n\t\t\tconst lastCharacter = lastChange.text[lastChange.text.length - 1];\n\t\t\tif (isEnabled['autoQuote'] && lastCharacter === '=') {\n\t\t\t\tdoAutoInsert('autoQuote', document, lastChange);\n\t\t\t} else if (isEnabled['autoClose'] && (lastCharacter === '>' || lastCharacter === '/')) {\n\t\t\t\tdoAutoInsert('autoClose', document, lastChange);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction isSingleLine(text: string): boolean {\n\t\treturn !/\\n/.test(text);\n\t}\n\n\tfunction doAutoInsert(kind: 'autoQuote' | 'autoClose', document: TextDocument, lastChange: TextDocumentContentChangeEvent) {\n\t\tconst rangeStart = lastChange.range.start;\n\t\tconst version = document.version;\n\t\ttimeout = runtime.timer.setTimeout(() => {\n\t\t\tconst position = new Position(rangeStart.line, rangeStart.character + lastChange.text.length);\n\t\t\tprovider(kind, document, position).then(text => {\n\t\t\t\tif (text && isEnabled[kind]) {\n\t\t\t\t\tconst activeEditor = window.activeTextEditor;\n\t\t\t\t\tif (activeEditor) {\n\t\t\t\t\t\tconst activeDocument = activeEditor.document;\n\t\t\t\t\t\tif (document === activeDocument && activeDocument.version === version) {\n\t\t\t\t\t\t\tconst selections = activeEditor.selections;\n\t\t\t\t\t\t\tif (selections.length && selections.some(s => s.active.isEqual(position))) {\n\t\t\t\t\t\t\t\tactiveEditor.insertSnippet(new SnippetString(text), selections.map(s => s.active));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tactiveEditor.insertSnippet(new SnippetString(text), position);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\ttimeout = undefined;\n\t\t}, 100);\n\t}\n\treturn Disposable.from(...disposables);\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigurationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n//---- Get Configuration request ----\n/**\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\n * configuration setting.\n *\n * This pull model replaces the old push model were the client signaled configuration change via an\n * event. If the server still needs to react to configuration changes (since the server caches the\n * result of `workspace/configuration` requests) the server should register for an empty configuration\n * change event and empty the cache if such an event is received.\n */\nvar ConfigurationRequest;\n(function (ConfigurationRequest) {\n    ConfigurationRequest.method = 'workspace/configuration';\n    ConfigurationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType(ConfigurationRequest.method);\n    ConfigurationRequest.capabilities = messages_1.CM.create('workspace.configuration', undefined);\n})(ConfigurationRequest || (exports.ConfigurationRequest = ConfigurationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidSaveTextDocumentFeature = exports.WillSaveWaitUntilFeature = exports.WillSaveFeature = exports.DidChangeTextDocumentFeature = exports.DidCloseTextDocumentFeature = exports.DidOpenTextDocumentFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass DidOpenTextDocumentFeature extends features_1.TextDocumentEventFeature {\n    _syncedDocuments;\n    _pendingOpenNotifications;\n    _delayOpen;\n    _pendingOpenListeners;\n    constructor(client, syncedDocuments) {\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, () => client.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), (data) => data, features_1.TextDocumentEventFeature.textDocumentFilter);\n        this._syncedDocuments = syncedDocuments;\n        this._pendingOpenNotifications = new Map();\n        this._delayOpen = client.clientOptions.textSynchronization?.delayOpenNotifications ?? false;\n    }\n    async callback(document) {\n        if (!this._delayOpen) {\n            return super.callback(document);\n        }\n        else {\n            if (!this.matches(document)) {\n                return;\n            }\n            const tabsModel = this._client.tabsModel;\n            if (tabsModel.isVisible(document)) {\n                return super.callback(document);\n            }\n            else {\n                this._pendingOpenNotifications.set(document.uri.toString(), document);\n            }\n        }\n    }\n    get openDocuments() {\n        return this._syncedDocuments.values();\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\n            this.register({ id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\n        }\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\n    }\n    register(data) {\n        super.register(data);\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        const documentSelector = this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector);\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\n            const uri = textDocument.uri.toString();\n            if (this._syncedDocuments.has(uri)) {\n                return;\n            }\n            if (vscode_1.languages.match(documentSelector, textDocument) > 0 && !this._client.hasDedicatedTextSynchronizationFeature(textDocument)) {\n                const tabsModel = this._client.tabsModel;\n                if (tabsModel.isVisible(textDocument)) {\n                    const middleware = this._client.middleware;\n                    const didOpen = (textDocument) => {\n                        return this._client.sendNotification(this._type, this._createParams(textDocument));\n                    };\n                    (middleware.didOpen ? middleware.didOpen(textDocument, didOpen) : didOpen(textDocument)).catch((error) => {\n                        this._client.error(`Sending document notification ${this._type.method} failed`, error);\n                    });\n                    this._syncedDocuments.set(uri, textDocument);\n                }\n                else {\n                    this._pendingOpenNotifications.set(uri, textDocument);\n                }\n            }\n        });\n        if (this._delayOpen && this._pendingOpenListeners === undefined) {\n            this._pendingOpenListeners = [];\n            const tabsModel = this._client.tabsModel;\n            this._pendingOpenListeners.push(tabsModel.onClose((closed) => {\n                for (const uri of closed) {\n                    this._pendingOpenNotifications.delete(uri.toString());\n                }\n            }));\n            this._pendingOpenListeners.push(tabsModel.onOpen((opened) => {\n                for (const uri of opened) {\n                    const document = this._pendingOpenNotifications.get(uri.toString());\n                    if (document !== undefined) {\n                        super.callback(document).catch(((error) => {\n                            this._client.error(`Sending document notification ${this._type.method} failed`, error);\n                        }));\n                        this._pendingOpenNotifications.delete(uri.toString());\n                    }\n                }\n            }));\n            this._pendingOpenListeners.push(vscode_1.workspace.onDidCloseTextDocument((document) => {\n                this._pendingOpenNotifications.delete(document.uri.toString());\n            }));\n        }\n    }\n    async sendPendingOpenNotifications(closingDocument) {\n        const notifications = Array.from(this._pendingOpenNotifications.values());\n        this._pendingOpenNotifications.clear();\n        for (const notification of notifications) {\n            if (closingDocument !== undefined && notification.uri.toString() === closingDocument) {\n                continue;\n            }\n            await super.callback(notification);\n        }\n    }\n    getTextDocument(data) {\n        return data;\n    }\n    notificationSent(textDocument, type, params) {\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\n        super.notificationSent(textDocument, type, params);\n    }\n    clear() {\n        this._pendingOpenNotifications.clear();\n        if (this._pendingOpenListeners !== undefined) {\n            for (const listener of this._pendingOpenListeners) {\n                listener.dispose();\n            }\n            this._pendingOpenListeners = undefined;\n        }\n        super.clear();\n    }\n}\nexports.DidOpenTextDocumentFeature = DidOpenTextDocumentFeature;\nclass DidCloseTextDocumentFeature extends features_1.TextDocumentEventFeature {\n    _syncedDocuments;\n    _pendingTextDocumentChanges;\n    constructor(client, syncedDocuments, pendingTextDocumentChanges) {\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, () => client.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), (data) => data, features_1.TextDocumentEventFeature.textDocumentFilter);\n        this._syncedDocuments = syncedDocuments;\n        this._pendingTextDocumentChanges = pendingTextDocumentChanges;\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\n            this.register({ id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\n        }\n    }\n    async callback(data) {\n        await super.callback(data);\n        this._pendingTextDocumentChanges.delete(data.uri.toString());\n    }\n    getTextDocument(data) {\n        return data;\n    }\n    notificationSent(textDocument, type, params) {\n        this._syncedDocuments.delete(textDocument.uri.toString());\n        super.notificationSent(textDocument, type, params);\n    }\n    unregister(id) {\n        const selector = this._selectors.get(id);\n        if (selector === undefined) {\n            return;\n        }\n        // The super call removed the selector from the map\n        // of selectors.\n        super.unregister(id);\n        const selectors = this._selectors.values();\n        this._syncedDocuments.forEach((textDocument) => {\n            if (vscode_1.languages.match(selector, textDocument) > 0 && !this._selectorFilter(selectors, textDocument) && !this._client.hasDedicatedTextSynchronizationFeature(textDocument)) {\n                const middleware = this._client.middleware;\n                const didClose = (textDocument) => {\n                    return this._client.sendNotification(this._type, this._createParams(textDocument));\n                };\n                this._syncedDocuments.delete(textDocument.uri.toString());\n                (middleware.didClose ? middleware.didClose(textDocument, didClose) : didClose(textDocument)).catch((error) => {\n                    this._client.error(`Sending document notification ${this._type.method} failed`, error);\n                });\n            }\n        });\n    }\n}\nexports.DidCloseTextDocumentFeature = DidCloseTextDocumentFeature;\nclass DidChangeTextDocumentFeature extends features_1.DynamicDocumentFeature {\n    _listener;\n    _changeData;\n    _onNotificationSent;\n    _onPendingChangeAdded;\n    _pendingTextDocumentChanges;\n    _syncKind;\n    constructor(client, pendingTextDocumentChanges) {\n        super(client);\n        this._changeData = new Map();\n        this._onNotificationSent = new vscode_1.EventEmitter();\n        this._onPendingChangeAdded = new vscode_1.EventEmitter();\n        this._pendingTextDocumentChanges = pendingTextDocumentChanges;\n        this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n    }\n    get onNotificationSent() {\n        return this._onNotificationSent.event;\n    }\n    get onPendingChangeAdded() {\n        return this._onPendingChangeAdded.event;\n    }\n    get syncKind() {\n        return this._syncKind;\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== undefined && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\n            });\n        }\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\n        }\n        this._changeData.set(data.id, {\n            syncKind: data.registerOptions.syncKind,\n            documentSelector: this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector),\n        });\n        this.updateSyncKind(data.registerOptions.syncKind);\n    }\n    *getDocumentSelectors() {\n        for (const data of this._changeData.values()) {\n            yield data.documentSelector;\n        }\n    }\n    async callback(event) {\n        // Text document changes are send for dirty changes as well. We don't\n        // have dirty / un-dirty events in the LSP so we ignore content changes\n        // with length zero.\n        if (event.contentChanges.length === 0) {\n            return;\n        }\n        // We need to capture the URI and version here since they might change on the text document\n        // until we reach did `didChange` call since the middleware support async execution.\n        const uri = event.document.uri;\n        const version = event.document.version;\n        const promises = [];\n        for (const changeData of this._changeData.values()) {\n            if (vscode_1.languages.match(changeData.documentSelector, event.document) > 0 && !this._client.hasDedicatedTextSynchronizationFeature(event.document)) {\n                const middleware = this._client.middleware;\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\n                    const didChange = async (event) => {\n                        const params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event, uri, version);\n                        await this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                        this.notificationSent(event.document, vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                    };\n                    promises.push(middleware.didChange ? middleware.didChange(event, event => didChange(event)) : didChange(event));\n                }\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n                    const didChange = async (event) => {\n                        const eventUri = event.document.uri.toString();\n                        this._pendingTextDocumentChanges.set(eventUri, event.document);\n                        this._onPendingChangeAdded.fire();\n                    };\n                    promises.push(middleware.didChange ? middleware.didChange(event, event => didChange(event)) : didChange(event));\n                }\n            }\n        }\n        return Promise.all(promises).then(undefined, (error) => {\n            this._client.error(`Sending document notification ${vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method} failed`, error);\n            throw error;\n        });\n    }\n    notificationSent(textDocument, type, params) {\n        this._onNotificationSent.fire({ textDocument, type, params });\n    }\n    unregister(id) {\n        this._changeData.delete(id);\n        if (this._changeData.size === 0) {\n            if (this._listener) {\n                this._listener.dispose();\n                this._listener = undefined;\n            }\n            this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n        }\n        else {\n            this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n            for (const changeData of this._changeData.values()) {\n                this.updateSyncKind(changeData.syncKind);\n                if (this._syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n                    break;\n                }\n            }\n        }\n    }\n    clear() {\n        this._pendingTextDocumentChanges.clear();\n        this._changeData.clear();\n        this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getPendingDocumentChanges(excludes) {\n        if (this._pendingTextDocumentChanges.size === 0) {\n            return [];\n        }\n        let result;\n        if (excludes.size === 0) {\n            result = Array.from(this._pendingTextDocumentChanges.values());\n            this._pendingTextDocumentChanges.clear();\n        }\n        else {\n            result = [];\n            for (const entry of this._pendingTextDocumentChanges) {\n                if (!excludes.has(entry[0])) {\n                    result.push(entry[1]);\n                    this._pendingTextDocumentChanges.delete(entry[0]);\n                }\n            }\n        }\n        return result;\n    }\n    getProvider(document) {\n        for (const changeData of this._changeData.values()) {\n            if (vscode_1.languages.match(changeData.documentSelector, document) > 0) {\n                return {\n                    send: (event) => {\n                        return this.callback(event);\n                    }\n                };\n            }\n        }\n        return undefined;\n    }\n    updateSyncKind(syncKind) {\n        if (this._syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n            return;\n        }\n        switch (syncKind) {\n            case vscode_languageserver_protocol_1.TextDocumentSyncKind.Full:\n                this._syncKind = syncKind;\n                break;\n            case vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental:\n                if (this._syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n                    this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental;\n                }\n                break;\n        }\n    }\n}\nexports.DidChangeTextDocumentFeature = DidChangeTextDocumentFeature;\nclass WillSaveFeature extends features_1.TextDocumentEventFeature {\n    constructor(client) {\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, () => client.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (event) => event.document, (selectors, willSaveEvent) => features_1.TextDocumentEventFeature.textDocumentFilter(selectors, willSaveEvent.document));\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        const value = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization');\n        value.willSave = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: { documentSelector: documentSelector }\n            });\n        }\n    }\n    getTextDocument(data) {\n        return data.document;\n    }\n}\nexports.WillSaveFeature = WillSaveFeature;\nclass WillSaveWaitUntilFeature extends features_1.DynamicDocumentFeature {\n    _listener;\n    _selectors;\n    constructor(client) {\n        super(client);\n        this._selectors = new Map();\n    }\n    getDocumentSelectors() {\n        return this._selectors.values();\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\n    }\n    fillClientCapabilities(capabilities) {\n        const value = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization');\n        value.willSaveWaitUntil = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: { documentSelector: documentSelector }\n            });\n        }\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\n        }\n        this._selectors.set(data.id, this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector));\n    }\n    callback(event) {\n        if (features_1.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(), event.document) && !this._client.hasDedicatedTextSynchronizationFeature(event.document)) {\n            const middleware = this._client.middleware;\n            const willSaveWaitUntil = (event) => {\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then(async (edits) => {\n                    const vEdits = await this._client.protocol2CodeConverter.asTextEdits(edits);\n                    return vEdits === undefined ? [] : vEdits;\n                });\n            };\n            event.waitUntil(middleware.willSaveWaitUntil\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\n                : willSaveWaitUntil(event));\n        }\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    clear() {\n        this._selectors.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n}\nexports.WillSaveWaitUntilFeature = WillSaveWaitUntilFeature;\nclass DidSaveTextDocumentFeature extends features_1.TextDocumentEventFeature {\n    _includeText;\n    constructor(client) {\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, () => client.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), (data) => data, features_1.TextDocumentEventFeature.textDocumentFilter);\n        this._includeText = false;\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').didSave = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\n            const saveOptions = typeof textDocumentSyncOptions.save === 'boolean'\n                ? { includeText: false }\n                : { includeText: !!textDocumentSyncOptions.save.includeText };\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, saveOptions)\n            });\n        }\n    }\n    register(data) {\n        this._includeText = !!data.registerOptions.includeText;\n        super.register(data);\n    }\n    getTextDocument(data) {\n        return data;\n    }\n}\nexports.DidSaveTextDocumentFeature = DidSaveTextDocumentFeature;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide ranges that can be edited together.\n *\n * @since 3.16.0\n */\nvar LinkedEditingRangeRequest;\n(function (LinkedEditingRangeRequest) {\n    LinkedEditingRangeRequest.method = 'textDocument/linkedEditingRange';\n    LinkedEditingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    LinkedEditingRangeRequest.type = new messages_1.ProtocolRequestType(LinkedEditingRangeRequest.method);\n    LinkedEditingRangeRequest.capabilities = messages_1.CM.create('textDocument.linkedEditingRange', 'linkedEditingRangeProvider');\n})(LinkedEditingRangeRequest || (exports.LinkedEditingRangeRequest = LinkedEditingRangeRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" preserve=\"true\"/>\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressType = exports.ProgressToken = exports.createMessageConnection = exports.NullLogger = exports.ConnectionOptions = exports.ConnectionStrategy = exports.AbstractMessageBuffer = exports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = exports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = exports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = exports.CancellationToken = exports.CancellationTokenSource = exports.Emitter = exports.Event = exports.Disposable = exports.LRUCache = exports.Touch = exports.LinkedMap = exports.ParameterStructures = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.ErrorCodes = exports.ResponseError = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType0 = exports.RequestType = exports.Message = exports.RAL = void 0;\nexports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.RequestCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy = exports.CancellationReceiverStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.TraceValue = exports.Trace = void 0;\nconst messages_1 = require(\"./messages\");\nObject.defineProperty(exports, \"Message\", { enumerable: true, get: function () { return messages_1.Message; } });\nObject.defineProperty(exports, \"RequestType\", { enumerable: true, get: function () { return messages_1.RequestType; } });\nObject.defineProperty(exports, \"RequestType0\", { enumerable: true, get: function () { return messages_1.RequestType0; } });\nObject.defineProperty(exports, \"RequestType1\", { enumerable: true, get: function () { return messages_1.RequestType1; } });\nObject.defineProperty(exports, \"RequestType2\", { enumerable: true, get: function () { return messages_1.RequestType2; } });\nObject.defineProperty(exports, \"RequestType3\", { enumerable: true, get: function () { return messages_1.RequestType3; } });\nObject.defineProperty(exports, \"RequestType4\", { enumerable: true, get: function () { return messages_1.RequestType4; } });\nObject.defineProperty(exports, \"RequestType5\", { enumerable: true, get: function () { return messages_1.RequestType5; } });\nObject.defineProperty(exports, \"RequestType6\", { enumerable: true, get: function () { return messages_1.RequestType6; } });\nObject.defineProperty(exports, \"RequestType7\", { enumerable: true, get: function () { return messages_1.RequestType7; } });\nObject.defineProperty(exports, \"RequestType8\", { enumerable: true, get: function () { return messages_1.RequestType8; } });\nObject.defineProperty(exports, \"RequestType9\", { enumerable: true, get: function () { return messages_1.RequestType9; } });\nObject.defineProperty(exports, \"ResponseError\", { enumerable: true, get: function () { return messages_1.ResponseError; } });\nObject.defineProperty(exports, \"ErrorCodes\", { enumerable: true, get: function () { return messages_1.ErrorCodes; } });\nObject.defineProperty(exports, \"NotificationType\", { enumerable: true, get: function () { return messages_1.NotificationType; } });\nObject.defineProperty(exports, \"NotificationType0\", { enumerable: true, get: function () { return messages_1.NotificationType0; } });\nObject.defineProperty(exports, \"NotificationType1\", { enumerable: true, get: function () { return messages_1.NotificationType1; } });\nObject.defineProperty(exports, \"NotificationType2\", { enumerable: true, get: function () { return messages_1.NotificationType2; } });\nObject.defineProperty(exports, \"NotificationType3\", { enumerable: true, get: function () { return messages_1.NotificationType3; } });\nObject.defineProperty(exports, \"NotificationType4\", { enumerable: true, get: function () { return messages_1.NotificationType4; } });\nObject.defineProperty(exports, \"NotificationType5\", { enumerable: true, get: function () { return messages_1.NotificationType5; } });\nObject.defineProperty(exports, \"NotificationType6\", { enumerable: true, get: function () { return messages_1.NotificationType6; } });\nObject.defineProperty(exports, \"NotificationType7\", { enumerable: true, get: function () { return messages_1.NotificationType7; } });\nObject.defineProperty(exports, \"NotificationType8\", { enumerable: true, get: function () { return messages_1.NotificationType8; } });\nObject.defineProperty(exports, \"NotificationType9\", { enumerable: true, get: function () { return messages_1.NotificationType9; } });\nObject.defineProperty(exports, \"ParameterStructures\", { enumerable: true, get: function () { return messages_1.ParameterStructures; } });\nconst linkedMap_1 = require(\"./linkedMap\");\nObject.defineProperty(exports, \"LinkedMap\", { enumerable: true, get: function () { return linkedMap_1.LinkedMap; } });\nObject.defineProperty(exports, \"LRUCache\", { enumerable: true, get: function () { return linkedMap_1.LRUCache; } });\nObject.defineProperty(exports, \"Touch\", { enumerable: true, get: function () { return linkedMap_1.Touch; } });\nconst disposable_1 = require(\"./disposable\");\nObject.defineProperty(exports, \"Disposable\", { enumerable: true, get: function () { return disposable_1.Disposable; } });\nconst events_1 = require(\"./events\");\nObject.defineProperty(exports, \"Event\", { enumerable: true, get: function () { return events_1.Event; } });\nObject.defineProperty(exports, \"Emitter\", { enumerable: true, get: function () { return events_1.Emitter; } });\nconst cancellation_1 = require(\"./cancellation\");\nObject.defineProperty(exports, \"CancellationTokenSource\", { enumerable: true, get: function () { return cancellation_1.CancellationTokenSource; } });\nObject.defineProperty(exports, \"CancellationToken\", { enumerable: true, get: function () { return cancellation_1.CancellationToken; } });\nconst sharedArrayCancellation_1 = require(\"./sharedArrayCancellation\");\nObject.defineProperty(exports, \"SharedArraySenderStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArraySenderStrategy; } });\nObject.defineProperty(exports, \"SharedArrayReceiverStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArrayReceiverStrategy; } });\nconst messageReader_1 = require(\"./messageReader\");\nObject.defineProperty(exports, \"MessageReader\", { enumerable: true, get: function () { return messageReader_1.MessageReader; } });\nObject.defineProperty(exports, \"AbstractMessageReader\", { enumerable: true, get: function () { return messageReader_1.AbstractMessageReader; } });\nObject.defineProperty(exports, \"ReadableStreamMessageReader\", { enumerable: true, get: function () { return messageReader_1.ReadableStreamMessageReader; } });\nconst messageWriter_1 = require(\"./messageWriter\");\nObject.defineProperty(exports, \"MessageWriter\", { enumerable: true, get: function () { return messageWriter_1.MessageWriter; } });\nObject.defineProperty(exports, \"AbstractMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.AbstractMessageWriter; } });\nObject.defineProperty(exports, \"WriteableStreamMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.WriteableStreamMessageWriter; } });\nconst messageBuffer_1 = require(\"./messageBuffer\");\nObject.defineProperty(exports, \"AbstractMessageBuffer\", { enumerable: true, get: function () { return messageBuffer_1.AbstractMessageBuffer; } });\nconst connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"ConnectionStrategy\", { enumerable: true, get: function () { return connection_1.ConnectionStrategy; } });\nObject.defineProperty(exports, \"ConnectionOptions\", { enumerable: true, get: function () { return connection_1.ConnectionOptions; } });\nObject.defineProperty(exports, \"NullLogger\", { enumerable: true, get: function () { return connection_1.NullLogger; } });\nObject.defineProperty(exports, \"createMessageConnection\", { enumerable: true, get: function () { return connection_1.createMessageConnection; } });\nObject.defineProperty(exports, \"ProgressToken\", { enumerable: true, get: function () { return connection_1.ProgressToken; } });\nObject.defineProperty(exports, \"ProgressType\", { enumerable: true, get: function () { return connection_1.ProgressType; } });\nObject.defineProperty(exports, \"Trace\", { enumerable: true, get: function () { return connection_1.Trace; } });\nObject.defineProperty(exports, \"TraceValue\", { enumerable: true, get: function () { return connection_1.TraceValue; } });\nObject.defineProperty(exports, \"TraceFormat\", { enumerable: true, get: function () { return connection_1.TraceFormat; } });\nObject.defineProperty(exports, \"SetTraceNotification\", { enumerable: true, get: function () { return connection_1.SetTraceNotification; } });\nObject.defineProperty(exports, \"LogTraceNotification\", { enumerable: true, get: function () { return connection_1.LogTraceNotification; } });\nObject.defineProperty(exports, \"ConnectionErrors\", { enumerable: true, get: function () { return connection_1.ConnectionErrors; } });\nObject.defineProperty(exports, \"ConnectionError\", { enumerable: true, get: function () { return connection_1.ConnectionError; } });\nObject.defineProperty(exports, \"CancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.CancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"IdCancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.IdCancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"RequestCancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.RequestCancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"CancellationSenderStrategy\", { enumerable: true, get: function () { return connection_1.CancellationSenderStrategy; } });\nObject.defineProperty(exports, \"CancellationStrategy\", { enumerable: true, get: function () { return connection_1.CancellationStrategy; } });\nObject.defineProperty(exports, \"MessageStrategy\", { enumerable: true, get: function () { return connection_1.MessageStrategy; } });\nObject.defineProperty(exports, \"TraceValues\", { enumerable: true, get: function () { return connection_1.TraceValues; } });\nconst ral_1 = __importDefault(require(\"./ral\"));\nexports.RAL = ral_1.default;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceFeature = exports.TextDocumentLanguageFeature = exports.TextDocumentEventFeature = exports.DynamicDocumentFeature = exports.DynamicFeature = exports.StaticFeature = exports.LSPCancellationError = void 0;\nexports.ensure = ensure;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = __importStar(require(\"./utils/is\"));\nconst UUID = __importStar(require(\"./utils/uuid\"));\nclass LSPCancellationError extends vscode_1.CancellationError {\n    data;\n    constructor(data) {\n        super();\n        this.data = data;\n    }\n}\nexports.LSPCancellationError = LSPCancellationError;\nfunction ensure(target, key) {\n    if (target[key] === undefined) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar StaticFeature;\n(function (StaticFeature) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null &&\n            Is.func(candidate.fillClientCapabilities) && Is.func(candidate.initialize) && Is.func(candidate.getState) && Is.func(candidate.clear) &&\n            (candidate.fillInitializeParams === undefined || Is.func(candidate.fillInitializeParams));\n    }\n    StaticFeature.is = is;\n})(StaticFeature || (exports.StaticFeature = StaticFeature = {}));\nvar DynamicFeature;\n(function (DynamicFeature) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null &&\n            Is.func(candidate.fillClientCapabilities) && Is.func(candidate.initialize) && Is.func(candidate.getState) && Is.func(candidate.clear) &&\n            (candidate.fillInitializeParams === undefined || Is.func(candidate.fillInitializeParams)) && Is.func(candidate.register) &&\n            Is.func(candidate.unregister) && candidate.registrationType !== undefined;\n    }\n    DynamicFeature.is = is;\n})(DynamicFeature || (exports.DynamicFeature = DynamicFeature = {}));\n/**\n * An abstract dynamic feature implementation that operates on documents (e.g. text\n * documents or notebooks).\n */\nclass DynamicDocumentFeature {\n    _client;\n    constructor(client) {\n        this._client = client;\n    }\n    /**\n     * Returns the state the feature is in.\n     */\n    getState() {\n        const selectors = this.getDocumentSelectors();\n        let count = 0;\n        for (const selector of selectors) {\n            count++;\n            for (const document of vscode_1.workspace.textDocuments) {\n                if (vscode_1.languages.match(selector, document) > 0) {\n                    return { kind: 'document', id: this.registrationType.method, registrations: true, matches: true };\n                }\n            }\n        }\n        const registrations = count > 0;\n        return { kind: 'document', id: this.registrationType.method, registrations, matches: false };\n    }\n}\nexports.DynamicDocumentFeature = DynamicDocumentFeature;\n/**\n * An abstract base class to implement features that react to events\n * emitted from text documents.\n */\nclass TextDocumentEventFeature extends DynamicDocumentFeature {\n    _event;\n    _type;\n    _middleware;\n    _createParams;\n    _textDocument;\n    _selectorFilter;\n    _listener;\n    _selectors;\n    _onNotificationSent;\n    static textDocumentFilter(selectors, textDocument) {\n        for (const selector of selectors) {\n            if (vscode_1.languages.match(selector, textDocument) > 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n    constructor(client, event, type, middleware, createParams, textDocument, selectorFilter) {\n        super(client);\n        this._event = event;\n        this._type = type;\n        this._middleware = middleware;\n        this._createParams = createParams;\n        this._textDocument = textDocument;\n        this._selectorFilter = selectorFilter;\n        this._selectors = new Map();\n        this._onNotificationSent = new vscode_1.EventEmitter();\n    }\n    getStateInfo() {\n        return [this._selectors.values(), false];\n    }\n    getDocumentSelectors() {\n        return this._selectors.values();\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = this._event((data) => {\n                this.callback(data).catch((error) => {\n                    this._client.error(`Sending document notification ${this._type.method} failed.`, error);\n                });\n            });\n        }\n        this._selectors.set(data.id, this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector));\n    }\n    async callback(data) {\n        const doSend = async (data) => {\n            const params = this._createParams(data);\n            await this._client.sendNotification(this._type, params);\n            this.notificationSent(this.getTextDocument(data), this._type, params);\n        };\n        if (this.matches(data)) {\n            const middleware = this._middleware();\n            return middleware ? middleware(data, (data) => doSend(data)) : doSend(data);\n        }\n    }\n    matches(data) {\n        if (this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(data))) {\n            return false;\n        }\n        return !this._selectorFilter || this._selectorFilter(this._selectors.values(), data);\n    }\n    get onNotificationSent() {\n        return this._onNotificationSent.event;\n    }\n    notificationSent(textDocument, type, params) {\n        this._onNotificationSent.fire({ textDocument, type, params });\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    clear() {\n        this._selectors.clear();\n        this._onNotificationSent.dispose();\n        this._onNotificationSent = new vscode_1.EventEmitter();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getProvider(document) {\n        for (const selector of this._selectors.values()) {\n            if (vscode_1.languages.match(selector, document) > 0) {\n                return {\n                    send: (data) => {\n                        return this.callback(data);\n                    }\n                };\n            }\n        }\n        return undefined;\n    }\n}\nexports.TextDocumentEventFeature = TextDocumentEventFeature;\n/**\n * A abstract feature implementation that registers language providers\n * for text documents using a given document selector.\n */\nclass TextDocumentLanguageFeature extends DynamicDocumentFeature {\n    _registrationType;\n    _registrations;\n    constructor(client, registrationType) {\n        super(client);\n        this._registrationType = registrationType;\n        this._registrations = new Map();\n    }\n    *getDocumentSelectors() {\n        for (const registration of this._registrations.values()) {\n            const selector = registration.data.registerOptions.documentSelector;\n            if (selector === null) {\n                continue;\n            }\n            yield this._client.protocol2CodeConverter.asDocumentSelector(selector);\n        }\n    }\n    get registrationType() {\n        return this._registrationType;\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        const registration = this.registerLanguageProvider(data.registerOptions, data.id);\n        this._registrations.set(data.id, { disposable: registration[0], data, provider: registration[1] });\n    }\n    unregister(id) {\n        const registration = this._registrations.get(id);\n        if (registration !== undefined) {\n            this._registrations.delete(id);\n            registration.disposable.dispose();\n        }\n    }\n    clear() {\n        this._registrations.forEach((value) => {\n            value.disposable.dispose();\n        });\n        this._registrations.clear();\n    }\n    getRegistration(documentSelector, capability) {\n        if (!capability) {\n            return [undefined, undefined];\n        }\n        else if (vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)) {\n            const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\n            const selector = capability.documentSelector ?? documentSelector;\n            if (selector) {\n                return [id, Object.assign({}, capability, { documentSelector: selector })];\n            }\n        }\n        else if (Is.boolean(capability) && capability === true || vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)) {\n            if (!documentSelector) {\n                return [undefined, undefined];\n            }\n            const options = (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\n            return [UUID.generateUuid(), options];\n        }\n        return [undefined, undefined];\n    }\n    getRegistrationOptions(documentSelector, capability) {\n        if (!documentSelector || !capability) {\n            return undefined;\n        }\n        return (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\n    }\n    getProvider(textDocument) {\n        for (const registration of this._registrations.values()) {\n            const selector = registration.data.registerOptions.documentSelector;\n            if (selector !== null && vscode_1.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(selector), textDocument) > 0) {\n                return registration.provider;\n            }\n        }\n        return undefined;\n    }\n    getAllProviders() {\n        const result = [];\n        for (const item of this._registrations.values()) {\n            result.push(item.provider);\n        }\n        return result;\n    }\n}\nexports.TextDocumentLanguageFeature = TextDocumentLanguageFeature;\nclass WorkspaceFeature {\n    _client;\n    _registrationType;\n    _registrations;\n    constructor(client, registrationType) {\n        this._client = client;\n        this._registrationType = registrationType;\n        this._registrations = new Map();\n    }\n    getState() {\n        const registrations = this._registrations.size > 0;\n        return { kind: 'workspace', id: this._registrationType.method, registrations };\n    }\n    get registrationType() {\n        return this._registrationType;\n    }\n    register(data) {\n        const registration = this.registerLanguageProvider(data.registerOptions);\n        this._registrations.set(data.id, { disposable: registration[0], provider: registration[1] });\n    }\n    unregister(id) {\n        const registration = this._registrations.get(id);\n        if (registration !== undefined) {\n            this._registrations.delete(id);\n            registration.disposable.dispose();\n        }\n    }\n    clear() {\n        this._registrations.forEach((registration) => {\n            registration.disposable.dispose();\n        });\n        this._registrations.clear();\n    }\n    getProviders() {\n        const result = [];\n        for (const registration of this._registrations.values()) {\n            result.push(registration.provider);\n        }\n        return result;\n    }\n}\nexports.WorkspaceFeature = WorkspaceFeature;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, ExtensionContext, Uri, l10n } from 'vscode';\nimport { LanguageClientOptions } from 'vscode-languageclient';\nimport { startClient, LanguageClientConstructor, AsyncDisposable } from '../htmlClient';\nimport { LanguageClient } from 'vscode-languageclient/browser';\n\nlet client: AsyncDisposable | undefined;\n\n// this method is called when vs code is activated\nexport async function activate(context: ExtensionContext) {\n\tconst serverMain = Uri.joinPath(context.extensionUri, 'server/dist/browser/htmlServerMain.js');\n\ttry {\n\t\tconst worker = new Worker(serverMain.toString());\n\t\tworker.postMessage({ i10lLocation: l10n.uri?.toString(false) ?? '' });\n\n\t\tconst newLanguageClient: LanguageClientConstructor = (id: string, name: string, clientOptions: LanguageClientOptions) => {\n\t\t\treturn new LanguageClient(id, name, worker, clientOptions);\n\t\t};\n\n\t\tconst timer = {\n\t\t\tsetTimeout(callback: (...args: any[]) => void, ms: number, ...args: any[]): Disposable {\n\t\t\t\tconst handle = setTimeout(callback, ms, ...args);\n\t\t\t\treturn { dispose: () => clearTimeout(handle) };\n\t\t\t}\n\t\t};\n\n\t\tclient = await startClient(context, newLanguageClient, { TextDecoder, timer });\n\n\t} catch (e) {\n\t\tconsole.log(e);\n\t}\n}\n\nexport async function deactivate(): Promise<void> {\n\tif (client) {\n\t\tawait client.dispose();\n\t\tclient = undefined;\n\t}\n}\n\n"],"names":["ownKeys","__createBinding","this","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","getOwnPropertyNames","ar","prototype","hasOwnProperty","call","length","mod","result","i","exports","code","ProtocolInlayHint","InlayHint","data","constructor","position","label","kind","super","DocumentOnTypeFormattingFeature","DocumentRangeFormattingFeature","DocumentFormattingFeature","vscode_1","vscode_languageserver_protocol_1","UUID","features_1","FileFormattingOptions","fromConfiguration","document","filesConfig","workspace","getConfiguration","trimTrailingWhitespace","trimFinalNewlines","insertFinalNewline","TextDocumentLanguageFeature","client","DocumentFormattingRequest","type","fillClientCapabilities","capabilities","ensure","dynamicRegistration","initialize","documentSelector","options","getRegistrationOptions","documentFormattingProvider","register","id","generateUuid","registerOptions","registerLanguageProvider","selector","provider","provideDocumentFormattingEdits","token","_client","params","textDocument","code2ProtocolConverter","asTextDocumentIdentifier","asFormattingOptions","sendRequest","then","isCancellationRequested","protocol2CodeConverter","asTextEdits","error","handleFailedRequest","middleware","languages","registerDocumentFormattingEditProvider","asDocumentSelector","DocumentRangeFormattingRequest","capability","rangesSupport","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","range","asRange","provideDocumentRangesFormattingEdits","ranges","asRanges","DocumentRangesFormattingRequest","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","provideOnTypeFormattingEdits","ch","asPosition","moreTriggerCharacter","registerOnTypeFormattingEditProvider","firstTriggerCharacter","TypeDefinitionFeature","TypeDefinitionRequest","typeDefinitionSupport","linkSupport","getRegistration","typeDefinitionProvider","provideTypeDefinition","asTextDocumentPositionParams","asDefinitionResult","registerProvider","registerTypeDefinitionProvider","ProgressFeature","progressPart_1","activeParts","Set","getState","WorkDoneProgressCreateRequest","method","registrations","size","target","key","workDoneProgress","deleteHandler","part","delete","onRequest","add","ProgressPart","clear","done","TypeHierarchyFeature","TypeHierarchyProvider","prepareTypeHierarchy","TypeHierarchyPrepareRequest","asTypeHierarchyItems","provideTypeHierarchySupertypes","item","asTypeHierarchyItem","TypeHierarchySupertypesRequest","provideTypeHierarchySubtypes","TypeHierarchySubtypesRequest","typeHierarchyProvider","registerTypeHierarchyProvider","__exportStar","p","__importDefault","BrowserMessageWriter","BrowserMessageReader","createMessageConnection","reader","writer","logger","api_1","NullLogger","ConnectionStrategy","is","connectionStrategy","default","install","AbstractMessageReader","_onData","_messageListener","port","Emitter","event","fire","addEventListener","fireError","onmessage","listen","callback","AbstractMessageWriter","errorCount","write","msg","postMessage","Promise","resolve","handleError","reject","end","RenameFeature","Is","RenameRequest","rename","prepareSupport","prepareSupportDefaultBehavior","PrepareSupportDefaultBehavior","Identifier","honorsChangeAnnotations","renameProvider","boolean","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","Range","isDefaultBehavior","defaultBehavior","Error","placeholder","message","registerRenameProvider","candidate","expand","str","slice","expand_","replace","slashPattern","escSlash","openPattern","escOpen","closePattern","escClose","commaPattern","escComma","periodPattern","escPeriod","escapeBraces","map","unescapeBraces","balanced_match_1","Math","random","escSlashPattern","RegExp","escOpenPattern","escClosePattern","escCommaPattern","escPeriodPattern","numeric","isNaN","charCodeAt","parseInt","parseCommaParts","parts","balanced","split","pre","body","post","postParts","shift","push","apply","embrace","isPadded","el","test","lte","y","gte","isTop","expansions","expansion","isNumericSequence","isAlphaSequence","isSequence","isOptions","indexOf","match","n","N","x","width","max","incr","abs","pad","some","c","String","fromCharCode","need","z","Array","join","j","DocumentLinkFeature","DocumentLinkRequest","documentLinkCapabilities","tooltipSupport","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","resolveProvider","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ProposedFeatures","LanguageClient","BaseLanguageClient","ShutdownMode","MessageTransports","SuspendMode","State","CloseAction","ErrorAction","RevealOutputChannelOn","c2p","p2c","async_1","diagnostic_1","notebook_1","configuration_1","textSynchronization_1","completion_1","hover_1","definition_1","signatureHelp_1","documentHighlight_1","documentSymbol_1","workspaceSymbol_1","reference_1","typeDefinition_1","implementation_1","colorProvider_1","codeAction_1","codeLens_1","formatting_1","rename_1","documentLink_1","executeCommand_1","foldingRange_1","declaration_1","selectionRange_1","callHierarchy_1","semanticTokens_1","linkedEditingRange_1","typeHierarchy_1","inlineValue_1","inlayHint_1","workspaceFolder_1","fileOperations_1","inlineCompletion_1","textDocumentContent_1","fileSystemWatcher_1","progress_1","ResolvedClientOptions","ClientState","sanitizeIsTrusted","isTrusted","stringArray","enabledCommands","DefaultErrorHandler","maxRestartCount","restarts","_error","_message","count","action","Continue","Shutdown","closed","Date","now","Restart","DoNotRestart","name","MessageReader","MessageWriter","Tabs","open","_onOpen","_onClose","disposable","EventEmitter","fillTabResources","window","tabGroups","onDidChangeTabs","opened","oldTabs","currentTabs","tab","values","has","toFire","Uri","parse","dispose","onClose","onOpen","isActive","activeTextEditor","uri","isVisible","scheme","NotebookDocumentSyncFeature","CellScheme","notebookDocuments","notebook","toString","getCells","find","cell","getTabResources","strings","uris","seen","group","all","tabs","input","TabInputText","TabInputTextDiff","modified","TabInputCustom","TabInputNotebook","_id","_name","_clientOptions","_state","_onStart","_onStop","_connection","_idleInterval","_ignoredRegistrations","_listeners","_disposed","_notificationHandlers","_notificationDisposables","_pendingNotificationHandlers","_requestHandlers","_requestDisposables","_pendingRequestHandlers","_progressHandlers","_pendingProgressHandlers","_progressDisposables","_initializeResult","_outputChannel","_disposeOutputChannel","_traceOutputChannel","_traceLogLevel","_capabilities","_diagnostics","_syncedDocuments","_didChangeTextDocumentFeature","_inFlightOpenNotifications","_pendingChangeSemaphore","_pendingChangeDelayer","_didOpenTextDocumentFeature","_fileEvents","_fileEventDelayer","_telemetryEmitter","_stateChangeEmitter","_trace","_traceFormat","TraceFormat","Text","_tracer","_c2p","_p2c","_tabsModel","clientOptions","markdown","supportHtml","supportThemeIcons","synchronize","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","progressOnInitialization","errorHandler","createDefaultErrorHandler","connectionOptions","uriConverters","workspaceFolder","diagnosticPullOptions","onChange","onSave","notebookDocumentOptions","textSynchronization","createTextSynchronizationOptions","Initial","Map","outputChannel","logLevel","LogLevel","Info","traceOutputChannel","Semaphore","Delayer","Trace","Off","log","messageOrDataObject","string","trace","traceObject","createConverter","code2Protocol","protocol2Code","registerBuiltinFeatures","delayOpenNotifications","tabsModel","onTelemetry","onDidChangeState","createOutputChannel","diagnostics","state","getPublicState","$state","oldState","newState","Starting","Running","StartFailed","Stopped","initializeResult","Stopping","ResponseError","ErrorCodes","ConnectionInactive","connection","$start","param","sendPendingOpenNotifications","syncKind","TextDocumentSyncKind","Full","sendPendingFullTextDocumentChanges","CancellationToken","LSPErrorCodes","RequestCancelled","_sendRequest","handler","set","activeConnection","sendNotification","needsPendingFullTextDocumentSync","openNotification","documentToClose","DidOpenTextDocumentNotification","DidCloseTextDocumentNotification","_sendNotification","bind","onNotification","sendProgress","onProgress","handleWorkDoneProgress","realHandler","WorkDoneProgress","setTrace","traceFormat","data2String","responseError","stack","showNotification","getLogMessage","showNotificationMessage","MessageType","warn","Warn","Warning","info","debug","Debug","JSON","stringify","showErrorMessage","showWarningMessage","showInformationMessage","selection","show","needsStart","needsStop","isRunning","start","promise","createOnStartPromise","createDiagnosticCollection","createConnection","LogMessageNotification","appendLine","ShowMessageNotification","ShowMessageRequest","messageFunc","actions","TelemetryEventNotification","ShowDocumentRequest","async","showDocument","asUri","external","success","env","openExternal","takeFocus","preserveFocus","showTextDocument","_resolve","_reject","refreshTrace","initOption","rootPath","workspaceFolders","fsPath","_clientGetRootPath","initParams","processId","clientInfo","appName","version","locale","getLocale","rootUri","file","computeClientCapabilities","func","fillInitializeParams","doInitialize","workDoneToken","cancel","positionEncoding","PositionEncodingKind","UTF16","textDocumentSyncOptions","number","textDocumentSync","None","openClose","change","save","includeText","assign","resolvedTextDocumentSync","PublishDiagnosticsNotification","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookLogLevelChanged","hookConfigurationChanged","initializeFeatures","stop","retry","title","folders","folder","timeout","shutdown","Stop","mode","cleanUp","tp","RAL","timer","setTimeout","exit","race","finally","cleanUpChannel","disposables","splice","feature","from","_features","entries","entry","reverse","notifyFileEvent","didChangeWatchedFile","trigger","fileEvents","DidChangeWatchedFilesNotification","changes","workSpaceMiddleware","catch","lock","getPendingDocumentChanges","asChangeTextDocumentParams","DidChangeTextDocumentNotification","notificationSent","triggerPendingChangeDelivery","_diagnosticQueue","_diagnosticQueueState","tokenSource","triggerDiagnosticQueue","setImmediate","workDiagnosticQueue","next","CancellationTokenSource","asDiagnostics","converted","setDiagnostics","language","transports","createMessageTransports","output","closeHandler","ConsoleLogger","createProtocolConnection","onError","hasPendingResponse","tracer","sendNotificationOrTraceOptions","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","handleConnectionError","handleConnectionClosed","handlerResult","handled","onDidChangeConfiguration","onDidChangeLogLevel","level","config","Messages","traceConfig","fromString","watchers","array","_dynamicFeatures","registerRaw","registerFeatures","features","registerFeature","DynamicFeature","registrationType","getFeature","request","hasDedicatedTextSynchronizationFeature","NotebookDocumentSyncRegistrationType","handles","pendingFullTextDocumentChanges","ConfigurationFeature","DidOpenTextDocumentFeature","DidChangeTextDocumentFeature","onPendingChangeAdded","WillSaveFeature","WillSaveWaitUntilFeature","DidSaveTextDocumentFeature","DidCloseTextDocumentFeature","FileSystemWatcherFeature","CompletionItemFeature","HoverFeature","SignatureHelpFeature","DefinitionFeature","ReferencesFeature","DocumentHighlightFeature","DocumentSymbolFeature","WorkspaceSymbolFeature","CodeActionFeature","CodeLensFeature","ExecuteCommandFeature","SyncConfigurationFeature","ImplementationFeature","ColorProviderFeature","WorkspaceFoldersFeature","FoldingRangeFeature","DeclarationFeature","SelectionRangeFeature","CallHierarchyFeature","SemanticTokensFeature","LinkedEditingFeature","DidCreateFilesFeature","DidRenameFilesFeature","DidDeleteFilesFeature","WillCreateFilesFeature","WillRenameFilesFeature","WillDeleteFilesFeature","InlineValueFeature","InlayHintsFeature","DiagnosticFeature","registerProposedFeatures","createAll","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Create","Rename","Delete","failureHandling","FailureHandlingKind","TextOnlyTransactional","normalizesLineEndings","changeAnnotationSupport","groupsOnLabel","metadataSupport","snippetEditSupport","relatedInformation","versionSupport","tagSupport","valueSet","DiagnosticTag","Unnecessary","Deprecated","codeDescriptionSupport","dataSupport","relativePatternSupport","windowCapabilities","messageActionItem","additionalPropertiesSupport","support","generalCapabilities","staleRequestSupport","retryOnContentModified","RequestsToCancelOnContentModified","regularExpressions","engine","parser","positionEncodings","allowedTags","preInitialize","handleRegisterCapability","nextParams","doRegisterCapability","registration","err","handleUnregisterCapability","doUnregisterCapability","unregistration","unregisterations","unregister","handleApplyEdit","resultOrError","doHandleApplyWorkspaceEdit","workspaceEditLock","edit","openTextDocuments","textDocuments","forEach","versionMismatch","TextDocumentEdit","changeUri","applied","asPromise","isRefactoring","metadata","static","SemanticTokensRequest","SemanticTokensRangeRequest","SemanticTokensDeltaRequest","CompletionResolveRequest","CodeLensResolveRequest","CodeActionResolveRequest","InlayHintResolveRequest","WorkspaceSymbolResolveRequest","defaultValue","throwOnCancel","PendingResponseRejected","ServerCancelled","LSPCancellationError","CancellationError","ContentModified","CancellableResolveCalls","serverOptions","_encoding","console","InlineCompletionItemFeature","TextDocumentContentFeature","InlineValueRefreshRequest","InlineValueRequest","messages_1","messageDirection","MessageDirection","clientToServer","ProtocolRequestType","CM","serverToClient","ProtocolRequestType0","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","_provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","MessageBuffer","AbstractMessageBuffer","Uint8Array","asciiDecoder","encoding","TextDecoder","emptyBuffer","TextEncoder","encode","decode","asNative","buffer","allocNative","ReadableStreamWrapper","socket","arrayBuffer","listener","Disposable","removeEventListener","onEnd","onData","WritableStreamWrapper","send","close","_textEncoder","_ril","freeze","messageBuffer","applicationJson","encoder","charset","decoder","stream","asReadableStream","asWritableStream","ms","args","handle","clearTimeout","setInterval","clearInterval","RIL","isArray","thenable","Number","every","elem","typedArray","check","resolved","WorkspaceSymbol","SymbolInformation","hasRange","containerName","locationOrUri","Location","module","require","vscode","SemanticTokensRegistrationType","tokenTypes","SemanticTokenTypes","namespace","class","enum","interface","struct","typeParameter","parameter","variable","property","enumMember","function","macro","keyword","comment","regexp","operator","decorator","tokenModifiers","SemanticTokenModifiers","declaration","definition","readonly","deprecated","abstract","modification","documentation","defaultLibrary","formats","TokenFormat","Relative","requests","full","delta","multilineTokenSupport","overlappingTokenSupport","serverCancelSupport","augmentsSyntaxTokens","refreshSupport","SemanticTokensRefreshRequest","getAllProviders","onDidChangeSemanticTokensEmitter","semanticTokensProvider","fullProvider","hasEditProvider","eventEmitter","documentProvider","onDidChangeSemanticTokens","provideDocumentSemanticTokens","asSemanticTokens","provideDocumentSemanticTokensEdits","previousResultId","SemanticTokens","asSemanticTokensEdits","rangeProvider","provideDocumentRangeSemanticTokens","legend","asSemanticTokensLegend","registerDocumentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","ProtocolCodeLens","CodeLens","ReadableStreamMessageReader","ral_1","events_1","semaphore_1","ResolvedMessageReaderOptions","onPartialMessage","errorEmitter","closeEmitter","partialMessageEmitter","asError","fireClose","firePartialMessage","fromOptions","contentDecoder","contentDecoders","contentTypeDecoder","contentTypeDecoders","readable","nextMessageLength","messageToken","partialMessageTimer","_partialMessageTimeout","readSemaphore","partialMessageTimeout","append","headers","tryReadHeaders","contentLength","fromEntries","tryReadBody","setPartialMessageTimer","clearPartialMessageTimer","bytes","waitingTime","ProtocolCallHierarchyItem","CallHierarchyItem","detail","selectionRange","CodeActionRequest","cap","isPreferredSupport","disabledSupport","resolveSupport","properties","codeActionLiteralSupport","codeActionKind","CodeActionKind","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorMove","RefactorRewrite","Source","SourceOrganizeImports","Notebook","documentationSupport","CodeActionTag","LLMGenerated","codeActionProvider","provideCodeActions","context","_provideCodeActions","asCodeActionContextSync","asCodeActionResult","resolveCodeAction","asCodeActionSync","asCodeAction","registerCodeActionsProvider","getMetadata","codeActionKinds","providedCodeActionKinds","asCodeActionKinds","asCodeActionDocumentations","browser_1","ImplementationRequest","WriteableStreamMessageWriter","ResolvedMessageWriterOptions","contentTypeEncoder","contentEncoder","writeSemaphore","byteLength","doWrite","proto","LinkedEditingRangeRequest","linkedEditingRangeProvider","provideLinkedEditingRanges","provideLinkedEditing","asLinkedEditingRanges","provideLinkedEditingRange","registerLinkedEditingRangeProvider","DiagnosticPullMode","vsdiag","InlineCompletionRequest","inlineCompletionProvider","provideInlineCompletionItems","asInlineCompletionParams","asInlineCompletionResult","registerInlineCompletionItemProvider","MonikerRequest","MonikerKind","UniquenessLevel","project","global","$import","$export","local","_commands","ExecuteCommandRequest","executeCommandProvider","executeCommand","command","arguments","commands","registerCommand","FoldingRangeRequest","rangeLimit","lineFoldingOnly","foldingRangeKind","FoldingRangeKind","Comment","Imports","Region","foldingRange","collapsedText","FoldingRangeRefreshRequest","onDidChangeFoldingRange","foldingRangeProvider","onDidChangeFoldingRanges","provideFoldingRanges","_","requestParams","asFoldingRanges","registerFoldingRangeProvider","ProtocolCodeAction","CodeAction","DidChangeWorkspaceFoldersNotification","WorkspaceFoldersRequest","ProtocolNotificationType","a","b","ma","maybeMatch","mb","r","reg","begs","beg","left","right","ai","bi","pop","unescape","escape","AST","Minimatch","makeRe","braceExpand","defaults","filter","GLOBSTAR","sep","minimatch","brace_expansion_1","assert_valid_pattern_js_1","ast_js_1","escape_js_1","unescape_js_1","pattern","assertValidPattern","nocomment","charAt","starDotExtRE","starDotExtTest","ext","f","startsWith","endsWith","starDotExtTestDot","starDotExtTestNocase","toLowerCase","starDotExtTestNocaseDot","starDotStarRE","starDotStarTest","includes","starDotStarTestDot","dotStarRE","dotStarTest","starRE","starTest","starTestDot","qmarksRE","qmarksTestNocase","$0","noext","qmarksTestNoExt","qmarksTestNocaseDot","qmarksTestNoExtDot","qmarksTestDot","qmarksTest","len","defaultPlatform","process","__MINIMATCH_TESTING_PLATFORM__","Symbol","def","keys","orig","parent","fromGlob","s","list","nobrace","mm","nonull","globMagic","windowsPathsNoEscape","nonegate","negate","empty","preserveMultipleSlashes","partial","globSet","globParts","nocase","isWindows","platform","windowsNoMagicRoot","allowWindowsEscape","make","hasMagic","magicalBraces","parseNegate","rawGlobParts","slashSplit","preprocess","__","isUNC","isDrive","ss","noglobstar","optimizationLevel","firstPhasePreProcess","secondPhasePreProcess","levelOneOptimize","adjascentGlobstarOptimize","gs","reduce","prev","levelTwoFileOptimize","didSomething","dd","gss","p2","other","splin","matched","partsMatch","emptyGSMatch","which","dot","negateOffset","matchOne","fileDrive","fileUNC","patternDrive","fdi","pdi","fd","pd","fi","pi","fl","pl","fr","pr","swallowee","hit","fastTest","re","toMMPattern","Reflect","twoStar","qmark","flags","pp","_src","ex","ff","filename","matchBase","flipNegate","ast_js_2","escape_js_2","unescape_js_2","connection_1","lspReservedErrorRangeStart","RequestFailed","lspReservedErrorRangeEnd","SupportedCompletionItemKinds","CompletionItemKind","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","Color","File","Reference","Folder","EnumMember","Constant","Struct","Event","Operator","TypeParameter","labelDetailsSupport","CompletionRequest","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","CompletionItemTag","insertReplaceSupport","insertTextModeSupport","InsertTextMode","asIs","adjustIndentation","insertTextMode","completionItemKind","completionList","itemDefaults","applyKindSupport","completionProvider","triggerCharacters","defaultCommitCharacters","allCommitCharacters","provideCompletionItems","asCompletionParams","asCompletionResult","provideCompletionItem","resolveCompletionItem","asCompletionItem","registerCompletionItemProvider","RegistrationType","registrationMethod","matchGlobPattern","resource","miniMatchPattern","baseUri","with","path","matcher","Worker","createMessageTransportsFromWorker","worker","DidCloseNotebookDocumentNotification","DidSaveNotebookDocumentNotification","DidChangeNotebookDocumentNotification","NotebookCellArrayChange","DidOpenNotebookDocumentNotification","NotebookDocument","NotebookCell","ExecutionSummary","NotebookCellKind","vscode_languageserver_types_1","Markup","Code","executionOrder","objectLiteral","uinteger","equals","one","equalsMetadata","oneArray","otherArray","oneKeys","otherKeys","sort","prop","DocumentUri","diff","two","executionSummary","notebookType","cells","integer","deleteCount","WorkspaceFeature","WorkspaceSymbolRequest","symbolCapabilities","symbolKind","SupportedSymbolKinds","SupportedSymbolTags","workspaceSymbolProvider","provideWorkspaceSymbols","query","asSymbolInformations","resolveWorkspaceSymbol","asWorkspaceSymbol","asSymbolInformation","registerWorkspaceSymbolProvider","CodeLensRequest","clc","CodeLensRefreshRequest","onDidChangeCodeLensEmitter","codeLensProvider","onDidChangeCodeLenses","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","asCodeLens","registerCodeLensProvider","e","t","TypeError","h","lastIndexOf","cwd","normalize","isAbsolute","relative","u","l","d","_makeLong","dirname","basename","extname","format","dir","root","base","delimiter","win32","posix","navigator","userAgent","uriToFsPath","URI","authority","fragment","isUri","exec","w","substring","toJSON","revive","_formatted","_fsPath","_sep","$mid","g","encodeURIComponent","substr","decodeURIComponent","C","Utils","joinPath","resolvePath","DefinitionRequest","definitionSupport","definitionProvider","provideDefinition","registerDefinitionProvider","uriConverter","trustMarkdown","_uriConverter","asDiagnostic","diagnostic","protocolDiagnostic_1","ProtocolDiagnostic","asDiagnosticSeverity","severity","ls","CodeDescription","codeDescription","href","DiagnosticCode","hasDiagnosticCode","diagnosticCode","source","DiagnosticRelatedInformation","asLocation","location","asRelatedInformation","tags","tag","asDiagnosticTag","asDiagnosticTags","Position","line","character","items","DiagnosticSeverity","Information","Hint","asDocumentation","asMarkdownString","MarkdownString","appendText","asCompletionItemTag","commitCharactersApplyKind","defaultRange","defaultInsertTextMode","defaultInsertTextFormat","defaultData","dataApplyKind","asCompletionItemTags","CompletionItemLabelDetails","labelDetails","description","asCompletionItemLabel","protocolCompletionItem_1","filterText","insertText","insertTextFormat","textEdit","newText","InsertReplaceEdit","inserting","insert","replacing","textEditText","InsertTextFormat","text","SnippetString","fromEdit","asCompletionInsertText","itemKind","original","originalItemKind","sortText","additionalTextEdits","asTextEditsSync","commitCharacters","applyKind","ApplyKind","Merge","char","applyCommitCharacters","asCommand","preselect","applyData","keepWhitespace","asTextEdit","TextEdit","asSignatureInformations","mapAsync","asSignatureInformation","SignatureInformation","parameters","asParameterInformations","activeParameter","asParameterInformation","ParameterInformation","asLocationLink","targetUri","targetRange","originSelectionRange","targetSelectionRange","asLocationResult","LocationLink","links","locations","asDocumentHighlight","DocumentHighlight","asDocumentHighlightKind","DocumentHighlightKind","Read","Write","asSymbolKind","SymbolKind","asSymbolTag","SymbolTag","asSymbolTags","protocolWorkspaceSymbol_1","fillTags","asDocumentSymbol","DocumentSymbol","children","child","concat","tooltip","kindMapping","asCodeActionKind","protocolCodeAction_1","asDiagnosticsSync","isPreferred","disabled","reason","isAI","protocolCodeLens_1","sharedMetadata","changeAnnotations","metaData","annotation","needsConfirmation","asWorkspaceEditEntryMetadata","asMetadata","WorkspaceEdit","CreateFile","createFile","annotationId","RenameFile","renameFile","oldUri","newUri","DeleteFile","deleteFile","edits","AnnotatedTextEdit","SnippetTextEdit","snippet","protocolDocumentLink_1","asColor","color","red","green","blue","alpha","asColorInformation","ci","ColorInformation","asColorPresentation","cp","presentation","ColorPresentation","asFoldingRangeKind","asFoldingRange","FoldingRange","startLine","endLine","asSelectionRange","SelectionRange","asInlineValue","inlineValue","InlineValueText","InlineValueVariableLookup","variableName","caseSensitiveLookup","InlineValueEvaluatableExpression","expression","asInlayHint","asInlayHintLabelPart","protocolInlayHint_1","textEdits","asTooltip","paddingLeft","paddingRight","InlayHintLabelPart","asCallHierarchyItem","protocolCallHierarchyItem_1","asCallHierarchyIncomingCall","CallHierarchyIncomingCall","fromRanges","asCallHierarchyOutgoingCall","CallHierarchyOutgoingCall","to","asSemanticTokensEdit","SemanticTokensEdit","Uint32Array","protocolTypeHierarchyItem_1","asGlobPattern","RelativePattern","WorkspaceFolder","getWorkspaceFolder","asInlineCompletionItem","inlineCompletionItem","InlineCompletionItem","NotebookCellTextDocumentFilter","TextDocumentFilter","asHover","hover","Hover","CodeBlock","appendCodeblock","element","appendMarkdown","asHoverContent","contents","rangeDefaults","editRange","getCompletionItemDefaults","CompletionList","isIncomplete","asSignatureHelp","SignatureHelp","activeSignature","signatures","asDeclarationResult","asReferences","asDocumentSymbols","asCommands","doc","Command","foldingRanges","asColorInformations","colorInformation","asColorPresentations","colorPresentations","asSelectionRanges","selectionRanges","asInlineValues","inlineValues","asInlayHints","_token","resultId","SemanticTokensEdits","asCallHierarchyItems","asCallHierarchyIncomingCalls","asCallHierarchyOutgoingCalls","LinkedEditingRanges","asRegularExpression","wordPattern","InlineCompletionList","SignatureHelpRequest","signatureInformation","parameterInformation","labelOffsetSupport","activeParameterSupport","noActiveParameterSupport","signatureHelpProvider","provideSignatureHelp","providerSignatureHelp","asSignatureHelpParams","retriggerCharacters","registerSignatureHelpProvider","brace_expressions_js_1","types","isExtglobType","startNoDot","addPatternStart","justDots","reSpecials","regExpEscape","star","starNoEmpty","copyIn","ret","isStart","unshift","isEnd","clone","ast","pos","opt","escaping","inBrace","braceStart","braceNeg","acc","glob","uflag","toRegExpSource","nocaseMagicOnly","toUpperCase","_glob","allowDot","noEmpty","src","aps","needNoTrav","needNoDot","repeated","bodyDotAllowed","final","_hasMagic","needUflag","consumed","magic","parseClass","FileOperationFeature","_event","_registrationType","_clientCapability","_serverCapability","_listener","_filters","clientCapability","serverCapability","filterSize","fileOperations","filters","minimatchFilter","asMinimatchOptions","matches","getFileType","fileMatches","files","fileType","FileType","FileOperationPatternKind","Directory","index","fs","stat","ignoreCase","NotificationFileOperationFeature","_notificationType","_accessUri","_createParams","notificationType","accessUri","createParams","originalEvent","filteredEvent","doSend","CachingNotificationFileOperationFeature","_willListener","_fsPathFileTypes","cacheFileTypes","clearFileTypeCache","onDidCreateFiles","DidCreateFilesNotification","asDidCreateFilesParams","didCreateFiles","onDidRenameFiles","DidRenameFilesNotification","asDidRenameFilesParams","onWillRenameFiles","willRename","waitUntil","didRenameFiles","onDidDeleteFiles","DidDeleteFilesNotification","asDidDeleteFilesParams","onWillDeleteFiles","willDelete","didDeleteFiles","RequestFileOperationFeature","_requestType","requestType","onWillCreateFiles","WillCreateFilesRequest","asWillCreateFilesParams","willCreateFiles","WillRenameFilesRequest","asWillRenameFilesParams","willRenameFiles","WillDeleteFilesRequest","asWillDeleteFilesParams","willDeleteFiles","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","registerHoverProvider","toJSONObject","obj","res","configuration","ConfigurationRequest","scopeUri","section","isCleared","DidChangeConfigurationNotification","configurationSection","sections","affectsConfiguration","didChangeConfiguration","settings","extractSettingsInformation","ensurePath","current","globPattern_1","Converter","$NotebookCell","$NotebookDocumentFilter","$NotebookDocumentSyncOptions","SyncInfo","asNotebookCells","asNotebookCell","deepCopy","asNotebookCellKind","props","asVersionedNotebookDocumentIdentifier","notebookDocument","asNotebookDocument","asTextContentChange","contentChanges","asNotebookDocumentChangeEvent","changedCells","structure","didOpen","asOpenTextDocumentParams","didClose","asCloseTextDocumentParams","textContent","compareMetaData","languageId","startTime","endTime","equalsTiming","timing","equalsExecution","isObjectLiteral","computeDiff","originalCells","modifiedCells","compareMetadata","originalLength","modifiedLength","startIndex","originalEndIndex","modifiedEndIndex","newCells","matchNotebook","asDocumentFilter","notebookSelector","NotebookDocumentSyncFeatureProvider","notebookSyncInfo","notebookDidOpen","onChangeNotificationSent","onOpenNotificationSent","onCloseNotificationSent","onSaveNotificationSent","onDidOpenNotebookDocument","onDidChangeNotebookDocument","didChangeNotebookDocument","onDidSaveNotebookDocument","didSave","onDidCloseNotebookDocument","getMatchingCellsConsideringSyncInfo","syncInfo","didOpenNotebookCellTextDocument","getSyncInfo","cellMatches","cellIsSynced","matchingCells","mergeCells","doSendChange","doSendOpen","didChangeNotebookCellTextDocument","didCloseNotebookCellTextDocument","cellUri","findIndex","doSendClose","deleted","getMatchingCells","getMatchingCellsFromEvent","newEvent","doSendSave","syncedCells","sendDidOpenNotebookDocument","cellDocuments","asTextDocumentItem","cellTextDocuments","notebooks","sendDidChangeNotebookDocument","getMatchingCellsFromSyncInfo","didChange","sendDidSaveNotebookDocument","sendDidCloseNotebookDocument","getSynchronizedCells","matchingCellsSet","cellChanges","cellChange","oldCells","addedCells","removedCells","filtered","filterCells","merged","cellSelector","cellLanguage","dedicatedChannel","_onChangeNotificationSent","_onOpenNotificationSent","_onCloseNotificationSent","_onSaveNotificationSent","onDidOpenTextDocument","notebookCell","findNotebookDocumentAndCell","onDidChangeTextDocument","onDidCloseTextDocument","synchronization","executionSummarySupport","notebookDocumentSync","getProvider","TextDocumentContentRefreshRequest","TextDocumentContentRequest","getText","asTextDocumentSaveReason","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","asCompletionTriggerKind","triggerKind","CompletionTriggerKind","TriggerCharacter","TriggerForIncompleteCompletions","Invoked","asSignatureHelpTriggerKind","SignatureHelpTriggerKind","Invoke","ContentChange","asWorkerPosition","MAX_VALUE","Diagnostic","protocolDiagnostic","asDiagnosticCode","asCodeActionTriggerKind","CodeActionTriggerKind","Automatic","asInlineCompletionContext","asInlineCompletionTriggerKind","selectedCompletionInfo","asSelectedCompletionInfo","InlineCompletionTriggerKind","asVersionedTextDocumentIdentifier","arg0","arg1","arg2","isTextDocument","isTextDocumentChangeEvent","rangeLength","asSaveTextDocumentParams","includeContent","asWillSaveTextDocumentParams","fileUri","triggerCharacter","isRetrigger","activeSignatureHelp","asPositions","asPositionsSync","protocolItem","InsertReplaceRange","asCompletionTextEdit","fillPrimaryInsertText","asReferenceParams","includeDeclaration","asCodeActionContext","only","CodeActionContext","asInlineValueContext","InlineValueContext","frameId","stoppedLocation","fileOptions","tabSize","insertSpaces","asDocumentSymbolParams","DocumentLink","ReferencesRequest","referencesProvider","provideReferences","_providerReferences","registerReferenceProvider","ChangeAnnotation","ChangeAnnotationIdentifier","TextDocumentIdentifier","VersionedTextDocumentIdentifier","OptionalVersionedTextDocumentIdentifier","LanguageKind","TextDocumentItem","MarkupContent","CompletionItem","MarkedString","FormattingOptions","InlayHintKind","StringValue","SelectedCompletionInfo","InlineCompletionContext","MIN_VALUE","three","four","numberRange","startCharacter","endCharacter","defined","_a","del","overwrite","ignoreIfExists","recursive","ignoreIfNotExists","TextEditChangeImpl","assertChangeAnnotations","manage","isSnippet","ChangeAnnotations","annotations","_annotations","_counter","_size","idOrAnnotation","nextId","WorkspaceChange","_textEditChanges","_workspaceEdit","_changeAnnotations","textEditChange","initDocumentChanges","getTextEditChange","textDocumentEdit","initChanges","optionsOrAnnotation","operation","ABAP","WindowsBat","BibTeX","Clojure","Coffeescript","CPP","CSharp","CSS","D","Delphi","Diff","Dart","Dockerfile","Elixir","Erlang","FSharp","GitCommit","GitRebase","Go","Groovy","Handlebars","Haskell","HTML","Ini","Java","JavaScript","JavaScriptReact","LaTeX","Less","Lua","Makefile","ObjectiveC","ObjectiveCPP","Pascal","Perl","Perl6","PHP","Powershell","Pug","Python","R","Razor","Ruby","Rust","SCSS","SASS","Scala","ShaderLab","ShellScript","SQL","Swift","TypeScript","TypeScriptReact","TeX","VisualBasic","XML","XSL","YAML","Replace","fromPlainText","plainText","Namespace","Package","Boolean","Key","Null","SourceFixAll","kindOrCommandOrEdit","checkKind","Type","Parameter","createSnippet","EOL","TextDocument","mergeSort","compare","leftIdx","rightIdx","content","FullTextDocument","lineCount","positionAt","offsetAt","applyEdits","sortedEdits","lastModifiedOffset","startOffset","endOffset","_uri","_languageId","_version","_content","_lineOffsets","update","getLineOffsets","lineOffsets","isLineStart","offset","min","low","high","mid","floor","lineOffset","nextLineOffset","DeclarationRequest","DiagnosticRefreshRequest","WorkspaceDiagnosticRequest","DocumentDiagnosticRequest","DocumentDiagnosticReportKind","DiagnosticServerCancellationData","vscode_jsonrpc_1","retriggerRequest","Unchanged","partialResult","ProgressType","ProtocolCompletionItem","onDidChangeEmmiter","autoInsert","oldLanguages","oldAutoInsert","extension","extensions","allAcrossExtensionHosts","htmlLanguageParticipants","packageJSON","contributes","htmlLanguageParticipant","isEqualSet","changeListener","onDidChange","hasLanguage","useAutoInsert","s1","s2","onCancellationRequested","Cancelled","shortcutEvent","MutableToken","_isCancelled","_emitter","InlayHintRefreshRequest","InlayHintRequest","_registrations","getProviders","providers","onDidChangeEmitter","textDocumentContent","StaticRegistrationOptions","hasId","schemes","registerTextDocumentContentProvider","provideTextDocumentContent","Touch","LRUCache","LinkedMap","First","AsOld","Last","AsNew","toStringTag","_map","_head","_tail","isEmpty","first","last","before","previous","after","touch","addItemLast","addItemFirst","remove","removeItem","callbackfn","thisArg","iterator","trimOld","newSize","currentSize","fromJSON","_limit","_ratio","limit","ratio","checkTrim","peek","round","SharedArrayReceiverStrategy","SharedArraySenderStrategy","cancellation_1","CancellationState","buffers","enableCancellation","SharedArrayBuffer","Int32Array","$cancellationData","sendCancellation","_conn","Atomics","store","cleanup","SharedArrayBufferCancellationToken","load","SharedArrayBufferCancellationTokenSource","createCancellationTokenSource","setTestMode","$test","clearTestMode","Timer","yieldAfter","convertBatch","shouldYield","yieldCallback","runBatch","defaultDelay","completionPromise","onSuccess","task","delay","cancelTimeout","forceDelivery","isTriggered","_capacity","_active","_waiting","capacity","thunk","runNext","active","doRunNext","counter","total","counterInterval","timeTaken","timeLeft","_infinite","_reported","_lspProgressDisposable","_progress","_cancellationToken","_tokenDisposable","begin","report","percentage","withProgress","ProgressLocation","Window","cancellable","progress","cancellationToken","WorkDoneProgressCancelNotification","increment","ColorPresentationRequest","DocumentColorRequest","ProtocolTypeHierarchyItem","TypeHierarchyItem","runtime","FsReadDirRequest","uriString","fileFs","readDirectory","FsStatRequest","RequestType","arrayDiff","access","_initialFolders","initializeWithFolders","asProtocol","currentWorkspaceFolders","sendInitialEvent","removed","added","doSendEvent","addedFolders","removedFolders","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","CallHierarchyOutgoingCallsRequest","CallHierarchyIncomingCallsRequest","CallHierarchyPrepareRequest","newLanguageClient","logOutputChannel","languageServerDescription","languageParticipants","getLanguageParticipants","subscriptions","startClientWithParticipants","promptForLinkedEditingKey","getExtension","globalState","activeEditorListener","onDidChangeActiveTextEditor","configure","l10n","SettingIds","linkedEditing","restartTrigger","oldClient","CustomDataChangedNotification","CustomDataContent","AutoInsertRequest","SemanticTokenRequest","SemanticTokenLegendRequest","toDispose","rangeFormatting","embeddedLanguages","css","javascript","handledSchemas","provideFormatter","customCapabilities","editLimit","updateRanges","isAfter","isBeforeOrEqual","updateProposals","serveFileSystemRequests","customDataSource","getCustomDataSource","getContent","activateAutoInsertion","disposable2","telemetry","sendTelemetryEvent","updateFormatterRegistration","formatEnabled","formatEnable","fileFormattingOptions","SemanticTokensLegend","modifiers","regionCompletionRegExpr","htmlSnippetCompletionRegExpr","results","lineUntilPos","beginProposal","endProposal","match2","snippetProposal","NotificationType","RequestType0","_notifyFileEvent","_watchers","_documentSelector","watcher","globPattern","watchCreate","watchChange","watchDelete","WatchKind","Change","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","listeners","onDidCreate","FileChangeType","Created","Changed","onDidDelete","Deleted","_disposable","CallbackList","_callbacks","_contexts","bucket","foundCallbackWithDifferentContext","invoke","callbacks","contexts","_options","thisArgs","onFirstListenerAdd","_noop","onLastListenerRemove","inlayHint","onDidChangeInlayHints","inlayHintProvider","provideInlayHints","viewPort","resolveInlayHint","hint","registerInlayHintsProvider","posixClasses","braceEscape","rangesToString","negs","sawStart","endPos","rangeStart","WHILE","cls","unip","neg","sranges","snegs","DocumentSymbolRequest","GlobPattern","WillSaveTextDocumentWaitUntilRequest","WillSaveTextDocumentNotification","DidSaveTextDocumentNotification","TextDocumentContentChangeEvent","InitializeErrorCodes","WorkDoneProgressOptions","TextDocumentRegistrationOptions","RegularExpressionEngineKind","DocumentSelector","NotebookDocumentFilter","SelectionRangeRequest","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolder_1","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","protocol_progress_1","protocol_callHierarchy_1","protocol_semanticTokens_1","protocol_showDocument_1","protocol_linkedEditingRange_1","protocol_fileOperations_1","protocol_moniker_1","protocol_typeHierarchy_1","protocol_inlineValue_1","protocol_inlayHint_1","protocol_diagnostic_1","protocol_notebook_1","protocol_inlineCompletion_1","protocol_textDocumentContent_1","Abort","Transactional","Undo","ES2020","UTF8","UTF32","hasWorkDoneProgress","unknownProtocolVersion","ProtocolNotificationType0","Log","Incremental","isIncremental","isFull","uuid_1","RequestStateKind","PullState","DocumentOrUri","asKey","DocumentPullStateTracker","documentPullStates","workspacePullStates","track","states","pulledVersion","unTrack","tracks","getResultId","getAllResultIds","DiagnosticRequestor","isDisposed","onDidChangeDiagnosticsEmitter","openRequests","documentStates","workspaceErrorCounter","workspaceCancellation","workspaceTimeout","createProvider","identifier","knows","forget","pull","cb","pullAsync","currentRequestState","documentState","afterState","provideDiagnostics","outDated","reschedule","forgetDocument","workspaceDiagnostics","pullWorkspace","pullWorkspaceAsync","provideWorkspaceDiagnostics","previousResultIds","chunk","onDidChangeDiagnostics","unChanged","resultIds","resultReporter","convertReport","convertPreviousResultIds","partialResultToken","BackgroundScheduler","diagnosticRequestor","lastDocumentToPull","documents","timeoutHandle","lastDocumentToPullKey","runLoop","DiagnosticFeatureProviderImpl","activeTextDocument","backgroundScheduler","onFocus","matchFilter","matchResource","matchesCell","isActiveDocument","addToBackgroundIfNeeded","interFileDependencies","considerDocument","editor","oldActive","openFeature","onNotificationSent","notebookFeature","uriStr","pulledTextDocuments","onTabs","changeFeature","onType","closedCells","openedCells","saveFeature","closeFeature","cleanUpDocument","relatedDocumentSupport","diagnosticProvider","refresh","selectionRangeProvider","provideSelectionRanges","positions","registerSelectionRangeProvider","____","___","_pr","ParameterStructures","byName","NotificationType0","server","ProtocolDocumentLink","colorProvider","provideColorPresentations","provideDocumentColors","registerColorProvider","ConnectionOptions","MessageStrategy","CancellationStrategy","CancellationSenderStrategy","CancellationReceiverStrategy","RequestCancellationReceiverStrategy","IdCancellationReceiverStrategy","ConnectionError","ConnectionErrors","LogTraceNotification","SetTraceNotification","TraceValues","TraceValue","ProgressToken","messageReader","messageWriter","_logger","sequenceNumber","notificationSequenceNumber","unknownResponseSequenceNumber","maxParallelism","starRequestHandler","inFlight","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","messageQueue","linkedMap_1","responsePromises","knownCanceledRequests","requestTokens","ConnectionState","New","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","cancellationStrategy","Message","cancelUndispatched","isListening","Listening","isClosed","Closed","Disposed","createRequestQueueKey","triggerMessageQueue","messageStrategy","handleMessage","isRequest","requestMessage","reply","jsonrpc","toJson","traceSendingResponse","replyError","Verbose","Compact","stringifyTrace","logLSPMessage","traceReceivedRequest","requestHandler","tokenKey","cancellationSource","receiver","numberOfParams","InvalidParams","parameterStructures","byPosition","InternalError","MethodNotFound","handleRequest","isNotification","notificationHandler","CancelNotification","cancelId","traceReceivedNotification","ProgressNotification","handleNotification","isResponse","handleResponse","responseMessage","responseHandler","handleInvalidMessage","toCancel","strategy","response","queue","addMessageToQueue","responsePromise","timerStart","traceReceivedResponse","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","nullToUndefined","isNamedParam","computeSingleParam","auto","computeMessageParams","messageParams","paramStart","paramEnd","notificationMessage","traceSendingNotification","_type","onUnhandledProgress","sender","throwIfNotListening","tokenWasCancelled","traceSendingRequest","MessageWriteError","StarRequestHandler","_value","onUnhandledNotification","onDispose","AlreadyListening","throwIfListening","inspect","verbose","setPrototypeOf","conn","_chunks","_totalLength","toAppend","lowerCaseKeys","chunkIndex","chunkBytesRead","row","_read","header","trim","numberOfBytes","byteCount","resultOffset","chunkPart","onDidChangeInlineValues","inlineValueProvider","provideInlineValues","registerInlineValuesProvider","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","localExtensionUris","externalExtensionUris","workspaceUris","collectInWorkspaces","collectInExtensions","newLocalExtensionUris","newExternalExtensionUris","hasChanges","readFile","openTextDocument","isURI","uriOrPath","dataPaths","collect","uriOrPaths","rootFolder","folderUri","customDataInspect","workspaceFolderValue","workspaceFile","workspaceValue","globalValue","externalUris","customData","html","extensionUri","declarationSupport","declarationProvider","provideDeclaration","registerDeclarationProvider","hierarchicalDocumentSymbolSupport","labelSupport","documentSymbolProvider","provideDocumentSymbols","_provideDocumentSymbols","registerDocumentSymbolProvider","NotificationType9","NotificationType8","NotificationType7","NotificationType6","NotificationType5","NotificationType4","NotificationType3","NotificationType2","NotificationType1","RequestType9","RequestType8","RequestType7","RequestType6","RequestType5","RequestType4","RequestType3","RequestType2","RequestType1","AbstractMessageSignature","ParseError","InvalidRequest","jsonrpcReservedErrorRangeStart","serverErrorStart","MessageReadError","ServerNotInitialized","UnknownErrorCode","jsonrpcReservedErrorRangeEnd","serverErrorEnd","_parameterStructures","CallHierarchyProvider","prepareCallHierarchy","provideCallHierarchyIncomingCalls","provideCallHierarchyOutgoingCalls","callHierarchyProvider","registerCallHierarchyProvider","v4","isUUID","ValueUUID","asHex","V4UUID","_oneOf","_randomHex","_chars","_timeHighBits","_UUIDPattern","_ral","ral","anyIsEnabled","TextDocumentChangeReason","Redo","lastChange","lastCharacter","isEnabled","doAutoInsert","updateEnabledState","configurations","activeEditor","activeDocument","selections","isEqual","insertSnippet","TextDocumentEventFeature","_pendingOpenNotifications","_delayOpen","_pendingOpenListeners","syncedDocuments","textDocumentFilter","openDocuments","closingDocument","notifications","notification","getTextDocument","_pendingTextDocumentChanges","pendingTextDocumentChanges","_selectors","selectors","_selectorFilter","DynamicDocumentFeature","_changeData","_onNotificationSent","_onPendingChangeAdded","_syncKind","updateSyncKind","getDocumentSelectors","promises","changeData","eventUri","excludes","onWillSaveTextDocument","willSave","willSaveEvent","willSaveWaitUntil","vEdits","_includeText","onDidSaveTextDocument","saveOptions","disposable_1","sharedArrayCancellation_1","messageReader_1","messageWriter_1","messageBuffer_1","StaticFeature","_middleware","_textDocument","selectorFilter","getStateInfo","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","serverMain","i10lLocation","startClient"],"sourceRoot":""}