{"version":3,"file":"extension.js","mappings":"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C3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,KAAO,IAC5CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,EAAkB,EAAI,IAAM,IAC3CA,EAAeA,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","sources":["webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Constants.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/__DynamicConstants.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Common/DataSanitizer.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Event.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Trace.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/HelperFuncs.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/PageView.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/PageViewPerformance.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Exception.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Common/DataPoint.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Metric.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/UrlHelperFuncs.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Util.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/RemoteDependencyData.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Offline.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Enums.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/StorageHelperFuncs.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/RequestResponseHeaders.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Interfaces/Contracts/ContextTagKeys.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Interfaces/PartAExtensions.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Common/Envelope.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Common/Data.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/InternalConstants.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/__DynamicConstants.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/EnvelopeCreator.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/SendBuffer.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/Sender.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/Serializer.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/TelemetryProcessors/SamplingScoreGenerators/HashCodeScoreGenerator.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/TelemetryProcessors/SamplingScoreGenerators/SamplingScoreGenerator.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/TelemetryProcessors/Sample.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/ConnectionStringParser.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-web-basic/dist-es5/index.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-web-basic/dist-es5/__DynamicConstants.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/Interfaces/Contracts/SeverityLevel.js","webpack://typescript-language-features/./src/utils/objects.ts","webpack://typescript-language-features/./src/typescriptServiceClient.ts","webpack://typescript-language-features/./node_modules/semver/functions/parse.js","webpack://typescript-language-features/./node_modules/@vscode/sync-api-common/lib/browser/ril.js","webpack://typescript-language-features/./src/tsServer/server.ts","webpack://typescript-language-features/./src/tsServer/protocol/errorCodes.ts","webpack://typescript-language-features/./src/languageFeatures/implementations.ts","webpack://typescript-language-features/./node_modules/yallist/iterator.js","webpack://typescript-language-features/./node_modules/@nevware21/ts-utils/dist/es5/mod/ts-utils.js","webpack://typescript-language-features/./node_modules/semver/ranges/min-satisfying.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/TelemetryHelpers.js","webpack://typescript-language-features/./src/languageFeatures/updatePathsOnRename.ts","webpack://typescript-language-features/./node_modules/semver/functions/compare.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-shims/dist-es5/TsLibShims.js","webpack://typescript-language-features/./src/configuration/fileSchemes.ts","webpack://typescript-language-features/./src/ui/managedFileContext.ts","webpack://typescript-language-features/./src/languageFeatures/inlayHints.ts","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/UnloadHandlerContainer.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/SenderPostManager.js","webpack://typescript-language-features/./node_modules/@vscode/sync-api-service/lib/apiService.js","webpack://typescript-language-features/./node_modules/semver/functions/compare-build.js","webpack://typescript-language-features/./src/languageFeatures/references.ts","webpack://typescript-language-features/./node_modules/@microsoft/1ds-core-js/dist-es5/InternalConstants.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-core-js/dist-es5/AppInsightsCore.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-core-js/dist-es5/Enums.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-core-js/dist-es5/ValueSanitizer.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK.Interfaces/IChannelControls.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK.Enums/LoggingEnums.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/ConfigDefaults.js","webpack://typescript-language-features/./src/languageFeatures/util/codeAction.ts","webpack://typescript-language-features/./src/languageFeatures/fileConfigurationManager.ts","webpack://typescript-language-features/./src/ui/intellisenseStatus.ts","webpack://typescript-language-features/./node_modules/semver/internal/identifiers.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/ResponseHelpers.js","webpack://typescript-language-features/./node_modules/semver/ranges/min-version.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/NotificationManager.js","webpack://typescript-language-features/external commonjs \"vscode\"","webpack://typescript-language-features/./src/languageFeatures/tsconfig.ts","webpack://typescript-language-features/./src/remoteRepositories.browser.ts","webpack://typescript-language-features/./src/languageFeatures/diagnostics.ts","webpack://typescript-language-features/./src/commands/goToProjectConfiguration.ts","webpack://typescript-language-features/./node_modules/semver/functions/prerelease.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-core-js/dist-es5/__DynamicConstants.js","webpack://typescript-language-features/./node_modules/semver/functions/compare-loose.js","webpack://typescript-language-features/./src/tsServer/protocol/protocol.const.ts","webpack://typescript-language-features/./src/commands/selectTypeScriptVersion.ts","webpack://typescript-language-features/./node_modules/semver/functions/diff.js","webpack://typescript-language-features/./src/tsServer/bufferSyncSupport.ts","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/W3cTraceParent.js","webpack://typescript-language-features/./src/languageFeatures/documentSymbol.ts","webpack://typescript-language-features/./src/languageFeatures/callHierarchy.ts","webpack://typescript-language-features/./node_modules/@vscode/sync-api-common/lib/common/connection.js","webpack://typescript-language-features/./src/filesystems/ata.ts","webpack://typescript-language-features/./src/filesystems/autoInstallerFs.ts","webpack://typescript-language-features/./node_modules/semver/functions/cmp.js","webpack://typescript-language-features/./node_modules/lru-cache/index.js","webpack://typescript-language-features/./src/typeConverters.ts","webpack://typescript-language-features/./src/languageFeatures/definitionProviderBase.ts","webpack://typescript-language-features/./src/commands/restartTsServer.ts","webpack://typescript-language-features/./src/utils/async.ts","webpack://typescript-language-features/./src/languageFeatures/linkedEditing.ts","webpack://typescript-language-features/./src/logging/tracer.ts","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/ProcessTelemetryContext.js","webpack://typescript-language-features/./src/tsconfig.ts","webpack://typescript-language-features/./src/languageFeatures/workspaceSymbols.ts","webpack://typescript-language-features/./src/lazyClientHost.ts","webpack://typescript-language-features/./src/logging/logger.ts","webpack://typescript-language-features/./src/languageFeatures/fileReferences.ts","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/ConfigDefaultHelpers.js","webpack://typescript-language-features/./node_modules/semver/ranges/simplify.js","webpack://typescript-language-features/./src/languageFeatures/signatureHelp.ts","webpack://typescript-language-features/./src/languageFeatures/codeLens/referencesCodeLens.ts","webpack://typescript-language-features/./src/logging/logLevelMonitor.ts","webpack://typescript-language-features/./node_modules/@vscode/ts-package-manager/dist/index.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/AppInsightsCore.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/TelemetryInitializerPlugin.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-common/dist-es5/applicationinsights-common.js","webpack://typescript-language-features/./src/tsServer/api.ts","webpack://typescript-language-features/./node_modules/semver/functions/major.js","webpack://typescript-language-features/./node_modules/semver/functions/inc.js","webpack://typescript-language-features/./src/filesystems/memFs.ts","webpack://typescript-language-features/./src/configuration/languageIds.ts","webpack://typescript-language-features/./src/languageFeatures/definitions.ts","webpack://typescript-language-features/./src/commands/index.ts","webpack://typescript-language-features/./src/languageFeatures/copyPaste.ts","webpack://typescript-language-features/./src/commands/configurePlugin.ts","webpack://typescript-language-features/./src/languageFeatures/folding.ts","webpack://typescript-language-features/./src/extension.browser.ts","webpack://typescript-language-features/./src/utils/arrays.ts","webpack://typescript-language-features/./src/tsServer/cachedResponse.ts","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK.Enums/EventsDiscardedReason.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/HelperFuncs.js","webpack://typescript-language-features/./src/languageFeatures/documentHighlight.ts","webpack://typescript-language-features/./src/languageFeatures/jsDocCompletions.ts","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/DiagnosticLogger.js","webpack://typescript-language-features/./node_modules/@vscode/sync-api-common/lib/common/ral.js","webpack://typescript-language-features/./node_modules/semver/ranges/valid.js","webpack://typescript-language-features/./node_modules/semver/classes/comparator.js","webpack://typescript-language-features/./node_modules/semver/classes/semver.js","webpack://typescript-language-features/./src/commands/tsserverRequests.ts","webpack://typescript-language-features/./node_modules/semver/functions/sort.js","webpack://typescript-language-features/./src/commands/openTsServerLog.ts","webpack://typescript-language-features/./node_modules/semver/functions/neq.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/AsyncUtils.js","webpack://typescript-language-features/./src/languageFeatures/fixAll.ts","webpack://typescript-language-features/./node_modules/semver/functions/gte.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/DataCacheHelper.js","webpack://typescript-language-features/./node_modules/semver/functions/rsort.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK.Enums/EnumHelperFuncs.js","webpack://typescript-language-features/./node_modules/semver/functions/patch.js","webpack://typescript-language-features/./src/tsServer/plugins.ts","webpack://typescript-language-features/./src/tsServer/requestQueue.ts","webpack://typescript-language-features/./node_modules/@vscode/sync-api-common/lib/browser/main.js","webpack://typescript-language-features/./node_modules/@vscode/sync-api-common/lib/browser/connection.js","webpack://typescript-language-features/./src/languageFeatures/util/copilot.ts","webpack://typescript-language-features/./node_modules/semver/functions/eq.js","webpack://typescript-language-features/./node_modules/vscode-uri/lib/esm/index.js","webpack://typescript-language-features/./src/configuration/languageDescription.ts","webpack://typescript-language-features/./src/languageFeatures/semanticTokens.ts","webpack://typescript-language-features/./node_modules/@microsoft/1ds-core-js/dist-es5/Utils.js","webpack://typescript-language-features/./src/experimentTelemetryReporter.ts","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK.Enums/InitActiveStatusEnum.js","webpack://typescript-language-features/./src/logging/telemetry.ts","webpack://typescript-language-features/./src/ui/versionStatus.ts","webpack://typescript-language-features/./src/configuration/configuration.ts","webpack://typescript-language-features/./src/utils/regexp.ts","webpack://typescript-language-features/./src/tsServer/cancellation.ts","webpack://typescript-language-features/./node_modules/semver/ranges/subset.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/CookieMgr.js","webpack://typescript-language-features/./src/utils/resourceMap.ts","webpack://typescript-language-features/./src/languageFeatures/sourceDefinition.ts","webpack://typescript-language-features/./node_modules/semver/functions/lte.js","webpack://typescript-language-features/./src/commands/reloadProject.ts","webpack://typescript-language-features/./src/configuration/schemes.ts","webpack://typescript-language-features/./node_modules/semver/ranges/ltr.js","webpack://typescript-language-features/./src/languageFeatures/util/textRendering.ts","webpack://typescript-language-features/./src/languageFeatures/completions.ts","webpack://typescript-language-features/./src/utils/fs.ts","webpack://typescript-language-features/./src/ui/largeProjectStatus.ts","webpack://typescript-language-features/./node_modules/semver/ranges/gtr.js","webpack://typescript-language-features/./node_modules/semver/functions/gt.js","webpack://typescript-language-features/./src/utils/dispose.ts","webpack://typescript-language-features/./src/tsServer/callbackMap.ts","webpack://typescript-language-features/./node_modules/@vscode/sync-api-common/lib/browser/messageConnection.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-shims/dist-es5/Constants.js","webpack://typescript-language-features/./node_modules/@vscode/sync-api-common/lib/common/messageConnection.js","webpack://typescript-language-features/../../node_modules/os-browserify/main.js","webpack://typescript-language-features/./src/tsServer/serverError.ts","webpack://typescript-language-features/./node_modules/jsonc-parser/lib/esm/impl/scanner.js","webpack://typescript-language-features/./node_modules/jsonc-parser/lib/esm/impl/parser.js","webpack://typescript-language-features/./node_modules/jsonc-parser/lib/esm/impl/format.js","webpack://typescript-language-features/./node_modules/jsonc-parser/lib/esm/impl/edit.js","webpack://typescript-language-features/./node_modules/jsonc-parser/lib/esm/main.js","webpack://typescript-language-features/./src/languageFeatures/tagClosing.ts","webpack://typescript-language-features/./src/languageFeatures/codeLens/implementationsCodeLens.ts","webpack://typescript-language-features/./src/languageFeatures/smartSelect.ts","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/EventHelpers.js","webpack://typescript-language-features/./src/languageFeatures/codeLens/baseCodeLensProvider.ts","webpack://typescript-language-features/./node_modules/semver/functions/coerce.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/__DynamicConstants.js","webpack://typescript-language-features/./node_modules/semver/functions/minor.js","webpack://typescript-language-features/./src/languageFeatures/rename.ts","webpack://typescript-language-features/./src/languageFeatures/typeDefinitions.ts","webpack://typescript-language-features/./src/languageFeatures/util/dependentRegistration.ts","webpack://typescript-language-features/./src/tsServer/versionManager.ts","webpack://typescript-language-features/./src/tsServer/protocol/fixNames.ts","webpack://typescript-language-features/./node_modules/@vscode/sync-api-common/lib/common/messageCancellation.js","webpack://typescript-language-features/./node_modules/@vscode/sync-api-service/lib/main.js","webpack://typescript-language-features/./src/commands/openJsDocLink.ts","webpack://typescript-language-features/./src/languageFeatures/directiveCommentCompletions.ts","webpack://typescript-language-features/./src/tsServer/versionProvider.ts","webpack://typescript-language-features/./src/utils/lazy.ts","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/InternalConstants.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/RandomHelper.js","webpack://typescript-language-features/./src/utils/hash.ts","webpack://typescript-language-features/./node_modules/@vscode/sync-api-common/browser.js","webpack://typescript-language-features/./node_modules/semver/ranges/intersects.js","webpack://typescript-language-features/./node_modules/semver/internal/constants.js","webpack://typescript-language-features/./node_modules/semver/functions/valid.js","webpack://typescript-language-features/./src/tsServer/pluginPathsProvider.ts","webpack://typescript-language-features/./node_modules/semver/functions/lt.js","webpack://typescript-language-features/./node_modules/semver/ranges/outside.js","webpack://typescript-language-features/./src/languageProvider.ts","webpack://typescript-language-features/./src/languageFeatures/util/snippetForFunctionCall.ts","webpack://typescript-language-features/./src/tsServer/spawner.ts","webpack://typescript-language-features/./node_modules/semver/internal/debug.js","webpack://typescript-language-features/./src/commands/useTsgo.ts","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/EnvUtils.js","webpack://typescript-language-features/./src/languageFeatures/refactor.ts","webpack://typescript-language-features/./src/typescriptService.ts","webpack://typescript-language-features/./node_modules/semver/functions/clean.js","webpack://typescript-language-features/./src/configuration/configuration.browser.ts","webpack://typescript-language-features/./src/ui/activeJsTsEditorTracker.ts","webpack://typescript-language-features/./node_modules/semver/ranges/to-comparators.js","webpack://typescript-language-features/./node_modules/semver/functions/satisfies.js","webpack://typescript-language-features/./src/tsServer/logDirectoryProvider.ts","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/Constants.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/DbgExtensionUtils.js","webpack://typescript-language-features/./src/commands/commandManager.ts","webpack://typescript-language-features/./src/tsServer/nodeManager.ts","webpack://typescript-language-features/./src/utils/cancellation.ts","webpack://typescript-language-features/./src/commands/learnMoreAboutRefactorings.ts","webpack://typescript-language-features/./src/languageFeatures/organizeImports.ts","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/PerfManager.js","webpack://typescript-language-features/./src/utils/platform.ts","webpack://typescript-language-features/./node_modules/@nevware21/ts-async/dist/es5/mod/ts-async.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/BaseTelemetryPlugin.js","webpack://typescript-language-features/./node_modules/@microsoft/dynamicproto-js/dist-es5/DynamicProto.js","webpack://typescript-language-features/./node_modules/semver/classes/range.js","webpack://typescript-language-features/./src/languageFeatures/quickFix.ts","webpack://typescript-language-features/./src/utils/relativePathResolver.ts","webpack://typescript-language-features/./src/tsServer/protocol/modifiers.ts","webpack://typescript-language-features/./src/utils/packageInfo.ts","webpack://typescript-language-features/./node_modules/semver/internal/parse-options.js","webpack://typescript-language-features/./node_modules/@vscode/sync-api-common/lib/common/api.js","webpack://typescript-language-features/./node_modules/yallist/yallist.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-post-js/dist-es5/DataModels.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-post-js/dist-es5/InternalConstants.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-post-js/dist-es5/__DynamicConstants.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-post-js/dist-es5/EventBatch.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-post-js/dist-es5/ClockSkewManager.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-post-js/dist-es5/KillSwitch.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-post-js/dist-es5/RetryPolicy.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-post-js/dist-es5/Serializer.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-post-js/dist-es5/HttpManager.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-post-js/dist-es5/TimeoutOverrideWrapper.js","webpack://typescript-language-features/./node_modules/@microsoft/1ds-post-js/dist-es5/PostChannel.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/UnloadHookContainer.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/DynamicSupport.js","webpack://typescript-language-features/./src/languageFeatures/hover.ts","webpack://typescript-language-features/./src/api.ts","webpack://typescript-language-features/./src/ui/typingsStatus.ts","webpack://typescript-language-features/./node_modules/@vscode/ts-package-manager/node-maintainer/node_maintainer.js","webpack://typescript-language-features/./node_modules/@vscode/ts-package-manager/node-maintainer/snippets/wasm-streams-42e57edbcd526312/inline0.js","webpack://typescript-language-features/./node_modules/semver/index.js","webpack://typescript-language-features/./node_modules/semver/ranges/max-satisfying.js","webpack://typescript-language-features/./src/tsServer/fileWatchingManager.ts","webpack://typescript-language-features/./node_modules/@vscode/sync-api-common/lib/common/protocol.js","webpack://typescript-language-features/./src/tsServer/serverProcess.browser.ts","webpack://typescript-language-features/./src/typeScriptServiceClientHost.ts","webpack://typescript-language-features/./node_modules/semver/internal/re.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/AggregationError.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/DynamicProperty.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/DynamicState.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/DynamicConfig.js","webpack://typescript-language-features/./node_modules/@vscode/extension-telemetry/dist/browser/common/baseTelemetrySender.js","webpack://typescript-language-features/./node_modules/@vscode/extension-telemetry/dist/browser/common/util.js","webpack://typescript-language-features/./node_modules/@vscode/extension-telemetry/dist/browser/common/baseTelemetryReporter.js","webpack://typescript-language-features/./node_modules/@vscode/extension-telemetry/dist/browser/browser/telemetryReporter.js","webpack://typescript-language-features/./node_modules/@vscode/extension-telemetry/dist/browser/common/appInsightsClientFactory.js","webpack://typescript-language-features/./node_modules/@vscode/extension-telemetry/dist/browser/common/1dsClientFactory.js","webpack://typescript-language-features/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/CoreUtils.js","webpack://typescript-language-features/../../node_modules/path-browserify/index.js","webpack://typescript-language-features/./src/languageFeatures/formatting.ts","webpack://typescript-language-features/./node_modules/semver/functions/rcompare.js","webpack://typescript-language-features/webpack/bootstrap","webpack://typescript-language-features/webpack/runtime/define property getters","webpack://typescript-language-features/webpack/runtime/global","webpack://typescript-language-features/webpack/runtime/hasOwnProperty shorthand","webpack://typescript-language-features/webpack/runtime/make namespace object","webpack://typescript-language-features/webpack/runtime/importScripts chunk loading","webpack://typescript-language-features/webpack/startup"],"sourcesContent":["/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n/**\r\n * This is an internal property used to cause internal (reporting) requests to be ignored from reporting\r\n * additional telemetry, to handle polyfil implementations ALL urls used with a disabled request will\r\n * also be ignored for future requests even when this property is not provided.\r\n * Tagging as Ignore as this is an internal value and is not expected to be used outside of the SDK\r\n * @ignore\r\n */\r\nexport var DisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nexport var SampleRate = \"sampleRate\";\r\nexport var ProcessLegacy = \"ProcessLegacy\";\r\nexport var HttpMethod = \"http.method\";\r\nexport var DEFAULT_BREEZE_ENDPOINT = \"https://dc.services.visualstudio.com\";\r\nexport var DEFAULT_BREEZE_PATH = \"/v2/track\";\r\nexport var strNotSpecified = \"not_specified\";\r\nexport var strIkey = \"iKey\";\r\n//# sourceMappingURL=Constants.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_SPLIT = \"split\"; // Count: 6\r\nexport var _DYN_LENGTH = \"length\"; // Count: 41\r\nexport var _DYN_TO_LOWER_CASE = \"toLowerCase\"; // Count: 6\r\nexport var _DYN_INGESTIONENDPOINT = \"ingestionendpoint\"; // Count: 6\r\nexport var _DYN_TO_STRING = \"toString\"; // Count: 9\r\nexport var _DYN_PUSH = \"push\"; // Count: 5\r\nexport var _DYN_REMOVE_ITEM = \"removeItem\"; // Count: 3\r\nexport var _DYN_NAME = \"name\"; // Count: 11\r\nexport var _DYN_MESSAGE = \"message\"; // Count: 10\r\nexport var _DYN_COUNT = \"count\"; // Count: 8\r\nexport var _DYN_PRE_TRIGGER_DATE = \"preTriggerDate\"; // Count: 4\r\nexport var _DYN_DISABLED = \"disabled\"; // Count: 3\r\nexport var _DYN_INTERVAL = \"interval\"; // Count: 3\r\nexport var _DYN_DAYS_OF_MONTH = \"daysOfMonth\"; // Count: 3\r\nexport var _DYN_DATE = \"date\"; // Count: 5\r\nexport var _DYN_GET_UTCDATE = \"getUTCDate\"; // Count: 3\r\nexport var _DYN_STRINGIFY = \"stringify\"; // Count: 4\r\nexport var _DYN_PATHNAME = \"pathname\"; // Count: 4\r\nexport var _DYN_CORRELATION_HEADER_E0 = \"correlationHeaderExcludePatterns\"; // Count: 2\r\nexport var _DYN_EXTENSION_CONFIG = \"extensionConfig\"; // Count: 4\r\nexport var _DYN_EXCEPTIONS = \"exceptions\"; // Count: 6\r\nexport var _DYN_PARSED_STACK = \"parsedStack\"; // Count: 13\r\nexport var _DYN_PROPERTIES = \"properties\"; // Count: 9\r\nexport var _DYN_MEASUREMENTS = \"measurements\"; // Count: 9\r\nexport var _DYN_SIZE_IN_BYTES = \"sizeInBytes\"; // Count: 11\r\nexport var _DYN_TYPE_NAME = \"typeName\"; // Count: 11\r\nexport var _DYN_SEVERITY_LEVEL = \"severityLevel\"; // Count: 5\r\nexport var _DYN_PROBLEM_GROUP = \"problemGroup\"; // Count: 3\r\nexport var _DYN_IS_MANUAL = \"isManual\"; // Count: 3\r\nexport var _DYN__CREATE_FROM_INTERFA1 = \"CreateFromInterface\"; // Count: 2\r\nexport var _DYN_ASSEMBLY = \"assembly\"; // Count: 7\r\nexport var _DYN_FILE_NAME = \"fileName\"; // Count: 8\r\nexport var _DYN_HAS_FULL_STACK = \"hasFullStack\"; // Count: 6\r\nexport var _DYN_LEVEL = \"level\"; // Count: 5\r\nexport var _DYN_METHOD = \"method\"; // Count: 7\r\nexport var _DYN_LINE = \"line\"; // Count: 6\r\nexport var _DYN_DURATION = \"duration\"; // Count: 4\r\nexport var _DYN_RECEIVED_RESPONSE = \"receivedResponse\"; // Count: 2\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _throwInternal, getJSON, hasJSON, isObject, objForEachKey, strTrim } from \"@microsoft/applicationinsights-core-js\";\r\nimport { asString, strSubstr, strSubstring } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH, _DYN_STRINGIFY, _DYN_TO_STRING } from \"../../__DynamicConstants\";\r\nexport function dataSanitizeKeyAndAddUniqueness(logger, key, map) {\r\n    var origLength = key[_DYN_LENGTH /* @min:%2elength */];\r\n    var field = dataSanitizeKey(logger, key);\r\n    // validation truncated the length.  We need to add uniqueness\r\n    if (field[_DYN_LENGTH /* @min:%2elength */] !== origLength) {\r\n        var i = 0;\r\n        var uniqueField = field;\r\n        while (map[uniqueField] !== undefined) {\r\n            i++;\r\n            uniqueField = strSubstring(field, 0, 150 /* DataSanitizerValues.MAX_NAME_LENGTH */ - 3) + dsPadNumber(i);\r\n        }\r\n        field = uniqueField;\r\n    }\r\n    return field;\r\n}\r\nexport function dataSanitizeKey(logger, name) {\r\n    var nameTrunc;\r\n    if (name) {\r\n        // Remove any leading or trailing whitespace\r\n        name = strTrim(asString(name));\r\n        // truncate the string to 150 chars\r\n        if (name[_DYN_LENGTH /* @min:%2elength */] > 150 /* DataSanitizerValues.MAX_NAME_LENGTH */) {\r\n            nameTrunc = strSubstring(name, 0, 150 /* DataSanitizerValues.MAX_NAME_LENGTH */);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 57 /* _eInternalMessageId.NameTooLong */, \"name is too long.  It has been truncated to \" + 150 /* DataSanitizerValues.MAX_NAME_LENGTH */ + \" characters.\", { name: name }, true);\r\n        }\r\n    }\r\n    return nameTrunc || name;\r\n}\r\nexport function dataSanitizeString(logger, value, maxLength) {\r\n    if (maxLength === void 0) { maxLength = 1024 /* DataSanitizerValues.MAX_STRING_LENGTH */; }\r\n    var valueTrunc;\r\n    if (value) {\r\n        maxLength = maxLength ? maxLength : 1024 /* DataSanitizerValues.MAX_STRING_LENGTH */; // in case default parameters dont work\r\n        value = strTrim(asString(value));\r\n        if (value[_DYN_LENGTH /* @min:%2elength */] > maxLength) {\r\n            valueTrunc = strSubstring(value, 0, maxLength);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 61 /* _eInternalMessageId.StringValueTooLong */, \"string value is too long. It has been truncated to \" + maxLength + \" characters.\", { value: value }, true);\r\n        }\r\n    }\r\n    return valueTrunc || value;\r\n}\r\nexport function dataSanitizeUrl(logger, url) {\r\n    return dataSanitizeInput(logger, url, 2048 /* DataSanitizerValues.MAX_URL_LENGTH */, 66 /* _eInternalMessageId.UrlTooLong */);\r\n}\r\nexport function dataSanitizeMessage(logger, message) {\r\n    var messageTrunc;\r\n    if (message) {\r\n        if (message[_DYN_LENGTH /* @min:%2elength */] > 32768 /* DataSanitizerValues.MAX_MESSAGE_LENGTH */) {\r\n            messageTrunc = strSubstring(message, 0, 32768 /* DataSanitizerValues.MAX_MESSAGE_LENGTH */);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 56 /* _eInternalMessageId.MessageTruncated */, \"message is too long, it has been truncated to \" + 32768 /* DataSanitizerValues.MAX_MESSAGE_LENGTH */ + \" characters.\", { message: message }, true);\r\n        }\r\n    }\r\n    return messageTrunc || message;\r\n}\r\nexport function dataSanitizeException(logger, exception) {\r\n    var exceptionTrunc;\r\n    if (exception) {\r\n        // Make surte its a string\r\n        var value = \"\" + exception;\r\n        if (value[_DYN_LENGTH /* @min:%2elength */] > 32768 /* DataSanitizerValues.MAX_EXCEPTION_LENGTH */) {\r\n            exceptionTrunc = strSubstring(value, 0, 32768 /* DataSanitizerValues.MAX_EXCEPTION_LENGTH */);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 52 /* _eInternalMessageId.ExceptionTruncated */, \"exception is too long, it has been truncated to \" + 32768 /* DataSanitizerValues.MAX_EXCEPTION_LENGTH */ + \" characters.\", { exception: exception }, true);\r\n        }\r\n    }\r\n    return exceptionTrunc || exception;\r\n}\r\nexport function dataSanitizeProperties(logger, properties) {\r\n    if (properties) {\r\n        var tempProps_1 = {};\r\n        objForEachKey(properties, function (prop, value) {\r\n            if (isObject(value) && hasJSON()) {\r\n                // Stringify any part C properties\r\n                try {\r\n                    value = getJSON()[_DYN_STRINGIFY /* @min:%2estringify */](value);\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 49 /* _eInternalMessageId.CannotSerializeObjectNonSerializable */, \"custom property is not valid\", { exception: e }, true);\r\n                }\r\n            }\r\n            value = dataSanitizeString(logger, value, 8192 /* DataSanitizerValues.MAX_PROPERTY_LENGTH */);\r\n            prop = dataSanitizeKeyAndAddUniqueness(logger, prop, tempProps_1);\r\n            tempProps_1[prop] = value;\r\n        });\r\n        properties = tempProps_1;\r\n    }\r\n    return properties;\r\n}\r\nexport function dataSanitizeMeasurements(logger, measurements) {\r\n    if (measurements) {\r\n        var tempMeasurements_1 = {};\r\n        objForEachKey(measurements, function (measure, value) {\r\n            measure = dataSanitizeKeyAndAddUniqueness(logger, measure, tempMeasurements_1);\r\n            tempMeasurements_1[measure] = value;\r\n        });\r\n        measurements = tempMeasurements_1;\r\n    }\r\n    return measurements;\r\n}\r\nexport function dataSanitizeId(logger, id) {\r\n    return id ? dataSanitizeInput(logger, id, 128 /* DataSanitizerValues.MAX_ID_LENGTH */, 69 /* _eInternalMessageId.IdTooLong */)[_DYN_TO_STRING /* @min:%2etoString */]() : id;\r\n}\r\nexport function dataSanitizeInput(logger, input, maxLength, _msgId) {\r\n    var inputTrunc;\r\n    if (input) {\r\n        input = strTrim(asString(input));\r\n        if (input[_DYN_LENGTH /* @min:%2elength */] > maxLength) {\r\n            inputTrunc = strSubstring(input, 0, maxLength);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, _msgId, \"input is too long, it has been truncated to \" + maxLength + \" characters.\", { data: input }, true);\r\n        }\r\n    }\r\n    return inputTrunc || input;\r\n}\r\nexport function dsPadNumber(num) {\r\n    var s = \"00\" + num;\r\n    return strSubstr(s, s[_DYN_LENGTH /* @min:%2elength */] - 3);\r\n}\r\n//# sourceMappingURL=DataSanitizer.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString } from \"./Common/DataSanitizer\";\r\nvar Event = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the EventTelemetry object\r\n     */\r\n    function Event(logger, name, properties, measurements) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            name: 1 /* FieldType.Required */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n    }\r\n    Event.envelopeType = \"Microsoft.ApplicationInsights.{0}.Event\";\r\n    Event.dataType = \"EventData\";\r\n    return Event;\r\n}());\r\nexport { Event };\r\n//# sourceMappingURL=Event.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_MEASUREMENTS, _DYN_MESSAGE, _DYN_PROPERTIES, _DYN_SEVERITY_LEVEL } from \"../__DynamicConstants\";\r\nimport { dataSanitizeMeasurements, dataSanitizeMessage, dataSanitizeProperties } from \"./Common/DataSanitizer\";\r\nvar Trace = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the TraceTelemetry object\r\n     */\r\n    function Trace(logger, message, severityLevel, properties, measurements) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            message: 1 /* FieldType.Required */,\r\n            severityLevel: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        message = message || strNotSpecified;\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] = dataSanitizeMessage(logger, message);\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n        if (severityLevel) {\r\n            _self[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */] = severityLevel;\r\n        }\r\n    }\r\n    Trace.envelopeType = \"Microsoft.ApplicationInsights.{0}.Message\";\r\n    Trace.dataType = \"MessageData\";\r\n    return Trace;\r\n}());\r\nexport { Trace };\r\n//# sourceMappingURL=Trace.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, isString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_LENGTH, _DYN_TO_LOWER_CASE } from \"./__DynamicConstants\";\r\nvar strEmpty = \"\";\r\nexport function stringToBoolOrDefault(str, defaultValue) {\r\n    if (defaultValue === void 0) { defaultValue = false; }\r\n    if (str === undefined || str === null) {\r\n        return defaultValue;\r\n    }\r\n    return str.toString()[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() === \"true\";\r\n}\r\n/**\r\n * Convert ms to c# time span format\r\n */\r\nexport function msToTimeSpan(totalms) {\r\n    if (isNaN(totalms) || totalms < 0) {\r\n        totalms = 0;\r\n    }\r\n    totalms = Math.round(totalms);\r\n    var ms = strEmpty + totalms % 1000;\r\n    var sec = strEmpty + Math.floor(totalms / 1000) % 60;\r\n    var min = strEmpty + Math.floor(totalms / (1000 * 60)) % 60;\r\n    var hour = strEmpty + Math.floor(totalms / (1000 * 60 * 60)) % 24;\r\n    var days = Math.floor(totalms / (1000 * 60 * 60 * 24));\r\n    ms = ms[_DYN_LENGTH /* @min:%2elength */] === 1 ? \"00\" + ms : ms[_DYN_LENGTH /* @min:%2elength */] === 2 ? \"0\" + ms : ms;\r\n    sec = sec[_DYN_LENGTH /* @min:%2elength */] < 2 ? \"0\" + sec : sec;\r\n    min = min[_DYN_LENGTH /* @min:%2elength */] < 2 ? \"0\" + min : min;\r\n    hour = hour[_DYN_LENGTH /* @min:%2elength */] < 2 ? \"0\" + hour : hour;\r\n    return (days > 0 ? days + \".\" : strEmpty) + hour + \":\" + min + \":\" + sec + \".\" + ms;\r\n}\r\nexport function getExtensionByName(extensions, identifier) {\r\n    var extension = null;\r\n    arrForEach(extensions, function (value) {\r\n        if (value.identifier === identifier) {\r\n            extension = value;\r\n            return -1;\r\n        }\r\n    });\r\n    return extension;\r\n}\r\nexport function isCrossOriginError(message, url, lineNumber, columnNumber, error) {\r\n    return !error && isString(message) && (message === \"Script error.\" || message === \"Script error\");\r\n}\r\n//# sourceMappingURL=HelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { msToTimeSpan } from \"../HelperFuncs\";\r\nimport { _DYN_DURATION, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { dataSanitizeId, dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString, dataSanitizeUrl } from \"./Common/DataSanitizer\";\r\nvar PageView = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the PageEventTelemetry object\r\n     */\r\n    function PageView(logger, name, url, durationMs, properties, measurements, id) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            name: 0 /* FieldType.Default */,\r\n            url: 0 /* FieldType.Default */,\r\n            duration: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */,\r\n            id: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        _self.id = dataSanitizeId(logger, id);\r\n        _self.url = dataSanitizeUrl(logger, url);\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        if (!isNaN(durationMs)) {\r\n            _self[_DYN_DURATION /* @min:%2eduration */] = msToTimeSpan(durationMs);\r\n        }\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n    }\r\n    PageView.envelopeType = \"Microsoft.ApplicationInsights.{0}.Pageview\";\r\n    PageView.dataType = \"PageviewData\";\r\n    return PageView;\r\n}());\r\nexport { PageView };\r\n//# sourceMappingURL=PageView.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_DURATION, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES, _DYN_RECEIVED_RESPONSE } from \"../__DynamicConstants\";\r\nimport { dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString, dataSanitizeUrl } from \"./Common/DataSanitizer\";\r\nvar PageViewPerformance = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the PageEventTelemetry object\r\n     */\r\n    function PageViewPerformance(logger, name, url, unused, properties, measurements, cs4BaseData) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            name: 0 /* FieldType.Default */,\r\n            url: 0 /* FieldType.Default */,\r\n            duration: 0 /* FieldType.Default */,\r\n            perfTotal: 0 /* FieldType.Default */,\r\n            networkConnect: 0 /* FieldType.Default */,\r\n            sentRequest: 0 /* FieldType.Default */,\r\n            receivedResponse: 0 /* FieldType.Default */,\r\n            domProcessing: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        _self.url = dataSanitizeUrl(logger, url);\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n        if (cs4BaseData) {\r\n            _self.domProcessing = cs4BaseData.domProcessing;\r\n            _self[_DYN_DURATION /* @min:%2eduration */] = cs4BaseData[_DYN_DURATION /* @min:%2eduration */];\r\n            _self.networkConnect = cs4BaseData.networkConnect;\r\n            _self.perfTotal = cs4BaseData.perfTotal;\r\n            _self[_DYN_RECEIVED_RESPONSE /* @min:%2ereceivedResponse */] = cs4BaseData[_DYN_RECEIVED_RESPONSE /* @min:%2ereceivedResponse */];\r\n            _self.sentRequest = cs4BaseData.sentRequest;\r\n        }\r\n    }\r\n    PageViewPerformance.envelopeType = \"Microsoft.ApplicationInsights.{0}.PageviewPerformance\";\r\n    PageViewPerformance.dataType = \"PageviewPerformanceData\";\r\n    return PageViewPerformance;\r\n}());\r\nexport { PageViewPerformance };\r\n//# sourceMappingURL=PageViewPerformance.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { __assignFn as __assign } from \"@microsoft/applicationinsights-shims\";\r\nimport { arrForEach, arrMap, isArray, isError, isFunction, isNullOrUndefined, isObject, isString, strTrim } from \"@microsoft/applicationinsights-core-js\";\r\nimport { getWindow, strIndexOf } from \"@nevware21/ts-utils\";\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_ASSEMBLY, _DYN_EXCEPTIONS, _DYN_FILE_NAME, _DYN_HAS_FULL_STACK, _DYN_IS_MANUAL, _DYN_LENGTH, _DYN_LEVEL, _DYN_LINE, _DYN_MEASUREMENTS, _DYN_MESSAGE, _DYN_METHOD, _DYN_NAME, _DYN_PARSED_STACK, _DYN_PROBLEM_GROUP, _DYN_PROPERTIES, _DYN_PUSH, _DYN_SEVERITY_LEVEL, _DYN_SIZE_IN_BYTES, _DYN_SPLIT, _DYN_STRINGIFY, _DYN_TO_STRING, _DYN_TYPE_NAME, _DYN__CREATE_FROM_INTERFA1 } from \"../__DynamicConstants\";\r\nimport { dataSanitizeException, dataSanitizeMeasurements, dataSanitizeMessage, dataSanitizeProperties, dataSanitizeString } from \"./Common/DataSanitizer\";\r\nvar NoMethod = \"<no_method>\";\r\nvar strError = \"error\";\r\nvar strStack = \"stack\";\r\nvar strStackDetails = \"stackDetails\";\r\nvar strErrorSrc = \"errorSrc\";\r\nvar strMessage = \"message\";\r\nvar strDescription = \"description\";\r\nfunction _stringify(value, convertToString) {\r\n    var result = value;\r\n    if (result && !isString(result)) {\r\n        if (JSON && JSON[_DYN_STRINGIFY /* @min:%2estringify */]) {\r\n            result = JSON[_DYN_STRINGIFY /* @min:%2estringify */](value);\r\n            if (convertToString && (!result || result === \"{}\")) {\r\n                if (isFunction(value[_DYN_TO_STRING /* @min:%2etoString */])) {\r\n                    result = value[_DYN_TO_STRING /* @min:%2etoString */]();\r\n                }\r\n                else {\r\n                    result = \"\" + value;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            result = \"\" + value + \" - (Missing JSON.stringify)\";\r\n        }\r\n    }\r\n    return result || \"\";\r\n}\r\nfunction _formatMessage(theEvent, errorType) {\r\n    var evtMessage = theEvent;\r\n    if (theEvent) {\r\n        if (evtMessage && !isString(evtMessage)) {\r\n            evtMessage = theEvent[strMessage] || theEvent[strDescription] || evtMessage;\r\n        }\r\n        // Make sure the message is a string\r\n        if (evtMessage && !isString(evtMessage)) {\r\n            // tslint:disable-next-line: prefer-conditional-expression\r\n            evtMessage = _stringify(evtMessage, true);\r\n        }\r\n        if (theEvent[\"filename\"]) {\r\n            // Looks like an event object with filename\r\n            evtMessage = evtMessage + \" @\" + (theEvent[\"filename\"] || \"\") + \":\" + (theEvent[\"lineno\"] || \"?\") + \":\" + (theEvent[\"colno\"] || \"?\");\r\n        }\r\n    }\r\n    // Automatically add the error type to the message if it does already appear to be present\r\n    if (errorType && errorType !== \"String\" && errorType !== \"Object\" && errorType !== \"Error\" && strIndexOf(evtMessage || \"\", errorType) === -1) {\r\n        evtMessage = errorType + \": \" + evtMessage;\r\n    }\r\n    return evtMessage || \"\";\r\n}\r\nfunction _isExceptionDetailsInternal(value) {\r\n    try {\r\n        if (isObject(value)) {\r\n            return \"hasFullStack\" in value && \"typeName\" in value;\r\n        }\r\n    }\r\n    catch (e) {\r\n        // This can happen with some native browser objects, but should not happen for the type we are checking for\r\n    }\r\n    return false;\r\n}\r\nfunction _isExceptionInternal(value) {\r\n    try {\r\n        if (isObject(value)) {\r\n            return (\"ver\" in value && \"exceptions\" in value && \"properties\" in value);\r\n        }\r\n    }\r\n    catch (e) {\r\n        // This can happen with some native browser objects, but should not happen for the type we are checking for\r\n    }\r\n    return false;\r\n}\r\nfunction _isStackDetails(details) {\r\n    return details && details.src && isString(details.src) && details.obj && isArray(details.obj);\r\n}\r\nfunction _convertStackObj(errorStack) {\r\n    var src = errorStack || \"\";\r\n    if (!isString(src)) {\r\n        if (isString(src[strStack])) {\r\n            src = src[strStack];\r\n        }\r\n        else {\r\n            src = \"\" + src;\r\n        }\r\n    }\r\n    var items = src[_DYN_SPLIT /* @min:%2esplit */](\"\\n\");\r\n    return {\r\n        src: src,\r\n        obj: items\r\n    };\r\n}\r\nfunction _getOperaStack(errorMessage) {\r\n    var stack = [];\r\n    var lines = errorMessage[_DYN_SPLIT /* @min:%2esplit */](\"\\n\");\r\n    for (var lp = 0; lp < lines[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n        var entry = lines[lp];\r\n        if (lines[lp + 1]) {\r\n            entry += \"@\" + lines[lp + 1];\r\n            lp++;\r\n        }\r\n        stack[_DYN_PUSH /* @min:%2epush */](entry);\r\n    }\r\n    return {\r\n        src: errorMessage,\r\n        obj: stack\r\n    };\r\n}\r\nfunction _getStackFromErrorObj(errorObj) {\r\n    var details = null;\r\n    if (errorObj) {\r\n        try {\r\n            /* Using bracket notation is support older browsers (IE 7/8 -- dont remember the version) that throw when using dot\r\n            notation for undefined objects and we don't want to loose the error from being reported */\r\n            if (errorObj[strStack]) {\r\n                // Chrome/Firefox\r\n                details = _convertStackObj(errorObj[strStack]);\r\n            }\r\n            else if (errorObj[strError] && errorObj[strError][strStack]) {\r\n                // Edge error event provides the stack and error object\r\n                details = _convertStackObj(errorObj[strError][strStack]);\r\n            }\r\n            else if (errorObj[\"exception\"] && errorObj.exception[strStack]) {\r\n                details = _convertStackObj(errorObj.exception[strStack]);\r\n            }\r\n            else if (_isStackDetails(errorObj)) {\r\n                details = errorObj;\r\n            }\r\n            else if (_isStackDetails(errorObj[strStackDetails])) {\r\n                details = errorObj[strStackDetails];\r\n            }\r\n            else if (getWindow() && getWindow()[\"opera\"] && errorObj[strMessage]) {\r\n                // Opera\r\n                details = _getOperaStack(errorObj[_DYN_MESSAGE /* @min:%2emessage */]);\r\n            }\r\n            else if (errorObj[\"reason\"] && errorObj.reason[strStack]) {\r\n                // UnhandledPromiseRejection\r\n                details = _convertStackObj(errorObj.reason[strStack]);\r\n            }\r\n            else if (isString(errorObj)) {\r\n                details = _convertStackObj(errorObj);\r\n            }\r\n            else {\r\n                var evtMessage = errorObj[strMessage] || errorObj[strDescription] || \"\";\r\n                if (isString(errorObj[strErrorSrc])) {\r\n                    if (evtMessage) {\r\n                        evtMessage += \"\\n\";\r\n                    }\r\n                    evtMessage += \" from \" + errorObj[strErrorSrc];\r\n                }\r\n                if (evtMessage) {\r\n                    details = _convertStackObj(evtMessage);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // something unexpected happened so to avoid failing to report any error lets swallow the exception\r\n            // and fallback to the callee/caller method\r\n            details = _convertStackObj(e);\r\n        }\r\n    }\r\n    return details || {\r\n        src: \"\",\r\n        obj: null\r\n    };\r\n}\r\nfunction _formatStackTrace(stackDetails) {\r\n    var stack = \"\";\r\n    if (stackDetails) {\r\n        if (stackDetails.obj) {\r\n            arrForEach(stackDetails.obj, function (entry) {\r\n                stack += entry + \"\\n\";\r\n            });\r\n        }\r\n        else {\r\n            stack = stackDetails.src || \"\";\r\n        }\r\n    }\r\n    return stack;\r\n}\r\nfunction _parseStack(stack) {\r\n    var parsedStack;\r\n    var frames = stack.obj;\r\n    if (frames && frames[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        parsedStack = [];\r\n        var level_1 = 0;\r\n        var totalSizeInBytes_1 = 0;\r\n        arrForEach(frames, function (frame) {\r\n            var theFrame = frame[_DYN_TO_STRING /* @min:%2etoString */]();\r\n            if (_StackFrame.regex.test(theFrame)) {\r\n                var parsedFrame = new _StackFrame(theFrame, level_1++);\r\n                totalSizeInBytes_1 += parsedFrame[_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */];\r\n                parsedStack[_DYN_PUSH /* @min:%2epush */](parsedFrame);\r\n            }\r\n        });\r\n        // DP Constraint - exception parsed stack must be < 32KB\r\n        // remove frames from the middle to meet the threshold\r\n        var exceptionParsedStackThreshold = 32 * 1024;\r\n        if (totalSizeInBytes_1 > exceptionParsedStackThreshold) {\r\n            var left = 0;\r\n            var right = parsedStack[_DYN_LENGTH /* @min:%2elength */] - 1;\r\n            var size = 0;\r\n            var acceptedLeft = left;\r\n            var acceptedRight = right;\r\n            while (left < right) {\r\n                // check size\r\n                var lSize = parsedStack[left][_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */];\r\n                var rSize = parsedStack[right][_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */];\r\n                size += lSize + rSize;\r\n                if (size > exceptionParsedStackThreshold) {\r\n                    // remove extra frames from the middle\r\n                    var howMany = acceptedRight - acceptedLeft + 1;\r\n                    parsedStack.splice(acceptedLeft, howMany);\r\n                    break;\r\n                }\r\n                // update pointers\r\n                acceptedLeft = left;\r\n                acceptedRight = right;\r\n                left++;\r\n                right--;\r\n            }\r\n        }\r\n    }\r\n    return parsedStack;\r\n}\r\nfunction _getErrorType(errorType) {\r\n    // Gets the Error Type by passing the constructor (used to get the true type of native error object).\r\n    var typeName = \"\";\r\n    if (errorType) {\r\n        typeName = errorType.typeName || errorType[_DYN_NAME /* @min:%2ename */] || \"\";\r\n        if (!typeName) {\r\n            try {\r\n                var funcNameRegex = /function (.{1,200})\\(/;\r\n                var results = (funcNameRegex).exec((errorType).constructor[_DYN_TO_STRING /* @min:%2etoString */]());\r\n                typeName = (results && results[_DYN_LENGTH /* @min:%2elength */] > 1) ? results[1] : \"\";\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-empty -- Ignoring any failures as nothing we can do\r\n            }\r\n        }\r\n    }\r\n    return typeName;\r\n}\r\n/**\r\n * Formats the provided errorObj for display and reporting, it may be a String, Object, integer or undefined depending on the browser.\r\n * @param errorObj - The supplied errorObj\r\n */\r\nexport function _formatErrorCode(errorObj) {\r\n    if (errorObj) {\r\n        try {\r\n            if (!isString(errorObj)) {\r\n                var errorType = _getErrorType(errorObj);\r\n                var result = _stringify(errorObj, false);\r\n                if (!result || result === \"{}\") {\r\n                    if (errorObj[strError]) {\r\n                        // Looks like an MS Error Event\r\n                        errorObj = errorObj[strError];\r\n                        errorType = _getErrorType(errorObj);\r\n                    }\r\n                    result = _stringify(errorObj, true);\r\n                }\r\n                if (strIndexOf(result, errorType) !== 0 && errorType !== \"String\") {\r\n                    return errorType + \":\" + result;\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n        catch (e) {\r\n            // eslint-disable-next-line no-empty -- Ignoring any failures as nothing we can do\r\n        }\r\n    }\r\n    // Fallback to just letting the object format itself into a string\r\n    return \"\" + (errorObj || \"\");\r\n}\r\nvar Exception = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the ExceptionTelemetry object\r\n     */\r\n    function Exception(logger, exception, properties, measurements, severityLevel, id) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            exceptions: 1 /* FieldType.Required */,\r\n            severityLevel: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2; // TODO: handle the CS\"4.0\" ==> breeze 2 conversion in a better way\r\n        if (!_isExceptionInternal(exception)) {\r\n            if (!properties) {\r\n                properties = {};\r\n            }\r\n            if (id) {\r\n                properties.id = id;\r\n            }\r\n            _self[_DYN_EXCEPTIONS /* @min:%2eexceptions */] = [new _ExceptionDetails(logger, exception, properties)];\r\n            _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n            _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n            if (severityLevel) {\r\n                _self[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */] = severityLevel;\r\n            }\r\n            if (id) {\r\n                _self.id = id;\r\n            }\r\n        }\r\n        else {\r\n            _self[_DYN_EXCEPTIONS /* @min:%2eexceptions */] = exception[_DYN_EXCEPTIONS /* @min:%2eexceptions */] || [];\r\n            _self[_DYN_PROPERTIES /* @min:%2eproperties */] = exception[_DYN_PROPERTIES /* @min:%2eproperties */];\r\n            _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = exception[_DYN_MEASUREMENTS /* @min:%2emeasurements */];\r\n            if (exception[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */]) {\r\n                _self[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */] = exception[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */];\r\n            }\r\n            if (exception.id) {\r\n                _self.id = exception.id;\r\n                exception[_DYN_PROPERTIES /* @min:%2eproperties */].id = exception.id;\r\n            }\r\n            if (exception[_DYN_PROBLEM_GROUP /* @min:%2eproblemGroup */]) {\r\n                _self[_DYN_PROBLEM_GROUP /* @min:%2eproblemGroup */] = exception[_DYN_PROBLEM_GROUP /* @min:%2eproblemGroup */];\r\n            }\r\n            // bool/int types, use isNullOrUndefined\r\n            if (!isNullOrUndefined(exception[_DYN_IS_MANUAL /* @min:%2eisManual */])) {\r\n                _self[_DYN_IS_MANUAL /* @min:%2eisManual */] = exception[_DYN_IS_MANUAL /* @min:%2eisManual */];\r\n            }\r\n        }\r\n    }\r\n    Exception.CreateAutoException = function (message, url, lineNumber, columnNumber, error, evt, stack, errorSrc) {\r\n        var _a;\r\n        var errorType = _getErrorType(error || evt || message);\r\n        return _a = {},\r\n            _a[_DYN_MESSAGE /* @min:message */] = _formatMessage(message, errorType),\r\n            _a.url = url,\r\n            _a.lineNumber = lineNumber,\r\n            _a.columnNumber = columnNumber,\r\n            _a.error = _formatErrorCode(error || evt || message),\r\n            _a.evt = _formatErrorCode(evt || message),\r\n            _a[_DYN_TYPE_NAME /* @min:typeName */] = errorType,\r\n            _a.stackDetails = _getStackFromErrorObj(stack || error || evt),\r\n            _a.errorSrc = errorSrc,\r\n            _a;\r\n    };\r\n    Exception.CreateFromInterface = function (logger, exception, properties, measurements) {\r\n        var exceptions = exception[_DYN_EXCEPTIONS /* @min:%2eexceptions */]\r\n            && arrMap(exception[_DYN_EXCEPTIONS /* @min:%2eexceptions */], function (ex) { return _ExceptionDetails[_DYN__CREATE_FROM_INTERFA1 /* @min:%2eCreateFromInterface */](logger, ex); });\r\n        var exceptionData = new Exception(logger, __assign(__assign({}, exception), { exceptions: exceptions }), properties, measurements);\r\n        return exceptionData;\r\n    };\r\n    Exception.prototype.toInterface = function () {\r\n        var _a;\r\n        var _b = this, exceptions = _b.exceptions, properties = _b.properties, measurements = _b.measurements, severityLevel = _b.severityLevel, problemGroup = _b.problemGroup, id = _b.id, isManual = _b.isManual;\r\n        var exceptionDetailsInterface = exceptions instanceof Array\r\n            && arrMap(exceptions, function (exception) { return exception.toInterface(); })\r\n            || undefined;\r\n        return _a = {\r\n                ver: \"4.0\"\r\n            },\r\n            _a[_DYN_EXCEPTIONS /* @min:exceptions */] = exceptionDetailsInterface,\r\n            _a.severityLevel = severityLevel,\r\n            _a.properties = properties,\r\n            _a.measurements = measurements,\r\n            _a.problemGroup = problemGroup,\r\n            _a.id = id,\r\n            _a.isManual = isManual,\r\n            _a;\r\n    };\r\n    /**\r\n     * Creates a simple exception with 1 stack frame. Useful for manual constracting of exception.\r\n     */\r\n    Exception.CreateSimpleException = function (message, typeName, assembly, fileName, details, line) {\r\n        var _a;\r\n        return {\r\n            exceptions: [\r\n                (_a = {},\r\n                    _a[_DYN_HAS_FULL_STACK /* @min:hasFullStack */] = true,\r\n                    _a.message = message,\r\n                    _a.stack = details,\r\n                    _a.typeName = typeName,\r\n                    _a)\r\n            ]\r\n        };\r\n    };\r\n    Exception.envelopeType = \"Microsoft.ApplicationInsights.{0}.Exception\";\r\n    Exception.dataType = \"ExceptionData\";\r\n    Exception.formatError = _formatErrorCode;\r\n    return Exception;\r\n}());\r\nexport { Exception };\r\nvar _ExceptionDetails = /** @class */ (function () {\r\n    function _ExceptionDetails(logger, exception, properties) {\r\n        this.aiDataContract = {\r\n            id: 0 /* FieldType.Default */,\r\n            outerId: 0 /* FieldType.Default */,\r\n            typeName: 1 /* FieldType.Required */,\r\n            message: 1 /* FieldType.Required */,\r\n            hasFullStack: 0 /* FieldType.Default */,\r\n            stack: 0 /* FieldType.Default */,\r\n            parsedStack: 2 /* FieldType.Array */\r\n        };\r\n        var _self = this;\r\n        if (!_isExceptionDetailsInternal(exception)) {\r\n            var error = exception;\r\n            var evt = error && error.evt;\r\n            if (!isError(error)) {\r\n                error = error[strError] || evt || error;\r\n            }\r\n            _self[_DYN_TYPE_NAME /* @min:%2etypeName */] = dataSanitizeString(logger, _getErrorType(error)) || strNotSpecified;\r\n            _self[_DYN_MESSAGE /* @min:%2emessage */] = dataSanitizeMessage(logger, _formatMessage(exception || error, _self[_DYN_TYPE_NAME /* @min:%2etypeName */])) || strNotSpecified;\r\n            var stack = exception[strStackDetails] || _getStackFromErrorObj(exception);\r\n            _self[_DYN_PARSED_STACK /* @min:%2eparsedStack */] = _parseStack(stack);\r\n            // after parsedStack is inited, iterate over each frame object, sanitize its assembly field\r\n            if (isArray(_self[_DYN_PARSED_STACK /* @min:%2eparsedStack */])) {\r\n                arrMap(_self[_DYN_PARSED_STACK /* @min:%2eparsedStack */], function (frame) {\r\n                    frame[_DYN_ASSEMBLY /* @min:%2eassembly */] = dataSanitizeString(logger, frame[_DYN_ASSEMBLY /* @min:%2eassembly */]);\r\n                    frame[_DYN_FILE_NAME /* @min:%2efileName */] = dataSanitizeString(logger, frame[_DYN_FILE_NAME /* @min:%2efileName */]);\r\n                });\r\n            }\r\n            _self[strStack] = dataSanitizeException(logger, _formatStackTrace(stack));\r\n            _self.hasFullStack = isArray(_self.parsedStack) && _self.parsedStack[_DYN_LENGTH /* @min:%2elength */] > 0;\r\n            if (properties) {\r\n                properties[_DYN_TYPE_NAME /* @min:%2etypeName */] = properties[_DYN_TYPE_NAME /* @min:%2etypeName */] || _self[_DYN_TYPE_NAME /* @min:%2etypeName */];\r\n            }\r\n        }\r\n        else {\r\n            _self[_DYN_TYPE_NAME /* @min:%2etypeName */] = exception[_DYN_TYPE_NAME /* @min:%2etypeName */];\r\n            _self[_DYN_MESSAGE /* @min:%2emessage */] = exception[_DYN_MESSAGE /* @min:%2emessage */];\r\n            _self[strStack] = exception[strStack];\r\n            _self[_DYN_PARSED_STACK /* @min:%2eparsedStack */] = exception[_DYN_PARSED_STACK /* @min:%2eparsedStack */] || [];\r\n            _self[_DYN_HAS_FULL_STACK /* @min:%2ehasFullStack */] = exception[_DYN_HAS_FULL_STACK /* @min:%2ehasFullStack */];\r\n        }\r\n    }\r\n    _ExceptionDetails.prototype.toInterface = function () {\r\n        var _a;\r\n        var _self = this;\r\n        var parsedStack = _self[_DYN_PARSED_STACK /* @min:%2eparsedStack */] instanceof Array\r\n            && arrMap(_self[_DYN_PARSED_STACK /* @min:%2eparsedStack */], function (frame) { return frame.toInterface(); });\r\n        var exceptionDetailsInterface = (_a = {\r\n                id: _self.id,\r\n                outerId: _self.outerId,\r\n                typeName: _self[_DYN_TYPE_NAME /* @min:%2etypeName */],\r\n                message: _self[_DYN_MESSAGE /* @min:%2emessage */],\r\n                hasFullStack: _self[_DYN_HAS_FULL_STACK /* @min:%2ehasFullStack */],\r\n                stack: _self[strStack]\r\n            },\r\n            _a[_DYN_PARSED_STACK /* @min:parsedStack */] = parsedStack || undefined,\r\n            _a);\r\n        return exceptionDetailsInterface;\r\n    };\r\n    _ExceptionDetails.CreateFromInterface = function (logger, exception) {\r\n        var parsedStack = (exception[_DYN_PARSED_STACK /* @min:%2eparsedStack */] instanceof Array\r\n            && arrMap(exception[_DYN_PARSED_STACK /* @min:%2eparsedStack */], function (frame) { return _StackFrame[_DYN__CREATE_FROM_INTERFA1 /* @min:%2eCreateFromInterface */](frame); }))\r\n            || exception[_DYN_PARSED_STACK /* @min:%2eparsedStack */];\r\n        var exceptionDetails = new _ExceptionDetails(logger, __assign(__assign({}, exception), { parsedStack: parsedStack }));\r\n        return exceptionDetails;\r\n    };\r\n    return _ExceptionDetails;\r\n}());\r\nexport { _ExceptionDetails };\r\nvar _StackFrame = /** @class */ (function () {\r\n    function _StackFrame(sourceFrame, level) {\r\n        this.aiDataContract = {\r\n            level: 1 /* FieldType.Required */,\r\n            method: 1 /* FieldType.Required */,\r\n            assembly: 0 /* FieldType.Default */,\r\n            fileName: 0 /* FieldType.Default */,\r\n            line: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self[_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */] = 0;\r\n        // Not converting this to isString() as typescript uses this logic to \"understand\" the different\r\n        // types for the 2 different code paths\r\n        if (typeof sourceFrame === \"string\") {\r\n            var frame = sourceFrame;\r\n            _self[_DYN_LEVEL /* @min:%2elevel */] = level;\r\n            _self[_DYN_METHOD /* @min:%2emethod */] = NoMethod;\r\n            _self[_DYN_ASSEMBLY /* @min:%2eassembly */] = strTrim(frame);\r\n            _self[_DYN_FILE_NAME /* @min:%2efileName */] = \"\";\r\n            _self[_DYN_LINE /* @min:%2eline */] = 0;\r\n            var matches = frame.match(_StackFrame.regex);\r\n            if (matches && matches[_DYN_LENGTH /* @min:%2elength */] >= 5) {\r\n                _self[_DYN_METHOD /* @min:%2emethod */] = strTrim(matches[2]) || _self[_DYN_METHOD /* @min:%2emethod */];\r\n                _self[_DYN_FILE_NAME /* @min:%2efileName */] = strTrim(matches[4]);\r\n                _self[_DYN_LINE /* @min:%2eline */] = parseInt(matches[5]) || 0;\r\n            }\r\n        }\r\n        else {\r\n            _self[_DYN_LEVEL /* @min:%2elevel */] = sourceFrame[_DYN_LEVEL /* @min:%2elevel */];\r\n            _self[_DYN_METHOD /* @min:%2emethod */] = sourceFrame[_DYN_METHOD /* @min:%2emethod */];\r\n            _self[_DYN_ASSEMBLY /* @min:%2eassembly */] = sourceFrame[_DYN_ASSEMBLY /* @min:%2eassembly */];\r\n            _self[_DYN_FILE_NAME /* @min:%2efileName */] = sourceFrame[_DYN_FILE_NAME /* @min:%2efileName */];\r\n            _self[_DYN_LINE /* @min:%2eline */] = sourceFrame[_DYN_LINE /* @min:%2eline */];\r\n            _self[_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */] = 0;\r\n        }\r\n        _self.sizeInBytes += _self.method[_DYN_LENGTH /* @min:%2elength */];\r\n        _self.sizeInBytes += _self.fileName[_DYN_LENGTH /* @min:%2elength */];\r\n        _self.sizeInBytes += _self.assembly[_DYN_LENGTH /* @min:%2elength */];\r\n        // todo: these might need to be removed depending on how the back-end settles on their size calculation\r\n        _self[_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */] += _StackFrame.baseSize;\r\n        _self.sizeInBytes += _self.level.toString()[_DYN_LENGTH /* @min:%2elength */];\r\n        _self.sizeInBytes += _self.line.toString()[_DYN_LENGTH /* @min:%2elength */];\r\n    }\r\n    _StackFrame.CreateFromInterface = function (frame) {\r\n        return new _StackFrame(frame, null /* level is available in frame interface */);\r\n    };\r\n    _StackFrame.prototype.toInterface = function () {\r\n        var _self = this;\r\n        return {\r\n            level: _self[_DYN_LEVEL /* @min:%2elevel */],\r\n            method: _self[_DYN_METHOD /* @min:%2emethod */],\r\n            assembly: _self[_DYN_ASSEMBLY /* @min:%2eassembly */],\r\n            fileName: _self[_DYN_FILE_NAME /* @min:%2efileName */],\r\n            line: _self[_DYN_LINE /* @min:%2eline */]\r\n        };\r\n    };\r\n    // regex to match stack frames from ie/chrome/ff\r\n    // methodName=$2, fileName=$4, lineNo=$5, column=$6\r\n    _StackFrame.regex = /^([\\s]+at)?[\\s]{0,50}([^\\@\\()]+?)[\\s]{0,50}(\\@|\\()([^\\(\\n]+):([0-9]+):([0-9]+)(\\)?)$/;\r\n    _StackFrame.baseSize = 58; // '{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\r\n    return _StackFrame;\r\n}());\r\nexport { _StackFrame };\r\n//# sourceMappingURL=Exception.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nvar DataPoint = /** @class */ (function () {\r\n    function DataPoint() {\r\n        /**\r\n         * The data contract for serializing this object.\r\n         */\r\n        this.aiDataContract = {\r\n            name: 1 /* FieldType.Required */,\r\n            kind: 0 /* FieldType.Default */,\r\n            value: 1 /* FieldType.Required */,\r\n            count: 0 /* FieldType.Default */,\r\n            min: 0 /* FieldType.Default */,\r\n            max: 0 /* FieldType.Default */,\r\n            stdDev: 0 /* FieldType.Default */\r\n        };\r\n        /**\r\n         * Metric type. Single measurement or the aggregated value.\r\n         */\r\n        this.kind = 0 /* DataPointType.Measurement */;\r\n    }\r\n    return DataPoint;\r\n}());\r\nexport { DataPoint };\r\n//# sourceMappingURL=DataPoint.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_COUNT, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { DataPoint } from \"./Common/DataPoint\";\r\nimport { dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString } from \"./Common/DataSanitizer\";\r\nvar Metric = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the MetricTelemetry object\r\n     */\r\n    function Metric(logger, name, value, count, min, max, stdDev, properties, measurements) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            metrics: 1 /* FieldType.Required */,\r\n            properties: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        var dataPoint = new DataPoint();\r\n        dataPoint[_DYN_COUNT /* @min:%2ecount */] = count > 0 ? count : undefined;\r\n        dataPoint.max = isNaN(max) || max === null ? undefined : max;\r\n        dataPoint.min = isNaN(min) || min === null ? undefined : min;\r\n        dataPoint[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        dataPoint.value = value;\r\n        dataPoint.stdDev = isNaN(stdDev) || stdDev === null ? undefined : stdDev;\r\n        _self.metrics = [dataPoint];\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n    }\r\n    Metric.envelopeType = \"Microsoft.ApplicationInsights.{0}.Metric\";\r\n    Metric.dataType = \"MetricData\";\r\n    return Metric;\r\n}());\r\nexport { Metric };\r\n//# sourceMappingURL=Metric.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { getDocument, isString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_LENGTH, _DYN_PATHNAME, _DYN_TO_LOWER_CASE } from \"./__DynamicConstants\";\r\nvar _document = getDocument() || {};\r\nvar _htmlAnchorIdx = 0;\r\n// Use an array of temporary values as it's possible for multiple calls to parseUrl() will be called with different URLs\r\n// Using a cache size of 5 for now as it current depth usage is at least 2, so adding a minor buffer to handle future updates\r\nvar _htmlAnchorElement = [null, null, null, null, null];\r\nexport function urlParseUrl(url) {\r\n    var anchorIdx = _htmlAnchorIdx;\r\n    var anchorCache = _htmlAnchorElement;\r\n    var tempAnchor = anchorCache[anchorIdx];\r\n    if (!_document.createElement) {\r\n        // Always create the temp instance if createElement is not available\r\n        tempAnchor = { host: urlParseHost(url, true) };\r\n    }\r\n    else if (!anchorCache[anchorIdx]) {\r\n        // Create and cache the unattached anchor instance\r\n        tempAnchor = anchorCache[anchorIdx] = _document.createElement(\"a\");\r\n    }\r\n    tempAnchor.href = url;\r\n    // Move the cache index forward\r\n    anchorIdx++;\r\n    if (anchorIdx >= anchorCache[_DYN_LENGTH /* @min:%2elength */]) {\r\n        anchorIdx = 0;\r\n    }\r\n    _htmlAnchorIdx = anchorIdx;\r\n    return tempAnchor;\r\n}\r\nexport function urlGetAbsoluteUrl(url) {\r\n    var result;\r\n    var a = urlParseUrl(url);\r\n    if (a) {\r\n        result = a.href;\r\n    }\r\n    return result;\r\n}\r\nexport function urlGetPathName(url) {\r\n    var result;\r\n    var a = urlParseUrl(url);\r\n    if (a) {\r\n        result = a[_DYN_PATHNAME /* @min:%2epathname */];\r\n    }\r\n    return result;\r\n}\r\nexport function urlGetCompleteUrl(method, absoluteUrl) {\r\n    if (method) {\r\n        return method.toUpperCase() + \" \" + absoluteUrl;\r\n    }\r\n    return absoluteUrl;\r\n}\r\n// Fallback method to grab host from url if document.createElement method is not available\r\nexport function urlParseHost(url, inclPort) {\r\n    var fullHost = urlParseFullHost(url, inclPort) || \"\";\r\n    if (fullHost) {\r\n        var match = fullHost.match(/(www\\d{0,5}\\.)?([^\\/:]{1,256})(:\\d{1,20})?/i);\r\n        if (match != null && match[_DYN_LENGTH /* @min:%2elength */] > 3 && isString(match[2]) && match[2][_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            return match[2] + (match[3] || \"\");\r\n        }\r\n    }\r\n    return fullHost;\r\n}\r\nexport function urlParseFullHost(url, inclPort) {\r\n    var result = null;\r\n    if (url) {\r\n        var match = url.match(/(\\w{1,150}):\\/\\/([^\\/:]{1,256})(:\\d{1,20})?/i);\r\n        if (match != null && match[_DYN_LENGTH /* @min:%2elength */] > 2 && isString(match[2]) && match[2][_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            result = match[2] || \"\";\r\n            if (inclPort && match[_DYN_LENGTH /* @min:%2elength */] > 2) {\r\n                var protocol = (match[1] || \"\")[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n                var port = match[3] || \"\";\r\n                // IE includes the standard port so pass it off if it's the same as the protocol\r\n                if (protocol === \"http\" && port === \":80\") {\r\n                    port = \"\";\r\n                }\r\n                else if (protocol === \"https\" && port === \":443\") {\r\n                    port = \"\";\r\n                }\r\n                result += port;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=UrlHelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, arrIndexOf, dateNow, getPerformance, isNullOrUndefined, isValidSpanId, isValidTraceId } from \"@microsoft/applicationinsights-core-js\";\r\nimport { strIndexOf } from \"@nevware21/ts-utils\";\r\nimport { DEFAULT_BREEZE_ENDPOINT, DEFAULT_BREEZE_PATH } from \"./Constants\";\r\nimport { RequestHeaders } from \"./RequestResponseHeaders\";\r\nimport { dataSanitizeString } from \"./Telemetry/Common/DataSanitizer\";\r\nimport { urlParseFullHost, urlParseUrl } from \"./UrlHelperFuncs\";\r\nimport { _DYN_CORRELATION_HEADER_E0, _DYN_LENGTH, _DYN_NAME, _DYN_PATHNAME, _DYN_SPLIT, _DYN_TO_LOWER_CASE } from \"./__DynamicConstants\";\r\n// listing only non-geo specific locations\r\nvar _internalEndpoints = [\r\n    DEFAULT_BREEZE_ENDPOINT + DEFAULT_BREEZE_PATH,\r\n    \"https://breeze.aimon.applicationinsights.io\" + DEFAULT_BREEZE_PATH,\r\n    \"https://dc-int.services.visualstudio.com\" + DEFAULT_BREEZE_PATH\r\n];\r\nvar _correlationIdPrefix = \"cid-v1:\";\r\nexport function isInternalApplicationInsightsEndpoint(endpointUrl) {\r\n    return arrIndexOf(_internalEndpoints, endpointUrl[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]()) !== -1;\r\n}\r\nexport function correlationIdSetPrefix(prefix) {\r\n    _correlationIdPrefix = prefix;\r\n}\r\nexport function correlationIdGetPrefix() {\r\n    return _correlationIdPrefix;\r\n}\r\n/**\r\n * Checks if a request url is not on a excluded domain list and if it is safe to add correlation headers.\r\n * Headers are always included if the current domain matches the request domain. If they do not match (CORS),\r\n * they are regex-ed across correlationHeaderDomains and correlationHeaderExcludedDomains to determine if headers are included.\r\n * Some environments don't give information on currentHost via window.location.host (e.g. Cordova). In these cases, the user must\r\n * manually supply domains to include correlation headers on. Else, no headers will be included at all.\r\n */\r\nexport function correlationIdCanIncludeCorrelationHeader(config, requestUrl, currentHost) {\r\n    if (!requestUrl || (config && config.disableCorrelationHeaders)) {\r\n        return false;\r\n    }\r\n    if (config && config[_DYN_CORRELATION_HEADER_E0 /* @min:%2ecorrelationHeaderExcludePatterns */]) {\r\n        for (var i = 0; i < config.correlationHeaderExcludePatterns[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n            if (config[_DYN_CORRELATION_HEADER_E0 /* @min:%2ecorrelationHeaderExcludePatterns */][i].test(requestUrl)) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    var requestHost = urlParseUrl(requestUrl).host[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    if (requestHost && (strIndexOf(requestHost, \":443\") !== -1 || strIndexOf(requestHost, \":80\") !== -1)) {\r\n        // [Bug #1260] IE can include the port even for http and https URLs so if present\r\n        // try and parse it to remove if it matches the default protocol port\r\n        requestHost = (urlParseFullHost(requestUrl, true) || \"\")[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    }\r\n    if ((!config || !config.enableCorsCorrelation) && (requestHost && requestHost !== currentHost)) {\r\n        return false;\r\n    }\r\n    var includedDomains = config && config.correlationHeaderDomains;\r\n    if (includedDomains) {\r\n        var matchExists_1;\r\n        arrForEach(includedDomains, function (domain) {\r\n            var regex = new RegExp(domain.toLowerCase().replace(/\\\\/g, \"\\\\\\\\\").replace(/\\./g, \"\\\\.\").replace(/\\*/g, \".*\"));\r\n            matchExists_1 = matchExists_1 || regex.test(requestHost);\r\n        });\r\n        if (!matchExists_1) {\r\n            return false;\r\n        }\r\n    }\r\n    var excludedDomains = config && config.correlationHeaderExcludedDomains;\r\n    if (!excludedDomains || excludedDomains[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n        return true;\r\n    }\r\n    for (var i = 0; i < excludedDomains[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n        var regex = new RegExp(excludedDomains[i].toLowerCase().replace(/\\\\/g, \"\\\\\\\\\").replace(/\\./g, \"\\\\.\").replace(/\\*/g, \".*\"));\r\n        if (regex.test(requestHost)) {\r\n            return false;\r\n        }\r\n    }\r\n    // if we don't know anything about the requestHost, require the user to use included/excludedDomains.\r\n    // Previously we always returned false for a falsy requestHost\r\n    return requestHost && requestHost[_DYN_LENGTH /* @min:%2elength */] > 0;\r\n}\r\n/**\r\n * Combines target appId and target role name from response header.\r\n */\r\nexport function correlationIdGetCorrelationContext(responseHeader) {\r\n    if (responseHeader) {\r\n        var correlationId = correlationIdGetCorrelationContextValue(responseHeader, RequestHeaders[1 /* eRequestHeaders.requestContextTargetKey */]);\r\n        if (correlationId && correlationId !== _correlationIdPrefix) {\r\n            return correlationId;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Gets key from correlation response header\r\n */\r\nexport function correlationIdGetCorrelationContextValue(responseHeader, key) {\r\n    if (responseHeader) {\r\n        var keyValues = responseHeader[_DYN_SPLIT /* @min:%2esplit */](\",\");\r\n        for (var i = 0; i < keyValues[_DYN_LENGTH /* @min:%2elength */]; ++i) {\r\n            var keyValue = keyValues[i][_DYN_SPLIT /* @min:%2esplit */](\"=\");\r\n            if (keyValue[_DYN_LENGTH /* @min:%2elength */] === 2 && keyValue[0] === key) {\r\n                return keyValue[1];\r\n            }\r\n        }\r\n    }\r\n}\r\nexport function AjaxHelperParseDependencyPath(logger, absoluteUrl, method, commandName) {\r\n    var target, name = commandName, data = commandName;\r\n    if (absoluteUrl && absoluteUrl[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        var parsedUrl = urlParseUrl(absoluteUrl);\r\n        target = parsedUrl.host;\r\n        if (!name) {\r\n            if (parsedUrl[_DYN_PATHNAME /* @min:%2epathname */] != null) {\r\n                var pathName = (parsedUrl.pathname[_DYN_LENGTH /* @min:%2elength */] === 0) ? \"/\" : parsedUrl[_DYN_PATHNAME /* @min:%2epathname */];\r\n                if (pathName.charAt(0) !== \"/\") {\r\n                    pathName = \"/\" + pathName;\r\n                }\r\n                data = parsedUrl[_DYN_PATHNAME /* @min:%2epathname */];\r\n                name = dataSanitizeString(logger, method ? method + \" \" + pathName : pathName);\r\n            }\r\n            else {\r\n                name = dataSanitizeString(logger, absoluteUrl);\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        target = commandName;\r\n        name = commandName;\r\n    }\r\n    return {\r\n        target: target,\r\n        name: name,\r\n        data: data\r\n    };\r\n}\r\nexport function dateTimeUtilsNow() {\r\n    // returns the window or webworker performance object\r\n    var perf = getPerformance();\r\n    if (perf && perf.now && perf.timing) {\r\n        var now = perf.now() + perf.timing.navigationStart;\r\n        // Known issue with IE where this calculation can be negative, so if it is then ignore and fallback\r\n        if (now > 0) {\r\n            return now;\r\n        }\r\n    }\r\n    return dateNow();\r\n}\r\nexport function dateTimeUtilsDuration(start, end) {\r\n    var result = null;\r\n    if (start !== 0 && end !== 0 && !isNullOrUndefined(start) && !isNullOrUndefined(end)) {\r\n        result = end - start;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Creates a IDistributedTraceContext from an optional telemetryTrace\r\n * @param telemetryTrace - The telemetryTrace instance that is being wrapped\r\n * @param parentCtx - An optional parent distributed trace instance, almost always undefined as this scenario is only used in the case of multiple property handlers.\r\n * @returns A new IDistributedTraceContext instance that is backed by the telemetryTrace or temporary object\r\n */\r\nexport function createDistributedTraceContextFromTrace(telemetryTrace, parentCtx) {\r\n    var trace = telemetryTrace || {};\r\n    return {\r\n        getName: function () {\r\n            return trace[_DYN_NAME /* @min:%2ename */];\r\n        },\r\n        setName: function (newValue) {\r\n            parentCtx && parentCtx.setName(newValue);\r\n            trace[_DYN_NAME /* @min:%2ename */] = newValue;\r\n        },\r\n        getTraceId: function () {\r\n            return trace.traceID;\r\n        },\r\n        setTraceId: function (newValue) {\r\n            parentCtx && parentCtx.setTraceId(newValue);\r\n            if (isValidTraceId(newValue)) {\r\n                trace.traceID = newValue;\r\n            }\r\n        },\r\n        getSpanId: function () {\r\n            return trace.parentID;\r\n        },\r\n        setSpanId: function (newValue) {\r\n            parentCtx && parentCtx.setSpanId(newValue);\r\n            if (isValidSpanId(newValue)) {\r\n                trace.parentID = newValue;\r\n            }\r\n        },\r\n        getTraceFlags: function () {\r\n            return trace.traceFlags;\r\n        },\r\n        setTraceFlags: function (newTraceFlags) {\r\n            parentCtx && parentCtx.setTraceFlags(newTraceFlags);\r\n            trace.traceFlags = newTraceFlags;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=Util.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { msToTimeSpan } from \"../HelperFuncs\";\r\nimport { AjaxHelperParseDependencyPath } from \"../Util\";\r\nimport { _DYN_DURATION, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString, dataSanitizeUrl } from \"./Common/DataSanitizer\";\r\nvar RemoteDependencyData = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the RemoteDependencyData object\r\n     */\r\n    function RemoteDependencyData(logger, id, absoluteUrl, commandName, value, success, resultCode, method, requestAPI, correlationContext, properties, measurements) {\r\n        if (requestAPI === void 0) { requestAPI = \"Ajax\"; }\r\n        this.aiDataContract = {\r\n            id: 1 /* FieldType.Required */,\r\n            ver: 1 /* FieldType.Required */,\r\n            name: 0 /* FieldType.Default */,\r\n            resultCode: 0 /* FieldType.Default */,\r\n            duration: 0 /* FieldType.Default */,\r\n            success: 0 /* FieldType.Default */,\r\n            data: 0 /* FieldType.Default */,\r\n            target: 0 /* FieldType.Default */,\r\n            type: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */,\r\n            kind: 0 /* FieldType.Default */,\r\n            value: 0 /* FieldType.Default */,\r\n            count: 0 /* FieldType.Default */,\r\n            min: 0 /* FieldType.Default */,\r\n            max: 0 /* FieldType.Default */,\r\n            stdDev: 0 /* FieldType.Default */,\r\n            dependencyKind: 0 /* FieldType.Default */,\r\n            dependencySource: 0 /* FieldType.Default */,\r\n            commandName: 0 /* FieldType.Default */,\r\n            dependencyTypeName: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        _self.id = id;\r\n        _self[_DYN_DURATION /* @min:%2eduration */] = msToTimeSpan(value);\r\n        _self.success = success;\r\n        _self.resultCode = resultCode + \"\";\r\n        _self.type = dataSanitizeString(logger, requestAPI);\r\n        var dependencyFields = AjaxHelperParseDependencyPath(logger, absoluteUrl, method, commandName);\r\n        _self.data = dataSanitizeUrl(logger, commandName) || dependencyFields.data; // get a value from hosturl if commandName not available\r\n        _self.target = dataSanitizeString(logger, dependencyFields.target);\r\n        if (correlationContext) {\r\n            _self.target = \"\".concat(_self.target, \" | \").concat(correlationContext);\r\n        }\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, dependencyFields[_DYN_NAME /* @min:%2ename */]);\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n    }\r\n    RemoteDependencyData.envelopeType = \"Microsoft.ApplicationInsights.{0}.RemoteDependency\";\r\n    RemoteDependencyData.dataType = \"RemoteDependencyData\";\r\n    return RemoteDependencyData;\r\n}());\r\nexport { RemoteDependencyData };\r\n//# sourceMappingURL=RemoteDependencyData.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { arrForEach, createUniqueNamespace, eventOff, eventOn, getDocument, getNavigator, getWindow, isNullOrUndefined, isUndefined, mergeEvtNamespace } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_PUSH } from \"./__DynamicConstants\";\r\nfunction _disableEvents(target, evtNamespace) {\r\n    eventOff(target, null, null, evtNamespace);\r\n}\r\n/**\r\n * Create a new OfflineListener instance to monitor browser online / offline events\r\n * @param parentEvtNamespace - The parent event namespace to append to any specific events for this instance\r\n */\r\nexport function createOfflineListener(parentEvtNamespace) {\r\n    var _document = getDocument();\r\n    var _navigator = getNavigator(); // Gets the window.navigator or workerNavigator depending on the global\r\n    var _isListening = false;\r\n    var listenerList = [];\r\n    // Set the initial state\r\n    // rState is changed by the browser, both via events and when we check the navigator.onLine property\r\n    var rState = 1 /* eOfflineValue.Online */;\r\n    if (_navigator && !isNullOrUndefined(_navigator.onLine) && !_navigator.onLine) { // navigator.onLine is undefined in react-native\r\n        rState = 2 /* eOfflineValue.Offline */;\r\n    }\r\n    // ustate is changed by the user calling setOnlineState\r\n    var uState = 0 /* eOfflineValue.Unknown */;\r\n    // current state would be updated each time rState or uState is changed\r\n    // it is a resolved value of rState and uState\r\n    var _currentState = calCurrentState();\r\n    var _evtNamespace = mergeEvtNamespace(createUniqueNamespace(\"OfflineListener\"), parentEvtNamespace);\r\n    try {\r\n        if (_enableEvents(getWindow())) {\r\n            _isListening = true;\r\n        }\r\n        if (_document) {\r\n            // Also attach to the document.body or document\r\n            var target = _document.body || _document;\r\n            if (target.ononline) {\r\n                if (_enableEvents(target)) {\r\n                    _isListening = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        // this makes react-native less angry\r\n        _isListening = false;\r\n    }\r\n    function _enableEvents(target) {\r\n        var enabled = false;\r\n        if (target) {\r\n            enabled = eventOn(target, \"online\", _setOnline, _evtNamespace);\r\n            if (enabled) {\r\n                eventOn(target, \"offline\", _setOffline, _evtNamespace);\r\n            }\r\n        }\r\n        return enabled;\r\n    }\r\n    function _isOnline() {\r\n        return _currentState;\r\n    }\r\n    function calCurrentState() {\r\n        if (uState === 2 /* eOfflineValue.Offline */ || rState === 2 /* eOfflineValue.Offline */) {\r\n            return false;\r\n        }\r\n        return true; // if both unknown, then we assume the network is good\r\n    }\r\n    function listnerNoticeCheck() {\r\n        // we were offline and are now online or we were online and now offline\r\n        var newState = calCurrentState();\r\n        if (_currentState !== newState) {\r\n            _currentState = newState; // use the resolved state to update\r\n            // send all the callbacks with the current state\r\n            arrForEach(listenerList, function (callback) {\r\n                var offlineState = {\r\n                    isOnline: _currentState,\r\n                    rState: rState,\r\n                    uState: uState\r\n                };\r\n                try {\r\n                    callback(offlineState);\r\n                }\r\n                catch (e) {\r\n                    // Do nothing, just making sure we run all of the callbacks\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function setOnlineState(newState) {\r\n        uState = newState;\r\n        listnerNoticeCheck();\r\n    }\r\n    function _setOnline() {\r\n        rState = 1 /* eOfflineValue.Online */;\r\n        listnerNoticeCheck();\r\n    }\r\n    function _setOffline() {\r\n        rState = 2 /* eOfflineValue.Offline */;\r\n        listnerNoticeCheck();\r\n    }\r\n    function _unload() {\r\n        var win = getWindow();\r\n        if (win && _isListening) {\r\n            _disableEvents(win, _evtNamespace);\r\n            if (_document) {\r\n                // Also attach to the document.body or document\r\n                var target = _document.body || _document;\r\n                if (!isUndefined(target.ononline)) {\r\n                    _disableEvents(target, _evtNamespace);\r\n                }\r\n            }\r\n            _isListening = false;\r\n        }\r\n    }\r\n    function addListener(callback) {\r\n        listenerList[_DYN_PUSH /* @min:%2epush */](callback);\r\n        // Define rm as an instance of IUnloadHook\r\n        return {\r\n            rm: function () {\r\n                var index = listenerList.indexOf(callback);\r\n                if (index > -1) {\r\n                    return listenerList.splice(index, 1);\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            }\r\n        };\r\n    }\r\n    return {\r\n        isOnline: _isOnline,\r\n        isListening: function () { return _isListening; },\r\n        unload: _unload,\r\n        addListener: addListener,\r\n        setOnlineState: setOnlineState\r\n    };\r\n}\r\n//# sourceMappingURL=Offline.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createEnumStyle } from \"@microsoft/applicationinsights-core-js\";\r\nexport var StorageType = createEnumStyle({\r\n    LocalStorage: 0 /* eStorageType.LocalStorage */,\r\n    SessionStorage: 1 /* eStorageType.SessionStorage */\r\n});\r\nexport var DistributedTracingModes = createEnumStyle({\r\n    AI: 0 /* eDistributedTracingModes.AI */,\r\n    AI_AND_W3C: 1 /* eDistributedTracingModes.AI_AND_W3C */,\r\n    W3C: 2 /* eDistributedTracingModes.W3C */\r\n});\r\n/**\r\n * The EventPersistence contains a set of values that specify the event's persistence.\r\n */\r\nexport var EventPersistence = createEnumStyle({\r\n    /**\r\n     * Normal persistence.\r\n     */\r\n    Normal: 1 /* EventPersistenceValue.Normal */,\r\n    /**\r\n     * Critical persistence.\r\n     */\r\n    Critical: 2 /* EventPersistenceValue.Critical */\r\n});\r\n//# sourceMappingURL=Enums.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _throwInternal, dumpObj, getExceptionName, getGlobal, getGlobalInst, isNullOrUndefined, objForEachKey } from \"@microsoft/applicationinsights-core-js\";\r\nimport { StorageType } from \"./Enums\";\r\nimport { _DYN_PUSH, _DYN_REMOVE_ITEM, _DYN_TO_STRING } from \"./__DynamicConstants\";\r\nvar _canUseLocalStorage = undefined;\r\nvar _canUseSessionStorage = undefined;\r\nvar _storagePrefix = \"\";\r\n/**\r\n * Gets the localStorage object if available\r\n * @return {Storage} - Returns the storage object if available else returns null\r\n */\r\nfunction _getLocalStorageObject() {\r\n    if (utlCanUseLocalStorage()) {\r\n        return _getVerifiedStorageObject(StorageType.LocalStorage);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Tests storage object (localStorage or sessionStorage) to verify that it is usable\r\n * More details here: https://mathiasbynens.be/notes/localstorage-pattern\r\n * @param storageType - Type of storage\r\n * @return {Storage} Returns storage object verified that it is usable\r\n */\r\nfunction _getVerifiedStorageObject(storageType) {\r\n    try {\r\n        if (isNullOrUndefined(getGlobal())) {\r\n            return null;\r\n        }\r\n        var uid = (new Date)[_DYN_TO_STRING /* @min:%2etoString */]();\r\n        var storage = getGlobalInst(storageType === StorageType.LocalStorage ? \"localStorage\" : \"sessionStorage\");\r\n        var name_1 = _storagePrefix + uid;\r\n        storage.setItem(name_1, uid);\r\n        var fail = storage.getItem(name_1) !== uid;\r\n        storage[_DYN_REMOVE_ITEM /* @min:%2eremoveItem */](name_1);\r\n        if (!fail) {\r\n            return storage;\r\n        }\r\n    }\r\n    catch (exception) {\r\n        // eslint-disable-next-line no-empty\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Gets the sessionStorage object if available\r\n * @return {Storage} - Returns the storage object if available else returns null\r\n */\r\nfunction _getSessionStorageObject() {\r\n    if (utlCanUseSessionStorage()) {\r\n        return _getVerifiedStorageObject(StorageType.SessionStorage);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Disables the global SDK usage of local or session storage if available\r\n */\r\nexport function utlDisableStorage() {\r\n    _canUseLocalStorage = false;\r\n    _canUseSessionStorage = false;\r\n}\r\nexport function utlSetStoragePrefix(storagePrefix) {\r\n    _storagePrefix = storagePrefix || \"\";\r\n}\r\n/**\r\n * Re-enables the global SDK usage of local or session storage if available\r\n */\r\nexport function utlEnableStorage() {\r\n    _canUseLocalStorage = utlCanUseLocalStorage(true);\r\n    _canUseSessionStorage = utlCanUseSessionStorage(true);\r\n}\r\n/**\r\n * Returns whether LocalStorage can be used, if the reset parameter is passed a true this will override\r\n * any previous disable calls.\r\n * @param reset - Should the usage be reset and determined only based on whether LocalStorage is available\r\n */\r\nexport function utlCanUseLocalStorage(reset) {\r\n    if (reset || _canUseLocalStorage === undefined) {\r\n        _canUseLocalStorage = !!_getVerifiedStorageObject(StorageType.LocalStorage);\r\n    }\r\n    return _canUseLocalStorage;\r\n}\r\nexport function utlGetLocalStorage(logger, name) {\r\n    var storage = _getLocalStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            return storage.getItem(name);\r\n        }\r\n        catch (e) {\r\n            _canUseLocalStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 1 /* _eInternalMessageId.BrowserCannotReadLocalStorage */, \"Browser failed read of local storage. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function utlSetLocalStorage(logger, name, data) {\r\n    var storage = _getLocalStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            storage.setItem(name, data);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            _canUseLocalStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 3 /* _eInternalMessageId.BrowserCannotWriteLocalStorage */, \"Browser failed write to local storage. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function utlRemoveStorage(logger, name) {\r\n    var storage = _getLocalStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            storage[_DYN_REMOVE_ITEM /* @min:%2eremoveItem */](name);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            _canUseLocalStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 5 /* _eInternalMessageId.BrowserFailedRemovalFromLocalStorage */, \"Browser failed removal of local storage item. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function utlCanUseSessionStorage(reset) {\r\n    if (reset || _canUseSessionStorage === undefined) {\r\n        _canUseSessionStorage = !!_getVerifiedStorageObject(StorageType.SessionStorage);\r\n    }\r\n    return _canUseSessionStorage;\r\n}\r\nexport function utlGetSessionStorageKeys() {\r\n    var keys = [];\r\n    if (utlCanUseSessionStorage()) {\r\n        objForEachKey(getGlobalInst(\"sessionStorage\"), function (key) {\r\n            keys[_DYN_PUSH /* @min:%2epush */](key);\r\n        });\r\n    }\r\n    return keys;\r\n}\r\nexport function utlGetSessionStorage(logger, name) {\r\n    var storage = _getSessionStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            return storage.getItem(name);\r\n        }\r\n        catch (e) {\r\n            _canUseSessionStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 2 /* _eInternalMessageId.BrowserCannotReadSessionStorage */, \"Browser failed read of session storage. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function utlSetSessionStorage(logger, name, data) {\r\n    var storage = _getSessionStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            storage.setItem(name, data);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            _canUseSessionStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 4 /* _eInternalMessageId.BrowserCannotWriteSessionStorage */, \"Browser failed write to session storage. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function utlRemoveSessionStorage(logger, name) {\r\n    var storage = _getSessionStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            storage[_DYN_REMOVE_ITEM /* @min:%2eremoveItem */](name);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            _canUseSessionStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 6 /* _eInternalMessageId.BrowserFailedRemovalFromSessionStorage */, \"Browser failed removal of session storage item. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return false;\r\n}\r\n//# sourceMappingURL=StorageHelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createValueMap } from \"@microsoft/applicationinsights-core-js\";\r\nexport var RequestHeaders = createValueMap({\r\n    requestContextHeader: [0 /* eRequestHeaders.requestContextHeader */, \"Request-Context\"],\r\n    requestContextTargetKey: [1 /* eRequestHeaders.requestContextTargetKey */, \"appId\"],\r\n    requestContextAppIdFormat: [2 /* eRequestHeaders.requestContextAppIdFormat */, \"appId=cid-v1:\"],\r\n    requestIdHeader: [3 /* eRequestHeaders.requestIdHeader */, \"Request-Id\"],\r\n    traceParentHeader: [4 /* eRequestHeaders.traceParentHeader */, \"traceparent\"],\r\n    traceStateHeader: [5 /* eRequestHeaders.traceStateHeader */, \"tracestate\"],\r\n    sdkContextHeader: [6 /* eRequestHeaders.sdkContextHeader */, \"Sdk-Context\"],\r\n    sdkContextHeaderAppIdRequest: [7 /* eRequestHeaders.sdkContextHeaderAppIdRequest */, \"appId\"],\r\n    requestContextHeaderLowerCase: [8 /* eRequestHeaders.requestContextHeaderLowerCase */, \"request-context\"]\r\n});\r\n//# sourceMappingURL=RequestResponseHeaders.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport { createClassFromInterface } from \"@microsoft/applicationinsights-core-js\";\r\nfunction _aiNameFunc(baseName) {\r\n    var aiName = \"ai.\" + baseName + \".\";\r\n    return function (name) {\r\n        return aiName + name;\r\n    };\r\n}\r\nvar _aiApplication = _aiNameFunc(\"application\");\r\nvar _aiDevice = _aiNameFunc(\"device\");\r\nvar _aiLocation = _aiNameFunc(\"location\");\r\nvar _aiOperation = _aiNameFunc(\"operation\");\r\nvar _aiSession = _aiNameFunc(\"session\");\r\nvar _aiUser = _aiNameFunc(\"user\");\r\nvar _aiCloud = _aiNameFunc(\"cloud\");\r\nvar _aiInternal = _aiNameFunc(\"internal\");\r\nvar ContextTagKeys = /** @class */ (function (_super) {\r\n    __extends(ContextTagKeys, _super);\r\n    function ContextTagKeys() {\r\n        return _super.call(this) || this;\r\n    }\r\n    return ContextTagKeys;\r\n}(createClassFromInterface({\r\n    applicationVersion: _aiApplication(\"ver\"),\r\n    applicationBuild: _aiApplication(\"build\"),\r\n    applicationTypeId: _aiApplication(\"typeId\"),\r\n    applicationId: _aiApplication(\"applicationId\"),\r\n    applicationLayer: _aiApplication(\"layer\"),\r\n    deviceId: _aiDevice(\"id\"),\r\n    deviceIp: _aiDevice(\"ip\"),\r\n    deviceLanguage: _aiDevice(\"language\"),\r\n    deviceLocale: _aiDevice(\"locale\"),\r\n    deviceModel: _aiDevice(\"model\"),\r\n    deviceFriendlyName: _aiDevice(\"friendlyName\"),\r\n    deviceNetwork: _aiDevice(\"network\"),\r\n    deviceNetworkName: _aiDevice(\"networkName\"),\r\n    deviceOEMName: _aiDevice(\"oemName\"),\r\n    deviceOS: _aiDevice(\"os\"),\r\n    deviceOSVersion: _aiDevice(\"osVersion\"),\r\n    deviceRoleInstance: _aiDevice(\"roleInstance\"),\r\n    deviceRoleName: _aiDevice(\"roleName\"),\r\n    deviceScreenResolution: _aiDevice(\"screenResolution\"),\r\n    deviceType: _aiDevice(\"type\"),\r\n    deviceMachineName: _aiDevice(\"machineName\"),\r\n    deviceVMName: _aiDevice(\"vmName\"),\r\n    deviceBrowser: _aiDevice(\"browser\"),\r\n    deviceBrowserVersion: _aiDevice(\"browserVersion\"),\r\n    locationIp: _aiLocation(\"ip\"),\r\n    locationCountry: _aiLocation(\"country\"),\r\n    locationProvince: _aiLocation(\"province\"),\r\n    locationCity: _aiLocation(\"city\"),\r\n    operationId: _aiOperation(\"id\"),\r\n    operationName: _aiOperation(\"name\"),\r\n    operationParentId: _aiOperation(\"parentId\"),\r\n    operationRootId: _aiOperation(\"rootId\"),\r\n    operationSyntheticSource: _aiOperation(\"syntheticSource\"),\r\n    operationCorrelationVector: _aiOperation(\"correlationVector\"),\r\n    sessionId: _aiSession(\"id\"),\r\n    sessionIsFirst: _aiSession(\"isFirst\"),\r\n    sessionIsNew: _aiSession(\"isNew\"),\r\n    userAccountAcquisitionDate: _aiUser(\"accountAcquisitionDate\"),\r\n    userAccountId: _aiUser(\"accountId\"),\r\n    userAgent: _aiUser(\"userAgent\"),\r\n    userId: _aiUser(\"id\"),\r\n    userStoreRegion: _aiUser(\"storeRegion\"),\r\n    userAuthUserId: _aiUser(\"authUserId\"),\r\n    userAnonymousUserAcquisitionDate: _aiUser(\"anonUserAcquisitionDate\"),\r\n    userAuthenticatedUserAcquisitionDate: _aiUser(\"authUserAcquisitionDate\"),\r\n    cloudName: _aiCloud(\"name\"),\r\n    cloudRole: _aiCloud(\"role\"),\r\n    cloudRoleVer: _aiCloud(\"roleVer\"),\r\n    cloudRoleInstance: _aiCloud(\"roleInstance\"),\r\n    cloudEnvironment: _aiCloud(\"environment\"),\r\n    cloudLocation: _aiCloud(\"location\"),\r\n    cloudDeploymentUnit: _aiCloud(\"deploymentUnit\"),\r\n    internalNodeName: _aiInternal(\"nodeName\"),\r\n    internalSdkVersion: _aiInternal(\"sdkVersion\"),\r\n    internalAgentVersion: _aiInternal(\"agentVersion\"),\r\n    internalSnippet: _aiInternal(\"snippet\"),\r\n    internalSdkSrc: _aiInternal(\"sdkSrc\")\r\n})));\r\nexport { ContextTagKeys };\r\n//# sourceMappingURL=ContextTagKeys.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { ContextTagKeys } from \"./Contracts/ContextTagKeys\";\r\nexport var Extensions = {\r\n    UserExt: \"user\",\r\n    DeviceExt: \"device\",\r\n    TraceExt: \"trace\",\r\n    WebExt: \"web\",\r\n    AppExt: \"app\",\r\n    OSExt: \"os\",\r\n    SessionExt: \"ses\",\r\n    SDKExt: \"sdk\"\r\n};\r\nexport var CtxTagKeys = new ContextTagKeys();\r\n//# sourceMappingURL=PartAExtensions.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { toISOString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { strNotSpecified } from \"../../Constants\";\r\nimport { _DYN_NAME } from \"../../__DynamicConstants\";\r\nimport { dataSanitizeString } from \"./DataSanitizer\";\r\nvar Envelope = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of telemetry data.\r\n     */\r\n    function Envelope(logger, data, name) {\r\n        var _this = this;\r\n        var _self = this;\r\n        _self.ver = 1;\r\n        _self.sampleRate = 100.0;\r\n        _self.tags = {};\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        _self.data = data;\r\n        _self.time = toISOString(new Date());\r\n        _self.aiDataContract = {\r\n            time: 1 /* FieldType.Required */,\r\n            iKey: 1 /* FieldType.Required */,\r\n            name: 1 /* FieldType.Required */,\r\n            sampleRate: function () {\r\n                return (_this.sampleRate === 100) ? 4 /* FieldType.Hidden */ : 1 /* FieldType.Required */;\r\n            },\r\n            tags: 1 /* FieldType.Required */,\r\n            data: 1 /* FieldType.Required */\r\n        };\r\n    }\r\n    return Envelope;\r\n}());\r\nexport { Envelope };\r\n//# sourceMappingURL=Envelope.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nvar Data = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of telemetry data.\r\n     */\r\n    function Data(baseType, data) {\r\n        /**\r\n         * The data contract for serializing this object.\r\n         */\r\n        this.aiDataContract = {\r\n            baseType: 1 /* FieldType.Required */,\r\n            baseData: 1 /* FieldType.Required */\r\n        };\r\n        this.baseType = baseType;\r\n        this.baseData = data;\r\n    }\r\n    return Data;\r\n}());\r\nexport { Data };\r\n//# sourceMappingURL=Data.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// ###################################################################################################################################################\r\n// Note: DON'T Export these const from the package as we are still targeting IE/ES5 this will export a mutable variables that someone could change ###\r\n// ###################################################################################################################################################\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_DURATION = \"duration\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_TAGS = \"tags\"; // Count: 17\r\nexport var _DYN_DEVICE_TYPE = \"deviceType\"; // Count: 3\r\nexport var _DYN_DATA = \"data\"; // Count: 15\r\nexport var _DYN_NAME = \"name\"; // Count: 8\r\nexport var _DYN_TRACE_ID = \"traceID\"; // Count: 5\r\nexport var _DYN_LENGTH = \"length\"; // Count: 38\r\nexport var _DYN_STRINGIFY = \"stringify\"; // Count: 5\r\nexport var _DYN_MEASUREMENTS = \"measurements\"; // Count: 7\r\nexport var _DYN_DATA_TYPE = \"dataType\"; // Count: 10\r\nexport var _DYN_ENVELOPE_TYPE = \"envelopeType\"; // Count: 7\r\nexport var _DYN_TO_STRING = \"toString\"; // Count: 7\r\nexport var _DYN__GET = \"_get\"; // Count: 5\r\nexport var _DYN_ENQUEUE = \"enqueue\"; // Count: 7\r\nexport var _DYN_COUNT = \"count\"; // Count: 7\r\nexport var _DYN_EVENTS_LIMIT_IN_MEM = \"eventsLimitInMem\"; // Count: 2\r\nexport var _DYN_PUSH = \"push\"; // Count: 9\r\nexport var _DYN_ITEM = \"item\"; // Count: 6\r\nexport var _DYN_EMIT_LINE_DELIMITED_0 = \"emitLineDelimitedJson\"; // Count: 3\r\nexport var _DYN_CLEAR = \"clear\"; // Count: 6\r\nexport var _DYN_CREATE_NEW = \"createNew\"; // Count: 3\r\nexport var _DYN_MARK_AS_SENT = \"markAsSent\"; // Count: 4\r\nexport var _DYN_CLEAR_SENT = \"clearSent\"; // Count: 5\r\nexport var _DYN_BUFFER_OVERRIDE = \"bufferOverride\"; // Count: 3\r\nexport var _DYN__BUFFER__KEY = \"BUFFER_KEY\"; // Count: 5\r\nexport var _DYN__SENT__BUFFER__KEY = \"SENT_BUFFER_KEY\"; // Count: 8\r\nexport var _DYN_CONCAT = \"concat\"; // Count: 6\r\nexport var _DYN__MAX__BUFFER__SIZE = \"MAX_BUFFER_SIZE\"; // Count: 5\r\nexport var _DYN_TRIGGER_SEND = \"triggerSend\"; // Count: 5\r\nexport var _DYN_DIAG_LOG = \"diagLog\"; // Count: 16\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 3\r\nexport var _DYN__SENDER = \"_sender\"; // Count: 5\r\nexport var _DYN_ENDPOINT_URL = \"endpointUrl\"; // Count: 5\r\nexport var _DYN_INSTRUMENTATION_KEY = \"instrumentationKey\"; // Count: 5\r\nexport var _DYN_CUSTOM_HEADERS = \"customHeaders\"; // Count: 3\r\nexport var _DYN_MAX_BATCH_SIZE_IN_BY1 = \"maxBatchSizeInBytes\"; // Count: 2\r\nexport var _DYN_ONUNLOAD_DISABLE_BEA2 = \"onunloadDisableBeacon\"; // Count: 3\r\nexport var _DYN_IS_BEACON_API_DISABL3 = \"isBeaconApiDisabled\"; // Count: 3\r\nexport var _DYN_ALWAYS_USE_XHR_OVERR4 = \"alwaysUseXhrOverride\"; // Count: 2\r\nexport var _DYN_DISABLE_XHR = \"disableXhr\"; // Count: 3\r\nexport var _DYN_ENABLE_SESSION_STORA5 = \"enableSessionStorageBuffer\"; // Count: 2\r\nexport var _DYN__BUFFER = \"_buffer\"; // Count: 9\r\nexport var _DYN_ONUNLOAD_DISABLE_FET6 = \"onunloadDisableFetch\"; // Count: 2\r\nexport var _DYN_DISABLE_SEND_BEACON_7 = \"disableSendBeaconSplit\"; // Count: 2\r\nexport var _DYN_ENABLE_SEND_PROMISE = \"enableSendPromise\"; // Count: 2\r\nexport var _DYN_GET_SENDER_INST = \"getSenderInst\"; // Count: 4\r\nexport var _DYN_UNLOAD_TRANSPORTS = \"unloadTransports\"; // Count: 2\r\nexport var _DYN_CONVERT_UNDEFINED = \"convertUndefined\"; // Count: 2\r\nexport var _DYN_MAX_BATCH_INTERVAL = \"maxBatchInterval\"; // Count: 2\r\nexport var _DYN_SERIALIZE = \"serialize\"; // Count: 4\r\nexport var _DYN__ON_ERROR = \"_onError\"; // Count: 7\r\nexport var _DYN__ON_PARTIAL_SUCCESS = \"_onPartialSuccess\"; // Count: 3\r\nexport var _DYN__ON_SUCCESS = \"_onSuccess\"; // Count: 6\r\nexport var _DYN_ITEMS_RECEIVED = \"itemsReceived\"; // Count: 3\r\nexport var _DYN_ITEMS_ACCEPTED = \"itemsAccepted\"; // Count: 3\r\nexport var _DYN_ORI_PAYLOAD = \"oriPayload\"; // Count: 3\r\nexport var _DYN_BASE_TYPE = \"baseType\"; // Count: 4\r\nexport var _DYN_SAMPLE_RATE = \"sampleRate\"; // Count: 4\r\nexport var _DYN_EVENTS_SEND_REQUEST = \"eventsSendRequest\"; // Count: 2\r\nexport var _DYN_GET_SAMPLING_SCORE = \"getSamplingScore\"; // Count: 2\r\nexport var _DYN_GET_HASH_CODE_SCORE = \"getHashCodeScore\"; // Count: 4\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { __assignFn as __assign } from \"@microsoft/applicationinsights-shims\";\r\nimport { CtxTagKeys, Data, Envelope, Event, Exception, HttpMethod, Metric, PageView, PageViewPerformance, RemoteDependencyData, SampleRate, Trace, dataSanitizeString } from \"@microsoft/applicationinsights-common\";\r\nimport { _throwInternal, _warnToConsole, getJSON, hasJSON, isNullOrUndefined, isNumber, isString, isTruthy, objForEachKey, optimizeObject, setValue, toISOString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { STR_DURATION } from \"./InternalConstants\";\r\nimport { _DYN_DATA, _DYN_DATA_TYPE, _DYN_DEVICE_TYPE, _DYN_ENVELOPE_TYPE, _DYN_LENGTH, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_STRINGIFY, _DYN_TAGS, _DYN_TO_STRING, _DYN_TRACE_ID } from \"./__DynamicConstants\";\r\n// these two constants are used to filter out properties not needed when trying to extract custom properties and measurements from the incoming payload\r\nvar strBaseType = \"baseType\";\r\nvar strBaseData = \"baseData\";\r\nvar strProperties = \"properties\";\r\nvar strTrue = \"true\";\r\nfunction _setValueIf(target, field, value) {\r\n    return setValue(target, field, value, isTruthy);\r\n}\r\n/*\r\n * Maps Part A data from CS 4.0\r\n */\r\nfunction _extractPartAExtensions(logger, item, env) {\r\n    // todo: switch to keys from common in this method\r\n    var envTags = env[_DYN_TAGS /* @min:%2etags */] = env[_DYN_TAGS /* @min:%2etags */] || {};\r\n    var itmExt = item.ext = item.ext || {};\r\n    var itmTags = item[_DYN_TAGS /* @min:%2etags */] = item[_DYN_TAGS /* @min:%2etags */] || [];\r\n    var extUser = itmExt.user;\r\n    if (extUser) {\r\n        _setValueIf(envTags, CtxTagKeys.userAuthUserId, extUser.authId);\r\n        _setValueIf(envTags, CtxTagKeys.userId, extUser.id || extUser.localId);\r\n    }\r\n    var extApp = itmExt.app;\r\n    if (extApp) {\r\n        _setValueIf(envTags, CtxTagKeys.sessionId, extApp.sesId);\r\n    }\r\n    var extDevice = itmExt.device;\r\n    if (extDevice) {\r\n        _setValueIf(envTags, CtxTagKeys.deviceId, extDevice.id || extDevice.localId);\r\n        _setValueIf(envTags, CtxTagKeys[_DYN_DEVICE_TYPE /* @min:%2edeviceType */], extDevice.deviceClass);\r\n        _setValueIf(envTags, CtxTagKeys.deviceIp, extDevice.ip);\r\n        _setValueIf(envTags, CtxTagKeys.deviceModel, extDevice.model);\r\n        _setValueIf(envTags, CtxTagKeys[_DYN_DEVICE_TYPE /* @min:%2edeviceType */], extDevice[_DYN_DEVICE_TYPE /* @min:%2edeviceType */]);\r\n    }\r\n    var web = item.ext.web;\r\n    if (web) {\r\n        _setValueIf(envTags, CtxTagKeys.deviceLanguage, web.browserLang);\r\n        _setValueIf(envTags, CtxTagKeys.deviceBrowserVersion, web.browserVer);\r\n        _setValueIf(envTags, CtxTagKeys.deviceBrowser, web.browser);\r\n        var envData = env[_DYN_DATA /* @min:%2edata */] = env[_DYN_DATA /* @min:%2edata */] || {};\r\n        var envBaseData = envData[strBaseData] = envData[strBaseData] || {};\r\n        var envProps = envBaseData[strProperties] = envBaseData[strProperties] || {};\r\n        _setValueIf(envProps, \"domain\", web.domain);\r\n        _setValueIf(envProps, \"isManual\", web.isManual ? strTrue : null);\r\n        _setValueIf(envProps, \"screenRes\", web.screenRes);\r\n        _setValueIf(envProps, \"userConsent\", web.userConsent ? strTrue : null);\r\n    }\r\n    var extOs = itmExt.os;\r\n    if (extOs) {\r\n        _setValueIf(envTags, CtxTagKeys.deviceOS, extOs[_DYN_NAME /* @min:%2ename */]);\r\n        _setValueIf(envTags, CtxTagKeys.deviceOSVersion, extOs.osVer);\r\n    }\r\n    // No support for mapping Trace.traceState to 2.0 as it is currently empty\r\n    var extTrace = itmExt.trace;\r\n    if (extTrace) {\r\n        _setValueIf(envTags, CtxTagKeys.operationParentId, extTrace.parentID);\r\n        _setValueIf(envTags, CtxTagKeys.operationName, dataSanitizeString(logger, extTrace[_DYN_NAME /* @min:%2ename */]));\r\n        _setValueIf(envTags, CtxTagKeys.operationId, extTrace[_DYN_TRACE_ID /* @min:%2etraceID */]);\r\n    }\r\n    // Sample 4.0 schema\r\n    //  {\r\n    //     \"time\" : \"2018-09-05T22:51:22.4936Z\",\r\n    //     \"name\" : \"MetricWithNamespace\",\r\n    //     \"iKey\" : \"ABC-5a4cbd20-e601-4ef5-a3c6-5d6577e4398e\",\r\n    //     \"ext\": {  \"cloud\": {\r\n    //          \"role\": \"WATSON3\",\r\n    //          \"roleInstance\": \"CO4AEAP00000260\"\r\n    //      },\r\n    //      \"device\": {}, \"correlation\": {} },\r\n    //      \"tags\": [\r\n    //        { \"amazon.region\" : \"east2\" },\r\n    //        { \"os.expid\" : \"wp:02df239\" }\r\n    //     ]\r\n    //   }\r\n    var tgs = {};\r\n    // deals with tags.push({object})\r\n    for (var i = itmTags[_DYN_LENGTH /* @min:%2elength */] - 1; i >= 0; i--) {\r\n        var tg = itmTags[i];\r\n        objForEachKey(tg, function (key, value) {\r\n            tgs[key] = value;\r\n        });\r\n        itmTags.splice(i, 1);\r\n    }\r\n    // deals with tags[key]=value (and handles hasOwnProperty)\r\n    objForEachKey(itmTags, function (tg, value) {\r\n        tgs[tg] = value;\r\n    });\r\n    var theTags = __assign(__assign({}, envTags), tgs);\r\n    if (!theTags[CtxTagKeys.internalSdkVersion]) {\r\n        // Append a version in case it is not already set\r\n        theTags[CtxTagKeys.internalSdkVersion] = dataSanitizeString(logger, \"javascript:\".concat(EnvelopeCreator.Version), 64);\r\n    }\r\n    env[_DYN_TAGS /* @min:%2etags */] = optimizeObject(theTags);\r\n}\r\nfunction _extractPropsAndMeasurements(data, properties, measurements) {\r\n    if (!isNullOrUndefined(data)) {\r\n        objForEachKey(data, function (key, value) {\r\n            if (isNumber(value)) {\r\n                measurements[key] = value;\r\n            }\r\n            else if (isString(value)) {\r\n                properties[key] = value;\r\n            }\r\n            else if (hasJSON()) {\r\n                properties[key] = getJSON()[_DYN_STRINGIFY /* @min:%2estringify */](value);\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction _convertPropsUndefinedToCustomDefinedValue(properties, customUndefinedValue) {\r\n    if (!isNullOrUndefined(properties)) {\r\n        objForEachKey(properties, function (key, value) {\r\n            properties[key] = value || customUndefinedValue;\r\n        });\r\n    }\r\n}\r\n// TODO: Do we want this to take logger as arg or use this._logger as nonstatic?\r\nfunction _createEnvelope(logger, envelopeType, telemetryItem, data) {\r\n    var envelope = new Envelope(logger, data, envelopeType);\r\n    _setValueIf(envelope, \"sampleRate\", telemetryItem[SampleRate]);\r\n    if ((telemetryItem[strBaseData] || {}).startTime) {\r\n        // Starting from Version 3.0.3, the time property will be assigned by the startTime value,\r\n        // which records the loadEvent time for the pageView event.\r\n        envelope.time = toISOString(telemetryItem[strBaseData].startTime);\r\n    }\r\n    envelope.iKey = telemetryItem.iKey;\r\n    var iKeyNoDashes = telemetryItem.iKey.replace(/-/g, \"\");\r\n    envelope[_DYN_NAME /* @min:%2ename */] = envelope[_DYN_NAME /* @min:%2ename */].replace(\"{0}\", iKeyNoDashes);\r\n    // extract all extensions from ctx\r\n    _extractPartAExtensions(logger, telemetryItem, envelope);\r\n    // loop through the envelope tags (extension of Part A) and pick out the ones that should go in outgoing envelope tags\r\n    telemetryItem[_DYN_TAGS /* @min:%2etags */] = telemetryItem[_DYN_TAGS /* @min:%2etags */] || [];\r\n    return optimizeObject(envelope);\r\n}\r\nfunction EnvelopeCreatorInit(logger, telemetryItem) {\r\n    if (isNullOrUndefined(telemetryItem[strBaseData])) {\r\n        _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 46 /* _eInternalMessageId.TelemetryEnvelopeInvalid */, \"telemetryItem.baseData cannot be null.\");\r\n    }\r\n}\r\nexport var EnvelopeCreator = {\r\n    Version: '3.3.4'\r\n};\r\nexport function DependencyEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var customMeasurements = telemetryItem[strBaseData][_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    var customProperties = telemetryItem[strBaseData][strProperties] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], customProperties, customMeasurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(customProperties, customUndefinedValue);\r\n    }\r\n    var bd = telemetryItem[strBaseData];\r\n    if (isNullOrUndefined(bd)) {\r\n        _warnToConsole(logger, \"Invalid input for dependency data\");\r\n        return null;\r\n    }\r\n    var method = bd[strProperties] && bd[strProperties][HttpMethod] ? bd[strProperties][HttpMethod] : \"GET\";\r\n    var remoteDepData = new RemoteDependencyData(logger, bd.id, bd.target, bd[_DYN_NAME /* @min:%2ename */], bd[STR_DURATION /* @min:%2eduration */], bd.success, bd.responseCode, method, bd.type, bd.correlationContext, customProperties, customMeasurements);\r\n    var data = new Data(RemoteDependencyData[_DYN_DATA_TYPE /* @min:%2edataType */], remoteDepData);\r\n    return _createEnvelope(logger, RemoteDependencyData[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function EventEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var customProperties = {};\r\n    var customMeasurements = {};\r\n    if (telemetryItem[strBaseType] !== Event[_DYN_DATA_TYPE /* @min:%2edataType */]) {\r\n        customProperties[\"baseTypeSource\"] = telemetryItem[strBaseType]; // save the passed in base type as a property\r\n    }\r\n    if (telemetryItem[strBaseType] === Event[_DYN_DATA_TYPE /* @min:%2edataType */]) { // take collection\r\n        customProperties = telemetryItem[strBaseData][strProperties] || {};\r\n        customMeasurements = telemetryItem[strBaseData][_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    }\r\n    else { // if its not a known type, convert to custom event\r\n        if (telemetryItem[strBaseData]) {\r\n            _extractPropsAndMeasurements(telemetryItem[strBaseData], customProperties, customMeasurements);\r\n        }\r\n    }\r\n    // Extract root level properties from part C telemetryItem.data\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], customProperties, customMeasurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(customProperties, customUndefinedValue);\r\n    }\r\n    var eventName = telemetryItem[strBaseData][_DYN_NAME /* @min:%2ename */];\r\n    var eventData = new Event(logger, eventName, customProperties, customMeasurements);\r\n    var data = new Data(Event[_DYN_DATA_TYPE /* @min:%2edataType */], eventData);\r\n    return _createEnvelope(logger, Event[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function ExceptionEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    // Extract root level properties from part C telemetryItem.data\r\n    var customMeasurements = telemetryItem[strBaseData][_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    var customProperties = telemetryItem[strBaseData][strProperties] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], customProperties, customMeasurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(customProperties, customUndefinedValue);\r\n    }\r\n    var bd = telemetryItem[strBaseData];\r\n    var exData = Exception.CreateFromInterface(logger, bd, customProperties, customMeasurements);\r\n    var data = new Data(Exception[_DYN_DATA_TYPE /* @min:%2edataType */], exData);\r\n    return _createEnvelope(logger, Exception[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function MetricEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var baseData = telemetryItem[strBaseData];\r\n    var props = baseData[strProperties] || {};\r\n    var measurements = baseData[_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], props, measurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(props, customUndefinedValue);\r\n    }\r\n    var baseMetricData = new Metric(logger, baseData[_DYN_NAME /* @min:%2ename */], baseData.average, baseData.sampleCount, baseData.min, baseData.max, baseData.stdDev, props, measurements);\r\n    var data = new Data(Metric[_DYN_DATA_TYPE /* @min:%2edataType */], baseMetricData);\r\n    return _createEnvelope(logger, Metric[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function PageViewEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    // Since duration is not part of the domain properties in Common Schema, extract it from part C\r\n    var duration;\r\n    var baseData = telemetryItem[strBaseData];\r\n    if (!isNullOrUndefined(baseData) &&\r\n        !isNullOrUndefined(baseData[strProperties]) &&\r\n        !isNullOrUndefined(baseData[strProperties][STR_DURATION])) { // from part B properties\r\n        duration = baseData[strProperties][STR_DURATION];\r\n        delete baseData[strProperties][STR_DURATION];\r\n    }\r\n    else if (!isNullOrUndefined(telemetryItem[_DYN_DATA /* @min:%2edata */]) &&\r\n        !isNullOrUndefined(telemetryItem[_DYN_DATA /* @min:%2edata */][STR_DURATION])) { // from custom properties\r\n        duration = telemetryItem[_DYN_DATA /* @min:%2edata */][STR_DURATION];\r\n        delete telemetryItem[_DYN_DATA /* @min:%2edata */][STR_DURATION];\r\n    }\r\n    var bd = telemetryItem[strBaseData];\r\n    // special case: pageview.id is grabbed from current operation id. Analytics plugin is decoupled from properties plugin, so this is done here instead. This can be made a default telemetry intializer instead if needed to be decoupled from channel\r\n    var currentContextId;\r\n    if (((telemetryItem.ext || {}).trace || {})[_DYN_TRACE_ID /* @min:%2etraceID */]) {\r\n        currentContextId = telemetryItem.ext.trace[_DYN_TRACE_ID /* @min:%2etraceID */];\r\n    }\r\n    var id = bd.id || currentContextId;\r\n    var name = bd[_DYN_NAME /* @min:%2ename */];\r\n    var url = bd.uri;\r\n    var properties = bd[strProperties] || {};\r\n    var measurements = bd[_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    // refUri is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\r\n    if (!isNullOrUndefined(bd.refUri)) {\r\n        properties[\"refUri\"] = bd.refUri;\r\n    }\r\n    // pageType is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\r\n    if (!isNullOrUndefined(bd.pageType)) {\r\n        properties[\"pageType\"] = bd.pageType;\r\n    }\r\n    // isLoggedIn is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\r\n    if (!isNullOrUndefined(bd.isLoggedIn)) {\r\n        properties[\"isLoggedIn\"] = bd.isLoggedIn[_DYN_TO_STRING /* @min:%2etoString */]();\r\n    }\r\n    // pageTags is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\r\n    if (!isNullOrUndefined(bd[strProperties])) {\r\n        var pageTags = bd[strProperties];\r\n        objForEachKey(pageTags, function (key, value) {\r\n            properties[key] = value;\r\n        });\r\n    }\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], properties, measurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(properties, customUndefinedValue);\r\n    }\r\n    var pageViewData = new PageView(logger, name, url, duration, properties, measurements, id);\r\n    var data = new Data(PageView[_DYN_DATA_TYPE /* @min:%2edataType */], pageViewData);\r\n    return _createEnvelope(logger, PageView[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function PageViewPerformanceEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var bd = telemetryItem[strBaseData];\r\n    var name = bd[_DYN_NAME /* @min:%2ename */];\r\n    var url = bd.uri || bd.url;\r\n    var properties = bd[strProperties] || {};\r\n    var measurements = bd[_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], properties, measurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(properties, customUndefinedValue);\r\n    }\r\n    var baseData = new PageViewPerformance(logger, name, url, undefined, properties, measurements, bd);\r\n    var data = new Data(PageViewPerformance[_DYN_DATA_TYPE /* @min:%2edataType */], baseData);\r\n    return _createEnvelope(logger, PageViewPerformance[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function TraceEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var message = telemetryItem[strBaseData].message;\r\n    var severityLevel = telemetryItem[strBaseData].severityLevel;\r\n    var props = telemetryItem[strBaseData][strProperties] || {};\r\n    var measurements = telemetryItem[strBaseData][_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], props, measurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(props, customUndefinedValue);\r\n    }\r\n    var baseData = new Trace(logger, message, severityLevel, props, measurements);\r\n    var data = new Data(Trace[_DYN_DATA_TYPE /* @min:%2edataType */], baseData);\r\n    return _createEnvelope(logger, Trace[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\n//# sourceMappingURL=EnvelopeCreator.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { utlGetSessionStorage, utlRemoveSessionStorage, utlSetSessionStorage } from \"@microsoft/applicationinsights-common\";\r\nimport { _throwInternal, arrForEach, arrIndexOf, dumpObj, getExceptionName, getJSON, isArray, isFunction, isNullOrUndefined, isString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_BUFFER_OVERRIDE, _DYN_CLEAR, _DYN_CLEAR_SENT, _DYN_CONCAT, _DYN_COUNT, _DYN_CREATE_NEW, _DYN_EMIT_LINE_DELIMITED_0, _DYN_ENQUEUE, _DYN_EVENTS_LIMIT_IN_MEM, _DYN_ITEM, _DYN_LENGTH, _DYN_MARK_AS_SENT, _DYN_PUSH, _DYN_STRINGIFY, _DYN__BUFFER__KEY, _DYN__GET, _DYN__MAX__BUFFER__SIZE, _DYN__SENT__BUFFER__KEY } from \"./__DynamicConstants\";\r\nvar BaseSendBuffer = /** @class */ (function () {\r\n    function BaseSendBuffer(logger, config) {\r\n        var _buffer = [];\r\n        var _bufferFullMessageSent = false;\r\n        var _maxRetryCnt = config.maxRetryCnt;\r\n        this[_DYN__GET /* @min:%2e_get */] = function () {\r\n            return _buffer;\r\n        };\r\n        this._set = function (buffer) {\r\n            _buffer = buffer;\r\n            return _buffer;\r\n        };\r\n        dynamicProto(BaseSendBuffer, this, function (_self) {\r\n            _self[_DYN_ENQUEUE /* @min:%2eenqueue */] = function (payload) {\r\n                if (_self[_DYN_COUNT /* @min:%2ecount */]() >= config[_DYN_EVENTS_LIMIT_IN_MEM /* @min:%2eeventsLimitInMem */]) {\r\n                    // sent internal log only once per page view\r\n                    if (!_bufferFullMessageSent) {\r\n                        _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 105 /* _eInternalMessageId.InMemoryStorageBufferFull */, \"Maximum in-memory buffer size reached: \" + _self[_DYN_COUNT /* @min:%2ecount */](), true);\r\n                        _bufferFullMessageSent = true;\r\n                    }\r\n                    return;\r\n                }\r\n                payload.cnt = payload.cnt || 0;\r\n                // max retry is defined, and max retry is reached, do not add the payload to buffer\r\n                if (!isNullOrUndefined(_maxRetryCnt)) {\r\n                    if (payload.cnt > _maxRetryCnt) {\r\n                        // TODO: add log here on dropping payloads\r\n                        return;\r\n                    }\r\n                }\r\n                _buffer[_DYN_PUSH /* @min:%2epush */](payload);\r\n                return;\r\n            };\r\n            _self[_DYN_COUNT /* @min:%2ecount */] = function () {\r\n                return _buffer[_DYN_LENGTH /* @min:%2elength */];\r\n            };\r\n            _self.size = function () {\r\n                var size = _buffer[_DYN_LENGTH /* @min:%2elength */];\r\n                for (var lp = 0; lp < _buffer[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                    size += (_buffer[lp].item)[_DYN_LENGTH /* @min:%2elength */];\r\n                }\r\n                if (!config[_DYN_EMIT_LINE_DELIMITED_0 /* @min:%2eemitLineDelimitedJson */]) {\r\n                    size += 2;\r\n                }\r\n                return size;\r\n            };\r\n            _self[_DYN_CLEAR /* @min:%2eclear */] = function () {\r\n                _buffer = [];\r\n                _bufferFullMessageSent = false;\r\n            };\r\n            _self.getItems = function () {\r\n                return _buffer.slice(0);\r\n            };\r\n            _self.batchPayloads = function (payloads) {\r\n                if (payloads && payloads[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var payloadStr_1 = [];\r\n                    arrForEach(payloads, function (payload) {\r\n                        payloadStr_1[_DYN_PUSH /* @min:%2epush */](payload[_DYN_ITEM /* @min:%2eitem */]);\r\n                    });\r\n                    var batch = config[_DYN_EMIT_LINE_DELIMITED_0 /* @min:%2eemitLineDelimitedJson */] ?\r\n                        payloadStr_1.join(\"\\n\") :\r\n                        \"[\" + payloadStr_1.join(\",\") + \"]\";\r\n                    return batch;\r\n                }\r\n                return null;\r\n            };\r\n            _self[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = function (newLogger, newConfig, canUseSessionStorage) {\r\n                var items = _buffer.slice(0);\r\n                newLogger = newLogger || logger;\r\n                newConfig = newConfig || {};\r\n                var newBuffer = !!canUseSessionStorage ? new SessionStorageSendBuffer(newLogger, newConfig) : new ArraySendBuffer(newLogger, newConfig);\r\n                arrForEach(items, function (payload) {\r\n                    newBuffer[_DYN_ENQUEUE /* @min:%2eenqueue */](payload);\r\n                });\r\n                return newBuffer;\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for BaseSendBuffer.prototype.enqueue.\r\n// Removed Stub for BaseSendBuffer.prototype.count.\r\n// Removed Stub for BaseSendBuffer.prototype.size.\r\n// Removed Stub for BaseSendBuffer.prototype.clear.\r\n// Removed Stub for BaseSendBuffer.prototype.getItems.\r\n// Removed Stub for BaseSendBuffer.prototype.batchPayloads.\r\n// Removed Stub for BaseSendBuffer.prototype.createNew.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    BaseSendBuffer.__ieDyn=1;\n\n    return BaseSendBuffer;\r\n}());\r\n/*\r\n * An array based send buffer.\r\n */\r\nvar ArraySendBuffer = /** @class */ (function (_super) {\r\n    __extends(ArraySendBuffer, _super);\r\n    function ArraySendBuffer(logger, config) {\r\n        var _this = _super.call(this, logger, config) || this;\r\n        dynamicProto(ArraySendBuffer, _this, function (_self, _base) {\r\n            _self[_DYN_MARK_AS_SENT /* @min:%2emarkAsSent */] = function (payload) {\r\n                _base[_DYN_CLEAR /* @min:%2eclear */]();\r\n            };\r\n            _self[_DYN_CLEAR_SENT /* @min:%2eclearSent */] = function (payload) {\r\n                // not supported\r\n            };\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for ArraySendBuffer.prototype.markAsSent.\r\n// Removed Stub for ArraySendBuffer.prototype.clearSent.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    ArraySendBuffer.__ieDyn=1;\n\n    return ArraySendBuffer;\r\n}(BaseSendBuffer));\r\nexport { ArraySendBuffer };\r\nvar PREVIOUS_KEYS = [\"AI_buffer\", \"AI_sentBuffer\"];\r\n/*\r\n * Session storage buffer holds a copy of all unsent items in the browser session storage.\r\n */\r\nvar SessionStorageSendBuffer = /** @class */ (function (_super) {\r\n    __extends(SessionStorageSendBuffer, _super);\r\n    function SessionStorageSendBuffer(logger, config) {\r\n        var _this = _super.call(this, logger, config) || this;\r\n        var _bufferFullMessageSent = false;\r\n        //Note: should not use config.namePrefix directly, because it will always refers to the latest namePrefix\r\n        var _namePrefix = config === null || config === void 0 ? void 0 : config.namePrefix;\r\n        // TODO: add remove buffer override as well\r\n        var _b = config[_DYN_BUFFER_OVERRIDE /* @min:%2ebufferOverride */] || { getItem: utlGetSessionStorage, setItem: utlSetSessionStorage }, getItem = _b.getItem, setItem = _b.setItem;\r\n        var _maxRetryCnt = config.maxRetryCnt;\r\n        dynamicProto(SessionStorageSendBuffer, _this, function (_self, _base) {\r\n            var bufferItems = _getBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */]);\r\n            var itemsInSentBuffer = _getBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */]);\r\n            var previousItems = _getPreviousEvents();\r\n            var notDeliveredItems = itemsInSentBuffer[_DYN_CONCAT /* @min:%2econcat */](previousItems);\r\n            var buffer = _self._set(bufferItems[_DYN_CONCAT /* @min:%2econcat */](notDeliveredItems));\r\n            // If the buffer has too many items, drop items from the end.\r\n            if (buffer[_DYN_LENGTH /* @min:%2elength */] > SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */]) {\r\n                buffer[_DYN_LENGTH /* @min:%2elength */] = SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */];\r\n            }\r\n            _setBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */], []);\r\n            _setBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */], buffer);\r\n            _self[_DYN_ENQUEUE /* @min:%2eenqueue */] = function (payload) {\r\n                if (_self[_DYN_COUNT /* @min:%2ecount */]() >= SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */]) {\r\n                    // sent internal log only once per page view\r\n                    if (!_bufferFullMessageSent) {\r\n                        _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 67 /* _eInternalMessageId.SessionStorageBufferFull */, \"Maximum buffer size reached: \" + _self[_DYN_COUNT /* @min:%2ecount */](), true);\r\n                        _bufferFullMessageSent = true;\r\n                    }\r\n                    return;\r\n                }\r\n                payload.cnt = payload.cnt || 0;\r\n                // max retry is defined, and max retry is reached, do not add the payload to buffer\r\n                if (!isNullOrUndefined(_maxRetryCnt)) {\r\n                    if (payload.cnt > _maxRetryCnt) {\r\n                        // TODO: add log here on dropping payloads\r\n                        return;\r\n                    }\r\n                }\r\n                _base[_DYN_ENQUEUE /* @min:%2eenqueue */](payload);\r\n                _setBuffer(SessionStorageSendBuffer.BUFFER_KEY, _self[_DYN__GET /* @min:%2e_get */]());\r\n            };\r\n            _self[_DYN_CLEAR /* @min:%2eclear */] = function () {\r\n                _base[_DYN_CLEAR /* @min:%2eclear */]();\r\n                _setBuffer(SessionStorageSendBuffer.BUFFER_KEY, _self[_DYN__GET /* @min:%2e_get */]());\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */], []);\r\n                _bufferFullMessageSent = false;\r\n            };\r\n            _self[_DYN_MARK_AS_SENT /* @min:%2emarkAsSent */] = function (payload) {\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */], _self._set(_removePayloadsFromBuffer(payload, _self[_DYN__GET /* @min:%2e_get */]())));\r\n                var sentElements = _getBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */]);\r\n                if (sentElements instanceof Array && payload instanceof Array) {\r\n                    sentElements = sentElements[_DYN_CONCAT /* @min:%2econcat */](payload);\r\n                    if (sentElements[_DYN_LENGTH /* @min:%2elength */] > SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */]) {\r\n                        // We send telemetry normally. If the SENT_BUFFER is too big we don't add new elements\r\n                        // until we receive a response from the backend and the buffer has free space again (see clearSent method)\r\n                        _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 67 /* _eInternalMessageId.SessionStorageBufferFull */, \"Sent buffer reached its maximum size: \" + sentElements[_DYN_LENGTH /* @min:%2elength */], true);\r\n                        sentElements[_DYN_LENGTH /* @min:%2elength */] = SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */];\r\n                    }\r\n                    _setBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */], sentElements);\r\n                }\r\n            };\r\n            _self[_DYN_CLEAR_SENT /* @min:%2eclearSent */] = function (payload) {\r\n                var sentElements = _getBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */]);\r\n                sentElements = _removePayloadsFromBuffer(payload, sentElements);\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */], sentElements);\r\n            };\r\n            _self[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = function (newLogger, newConfig, canUseSessionStorage) {\r\n                canUseSessionStorage = !!canUseSessionStorage;\r\n                var unsentItems = _self[_DYN__GET /* @min:%2e_get */]().slice(0);\r\n                var sentItems = _getBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */]).slice(0);\r\n                newLogger = newLogger || logger;\r\n                newConfig = newConfig || {};\r\n                // to make sure that we do not send duplicated payloads when it is switched back to previous one\r\n                _self[_DYN_CLEAR /* @min:%2eclear */]();\r\n                var newBuffer = canUseSessionStorage ? new SessionStorageSendBuffer(newLogger, newConfig) : new ArraySendBuffer(newLogger, newConfig);\r\n                arrForEach(unsentItems, function (payload) {\r\n                    newBuffer[_DYN_ENQUEUE /* @min:%2eenqueue */](payload);\r\n                });\r\n                if (canUseSessionStorage) {\r\n                    // arr buffer will clear all payloads if markAsSent() is called\r\n                    newBuffer[_DYN_MARK_AS_SENT /* @min:%2emarkAsSent */](sentItems);\r\n                }\r\n                return newBuffer;\r\n            };\r\n            function _removePayloadsFromBuffer(payloads, buffer) {\r\n                var remaining = [];\r\n                var payloadStr = [];\r\n                arrForEach(payloads, function (payload) {\r\n                    payloadStr[_DYN_PUSH /* @min:%2epush */](payload[_DYN_ITEM /* @min:%2eitem */]);\r\n                });\r\n                arrForEach(buffer, function (value) {\r\n                    if (!isFunction(value) && arrIndexOf(payloadStr, value[_DYN_ITEM /* @min:%2eitem */]) === -1) {\r\n                        remaining[_DYN_PUSH /* @min:%2epush */](value);\r\n                    }\r\n                });\r\n                return remaining;\r\n            }\r\n            function _getBuffer(key) {\r\n                var prefixedKey = key;\r\n                prefixedKey = _namePrefix ? _namePrefix + \"_\" + prefixedKey : prefixedKey;\r\n                return _getBufferBase(prefixedKey);\r\n            }\r\n            function _getBufferBase(key) {\r\n                try {\r\n                    var bufferJson = getItem(logger, key);\r\n                    if (bufferJson) {\r\n                        var buffer_1 = getJSON().parse(bufferJson);\r\n                        if (isString(buffer_1)) {\r\n                            // When using some version prototype.js the stringify / parse cycle does not decode array's correctly\r\n                            buffer_1 = getJSON().parse(buffer_1);\r\n                        }\r\n                        if (buffer_1 && isArray(buffer_1)) {\r\n                            return buffer_1;\r\n                        }\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 42 /* _eInternalMessageId.FailedToRestoreStorageBuffer */, \" storage key: \" + key + \", \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                }\r\n                return [];\r\n            }\r\n            function _setBuffer(key, buffer) {\r\n                var prefixedKey = key;\r\n                try {\r\n                    prefixedKey = _namePrefix ? _namePrefix + \"_\" + prefixedKey : prefixedKey;\r\n                    var bufferJson = JSON[_DYN_STRINGIFY /* @min:%2estringify */](buffer);\r\n                    setItem(logger, prefixedKey, bufferJson);\r\n                }\r\n                catch (e) {\r\n                    // if there was an error, clear the buffer\r\n                    // telemetry is stored in the _buffer array so we won't loose any items\r\n                    setItem(logger, prefixedKey, JSON[_DYN_STRINGIFY /* @min:%2estringify */]([]));\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 41 /* _eInternalMessageId.FailedToSetStorageBuffer */, \" storage key: \" + prefixedKey + \", \" + getExceptionName(e) + \". Buffer cleared\", { exception: dumpObj(e) });\r\n                }\r\n            }\r\n            // this removes buffer with prefix+key\r\n            function _getPreviousEvents() {\r\n                var items = [];\r\n                try {\r\n                    arrForEach(PREVIOUS_KEYS, function (key) {\r\n                        var events = _getItemsFromPreviousKey(key);\r\n                        items = items[_DYN_CONCAT /* @min:%2econcat */](events);\r\n                        // to make sure that we also transfer items from old prefixed + key buffer\r\n                        if (_namePrefix) {\r\n                            var prefixedKey = _namePrefix + \"_\" + key;\r\n                            var prefixEvents = _getItemsFromPreviousKey(prefixedKey);\r\n                            items = items[_DYN_CONCAT /* @min:%2econcat */](prefixEvents);\r\n                        }\r\n                    });\r\n                    return items;\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 41 /* _eInternalMessageId.FailedToSetStorageBuffer */, \"Transfer events from previous buffers: \" + getExceptionName(e) + \". previous Buffer items can not be removed\", { exception: dumpObj(e) });\r\n                }\r\n                return [];\r\n            }\r\n            // transform string[] to IInternalStorageItem[]\r\n            function _getItemsFromPreviousKey(key) {\r\n                try {\r\n                    var items = _getBufferBase(key);\r\n                    var transFormedItems_1 = [];\r\n                    arrForEach(items, function (item) {\r\n                        var internalItem = {\r\n                            item: item,\r\n                            cnt: 0 // previous events will be default to 0 count\r\n                        };\r\n                        transFormedItems_1[_DYN_PUSH /* @min:%2epush */](internalItem);\r\n                    });\r\n                    // remove the session storage if we can add events back\r\n                    utlRemoveSessionStorage(logger, key);\r\n                    return transFormedItems_1;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return [];\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for SessionStorageSendBuffer.prototype.enqueue.\r\n// Removed Stub for SessionStorageSendBuffer.prototype.clear.\r\n// Removed Stub for SessionStorageSendBuffer.prototype.markAsSent.\r\n// Removed Stub for SessionStorageSendBuffer.prototype.clearSent.\r\n// Removed Stub for SessionStorageSendBuffer.prototype.createNew.\r\n    var _a;\r\n    _a = SessionStorageSendBuffer;\r\n    SessionStorageSendBuffer.VERSION = \"_1\";\r\n    SessionStorageSendBuffer.BUFFER_KEY = \"AI_buffer\" + _a.VERSION;\r\n    SessionStorageSendBuffer.SENT_BUFFER_KEY = \"AI_sentBuffer\" + _a.VERSION;\r\n    // Maximum number of payloads stored in the buffer. If the buffer is full, new elements will be dropped.\r\n    SessionStorageSendBuffer.MAX_BUFFER_SIZE = 2000;\r\n    return SessionStorageSendBuffer;\r\n}(BaseSendBuffer));\r\nexport { SessionStorageSendBuffer };\r\n//# sourceMappingURL=SendBuffer.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nvar _a, _b;\r\nimport { __assignFn as __assign, __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { BreezeChannelIdentifier, DEFAULT_BREEZE_ENDPOINT, DEFAULT_BREEZE_PATH, Event, Exception, Metric, PageView, PageViewPerformance, ProcessLegacy, RemoteDependencyData, RequestHeaders, SampleRate, Trace, createOfflineListener, isInternalApplicationInsightsEndpoint, utlCanUseSessionStorage, utlSetStoragePrefix } from \"@microsoft/applicationinsights-common\";\r\nimport { ActiveStatus, BaseTelemetryPlugin, SenderPostManager, _throwInternal, _warnToConsole, arrForEach, cfgDfBoolean, cfgDfValidate, createProcessTelemetryContext, createUniqueNamespace, dateNow, dumpObj, formatErrorMessageXdr, formatErrorMessageXhr, getExceptionName, getIEVersion, isArray, isBeaconsSupported, isFetchSupported, isNullOrUndefined, mergeEvtNamespace, objExtend, onConfigChange, parseResponse, prependTransports, runTargetUnload } from \"@microsoft/applicationinsights-core-js\";\r\nimport { isNumber, isPromiseLike, isString, isTruthy, objDeepFreeze, objDefine, scheduleTimeout } from \"@nevware21/ts-utils\";\r\nimport { DependencyEnvelopeCreator, EventEnvelopeCreator, ExceptionEnvelopeCreator, MetricEnvelopeCreator, PageViewEnvelopeCreator, PageViewPerformanceEnvelopeCreator, TraceEnvelopeCreator } from \"./EnvelopeCreator\";\r\nimport { ArraySendBuffer, SessionStorageSendBuffer } from \"./SendBuffer\";\r\nimport { Serializer } from \"./Serializer\";\r\nimport { Sample } from \"./TelemetryProcessors/Sample\";\r\nimport { _DYN_ALWAYS_USE_XHR_OVERR4, _DYN_BASE_TYPE, _DYN_BUFFER_OVERRIDE, _DYN_CLEAR, _DYN_CLEAR_SENT, _DYN_CONVERT_UNDEFINED, _DYN_COUNT, _DYN_CREATE_NEW, _DYN_CUSTOM_HEADERS, _DYN_DATA, _DYN_DIAG_LOG, _DYN_DISABLE_SEND_BEACON_7, _DYN_DISABLE_XHR, _DYN_EMIT_LINE_DELIMITED_0, _DYN_ENABLE_SEND_PROMISE, _DYN_ENABLE_SESSION_STORA5, _DYN_ENDPOINT_URL, _DYN_ENQUEUE, _DYN_EVENTS_LIMIT_IN_MEM, _DYN_EVENTS_SEND_REQUEST, _DYN_GET_SENDER_INST, _DYN_INITIALIZE, _DYN_INSTRUMENTATION_KEY, _DYN_IS_BEACON_API_DISABL3, _DYN_ITEM, _DYN_ITEMS_ACCEPTED, _DYN_ITEMS_RECEIVED, _DYN_LENGTH, _DYN_MARK_AS_SENT, _DYN_MAX_BATCH_INTERVAL, _DYN_MAX_BATCH_SIZE_IN_BY1, _DYN_ONUNLOAD_DISABLE_BEA2, _DYN_ONUNLOAD_DISABLE_FET6, _DYN_ORI_PAYLOAD, _DYN_PUSH, _DYN_SAMPLE_RATE, _DYN_SERIALIZE, _DYN_TAGS, _DYN_TRIGGER_SEND, _DYN_UNLOAD_TRANSPORTS, _DYN__BUFFER, _DYN__ON_ERROR, _DYN__ON_PARTIAL_SUCCESS, _DYN__ON_SUCCESS, _DYN__SENDER } from \"./__DynamicConstants\";\r\nvar UNDEFINED_VALUE = undefined;\r\nvar EMPTY_STR = \"\";\r\nvar FetchSyncRequestSizeLimitBytes = 65000; // approx 64kb (the current Edge, Firefox and Chrome max limit)\r\nfunction _getResponseText(xhr) {\r\n    try {\r\n        return xhr.responseText;\r\n    }\r\n    catch (e) {\r\n        // Best effort, as XHR may throw while XDR wont so just ignore\r\n    }\r\n    return null;\r\n}\r\nfunction isOverrideFn(httpXHROverride) {\r\n    return httpXHROverride && httpXHROverride.sendPOST;\r\n}\r\nvar defaultAppInsightsChannelConfig = objDeepFreeze((_a = {\r\n        // Use the default value (handles empty string in the configuration)\r\n        endpointUrl: cfgDfValidate(isTruthy, DEFAULT_BREEZE_ENDPOINT + DEFAULT_BREEZE_PATH)\r\n    },\r\n    _a[_DYN_EMIT_LINE_DELIMITED_0 /* @min:emitLineDelimitedJson */] = cfgDfBoolean(),\r\n    _a[_DYN_MAX_BATCH_INTERVAL /* @min:maxBatchInterval */] = 15000,\r\n    _a[_DYN_MAX_BATCH_SIZE_IN_BY1 /* @min:maxBatchSizeInBytes */] = 102400,\r\n    _a.disableTelemetry = cfgDfBoolean(),\r\n    _a[_DYN_ENABLE_SESSION_STORA5 /* @min:enableSessionStorageBuffer */] = cfgDfBoolean(true),\r\n    _a.isRetryDisabled = cfgDfBoolean(),\r\n    _a[_DYN_IS_BEACON_API_DISABL3 /* @min:isBeaconApiDisabled */] = cfgDfBoolean(true),\r\n    _a[_DYN_DISABLE_SEND_BEACON_7 /* @min:disableSendBeaconSplit */] = cfgDfBoolean(true),\r\n    _a[_DYN_DISABLE_XHR /* @min:disableXhr */] = cfgDfBoolean(),\r\n    _a[_DYN_ONUNLOAD_DISABLE_FET6 /* @min:onunloadDisableFetch */] = cfgDfBoolean(),\r\n    _a[_DYN_ONUNLOAD_DISABLE_BEA2 /* @min:onunloadDisableBeacon */] = cfgDfBoolean(),\r\n    _a[_DYN_INSTRUMENTATION_KEY /* @min:instrumentationKey */] = UNDEFINED_VALUE,\r\n    _a.namePrefix = UNDEFINED_VALUE,\r\n    _a.samplingPercentage = cfgDfValidate(_chkSampling, 100),\r\n    _a[_DYN_CUSTOM_HEADERS /* @min:customHeaders */] = UNDEFINED_VALUE,\r\n    _a[_DYN_CONVERT_UNDEFINED /* @min:convertUndefined */] = UNDEFINED_VALUE,\r\n    _a[_DYN_EVENTS_LIMIT_IN_MEM /* @min:eventsLimitInMem */] = 10000,\r\n    _a[_DYN_BUFFER_OVERRIDE /* @min:bufferOverride */] = false,\r\n    _a.httpXHROverride = { isVal: isOverrideFn, v: UNDEFINED_VALUE },\r\n    _a[_DYN_ALWAYS_USE_XHR_OVERR4 /* @min:alwaysUseXhrOverride */] = cfgDfBoolean(),\r\n    _a.transports = UNDEFINED_VALUE,\r\n    _a.retryCodes = UNDEFINED_VALUE,\r\n    _a.maxRetryCnt = { isVal: isNumber, v: 10 },\r\n    _a));\r\nfunction _chkSampling(value) {\r\n    return !isNaN(value) && value > 0 && value <= 100;\r\n}\r\nvar EnvelopeTypeCreator = (_b = {},\r\n    _b[Event.dataType] = EventEnvelopeCreator,\r\n    _b[Trace.dataType] = TraceEnvelopeCreator,\r\n    _b[PageView.dataType] = PageViewEnvelopeCreator,\r\n    _b[PageViewPerformance.dataType] = PageViewPerformanceEnvelopeCreator,\r\n    _b[Exception.dataType] = ExceptionEnvelopeCreator,\r\n    _b[Metric.dataType] = MetricEnvelopeCreator,\r\n    _b[RemoteDependencyData.dataType] = DependencyEnvelopeCreator,\r\n    _b);\r\nvar Sender = /** @class */ (function (_super) {\r\n    __extends(Sender, _super);\r\n    function Sender() {\r\n        var _this = _super.call(this) || this;\r\n        _this.priority = 1001;\r\n        _this.identifier = BreezeChannelIdentifier;\r\n        // Don't set the defaults here, set them in the _initDefaults() as this is also called during unload\r\n        var _consecutiveErrors; // How many times in a row a retryable error condition has occurred.\r\n        var _retryAt; // The time to retry at in milliseconds from 1970/01/01 (this makes the timer calculation easy).\r\n        var _lastSend; // The time of the last send operation.\r\n        var _paused; // Flag indicating that the sending should be paused\r\n        var _timeoutHandle; // Handle to the timer for delayed sending of batches of data.\r\n        var _serializer;\r\n        var _stamp_specific_redirects;\r\n        var _headers;\r\n        var _syncFetchPayload = 0; // Keep track of the outstanding sync fetch payload total (as sync fetch has limits)\r\n        var _syncUnloadSender; // The identified sender to use for the synchronous unload stage\r\n        var _offlineListener;\r\n        var _evtNamespace;\r\n        var _endpointUrl;\r\n        var _orgEndpointUrl;\r\n        var _maxBatchSizeInBytes;\r\n        var _beaconSupported;\r\n        var _beaconOnUnloadSupported;\r\n        var _beaconNormalSupported;\r\n        var _customHeaders;\r\n        var _disableTelemetry;\r\n        var _instrumentationKey;\r\n        var _convertUndefined;\r\n        var _isRetryDisabled;\r\n        var _maxBatchInterval;\r\n        var _sessionStorageUsed;\r\n        var _bufferOverrideUsed;\r\n        var _namePrefix;\r\n        var _enableSendPromise;\r\n        var _alwaysUseCustomSend;\r\n        var _disableXhr;\r\n        var _fetchKeepAlive;\r\n        var _xhrSend;\r\n        var _fallbackSend;\r\n        var _disableBeaconSplit;\r\n        var _sendPostMgr;\r\n        var _retryCodes;\r\n        dynamicProto(Sender, _this, function (_self, _base) {\r\n            _initDefaults();\r\n            _self.pause = function () {\r\n                _clearScheduledTimer();\r\n                _paused = true;\r\n            };\r\n            _self.resume = function () {\r\n                if (_paused) {\r\n                    _paused = false;\r\n                    _retryAt = null;\r\n                    // flush if we have exceeded the max-size already\r\n                    _checkMaxSize();\r\n                    _setupTimer();\r\n                }\r\n            };\r\n            _self.flush = function (isAsync, callBack, sendReason) {\r\n                if (isAsync === void 0) { isAsync = true; }\r\n                if (!_paused) {\r\n                    // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                    _clearScheduledTimer();\r\n                    try {\r\n                        return _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */](isAsync, null, sendReason || 1 /* SendRequestReason.ManualFlush */);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 22 /* _eInternalMessageId.FlushFailed */, \"flush failed, telemetry will not be collected: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                    }\r\n                }\r\n            };\r\n            _self.onunloadFlush = function () {\r\n                if (!_paused) {\r\n                    if (_beaconSupported || _alwaysUseCustomSend) {\r\n                        try {\r\n                            return _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */](true, _doUnloadSend, 2 /* SendRequestReason.Unload */);\r\n                        }\r\n                        catch (e) {\r\n                            _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 20 /* _eInternalMessageId.FailedToSendQueuedTelemetry */, \"failed to flush with beacon sender on page unload, telemetry will not be collected: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                        }\r\n                    }\r\n                    else {\r\n                        _self.flush(false);\r\n                    }\r\n                }\r\n            };\r\n            _self.addHeader = function (name, value) {\r\n                _headers[name] = value;\r\n            };\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, core, extensions, pluginChain) {\r\n                if (_self.isInitialized()) {\r\n                    _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 28 /* _eInternalMessageId.SenderNotInitialized */, \"Sender is already initialized\");\r\n                }\r\n                _base[_DYN_INITIALIZE /* @min:%2einitialize */](config, core, extensions, pluginChain);\r\n                var identifier = _self.identifier;\r\n                _serializer = new Serializer(core.logger);\r\n                _consecutiveErrors = 0;\r\n                _retryAt = null;\r\n                _lastSend = 0;\r\n                _self[_DYN__SENDER /* @min:%2e_sender */] = null;\r\n                _stamp_specific_redirects = 0;\r\n                var diagLog = _self[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n                _evtNamespace = mergeEvtNamespace(createUniqueNamespace(\"Sender\"), core.evtNamespace && core.evtNamespace());\r\n                _offlineListener = createOfflineListener(_evtNamespace);\r\n                // This function will be re-called whenever any referenced configuration is changed\r\n                _self._addHook(onConfigChange(config, function (details) {\r\n                    var config = details.cfg;\r\n                    if (config.storagePrefix) {\r\n                        utlSetStoragePrefix(config.storagePrefix);\r\n                    }\r\n                    var ctx = createProcessTelemetryContext(null, config, core);\r\n                    // getExtCfg only finds undefined values from core\r\n                    var senderConfig = ctx.getExtCfg(identifier, defaultAppInsightsChannelConfig);\r\n                    var curExtUrl = senderConfig[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                    // if it is not inital change (_endpointUrl has value)\r\n                    // if current sender endpoint url is not changed directly\r\n                    // means ExtCfg is not changed directly\r\n                    // then we need to monitor endpoint url changes from core\r\n                    if (_endpointUrl && curExtUrl === _endpointUrl) {\r\n                        var coreUrl = config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                        // if core endpoint url is changed\r\n                        if (coreUrl && coreUrl !== curExtUrl) {\r\n                            // and endpoint promise changes is handled by this as well\r\n                            senderConfig[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */] = coreUrl;\r\n                        }\r\n                    }\r\n                    if (isPromiseLike(senderConfig[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */])) {\r\n                        // if it is promise, means the endpoint url is from core.endpointurl\r\n                        senderConfig[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */] = config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                    }\r\n                    objDefine(_self, \"_senderConfig\", {\r\n                        g: function () {\r\n                            return senderConfig;\r\n                        }\r\n                    });\r\n                    // Only update the endpoint if the original config !== the current config\r\n                    // This is so any redirect endpointUrl is not overwritten\r\n                    if (_orgEndpointUrl !== senderConfig[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */]) {\r\n                        if (_orgEndpointUrl) {\r\n                            // TODO: add doc to remind users to flush before changing endpoint, otherwise all unsent payload will be sent to new endpoint\r\n                        }\r\n                        _endpointUrl = _orgEndpointUrl = senderConfig[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                    }\r\n                    // or is not string\r\n                    if (core.activeStatus() === ActiveStatus.PENDING) {\r\n                        // waiting for core promises to be resolved\r\n                        // NOTE: if active status is set to pending, stop sending, clear timer here\r\n                        _self.pause();\r\n                    }\r\n                    else if (core.activeStatus() === ActiveStatus.ACTIVE) {\r\n                        // core status changed from pending to other status\r\n                        _self.resume();\r\n                    }\r\n                    if (_customHeaders && _customHeaders !== senderConfig[_DYN_CUSTOM_HEADERS /* @min:%2ecustomHeaders */]) {\r\n                        // Removing any previously defined custom headers as they have changed\r\n                        arrForEach(_customHeaders, function (customHeader) {\r\n                            delete _headers[customHeader.header];\r\n                        });\r\n                    }\r\n                    _maxBatchSizeInBytes = senderConfig[_DYN_MAX_BATCH_SIZE_IN_BY1 /* @min:%2emaxBatchSizeInBytes */];\r\n                    _beaconSupported = (senderConfig[_DYN_ONUNLOAD_DISABLE_BEA2 /* @min:%2eonunloadDisableBeacon */] === false || senderConfig[_DYN_IS_BEACON_API_DISABL3 /* @min:%2eisBeaconApiDisabled */] === false) && isBeaconsSupported();\r\n                    _beaconOnUnloadSupported = senderConfig[_DYN_ONUNLOAD_DISABLE_BEA2 /* @min:%2eonunloadDisableBeacon */] === false && isBeaconsSupported();\r\n                    _beaconNormalSupported = senderConfig[_DYN_IS_BEACON_API_DISABL3 /* @min:%2eisBeaconApiDisabled */] === false && isBeaconsSupported();\r\n                    _alwaysUseCustomSend = senderConfig[_DYN_ALWAYS_USE_XHR_OVERR4 /* @min:%2ealwaysUseXhrOverride */];\r\n                    _disableXhr = !!senderConfig[_DYN_DISABLE_XHR /* @min:%2edisableXhr */];\r\n                    _retryCodes = senderConfig.retryCodes;\r\n                    var bufferOverride = senderConfig[_DYN_BUFFER_OVERRIDE /* @min:%2ebufferOverride */];\r\n                    var canUseSessionStorage = !!senderConfig[_DYN_ENABLE_SESSION_STORA5 /* @min:%2eenableSessionStorageBuffer */] &&\r\n                        (!!bufferOverride || utlCanUseSessionStorage());\r\n                    var namePrefix = senderConfig.namePrefix;\r\n                    //Note: emitLineDelimitedJson and eventsLimitInMem is directly accessed via config in senderBuffer\r\n                    //Therefore, if canUseSessionStorage is not changed, we do not need to re initialize a new one\r\n                    var shouldUpdate = (canUseSessionStorage !== _sessionStorageUsed)\r\n                        || (canUseSessionStorage && (_namePrefix !== namePrefix)) // prefixName is only used in session storage\r\n                        || (canUseSessionStorage && (_bufferOverrideUsed !== bufferOverride));\r\n                    if (_self[_DYN__BUFFER /* @min:%2e_buffer */]) {\r\n                        // case1 (Pre and Now enableSessionStorageBuffer settings are same)\r\n                        // if namePrefix changes, transfer current buffer to new buffer\r\n                        // else no action needed\r\n                        //case2 (Pre and Now enableSessionStorageBuffer settings are changed)\r\n                        // transfer current buffer to new buffer\r\n                        if (shouldUpdate) {\r\n                            try {\r\n                                _self._buffer = _self._buffer[_DYN_CREATE_NEW /* @min:%2ecreateNew */](diagLog, senderConfig, canUseSessionStorage);\r\n                            }\r\n                            catch (e) {\r\n                                _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 12 /* _eInternalMessageId.FailedAddingTelemetryToBuffer */, \"failed to transfer telemetry to different buffer storage, telemetry will be lost: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                            }\r\n                        }\r\n                        _checkMaxSize();\r\n                    }\r\n                    else {\r\n                        _self[_DYN__BUFFER /* @min:%2e_buffer */] = canUseSessionStorage\r\n                            ? new SessionStorageSendBuffer(diagLog, senderConfig) : new ArraySendBuffer(diagLog, senderConfig);\r\n                    }\r\n                    _namePrefix = namePrefix;\r\n                    _sessionStorageUsed = canUseSessionStorage;\r\n                    _bufferOverrideUsed = bufferOverride;\r\n                    _fetchKeepAlive = !senderConfig[_DYN_ONUNLOAD_DISABLE_FET6 /* @min:%2eonunloadDisableFetch */] && isFetchSupported(true);\r\n                    _disableBeaconSplit = !!senderConfig[_DYN_DISABLE_SEND_BEACON_7 /* @min:%2edisableSendBeaconSplit */];\r\n                    _self._sample = new Sample(senderConfig.samplingPercentage, diagLog);\r\n                    _instrumentationKey = senderConfig[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                    if (!isPromiseLike(_instrumentationKey) && !_validateInstrumentationKey(_instrumentationKey, config)) {\r\n                        _throwInternal(diagLog, 1 /* eLoggingSeverity.CRITICAL */, 100 /* _eInternalMessageId.InvalidInstrumentationKey */, \"Invalid Instrumentation key \" + _instrumentationKey);\r\n                    }\r\n                    _customHeaders = senderConfig[_DYN_CUSTOM_HEADERS /* @min:%2ecustomHeaders */];\r\n                    if (isString(_endpointUrl) && !isInternalApplicationInsightsEndpoint(_endpointUrl) && _customHeaders && _customHeaders[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        arrForEach(_customHeaders, function (customHeader) {\r\n                            _this.addHeader(customHeader.header, customHeader.value);\r\n                        });\r\n                    }\r\n                    else {\r\n                        _customHeaders = null;\r\n                    }\r\n                    _enableSendPromise = senderConfig[_DYN_ENABLE_SEND_PROMISE /* @min:%2eenableSendPromise */];\r\n                    var sendPostConfig = _getSendPostMgrConfig();\r\n                    // only init it once\r\n                    if (!_sendPostMgr) {\r\n                        _sendPostMgr = new SenderPostManager();\r\n                        _sendPostMgr[_DYN_INITIALIZE /* @min:%2einitialize */](sendPostConfig, diagLog);\r\n                    }\r\n                    else {\r\n                        _sendPostMgr.SetConfig(sendPostConfig);\r\n                    }\r\n                    var customInterface = senderConfig.httpXHROverride;\r\n                    var httpInterface = null;\r\n                    var syncInterface = null;\r\n                    // User requested transport(s) values > Beacon > Fetch > XHR\r\n                    // Beacon would be filtered out if user has set disableBeaconApi to true at _getSenderInterface\r\n                    var theTransports = prependTransports([3 /* TransportType.Beacon */, 1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */], senderConfig.transports);\r\n                    httpInterface = _sendPostMgr && _sendPostMgr[_DYN_GET_SENDER_INST /* @min:%2egetSenderInst */](theTransports, false);\r\n                    var xhrInterface = _sendPostMgr && _sendPostMgr.getFallbackInst();\r\n                    _xhrSend = function (payload, isAsync) {\r\n                        return _doSend(xhrInterface, payload, isAsync);\r\n                    };\r\n                    _fallbackSend = function (payload, isAsync) {\r\n                        return _doSend(xhrInterface, payload, isAsync, false);\r\n                    };\r\n                    httpInterface = _alwaysUseCustomSend ? customInterface : (httpInterface || customInterface || xhrInterface);\r\n                    _self[_DYN__SENDER /* @min:%2e_sender */] = function (payload, isAsync) {\r\n                        return _doSend(httpInterface, payload, isAsync);\r\n                    };\r\n                    if (_fetchKeepAlive) {\r\n                        // Try and use the fetch with keepalive\r\n                        _syncUnloadSender = _fetchKeepAliveSender;\r\n                    }\r\n                    var syncTransports = prependTransports([3 /* TransportType.Beacon */, 1 /* TransportType.Xhr */], senderConfig[_DYN_UNLOAD_TRANSPORTS /* @min:%2eunloadTransports */]);\r\n                    if (!_fetchKeepAlive) {\r\n                        // remove fetch from theTransports\r\n                        syncTransports = syncTransports.filter(function (transport) { return transport !== 2 /* TransportType.Fetch */; });\r\n                    }\r\n                    syncInterface = _sendPostMgr && _sendPostMgr[_DYN_GET_SENDER_INST /* @min:%2egetSenderInst */](syncTransports, true);\r\n                    syncInterface = _alwaysUseCustomSend ? customInterface : (syncInterface || customInterface);\r\n                    if ((_alwaysUseCustomSend || senderConfig[_DYN_UNLOAD_TRANSPORTS /* @min:%2eunloadTransports */] || !_syncUnloadSender) && syncInterface) {\r\n                        _syncUnloadSender = function (payload, isAsync) {\r\n                            return _doSend(syncInterface, payload, isAsync);\r\n                        };\r\n                    }\r\n                    if (!_syncUnloadSender) {\r\n                        _syncUnloadSender = _xhrSend;\r\n                    }\r\n                    _disableTelemetry = senderConfig.disableTelemetry;\r\n                    _convertUndefined = senderConfig[_DYN_CONVERT_UNDEFINED /* @min:%2econvertUndefined */] || UNDEFINED_VALUE;\r\n                    _isRetryDisabled = senderConfig.isRetryDisabled;\r\n                    _maxBatchInterval = senderConfig[_DYN_MAX_BATCH_INTERVAL /* @min:%2emaxBatchInterval */];\r\n                }));\r\n            };\r\n            _self.processTelemetry = function (telemetryItem, itemCtx) {\r\n                var _a;\r\n                itemCtx = _self._getTelCtx(itemCtx);\r\n                var diagLogger = itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n                try {\r\n                    var isValidate = _validate(telemetryItem, diagLogger);\r\n                    if (!isValidate) {\r\n                        return;\r\n                    }\r\n                    var aiEnvelope = _getEnvelope(telemetryItem, diagLogger);\r\n                    if (!aiEnvelope) {\r\n                        return;\r\n                    }\r\n                    // check if the incoming payload is too large, truncate if necessary\r\n                    var payload = _serializer[_DYN_SERIALIZE /* @min:%2eserialize */](aiEnvelope);\r\n                    // flush if we would exceed the max-size limit by adding this item\r\n                    var buffer = _self[_DYN__BUFFER /* @min:%2e_buffer */];\r\n                    _checkMaxSize(payload);\r\n                    var payloadItem = (_a = {},\r\n                        _a[_DYN_ITEM /* @min:item */] = payload,\r\n                        _a.cnt = 0 // inital cnt will always be 0\r\n                    ,\r\n                        _a);\r\n                    // enqueue the payload\r\n                    buffer[_DYN_ENQUEUE /* @min:%2eenqueue */](payloadItem);\r\n                    // ensure an invocation timeout is set\r\n                    _setupTimer();\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(diagLogger, 2 /* eLoggingSeverity.WARNING */, 12 /* _eInternalMessageId.FailedAddingTelemetryToBuffer */, \"Failed adding telemetry to the sender's buffer, some telemetry will be lost: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                }\r\n                // hand off the telemetry item to the next plugin\r\n                _self.processNext(telemetryItem, itemCtx);\r\n            };\r\n            _self.isCompletelyIdle = function () {\r\n                return !_paused && _syncFetchPayload === 0 && _self._buffer[_DYN_COUNT /* @min:%2ecount */]() === 0;\r\n            };\r\n            _self.getOfflineListener = function () {\r\n                return _offlineListener;\r\n            };\r\n            /**\r\n             * xhr state changes\r\n             */\r\n            _self._xhrReadyStateChange = function (xhr, payload, countOfItemsInPayload) {\r\n                // since version 3.2.0, this function is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _xhrReadyStateChange(xhr, payload, countOfItemsInPayload);\r\n            };\r\n            /**\r\n             * Immediately send buffered data\r\n             * @param async - {boolean} - Indicates if the events should be sent asynchronously\r\n             * @param forcedSender - {SenderFunction} - Indicates the forcedSender, undefined if not passed\r\n             */\r\n            _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */] = function (async, forcedSender, sendReason) {\r\n                if (async === void 0) { async = true; }\r\n                var result;\r\n                if (!_paused) {\r\n                    try {\r\n                        var buffer = _self[_DYN__BUFFER /* @min:%2e_buffer */];\r\n                        // Send data only if disableTelemetry is false\r\n                        if (!_disableTelemetry) {\r\n                            if (buffer[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                                var payload = buffer.getItems();\r\n                                _notifySendRequest(sendReason || 0 /* SendRequestReason.Undefined */, async);\r\n                                // invoke send\r\n                                if (forcedSender) {\r\n                                    result = forcedSender.call(_self, payload, async);\r\n                                }\r\n                                else {\r\n                                    result = _self[_DYN__SENDER /* @min:%2e_sender */](payload, async);\r\n                                }\r\n                            }\r\n                            // update lastSend time to enable throttling\r\n                            _lastSend = +new Date;\r\n                        }\r\n                        else {\r\n                            buffer[_DYN_CLEAR /* @min:%2eclear */]();\r\n                        }\r\n                        _clearScheduledTimer();\r\n                    }\r\n                    catch (e) {\r\n                        /* Ignore this error for IE under v10 */\r\n                        var ieVer = getIEVersion();\r\n                        if (!ieVer || ieVer > 9) {\r\n                            _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 40 /* _eInternalMessageId.TransmissionFailed */, \"Telemetry transmission failed, some telemetry will be lost: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                        }\r\n                    }\r\n                }\r\n                return result;\r\n            };\r\n            _self.getOfflineSupport = function () {\r\n                var _a;\r\n                return _a = {\r\n                        getUrl: function () {\r\n                            return _endpointUrl;\r\n                        },\r\n                        createPayload: _createPayload\r\n                    },\r\n                    _a[_DYN_SERIALIZE /* @min:serialize */] = _serialize,\r\n                    _a.batch = _batch,\r\n                    _a.shouldProcess = function (evt) {\r\n                        return !!_validate(evt);\r\n                    },\r\n                    _a;\r\n            };\r\n            _self._doTeardown = function (unloadCtx, unloadState) {\r\n                _self.onunloadFlush();\r\n                runTargetUnload(_offlineListener, false);\r\n                _initDefaults();\r\n            };\r\n            /**\r\n             * error handler\r\n             */\r\n            _self[_DYN__ON_ERROR /* @min:%2e_onError */] = function (payload, message, event) {\r\n                // since version 3.1.3, string[] is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _onError(payload, message, event);\r\n            };\r\n            /**\r\n             * partial success handler\r\n             */\r\n            _self[_DYN__ON_PARTIAL_SUCCESS /* @min:%2e_onPartialSuccess */] = function (payload, results) {\r\n                // since version 3.1.3, string[] is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _onPartialSuccess(payload, results);\r\n            };\r\n            /**\r\n             * success handler\r\n             */\r\n            _self[_DYN__ON_SUCCESS /* @min:%2e_onSuccess */] = function (payload, countOfItemsInPayload) {\r\n                // since version 3.1.3, string[] is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _onSuccess(payload, countOfItemsInPayload);\r\n                //_self._buffer && _self._buffer.clearSent(payload);\r\n            };\r\n            /**\r\n             * xdr state changes\r\n             */\r\n            _self._xdrOnLoad = function (xdr, payload) {\r\n                // since version 3.1.3, string[] is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _xdrOnLoad(xdr, payload);\r\n            };\r\n            function _xdrOnLoad(xdr, payload) {\r\n                var responseText = _getResponseText(xdr);\r\n                if (xdr && (responseText + \"\" === \"200\" || responseText === \"\")) {\r\n                    _consecutiveErrors = 0;\r\n                    _self[_DYN__ON_SUCCESS /* @min:%2e_onSuccess */](payload, 0);\r\n                }\r\n                else {\r\n                    var results = parseResponse(responseText);\r\n                    if (results && results[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] && results[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] > results[_DYN_ITEMS_ACCEPTED /* @min:%2eitemsAccepted */]\r\n                        && !_isRetryDisabled) {\r\n                        _self[_DYN__ON_PARTIAL_SUCCESS /* @min:%2e_onPartialSuccess */](payload, results);\r\n                    }\r\n                    else {\r\n                        _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, formatErrorMessageXdr(xdr));\r\n                    }\r\n                }\r\n            }\r\n            function _getSendPostMgrConfig() {\r\n                var _a;\r\n                try {\r\n                    var onCompleteFuncs = {\r\n                        xdrOnComplete: function (xdr, oncomplete, payload) {\r\n                            var data = _getPayloadArr(payload);\r\n                            if (!data) {\r\n                                return;\r\n                            }\r\n                            return _xdrOnLoad(xdr, data);\r\n                        },\r\n                        fetchOnComplete: function (response, onComplete, resValue, payload) {\r\n                            var data = _getPayloadArr(payload);\r\n                            if (!data) {\r\n                                return;\r\n                            }\r\n                            return _checkResponsStatus(response.status, data, response.url, data[_DYN_LENGTH /* @min:%2elength */], response.statusText, resValue || \"\");\r\n                        },\r\n                        xhrOnComplete: function (request, oncomplete, payload) {\r\n                            var data = _getPayloadArr(payload);\r\n                            if (!data) {\r\n                                return;\r\n                            }\r\n                            return _xhrReadyStateChange(request, data, data[_DYN_LENGTH /* @min:%2elength */]);\r\n                        },\r\n                        beaconOnRetry: function (data, onComplete, canSend) {\r\n                            return _onBeaconRetry(data, onComplete, canSend);\r\n                        }\r\n                    };\r\n                    var config = (_a = {},\r\n                        _a[_DYN_ENABLE_SEND_PROMISE /* @min:enableSendPromise */] = _enableSendPromise,\r\n                        _a.isOneDs = false,\r\n                        _a.disableCredentials = false,\r\n                        _a[_DYN_DISABLE_XHR /* @min:disableXhr */] = _disableXhr,\r\n                        _a.disableBeacon = !_beaconNormalSupported,\r\n                        _a.disableBeaconSync = !_beaconOnUnloadSupported,\r\n                        _a.senderOnCompleteCallBack = onCompleteFuncs,\r\n                        _a);\r\n                    return config;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            /**\r\n             * xhr state changes\r\n             */\r\n            function _xhrReadyStateChange(xhr, payload, countOfItemsInPayload) {\r\n                if (xhr.readyState === 4) {\r\n                    _checkResponsStatus(xhr.status, payload, xhr.responseURL, countOfItemsInPayload, formatErrorMessageXhr(xhr), _getResponseText(xhr) || xhr.response);\r\n                }\r\n            }\r\n            /**\r\n             * error handler\r\n             */\r\n            function _onError(payload, message, event) {\r\n                _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 26 /* _eInternalMessageId.OnError */, \"Failed to send telemetry.\", { message: message });\r\n                _self._buffer && _self._buffer[_DYN_CLEAR_SENT /* @min:%2eclearSent */](payload);\r\n            }\r\n            /**\r\n             * partial success handler\r\n             */\r\n            function _onPartialSuccess(payload, results) {\r\n                var failed = [];\r\n                var retry = [];\r\n                // Iterate through the reversed array of errors so that splicing doesn't have invalid indexes after the first item.\r\n                var errors = results.errors.reverse();\r\n                for (var _i = 0, errors_1 = errors; _i < errors_1.length; _i++) {\r\n                    var error = errors_1[_i];\r\n                    var extracted = payload.splice(error.index, 1)[0];\r\n                    if (_isRetriable(error.statusCode)) {\r\n                        retry[_DYN_PUSH /* @min:%2epush */](extracted);\r\n                    }\r\n                    else {\r\n                        // All other errors, including: 402 (Monthly quota exceeded) and 439 (Too many requests and refresh cache).\r\n                        failed[_DYN_PUSH /* @min:%2epush */](extracted);\r\n                    }\r\n                }\r\n                if (payload[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _self[_DYN__ON_SUCCESS /* @min:%2e_onSuccess */](payload, results[_DYN_ITEMS_ACCEPTED /* @min:%2eitemsAccepted */]);\r\n                }\r\n                if (failed[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _self[_DYN__ON_ERROR /* @min:%2e_onError */](failed, formatErrorMessageXhr(null, [\"partial success\", results[_DYN_ITEMS_ACCEPTED /* @min:%2eitemsAccepted */], \"of\", results.itemsReceived].join(\" \")));\r\n                }\r\n                if (retry[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _resendPayload(retry);\r\n                    _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \"Partial success. \" +\r\n                        \"Delivered: \" + payload[_DYN_LENGTH /* @min:%2elength */] + \", Failed: \" + failed[_DYN_LENGTH /* @min:%2elength */] +\r\n                        \". Will retry to send \" + retry[_DYN_LENGTH /* @min:%2elength */] + \" our of \" + results[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] + \" items\");\r\n                }\r\n            }\r\n            /**\r\n             * success handler\r\n             */\r\n            function _onSuccess(payload, countOfItemsInPayload) {\r\n                _self._buffer && _self._buffer[_DYN_CLEAR_SENT /* @min:%2eclearSent */](payload);\r\n            }\r\n            function _getPayloadArr(payload) {\r\n                try {\r\n                    if (payload) {\r\n                        var internalPayload = payload;\r\n                        var arr = internalPayload[_DYN_ORI_PAYLOAD /* @min:%2eoriPayload */];\r\n                        if (arr && arr[_DYN_LENGTH /* @min:%2elength */]) {\r\n                            return arr;\r\n                        }\r\n                        return null;\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            function _validate(telemetryItem, diagLogger) {\r\n                if (_disableTelemetry) {\r\n                    // Do not send/save data\r\n                    return false;\r\n                }\r\n                // validate input\r\n                if (!telemetryItem) {\r\n                    diagLogger && _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 7 /* _eInternalMessageId.CannotSendEmptyTelemetry */, \"Cannot send empty telemetry\");\r\n                    return false;\r\n                }\r\n                // validate event\r\n                if (telemetryItem.baseData && !telemetryItem[_DYN_BASE_TYPE /* @min:%2ebaseType */]) {\r\n                    diagLogger && _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 70 /* _eInternalMessageId.InvalidEvent */, \"Cannot send telemetry without baseData and baseType\");\r\n                    return false;\r\n                }\r\n                if (!telemetryItem[_DYN_BASE_TYPE /* @min:%2ebaseType */]) {\r\n                    // Default\r\n                    telemetryItem[_DYN_BASE_TYPE /* @min:%2ebaseType */] = \"EventData\";\r\n                }\r\n                // ensure a sender was constructed\r\n                if (!_self[_DYN__SENDER /* @min:%2e_sender */]) {\r\n                    diagLogger && _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 28 /* _eInternalMessageId.SenderNotInitialized */, \"Sender was not initialized\");\r\n                    return false;\r\n                }\r\n                // check if this item should be sampled in, else add sampleRate tag\r\n                if (!_isSampledIn(telemetryItem)) {\r\n                    // Item is sampled out, do not send it\r\n                    diagLogger && _throwInternal(diagLogger, 2 /* eLoggingSeverity.WARNING */, 33 /* _eInternalMessageId.TelemetrySampledAndNotSent */, \"Telemetry item was sampled out and not sent\", { SampleRate: _self._sample[_DYN_SAMPLE_RATE /* @min:%2esampleRate */] });\r\n                    return false;\r\n                }\r\n                else {\r\n                    telemetryItem[SampleRate] = _self._sample[_DYN_SAMPLE_RATE /* @min:%2esampleRate */];\r\n                }\r\n                return true;\r\n            }\r\n            function _getEnvelope(telemetryItem, diagLogger) {\r\n                // construct an envelope that Application Insights endpoint can understand\r\n                // if ikey of telemetry is provided and not empty, envelope will use this iKey instead of senderConfig iKey\r\n                var defaultEnvelopeIkey = telemetryItem.iKey || _instrumentationKey;\r\n                var aiEnvelope = Sender.constructEnvelope(telemetryItem, defaultEnvelopeIkey, diagLogger, _convertUndefined);\r\n                if (!aiEnvelope) {\r\n                    _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 47 /* _eInternalMessageId.CreateEnvelopeError */, \"Unable to create an AppInsights envelope\");\r\n                    return;\r\n                }\r\n                var doNotSendItem = false;\r\n                // this is for running in legacy mode, where customer may already have a custom initializer present\r\n                if (telemetryItem[_DYN_TAGS /* @min:%2etags */] && telemetryItem[_DYN_TAGS /* @min:%2etags */][ProcessLegacy]) {\r\n                    arrForEach(telemetryItem[_DYN_TAGS /* @min:%2etags */][ProcessLegacy], function (callBack) {\r\n                        try {\r\n                            if (callBack && callBack(aiEnvelope) === false) {\r\n                                doNotSendItem = true;\r\n                                _warnToConsole(diagLogger, \"Telemetry processor check returns false\");\r\n                            }\r\n                        }\r\n                        catch (e) {\r\n                            // log error but dont stop executing rest of the telemetry initializers\r\n                            // doNotSendItem = true;\r\n                            _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 64 /* _eInternalMessageId.TelemetryInitializerFailed */, \"One of telemetry initializers failed, telemetry item will not be sent: \" + getExceptionName(e), { exception: dumpObj(e) }, true);\r\n                        }\r\n                    });\r\n                    delete telemetryItem[_DYN_TAGS /* @min:%2etags */][ProcessLegacy];\r\n                }\r\n                if (doNotSendItem) {\r\n                    return; // do not send, no need to execute next plugin\r\n                }\r\n                return aiEnvelope;\r\n            }\r\n            function _serialize(item) {\r\n                var rlt = EMPTY_STR;\r\n                var diagLogger = _self[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n                try {\r\n                    var valid = _validate(item, diagLogger);\r\n                    var envelope = null;\r\n                    if (valid) {\r\n                        envelope = _getEnvelope(item, diagLogger);\r\n                    }\r\n                    if (envelope) {\r\n                        rlt = _serializer[_DYN_SERIALIZE /* @min:%2eserialize */](envelope);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return rlt;\r\n            }\r\n            function _batch(arr) {\r\n                var rlt = EMPTY_STR;\r\n                if (arr && arr[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    rlt = \"[\" + arr.join(\",\") + \"]\";\r\n                }\r\n                return rlt;\r\n            }\r\n            function _createPayload(data) {\r\n                var _a;\r\n                var headers = _getHeaders();\r\n                return _a = {\r\n                        urlString: _endpointUrl\r\n                    },\r\n                    _a[_DYN_DATA /* @min:data */] = data,\r\n                    _a.headers = headers,\r\n                    _a;\r\n            }\r\n            function _isSampledIn(envelope) {\r\n                return _self._sample.isSampledIn(envelope);\r\n            }\r\n            function _getOnComplete(payload, status, headers, response) {\r\n                // ***********************************************************************************************\r\n                //TODO: handle other status codes\r\n                if (status === 200 && payload) {\r\n                    _self._onSuccess(payload, payload[_DYN_LENGTH /* @min:%2elength */]);\r\n                }\r\n                else {\r\n                    response && _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, response);\r\n                }\r\n            }\r\n            function _doSend(sendInterface, payload, isAsync, markAsSent) {\r\n                if (markAsSent === void 0) { markAsSent = true; }\r\n                var onComplete = function (status, headers, response) {\r\n                    return _getOnComplete(payload, status, headers, response);\r\n                };\r\n                var payloadData = _getPayload(payload);\r\n                var sendPostFunc = sendInterface && sendInterface.sendPOST;\r\n                if (sendPostFunc && payloadData) {\r\n                    // ***********************************************************************************************\r\n                    // mark payload as sent at the beginning of calling each send function\r\n                    if (markAsSent) {\r\n                        _self._buffer[_DYN_MARK_AS_SENT /* @min:%2emarkAsSent */](payload);\r\n                    }\r\n                    return sendPostFunc(payloadData, onComplete, !isAsync);\r\n                }\r\n                return null;\r\n            }\r\n            function _getPayload(payload) {\r\n                var _a;\r\n                if (isArray(payload) && payload[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var batch = _self[_DYN__BUFFER /* @min:%2e_buffer */].batchPayloads(payload);\r\n                    var headers = _getHeaders();\r\n                    var payloadData = (_a = {},\r\n                        _a[_DYN_DATA /* @min:data */] = batch,\r\n                        _a.urlString = _endpointUrl,\r\n                        _a.headers = headers,\r\n                        _a.disableXhrSync = _disableXhr,\r\n                        _a.disableFetchKeepAlive = !_fetchKeepAlive,\r\n                        _a[_DYN_ORI_PAYLOAD /* @min:oriPayload */] = payload,\r\n                        _a);\r\n                    return payloadData;\r\n                }\r\n                return null;\r\n            }\r\n            function _getHeaders() {\r\n                try {\r\n                    var headers = _headers || {};\r\n                    if (isInternalApplicationInsightsEndpoint(_endpointUrl)) {\r\n                        headers[RequestHeaders[6 /* eRequestHeaders.sdkContextHeader */]] = RequestHeaders[7 /* eRequestHeaders.sdkContextHeaderAppIdRequest */];\r\n                    }\r\n                    return headers;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            function _checkMaxSize(incomingPayload) {\r\n                var incomingSize = incomingPayload ? incomingPayload[_DYN_LENGTH /* @min:%2elength */] : 0;\r\n                if ((_self[_DYN__BUFFER /* @min:%2e_buffer */].size() + incomingSize) > _maxBatchSizeInBytes) {\r\n                    if (!_offlineListener || _offlineListener.isOnline()) { // only trigger send when currently online\r\n                        _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */](true, null, 10 /* SendRequestReason.MaxBatchSize */);\r\n                    }\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            function _checkResponsStatus(status, payload, responseUrl, countOfItemsInPayload, errorMessage, res) {\r\n                var response = null;\r\n                if (!_self._appId) {\r\n                    response = parseResponse(res);\r\n                    if (response && response.appId) {\r\n                        _self._appId = response.appId;\r\n                    }\r\n                }\r\n                if ((status < 200 || status >= 300) && status !== 0) {\r\n                    // Update End Point url if permanent redirect or moved permanently\r\n                    // Updates the end point url before retry\r\n                    if (status === 301 || status === 307 || status === 308) {\r\n                        if (!_checkAndUpdateEndPointUrl(responseUrl)) {\r\n                            _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, errorMessage);\r\n                            return;\r\n                        }\r\n                    }\r\n                    if (_offlineListener && !_offlineListener.isOnline()) { // offline\r\n                        // Note: Don't check for status == 0, since adblock gives this code\r\n                        if (!_isRetryDisabled) {\r\n                            var offlineBackOffMultiplier = 10; // arbritrary number\r\n                            _resendPayload(payload, offlineBackOffMultiplier);\r\n                            _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". Offline - Response Code: \".concat(status, \". Offline status: \").concat(!_offlineListener.isOnline(), \". Will retry to send \").concat(payload.length, \" items.\"));\r\n                        }\r\n                        return;\r\n                    }\r\n                    if (!_isRetryDisabled && _isRetriable(status)) {\r\n                        _resendPayload(payload);\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" +\r\n                            \"Response code \" + status + \". Will retry to send \" + payload[_DYN_LENGTH /* @min:%2elength */] + \" items.\");\r\n                    }\r\n                    else {\r\n                        _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, errorMessage);\r\n                    }\r\n                }\r\n                else {\r\n                    // check if the xhr's responseURL or fetch's response.url is same as endpoint url\r\n                    // TODO after 10 redirects force send telemetry with 'redirect=false' as query parameter.\r\n                    _checkAndUpdateEndPointUrl(responseUrl);\r\n                    if (status === 206) {\r\n                        if (!response) {\r\n                            response = parseResponse(res);\r\n                        }\r\n                        if (response && !_isRetryDisabled) {\r\n                            _self[_DYN__ON_PARTIAL_SUCCESS /* @min:%2e_onPartialSuccess */](payload, response);\r\n                        }\r\n                        else {\r\n                            _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, errorMessage);\r\n                        }\r\n                    }\r\n                    else {\r\n                        _consecutiveErrors = 0;\r\n                        _self[_DYN__ON_SUCCESS /* @min:%2e_onSuccess */](payload, countOfItemsInPayload);\r\n                    }\r\n                }\r\n            }\r\n            function _checkAndUpdateEndPointUrl(responseUrl) {\r\n                // Maximum stamp specific redirects allowed(uncomment this when breeze is ready with not allowing redirects feature)\r\n                if (_stamp_specific_redirects >= 10) {\r\n                    //  _self._senderConfig.endpointUrl = () => Sender._getDefaultAppInsightsChannelConfig().endpointUrl()+\"/?redirect=false\";\r\n                    //  _stamp_specific_redirects = 0;\r\n                    return false;\r\n                }\r\n                if (!isNullOrUndefined(responseUrl) && responseUrl !== \"\") {\r\n                    if (responseUrl !== _endpointUrl) {\r\n                        _endpointUrl = responseUrl;\r\n                        ++_stamp_specific_redirects;\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n            function _doUnloadSend(payload, isAsync) {\r\n                if (_syncUnloadSender) {\r\n                    // We are unloading so always call the sender with sync set to false\r\n                    _syncUnloadSender(payload, false);\r\n                }\r\n                else {\r\n                    // Fallback to the previous beacon Sender (which causes a CORB warning on chrome now)\r\n                    var beaconInst = _sendPostMgr && _sendPostMgr[_DYN_GET_SENDER_INST /* @min:%2egetSenderInst */]([3 /* TransportType.Beacon */], true);\r\n                    return _doSend(beaconInst, payload, isAsync);\r\n                }\r\n            }\r\n            function _onBeaconRetry(payload, onComplete, canSend) {\r\n                var internalPayload = payload;\r\n                var data = internalPayload && internalPayload[_DYN_ORI_PAYLOAD /* @min:%2eoriPayload */];\r\n                if (!_disableBeaconSplit) {\r\n                    // Failed to send entire payload so try and split data and try to send as much events as possible\r\n                    var droppedPayload = [];\r\n                    for (var lp = 0; lp < data[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                        var thePayload = data[lp];\r\n                        var arr = [thePayload];\r\n                        var item = _getPayload(arr);\r\n                        if (!canSend(item, onComplete)) {\r\n                            // Can't send anymore, so split the batch and drop the rest\r\n                            droppedPayload[_DYN_PUSH /* @min:%2epush */](thePayload);\r\n                        }\r\n                        else {\r\n                            _self._onSuccess(arr, arr[_DYN_LENGTH /* @min:%2elength */]);\r\n                        }\r\n                    }\r\n                    if (droppedPayload[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        _fallbackSend && _fallbackSend(droppedPayload, true);\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + \"Failed to send telemetry with Beacon API, retried with normal sender.\");\r\n                    }\r\n                }\r\n                else {\r\n                    _fallbackSend && _fallbackSend(data, true);\r\n                    _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + \"Failed to send telemetry with Beacon API, retried with normal sender.\");\r\n                }\r\n            }\r\n            function _isStringArr(arr) {\r\n                try {\r\n                    if (arr && arr[_DYN_LENGTH /* @min:%2elength */]) {\r\n                        return (isString(arr[0]));\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    //TODO: log, sender use IInternalStorageItem instead of string since 3.1.3\r\n                }\r\n                return null;\r\n            }\r\n            function _fetchKeepAliveSender(payload, isAsync) {\r\n                var transport = null;\r\n                if (isArray(payload)) {\r\n                    var payloadSize = payload[_DYN_LENGTH /* @min:%2elength */];\r\n                    for (var lp = 0; lp < payload[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                        payloadSize += payload[lp].item[_DYN_LENGTH /* @min:%2elength */];\r\n                    }\r\n                    var syncFetchPayload = _sendPostMgr.getSyncFetchPayload();\r\n                    if ((syncFetchPayload + payloadSize) <= FetchSyncRequestSizeLimitBytes) {\r\n                        transport = 2 /* TransportType.Fetch */;\r\n                    }\r\n                    else if (isBeaconsSupported()) {\r\n                        // Fallback to beacon sender as we at least get told which events can't be scheduled\r\n                        transport = 3 /* TransportType.Beacon */;\r\n                    }\r\n                    else {\r\n                        // Payload is going to be too big so just try and send via XHR\r\n                        transport = 1 /* TransportType.Xhr */;\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + \"Failed to send telemetry with Beacon API, retried with xhrSender.\");\r\n                    }\r\n                    var inst = _sendPostMgr && _sendPostMgr[_DYN_GET_SENDER_INST /* @min:%2egetSenderInst */]([transport], true);\r\n                    return _doSend(inst, payload, isAsync);\r\n                }\r\n                return null;\r\n            }\r\n            /**\r\n             * Resend payload. Adds payload back to the send buffer and setup a send timer (with exponential backoff).\r\n             * @param payload\r\n             */\r\n            function _resendPayload(payload, linearFactor) {\r\n                if (linearFactor === void 0) { linearFactor = 1; }\r\n                if (!payload || payload[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n                    return;\r\n                }\r\n                var buffer = _self[_DYN__BUFFER /* @min:%2e_buffer */];\r\n                buffer[_DYN_CLEAR_SENT /* @min:%2eclearSent */](payload);\r\n                _consecutiveErrors++;\r\n                for (var _i = 0, payload_1 = payload; _i < payload_1.length; _i++) {\r\n                    var item = payload_1[_i];\r\n                    item.cnt = item.cnt || 0; // to make sure we have cnt for each payload\r\n                    item.cnt++; // when resend, increase cnt\r\n                    buffer[_DYN_ENQUEUE /* @min:%2eenqueue */](item);\r\n                }\r\n                // setup timer\r\n                _setRetryTime(linearFactor);\r\n                _setupTimer();\r\n            }\r\n            /**\r\n             * Calculates the time to wait before retrying in case of an error based on\r\n             * http://en.wikipedia.org/wiki/Exponential_backoff\r\n             */\r\n            function _setRetryTime(linearFactor) {\r\n                var SlotDelayInSeconds = 10;\r\n                var delayInSeconds;\r\n                if (_consecutiveErrors <= 1) {\r\n                    delayInSeconds = SlotDelayInSeconds;\r\n                }\r\n                else {\r\n                    var backOffSlot = (Math.pow(2, _consecutiveErrors) - 1) / 2;\r\n                    // tslint:disable-next-line:insecure-random\r\n                    var backOffDelay = Math.floor(Math.random() * backOffSlot * SlotDelayInSeconds) + 1;\r\n                    backOffDelay = linearFactor * backOffDelay;\r\n                    delayInSeconds = Math.max(Math.min(backOffDelay, 3600), SlotDelayInSeconds);\r\n                }\r\n                // TODO: Log the backoff time like the C# version does.\r\n                var retryAfterTimeSpan = dateNow() + (delayInSeconds * 1000);\r\n                // TODO: Log the retry at time like the C# version does.\r\n                _retryAt = retryAfterTimeSpan;\r\n            }\r\n            /**\r\n             * Sets up the timer which triggers actually sending the data.\r\n             */\r\n            function _setupTimer() {\r\n                if (!_timeoutHandle && !_paused) {\r\n                    var retryInterval = _retryAt ? Math.max(0, _retryAt - dateNow()) : 0;\r\n                    var timerValue = Math.max(_maxBatchInterval, retryInterval);\r\n                    _timeoutHandle = scheduleTimeout(function () {\r\n                        _timeoutHandle = null;\r\n                        _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */](true, null, 1 /* SendRequestReason.NormalSchedule */);\r\n                    }, timerValue);\r\n                }\r\n            }\r\n            function _clearScheduledTimer() {\r\n                _timeoutHandle && _timeoutHandle.cancel();\r\n                _timeoutHandle = null;\r\n                _retryAt = null;\r\n            }\r\n            /**\r\n             * Checks if the SDK should resend the payload after receiving this status code from the backend.\r\n             * @param statusCode\r\n             */\r\n            function _isRetriable(statusCode) {\r\n                // retryCodes = [] means should not retry\r\n                if (!isNullOrUndefined(_retryCodes)) {\r\n                    return _retryCodes[_DYN_LENGTH /* @min:%2elength */] && _retryCodes.indexOf(statusCode) > -1;\r\n                }\r\n                return statusCode === 401 // Unauthorized\r\n                    // Removing as private links can return a 403 which causes excessive retries and session storage usage\r\n                    // || statusCode === 403 // Forbidden\r\n                    || statusCode === 408 // Timeout\r\n                    || statusCode === 429 // Too many requests.\r\n                    || statusCode === 500 // Internal server error.\r\n                    || statusCode === 502 // Bad Gateway.\r\n                    || statusCode === 503 // Service unavailable.\r\n                    || statusCode === 504; // Gateway timeout.\r\n            }\r\n            // Using function lookups for backward compatibility as the getNotifyMgr() did not exist until after v2.5.6\r\n            function _getNotifyMgr() {\r\n                var func = \"getNotifyMgr\";\r\n                if (_self.core[func]) {\r\n                    return _self.core[func]();\r\n                }\r\n                // using _self.core['_notificationManager'] for backward compatibility\r\n                return _self.core[\"_notificationManager\"];\r\n            }\r\n            function _notifySendRequest(sendRequest, isAsync) {\r\n                var manager = _getNotifyMgr();\r\n                if (manager && manager[_DYN_EVENTS_SEND_REQUEST /* @min:%2eeventsSendRequest */]) {\r\n                    try {\r\n                        manager[_DYN_EVENTS_SEND_REQUEST /* @min:%2eeventsSendRequest */](sendRequest, isAsync);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, \"send request notification failed: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                    }\r\n                }\r\n            }\r\n            /**\r\n             * Validate UUID Format\r\n             * Specs taken from https://tools.ietf.org/html/rfc4122 and breeze repo\r\n             */\r\n            function _validateInstrumentationKey(instrumentationKey, config) {\r\n                var disableValidation = config.disableInstrumentationKeyValidation;\r\n                var disableIKeyValidationFlag = isNullOrUndefined(disableValidation) ? false : disableValidation;\r\n                if (disableIKeyValidationFlag) {\r\n                    return true;\r\n                }\r\n                var UUID_Regex = \"^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$\";\r\n                var regexp = new RegExp(UUID_Regex);\r\n                return regexp.test(instrumentationKey);\r\n            }\r\n            function _initDefaults() {\r\n                _self[_DYN__SENDER /* @min:%2e_sender */] = null;\r\n                _self[_DYN__BUFFER /* @min:%2e_buffer */] = null;\r\n                _self._appId = null;\r\n                _self._sample = null;\r\n                _headers = {};\r\n                _offlineListener = null;\r\n                _consecutiveErrors = 0;\r\n                _retryAt = null;\r\n                _lastSend = null;\r\n                _paused = false;\r\n                _timeoutHandle = null;\r\n                _serializer = null;\r\n                _stamp_specific_redirects = 0;\r\n                _syncFetchPayload = 0;\r\n                _syncUnloadSender = null;\r\n                _evtNamespace = null;\r\n                _endpointUrl = null;\r\n                _orgEndpointUrl = null;\r\n                _maxBatchSizeInBytes = 0;\r\n                _beaconSupported = false;\r\n                _customHeaders = null;\r\n                _disableTelemetry = false;\r\n                _instrumentationKey = null;\r\n                _convertUndefined = UNDEFINED_VALUE;\r\n                _isRetryDisabled = false;\r\n                _sessionStorageUsed = null;\r\n                _namePrefix = UNDEFINED_VALUE;\r\n                _disableXhr = false;\r\n                _fetchKeepAlive = false;\r\n                _disableBeaconSplit = false;\r\n                _xhrSend = null;\r\n                _fallbackSend = null;\r\n                _sendPostMgr = null;\r\n                objDefine(_self, \"_senderConfig\", {\r\n                    g: function () {\r\n                        return objExtend({}, defaultAppInsightsChannelConfig);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    Sender.constructEnvelope = function (orig, iKey, logger, convertUndefined) {\r\n        var envelope;\r\n        if (iKey !== orig.iKey && !isNullOrUndefined(iKey)) {\r\n            envelope = __assign(__assign({}, orig), { iKey: iKey });\r\n        }\r\n        else {\r\n            envelope = orig;\r\n        }\r\n        var creator = EnvelopeTypeCreator[envelope.baseType] || EventEnvelopeCreator;\r\n        return creator(logger, envelope, convertUndefined);\r\n    };\r\n// Removed Stub for Sender.prototype.pause.\r\n// Removed Stub for Sender.prototype.resume.\r\n// Removed Stub for Sender.prototype.flush.\r\n// Removed Stub for Sender.prototype.onunloadFlush.\r\n// Removed Stub for Sender.prototype.initialize.\r\n// Removed Stub for Sender.prototype.processTelemetry.\r\n// Removed Stub for Sender.prototype._xhrReadyStateChange.\r\n// Removed Stub for Sender.prototype.triggerSend.\r\n// Removed Stub for Sender.prototype._onError.\r\n// Removed Stub for Sender.prototype._onPartialSuccess.\r\n// Removed Stub for Sender.prototype._onSuccess.\r\n// Removed Stub for Sender.prototype._xdrOnLoad.\r\n// Removed Stub for Sender.prototype.addHeader.\r\n// Removed Stub for Sender.prototype.isCompletelyIdle.\r\n// Removed Stub for Sender.prototype.getOfflineSupport.\r\n// Removed Stub for Sender.prototype.getOfflineListener.\r\n    return Sender;\r\n}(BaseTelemetryPlugin));\r\nexport { Sender };\r\n//# sourceMappingURL=Sender.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _throwInternal, getJSON, isArray, isFunction, isObject, objForEachKey } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_LENGTH, _DYN_PUSH, _DYN_SERIALIZE, _DYN_STRINGIFY, _DYN_TO_STRING } from \"./__DynamicConstants\";\r\nvar Serializer = /** @class */ (function () {\r\n    function Serializer(logger) {\r\n        dynamicProto(Serializer, this, function (_self) {\r\n            /**\r\n             * Serializes the current object to a JSON string.\r\n             */\r\n            _self[_DYN_SERIALIZE /* @min:%2eserialize */] = function (input) {\r\n                var output = _serializeObject(input, \"root\");\r\n                try {\r\n                    return getJSON()[_DYN_STRINGIFY /* @min:%2estringify */](output);\r\n                }\r\n                catch (e) {\r\n                    // if serialization fails return an empty string\r\n                    _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.CannotSerializeObject */, (e && isFunction(e[_DYN_TO_STRING /* @min:%2etoString */])) ? e[_DYN_TO_STRING /* @min:%2etoString */]() : \"Error serializing object\", null, true);\r\n                }\r\n            };\r\n            function _serializeObject(source, name) {\r\n                var circularReferenceCheck = \"__aiCircularRefCheck\";\r\n                var output = {};\r\n                if (!source) {\r\n                    _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.CannotSerializeObject */, \"cannot serialize object because it is null or undefined\", { name: name }, true);\r\n                    return output;\r\n                }\r\n                if (source[circularReferenceCheck]) {\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 50 /* _eInternalMessageId.CircularReferenceDetected */, \"Circular reference detected while serializing object\", { name: name }, true);\r\n                    return output;\r\n                }\r\n                if (!source.aiDataContract) {\r\n                    // special case for measurements/properties/tags\r\n                    if (name === \"measurements\") {\r\n                        output = _serializeStringMap(source, \"number\", name);\r\n                    }\r\n                    else if (name === \"properties\") {\r\n                        output = _serializeStringMap(source, \"string\", name);\r\n                    }\r\n                    else if (name === \"tags\") {\r\n                        output = _serializeStringMap(source, \"string\", name);\r\n                    }\r\n                    else if (isArray(source)) {\r\n                        output = _serializeArray(source, name);\r\n                    }\r\n                    else {\r\n                        _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 49 /* _eInternalMessageId.CannotSerializeObjectNonSerializable */, \"Attempting to serialize an object which does not implement ISerializable\", { name: name }, true);\r\n                        try {\r\n                            // verify that the object can be stringified\r\n                            getJSON()[_DYN_STRINGIFY /* @min:%2estringify */](source);\r\n                            output = source;\r\n                        }\r\n                        catch (e) {\r\n                            // if serialization fails return an empty string\r\n                            _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.CannotSerializeObject */, (e && isFunction(e[_DYN_TO_STRING /* @min:%2etoString */])) ? e[_DYN_TO_STRING /* @min:%2etoString */]() : \"Error serializing object\", null, true);\r\n                        }\r\n                    }\r\n                    return output;\r\n                }\r\n                source[circularReferenceCheck] = true;\r\n                objForEachKey(source.aiDataContract, function (field, contract) {\r\n                    var isRequired = (isFunction(contract)) ? (contract() & 1 /* FieldType.Required */) : (contract & 1 /* FieldType.Required */);\r\n                    var isHidden = (isFunction(contract)) ? (contract() & 4 /* FieldType.Hidden */) : (contract & 4 /* FieldType.Hidden */);\r\n                    var isArray = contract & 2 /* FieldType.Array */;\r\n                    var isPresent = source[field] !== undefined;\r\n                    var isObj = isObject(source[field]) && source[field] !== null;\r\n                    if (isRequired && !isPresent && !isArray) {\r\n                        _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 24 /* _eInternalMessageId.MissingRequiredFieldSpecification */, \"Missing required field specification. The field is required but not present on source\", { field: field, name: name });\r\n                        // If not in debug mode, continue and hope the error is permissible\r\n                    }\r\n                    else if (!isHidden) { // Don't serialize hidden fields\r\n                        var value = void 0;\r\n                        if (isObj) {\r\n                            if (isArray) {\r\n                                // special case; recurse on each object in the source array\r\n                                value = _serializeArray(source[field], field);\r\n                            }\r\n                            else {\r\n                                // recurse on the source object in this field\r\n                                value = _serializeObject(source[field], field);\r\n                            }\r\n                        }\r\n                        else {\r\n                            // assign the source field to the output even if undefined or required\r\n                            value = source[field];\r\n                        }\r\n                        // only emit this field if the value is defined\r\n                        if (value !== undefined) {\r\n                            output[field] = value;\r\n                        }\r\n                    }\r\n                });\r\n                delete source[circularReferenceCheck];\r\n                return output;\r\n            }\r\n            function _serializeArray(sources, name) {\r\n                var output;\r\n                if (!!sources) {\r\n                    if (!isArray(sources)) {\r\n                        _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 54 /* _eInternalMessageId.ItemNotInArray */, \"This field was specified as an array in the contract but the item is not an array.\\r\\n\", { name: name }, true);\r\n                    }\r\n                    else {\r\n                        output = [];\r\n                        for (var i = 0; i < sources[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n                            var source = sources[i];\r\n                            var item = _serializeObject(source, name + \"[\" + i + \"]\");\r\n                            output[_DYN_PUSH /* @min:%2epush */](item);\r\n                        }\r\n                    }\r\n                }\r\n                return output;\r\n            }\r\n            function _serializeStringMap(map, expectedType, name) {\r\n                var output;\r\n                if (map) {\r\n                    output = {};\r\n                    objForEachKey(map, function (field, value) {\r\n                        if (expectedType === \"string\") {\r\n                            if (value === undefined) {\r\n                                output[field] = \"undefined\";\r\n                            }\r\n                            else if (value === null) {\r\n                                output[field] = \"null\";\r\n                            }\r\n                            else if (!value[_DYN_TO_STRING /* @min:%2etoString */]) {\r\n                                output[field] = \"invalid field: toString() is not defined.\";\r\n                            }\r\n                            else {\r\n                                output[field] = value[_DYN_TO_STRING /* @min:%2etoString */]();\r\n                            }\r\n                        }\r\n                        else if (expectedType === \"number\") {\r\n                            if (value === undefined) {\r\n                                output[field] = \"undefined\";\r\n                            }\r\n                            else if (value === null) {\r\n                                output[field] = \"null\";\r\n                            }\r\n                            else {\r\n                                var num = parseFloat(value);\r\n                                output[field] = num;\r\n                            }\r\n                        }\r\n                        else {\r\n                            output[field] = \"invalid field: \" + name + \" is of unknown type.\";\r\n                            _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, output[field], null, true);\r\n                        }\r\n                    });\r\n                }\r\n                return output;\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for Serializer.prototype.serialize.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    Serializer.__ieDyn=1;\n\n    return Serializer;\r\n}());\r\nexport { Serializer };\r\n//# sourceMappingURL=Serializer.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _DYN_CONCAT, _DYN_LENGTH } from \"../../__DynamicConstants\";\r\n// (Magic number) DJB algorithm can't work on shorter strings (results in poor distribution\r\nvar MIN_INPUT_LENGTH = 8;\r\nvar HashCodeScoreGenerator = /** @class */ (function () {\r\n    function HashCodeScoreGenerator() {\r\n    }\r\n    HashCodeScoreGenerator.prototype.getHashCodeScore = function (key) {\r\n        var score = this.getHashCode(key) / HashCodeScoreGenerator.INT_MAX_VALUE;\r\n        return score * 100;\r\n    };\r\n    HashCodeScoreGenerator.prototype.getHashCode = function (input) {\r\n        if (input === \"\") {\r\n            return 0;\r\n        }\r\n        while (input[_DYN_LENGTH /* @min:%2elength */] < MIN_INPUT_LENGTH) {\r\n            input = input[_DYN_CONCAT /* @min:%2econcat */](input);\r\n        }\r\n        // 5381 is a magic number: http://stackoverflow.com/questions/10696223/reason-for-5381-number-in-djb-hash-function\r\n        var hash = 5381;\r\n        for (var i = 0; i < input[_DYN_LENGTH /* @min:%2elength */]; ++i) {\r\n            hash = ((hash << 5) + hash) + input.charCodeAt(i);\r\n            // 'hash' is of number type which means 53 bit integer (http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-language-types-number-type)\r\n            // 'hash & hash' will keep it 32 bit integer - just to make it clearer what the result is.\r\n            hash = hash & hash;\r\n        }\r\n        return Math.abs(hash);\r\n    };\r\n    // We're using 32 bit math, hence max value is (2^31 - 1)\r\n    HashCodeScoreGenerator.INT_MAX_VALUE = 2147483647;\r\n    return HashCodeScoreGenerator;\r\n}());\r\nexport { HashCodeScoreGenerator };\r\n//# sourceMappingURL=HashCodeScoreGenerator.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { ContextTagKeys } from \"@microsoft/applicationinsights-common\";\r\nimport { _DYN_GET_HASH_CODE_SCORE, _DYN_GET_SAMPLING_SCORE, _DYN_TAGS, _DYN_TRACE_ID } from \"../../__DynamicConstants\";\r\nimport { HashCodeScoreGenerator } from \"./HashCodeScoreGenerator\";\r\nvar SamplingScoreGenerator = /** @class */ (function () {\r\n    function SamplingScoreGenerator() {\r\n        var _self = this;\r\n        var hashCodeGenerator = new HashCodeScoreGenerator();\r\n        var keys = new ContextTagKeys();\r\n        _self[_DYN_GET_SAMPLING_SCORE /* @min:%2egetSamplingScore */] = function (item) {\r\n            var score = 0;\r\n            if (item[_DYN_TAGS /* @min:%2etags */] && item[_DYN_TAGS /* @min:%2etags */][keys.userId]) { // search in tags first, then ext\r\n                score = hashCodeGenerator.getHashCodeScore(item[_DYN_TAGS /* @min:%2etags */][keys.userId]);\r\n            }\r\n            else if (item.ext && item.ext.user && item.ext.user.id) {\r\n                score = hashCodeGenerator[_DYN_GET_HASH_CODE_SCORE /* @min:%2egetHashCodeScore */](item.ext.user.id);\r\n            }\r\n            else if (item[_DYN_TAGS /* @min:%2etags */] && item[_DYN_TAGS /* @min:%2etags */][keys.operationId]) { // search in tags first, then ext\r\n                score = hashCodeGenerator.getHashCodeScore(item[_DYN_TAGS /* @min:%2etags */][keys.operationId]);\r\n            }\r\n            else if (item.ext && item.ext.telemetryTrace && item.ext.telemetryTrace[_DYN_TRACE_ID /* @min:%2etraceID */]) {\r\n                score = hashCodeGenerator.getHashCodeScore(item.ext.telemetryTrace[_DYN_TRACE_ID /* @min:%2etraceID */]);\r\n            }\r\n            else {\r\n                // tslint:disable-next-line:insecure-random\r\n                score = (Math.random() * 100);\r\n            }\r\n            return score;\r\n        };\r\n    }\r\n    return SamplingScoreGenerator;\r\n}());\r\nexport { SamplingScoreGenerator };\r\n//# sourceMappingURL=SamplingScoreGenerator.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { Metric } from \"@microsoft/applicationinsights-common\";\r\nimport { safeGetLogger } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_DATA_TYPE, _DYN_GET_SAMPLING_SCORE, _DYN_SAMPLE_RATE } from \"../__DynamicConstants\";\r\nimport { SamplingScoreGenerator } from \"./SamplingScoreGenerators/SamplingScoreGenerator\";\r\nvar Sample = /** @class */ (function () {\r\n    function Sample(sampleRate, logger) {\r\n        // We're using 32 bit math, hence max value is (2^31 - 1)\r\n        this.INT_MAX_VALUE = 2147483647;\r\n        var _logger = logger || safeGetLogger(null);\r\n        if (sampleRate > 100 || sampleRate < 0) {\r\n            _logger.throwInternal(2 /* eLoggingSeverity.WARNING */, 58 /* _eInternalMessageId.SampleRateOutOfRange */, \"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.\", { samplingRate: sampleRate }, true);\r\n            sampleRate = 100;\r\n        }\r\n        this[_DYN_SAMPLE_RATE /* @min:%2esampleRate */] = sampleRate;\r\n        this.samplingScoreGenerator = new SamplingScoreGenerator();\r\n    }\r\n    /**\r\n    * Determines if an envelope is sampled in (i.e. will be sent) or not (i.e. will be dropped).\r\n    */\r\n    Sample.prototype.isSampledIn = function (envelope) {\r\n        var samplingPercentage = this[_DYN_SAMPLE_RATE /* @min:%2esampleRate */]; // 0 - 100\r\n        var isSampledIn = false;\r\n        if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\r\n            return true;\r\n        }\r\n        else if (envelope.baseType === Metric[_DYN_DATA_TYPE /* @min:%2edataType */]) {\r\n            // exclude MetricData telemetry from sampling\r\n            return true;\r\n        }\r\n        isSampledIn = this.samplingScoreGenerator[_DYN_GET_SAMPLING_SCORE /* @min:%2egetSamplingScore */](envelope) < samplingPercentage;\r\n        return isSampledIn;\r\n    };\r\n    return Sample;\r\n}());\r\nexport { Sample };\r\n//# sourceMappingURL=Sample.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrReduce, objKeys, strEndsWith } from \"@microsoft/applicationinsights-core-js\";\r\nimport { DEFAULT_BREEZE_ENDPOINT } from \"./Constants\";\r\nimport { _DYN_INGESTIONENDPOINT, _DYN_LENGTH, _DYN_SPLIT, _DYN_TO_LOWER_CASE } from \"./__DynamicConstants\";\r\nvar _FIELDS_SEPARATOR = \";\";\r\nvar _FIELD_KEY_VALUE_SEPARATOR = \"=\";\r\nexport function parseConnectionString(connectionString) {\r\n    if (!connectionString) {\r\n        return {};\r\n    }\r\n    var kvPairs = connectionString[_DYN_SPLIT /* @min:%2esplit */](_FIELDS_SEPARATOR);\r\n    var result = arrReduce(kvPairs, function (fields, kv) {\r\n        var kvParts = kv[_DYN_SPLIT /* @min:%2esplit */](_FIELD_KEY_VALUE_SEPARATOR);\r\n        if (kvParts[_DYN_LENGTH /* @min:%2elength */] === 2) { // only save fields with valid formats\r\n            var key = kvParts[0][_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n            var value = kvParts[1];\r\n            fields[key] = value;\r\n        }\r\n        return fields;\r\n    }, {});\r\n    if (objKeys(result)[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        // this is a valid connection string, so parse the results\r\n        if (result.endpointsuffix) {\r\n            // apply the default endpoints\r\n            var locationPrefix = result.location ? result.location + \".\" : \"\";\r\n            result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] = result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] || (\"https://\" + locationPrefix + \"dc.\" + result.endpointsuffix);\r\n        }\r\n        // apply user override endpoint or the default endpoints\r\n        result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] = result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] || DEFAULT_BREEZE_ENDPOINT;\r\n        if (strEndsWith(result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */], \"/\")) {\r\n            result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] = result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */].slice(0, -1);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport var ConnectionStringParser = {\r\n    parse: parseConnectionString\r\n};\r\n//# sourceMappingURL=ConnectionStringParser.js.map","/*\n * Application Insights JavaScript Web SDK - Basic, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nvar _a;\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { Sender } from \"@microsoft/applicationinsights-channel-js\";\r\nimport { DEFAULT_BREEZE_PATH, parseConnectionString } from \"@microsoft/applicationinsights-common\";\r\nimport { AppInsightsCore, cfgDfValidate, createDynamicConfig, onConfigChange, proxyFunctions } from \"@microsoft/applicationinsights-core-js\";\r\nimport { createSyncPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { isNullOrUndefined, isPromiseLike, isString, objDefine, throwError } from \"@nevware21/ts-utils\";\r\nimport { _DYN_CONNECTION_STRING, _DYN_ENDPOINT_URL, _DYN_INGESTIONENDPOINT, _DYN_INSTRUMENTATIONKEY0, _DYN_INSTRUMENTATION_KEY, _DYN_USER_OVERRIDE_ENDPOI1 } from \"./__DynamicConstants\";\r\nvar UNDEFINED_VALUE = undefined;\r\nvar defaultConfigValues = (_a = {\r\n        diagnosticLogInterval: cfgDfValidate(_chkDiagLevel, 10000)\r\n    },\r\n    _a[_DYN_CONNECTION_STRING /* @min:connectionString */] = UNDEFINED_VALUE,\r\n    _a[_DYN_ENDPOINT_URL /* @min:endpointUrl */] = UNDEFINED_VALUE,\r\n    _a[_DYN_INSTRUMENTATION_KEY /* @min:instrumentationKey */] = UNDEFINED_VALUE,\r\n    _a.extensionConfig = {},\r\n    _a);\r\nfunction _chkDiagLevel(value) {\r\n    // Make sure we have a value > 0\r\n    return value && value > 0;\r\n}\r\n/**\r\n * @export\r\n * @class ApplicationInsights\r\n */\r\nvar ApplicationInsights = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ApplicationInsights.\r\n     * @param config\r\n     * @memberof ApplicationInsights\r\n     */\r\n    function ApplicationInsights(config) {\r\n        var core = new AppInsightsCore();\r\n        var _config;\r\n        // initialize the queue and config in case they are undefined\r\n        if (isNullOrUndefined(config) ||\r\n            (isNullOrUndefined(config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */]) && isNullOrUndefined(config[_DYN_CONNECTION_STRING /* @min:%2econnectionString */]))) {\r\n            throwError(\"Invalid input configuration\");\r\n        }\r\n        dynamicProto(ApplicationInsights, this, function (_self) {\r\n            // Define _self.config\r\n            objDefine(_self, \"config\", {\r\n                g: function () { return _config; }\r\n            });\r\n            _initialize();\r\n            _self.initialize = _initialize;\r\n            _self.track = _track;\r\n            proxyFunctions(_self, core, [\r\n                \"flush\",\r\n                \"pollInternalLogs\",\r\n                \"stopPollingInternalLogs\",\r\n                \"unload\",\r\n                \"getPlugin\",\r\n                \"addPlugin\",\r\n                \"evtNamespace\",\r\n                \"addUnloadCb\",\r\n                \"onCfgChange\",\r\n                \"getTraceCtx\",\r\n                \"updateCfg\",\r\n                \"addTelemetryInitializer\"\r\n            ]);\r\n            function _initialize() {\r\n                var cfgHandler = createDynamicConfig(config || {}, defaultConfigValues);\r\n                _config = cfgHandler.cfg;\r\n                core.addUnloadHook(onConfigChange(cfgHandler, function () {\r\n                    var configCs = _config[_DYN_CONNECTION_STRING /* @min:%2econnectionString */];\r\n                    if (isPromiseLike(configCs)) {\r\n                        var ikeyPromise = createSyncPromise(function (resolve, reject) {\r\n                            doAwaitResponse(configCs, function (res) {\r\n                                var curCs = res.value;\r\n                                var ikey = _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                                if (!res.rejected && curCs) {\r\n                                    // replace cs with resolved values in case of circular promises\r\n                                    _config[_DYN_CONNECTION_STRING /* @min:%2econnectionString */] = curCs;\r\n                                    var resolvedCs = parseConnectionString(curCs);\r\n                                    ikey = resolvedCs[_DYN_INSTRUMENTATIONKEY0 /* @min:%2einstrumentationkey */] || ikey;\r\n                                }\r\n                                resolve(ikey);\r\n                            });\r\n                        });\r\n                        var urlPromise = createSyncPromise(function (resolve, reject) {\r\n                            doAwaitResponse(configCs, function (res) {\r\n                                var curCs = res.value;\r\n                                var url = _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                                if (!res.rejected && curCs) {\r\n                                    var resolvedCs = parseConnectionString(curCs);\r\n                                    var ingest = resolvedCs[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */];\r\n                                    url = ingest ? ingest + DEFAULT_BREEZE_PATH : url;\r\n                                }\r\n                                resolve(url);\r\n                            });\r\n                        });\r\n                        _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */] = ikeyPromise;\r\n                        _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */] = _config[_DYN_USER_OVERRIDE_ENDPOI1 /* @min:%2euserOverrideEndpointUrl */] || urlPromise;\r\n                    }\r\n                    if (isString(configCs)) {\r\n                        var cs = parseConnectionString(configCs);\r\n                        var ingest = cs[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */];\r\n                        _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */] = _config[_DYN_USER_OVERRIDE_ENDPOI1 /* @min:%2euserOverrideEndpointUrl */] ? _config[_DYN_USER_OVERRIDE_ENDPOI1 /* @min:%2euserOverrideEndpointUrl */] : (ingest + DEFAULT_BREEZE_PATH); // only add /v2/track when from connectionstring\r\n                        _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */] = cs[_DYN_INSTRUMENTATIONKEY0 /* @min:%2einstrumentationkey */] || _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                    }\r\n                    // userOverrideEndpointUrl have the highest priority\r\n                    _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */] = _config[_DYN_USER_OVERRIDE_ENDPOI1 /* @min:%2euserOverrideEndpointUrl */] ? _config[_DYN_USER_OVERRIDE_ENDPOI1 /* @min:%2euserOverrideEndpointUrl */] : _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                }));\r\n                // initialize core\r\n                core.initialize(_config, [new Sender()]);\r\n            }\r\n        });\r\n        function _track(item) {\r\n            if (item) {\r\n                // to pass sender.processTelemetry()\r\n                item.baseData = item.baseData || {};\r\n                item.baseType = item.baseType || \"EventData\";\r\n            }\r\n            core.track(item);\r\n        }\r\n    }\r\n// Removed Stub for ApplicationInsights.prototype.initialize.\r\n// Removed Stub for ApplicationInsights.prototype.track.\r\n// Removed Stub for ApplicationInsights.prototype.flush.\r\n// Removed Stub for ApplicationInsights.prototype.pollInternalLogs.\r\n// Removed Stub for ApplicationInsights.prototype.stopPollingInternalLogs.\r\n// Removed Stub for ApplicationInsights.prototype.unload.\r\n// Removed Stub for ApplicationInsights.prototype.getPlugin.\r\n// Removed Stub for ApplicationInsights.prototype.addPlugin.\r\n// Removed Stub for ApplicationInsights.prototype.evtNamespace.\r\n// Removed Stub for ApplicationInsights.prototype.addUnloadCb.\r\n// Removed Stub for ApplicationInsights.prototype.getTraceCtx.\r\n// Removed Stub for ApplicationInsights.prototype.addTelemetryInitializer.\r\n// Removed Stub for ApplicationInsights.prototype.updateCfg.\r\n// Removed Stub for ApplicationInsights.prototype.onCfgChange.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    ApplicationInsights.__ieDyn=1;\n\n    return ApplicationInsights;\r\n}());\r\nexport { ApplicationInsights };\r\nexport { AppInsightsCore, arrForEach, isNullOrUndefined, throwError, proxyFunctions } from \"@microsoft/applicationinsights-core-js\";\r\nexport { SeverityLevel } from \"@microsoft/applicationinsights-common\";\r\nexport { Sender } from \"@microsoft/applicationinsights-channel-js\";\r\n//# sourceMappingURL=index.js.map","/*\n * Application Insights JavaScript Web SDK - Basic, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_INSTRUMENTATION_KEY = \"instrumentationKey\"; // Count: 6\r\nexport var _DYN_CONNECTION_STRING = \"connectionString\"; // Count: 4\r\nexport var _DYN_INSTRUMENTATIONKEY0 = \"instrumentationkey\"; // Count: 2\r\nexport var _DYN_ENDPOINT_URL = \"endpointUrl\"; // Count: 6\r\nexport var _DYN_INGESTIONENDPOINT = \"ingestionendpoint\"; // Count: 2\r\nexport var _DYN_USER_OVERRIDE_ENDPOI1 = \"userOverrideEndpointUrl\"; // Count: 5\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createEnumStyle } from \"@microsoft/applicationinsights-core-js\";\r\n/**\r\n * Defines the level of severity for the event.\r\n */\r\nexport var SeverityLevel = createEnumStyle({\r\n    Verbose: 0 /* eSeverityLevel.Verbose */,\r\n    Information: 1 /* eSeverityLevel.Information */,\r\n    Warning: 2 /* eSeverityLevel.Warning */,\r\n    Error: 3 /* eSeverityLevel.Error */,\r\n    Critical: 4 /* eSeverityLevel.Critical */\r\n});\r\n//# sourceMappingURL=SeverityLevel.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as array from './arrays';\n\nexport function equals(one: any, other: any): boolean {\n\tif (one === other) {\n\t\treturn true;\n\t}\n\tif (one === null || one === undefined || other === null || other === undefined) {\n\t\treturn false;\n\t}\n\tif (typeof one !== typeof other) {\n\t\treturn false;\n\t}\n\tif (typeof one !== 'object') {\n\t\treturn false;\n\t}\n\tif (Array.isArray(one) !== Array.isArray(other)) {\n\t\treturn false;\n\t}\n\n\tif (Array.isArray(one)) {\n\t\treturn array.equals(one, other, equals);\n\t} else {\n\t\tconst oneKeys: string[] = [];\n\t\tfor (const key in one) {\n\t\t\toneKeys.push(key);\n\t\t}\n\t\toneKeys.sort();\n\t\tconst otherKeys: string[] = [];\n\t\tfor (const key in other) {\n\t\t\totherKeys.push(key);\n\t\t}\n\t\totherKeys.sort();\n\t\tif (!array.equals(oneKeys, otherKeys)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn oneKeys.every(key => equals(one[key], other[key]));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { homedir } from 'os';\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport { ServiceConfigurationProvider, SyntaxServerConfiguration, TsServerLogLevel, TypeScriptServiceConfiguration, areServiceConfigurationsEqual } from './configuration/configuration';\nimport * as fileSchemes from './configuration/fileSchemes';\nimport { Schemes } from './configuration/schemes';\nimport { IExperimentationTelemetryReporter } from './experimentTelemetryReporter';\nimport { DiagnosticKind, DiagnosticsManager } from './languageFeatures/diagnostics';\nimport { Logger } from './logging/logger';\nimport { TelemetryReporter, VSCodeTelemetryReporter } from './logging/telemetry';\nimport Tracer from './logging/tracer';\nimport { ProjectType, inferredProjectCompilerOptions } from './tsconfig';\nimport { API } from './tsServer/api';\nimport BufferSyncSupport from './tsServer/bufferSyncSupport';\nimport { OngoingRequestCancellerFactory } from './tsServer/cancellation';\nimport { ILogDirectoryProvider } from './tsServer/logDirectoryProvider';\nimport { NodeVersionManager } from './tsServer/nodeManager';\nimport { TypeScriptPluginPathsProvider } from './tsServer/pluginPathsProvider';\nimport { PluginManager } from './tsServer/plugins';\nimport * as Proto from './tsServer/protocol/protocol';\nimport { EventName } from './tsServer/protocol/protocol.const';\nimport { ITypeScriptServer, TsServerLog, TsServerProcessFactory, TypeScriptServerExitEvent } from './tsServer/server';\nimport { TypeScriptServerError } from './tsServer/serverError';\nimport { TypeScriptServerSpawner } from './tsServer/spawner';\nimport { TypeScriptVersionManager } from './tsServer/versionManager';\nimport { ITypeScriptVersionProvider, TypeScriptVersion } from './tsServer/versionProvider';\nimport { ClientCapabilities, ClientCapability, ExecConfig, ITypeScriptServiceClient, ServerResponse, TypeScriptRequests } from './typescriptService';\nimport { Disposable, DisposableStore, disposeAll } from './utils/dispose';\nimport { hash } from './utils/hash';\nimport { isWeb, isWebAndHasSharedArrayBuffers } from './utils/platform';\n\n\nexport interface TsDiagnostics {\n\treadonly kind: DiagnosticKind;\n\treadonly resource: vscode.Uri;\n\treadonly diagnostics: Proto.Diagnostic[];\n\treadonly spans?: Proto.TextSpan[];\n}\n\ninterface ToCancelOnResourceChanged {\n\treadonly resource: vscode.Uri;\n\tcancel(): void;\n}\n\nnamespace ServerState {\n\texport const enum Type {\n\t\tNone,\n\t\tRunning,\n\t\tErrored\n\t}\n\n\texport const None = { type: Type.None } as const;\n\n\texport class Running {\n\t\treadonly type = Type.Running;\n\n\t\tconstructor(\n\t\t\tpublic readonly server: ITypeScriptServer,\n\n\t\t\t/**\n\t\t\t * API version obtained from the version picker after checking the corresponding path exists.\n\t\t\t */\n\t\t\tpublic readonly apiVersion: API,\n\n\t\t\t/**\n\t\t\t * Version reported by currently-running tsserver.\n\t\t\t */\n\t\t\tpublic tsserverVersion: string | undefined,\n\t\t\tpublic languageServiceEnabled: boolean,\n\t\t) { }\n\n\t\tpublic readonly toCancelOnResourceChange = new Set<ToCancelOnResourceChanged>();\n\n\t\tupdateTsserverVersion(tsserverVersion: string) {\n\t\t\tthis.tsserverVersion = tsserverVersion;\n\t\t}\n\n\t\tupdateLanguageServiceEnabled(enabled: boolean) {\n\t\t\tthis.languageServiceEnabled = enabled;\n\t\t}\n\t}\n\n\texport class Errored {\n\t\treadonly type = Type.Errored;\n\t\tconstructor(\n\t\t\tpublic readonly error: Error,\n\t\t\tpublic readonly tsServerLog: TsServerLog | undefined,\n\t\t) { }\n\t}\n\n\texport type State = typeof None | Running | Errored;\n}\n\nexport const emptyAuthority = 'ts-nul-authority';\n\nexport const inMemoryResourcePrefix = '^';\n\ninterface WatchEvent {\n\tupdated?: Set<string>;\n\tcreated?: Set<string>;\n\tdeleted?: Set<string>;\n}\n\nexport default class TypeScriptServiceClient extends Disposable implements ITypeScriptServiceClient {\n\n\tprivate readonly _onReady?: { promise: Promise<void>; resolve: () => void; reject: () => void };\n\tprivate _configuration: TypeScriptServiceConfiguration;\n\tprivate readonly pluginPathsProvider: TypeScriptPluginPathsProvider;\n\tprivate readonly _versionManager: TypeScriptVersionManager;\n\tprivate readonly _nodeVersionManager: NodeVersionManager;\n\n\tprivate readonly logger: Logger;\n\tprivate readonly tracer: Tracer;\n\n\tprivate readonly typescriptServerSpawner: TypeScriptServerSpawner;\n\tprivate serverState: ServerState.State = ServerState.None;\n\tprivate lastStart: number;\n\tprivate numberRestarts: number;\n\tprivate _isPromptingAfterCrash = false;\n\tprivate isRestarting: boolean = false;\n\tprivate hasServerFatallyCrashedTooManyTimes = false;\n\tprivate readonly loadingIndicator: ServerInitializingIndicator;\n\n\tpublic readonly telemetryReporter: TelemetryReporter;\n\tpublic readonly bufferSyncSupport: BufferSyncSupport;\n\tpublic readonly diagnosticsManager: DiagnosticsManager;\n\tpublic readonly pluginManager: PluginManager;\n\n\tprivate readonly logDirectoryProvider: ILogDirectoryProvider;\n\tprivate readonly cancellerFactory: OngoingRequestCancellerFactory;\n\tprivate readonly versionProvider: ITypeScriptVersionProvider;\n\tprivate readonly processFactory: TsServerProcessFactory;\n\n\tprivate readonly watches = new Map<number, Disposable>();\n\tprivate readonly watchEvents = new Map<number, WatchEvent>();\n\tprivate watchChangeTimeout: NodeJS.Timeout | undefined;\n\n\tconstructor(\n\t\tprivate readonly context: vscode.ExtensionContext,\n\t\tonCaseInsensitiveFileSystem: boolean,\n\t\tservices: {\n\t\t\tpluginManager: PluginManager;\n\t\t\tlogDirectoryProvider: ILogDirectoryProvider;\n\t\t\tcancellerFactory: OngoingRequestCancellerFactory;\n\t\t\tversionProvider: ITypeScriptVersionProvider;\n\t\t\tprocessFactory: TsServerProcessFactory;\n\t\t\tserviceConfigurationProvider: ServiceConfigurationProvider;\n\t\t\texperimentTelemetryReporter: IExperimentationTelemetryReporter | undefined;\n\t\t\tlogger: Logger;\n\t\t},\n\t\tallModeIds: readonly string[]\n\t) {\n\t\tsuper();\n\n\t\tthis.loadingIndicator = this._register(new ServerInitializingIndicator(this));\n\n\t\tthis.logger = services.logger;\n\t\tthis.tracer = new Tracer(this.logger);\n\n\t\tthis.pluginManager = services.pluginManager;\n\t\tthis.logDirectoryProvider = services.logDirectoryProvider;\n\t\tthis.cancellerFactory = services.cancellerFactory;\n\t\tthis.versionProvider = services.versionProvider;\n\t\tthis.processFactory = services.processFactory;\n\n\t\tthis.lastStart = Date.now();\n\n\t\tlet resolve: () => void;\n\t\tlet reject: () => void;\n\t\tconst p = new Promise<void>((res, rej) => {\n\t\t\tresolve = res;\n\t\t\treject = rej;\n\t\t});\n\t\tthis._onReady = { promise: p, resolve: resolve!, reject: reject! };\n\n\t\tthis.numberRestarts = 0;\n\n\t\tthis._configuration = services.serviceConfigurationProvider.loadFromWorkspace();\n\t\tthis.versionProvider.updateConfiguration(this._configuration);\n\n\t\tthis.pluginPathsProvider = new TypeScriptPluginPathsProvider(this._configuration);\n\t\tthis._versionManager = this._register(new TypeScriptVersionManager(this._configuration, this.versionProvider, context.workspaceState));\n\t\tthis._register(this._versionManager.onDidPickNewVersion(() => {\n\t\t\tthis.restartTsServer();\n\t\t}));\n\n\t\tthis._nodeVersionManager = this._register(new NodeVersionManager(this._configuration, context.workspaceState));\n\t\tthis._register(this._nodeVersionManager.onDidPickNewVersion(() => {\n\t\t\tthis.restartTsServer();\n\t\t}));\n\n\t\tthis.bufferSyncSupport = new BufferSyncSupport(this, allModeIds, onCaseInsensitiveFileSystem);\n\t\tthis.onReady(() => { this.bufferSyncSupport.listen(); });\n\n\t\tthis.bufferSyncSupport.onDelete(resource => {\n\t\t\tthis.cancelInflightRequestsForResource(resource);\n\t\t\tthis.diagnosticsManager.deleteAllDiagnosticsInFile(resource);\n\t\t}, null, this._disposables);\n\n\t\tthis.bufferSyncSupport.onWillChange(resource => {\n\t\t\tthis.cancelInflightRequestsForResource(resource);\n\t\t});\n\n\t\tvscode.workspace.onDidChangeConfiguration(() => {\n\t\t\tconst oldConfiguration = this._configuration;\n\t\t\tthis._configuration = services.serviceConfigurationProvider.loadFromWorkspace();\n\n\t\t\tthis.versionProvider.updateConfiguration(this._configuration);\n\t\t\tthis._versionManager.updateConfiguration(this._configuration);\n\t\t\tthis.pluginPathsProvider.updateConfiguration(this._configuration);\n\t\t\tthis._nodeVersionManager.updateConfiguration(this._configuration);\n\n\t\t\tif (this.serverState.type === ServerState.Type.Running) {\n\t\t\t\tif (!this._configuration.implicitProjectConfiguration.isEqualTo(oldConfiguration.implicitProjectConfiguration)) {\n\t\t\t\t\tthis.setCompilerOptionsForInferredProjects(this._configuration);\n\t\t\t\t}\n\n\t\t\t\tif (!areServiceConfigurationsEqual(this._configuration, oldConfiguration)) {\n\t\t\t\t\tthis.restartTsServer();\n\t\t\t\t}\n\t\t\t}\n\t\t}, this, this._disposables);\n\n\t\tthis.telemetryReporter = new VSCodeTelemetryReporter(services.experimentTelemetryReporter, () => {\n\t\t\tif (this.serverState.type === ServerState.Type.Running) {\n\t\t\t\tif (this.serverState.tsserverVersion) {\n\t\t\t\t\treturn this.serverState.tsserverVersion;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.apiVersion.fullVersionString;\n\t\t});\n\n\t\tthis.diagnosticsManager = new DiagnosticsManager('typescript', this._configuration, this.telemetryReporter, onCaseInsensitiveFileSystem);\n\t\tthis.typescriptServerSpawner = new TypeScriptServerSpawner(this.versionProvider, this._versionManager, this._nodeVersionManager, this.logDirectoryProvider, this.pluginPathsProvider, this.logger, this.telemetryReporter, this.tracer, this.processFactory);\n\n\t\tthis._register(this.pluginManager.onDidUpdateConfig(update => {\n\t\t\tthis.configurePlugin(update.pluginId, update.config);\n\t\t}));\n\n\t\tthis._register(this.pluginManager.onDidChangePlugins(() => {\n\t\t\tthis.restartTsServer();\n\t\t}));\n\t}\n\n\tpublic get capabilities() {\n\t\tif (this._configuration.useSyntaxServer === SyntaxServerConfiguration.Always) {\n\t\t\treturn new ClientCapabilities(\n\t\t\t\tClientCapability.Syntax,\n\t\t\t\tClientCapability.EnhancedSyntax);\n\t\t}\n\n\t\tif (isWeb()) {\n\t\t\tif (this.isProjectWideIntellisenseOnWebEnabled()) {\n\t\t\t\treturn new ClientCapabilities(\n\t\t\t\t\tClientCapability.Syntax,\n\t\t\t\t\tClientCapability.EnhancedSyntax,\n\t\t\t\t\tClientCapability.Semantic);\n\t\t\t} else {\n\t\t\t\treturn new ClientCapabilities(\n\t\t\t\t\tClientCapability.Syntax,\n\t\t\t\t\tClientCapability.EnhancedSyntax);\n\t\t\t}\n\t\t}\n\n\t\tif (this.apiVersion.gte(API.v400)) {\n\t\t\treturn new ClientCapabilities(\n\t\t\t\tClientCapability.Syntax,\n\t\t\t\tClientCapability.EnhancedSyntax,\n\t\t\t\tClientCapability.Semantic);\n\t\t}\n\n\t\treturn new ClientCapabilities(\n\t\t\tClientCapability.Syntax,\n\t\t\tClientCapability.Semantic);\n\t}\n\n\tprivate readonly _onDidChangeCapabilities = this._register(new vscode.EventEmitter<void>());\n\treadonly onDidChangeCapabilities = this._onDidChangeCapabilities.event;\n\n\tprivate isProjectWideIntellisenseOnWebEnabled(): boolean {\n\t\treturn isWebAndHasSharedArrayBuffers() && this._configuration.webProjectWideIntellisenseEnabled;\n\t}\n\n\tprivate cancelInflightRequestsForResource(resource: vscode.Uri): void {\n\t\tif (this.serverState.type !== ServerState.Type.Running) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const request of this.serverState.toCancelOnResourceChange) {\n\t\t\tif (request.resource.toString() === resource.toString()) {\n\t\t\t\trequest.cancel();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get configuration() {\n\t\treturn this._configuration;\n\t}\n\n\tpublic override dispose() {\n\t\tsuper.dispose();\n\n\t\tthis.bufferSyncSupport.dispose();\n\n\t\tif (this.serverState.type === ServerState.Type.Running) {\n\t\t\tthis.serverState.server.kill();\n\t\t}\n\n\t\tthis.loadingIndicator.reset();\n\n\t\tthis.resetWatchers();\n\t}\n\n\tpublic restartTsServer(fromUserAction = false): void {\n\t\tif (this.serverState.type === ServerState.Type.Running) {\n\t\t\tthis.logger.info('Killing TS Server');\n\t\t\tthis.isRestarting = true;\n\t\t\tthis.serverState.server.kill();\n\t\t}\n\n\t\tif (fromUserAction) {\n\t\t\t// Reset crash trackers\n\t\t\tthis.hasServerFatallyCrashedTooManyTimes = false;\n\t\t\tthis.numberRestarts = 0;\n\t\t\tthis.lastStart = Date.now();\n\t\t}\n\n\t\tthis.serverState = this.startService(true);\n\t}\n\n\tprivate readonly _onTsServerStarted = this._register(new vscode.EventEmitter<{ version: TypeScriptVersion; usedApiVersion: API }>());\n\tpublic readonly onTsServerStarted = this._onTsServerStarted.event;\n\n\tprivate readonly _onDiagnosticsReceived = this._register(new vscode.EventEmitter<TsDiagnostics>());\n\tpublic readonly onDiagnosticsReceived = this._onDiagnosticsReceived.event;\n\n\tprivate readonly _onConfigDiagnosticsReceived = this._register(new vscode.EventEmitter<Proto.ConfigFileDiagnosticEvent>());\n\tpublic readonly onConfigDiagnosticsReceived = this._onConfigDiagnosticsReceived.event;\n\n\tprivate readonly _onResendModelsRequested = this._register(new vscode.EventEmitter<void>());\n\tpublic readonly onResendModelsRequested = this._onResendModelsRequested.event;\n\n\tprivate readonly _onProjectLanguageServiceStateChanged = this._register(new vscode.EventEmitter<Proto.ProjectLanguageServiceStateEventBody>());\n\tpublic readonly onProjectLanguageServiceStateChanged = this._onProjectLanguageServiceStateChanged.event;\n\n\tprivate readonly _onDidBeginInstallTypings = this._register(new vscode.EventEmitter<Proto.BeginInstallTypesEventBody>());\n\tpublic readonly onDidBeginInstallTypings = this._onDidBeginInstallTypings.event;\n\n\tprivate readonly _onDidEndInstallTypings = this._register(new vscode.EventEmitter<Proto.EndInstallTypesEventBody>());\n\tpublic readonly onDidEndInstallTypings = this._onDidEndInstallTypings.event;\n\n\tprivate readonly _onTypesInstallerInitializationFailed = this._register(new vscode.EventEmitter<Proto.TypesInstallerInitializationFailedEventBody>());\n\tpublic readonly onTypesInstallerInitializationFailed = this._onTypesInstallerInitializationFailed.event;\n\n\tprivate readonly _onSurveyReady = this._register(new vscode.EventEmitter<Proto.SurveyReadyEventBody>());\n\tpublic readonly onSurveyReady = this._onSurveyReady.event;\n\n\tpublic get apiVersion(): API {\n\t\tif (this.serverState.type === ServerState.Type.Running) {\n\t\t\treturn this.serverState.apiVersion;\n\t\t}\n\t\treturn API.defaultVersion;\n\t}\n\n\tpublic onReady(f: () => void): Promise<void> {\n\t\treturn this._onReady!.promise.then(f);\n\t}\n\n\tpublic ensureServiceStarted() {\n\t\tif (this.serverState.type !== ServerState.Type.Running) {\n\t\t\tthis.startService();\n\t\t}\n\t}\n\n\tprivate token: number = 0;\n\tprivate startService(resendModels: boolean = false): ServerState.State {\n\t\tthis.logger.info(`Starting TS Server`);\n\n\t\tif (this.isDisposed) {\n\t\t\tthis.logger.info(`Not starting server: disposed`);\n\t\t\treturn ServerState.None;\n\t\t}\n\n\t\tif (this.hasServerFatallyCrashedTooManyTimes) {\n\t\t\tthis.logger.info(`Not starting server: too many crashes`);\n\t\t\treturn ServerState.None;\n\t\t}\n\n\t\tlet version = this._versionManager.currentVersion;\n\t\tif (!version.isValid) {\n\t\t\tvscode.window.showWarningMessage(vscode.l10n.t(\"The path {0} doesn't point to a valid tsserver install. Falling back to bundled TypeScript version.\", version.path));\n\n\t\t\tthis._versionManager.reset();\n\t\t\tversion = this._versionManager.currentVersion;\n\t\t}\n\n\t\tthis.logger.info(`Using tsserver from: ${version.path}`);\n\t\tconst nodePath = this._nodeVersionManager.currentVersion;\n\t\tif (nodePath) {\n\t\t\tthis.logger.info(`Using Node installation from ${nodePath} to run TS Server`);\n\t\t}\n\n\t\tthis.resetWatchers();\n\n\t\tconst apiVersion = version.apiVersion || API.defaultVersion;\n\t\tconst mytoken = ++this.token;\n\t\tconst handle = this.typescriptServerSpawner.spawn(version, this.capabilities, this.configuration, this.pluginManager, this.cancellerFactory, {\n\t\t\tonFatalError: (command, err) => this.fatalError(command, err),\n\t\t});\n\t\tthis.serverState = new ServerState.Running(handle, apiVersion, undefined, true);\n\t\tthis.lastStart = Date.now();\n\n\n\t\t/* __GDPR__FRAGMENT__\n\t\t\t\"TypeScriptServerEnvCommonProperties\" : {\n\t\t\t\t\"hasGlobalPlugins\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"globalPluginNameHashes\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t}\n\t\t*/\n\t\tconst typeScriptServerEnvCommonProperties = {\n\t\t\thasGlobalPlugins: this.pluginManager.plugins.length > 0,\n\t\t\tglobalPluginNameHashes: JSON.stringify(this.pluginManager.plugins.map(plugin => hash(plugin.name))),\n\t\t};\n\n\t\t/* __GDPR__\n\t\t\t\"tsserver.spawned\" : {\n\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\"${include}\": [\n\t\t\t\t\t\"${TypeScriptCommonProperties}\",\n\t\t\t\t\t\"${TypeScriptServerEnvCommonProperties}\"\n\t\t\t\t],\n\t\t\t\t\"localTypeScriptVersion\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"typeScriptVersionSource\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryReporter.logTelemetry('tsserver.spawned', {\n\t\t\t...typeScriptServerEnvCommonProperties,\n\t\t\tlocalTypeScriptVersion: this.versionProvider.localVersion ? this.versionProvider.localVersion.displayName : '',\n\t\t\ttypeScriptVersionSource: version.source,\n\t\t});\n\n\t\thandle.onError((err: Error) => {\n\t\t\tif (this.token !== mytoken) {\n\t\t\t\t// this is coming from an old process\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (err) {\n\t\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"TypeScript language server exited with error. Error message is: {0}\", err.message || err.name));\n\t\t\t}\n\n\t\t\tthis.serverState = new ServerState.Errored(err, handle.tsServerLog);\n\t\t\tthis.logger.error('TSServer errored with error.', err);\n\t\t\tif (handle.tsServerLog?.type === 'file') {\n\t\t\t\tthis.logger.error(`TSServer log file: ${handle.tsServerLog.uri.fsPath}`);\n\t\t\t}\n\n\t\t\t/* __GDPR__\n\t\t\t\t\"tsserver.error\" : {\n\t\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\t\"${include}\": [\n\t\t\t\t\t\t\"${TypeScriptCommonProperties}\",\n\t\t\t\t\t\t\"${TypeScriptServerEnvCommonProperties}\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t*/\n\t\t\tthis.telemetryReporter.logTelemetry('tsserver.error', {\n\t\t\t\t...typeScriptServerEnvCommonProperties\n\t\t\t});\n\t\t\tthis.serviceExited(false, apiVersion);\n\t\t});\n\n\t\thandle.onExit((data: TypeScriptServerExitEvent) => {\n\t\t\tconst { code, signal } = data;\n\t\t\tthis.logger.error(`TSServer exited. Code: ${code}. Signal: ${signal}`);\n\n\t\t\t// In practice, the exit code is an integer with no ties to any identity,\n\t\t\t// so it can be classified as SystemMetaData, rather than CallstackOrException.\n\t\t\t/* __GDPR__\n\t\t\t\t\"tsserver.exitWithCode\" : {\n\t\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\t\"${include}\": [\n\t\t\t\t\t\t\"${TypeScriptCommonProperties}\",\n\t\t\t\t\t\t\"${TypeScriptServerEnvCommonProperties}\"\n\t\t\t\t\t],\n\t\t\t\t\t\"code\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" },\n\t\t\t\t\t\"signal\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" }\n\t\t\t\t}\n\t\t\t*/\n\t\t\tthis.telemetryReporter.logTelemetry('tsserver.exitWithCode', {\n\t\t\t\t...typeScriptServerEnvCommonProperties,\n\t\t\t\tcode: code ?? undefined,\n\t\t\t\tsignal: signal ?? undefined,\n\t\t\t});\n\n\t\t\tif (this.token !== mytoken) {\n\t\t\t\t// this is coming from an old process\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (handle.tsServerLog?.type === 'file') {\n\t\t\t\tthis.logger.info(`TSServer log file: ${handle.tsServerLog.uri.fsPath}`);\n\t\t\t}\n\t\t\tthis.serviceExited(!this.isRestarting, apiVersion);\n\t\t\tthis.isRestarting = false;\n\t\t});\n\n\t\thandle.onEvent(event => this.dispatchEvent(event));\n\n\t\tthis.serviceStarted(resendModels);\n\n\t\tthis._onReady!.resolve();\n\t\tthis._onTsServerStarted.fire({ version: version, usedApiVersion: apiVersion });\n\t\tthis._onDidChangeCapabilities.fire();\n\t\treturn this.serverState;\n\t}\n\n\tprivate resetWatchers() {\n\t\tclearTimeout(this.watchChangeTimeout);\n\t\tdisposeAll(Array.from(this.watches.values()));\n\t}\n\n\tpublic async showVersionPicker(): Promise<void> {\n\t\tthis._versionManager.promptUserForVersion();\n\t}\n\n\tpublic async openTsServerLogFile(): Promise<boolean> {\n\t\tif (this._configuration.tsServerLogLevel === TsServerLogLevel.Off) {\n\t\t\tvscode.window.showErrorMessage<vscode.MessageItem>(\n\t\t\t\tvscode.l10n.t(\"TS Server logging is off. Please set 'typescript.tsserver.log' and restart the TS server to enable logging\"),\n\t\t\t\t{\n\t\t\t\t\ttitle: vscode.l10n.t(\"Enable logging and restart TS server\"),\n\t\t\t\t})\n\t\t\t\t.then(selection => {\n\t\t\t\t\tif (selection) {\n\t\t\t\t\t\treturn vscode.workspace.getConfiguration().update('typescript.tsserver.log', 'verbose', true).then(() => {\n\t\t\t\t\t\t\tthis.restartTsServer();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined;\n\t\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.serverState.type !== ServerState.Type.Running || !this.serverState.server.tsServerLog) {\n\t\t\tvscode.window.showWarningMessage(vscode.l10n.t(\"TS Server has not started logging.\"));\n\t\t\treturn false;\n\t\t}\n\n\t\tswitch (this.serverState.server.tsServerLog.type) {\n\t\t\tcase 'output': {\n\t\t\t\tthis.serverState.server.tsServerLog.output.show();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase 'file': {\n\t\t\t\ttry {\n\t\t\t\t\tconst doc = await vscode.workspace.openTextDocument(this.serverState.server.tsServerLog.uri);\n\t\t\t\t\tawait vscode.window.showTextDocument(doc);\n\t\t\t\t\treturn true;\n\t\t\t\t} catch {\n\t\t\t\t\t// noop\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tawait vscode.commands.executeCommand('revealFileInOS', this.serverState.server.tsServerLog.uri);\n\t\t\t\t\treturn true;\n\t\t\t\t} catch {\n\t\t\t\t\tvscode.window.showWarningMessage(vscode.l10n.t(\"Could not open TS Server log file\"));\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate serviceStarted(resendModels: boolean): void {\n\t\tthis.bufferSyncSupport.reset();\n\n\t\tconst watchOptions = this.apiVersion.gte(API.v380)\n\t\t\t? this.configuration.watchOptions\n\t\t\t: undefined;\n\n\t\tconst configureOptions: Proto.ConfigureRequestArguments = {\n\t\t\thostInfo: 'vscode',\n\t\t\tpreferences: {\n\t\t\t\tprovidePrefixAndSuffixTextForRename: true,\n\t\t\t\tallowRenameOfImportPath: true,\n\t\t\t\tincludePackageJsonAutoImports: this._configuration.includePackageJsonAutoImports,\n\t\t\t\texcludeLibrarySymbolsInNavTo: this._configuration.workspaceSymbolsExcludeLibrarySymbols,\n\t\t\t},\n\t\t\twatchOptions\n\t\t};\n\t\tthis.executeWithoutWaitingForResponse('configure', configureOptions);\n\t\tthis.setCompilerOptionsForInferredProjects(this._configuration);\n\t\tif (resendModels) {\n\t\t\tthis._onResendModelsRequested.fire();\n\t\t\tthis.bufferSyncSupport.reinitialize();\n\t\t\tthis.bufferSyncSupport.requestAllDiagnostics();\n\t\t}\n\n\t\t// Reconfigure any plugins\n\t\tfor (const [pluginName, config] of this.pluginManager.configurations()) {\n\t\t\tthis.configurePlugin(pluginName, config);\n\t\t}\n\t}\n\n\tprivate setCompilerOptionsForInferredProjects(configuration: TypeScriptServiceConfiguration): void {\n\t\tconst args: Proto.SetCompilerOptionsForInferredProjectsArgs = {\n\t\t\toptions: this.getCompilerOptionsForInferredProjects(configuration)\n\t\t};\n\t\tthis.executeWithoutWaitingForResponse('compilerOptionsForInferredProjects', args);\n\t}\n\n\tprivate getCompilerOptionsForInferredProjects(configuration: TypeScriptServiceConfiguration): Proto.ExternalProjectCompilerOptions {\n\t\treturn {\n\t\t\t...inferredProjectCompilerOptions(this.apiVersion, ProjectType.TypeScript, configuration),\n\t\t\tallowJs: true,\n\t\t\tallowSyntheticDefaultImports: true,\n\t\t\tallowNonTsExtensions: true,\n\t\t\tresolveJsonModule: true,\n\t\t};\n\t}\n\n\tprivate serviceExited(restart: boolean, tsVersion: API): void {\n\t\tthis.resetWatchers();\n\t\tthis.loadingIndicator.reset();\n\n\t\tthis.serverState = ServerState.None;\n\n\t\tif (this.isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (restart) {\n\t\t\tconst diff = Date.now() - this.lastStart;\n\t\t\tthis.numberRestarts++;\n\t\t\tlet startService = true;\n\n\t\t\tconst pluginExtensionList = this.pluginManager.plugins.map(plugin => plugin.extension.id).join(', ');\n\t\t\tconst reportIssueItem: vscode.MessageItem = {\n\t\t\t\ttitle: vscode.l10n.t(\"Report Issue\"),\n\t\t\t};\n\t\t\tlet prompt: Thenable<undefined | vscode.MessageItem> | undefined = undefined;\n\n\t\t\tif (this.numberRestarts > 5) {\n\t\t\t\tthis.numberRestarts = 0;\n\t\t\t\tif (diff < 10 * 1000 /* 10 seconds */) {\n\t\t\t\t\tthis.lastStart = Date.now();\n\t\t\t\t\tstartService = false;\n\t\t\t\t\tthis.hasServerFatallyCrashedTooManyTimes = true;\n\t\t\t\t\tif (this.pluginManager.plugins.length) {\n\t\t\t\t\t\tprompt = vscode.window.showErrorMessage<vscode.MessageItem>(\n\t\t\t\t\t\t\tvscode.l10n.t(\"The JS/TS language service immediately crashed 5 times. The service will not be restarted.\\nThis may be caused by a plugin contributed by one of these extensions: {0}.\\nPlease try disabling these extensions before filing an issue against VS Code.\", pluginExtensionList));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprompt = vscode.window.showErrorMessage(\n\t\t\t\t\t\t\tvscode.l10n.t(\"The JS/TS language service immediately crashed 5 times. The service will not be restarted.\"),\n\t\t\t\t\t\t\treportIssueItem);\n\t\t\t\t\t}\n\n\t\t\t\t\t/* __GDPR__\n\t\t\t\t\t\t\"serviceExited\" : {\n\t\t\t\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\t\t\t\"${include}\": [\n\t\t\t\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t*/\n\t\t\t\t\tthis.telemetryReporter.logTelemetry('serviceExited');\n\t\t\t\t} else if (diff < 60 * 1000 * 5 /* 5 Minutes */) {\n\t\t\t\t\tthis.lastStart = Date.now();\n\t\t\t\t\tif (!this._isPromptingAfterCrash) {\n\t\t\t\t\t\tif (this.pluginManager.plugins.length) {\n\t\t\t\t\t\t\tprompt = vscode.window.showWarningMessage<vscode.MessageItem>(\n\t\t\t\t\t\t\t\tvscode.l10n.t(\"The JS/TS language service crashed 5 times in the last 5 Minutes.\\nThis may be caused by a plugin contributed by one of these extensions: {0}\\nPlease try disabling these extensions before filing an issue against VS Code.\", pluginExtensionList));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tprompt = vscode.window.showWarningMessage(\n\t\t\t\t\t\t\t\tvscode.l10n.t(\"The JS/TS language service crashed 5 times in the last 5 Minutes.\"),\n\t\t\t\t\t\t\t\treportIssueItem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (['vscode-insiders', 'code-oss'].includes(vscode.env.uriScheme)) {\n\t\t\t\t// Prompt after a single restart\n\t\t\t\tthis.numberRestarts = 0;\n\t\t\t\tif (!this._isPromptingAfterCrash) {\n\t\t\t\t\tif (this.pluginManager.plugins.length) {\n\t\t\t\t\t\tprompt = vscode.window.showWarningMessage<vscode.MessageItem>(\n\t\t\t\t\t\t\tvscode.l10n.t(\"The JS/TS language service crashed.\\nThis may be caused by a plugin contributed by one of these extensions: {0}.\\nPlease try disabling these extensions before filing an issue against VS Code.\", pluginExtensionList));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprompt = vscode.window.showWarningMessage(\n\t\t\t\t\t\t\tvscode.l10n.t(\"The JS/TS language service crashed.\"),\n\t\t\t\t\t\t\treportIssueItem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (prompt) {\n\t\t\t\tthis._isPromptingAfterCrash = true;\n\t\t\t}\n\n\t\t\tprompt?.then(async item => {\n\t\t\t\tthis._isPromptingAfterCrash = false;\n\n\t\t\t\tif (item === reportIssueItem) {\n\n\t\t\t\t\tconst minModernTsVersion = this.versionProvider.bundledVersion.apiVersion;\n\n\t\t\t\t\t// Don't allow reporting issues using the PnP patched version of TS Server\n\t\t\t\t\tif (tsVersion.isYarnPnp()) {\n\t\t\t\t\t\tconst reportIssue: vscode.MessageItem = {\n\t\t\t\t\t\t\ttitle: vscode.l10n.t(\"Report issue against Yarn PnP\"),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst response = await vscode.window.showWarningMessage(\n\t\t\t\t\t\t\tvscode.l10n.t(\"Please report an issue against Yarn PnP\"),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\t\tdetail: vscode.l10n.t(\"The workspace is using a version of the TypeScript Server that has been patched by Yarn PnP. This patching is a common source of bugs.\"),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\treportIssue);\n\n\t\t\t\t\t\tif (response === reportIssue) {\n\t\t\t\t\t\t\tvscode.env.openExternal(vscode.Uri.parse('https://github.com/yarnpkg/berry/issues'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Don't allow reporting issues with old TS versions\n\t\t\t\t\telse if (\n\t\t\t\t\t\tminModernTsVersion &&\n\t\t\t\t\t\ttsVersion.lt(minModernTsVersion)\n\t\t\t\t\t) {\n\t\t\t\t\t\tvscode.window.showWarningMessage(\n\t\t\t\t\t\t\tvscode.l10n.t(\"Please update your TypeScript version\"),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\t\tdetail: vscode.l10n.t(\n\t\t\t\t\t\t\t\t\t\"The workspace is using an old version of TypeScript ({0}).\\n\\nBefore reporting an issue, please update the workspace to use TypeScript {1} or newer to make sure the bug has not already been fixed.\",\n\t\t\t\t\t\t\t\t\ttsVersion.displayName,\n\t\t\t\t\t\t\t\t\tminModernTsVersion.displayName),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvscode.env.openExternal(vscode.Uri.parse('https://github.com/microsoft/vscode/wiki/TypeScript-Issues'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (startService) {\n\t\t\t\tthis.startService(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic toTsFilePath(resource: vscode.Uri): string | undefined {\n\t\tif (fileSchemes.disabledSchemes.has(resource.scheme)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (resource.scheme === fileSchemes.file && !isWeb()) {\n\t\t\treturn resource.fsPath;\n\t\t}\n\n\t\treturn (this.isProjectWideIntellisenseOnWebEnabled() ? '' : inMemoryResourcePrefix)\n\t\t\t+ '/' + resource.scheme\n\t\t\t+ '/' + (resource.authority || emptyAuthority)\n\t\t\t+ (resource.path.startsWith('/') ? resource.path : '/' + resource.path)\n\t\t\t+ (resource.fragment ? '#' + resource.fragment : '');\n\t}\n\n\n\tpublic toOpenTsFilePath(document: vscode.TextDocument | vscode.Uri, options: { suppressAlertOnFailure?: boolean } = {}): string | undefined {\n\t\tconst uri = document instanceof vscode.Uri ? document : document.uri;\n\t\tif (!this.bufferSyncSupport.ensureHasBuffer(uri)) {\n\t\t\tif (!options.suppressAlertOnFailure && !fileSchemes.disabledSchemes.has(uri.scheme)) {\n\t\t\t\tconsole.error(`Unexpected resource ${uri}`);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.toTsFilePath(uri);\n\t}\n\n\tpublic hasCapabilityForResource(resource: vscode.Uri, capability: ClientCapability): boolean {\n\t\tif (!this.capabilities.has(capability)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tswitch (capability) {\n\t\t\tcase ClientCapability.Semantic: {\n\t\t\t\treturn fileSchemes.getSemanticSupportedSchemes().includes(resource.scheme);\n\t\t\t}\n\t\t\tcase ClientCapability.Syntax:\n\t\t\tcase ClientCapability.EnhancedSyntax: {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic toResource(filepath: string): vscode.Uri {\n\t\tif (isWeb()) {\n\t\t\t// On web, the stdlib paths that TS return look like: '/lib.es2015.collection.d.ts'\n\t\t\t// TODO: Find out what extensionUri is when testing (should be http://localhost:8080/static/sources/extensions/typescript-language-features/)\n\t\t\t// TODO:  make sure that this code path is getting hit\n\t\t\tif (filepath.startsWith('/lib.') && filepath.endsWith('.d.ts')) {\n\t\t\t\treturn vscode.Uri.joinPath(this.context.extensionUri, 'dist', 'browser', 'typescript', filepath.slice(1));\n\t\t\t}\n\t\t\tconst parts = filepath.match(/^\\/([^\\/]+)\\/([^\\/]*)\\/(.+)$/);\n\t\t\tif (parts) {\n\t\t\t\tconst resource = vscode.Uri.parse(parts[1] + '://' + (parts[2] === emptyAuthority ? '' : parts[2]) + '/' + parts[3]);\n\t\t\t\treturn this.bufferSyncSupport.toVsCodeResource(resource);\n\t\t\t}\n\t\t}\n\n\t\tif (filepath.startsWith(inMemoryResourcePrefix)) {\n\t\t\tconst parts = filepath.match(/^\\^\\/([^\\/]+)\\/([^\\/]*)\\/(.+)$/);\n\t\t\tif (parts) {\n\t\t\t\tconst resource = vscode.Uri.parse(parts[1] + '://' + (parts[2] === emptyAuthority ? '' : parts[2]) + '/' + parts[3]);\n\t\t\t\treturn this.bufferSyncSupport.toVsCodeResource(resource);\n\t\t\t}\n\t\t}\n\t\treturn this.bufferSyncSupport.toResource(filepath);\n\t}\n\n\tpublic getWorkspaceRootForResource(resource: vscode.Uri): vscode.Uri | undefined {\n\t\tconst roots = vscode.workspace.workspaceFolders ? Array.from(vscode.workspace.workspaceFolders) : undefined;\n\t\tif (!roots?.length) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// For notebook cells, we need to use the notebook document to look up the workspace\n\t\tif (resource.scheme === Schemes.notebookCell) {\n\t\t\tfor (const notebook of vscode.workspace.notebookDocuments) {\n\t\t\t\tfor (const cell of notebook.getCells()) {\n\t\t\t\t\tif (cell.document.uri.toString() === resource.toString()) {\n\t\t\t\t\t\tresource = notebook.uri;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Find the highest level workspace folder that contains the file\n\t\tfor (const root of roots.sort((a, b) => a.uri.path.length - b.uri.path.length)) {\n\t\t\tif (root.uri.scheme === resource.scheme && root.uri.authority === resource.authority) {\n\t\t\t\tif (resource.path.startsWith(root.uri.path + '/')) {\n\t\t\t\t\treturn root.uri;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn vscode.workspace.getWorkspaceFolder(resource)?.uri;\n\t}\n\n\tpublic execute(command: keyof TypeScriptRequests, args: any, token: vscode.CancellationToken, config?: ExecConfig): Promise<ServerResponse.Response<Proto.Response>> {\n\t\tlet executions: Array<Promise<ServerResponse.Response<Proto.Response>> | undefined> | undefined;\n\n\t\tif (config?.cancelOnResourceChange) {\n\t\t\tconst runningServerState = this.serverState;\n\t\t\tif (runningServerState.type === ServerState.Type.Running) {\n\t\t\t\tconst source = new vscode.CancellationTokenSource();\n\t\t\t\ttoken.onCancellationRequested(() => source.cancel());\n\n\t\t\t\tconst inFlight: ToCancelOnResourceChanged = {\n\t\t\t\t\tresource: config.cancelOnResourceChange,\n\t\t\t\t\tcancel: () => source.cancel(),\n\t\t\t\t};\n\t\t\t\trunningServerState.toCancelOnResourceChange.add(inFlight);\n\n\t\t\t\texecutions = this.executeImpl(command, args, {\n\t\t\t\t\tisAsync: false,\n\t\t\t\t\ttoken: source.token,\n\t\t\t\t\texpectsResult: true,\n\t\t\t\t\t...config,\n\t\t\t\t});\n\t\t\t\texecutions[0]!.finally(() => {\n\t\t\t\t\trunningServerState.toCancelOnResourceChange.delete(inFlight);\n\t\t\t\t\tsource.dispose();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (!executions) {\n\t\t\texecutions = this.executeImpl(command, args, {\n\t\t\t\tisAsync: false,\n\t\t\t\ttoken,\n\t\t\t\texpectsResult: true,\n\t\t\t\t...config,\n\t\t\t});\n\t\t}\n\n\t\tif (config?.nonRecoverable) {\n\t\t\texecutions[0]!.catch(err => this.fatalError(command, err));\n\t\t}\n\n\t\tif (command === 'updateOpen') {\n\t\t\t// If update open has completed, consider that the project has loaded\n\t\t\tconst updateOpenTask = Promise.all(executions).then(() => {\n\t\t\t\tthis.loadingIndicator.reset();\n\t\t\t});\n\n\t\t\tconst updateOpenArgs = (args as Proto.UpdateOpenRequestArgs);\n\t\t\tif (updateOpenArgs.openFiles?.length === 1) {\n\t\t\t\tthis.loadingIndicator.startedLoadingFile(updateOpenArgs.openFiles[0].file, updateOpenTask);\n\t\t\t}\n\t\t}\n\n\t\treturn executions[0]!;\n\t}\n\n\tpublic executeWithoutWaitingForResponse(command: keyof TypeScriptRequests, args: any): void {\n\t\tthis.executeImpl(command, args, {\n\t\t\tisAsync: false,\n\t\t\ttoken: undefined,\n\t\t\texpectsResult: false\n\t\t});\n\t}\n\n\tpublic executeAsync(command: keyof TypeScriptRequests, args: Proto.GeterrRequestArgs, token: vscode.CancellationToken): Promise<ServerResponse.Response<Proto.Response>> {\n\t\treturn this.executeImpl(command, args, {\n\t\t\tisAsync: true,\n\t\t\ttoken,\n\t\t\texpectsResult: true\n\t\t})[0]!;\n\t}\n\n\tprivate executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean; token?: vscode.CancellationToken; expectsResult: boolean; lowPriority?: boolean; requireSemantic?: boolean }): Array<Promise<ServerResponse.Response<Proto.Response>> | undefined> {\n\t\tconst serverState = this.serverState;\n\t\tif (serverState.type === ServerState.Type.Running) {\n\t\t\tthis.bufferSyncSupport.beforeCommand(command);\n\t\t\treturn serverState.server.executeImpl(command, args, executeInfo);\n\t\t} else {\n\t\t\treturn [Promise.resolve(ServerResponse.NoServer)];\n\t\t}\n\t}\n\n\tpublic interruptGetErr<R>(f: () => R): R {\n\t\treturn this.bufferSyncSupport.interruptGetErr(f);\n\t}\n\n\tprivate fatalError(command: string, error: unknown): void {\n\t\t/* __GDPR__\n\t\t\t\"fatalError\" : {\n\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\"${include}\": [\n\t\t\t\t\t\"${TypeScriptCommonProperties}\",\n\t\t\t\t\t\"${TypeScriptRequestErrorProperties}\"\n\t\t\t\t],\n\t\t\t\t\"command\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryReporter.logTelemetry('fatalError', { ...(error instanceof TypeScriptServerError ? error.telemetry : { command }) });\n\t\tconsole.error(`A non-recoverable error occurred while executing tsserver command: ${command}`);\n\t\tif (error instanceof TypeScriptServerError && error.serverErrorText) {\n\t\t\tconsole.error(error.serverErrorText);\n\t\t}\n\n\t\tif (this.serverState.type === ServerState.Type.Running) {\n\t\t\tthis.logger.info('Killing TS Server');\n\t\t\tconst logfile = this.serverState.server.tsServerLog;\n\t\t\tthis.serverState.server.kill();\n\t\t\tif (error instanceof TypeScriptServerError) {\n\t\t\t\tthis.serverState = new ServerState.Errored(error, logfile);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate dispatchEvent(event: Proto.Event) {\n\t\tswitch (event.event) {\n\t\t\tcase EventName.syntaxDiag:\n\t\t\tcase EventName.semanticDiag:\n\t\t\tcase EventName.suggestionDiag:\n\t\t\tcase EventName.regionSemanticDiag: {\n\t\t\t\t// This event also roughly signals that projects have been loaded successfully (since the TS server is synchronous)\n\t\t\t\tthis.loadingIndicator.reset();\n\n\t\t\t\tconst diagnosticEvent = event as Proto.DiagnosticEvent;\n\t\t\t\tif (diagnosticEvent.body?.diagnostics) {\n\t\t\t\t\tthis._onDiagnosticsReceived.fire({\n\t\t\t\t\t\tkind: getDiagnosticsKind(event),\n\t\t\t\t\t\tresource: this.toResource(diagnosticEvent.body.file),\n\t\t\t\t\t\tdiagnostics: diagnosticEvent.body.diagnostics,\n\t\t\t\t\t\tspans: diagnosticEvent.body.spans,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcase EventName.configFileDiag:\n\t\t\t\tthis._onConfigDiagnosticsReceived.fire(event as Proto.ConfigFileDiagnosticEvent);\n\t\t\t\treturn;\n\n\t\t\tcase EventName.telemetry: {\n\t\t\t\tconst body = (event as Proto.TelemetryEvent).body;\n\t\t\t\tthis.dispatchTelemetryEvent(body);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcase EventName.projectLanguageServiceState: {\n\t\t\t\tconst body = (event as Proto.ProjectLanguageServiceStateEvent).body!;\n\t\t\t\tif (this.serverState.type === ServerState.Type.Running) {\n\t\t\t\t\tthis.serverState.updateLanguageServiceEnabled(body.languageServiceEnabled);\n\t\t\t\t}\n\t\t\t\tthis._onProjectLanguageServiceStateChanged.fire(body);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcase EventName.projectsUpdatedInBackground: {\n\t\t\t\tthis.loadingIndicator.reset();\n\n\t\t\t\tconst body = (event as Proto.ProjectsUpdatedInBackgroundEvent).body;\n\t\t\t\tconst resources = body.openFiles.map(file => this.toResource(file));\n\t\t\t\tthis.bufferSyncSupport.getErr(resources);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcase EventName.beginInstallTypes:\n\t\t\t\tthis._onDidBeginInstallTypings.fire((event as Proto.BeginInstallTypesEvent).body);\n\t\t\t\treturn;\n\n\t\t\tcase EventName.endInstallTypes:\n\t\t\t\tthis._onDidEndInstallTypings.fire((event as Proto.EndInstallTypesEvent).body);\n\t\t\t\treturn;\n\n\t\t\tcase EventName.typesInstallerInitializationFailed:\n\t\t\t\tthis._onTypesInstallerInitializationFailed.fire((event as Proto.TypesInstallerInitializationFailedEvent).body);\n\t\t\t\treturn;\n\n\t\t\tcase EventName.surveyReady:\n\t\t\t\tthis._onSurveyReady.fire((event as Proto.SurveyReadyEvent).body);\n\t\t\t\treturn;\n\n\t\t\tcase EventName.projectLoadingStart:\n\t\t\t\tthis.loadingIndicator.startedLoadingProject((event as Proto.ProjectLoadingStartEvent).body.projectName);\n\t\t\t\treturn;\n\n\t\t\tcase EventName.projectLoadingFinish:\n\t\t\t\tthis.loadingIndicator.finishedLoadingProject((event as Proto.ProjectLoadingFinishEvent).body.projectName);\n\t\t\t\treturn;\n\n\t\t\tcase EventName.createDirectoryWatcher: {\n\t\t\t\tconst fpath = (event.body as Proto.CreateDirectoryWatcherEventBody).path;\n\t\t\t\tif (fpath.startsWith(inMemoryResourcePrefix)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (process.platform === 'darwin' && fpath === path.join(homedir(), 'Library')) {\n\t\t\t\t\t// ignore directory watch requests on ~/Library\n\t\t\t\t\t// until microsoft/TypeScript#59831 is resolved\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.createFileSystemWatcher(\n\t\t\t\t\t(event.body as Proto.CreateDirectoryWatcherEventBody).id,\n\t\t\t\t\tnew vscode.RelativePattern(\n\t\t\t\t\t\tvscode.Uri.file(fpath),\n\t\t\t\t\t\t(event.body as Proto.CreateDirectoryWatcherEventBody).recursive ? '**' : '*'\n\t\t\t\t\t),\n\t\t\t\t\t(event.body as Proto.CreateDirectoryWatcherEventBody).ignoreUpdate\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcase EventName.createFileWatcher: {\n\t\t\t\tconst path = (event.body as Proto.CreateFileWatcherEventBody).path;\n\t\t\t\tif (path.startsWith(inMemoryResourcePrefix)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.createFileSystemWatcher(\n\t\t\t\t\t(event.body as Proto.CreateFileWatcherEventBody).id,\n\t\t\t\t\tnew vscode.RelativePattern(\n\t\t\t\t\t\tvscode.Uri.file(path),\n\t\t\t\t\t\t'*'\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcase EventName.closeFileWatcher:\n\t\t\t\tthis.closeFileSystemWatcher(event.body.id);\n\t\t\t\treturn;\n\n\t\t\tcase EventName.requestCompleted: {\n\t\t\t\tconst diagnosticsDuration = (event.body as Proto.RequestCompletedEventBody).performanceData?.diagnosticsDuration;\n\t\t\t\tif (diagnosticsDuration) {\n\t\t\t\t\tthis.diagnosticsManager.logDiagnosticsPerformanceTelemetry(\n\t\t\t\t\t\tdiagnosticsDuration.map(fileData => {\n\t\t\t\t\t\t\tconst resource = this.toResource(fileData.file);\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...fileData,\n\t\t\t\t\t\t\t\tfileLineCount: this.bufferSyncSupport.lineCount(resource),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate scheduleExecuteWatchChangeRequest() {\n\t\tif (!this.watchChangeTimeout) {\n\t\t\tthis.watchChangeTimeout = setTimeout(() => {\n\t\t\t\tthis.watchChangeTimeout = undefined;\n\t\t\t\tconst allEvents = Array.from(this.watchEvents, ([id, event]) => ({\n\t\t\t\t\tid,\n\t\t\t\t\tupdated: event.updated && Array.from(event.updated),\n\t\t\t\t\tcreated: event.created && Array.from(event.created),\n\t\t\t\t\tdeleted: event.deleted && Array.from(event.deleted)\n\t\t\t\t}));\n\t\t\t\tthis.watchEvents.clear();\n\t\t\t\tthis.executeWithoutWaitingForResponse('watchChange', allEvents);\n\t\t\t}, 100); /* aggregate events over 100ms to reduce client<->server IPC overhead */\n\t\t}\n\t}\n\n\tprivate addWatchEvent(id: number, eventType: keyof WatchEvent, path: string) {\n\t\tlet event = this.watchEvents.get(id);\n\t\tconst removeEvent = (typeOfEventToRemove: keyof WatchEvent) => {\n\t\t\tif (event?.[typeOfEventToRemove]?.delete(path) && event[typeOfEventToRemove].size === 0) {\n\t\t\t\tevent[typeOfEventToRemove] = undefined;\n\t\t\t}\n\t\t};\n\t\tconst aggregateEvent = () => {\n\t\t\tif (!event) {\n\t\t\t\tthis.watchEvents.set(id, event = {});\n\t\t\t}\n\t\t\t(event[eventType] ??= new Set()).add(path);\n\t\t};\n\t\tswitch (eventType) {\n\t\t\tcase 'created':\n\t\t\t\tremoveEvent('deleted');\n\t\t\t\tremoveEvent('updated');\n\t\t\t\taggregateEvent();\n\t\t\t\tbreak;\n\t\t\tcase 'deleted':\n\t\t\t\tremoveEvent('created');\n\t\t\t\tremoveEvent('updated');\n\t\t\t\taggregateEvent();\n\t\t\t\tbreak;\n\t\t\tcase 'updated':\n\t\t\t\tif (event?.created?.has(path)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tremoveEvent('deleted');\n\t\t\t\taggregateEvent();\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.scheduleExecuteWatchChangeRequest();\n\t}\n\n\tprivate createFileSystemWatcher(\n\t\tid: number,\n\t\tpattern: vscode.RelativePattern,\n\t\tignoreChangeEvents?: boolean,\n\t) {\n\t\tconst disposable = new DisposableStore();\n\t\tconst watcher = disposable.add(vscode.workspace.createFileSystemWatcher(pattern, undefined, ignoreChangeEvents));\n\t\tdisposable.add(watcher.onDidChange(changeFile =>\n\t\t\tthis.addWatchEvent(id, 'updated', changeFile.fsPath)\n\t\t));\n\t\tdisposable.add(watcher.onDidCreate(createFile =>\n\t\t\tthis.addWatchEvent(id, 'created', createFile.fsPath)\n\t\t));\n\t\tdisposable.add(watcher.onDidDelete(deletedFile =>\n\t\t\tthis.addWatchEvent(id, 'deleted', deletedFile.fsPath)\n\t\t));\n\t\tdisposable.add({\n\t\t\tdispose: () => {\n\t\t\t\tthis.watchEvents.delete(id);\n\t\t\t\tthis.watches.delete(id);\n\t\t\t}\n\t\t});\n\n\t\tif (this.watches.has(id)) {\n\t\t\tthis.closeFileSystemWatcher(id);\n\t\t}\n\t\tthis.watches.set(id, disposable);\n\t}\n\n\tprivate closeFileSystemWatcher(id: number) {\n\t\tconst existing = this.watches.get(id);\n\t\texisting?.dispose();\n\t}\n\n\tprivate dispatchTelemetryEvent(telemetryData: Proto.TelemetryEventBody): void {\n\t\tconst properties: { [key: string]: string } = Object.create(null);\n\t\tswitch (telemetryData.telemetryEventName) {\n\t\t\tcase 'typingsInstalled': {\n\t\t\t\tconst typingsInstalledPayload: Proto.TypingsInstalledTelemetryEventPayload = (telemetryData.payload as Proto.TypingsInstalledTelemetryEventPayload);\n\t\t\t\tproperties['installedPackages'] = typingsInstalledPayload.installedPackages;\n\n\t\t\t\tif (typeof typingsInstalledPayload.installSuccess === 'boolean') {\n\t\t\t\t\tproperties['installSuccess'] = typingsInstalledPayload.installSuccess.toString();\n\t\t\t\t}\n\t\t\t\tif (typeof typingsInstalledPayload.typingsInstallerVersion === 'string') {\n\t\t\t\t\tproperties['typingsInstallerVersion'] = typingsInstalledPayload.typingsInstallerVersion;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tconst payload = telemetryData.payload;\n\t\t\t\tif (payload) {\n\t\t\t\t\tObject.keys(payload).forEach((key) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (payload.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tproperties[key] = typeof payload[key] === 'string' ? payload[key] : JSON.stringify(payload[key]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// noop\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Add plugin data here\n\t\tif (telemetryData.telemetryEventName === 'projectInfo') {\n\t\t\tif (this.serverState.type === ServerState.Type.Running) {\n\t\t\t\tthis.serverState.updateTsserverVersion(properties['version']);\n\t\t\t}\n\t\t}\n\n\t\t/* __GDPR__\n\t\t\t\"typingsInstalled\" : {\n\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\"installedPackages\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"installSuccess\": { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" },\n\t\t\t\t\"typingsInstallerVersion\": { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" },\n\t\t\t\t\"${include}\": [\n\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t]\n\t\t\t}\n\t\t*/\n\t\t// __GDPR__COMMENT__: Other events are defined by TypeScript.\n\t\tthis.telemetryReporter.logTelemetry(telemetryData.telemetryEventName, properties);\n\t}\n\n\tprivate configurePlugin(pluginName: string, configuration: {}): any {\n\t\tthis.executeWithoutWaitingForResponse('configurePlugin', { pluginName, configuration });\n\t}\n}\n\nfunction getDiagnosticsKind(event: Proto.Event) {\n\tswitch (event.event) {\n\t\tcase 'syntaxDiag': return DiagnosticKind.Syntax;\n\t\tcase 'semanticDiag': return DiagnosticKind.Semantic;\n\t\tcase 'suggestionDiag': return DiagnosticKind.Suggestion;\n\t\tcase 'regionSemanticDiag': return DiagnosticKind.RegionSemantic;\n\t}\n\tthrow new Error('Unknown dignostics kind');\n}\n\nclass ServerInitializingIndicator extends Disposable {\n\n\tprivate _task?: { project: string; resolve: () => void };\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic reset(): void {\n\t\tif (this._task) {\n\t\t\tthis._task.resolve();\n\t\t\tthis._task = undefined;\n\t\t}\n\t}\n\n\t/**\n\t * Signal that a project has started loading.\n\t */\n\tpublic startedLoadingProject(projectName: string): void {\n\t\t// TS projects are loaded sequentially. Cancel existing task because it should always be resolved before\n\t\t// the incoming project loading task is.\n\t\tthis.reset();\n\n\t\tconst projectDisplayName = this.getProjectDisplayName(projectName);\n\n\t\tvscode.window.withProgress({\n\t\t\tlocation: vscode.ProgressLocation.Window,\n\t\t\ttitle: vscode.l10n.t(\"Initializing '{0}'\", projectDisplayName),\n\t\t}, () => new Promise<void>(resolve => {\n\t\t\tthis._task = { project: projectName, resolve };\n\t\t}));\n\t}\n\n\tprivate getProjectDisplayName(projectName: string): string {\n\t\tconst projectUri = this.client.toResource(projectName);\n\t\tconst relPath = vscode.workspace.asRelativePath(projectUri);\n\n\t\tconst maxDisplayLength = 60;\n\t\tif (relPath.length > maxDisplayLength) {\n\t\t\treturn '...' + relPath.slice(-maxDisplayLength);\n\t\t}\n\n\t\treturn relPath;\n\t}\n\n\tpublic startedLoadingFile(fileName: string, task: Promise<unknown>): void {\n\t\tif (!this._task) {\n\t\t\tvscode.window.withProgress({\n\t\t\t\tlocation: vscode.ProgressLocation.Window,\n\t\t\t\ttitle: vscode.l10n.t(\"Analyzing '{0}' and its dependencies\", path.basename(fileName)),\n\t\t\t}, () => task);\n\t\t}\n\t}\n\n\tpublic finishedLoadingProject(projectName: string): void {\n\t\tif (this._task && this._task.project === projectName) {\n\t\t\tthis._task.resolve();\n\t\t\tthis._task = undefined;\n\t\t}\n\t}\n}\n","const SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ral_1 = __importDefault(require(\"../common/ral\"));\nconst connection_1 = require(\"./connection\");\n// In Browser environments we can only encode / decode utf-8\nconst encoder = new TextEncoder();\nconst decoder = new TextDecoder();\nclass TestServiceConnection extends connection_1.ServiceConnection {\n    constructor(script, testCase) {\n        const url = testCase !== undefined ? `${script}?toRun=${testCase}` : script;\n        const worker = new Worker(url);\n        super(worker);\n        this.worker = worker;\n    }\n    terminate() {\n        this.worker.terminate();\n        return Promise.resolve(0);\n    }\n}\nconst _ril = Object.freeze({\n    type: ral_1.default.Type.Browser,\n    TextEncoder: Object.freeze({\n        create(encoding = 'utf-8') {\n            return encoder;\n        }\n    }),\n    TextDecoder: Object.freeze({\n        create(encoding = 'utf-8') {\n            return decoder;\n        }\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setTimeout(callback, 0, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        },\n    }),\n    $testing: Object.freeze({\n        ClientConnection: Object.freeze({\n            create() {\n                return new connection_1.ClientConnection(self);\n            }\n        }),\n        ServiceConnection: Object.freeze({\n            create(script, testCase) {\n                return new TestServiceConnection(script, testCase);\n            }\n        }),\n        get testCase() {\n            const location = self.location;\n            const search = location.search;\n            return search.substring('?toRun='.length);\n        }\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        ral_1.default.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n//# sourceMappingURL=ril.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Cancellation } from '@vscode/sync-api-common/lib/common/messageCancellation';\nimport * as vscode from 'vscode';\nimport { TypeScriptServiceConfiguration } from '../configuration/configuration';\nimport { TelemetryReporter } from '../logging/telemetry';\nimport Tracer from '../logging/tracer';\nimport { CallbackMap, type CallbackItem } from '../tsServer/callbackMap';\nimport { RequestItem, RequestQueue, RequestQueueingType } from '../tsServer/requestQueue';\nimport { TypeScriptServerError } from '../tsServer/serverError';\nimport { ServerResponse, ServerType, TypeScriptRequests } from '../typescriptService';\nimport { Disposable } from '../utils/dispose';\nimport { isWebAndHasSharedArrayBuffers } from '../utils/platform';\nimport { OngoingRequestCanceller } from './cancellation';\nimport type * as Proto from './protocol/protocol';\nimport { EventName } from './protocol/protocol.const';\nimport { TypeScriptVersionManager } from './versionManager';\nimport { TypeScriptVersion } from './versionProvider';\nimport { NodeVersionManager } from './nodeManager';\n\nexport enum ExecutionTarget {\n\tSemantic,\n\tSyntax\n}\n\nexport interface TypeScriptServerExitEvent {\n\treadonly code: number | null;\n\treadonly signal: string | null;\n}\n\nexport type TsServerLog =\n\t{ readonly type: 'file'; readonly uri: vscode.Uri } |\n\t{ readonly type: 'output'; readonly output: vscode.OutputChannel };\n\nexport interface ITypeScriptServer {\n\treadonly onEvent: vscode.Event<Proto.Event>;\n\treadonly onExit: vscode.Event<TypeScriptServerExitEvent>;\n\treadonly onError: vscode.Event<any>;\n\n\treadonly tsServerLog: TsServerLog | undefined;\n\n\tkill(): void;\n\n\t/**\n\t * @return A list of all execute requests. If there are multiple entries, the first item is the primary\n\t * request while the rest are secondary ones.\n\t */\n\texecuteImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean; token?: vscode.CancellationToken; expectsResult: boolean; lowPriority?: boolean; executionTarget?: ExecutionTarget }): Array<Promise<ServerResponse.Response<Proto.Response>> | undefined>;\n\n\tdispose(): void;\n}\n\nexport interface TsServerDelegate {\n\tonFatalError(command: string, error: Error): void;\n}\n\nexport const enum TsServerProcessKind {\n\tMain = 'main',\n\tSyntax = 'syntax',\n\tSemantic = 'semantic',\n\tDiagnostics = 'diagnostics'\n}\n\nexport interface TsServerProcessFactory {\n\tfork(\n\t\tversion: TypeScriptVersion,\n\t\targs: readonly string[],\n\t\tkind: TsServerProcessKind,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\tversionManager: TypeScriptVersionManager,\n\t\tnodeVersionManager: NodeVersionManager,\n\t\ttsServerLog: TsServerLog | undefined,\n\t): TsServerProcess;\n}\n\nexport interface TsServerProcess {\n\twrite(serverRequest: Proto.Request): void;\n\n\tonData(handler: (data: Proto.Response) => void): void;\n\tonExit(handler: (code: number | null, signal: string | null) => void): void;\n\tonError(handler: (error: Error) => void): void;\n\n\tkill(): void;\n}\n\nexport class SingleTsServer extends Disposable implements ITypeScriptServer {\n\tprivate readonly _requestQueue = new RequestQueue();\n\tprivate readonly _callbacks = new CallbackMap<Proto.Response>();\n\tprivate readonly _pendingResponses = new Set<number>();\n\n\tconstructor(\n\t\tprivate readonly _serverId: string,\n\t\tprivate readonly _serverSource: ServerType,\n\t\tprivate readonly _process: TsServerProcess,\n\t\tprivate readonly _tsServerLog: TsServerLog | undefined,\n\t\tprivate readonly _requestCanceller: OngoingRequestCanceller,\n\t\tprivate readonly _version: TypeScriptVersion,\n\t\tprivate readonly _telemetryReporter: TelemetryReporter,\n\t\tprivate readonly _tracer: Tracer,\n\t) {\n\t\tsuper();\n\n\t\tthis._process.onData(msg => {\n\t\t\tthis.dispatchMessage(msg);\n\t\t});\n\n\t\tthis._process.onExit((code, signal) => {\n\t\t\tthis._onExit.fire({ code, signal });\n\t\t\tthis._callbacks.destroy('server exited');\n\t\t});\n\n\t\tthis._process.onError(error => {\n\t\t\tthis._onError.fire(error);\n\t\t\tthis._callbacks.destroy('server errored');\n\t\t});\n\t}\n\n\tprivate readonly _onEvent = this._register(new vscode.EventEmitter<Proto.Event>());\n\tpublic readonly onEvent = this._onEvent.event;\n\n\tprivate readonly _onExit = this._register(new vscode.EventEmitter<TypeScriptServerExitEvent>());\n\tpublic readonly onExit = this._onExit.event;\n\n\tprivate readonly _onError = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onError = this._onError.event;\n\n\tpublic get tsServerLog() { return this._tsServerLog; }\n\n\tprivate write(serverRequest: Proto.Request) {\n\t\tthis._process.write(serverRequest);\n\t}\n\n\tpublic override dispose() {\n\t\tsuper.dispose();\n\t\tthis._callbacks.destroy('server disposed');\n\t\tthis._pendingResponses.clear();\n\t}\n\n\tpublic kill() {\n\t\tthis._process.kill();\n\t}\n\n\tprivate dispatchMessage(message: Proto.Message) {\n\t\ttry {\n\t\t\tswitch (message.type) {\n\t\t\t\tcase 'response':\n\t\t\t\t\tif (this._serverSource) {\n\t\t\t\t\t\tthis.dispatchResponse({\n\t\t\t\t\t\t\t...(message as Proto.Response),\n\t\t\t\t\t\t\t_serverType: this._serverSource\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.dispatchResponse(message as Proto.Response);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'event': {\n\t\t\t\t\tconst event = message as Proto.Event;\n\t\t\t\t\tif (event.event === 'requestCompleted') {\n\t\t\t\t\t\tconst seq = (event as Proto.RequestCompletedEvent).body.request_seq;\n\t\t\t\t\t\tconst callback = this._callbacks.fetch(seq);\n\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\tthis._tracer.traceRequestCompleted(this._serverId, 'requestCompleted', seq, callback);\n\t\t\t\t\t\t\tcallback.onSuccess(undefined);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ((event as Proto.RequestCompletedEvent).body.performanceData) {\n\t\t\t\t\t\t\tthis._onEvent.fire(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._tracer.traceEvent(this._serverId, event);\n\t\t\t\t\t\tthis._onEvent.fire(event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(`Unknown message type ${message.type} received`);\n\t\t\t}\n\t\t} finally {\n\t\t\tthis.sendNextRequests();\n\t\t}\n\t}\n\n\tprivate tryCancelRequest(request: Proto.Request, command: string): boolean {\n\t\tconst seq = request.seq;\n\t\tconst callback = this._callbacks.peek(seq);\n\t\tif (callback?.traceId !== undefined) {\n\t\t\tthis._telemetryReporter.logTraceEvent('TSServer.tryCancelRequest', callback.traceId, JSON.stringify({ command, cancelled: true }));\n\t\t}\n\t\ttry {\n\t\t\tif (this._requestQueue.tryDeletePendingRequest(seq)) {\n\t\t\t\tthis.logTrace(`Canceled request with sequence number ${seq}`);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (this._requestCanceller.tryCancelOngoingRequest(seq)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tthis.logTrace(`Tried to cancel request with sequence number ${seq}. But request got already delivered.`);\n\t\t\treturn false;\n\t\t} finally {\n\t\t\tconst callback = this.fetchCallback(seq);\n\t\t\tcallback?.onSuccess(new ServerResponse.Cancelled(`Cancelled request ${seq} - ${command}`));\n\t\t}\n\t}\n\n\tprivate dispatchResponse(response: Proto.Response) {\n\t\tconst callback = this.fetchCallback(response.request_seq);\n\t\tif (!callback) {\n\t\t\treturn;\n\t\t}\n\t\tif (callback.traceId !== undefined) {\n\t\t\tthis._telemetryReporter.logTraceEvent('TSServerRequest.dispatchResponse', callback.traceId, JSON.stringify({ command: response.command, success: response.success, performanceData: response.performanceData }));\n\t\t}\n\t\tthis._tracer.traceResponse(this._serverId, response, callback);\n\t\tif (response.success) {\n\t\t\tcallback.onSuccess(response);\n\t\t} else if (response.message === 'No content available.') {\n\t\t\t// Special case where response itself is successful but there is not any data to return.\n\t\t\tcallback.onSuccess(ServerResponse.NoContent);\n\t\t} else {\n\t\t\tcallback.onError(TypeScriptServerError.create(this._serverId, this._version, response));\n\t\t}\n\t}\n\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: unknown, executeInfo: { isAsync: boolean; token?: vscode.CancellationToken; expectsResult: boolean; lowPriority?: boolean; executionTarget?: ExecutionTarget }): Array<Promise<ServerResponse.Response<Proto.Response>> | undefined> {\n\t\tconst request = this._requestQueue.createRequest(command, args);\n\t\tconst requestInfo: RequestItem = {\n\t\t\trequest,\n\t\t\texpectsResponse: executeInfo.expectsResult,\n\t\t\tisAsync: executeInfo.isAsync,\n\t\t\tqueueingType: SingleTsServer.getQueueingType(command, executeInfo.lowPriority)\n\t\t};\n\t\tlet result: Promise<ServerResponse.Response<Proto.Response>> | undefined;\n\t\tif (executeInfo.expectsResult) {\n\t\t\tresult = new Promise<ServerResponse.Response<Proto.Response>>((resolve, reject) => {\n\t\t\t\tconst item: CallbackItem<ServerResponse.Response<Proto.Response> | undefined> = typeof request.arguments?.$traceId === 'string'\n\t\t\t\t\t? {\n\t\t\t\t\t\tonSuccess: resolve as () => ServerResponse.Response<Proto.Response> | undefined,\n\t\t\t\t\t\tonError: reject,\n\t\t\t\t\t\tqueuingStartTime: Date.now(),\n\t\t\t\t\t\tisAsync: executeInfo.isAsync,\n\t\t\t\t\t\tcommand: request.command,\n\t\t\t\t\t\ttraceId: request.arguments.$traceId\n\t\t\t\t\t} : {\n\t\t\t\t\t\tonSuccess: resolve as () => ServerResponse.Response<Proto.Response> | undefined,\n\t\t\t\t\t\tonError: reject,\n\t\t\t\t\t\tqueuingStartTime: Date.now(),\n\t\t\t\t\t\tisAsync: executeInfo.isAsync,\n\t\t\t\t\t\tcommand: request.command,\n\t\t\t\t\t};\n\t\t\t\tthis._callbacks.add(request.seq, item, executeInfo.isAsync);\n\t\t\t\tif (executeInfo.token) {\n\n\t\t\t\t\tconst cancelViaSAB = isWebAndHasSharedArrayBuffers()\n\t\t\t\t\t\t? Cancellation.addData(request)\n\t\t\t\t\t\t: undefined;\n\n\t\t\t\t\texecuteInfo.token.onCancellationRequested(() => {\n\t\t\t\t\t\tcancelViaSAB?.();\n\t\t\t\t\t\tthis.tryCancelRequest(request, command);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}).catch((err: Error) => {\n\t\t\t\tif (err instanceof TypeScriptServerError) {\n\t\t\t\t\tif (!executeInfo.token?.isCancellationRequested) {\n\t\t\t\t\t\t/* __GDPR__\n\t\t\t\t\t\t\t\"languageServiceErrorResponse\" : {\n\t\t\t\t\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\t\t\t\t\"${include}\": [\n\t\t\t\t\t\t\t\t\t\"${TypeScriptCommonProperties}\",\n\t\t\t\t\t\t\t\t\t\"${TypeScriptRequestErrorProperties}\"\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tthis._telemetryReporter.logTelemetry('languageServiceErrorResponse', err.telemetry);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthrow err;\n\t\t\t});\n\t\t}\n\n\t\tthis._requestQueue.enqueue(requestInfo);\n\t\tif (args && typeof (args as any).$traceId === 'string') {\n\t\t\tconst queueLength = this._requestQueue.length - 1;\n\t\t\tconst pendingResponses = this._pendingResponses.size;\n\t\t\tconst data: { command: string; queueLength: number; pendingResponses: number; queuedCommands?: string[]; pendingCommands?: string[] } = {\n\t\t\t\tcommand: request.command,\n\t\t\t\tqueueLength,\n\t\t\t\tpendingResponses\n\t\t\t};\n\t\t\tif (queueLength > 0) {\n\t\t\t\tdata.queuedCommands = this._requestQueue.getQueuedCommands(true);\n\t\t\t}\n\t\t\tif (pendingResponses > 0) {\n\t\t\t\tdata.pendingCommands = this.getPendingCommands();\n\t\t\t}\n\n\t\t\tthis._telemetryReporter.logTraceEvent('TSServer.enqueueRequest', (args as any).$traceId, JSON.stringify(data));\n\t\t}\n\t\tthis.sendNextRequests();\n\n\t\treturn [result];\n\t}\n\n\tprivate getPendingCommands(): string[] {\n\t\tconst result: string[] = [];\n\t\tfor (const seq of this._pendingResponses) {\n\t\t\tconst callback = this._callbacks.peek(seq);\n\t\t\tif (typeof callback?.command !== 'string') {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tresult.push(callback.command);\n\t\t\tif (result.length >= 5) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate sendNextRequests(): void {\n\t\twhile (this._pendingResponses.size === 0 && this._requestQueue.length > 0) {\n\t\t\tconst item = this._requestQueue.dequeue();\n\t\t\tif (item) {\n\t\t\t\tthis.sendRequest(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate sendRequest(requestItem: RequestItem): void {\n\t\tconst serverRequest = requestItem.request;\n\t\tthis._tracer.traceRequest(this._serverId, serverRequest, requestItem.expectsResponse, this._requestQueue.length);\n\n\t\tif (requestItem.expectsResponse && !requestItem.isAsync) {\n\t\t\tthis._pendingResponses.add(requestItem.request.seq);\n\t\t}\n\n\t\ttry {\n\t\t\tthis.write(serverRequest);\n\t\t\tif (typeof serverRequest.arguments?.$traceId === 'string') {\n\t\t\t\tthis._telemetryReporter.logTraceEvent('TSServer.sendRequest', serverRequest.arguments.$traceId, JSON.stringify({ command: serverRequest.command }));\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconst callback = this.fetchCallback(serverRequest.seq);\n\t\t\tcallback?.onError(err);\n\t\t}\n\t}\n\n\tprivate fetchCallback(seq: number) {\n\t\tconst callback = this._callbacks.fetch(seq);\n\t\tif (!callback) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis._pendingResponses.delete(seq);\n\t\treturn callback;\n\t}\n\n\tprivate logTrace(message: string) {\n\t\tthis._tracer.trace(this._serverId, message);\n\t}\n\n\tprivate static readonly fenceCommands = new Set(['change', 'close', 'open', 'updateOpen']);\n\n\tprivate static getQueueingType(\n\t\tcommand: string,\n\t\tlowPriority?: boolean\n\t): RequestQueueingType {\n\t\tif (SingleTsServer.fenceCommands.has(command)) {\n\t\t\treturn RequestQueueingType.Fence;\n\t\t}\n\t\treturn lowPriority ? RequestQueueingType.LowPriority : RequestQueueingType.Normal;\n\t}\n}\n\n\ninterface ExecuteInfo {\n\treadonly isAsync: boolean;\n\treadonly token?: vscode.CancellationToken;\n\treadonly expectsResult: boolean;\n\treadonly lowPriority?: boolean;\n\treadonly executionTarget?: ExecutionTarget;\n}\n\nclass RequestRouter {\n\n\tprivate static readonly sharedCommands = new Set<keyof TypeScriptRequests>([\n\t\t'change',\n\t\t'close',\n\t\t'open',\n\t\t'updateOpen',\n\t\t'configure',\n\t]);\n\n\tconstructor(\n\t\tprivate readonly servers: ReadonlyArray<{\n\t\t\treadonly server: ITypeScriptServer;\n\t\t\tcanRun?(command: keyof TypeScriptRequests, executeInfo: ExecuteInfo): boolean;\n\t\t}>,\n\t\tprivate readonly delegate: TsServerDelegate,\n\t) { }\n\n\tpublic execute(\n\t\tcommand: keyof TypeScriptRequests,\n\t\targs: any,\n\t\texecuteInfo: ExecuteInfo,\n\t): Array<Promise<ServerResponse.Response<Proto.Response>> | undefined> {\n\t\tif (RequestRouter.sharedCommands.has(command) && typeof executeInfo.executionTarget === 'undefined') {\n\t\t\t// Dispatch shared commands to all servers but use first one as the primary response\n\n\t\t\tconst requestStates: RequestState.State[] = this.servers.map(() => RequestState.Unresolved);\n\n\t\t\t// Also make sure we never cancel requests to just one server\n\t\t\tlet token: vscode.CancellationToken | undefined = undefined;\n\t\t\tif (executeInfo.token) {\n\t\t\t\tconst source = new vscode.CancellationTokenSource();\n\t\t\t\texecuteInfo.token.onCancellationRequested(() => {\n\t\t\t\t\tif (requestStates.some(state => state === RequestState.Resolved)) {\n\t\t\t\t\t\t// Don't cancel.\n\t\t\t\t\t\t// One of the servers completed this request so we don't want to leave the other\n\t\t\t\t\t\t// in a different state.\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsource.cancel();\n\t\t\t\t});\n\t\t\t\ttoken = source.token;\n\t\t\t}\n\n\t\t\tconst allRequests: Array<Promise<ServerResponse.Response<Proto.Response>> | undefined> = [];\n\n\t\t\tfor (let serverIndex = 0; serverIndex < this.servers.length; ++serverIndex) {\n\t\t\t\tconst server = this.servers[serverIndex].server;\n\n\t\t\t\tconst request = server.executeImpl(command, args, { ...executeInfo, token })[0];\n\t\t\t\tallRequests.push(request);\n\t\t\t\tif (request) {\n\t\t\t\t\trequest\n\t\t\t\t\t\t.then(result => {\n\t\t\t\t\t\t\trequestStates[serverIndex] = RequestState.Resolved;\n\t\t\t\t\t\t\tconst erroredRequest = requestStates.find(state => state.type === RequestState.Type.Errored) as RequestState.Errored | undefined;\n\t\t\t\t\t\t\tif (erroredRequest) {\n\t\t\t\t\t\t\t\t// We've gone out of sync\n\t\t\t\t\t\t\t\tthis.delegate.onFatalError(command, erroredRequest.err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}, err => {\n\t\t\t\t\t\t\trequestStates[serverIndex] = new RequestState.Errored(err);\n\t\t\t\t\t\t\tif (requestStates.some(state => state === RequestState.Resolved)) {\n\t\t\t\t\t\t\t\t// We've gone out of sync\n\t\t\t\t\t\t\t\tthis.delegate.onFatalError(command, err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn allRequests;\n\t\t}\n\n\t\tfor (const { canRun, server } of this.servers) {\n\t\t\tif (!canRun || canRun(command, executeInfo)) {\n\t\t\t\treturn server.executeImpl(command, args, executeInfo);\n\t\t\t}\n\t\t}\n\n\t\tthrow new Error(`Could not find server for command: '${command}'`);\n\t}\n}\n\nexport class GetErrRoutingTsServer extends Disposable implements ITypeScriptServer {\n\n\tprivate static readonly diagnosticEvents = new Set<string>([\n\t\tEventName.configFileDiag,\n\t\tEventName.syntaxDiag,\n\t\tEventName.semanticDiag,\n\t\tEventName.suggestionDiag\n\t]);\n\n\tprivate readonly getErrServer: ITypeScriptServer;\n\tprivate readonly mainServer: ITypeScriptServer;\n\tprivate readonly router: RequestRouter;\n\n\tpublic constructor(\n\t\tservers: { getErr: ITypeScriptServer; primary: ITypeScriptServer },\n\t\tdelegate: TsServerDelegate,\n\t) {\n\t\tsuper();\n\n\t\tthis.getErrServer = servers.getErr;\n\t\tthis.mainServer = servers.primary;\n\n\t\tthis.router = new RequestRouter(\n\t\t\t[\n\t\t\t\t{ server: this.getErrServer, canRun: (command) => ['geterr', 'geterrForProject'].includes(command) },\n\t\t\t\t{ server: this.mainServer, canRun: undefined /* gets all other commands */ }\n\t\t\t],\n\t\t\tdelegate);\n\n\t\tthis._register(this.getErrServer.onEvent(e => {\n\t\t\tif (GetErrRoutingTsServer.diagnosticEvents.has(e.event)) {\n\t\t\t\tthis._onEvent.fire(e);\n\t\t\t}\n\t\t\t// Ignore all other events\n\t\t}));\n\t\tthis._register(this.mainServer.onEvent(e => {\n\t\t\tif (!GetErrRoutingTsServer.diagnosticEvents.has(e.event)) {\n\t\t\t\tthis._onEvent.fire(e);\n\t\t\t}\n\t\t\t// Ignore all other events\n\t\t}));\n\n\t\tthis._register(this.getErrServer.onError(e => this._onError.fire(e)));\n\t\tthis._register(this.mainServer.onError(e => this._onError.fire(e)));\n\n\t\tthis._register(this.mainServer.onExit(e => {\n\t\t\tthis._onExit.fire(e);\n\t\t\tthis.getErrServer.kill();\n\t\t}));\n\t}\n\n\tprivate readonly _onEvent = this._register(new vscode.EventEmitter<Proto.Event>());\n\tpublic readonly onEvent = this._onEvent.event;\n\n\tprivate readonly _onExit = this._register(new vscode.EventEmitter<TypeScriptServerExitEvent>());\n\tpublic readonly onExit = this._onExit.event;\n\n\tprivate readonly _onError = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onError = this._onError.event;\n\n\tpublic get tsServerLog() { return this.mainServer.tsServerLog; }\n\n\tpublic kill(): void {\n\t\tthis.getErrServer.kill();\n\t\tthis.mainServer.kill();\n\t}\n\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean; token?: vscode.CancellationToken; expectsResult: boolean; lowPriority?: boolean; executionTarget?: ExecutionTarget }): Array<Promise<ServerResponse.Response<Proto.Response>> | undefined> {\n\t\treturn this.router.execute(command, args, executeInfo);\n\t}\n}\n\n\nexport class SyntaxRoutingTsServer extends Disposable implements ITypeScriptServer {\n\n\t/**\n\t * Commands that should always be run on the syntax server.\n\t */\n\tprivate static readonly syntaxAlwaysCommands = new Set<keyof TypeScriptRequests>([\n\t\t'navtree',\n\t\t'getOutliningSpans',\n\t\t'jsxClosingTag',\n\t\t'selectionRange',\n\t\t'format',\n\t\t'formatonkey',\n\t\t'docCommentTemplate',\n\t\t'linkedEditingRange'\n\t]);\n\n\t/**\n\t * Commands that should always be run on the semantic server.\n\t */\n\tprivate static readonly semanticCommands = new Set<keyof TypeScriptRequests>([\n\t\t'geterr',\n\t\t'geterrForProject',\n\t\t'projectInfo',\n\t\t'configurePlugin',\n\t]);\n\n\t/**\n\t * Commands that can be run on the syntax server but would benefit from being upgraded to the semantic server.\n\t */\n\tprivate static readonly syntaxAllowedCommands = new Set<keyof TypeScriptRequests>([\n\t\t'completions',\n\t\t'completionEntryDetails',\n\t\t'completionInfo',\n\t\t'definition',\n\t\t'definitionAndBoundSpan',\n\t\t'documentHighlights',\n\t\t'implementation',\n\t\t'navto',\n\t\t'quickinfo',\n\t\t'references',\n\t\t'rename',\n\t\t'signatureHelp',\n\t]);\n\n\tprivate readonly syntaxServer: ITypeScriptServer;\n\tprivate readonly semanticServer: ITypeScriptServer;\n\tprivate readonly router: RequestRouter;\n\n\tprivate _projectLoading = true;\n\n\tpublic constructor(\n\t\tservers: { syntax: ITypeScriptServer; semantic: ITypeScriptServer },\n\t\tdelegate: TsServerDelegate,\n\t\tenableDynamicRouting: boolean,\n\t) {\n\t\tsuper();\n\n\t\tthis.syntaxServer = servers.syntax;\n\t\tthis.semanticServer = servers.semantic;\n\n\t\tthis.router = new RequestRouter(\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tserver: this.syntaxServer,\n\t\t\t\t\tcanRun: (command, execInfo) => {\n\t\t\t\t\t\tswitch (execInfo.executionTarget) {\n\t\t\t\t\t\t\tcase ExecutionTarget.Semantic: return false;\n\t\t\t\t\t\t\tcase ExecutionTarget.Syntax: return true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (SyntaxRoutingTsServer.syntaxAlwaysCommands.has(command)) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (SyntaxRoutingTsServer.semanticCommands.has(command)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (enableDynamicRouting && this.projectLoading && SyntaxRoutingTsServer.syntaxAllowedCommands.has(command)) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tserver: this.semanticServer,\n\t\t\t\t\tcanRun: undefined /* gets all other commands */\n\t\t\t\t}\n\t\t\t],\n\t\t\tdelegate);\n\n\t\tthis._register(this.syntaxServer.onEvent(e => {\n\t\t\treturn this._onEvent.fire(e);\n\t\t}));\n\n\t\tthis._register(this.semanticServer.onEvent(e => {\n\t\t\tswitch (e.event) {\n\t\t\t\tcase EventName.projectLoadingStart:\n\t\t\t\t\tthis._projectLoading = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EventName.projectLoadingFinish:\n\t\t\t\tcase EventName.semanticDiag:\n\t\t\t\tcase EventName.syntaxDiag:\n\t\t\t\tcase EventName.suggestionDiag:\n\t\t\t\tcase EventName.configFileDiag:\n\t\t\t\t\tthis._projectLoading = false;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn this._onEvent.fire(e);\n\t\t}));\n\n\t\tthis._register(this.semanticServer.onExit(e => {\n\t\t\tthis._onExit.fire(e);\n\t\t\tthis.syntaxServer.kill();\n\t\t}));\n\n\t\tthis._register(this.semanticServer.onError(e => this._onError.fire(e)));\n\t}\n\n\tprivate get projectLoading() { return this._projectLoading; }\n\n\tprivate readonly _onEvent = this._register(new vscode.EventEmitter<Proto.Event>());\n\tpublic readonly onEvent = this._onEvent.event;\n\n\tprivate readonly _onExit = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onExit = this._onExit.event;\n\n\tprivate readonly _onError = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onError = this._onError.event;\n\n\tpublic get tsServerLog() { return this.semanticServer.tsServerLog; }\n\n\tpublic kill(): void {\n\t\tthis.syntaxServer.kill();\n\t\tthis.semanticServer.kill();\n\t}\n\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean; token?: vscode.CancellationToken; expectsResult: boolean; lowPriority?: boolean; executionTarget?: ExecutionTarget }): Array<Promise<ServerResponse.Response<Proto.Response>> | undefined> {\n\t\treturn this.router.execute(command, args, executeInfo);\n\t}\n}\n\nnamespace RequestState {\n\texport const enum Type { Unresolved, Resolved, Errored }\n\n\texport const Unresolved = { type: Type.Unresolved } as const;\n\n\texport const Resolved = { type: Type.Resolved } as const;\n\n\texport class Errored {\n\t\treadonly type = Type.Errored;\n\n\t\tconstructor(\n\t\t\tpublic readonly err: Error\n\t\t) { }\n\t}\n\n\texport type State = typeof Unresolved | typeof Resolved | Errored;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const variableDeclaredButNeverUsed = new Set([6196, 6133]);\nexport const propertyDeclaretedButNeverUsed = new Set([6138]);\nexport const allImportsAreUnused = new Set([6192]);\nexport const unreachableCode = new Set([7027]);\nexport const unusedLabel = new Set([7028]);\nexport const fallThroughCaseInSwitch = new Set([7029]);\nexport const notAllCodePathsReturnAValue = new Set([7030]);\nexport const incorrectlyImplementsInterface = new Set([2420]);\nexport const cannotFindName = new Set([2552, 2304]);\nexport const extendsShouldBeImplements = new Set([2689]);\nexport const asyncOnlyAllowedInAsyncFunctions = new Set([1308]);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport DefinitionProviderBase from './definitionProviderBase';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\n\nclass TypeScriptImplementationProvider extends DefinitionProviderBase implements vscode.ImplementationProvider {\n\tpublic provideImplementation(document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken): Promise<vscode.Definition | undefined> {\n\t\treturn this.getSymbolLocations('implementation', document, position, token);\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerImplementationProvider(selector.semantic,\n\t\t\tnew TypeScriptImplementationProvider(client));\n\t});\n}\n","'use strict'\nmodule.exports = function (Yallist) {\n  Yallist.prototype[Symbol.iterator] = function* () {\n    for (let walker = this.head; walker; walker = walker.next) {\n      yield walker.value\n    }\n  }\n}\n","/*! https://github.com/nevware21/ts-utils v0.11.6 */\n/*\n * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.\n * Licensed under the MIT license.\n */\n/*#__NO_SIDE_EFFECTS__*/\nfunction _pureAssign(func1, func2) {\n    return func1 || func2;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _pureRef(value, name) {\n    return value[name];\n}\n\nvar UNDEF_VALUE = undefined;\nvar NULL_VALUE = null;\nvar EMPTY = \"\";\nvar FUNCTION = \"function\";\nvar OBJECT = \"object\";\nvar PROTOTYPE = \"prototype\";\nvar __PROTO__ = \"__proto__\";\nvar UNDEFINED = \"undefined\";\nvar CONSTRUCTOR = \"constructor\";\nvar SYMBOL = \"Symbol\";\nvar POLYFILL_TAG = \"_polyfill\";\nvar LENGTH = \"length\";\nvar NAME = \"name\";\nvar CALL = \"call\";\nvar TO_STRING = \"toString\";\nvar ObjClass = ( /*#__PURE__*/_pureAssign(Object));\nvar ObjProto = ( /*#__PURE__*/_pureRef(ObjClass, PROTOTYPE));\nvar StrCls = ( /*#__PURE__*/_pureAssign(String));\nvar StrProto = ( /*#__PURE__*/_pureRef(StrCls, PROTOTYPE));\nvar MathCls = ( /*#__PURE__*/_pureAssign(Math));\nvar ArrCls = ( /*#__PURE__*/_pureAssign(Array));\nvar ArrProto = ( /*#__PURE__*/_pureRef(ArrCls, PROTOTYPE));\nvar ArrSlice = ( /*#__PURE__*/_pureRef(ArrProto, \"slice\"));\n\nfunction safe(func, argArray) {\n    try {\n        return {\n            v: func.apply(this, argArray)\n        };\n    }\n    catch (e) {\n        return { e: e };\n    }\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction safeGet(cb, defValue) {\n    var result = safe(cb);\n    return result.e ? defValue : result.v;\n}\n\nvar _primitiveTypes;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createIs(theType) {\n    return function (value) {\n        return typeof value === theType;\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createObjIs(theName) {\n    var theType = \"[object \" + theName + \"]\";\n    return function (value) {\n        return !!(value && objToString(value) === theType);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction objToString(value) {\n    return ObjProto[TO_STRING].call(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isTypeof(value, theType) {\n    return typeof value === theType;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isUndefined(value) {\n    return typeof value === UNDEFINED || value === UNDEFINED;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isStrictUndefined(arg) {\n    return !isDefined(arg);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isNullOrUndefined(value) {\n    return value === NULL_VALUE || isUndefined(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isStrictNullOrUndefined(value) {\n    return value === NULL_VALUE || !isDefined(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isDefined(arg) {\n    return !!arg || arg !== UNDEF_VALUE;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPrimitive(value) {\n    return value === NULL_VALUE || isPrimitiveType(typeof value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPrimitiveType(theType) {\n    !_primitiveTypes && (_primitiveTypes = [\"string\", \"number\", \"boolean\", UNDEFINED, \"symbol\", \"bigint\"]);\n    return !!(theType !== OBJECT && _primitiveTypes.indexOf(theType) !== -1);\n}\nvar isString = ( /*#__PURE__*/_createIs(\"string\"));\nvar isFunction = ( /*#__PURE__*/_createIs(FUNCTION));\n/*#__NO_SIDE_EFFECTS__*/\nfunction isObject(value) {\n    if (!value && isNullOrUndefined(value)) {\n        return false;\n    }\n    return !!value && typeof value === OBJECT;\n}\nvar isArray = ( /* #__PURE__*/_pureRef(ArrCls, \"isArray\"));\nvar isDate = ( /*#__PURE__*/_createObjIs(\"Date\"));\nvar isNumber = ( /*#__PURE__*/_createIs(\"number\"));\nvar isBoolean = ( /*#__PURE__*/_createIs(\"boolean\"));\nvar isRegExp = ( /*#__PURE__*/_createObjIs(\"RegExp\"));\nvar isFile = ( /*#__PURE__*/_createObjIs(\"File\"));\nvar isFormData = ( /*#__PURE__*/_createObjIs(\"FormData\"));\nvar isBlob = ( /*#__PURE__*/_createObjIs(\"Blob\"));\nvar isArrayBuffer = ( /*#__PURE__*/_createObjIs(\"ArrayBuffer\"));\nvar isError = ( /*#__PURE__*/_createObjIs(\"Error\"));\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPromiseLike(value) {\n    return !!(value && value.then && isFunction(value.then));\n}\nvar isThenable = isPromiseLike;\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPromise(value) {\n    return !!(value && value.then && value.catch && isFunction(value.then) && isFunction(value.catch));\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isNotTruthy(value) {\n    return !value || !isTruthy(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isTruthy(value) {\n    return !(!value || safeGet(function () { return !(value && (0 + value)); }, !value));\n}\n\nvar objGetOwnPropertyDescriptor = ( /* #__PURE__ */_pureRef(ObjClass, \"getOwnPropertyDescriptor\"));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction objHasOwnProperty(obj, prop) {\n    return !!obj && ObjProto.hasOwnProperty[CALL](obj, prop);\n}\n\nvar objHasOwn = ( /*#__PURE__*/_pureAssign(( /* #__PURE__ */_pureRef(ObjClass, \"hasOwn\")), polyObjHasOwn));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjHasOwn(obj, prop) {\n    return objHasOwnProperty(obj, prop) || !!objGetOwnPropertyDescriptor(obj, prop);\n}\n\nfunction objForEachKey(theObject, callbackfn, thisArg) {\n    if (theObject && isObject(theObject)) {\n        for (var prop in theObject) {\n            if (objHasOwn(theObject, prop)) {\n                if (callbackfn[CALL](thisArg || theObject, prop, theObject[prop]) === -1) {\n                    break;\n                }\n            }\n        }\n    }\n}\n\nvar propMap = {\n    e: \"enumerable\",\n    c: \"configurable\",\n    v: \"value\",\n    w: \"writable\",\n    g: \"get\",\n    s: \"set\"\n};\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createProp(value) {\n    var prop = {};\n    prop[propMap[\"c\"]] = true;\n    prop[propMap[\"e\"]] = true;\n    if (value.l) {\n        prop.get = function () { return value.l.v; };\n        var desc = objGetOwnPropertyDescriptor(value.l, \"v\");\n        if (desc && desc.set) {\n            prop.set = function (newValue) {\n                value.l.v = newValue;\n            };\n        }\n    }\n    objForEachKey(value, function (key, value) {\n        prop[propMap[key]] = isStrictUndefined(value) ? prop[propMap[key]] : value;\n    });\n    return prop;\n}\nvar objDefineProp = ( /*#__PURE__*/_pureRef(ObjClass, \"defineProperty\"));\nvar objDefineProperties = ( /*#__PURE__*/_pureRef(ObjClass, \"defineProperties\"));\nfunction objDefineGet(target, key, value, configurable, enumerable) {\n    var _a;\n    return objDefineProp(target, key, _createProp((_a = {\n            e: enumerable,\n            c: configurable\n        },\n        _a[isFunction(value) ? \"g\" : \"v\"] = value,\n        _a)));\n}\nfunction objDefineAccessors(target, prop, getProp, setProp, configurable, enumerable) {\n    var desc = {\n        e: enumerable,\n        c: configurable\n    };\n    if (getProp) {\n        desc.g = getProp;\n    }\n    if (setProp) {\n        desc.s = setProp;\n    }\n    return objDefineProp(target, prop, _createProp(desc));\n}\nfunction objDefine(target, key, propDesc) {\n    return objDefineProp(target, key, _createProp(propDesc));\n}\nfunction objDefineProps(target, propDescMap) {\n    var props = {};\n    objForEachKey(propDescMap, function (key, value) {\n        props[key] = _createProp(value);\n    });\n    return objDefineProperties(target, props);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createKeyValueMap(values, keyType, valueType, completeFn, writable) {\n    var theMap = {};\n    objForEachKey(values, function (key, value) {\n        _assignMapValue(theMap, key, keyType ? value : key, writable);\n        _assignMapValue(theMap, value, valueType ? value : key, writable);\n    });\n    return completeFn ? completeFn(theMap) : theMap;\n}\nfunction _assignMapValue(theMap, key, value, writable) {\n    objDefineProp(theMap, key, {\n        value: value,\n        enumerable: true,\n        writable: !!writable\n    });\n}\n\nvar asString = ( /* #__PURE__ */_pureAssign(StrCls));\n\nvar ERROR_TYPE = \"[object Error]\";\n/*#__NO_SIDE_EFFECTS__*/\nfunction dumpObj(object, format) {\n    var propertyValueDump = EMPTY;\n    var objType = ObjProto[TO_STRING][CALL](object);\n    if (objType === ERROR_TYPE) {\n        object = { stack: asString(object.stack), message: asString(object.message), name: asString(object.name) };\n    }\n    try {\n        propertyValueDump = JSON.stringify(object, NULL_VALUE, format ? ((typeof format === \"number\") ? format : 4) : UNDEF_VALUE);\n        propertyValueDump = (propertyValueDump ? propertyValueDump.replace(/\"(\\w+)\"\\s*:\\s{0,1}/g, \"$1: \") : NULL_VALUE) || asString(object);\n    }\n    catch (e) {\n        propertyValueDump = \" - \" + dumpObj(e, format);\n    }\n    return objType + \": \" + propertyValueDump;\n}\n\nfunction throwError(message) {\n    throw new Error(message);\n}\nfunction throwTypeError(message) {\n    throw new TypeError(message);\n}\nfunction throwRangeError(message) {\n    throw new RangeError(message);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjKeys(obj) {\n    if (!isObject(obj) || obj === NULL_VALUE) {\n        throwTypeError(\"non-object \" + dumpObj(obj));\n    }\n    var result = [];\n    for (var prop in obj) {\n        if (objHasOwn(obj, prop)) {\n            result.push(prop);\n        }\n    }\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjEntries(value) {\n    var result = [];\n    objForEachKey(value, function (key, value) {\n        result.push([key, value]);\n    });\n    return result;\n}\n\nvar _objFreeze = ( /* #__PURE__ */_pureRef(ObjClass, \"freeze\"));\nfunction _doNothing(value) {\n    return value;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _getProto(value) {\n    return value[__PROTO__] || NULL_VALUE;\n}\nvar objAssign = ( /*#__PURE__*/_pureRef(ObjClass, \"assign\"));\nvar objKeys = ( /*#__PURE__*/_pureRef(ObjClass, \"keys\"));\nfunction objDeepFreeze(value) {\n    if (_objFreeze) {\n        objForEachKey(value, function (key, value) {\n            if (isArray(value) || isObject(value)) {\n                objDeepFreeze(value);\n            }\n        });\n    }\n    return objFreeze(value);\n}\nvar objFreeze = ( /* #__PURE__*/_pureAssign(_objFreeze, _doNothing));\nvar objSeal = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(ObjClass, \"seal\")), _doNothing));\nvar objGetPrototypeOf = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(ObjClass, \"getPrototypeOf\")), _getProto));\nvar objEntries = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(ObjClass, \"entries\")), polyObjEntries));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createEnum(values) {\n    return _createKeyValueMap(values, 1 , 0 , objFreeze);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createEnumKeyMap(values) {\n    return _createKeyValueMap(values, 0 , 0 , objFreeze);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createEnumValueMap(values) {\n    return _createKeyValueMap(values, 1 , 1 , objFreeze);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createSimpleMap(values) {\n    var mapClass = {};\n    objForEachKey(values, function (key, value) {\n        _assignMapValue(mapClass, key, value[1]);\n        _assignMapValue(mapClass, value[0], value[1]);\n    });\n    return objFreeze(mapClass);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createTypeMap(values) {\n    return createSimpleMap(values);\n}\n\nvar _wellKnownSymbolMap = /*#__PURE__*/ createEnumKeyMap({\n    asyncIterator: 0 ,\n    hasInstance: 1 ,\n    isConcatSpreadable: 2 ,\n    iterator: 3 ,\n    match: 4 ,\n    matchAll: 5 ,\n    replace: 6 ,\n    search: 7 ,\n    species: 8 ,\n    split: 9 ,\n    toPrimitive: 10 ,\n    toStringTag: 11 ,\n    unscopables: 12\n});\n\nvar GLOBAL_CONFIG_KEY = \"__tsUtils$gblCfg\";\nvar _globalCfg;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _getGlobalValue() {\n    var result;\n    if (typeof globalThis !== UNDEFINED) {\n        result = globalThis;\n    }\n    if (!result && typeof self !== UNDEFINED) {\n        result = self;\n    }\n    if (!result && typeof window !== UNDEFINED) {\n        result = window;\n    }\n    if (!result && typeof global !== UNDEFINED) {\n        result = global;\n    }\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _getGlobalConfig() {\n    if (!_globalCfg) {\n        var gbl = safe(_getGlobalValue).v || {};\n        _globalCfg = gbl[GLOBAL_CONFIG_KEY] = gbl[GLOBAL_CONFIG_KEY] || {};\n    }\n    return _globalCfg;\n}\n\nvar _unwrapFunction = ( _unwrapFunctionWithPoly);\n/*#__NO_SIDE_EFFECTS__*/\nfunction _unwrapFunctionWithPoly(funcName, clsProto, polyFunc) {\n    var clsFn = clsProto ? clsProto[funcName] : NULL_VALUE;\n    return function (thisArg) {\n        var theFunc = (thisArg ? thisArg[funcName] : NULL_VALUE) || clsFn;\n        if (theFunc || polyFunc) {\n            var theArgs = arguments;\n            return (theFunc || polyFunc).apply(thisArg, theFunc ? ArrSlice[CALL](theArgs, 1) : theArgs);\n        }\n        throwTypeError(\"\\\"\" + asString(funcName) + \"\\\" not defined for \" + dumpObj(thisArg));\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _unwrapProp(propName) {\n    return function (thisArg) {\n        return thisArg[propName];\n    };\n}\n\nvar mathMin = ( /*#__PURE__*/_pureRef(MathCls, \"min\"));\nvar mathMax = ( /*#__PURE__*/_pureRef(MathCls, \"max\"));\n\nvar strSlice = ( /*#__PURE__*/_unwrapFunction(\"slice\", StrProto));\n\nvar strSubstring = ( /*#__PURE__*/_unwrapFunction(\"substring\", StrProto));\nvar strSubstr = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"substr\", StrProto, polyStrSubstr));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrSubstr(value, start, length) {\n    if (isNullOrUndefined(value)) {\n        throwTypeError(\"Invalid \" + dumpObj(value));\n    }\n    if (length < 0) {\n        return EMPTY;\n    }\n    start = start || 0;\n    if (start < 0) {\n        start = mathMax(start + value[LENGTH], 0);\n    }\n    if (isUndefined(length)) {\n        return strSlice(value, start);\n    }\n    return strSlice(value, start, start + length);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strLeft(value, count) {\n    return strSubstring(value, 0, count);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strRight(value, count) {\n    return count <= 0 ? EMPTY : (value[LENGTH] > count ? strSlice(value, -count) : value);\n}\n\nvar UNIQUE_REGISTRY_ID = \"_urid\";\nvar _polySymbols;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _globalSymbolRegistry() {\n    if (!_polySymbols) {\n        var gblCfg = _getGlobalConfig();\n        _polySymbols = gblCfg.gblSym = gblCfg.gblSym || { k: {}, s: {} };\n    }\n    return _polySymbols;\n}\nvar _wellKnownSymbolCache;\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyNewSymbol(description) {\n    var theSymbol = {\n        description: asString(description),\n        toString: function () { return SYMBOL + \"(\" + description + \")\"; }\n    };\n    theSymbol[POLYFILL_TAG] = true;\n    return theSymbol;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polySymbolFor(key) {\n    var registry = _globalSymbolRegistry();\n    if (!objHasOwn(registry.k, key)) {\n        var newSymbol_1 = polyNewSymbol(key);\n        var regId_1 = objKeys(registry.s).length;\n        newSymbol_1[UNIQUE_REGISTRY_ID] = function () { return regId_1 + \"_\" + newSymbol_1[TO_STRING](); };\n        registry.k[key] = newSymbol_1;\n        registry.s[newSymbol_1[UNIQUE_REGISTRY_ID]()] = asString(key);\n    }\n    return registry.k[key];\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polySymbolKeyFor(sym) {\n    if (!sym || !sym[TO_STRING] || strSubstring(sym[TO_STRING](), 0, 6) != SYMBOL) {\n        throwTypeError(sym + \" is not a symbol\");\n    }\n    var regId = sym[POLYFILL_TAG] && sym[UNIQUE_REGISTRY_ID] && sym[UNIQUE_REGISTRY_ID]();\n    return regId ? _globalSymbolRegistry().s[regId] : undefined;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyGetKnownSymbol(name) {\n    !_wellKnownSymbolCache && (_wellKnownSymbolCache = {});\n    var result;\n    var knownName = _wellKnownSymbolMap[name];\n    if (knownName) {\n        result = _wellKnownSymbolCache[knownName] = _wellKnownSymbolCache[knownName] || polyNewSymbol(SYMBOL + \".\" + knownName);\n    }\n    return result;\n}\n\nvar _globalLazyTestHooks;\nfunction _initTestHooks() {\n    _globalLazyTestHooks = _getGlobalConfig();\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getLazy(cb) {\n    var lazyValue = {};\n    !_globalLazyTestHooks && _initTestHooks();\n    lazyValue.b = _globalLazyTestHooks.lzy;\n    objDefineProp(lazyValue, \"v\", {\n        configurable: true,\n        get: function () {\n            var result = cb();\n            if (!_globalLazyTestHooks.lzy) {\n                objDefineProp(lazyValue, \"v\", {\n                    value: result\n                });\n            }\n            lazyValue.b = _globalLazyTestHooks.lzy;\n            return result;\n        }\n    });\n    return lazyValue;\n}\nfunction setBypassLazyCache(newValue) {\n    !_globalLazyTestHooks && _initTestHooks();\n    _globalLazyTestHooks.lzy = newValue;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createCachedValue(value) {\n    return objDefineProp({\n        toJSON: function () { return value; }\n    }, \"v\", { value: value });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createDeferredCachedValue(cb) {\n    var theValue = {\n        toJSON: function () { return theValue.v; }\n    };\n    return objDefineProp(theValue, \"v\", {\n        get: function () {\n            var result = cb();\n            cb = NULL_VALUE;\n            objDefineProp(theValue, \"v\", { value: result });\n            return result;\n        },\n        configurable: true\n    });\n}\n\nvar WINDOW = \"window\";\nvar _cachedGlobal;\nfunction _getGlobalInstFn(getFn, theArgs) {\n    var cachedValue;\n    return function () {\n        !_globalLazyTestHooks && _initTestHooks();\n        if (!cachedValue || _globalLazyTestHooks.lzy) {\n            cachedValue = createCachedValue(safe(getFn, theArgs).v);\n        }\n        return cachedValue.v;\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction lazySafeGetInst(name) {\n    return getLazy(function () { return safe((getInst), [name]).v || UNDEF_VALUE; });\n}\nfunction getGlobal(useCached) {\n    !_globalLazyTestHooks && _initTestHooks();\n    if (!_cachedGlobal || useCached === false || _globalLazyTestHooks.lzy) {\n        _cachedGlobal = createCachedValue(safe(_getGlobalValue).v || NULL_VALUE);\n    }\n    return _cachedGlobal.v;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getInst(name, useCached) {\n    var gbl;\n    if (!_cachedGlobal || useCached === false) {\n        gbl = getGlobal(useCached);\n    }\n    else {\n        gbl = _cachedGlobal.v;\n    }\n    if (gbl && gbl[name]) {\n        return gbl[name];\n    }\n    if (name === WINDOW) {\n        try {\n            return window;\n        }\n        catch (e) {\n        }\n    }\n    return NULL_VALUE;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasDocument() {\n    return !!( /*#__PURE__*/getDocument());\n}\nvar getDocument = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"document\"]));\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasWindow() {\n    return !!( /*#__PURE__*/getWindow());\n}\nvar getWindow = ( /*#__PURE__*/_getGlobalInstFn(getInst, [WINDOW]));\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasNavigator() {\n    return !!( /*#__PURE__*/getNavigator());\n}\nvar getNavigator = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"navigator\"]));\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasHistory() {\n    return !!( /*#__PURE__*/getHistory());\n}\nvar getHistory = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"history\"]));\nvar isNode = ( /*#__PURE__*/_getGlobalInstFn(function () {\n    return !!( /*#__PURE__*/safe(function () { return (process && (process.versions || {}).node); }).v);\n}));\nvar isWebWorker = ( /*#__PURE__*/_getGlobalInstFn(function () {\n    return !!( /*#__PURE__*/safe(function () { return self && self instanceof WorkerGlobalScope; }).v);\n}));\n\nvar _symbol;\nvar _symbolFor;\nvar _symbolKeyFor;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _initSymbol() {\n    _symbol = ( /*#__PURE__*/createCachedValue(safe((getInst), [SYMBOL]).v));\n    return _symbol;\n}\nfunction _getSymbolKey(key) {\n    var gblSym = ((!_globalLazyTestHooks.lzy ? _symbol : 0) || _initSymbol());\n    return (gblSym.v ? gblSym.v[key] : UNDEF_VALUE);\n}\nvar isSymbol = ( /*#__PURE__*/_createIs(\"symbol\"));\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasSymbol() {\n    return !!( /*#__PURE__*/getSymbol());\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getSymbol() {\n    !_globalLazyTestHooks && _initTestHooks();\n    return ((!_globalLazyTestHooks.lzy ? _symbol : 0) || _initSymbol()).v;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getKnownSymbol(name, noPoly) {\n    var knownName = _wellKnownSymbolMap[name];\n    !_globalLazyTestHooks && _initTestHooks();\n    var sym = ((!_globalLazyTestHooks.lzy ? _symbol : 0) || _initSymbol());\n    return sym.v ? sym.v[knownName || name] : (!noPoly ? polyGetKnownSymbol(name) : UNDEF_VALUE);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction newSymbol(description, noPoly) {\n    !_globalLazyTestHooks && _initTestHooks();\n    var sym = ((!_globalLazyTestHooks.lzy ? _symbol : 0) || _initSymbol());\n    return sym.v ? sym.v(description) : (!noPoly ? polyNewSymbol(description) : NULL_VALUE);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction symbolFor(key) {\n    !_globalLazyTestHooks && _initTestHooks();\n    _symbolFor = ((!_globalLazyTestHooks.lzy ? _symbolFor : 0) || ( /*#__PURE__*/createCachedValue(safe((_getSymbolKey), [\"for\"]).v)));\n    return (_symbolFor.v || polySymbolFor)(key);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction symbolKeyFor(sym) {\n    !_globalLazyTestHooks && _initTestHooks();\n    _symbolKeyFor = ((!_globalLazyTestHooks.lzy ? _symbolKeyFor : 0) || ( /*#__PURE__*/createCachedValue(safe((_getSymbolKey), [\"keyFor\"]).v)));\n    return (_symbolKeyFor.v || polySymbolKeyFor)(sym);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction isIterator(value) {\n    return !!value && isFunction(value.next);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isIterable(value) {\n    return !isStrictNullOrUndefined(value) && isFunction(value[getKnownSymbol(3 )]);\n}\n\nvar _iterSymbol$1;\nfunction iterForOf(iter, callbackfn, thisArg) {\n    if (iter) {\n        if (!isIterator(iter)) {\n            !_iterSymbol$1 && (_iterSymbol$1 = createCachedValue(getKnownSymbol(3 )));\n            iter = iter[_iterSymbol$1.v] ? iter[_iterSymbol$1.v]() : NULL_VALUE;\n        }\n        if (isIterator(iter)) {\n            var err = UNDEF_VALUE;\n            var iterResult = UNDEF_VALUE;\n            try {\n                var count = 0;\n                while (!(iterResult = iter.next()).done) {\n                    if (callbackfn[CALL](thisArg || iter, iterResult.value, count, iter) === -1) {\n                        break;\n                    }\n                    count++;\n                }\n            }\n            catch (failed) {\n                err = { e: failed };\n                if (iter.throw) {\n                    iterResult = NULL_VALUE;\n                    iter.throw(err);\n                }\n            }\n            finally {\n                try {\n                    if (iterResult && !iterResult.done) {\n                        iter.return && iter.return(iterResult);\n                    }\n                }\n                finally {\n                    if (err) {\n                        // eslint-disable-next-line no-unsafe-finally\n                        throw err.e;\n                    }\n                }\n            }\n        }\n    }\n}\n\nfunction fnApply(fn, thisArg, argArray) {\n    return fn.apply(thisArg, argArray);\n}\nfunction fnCall(fn, thisArg) {\n    return fn.apply(thisArg, ArrSlice[CALL](arguments, 2));\n}\nfunction fnBind(fn, thisArg) {\n    return fn.bind.apply(fn, ArrSlice[CALL](arguments, 1));\n}\n\nfunction arrAppend(target, elms) {\n    if (!isUndefined(elms) && target) {\n        if (isArray(elms)) {\n            fnApply(target.push, target, elms);\n        }\n        else if (isIterator(elms) || isIterable(elms)) {\n            iterForOf(elms, function (elm) {\n                target.push(elm);\n            });\n        }\n        else {\n            target.push(elms);\n        }\n    }\n    return target;\n}\n\nvar arrEvery = /*#__PURE__*/ _unwrapFunction(\"every\", ArrProto);\nvar arrFilter = /*#__PURE__*/ _unwrapFunction(\"filter\", ArrProto);\n\nfunction arrForEach(theArray, callbackfn, thisArg) {\n    if (theArray) {\n        var len = theArray[LENGTH] >>> 0;\n        for (var idx = 0; idx < len; idx++) {\n            if (idx in theArray) {\n                if (callbackfn[CALL](thisArg || theArray, theArray[idx], idx, theArray) === -1) {\n                    break;\n                }\n            }\n        }\n    }\n}\n\nvar arrIndexOf = ( /*#__PURE__*/_unwrapFunction(\"indexOf\", ArrProto));\nvar arrLastIndexOf = ( /*#__PURE__*/_unwrapFunction(\"lastIndexOf\", ArrProto));\n\nvar arrMap = ( /*#__PURE__*/_unwrapFunction(\"map\", ArrProto));\n\nfunction arrSlice(theArray, start, end) {\n    return ((theArray ? theArray[\"slice\"] : NULL_VALUE) || ArrSlice).apply(theArray, ArrSlice[CALL](arguments, 1));\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyIsArray(value) {\n    if (isNullOrUndefined(value)) {\n        return false;\n    }\n    return objToString(value) === \"[object Array]\";\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyArrIncludes(theArray, searchElement, fromIndex) {\n    return arrIndexOf(theArray, searchElement, fromIndex) !== -1;\n}\nfunction polyArrFind(theArray, callbackFn, thisArg) {\n    var result;\n    var idx = polyArrFindIndex(theArray, callbackFn, thisArg);\n    return idx !== -1 ? theArray[idx] : result;\n}\nfunction polyArrFindIndex(theArray, callbackFn, thisArg) {\n    var result = -1;\n    arrForEach(theArray, function (value, index) {\n        if (callbackFn[CALL](thisArg | theArray, value, index, theArray)) {\n            result = index;\n            return -1;\n        }\n    });\n    return result;\n}\nfunction polyArrFindLast(theArray, callbackFn, thisArg) {\n    var result;\n    var idx = polyArrFindLastIndex(theArray, callbackFn, thisArg);\n    return idx !== -1 ? theArray[idx] : result;\n}\nfunction polyArrFindLastIndex(theArray, callbackFn, thisArg) {\n    var result = -1;\n    var len = theArray[LENGTH] >>> 0;\n    for (var idx = len - 1; idx >= 0; idx--) {\n        if (idx in theArray && callbackFn[CALL](thisArg | theArray, theArray[idx], idx, theArray)) {\n            result = idx;\n            break;\n        }\n    }\n    return result;\n}\nfunction polyArrFrom(theValue, mapFn, thisArg) {\n    if (isArray(theValue)) {\n        var result_1 = arrSlice(theValue);\n        return mapFn ? arrMap(result_1, mapFn, thisArg) : result_1;\n    }\n    var result = [];\n    iterForOf(theValue, function (value, cnt) {\n        return result.push(mapFn ? mapFn[CALL](thisArg, value, cnt) : value);\n    });\n    return result;\n}\n\nvar arrFind = /*#__PURE__*/ _unwrapFunctionWithPoly(\"find\", ArrProto, polyArrFind);\nvar arrFindIndex = /*#__PURE__*/ _unwrapFunctionWithPoly(\"findIndex\", ArrProto, polyArrFindIndex);\nvar arrFindLast = /*#__PURE__*/ _unwrapFunctionWithPoly(\"findLast\", ArrProto, polyArrFindLast);\nvar arrFindLastIndex = /*#__PURE__*/ _unwrapFunctionWithPoly(\"findLastIndex\", ArrProto, polyArrFindLastIndex);\n\nvar arrFrom = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(ArrCls, \"from\")), polyArrFrom));\n\nvar arrIncludes = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"includes\", ArrProto, polyArrIncludes));\nvar arrContains = arrIncludes;\n\nvar arrReduce = ( /*#__PURE__*/_unwrapFunction(\"reduce\", ArrProto));\n\nvar arrSome = ( /*#__PURE__*/_unwrapFunction(\"some\", ArrProto));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createFnDeferredProxy(hostFn, funcName) {\n    return function () {\n        var theArgs = ArrSlice[CALL](arguments);\n        var theHost = hostFn();\n        return fnApply(theHost[funcName], theHost, theArgs);\n    };\n}\nfunction createProxyFuncs(target, host, funcDefs) {\n    if (target && host && isArray(funcDefs)) {\n        var isDeferred_1 = isFunction(host);\n        arrForEach(funcDefs, function (funcDef) {\n            var targetName = (funcDef.as || funcDef.n);\n            if (funcDef.rp === false && target[targetName]) {\n                return;\n            }\n            target[targetName] = isDeferred_1 ?\n                createFnDeferredProxy(host, funcDef.n) :\n                fnBind(host[funcDef.n], host);\n        });\n    }\n    return target;\n}\n\nvar _iterSymbol;\n/*#__NO_SIDE_EFFECTS__*/\nfunction readArgs(theArgs, start, end) {\n    if (!objHasOwn(theArgs, LENGTH)) {\n        !_iterSymbol && (_iterSymbol = createCachedValue(hasSymbol() && getKnownSymbol(3 )));\n        var iterFn = void 0;\n        if (_iterSymbol.v) {\n            iterFn = theArgs[_iterSymbol.v];\n        }\n        if (iterFn) {\n            var values_1 = [];\n            var from_1 = (start === UNDEF_VALUE || start < 0) ? 0 : start;\n            var to_1 = end < 0 || start < 0 ? UNDEF_VALUE : end;\n            iterForOf(iterFn[CALL](theArgs), function (value, cnt) {\n                if (to_1 !== UNDEF_VALUE && cnt >= to_1) {\n                    return -1;\n                }\n                if (cnt >= from_1) {\n                    values_1.push(value);\n                }\n            });\n            if ((start === UNDEF_VALUE || start >= 0) && (end === UNDEF_VALUE || end >= 0)) {\n                return values_1;\n            }\n            theArgs = values_1;\n        }\n    }\n    return arrSlice(theArgs, start, end);\n}\n\nvar objCreate = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(ObjClass, \"create\")), polyObjCreate));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjCreate(obj) {\n    if (!obj) {\n        return {};\n    }\n    var type = typeof obj;\n    if (type !== OBJECT && type !== FUNCTION) {\n        throwTypeError(\"Prototype must be an Object or function: \" + dumpObj(obj));\n    }\n    function tempFunc() { }\n    tempFunc[PROTOTYPE] = obj;\n    return new tempFunc();\n}\n\nvar _isProtoArray;\nfunction objSetPrototypeOf(obj, proto) {\n    var fn = ObjClass[\"setPrototypeOf\"] ||\n        function (d, b) {\n            var _a;\n            !_isProtoArray && (_isProtoArray = createCachedValue((_a = {}, _a[__PROTO__] = [], _a) instanceof Array));\n            _isProtoArray.v ? d[__PROTO__] = b : objForEachKey(b, function (key, value) { return d[key] = value; });\n        };\n    return fn(obj, proto);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createCustomError(name, d, b) {\n    safe(objDefine, [d, NAME, { v: name, c: true, e: false }]);\n    d = objSetPrototypeOf(d, b);\n    function __() {\n        this[CONSTRUCTOR] = d;\n        safe(objDefine, [this, NAME, { v: name, c: true, e: false }]);\n    }\n    d[PROTOTYPE] = b === NULL_VALUE ? objCreate(b) : (__[PROTOTYPE] = b[PROTOTYPE], new __());\n    return d;\n}\nfunction _setName(baseClass, name) {\n    name && (baseClass[NAME] = name);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createCustomError(name, constructCb, errorBase) {\n    var theBaseClass = errorBase || Error;\n    var orgName = theBaseClass[PROTOTYPE][NAME];\n    var captureFn = Error.captureStackTrace;\n    return _createCustomError(name, function () {\n        var _this = this;\n        var theArgs = arguments;\n        try {\n            safe(_setName, [theBaseClass, name]);\n            var _self = fnApply(theBaseClass, _this, ArrSlice[CALL](theArgs)) || _this;\n            if (_self !== _this) {\n                var orgProto = objGetPrototypeOf(_this);\n                if (orgProto !== objGetPrototypeOf(_self)) {\n                    objSetPrototypeOf(_self, orgProto);\n                }\n            }\n            captureFn && captureFn(_self, _this[CONSTRUCTOR]);\n            constructCb && constructCb(_self, theArgs);\n            return _self;\n        }\n        finally {\n            safe(_setName, [theBaseClass, orgName]);\n        }\n    }, theBaseClass);\n}\nvar _unsupportedError;\nfunction throwUnsupported(message) {\n    if (!_unsupportedError) {\n        _unsupportedError = createCustomError(\"UnsupportedError\");\n    }\n    throw new _unsupportedError(message);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction utcNow() {\n    return (Date.now || polyUtcNow)();\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyUtcNow() {\n    return new Date().getTime();\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createTrimFn(exp) {\n    return function _doTrim(value) {\n        if (isNullOrUndefined(value)) {\n            throwTypeError(\"strTrim called [\" + dumpObj(value) + \"]\");\n        }\n        if (value && value.replace) {\n            value = value.replace(exp, EMPTY);\n        }\n        return value;\n    };\n}\nvar polyStrTrim = ( /*#__PURE__*/_createTrimFn(/^\\s+|(?=\\s)\\s+$/g));\nvar polyStrTrimStart = ( /*#__PURE__*/_createTrimFn(/^\\s+/g));\nvar polyStrTrimEnd = ( /*#__PURE__*/_createTrimFn(/(?=\\s)\\s+$/g));\n\nvar strTrim = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"trim\", StrProto, polyStrTrim));\nvar strTrimStart = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"trimStart\", StrProto, polyStrTrimStart));\nvar strTrimLeft = ( /*#__PURE__*/_pureAssign(strTrimStart));\nvar strTrimEnd = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"trimEnd\", StrProto, polyStrTrimEnd));\nvar strTrimRight = ( /*#__PURE__*/_pureAssign(strTrimEnd));\n\nvar strUpper = ( /*#__PURE__*/_unwrapFunction(\"toUpperCase\", StrProto));\nvar strLower = ( /*#__PURE__*/_unwrapFunction(\"toLowerCase\", StrProto));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _convertCase(value, newPrefix, upperWord) {\n    return strTrim(asString(value)).replace(/((_|\\W)+(\\w){0,1}|([a-z])([A-Z]))/g, function (_match, _g1, _g2, wordStart, upperPrefix, upperLetter) {\n        var convertMatch = wordStart || upperLetter || EMPTY;\n        if (upperWord) {\n            convertMatch = strUpper(convertMatch);\n        }\n        return (upperPrefix || EMPTY) + newPrefix + convertMatch;\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strLetterCase(value) {\n    return asString(value).replace(/(_|\\b)\\w/g, strUpper);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strCamelCase(value, upperFirst) {\n    var result = _convertCase(value, \"\", true);\n    return result.replace(/^\\w/, upperFirst ? strUpper : strLower);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strKebabCase(value, scream) {\n    var result = _convertCase(value, \"-\");\n    return (scream ? strUpper : strLower)(result);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strSnakeCase(value, scream) {\n    var result = _convertCase(value, \"_\");\n    return (scream ? strUpper : strLower)(result);\n}\n\nvar mathFloor = ( /*#__PURE__*/_pureRef(MathCls, \"floor\"));\nvar mathCeil = ( /*#__PURE__*/_pureRef(MathCls, \"ceil\"));\n\nvar mathTrunc = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(MathCls, \"trunc\")), polyMathTrunc));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyMathTrunc(value) {\n    var theValue = +value;\n    return (theValue > 0 ? mathFloor : mathCeil)(theValue);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction mathToInt(value, throwInfinity) {\n    var result = +value;\n    if (result == Infinity && throwInfinity) {\n        throwRangeError(\"invalid value [\" + dumpObj(value) + \"]\");\n    }\n    return result !== result || result === 0 ? 0 : mathTrunc(result);\n}\n\nvar strRepeat = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"repeat\", StrProto, polyStrRepeat));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrRepeat(value, count) {\n    if (isNullOrUndefined(value)) {\n        throwTypeError(\"can't convert [\" + dumpObj(value) + \"]\");\n    }\n    count = mathToInt(count, true);\n    if (count < 0) {\n        throwRangeError(\"invalid count must be >= 0 && < Infinity\");\n    }\n    var pad = isString(value) ? value : asString(value);\n    var result = EMPTY;\n    for (; count > 0; (count >>>= 1) && (pad += pad)) {\n        if (count & 1) {\n            result += pad;\n        }\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _padValue(value, targetLength, padString) {\n    var result = EMPTY;\n    targetLength = mathToInt(targetLength, true);\n    targetLength >>= 0;\n    var len = value[LENGTH];\n    if (len < targetLength) {\n        result = isNullOrUndefined(padString) ? \" \" : asString(padString);\n        targetLength = targetLength - len;\n        if (targetLength > result[LENGTH]) {\n            result = strRepeat(result, mathCeil(targetLength / result[LENGTH]));\n        }\n        if (result[LENGTH] > targetLength) {\n            result = strSubstring(result, 0, targetLength);\n        }\n    }\n    return result;\n}\nvar strPadStart = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"padStart\", StrProto, polyStrPadStart));\nvar strPadEnd = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"padEnd\", StrProto, polyStrPadEnd));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrPadStart(value, targetLength, padString) {\n    return _padValue(value, targetLength, padString) + value;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrPadEnd(value, targetLength, padString) {\n    return value + _padValue(value, targetLength, padString);\n}\n\nvar DBL_QUOTE = \"\\\"\";\nvar INVALID_JS_NAME = /([^\\w\\d_$])/g;\nvar _htmlEntityCache;\n/*#__NO_SIDE_EFFECTS__*/\nfunction normalizeJsName(jsName, camelCase) {\n    var result = asString(jsName).replace(INVALID_JS_NAME, \"_\");\n    return !isUndefined(camelCase) ? strCamelCase(result, !camelCase) : result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction encodeAsJson(value, format) {\n    var result;\n    if (isString(value)) {\n        result = DBL_QUOTE + value.replace(/[^\\w .,\\-!@#$%\\^&*\\(\\)_+={}\\[\\]:;|<>?]/g, function (match) {\n            if (match === DBL_QUOTE || match === \"\\\\\") {\n                return \"\\\\\" + match;\n            }\n            var hex = match.charCodeAt(0)[TO_STRING](16);\n            return \"\\\\u\" + strPadStart(strUpper(hex), 4, \"0\");\n        }) + DBL_QUOTE;\n    }\n    else {\n        try {\n            result = JSON.stringify(value, NULL_VALUE, format ? (isNumber(format) ? format : 4) : UNDEF_VALUE);\n        }\n        catch (e) {\n            result = DBL_QUOTE + dumpObj(e) + DBL_QUOTE;\n        }\n    }\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction encodeAsHtml(value) {\n    !_htmlEntityCache && (_htmlEntityCache = {\n        \"&\": \"amp\",\n        \"<\": \"lt\",\n        \">\": \"gt\",\n        \"\\\"\": \"quot\",\n        \"'\": \"#39\"\n    });\n    return asString(value).replace(/[&<>\"']/g, function (match) { return \"&\" + _htmlEntityCache[match] + \";\"; });\n}\n\nvar _fnToString;\nvar _objCtrFnString;\nvar _gblWindow;\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPlainObject(value) {\n    if (!value || typeof value !== OBJECT) {\n        return false;\n    }\n    if (!_gblWindow) {\n        _gblWindow = hasWindow() ? getWindow() : true;\n    }\n    var result = false;\n    if (value !== _gblWindow) {\n        if (!_objCtrFnString) {\n            _fnToString = Function[PROTOTYPE][TO_STRING];\n            _objCtrFnString = _fnToString[CALL](ObjClass);\n        }\n        try {\n            var proto = objGetPrototypeOf(value);\n            result = !proto;\n            if (!result) {\n                if (objHasOwnProperty(proto, CONSTRUCTOR)) {\n                    proto = proto[CONSTRUCTOR];\n                }\n                result = !!(proto && typeof proto === FUNCTION && _fnToString[CALL](proto) === _objCtrFnString);\n            }\n        }\n        catch (ex) {\n        }\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _defaultDeepCopyHandler(details) {\n    details.value && plainObjDeepCopyHandler(details);\n    return true;\n}\nvar defaultDeepCopyHandlers = [\n    arrayDeepCopyHandler,\n    plainObjDeepCopyHandler,\n    functionDeepCopyHandler,\n    dateDeepCopyHandler\n];\n/*#__NO_SIDE_EFFECTS__*/\nfunction _getSetVisited(visitMap, source, newPath, cb) {\n    var theEntry;\n    arrForEach(visitMap, function (entry) {\n        if (entry.k === source) {\n            theEntry = entry;\n            return -1;\n        }\n    });\n    if (!theEntry) {\n        theEntry = { k: source, v: source };\n        visitMap.push(theEntry);\n        cb(theEntry);\n    }\n    return theEntry.v;\n}\nfunction _deepCopy(visitMap, value, ctx, key) {\n    var userHandler = ctx.handler;\n    var newPath = ctx.path ? (key ? ctx.path.concat(key) : ctx.path) : [];\n    var newCtx = {\n        handler: ctx.handler,\n        src: ctx.src,\n        path: newPath\n    };\n    var theType = typeof value;\n    var isPlain = false;\n    var isPrim = value === NULL_VALUE;\n    if (!isPrim) {\n        if (value && theType === OBJECT) {\n            isPlain = isPlainObject(value);\n        }\n        else {\n            isPrim = isPrimitiveType(theType);\n        }\n    }\n    var details = {\n        type: theType,\n        isPrim: isPrim,\n        isPlain: isPlain,\n        value: value,\n        result: value,\n        path: newPath,\n        origin: ctx.src,\n        copy: function (source, newKey) {\n            return _deepCopy(visitMap, source, newKey ? newCtx : ctx, newKey);\n        },\n        copyTo: function (target, source) {\n            return _copyProps(visitMap, target, source, newCtx);\n        }\n    };\n    if (!details.isPrim) {\n        return _getSetVisited(visitMap, value, newPath, function (newEntry) {\n            objDefine(details, \"result\", {\n                g: function () {\n                    return newEntry.v;\n                },\n                s: function (newValue) {\n                    newEntry.v = newValue;\n                }\n            });\n            var idx = 0;\n            var handler = userHandler;\n            while (!(handler || (idx < defaultDeepCopyHandlers.length ? defaultDeepCopyHandlers[idx++] : _defaultDeepCopyHandler))[CALL](ctx, details)) {\n                handler = NULL_VALUE;\n            }\n        });\n    }\n    if (userHandler && userHandler[CALL](ctx, details)) {\n        return details.result;\n    }\n    return value;\n}\nfunction _copyProps(visitMap, target, source, ctx) {\n    if (!isNullOrUndefined(source)) {\n        for (var key in source) {\n            target[key] = _deepCopy(visitMap, source[key], ctx, key);\n        }\n    }\n    return target;\n}\nfunction objCopyProps(target, source, handler) {\n    var ctx = {\n        handler: handler,\n        src: source,\n        path: []\n    };\n    return _copyProps([], target, source, ctx);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction objDeepCopy(source, handler) {\n    var ctx = {\n        handler: handler,\n        src: source\n    };\n    return _deepCopy([], source, ctx);\n}\nfunction arrayDeepCopyHandler(details) {\n    var value = details.value;\n    if (isArray(value)) {\n        var target = details.result = [];\n        target.length = value.length;\n        details.copyTo(target, value);\n        return true;\n    }\n    return false;\n}\nfunction dateDeepCopyHandler(details) {\n    var value = details.value;\n    if (isDate(value)) {\n        details.result = new Date(value.getTime());\n        return true;\n    }\n    return false;\n}\nfunction functionDeepCopyHandler(details) {\n    if (details.type === FUNCTION) {\n        return true;\n    }\n    return false;\n}\nfunction plainObjDeepCopyHandler(details) {\n    var value = details.value;\n    if (value && details.isPlain) {\n        var target = details.result = {};\n        details.copyTo(target, value);\n        return true;\n    }\n    return false;\n}\n\nfunction _doExtend(target, theArgs) {\n    arrForEach(theArgs, function (theArg) {\n        objCopyProps(target, theArg);\n    });\n    return target;\n}\nfunction deepExtend(target, obj1, obj2, obj3, obj4, obj5, obj6) {\n    return _doExtend(objDeepCopy(target) || {}, ArrSlice[CALL](arguments));\n}\nfunction objExtend(target, obj1, obj2, obj3, obj4, obj5, obj6) {\n    return _doExtend(target || {}, ArrSlice[CALL](arguments));\n}\n\nvar getLength = ( /*#__PURE__*/_unwrapProp(LENGTH));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction getIntValue(value, defValue) {\n    if (!isNullOrUndefined(value)) {\n        if (isNumber(value)) {\n            return value;\n        }\n        var theValue = parseInt(value, 10);\n        return isNaN(theValue) ? defValue : theValue;\n    }\n    return defValue;\n}\n\nvar _perf;\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasPerformance() {\n    return !!getPerformance();\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getPerformance() {\n    !_globalLazyTestHooks && _initTestHooks();\n    if (!_perf || _globalLazyTestHooks.lzy) {\n        _perf = createCachedValue(safe((getInst), [\"performance\"]).v);\n    }\n    return _perf.v;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction perfNow() {\n    var perf = getPerformance();\n    if (perf && perf.now) {\n        return perf.now();\n    }\n    return utcNow();\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction elapsedTime(startTime) {\n    return perfNow() - startTime;\n}\n\nvar MATCH_ANY = \"(.*)\";\nvar MATCH_SINGLE = \"(.)\";\nfunction _createRegExp(value, escapeRgx, replaceFn, ignoreCase, fullMatch) {\n    // eslint-disable-next-line security/detect-non-literal-regexp\n    return new RegExp((fullMatch ? \"^\" : EMPTY) + replaceFn(value.replace(escapeRgx, \"\\\\$1\")) + (fullMatch ? \"$\" : EMPTY), ignoreCase ? \"i\" : \"\");\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createWildcardRegex(value, ignoreCase, fullMatch) {\n    return _createRegExp(asString(value), /([-+|^$#.\\?{}()\\[\\]\\\\/\\\"\\'])/g, function (value) {\n        return value.replace(/\\*/g, MATCH_ANY);\n    }, !!ignoreCase, fullMatch);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createFilenameRegex(value, ignoreCase, fullMatch) {\n    return _createRegExp(asString(value), /([-+|^$#.{}()\\\\\\/\\[\\]\\\"\\'])/g, function (value) {\n        return value.replace(/(\\\\\\\\|\\\\\\/|\\*|\\?)/g, function (_all, g1) {\n            if (g1 == \"\\\\/\" || g1 == \"\\\\\\\\\") {\n                return \"[\\\\\\\\\\\\/]{1}\";\n            }\n            return g1 == \"*\" ? MATCH_ANY : MATCH_SINGLE;\n        });\n    }, !!ignoreCase, fullMatch);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction makeGlobRegex(value, ignoreCase, fullMatch) {\n    return _createRegExp(asString(value), /([-+|^$#.{}()\\\\\\/\\[\\]\\\"\\'])/g, function (value) {\n        return value.replace(/(\\*\\*\\\\[\\\\\\/]|\\\\\\\\|\\\\\\/|\\*\\*|\\*|\\?)/g, function (_all, g1) {\n            if (g1 == \"**\\\\/\" || g1 == \"**\\\\\\\\\") {\n                return \"(.*[\\\\\\\\\\\\/])*\";\n            }\n            if (g1 === \"\\\\/\" || g1 == \"\\\\\\\\\") {\n                return \"[\\\\\\\\\\\\/]{1}\";\n            }\n            if (g1 === \"**\") {\n                return MATCH_ANY;\n            }\n            return g1 === \"*\" ? \"([^\\\\\\\\\\\\/]*)\" : \"([^\\\\\\\\\\\\/]{1})\";\n        });\n    }, !!ignoreCase, fullMatch);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction safeGetLazy(cb, defValue) {\n    return getLazy(function () {\n        var result = safe(cb);\n        return result.e ? defValue : result.v;\n    });\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _checkLength(value, props) {\n    var result;\n    arrForEach(props, function (prop) {\n        if (prop in value) {\n            var propValue = value[prop];\n            result = (isFunction(propValue) ? propValue() : propValue) > 0;\n            return -1;\n        }\n    });\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _hasValue(value, depth) {\n    var result = value === false || value === 0;\n    if (!result && !isNullOrUndefined(value)) {\n        if (isArray(value)) {\n            result = value[LENGTH] > 0;\n        }\n        else if (isDate(value)) {\n            result = !isNaN(value.getTime());\n        }\n        else if (isBoolean(value)) {\n            return true;\n        }\n        else if (isObject(value)) {\n            try {\n                var chkValue = _checkLength(value, [LENGTH, \"byteLength\", \"size\", \"count\"]);\n                if (isBoolean(chkValue)) {\n                    return chkValue;\n                }\n                if (isFunction(value.valueOf) && depth < 5) {\n                    return _hasValue(value.valueOf(), ++depth);\n                }\n            }\n            catch (e) {\n            }\n            return !!objKeys(value)[LENGTH];\n        }\n        else {\n            result = isTruthy(value);\n        }\n    }\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasValue(value) {\n    return _hasValue(value, 0);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createIterable(ctx) {\n    return makeIterable({}, ctx);\n}\nfunction makeIterable(target, ctx) {\n    var itSymbol = getKnownSymbol(3 );\n    function _createIterator() {\n        return createIterator(ctx);\n    }\n    target[itSymbol] = _createIterator;\n    return target;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createIterator(ctx) {\n    var isDone = false;\n    function _value() {\n        return ctx.v;\n    }\n    function _next() {\n        if (!isDone) {\n            isDone = (ctx.n ? ctx.n(arguments) : true);\n        }\n        var result = {\n            done: isDone\n        };\n        if (!isDone) {\n            objDefine(result, \"value\", { g: _value });\n        }\n        return result;\n    }\n    function _return(value) {\n        isDone = true;\n        return {\n            done: true,\n            value: ctx.r && ctx.r(value)\n        };\n    }\n    function _throw(e) {\n        isDone = true;\n        return {\n            done: true,\n            value: ctx.t && ctx.t(e)\n        };\n    }\n    var theIterator = {\n        next: _next\n    };\n    if (ctx.r) {\n        theIterator.return = _return;\n    }\n    if (ctx.t) {\n        theIterator.throw = _throw;\n    }\n    return theIterator;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createArrayIterator(values) {\n    var idx = -1;\n    var theValues = values ? values.slice() : [];\n    var len = theValues[LENGTH];\n    function _value() {\n        if (idx >= 0 && idx < len) {\n            return theValues[idx];\n        }\n    }\n    function _getNext() {\n        idx++;\n        return idx >= len;\n    }\n    var ctx = {\n        n: _getNext\n    };\n    objDefine(ctx, \"v\", { g: _value });\n    return createIterator(ctx);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createRangeIterator(start, end, step) {\n    var nextValue = start;\n    var theValue = UNDEF_VALUE;\n    if (isNullOrUndefined(end)) {\n        end = start;\n    }\n    var theStep = step;\n    if (!theStep) {\n        theStep = (start <= end) ? 1 : -1;\n    }\n    function _value() {\n        return theValue;\n    }\n    function _getNext() {\n        var isDone = (theStep > 0) ? (nextValue > end) : (nextValue < end);\n        if (!isDone) {\n            theValue = nextValue;\n            nextValue += theStep;\n        }\n        return isDone;\n    }\n    return createIterator(objDefine({\n        n: _getNext\n    }, \"v\", { g: _value }));\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrSymSplit(value, splitter, limit) {\n    var splitFn = splitter ? splitter[getKnownSymbol(9 )] : UNDEF_VALUE;\n    return splitFn ? splitFn(value, limit) : [value];\n}\n\nvar strSplit = ( /*#__PURE__*/_unwrapFunction(\"split\", StrProto));\nvar strSymSplit = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"split\", StrProto, !hasSymbol() ? polyStrSymSplit : NULL_VALUE));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction getValueByKey(target, path, defValue) {\n    if (!path || !target) {\n        return defValue;\n    }\n    var parts = strSplit(path, \".\");\n    var cnt = parts.length;\n    for (var lp = 0; lp < cnt && !isNullOrUndefined(target); lp++) {\n        target = target[parts[lp]];\n    }\n    return (!isNullOrUndefined(target) ? target : defValue);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getValueByIter(target, iter, defValue) {\n    if (!iter || !target) {\n        return defValue;\n    }\n    iterForOf(iter, function (value) {\n        if (isNullOrUndefined(target)) {\n            return -1;\n        }\n        target = target[value];\n    });\n    return (!isNullOrUndefined(target) ? target : defValue);\n}\nfunction setValueByKey(target, path, value) {\n    if (target && path) {\n        var parts = strSplit(path, \".\");\n        var lastKey = parts.pop();\n        arrForEach(parts, function (key) {\n            if (isNullOrUndefined(target[key])) {\n                target[key] = {};\n            }\n            target = target[key];\n        });\n        target[lastKey] = value;\n    }\n}\nfunction setValueByIter(target, iter, value) {\n    if (target && iter) {\n        var lastKey_1;\n        iterForOf(iter, function (key) {\n            if (lastKey_1) {\n                if (isNullOrUndefined(target[lastKey_1])) {\n                    target[lastKey_1] = {};\n                }\n                target = target[lastKey_1];\n            }\n            lastKey_1 = key;\n        });\n        target[lastKey_1] = value;\n    }\n}\n\nvar strEndsWith = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"endsWith\", StrProto, polyStrEndsWith));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrEndsWith(value, searchString, length) {\n    if (!isString(value)) {\n        throwTypeError(\"'\" + dumpObj(value) + \"' is not a string\");\n    }\n    var searchValue = isString(searchString) ? searchString : asString(searchString);\n    var end = (!isUndefined(length) && length < value[LENGTH]) ? length : value[LENGTH];\n    return strSubstring(value, end - searchValue[LENGTH], end) === searchValue;\n}\n\nvar strIndexOf = ( /*#__PURE__*/_unwrapFunction(\"indexOf\", StrProto));\nvar strLastIndexOf = ( /*#__PURE__*/_unwrapFunction(\"lastIndexOf\", StrProto));\n\nvar strIncludes = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"includes\", StrProto, polyStrIncludes));\nvar strContains = ( /*#__PURE__*/_pureAssign(strIncludes));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrIncludes(value, searchString, position) {\n    if (isRegExp(searchString)) {\n        throwTypeError(\"'searchString' must not be a regular expression\" + dumpObj(searchString));\n    }\n    return strIndexOf(value, asString(searchString), position) !== -1;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction strIsNullOrWhiteSpace(value) {\n    if (isString(value)) {\n        return value.replace(/[\\s\\t\\r\\n\\f]+/g, EMPTY) === EMPTY;\n    }\n    return isNullOrUndefined(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strIsNullOrEmpty(value) {\n    if (isString(value)) {\n        return value === EMPTY;\n    }\n    return isNullOrUndefined(value);\n}\n\nvar strStartsWith = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"startsWith\", StrProto, polyStrStartsWith));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrStartsWith(value, searchString, position) {\n    if (!isString(value)) {\n        throwTypeError(\"'\" + dumpObj(value) + \"' is not a string\");\n    }\n    var searchValue = isString(searchString) ? searchString : asString(searchString);\n    var pos = position > 0 ? position : 0;\n    return strSubstring(value, pos, pos + searchValue[LENGTH]) === searchValue;\n}\n\nvar REF = \"ref\";\nvar UNREF = \"unref\";\nvar HAS_REF = \"hasRef\";\nvar ENABLED = \"enabled\";\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createTimerHandler(startTimer, refreshFn, cancelFn) {\n    var ref = true;\n    var timerId = startTimer ? refreshFn(NULL_VALUE) : NULL_VALUE;\n    var theTimerHandler;\n    function _unref() {\n        ref = false;\n        timerId && timerId[UNREF] && timerId[UNREF]();\n        return theTimerHandler;\n    }\n    function _cancel() {\n        timerId && cancelFn(timerId);\n        timerId = NULL_VALUE;\n    }\n    function _refresh() {\n        timerId = refreshFn(timerId);\n        if (!ref) {\n            _unref();\n        }\n        return theTimerHandler;\n    }\n    function _setEnabled(value) {\n        !value && timerId && _cancel();\n        value && !timerId && _refresh();\n    }\n    theTimerHandler = {\n        cancel: _cancel,\n        refresh: _refresh\n    };\n    theTimerHandler[HAS_REF] = function () {\n        if (timerId && timerId[HAS_REF]) {\n            return timerId[HAS_REF]();\n        }\n        return ref;\n    };\n    theTimerHandler[REF] = function () {\n        ref = true;\n        timerId && timerId[REF] && timerId[REF]();\n        return theTimerHandler;\n    };\n    theTimerHandler[UNREF] = _unref;\n    theTimerHandler = objDefineProp(theTimerHandler, ENABLED, {\n        get: function () { return !!timerId; },\n        set: _setEnabled\n    });\n    return {\n        h: theTimerHandler,\n        dn: function () {\n            timerId = NULL_VALUE;\n        }\n    };\n}\n\nfunction _createTimeoutWith(startTimer, overrideFn, theArgs) {\n    var isArr = isArray(overrideFn);\n    var len = isArr ? overrideFn.length : 0;\n    var setFn = (len > 0 ? overrideFn[0] : (!isArr ? overrideFn : UNDEF_VALUE)) || setTimeout;\n    var clearFn = (len > 1 ? overrideFn[1] : UNDEF_VALUE) || clearTimeout;\n    var timerFn = theArgs[0];\n    theArgs[0] = function () {\n        handler.dn();\n        fnApply(timerFn, UNDEF_VALUE, ArrSlice[CALL](arguments));\n    };\n    var handler = _createTimerHandler(startTimer, function (timerId) {\n        if (timerId) {\n            if (timerId.refresh) {\n                timerId.refresh();\n                return timerId;\n            }\n            fnApply(clearFn, UNDEF_VALUE, [timerId]);\n        }\n        return fnApply(setFn, UNDEF_VALUE, theArgs);\n    }, function (timerId) {\n        fnApply(clearFn, UNDEF_VALUE, [timerId]);\n    });\n    return handler.h;\n}\nfunction scheduleTimeout(callback, timeout) {\n    return _createTimeoutWith(true, UNDEF_VALUE, ArrSlice[CALL](arguments));\n}\nfunction scheduleTimeoutWith(overrideFn, callback, timeout) {\n    return _createTimeoutWith(true, overrideFn, ArrSlice[CALL](arguments, 1));\n}\nfunction createTimeout(callback, timeout) {\n    return _createTimeoutWith(false, UNDEF_VALUE, ArrSlice[CALL](arguments));\n}\nfunction createTimeoutWith(overrideFn, callback, timeout) {\n    return _createTimeoutWith(false, overrideFn, ArrSlice[CALL](arguments, 1));\n}\n\nvar _defaultIdleTimeout = 100;\nvar _maxExecutionTime = 50;\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasIdleCallback() {\n    return !!( /*#__PURE__*/getIdleCallback());\n}\nvar getIdleCallback = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"requestIdleCallback\"]));\nvar getCancelIdleCallback = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"cancelIdleCallback\"]));\nfunction setDefaultIdleTimeout(timeout) {\n    _defaultIdleTimeout = timeout;\n}\nfunction setDefaultMaxExecutionTime(maxTime) {\n    _maxExecutionTime = maxTime;\n}\nfunction scheduleIdleCallback(callback, options) {\n    function _createDeadline(timedOut) {\n        var startTime = perfNow();\n        return {\n            didTimeout: timedOut,\n            timeRemaining: function () {\n                return _maxExecutionTime - elapsedTime(startTime);\n            }\n        };\n    }\n    if (hasIdleCallback()) {\n        var handler_1 = _createTimerHandler(true, function (idleId) {\n            idleId && getCancelIdleCallback()(idleId);\n            return getIdleCallback()(function (deadline) {\n                handler_1.dn();\n                callback(deadline || _createDeadline(false));\n            }, options);\n        }, function (idleId) {\n            getCancelIdleCallback()(idleId);\n        });\n        return handler_1.h;\n    }\n    var timeout = (options || {}).timeout;\n    if (isUndefined(timeout)) {\n        timeout = _defaultIdleTimeout;\n    }\n    return scheduleTimeout(function () {\n        callback(_createDeadline(true));\n    }, timeout);\n}\n\nfunction scheduleInterval(callback, timeout) {\n    var theArguments = ArrSlice[CALL](arguments);\n    var handler = _createTimerHandler(true, function (intervalId) {\n        intervalId && clearInterval(intervalId);\n        return fnApply(setInterval, UNDEF_VALUE, theArguments);\n    }, function (intervalId) {\n        fnApply(clearInterval, UNDEF_VALUE, [intervalId]);\n    });\n    return handler.h;\n}\n\nexport { arrAppend, arrContains, arrEvery, arrFilter, arrFind, arrFindIndex, arrFindLast, arrFindLastIndex, arrForEach, arrFrom, arrIncludes, arrIndexOf, arrLastIndexOf, arrMap, arrReduce, arrSlice, arrSome, arrayDeepCopyHandler, asString, createArrayIterator, createCachedValue, createCustomError, createDeferredCachedValue, createEnum, createEnumKeyMap, createEnumValueMap, createFilenameRegex, createFnDeferredProxy, createIterable, createIterator, createProxyFuncs, createRangeIterator, createSimpleMap, createTimeout, createTimeoutWith, createTypeMap, createWildcardRegex, dateDeepCopyHandler, deepExtend, dumpObj, elapsedTime, encodeAsHtml, encodeAsJson, fnApply, fnBind, fnCall, functionDeepCopyHandler, getCancelIdleCallback, getDocument, getGlobal, getHistory, getIdleCallback, getInst, getIntValue, getKnownSymbol, getLazy, getLength, getNavigator, getPerformance, getSymbol, getValueByIter, getValueByKey, getWindow, hasDocument, hasHistory, hasIdleCallback, hasNavigator, hasPerformance, hasSymbol, hasValue, hasWindow, isArray, isArrayBuffer, isBlob, isBoolean, isDate, isDefined, isError, isFile, isFormData, isFunction, isIterable, isIterator, isNode, isNotTruthy, isNullOrUndefined, isNumber, isObject, isPlainObject, isPrimitive, isPrimitiveType, isPromise, isPromiseLike, isRegExp, isStrictNullOrUndefined, isStrictUndefined, isString, isSymbol, isThenable, isTruthy, isTypeof, isUndefined, isWebWorker, iterForOf, lazySafeGetInst, makeGlobRegex, makeIterable, mathCeil, mathFloor, mathMax, mathMin, mathToInt, mathTrunc, newSymbol, normalizeJsName, objAssign, objCopyProps, objCreate, objDeepCopy, objDeepFreeze, objDefine, objDefineAccessors, objDefineGet, objDefineProp, objDefineProperties, objDefineProps, objEntries, objExtend, objForEachKey, objFreeze, objGetOwnPropertyDescriptor, objGetPrototypeOf, objHasOwn, objHasOwnProperty, objKeys, objSeal, objSetPrototypeOf, objToString, perfNow, plainObjDeepCopyHandler, polyArrFind, polyArrFindIndex, polyArrFindLast, polyArrFindLastIndex, polyArrFrom, polyArrIncludes, polyGetKnownSymbol, polyIsArray, polyNewSymbol, polyObjEntries, polyObjHasOwn, polyObjKeys, polyStrIncludes, polyStrSubstr, polyStrSymSplit, polyStrTrim, polyStrTrimEnd, polyStrTrimStart, polySymbolFor, polySymbolKeyFor, polyUtcNow, readArgs, safe, safeGet, safeGetLazy, scheduleIdleCallback, scheduleInterval, scheduleTimeout, scheduleTimeoutWith, setBypassLazyCache, setDefaultIdleTimeout, setDefaultMaxExecutionTime, setValueByIter, setValueByKey, strCamelCase, strContains, strEndsWith, strIncludes, strIndexOf, strIsNullOrEmpty, strIsNullOrWhiteSpace, strKebabCase, strLastIndexOf, strLeft, strLetterCase, strLower, strPadEnd, strPadStart, strRepeat, strRight, strSlice, strSnakeCase, strSplit, strStartsWith, strSubstr, strSubstring, strSymSplit, strTrim, strTrimEnd, strTrimLeft, strTrimRight, strTrimStart, strUpper, symbolFor, symbolKeyFor, throwError, throwRangeError, throwTypeError, throwUnsupported, utcNow };\n//# sourceMappingURL=ts-utils.js.map\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { arrForEach, isFunction } from \"@nevware21/ts-utils\";\r\nimport { _DYN_GET_NEXT, _DYN_GET_PLUGIN, _DYN_INITIALIZE, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_SET_NEXT_PLUGIN, _DYN_SPAN_ID, _DYN_TEARDOWN, _DYN_TRACE_FLAGS, _DYN_TRACE_ID, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { createElmNodeData } from \"./DataCacheHelper\";\r\nimport { STR_CORE, STR_PRIORITY, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { isValidSpanId, isValidTraceId } from \"./W3cTraceParent\";\r\nvar pluginStateData = createElmNodeData(\"plugin\");\r\nexport function _getPluginState(plugin) {\r\n    return pluginStateData.get(plugin, \"state\", {}, true);\r\n}\r\n/**\r\n * Initialize the queue of plugins\r\n * @param plugins - The array of plugins to initialize and setting of the next plugin\r\n * @param config - The current config for the instance\r\n * @param core - THe current core instance\r\n * @param extensions - The extensions\r\n */\r\nexport function initializePlugins(processContext, extensions) {\r\n    // Set the next plugin and identified the uninitialized plugins\r\n    var initPlugins = [];\r\n    var lastPlugin = null;\r\n    var proxy = processContext[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n    var pluginState;\r\n    while (proxy) {\r\n        var thePlugin = proxy[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]();\r\n        if (thePlugin) {\r\n            if (lastPlugin && lastPlugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */] && thePlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */]) {\r\n                // Set this plugin as the next for the previous one\r\n                lastPlugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */](thePlugin);\r\n            }\r\n            pluginState = _getPluginState(thePlugin);\r\n            var isInitialized = !!pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */];\r\n            if (thePlugin[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]) {\r\n                isInitialized = thePlugin[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]();\r\n            }\r\n            if (!isInitialized) {\r\n                initPlugins[_DYN_PUSH /* @min:%2epush */](thePlugin);\r\n            }\r\n            lastPlugin = thePlugin;\r\n            proxy = proxy[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n        }\r\n    }\r\n    // Now initialize the plugins\r\n    arrForEach(initPlugins, function (thePlugin) {\r\n        var core = processContext[STR_CORE /* @min:%2ecore */]();\r\n        thePlugin[_DYN_INITIALIZE /* @min:%2einitialize */](processContext.getCfg(), core, extensions, processContext[_DYN_GET_NEXT /* @min:%2egetNext */]());\r\n        pluginState = _getPluginState(thePlugin);\r\n        // Only add the core to the state if the plugin didn't set it (doesn't extend from BaseTelemetryPlugin)\r\n        if (!thePlugin[STR_CORE] && !pluginState[STR_CORE]) {\r\n            pluginState[STR_CORE] = core;\r\n        }\r\n        pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = true;\r\n        delete pluginState[_DYN_TEARDOWN /* @min:%2eteardown */];\r\n    });\r\n}\r\nexport function sortPlugins(plugins) {\r\n    // Sort by priority\r\n    return plugins.sort(function (extA, extB) {\r\n        var result = 0;\r\n        if (extB) {\r\n            var bHasProcess = extB[STR_PROCESS_TELEMETRY];\r\n            if (extA[STR_PROCESS_TELEMETRY]) {\r\n                result = bHasProcess ? extA[STR_PRIORITY] - extB[STR_PRIORITY] : 1;\r\n            }\r\n            else if (bHasProcess) {\r\n                result = -1;\r\n            }\r\n        }\r\n        else {\r\n            result = extA ? 1 : -1;\r\n        }\r\n        return result;\r\n    });\r\n    // sort complete\r\n}\r\n/**\r\n * Teardown / Unload helper to perform teardown/unloading operations for the provided components synchronously or asynchronously, this will call any\r\n * _doTeardown() or _doUnload() functions on the provided components to allow them to finish removal.\r\n * @param components - The components you want to unload\r\n * @param unloadCtx - This is the context that should be used during unloading.\r\n * @param unloadState - The details / state of the unload process, it holds details like whether it should be unloaded synchronously or asynchronously and the reason for the unload.\r\n * @param asyncCallback - An optional callback that the plugin must call if it returns true to inform the caller that it has completed any async unload/teardown operations.\r\n * @returns boolean - true if the plugin has or will call asyncCallback, this allows the plugin to perform any asynchronous operations.\r\n */\r\nexport function unloadComponents(components, unloadCtx, unloadState, asyncCallback) {\r\n    var idx = 0;\r\n    function _doUnload() {\r\n        while (idx < components[_DYN_LENGTH /* @min:%2elength */]) {\r\n            var component = components[idx++];\r\n            if (component) {\r\n                var func = component._doUnload || component[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */];\r\n                if (isFunction(func)) {\r\n                    if (func.call(component, unloadCtx, unloadState, _doUnload) === true) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return _doUnload();\r\n}\r\n/**\r\n * Creates a IDistributedTraceContext which optionally also \"sets\" the value on a parent\r\n * @param parentCtx - An optional parent distributed trace instance\r\n * @returns A new IDistributedTraceContext instance that uses an internal temporary object\r\n */\r\nexport function createDistributedTraceContext(parentCtx) {\r\n    var trace = {};\r\n    return {\r\n        getName: function () {\r\n            return trace[_DYN_NAME /* @min:%2ename */];\r\n        },\r\n        setName: function (newValue) {\r\n            parentCtx && parentCtx.setName(newValue);\r\n            trace[_DYN_NAME /* @min:%2ename */] = newValue;\r\n        },\r\n        getTraceId: function () {\r\n            return trace[_DYN_TRACE_ID /* @min:%2etraceId */];\r\n        },\r\n        setTraceId: function (newValue) {\r\n            parentCtx && parentCtx.setTraceId(newValue);\r\n            if (isValidTraceId(newValue)) {\r\n                trace[_DYN_TRACE_ID /* @min:%2etraceId */] = newValue;\r\n            }\r\n        },\r\n        getSpanId: function () {\r\n            return trace[_DYN_SPAN_ID /* @min:%2espanId */];\r\n        },\r\n        setSpanId: function (newValue) {\r\n            parentCtx && parentCtx.setSpanId(newValue);\r\n            if (isValidSpanId(newValue)) {\r\n                trace[_DYN_SPAN_ID /* @min:%2espanId */] = newValue;\r\n            }\r\n        },\r\n        getTraceFlags: function () {\r\n            return trace[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */];\r\n        },\r\n        setTraceFlags: function (newTraceFlags) {\r\n            parentCtx && parentCtx.setTraceFlags(newTraceFlags);\r\n            trace[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */] = newTraceFlags;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=TelemetryHelpers.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport * as fileSchemes from '../configuration/fileSchemes';\nimport { doesResourceLookLikeATypeScriptFile } from '../configuration/languageDescription';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { Delayer } from '../utils/async';\nimport { nulToken } from '../utils/cancellation';\nimport { Disposable } from '../utils/dispose';\nimport FileConfigurationManager from './fileConfigurationManager';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\n\n\nconst updateImportsOnFileMoveName = 'updateImportsOnFileMove.enabled';\n\nasync function isDirectory(resource: vscode.Uri): Promise<boolean> {\n\ttry {\n\t\treturn (await vscode.workspace.fs.stat(resource)).type === vscode.FileType.Directory;\n\t} catch {\n\t\treturn false;\n\t}\n}\n\nconst enum UpdateImportsOnFileMoveSetting {\n\tPrompt = 'prompt',\n\tAlways = 'always',\n\tNever = 'never',\n}\n\ninterface RenameAction {\n\treadonly oldUri: vscode.Uri;\n\treadonly newUri: vscode.Uri;\n\treadonly newFilePath: string;\n\treadonly oldFilePath: string;\n\treadonly jsTsFileThatIsBeingMoved: vscode.Uri;\n}\n\nclass UpdateImportsOnFileRenameHandler extends Disposable {\n\n\tprivate readonly _delayer = new Delayer(50);\n\tprivate readonly _pendingRenames = new Set<RenameAction>();\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager,\n\t\tprivate readonly _handles: (uri: vscode.Uri) => Promise<boolean>,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(vscode.workspace.onDidRenameFiles(async (e) => {\n\t\t\tfor (const { newUri, oldUri } of e.files) {\n\t\t\t\tconst newFilePath = this.client.toTsFilePath(newUri);\n\t\t\t\tif (!newFilePath) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst oldFilePath = this.client.toTsFilePath(oldUri);\n\t\t\t\tif (!oldFilePath) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst config = this.getConfiguration(newUri);\n\t\t\t\tconst setting = config.get<UpdateImportsOnFileMoveSetting>(updateImportsOnFileMoveName);\n\t\t\t\tif (setting === UpdateImportsOnFileMoveSetting.Never) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Try to get a js/ts file that is being moved\n\t\t\t\t// For directory moves, this returns a js/ts file under the directory.\n\t\t\t\tconst jsTsFileThatIsBeingMoved = await this.getJsTsFileBeingMoved(newUri);\n\t\t\t\tif (!jsTsFileThatIsBeingMoved || !this.client.toTsFilePath(jsTsFileThatIsBeingMoved)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis._pendingRenames.add({ oldUri, newUri, newFilePath, oldFilePath, jsTsFileThatIsBeingMoved });\n\n\t\t\t\tthis._delayer.trigger(() => {\n\t\t\t\t\tvscode.window.withProgress({\n\t\t\t\t\t\tlocation: vscode.ProgressLocation.Window,\n\t\t\t\t\t\ttitle: vscode.l10n.t(\"Checking for update of JS/TS imports\")\n\t\t\t\t\t}, () => this.flushRenames());\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate async flushRenames(): Promise<void> {\n\t\tconst renames = Array.from(this._pendingRenames);\n\t\tthis._pendingRenames.clear();\n\t\tfor (const group of this.groupRenames(renames)) {\n\t\t\tconst edits = new vscode.WorkspaceEdit();\n\t\t\tconst resourcesBeingRenamed: vscode.Uri[] = [];\n\n\t\t\tfor (const { oldUri, newUri, newFilePath, oldFilePath, jsTsFileThatIsBeingMoved } of group) {\n\t\t\t\tconst document = await vscode.workspace.openTextDocument(jsTsFileThatIsBeingMoved);\n\n\t\t\t\t// Make sure TS knows about file\n\t\t\t\tthis.client.bufferSyncSupport.closeResource(oldUri);\n\t\t\t\tthis.client.bufferSyncSupport.openTextDocument(document);\n\n\t\t\t\tif (await this.withEditsForFileRename(edits, document, oldFilePath, newFilePath)) {\n\t\t\t\t\tresourcesBeingRenamed.push(newUri);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (edits.size) {\n\t\t\t\tif (await this.confirmActionWithUser(resourcesBeingRenamed)) {\n\t\t\t\t\tawait vscode.workspace.applyEdit(edits, { isRefactoring: true });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async confirmActionWithUser(newResources: readonly vscode.Uri[]): Promise<boolean> {\n\t\tif (!newResources.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst config = this.getConfiguration(newResources[0]);\n\t\tconst setting = config.get<UpdateImportsOnFileMoveSetting>(updateImportsOnFileMoveName);\n\t\tswitch (setting) {\n\t\t\tcase UpdateImportsOnFileMoveSetting.Always:\n\t\t\t\treturn true;\n\t\t\tcase UpdateImportsOnFileMoveSetting.Never:\n\t\t\t\treturn false;\n\t\t\tcase UpdateImportsOnFileMoveSetting.Prompt:\n\t\t\tdefault:\n\t\t\t\treturn this.promptUser(newResources);\n\t\t}\n\t}\n\n\tprivate getConfiguration(resource: vscode.Uri) {\n\t\treturn vscode.workspace.getConfiguration(doesResourceLookLikeATypeScriptFile(resource) ? 'typescript' : 'javascript', resource);\n\t}\n\n\tprivate async promptUser(newResources: readonly vscode.Uri[]): Promise<boolean> {\n\t\tif (!newResources.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst rejectItem: vscode.MessageItem = {\n\t\t\ttitle: vscode.l10n.t(\"No\"),\n\t\t\tisCloseAffordance: true,\n\t\t};\n\n\t\tconst acceptItem: vscode.MessageItem = {\n\t\t\ttitle: vscode.l10n.t(\"Yes\"),\n\t\t};\n\n\t\tconst alwaysItem: vscode.MessageItem = {\n\t\t\ttitle: vscode.l10n.t(\"Always\"),\n\t\t};\n\n\t\tconst neverItem: vscode.MessageItem = {\n\t\t\ttitle: vscode.l10n.t(\"Never\"),\n\t\t};\n\n\t\tconst response = await vscode.window.showInformationMessage(\n\t\t\tnewResources.length === 1\n\t\t\t\t? vscode.l10n.t(\"Update imports for '{0}'?\", path.basename(newResources[0].fsPath))\n\t\t\t\t: this.getConfirmMessage(vscode.l10n.t(\"Update imports for the following {0} files?\", newResources.length), newResources), {\n\t\t\tmodal: true,\n\t\t}, rejectItem, acceptItem, alwaysItem, neverItem);\n\n\n\t\tswitch (response) {\n\t\t\tcase acceptItem: {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase rejectItem: {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tcase alwaysItem: {\n\t\t\t\tconst config = this.getConfiguration(newResources[0]);\n\t\t\t\tconfig.update(\n\t\t\t\t\tupdateImportsOnFileMoveName,\n\t\t\t\t\tUpdateImportsOnFileMoveSetting.Always,\n\t\t\t\t\tthis.getConfigTargetScope(config, updateImportsOnFileMoveName));\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase neverItem: {\n\t\t\t\tconst config = this.getConfiguration(newResources[0]);\n\t\t\t\tconfig.update(\n\t\t\t\t\tupdateImportsOnFileMoveName,\n\t\t\t\t\tUpdateImportsOnFileMoveSetting.Never,\n\t\t\t\t\tthis.getConfigTargetScope(config, updateImportsOnFileMoveName));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async getJsTsFileBeingMoved(resource: vscode.Uri): Promise<vscode.Uri | undefined> {\n\t\tif (resource.scheme !== fileSchemes.file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (await isDirectory(resource)) {\n\t\t\tconst files = await vscode.workspace.findFiles(new vscode.RelativePattern(resource, '**/*.{ts,tsx,js,jsx}'), '**/node_modules/**', 1);\n\t\t\treturn files[0];\n\t\t}\n\n\t\treturn (await this._handles(resource)) ? resource : undefined;\n\t}\n\n\tprivate async withEditsForFileRename(\n\t\tedits: vscode.WorkspaceEdit,\n\t\tdocument: vscode.TextDocument,\n\t\toldFilePath: string,\n\t\tnewFilePath: string,\n\t): Promise<boolean> {\n\t\tconst response = await this.client.interruptGetErr(() => {\n\t\t\tthis.fileConfigurationManager.setGlobalConfigurationFromDocument(document, nulToken);\n\t\t\tconst args: Proto.GetEditsForFileRenameRequestArgs = {\n\t\t\t\toldFilePath,\n\t\t\t\tnewFilePath,\n\t\t\t};\n\t\t\treturn this.client.execute('getEditsForFileRename', args, nulToken);\n\t\t});\n\t\tif (response.type !== 'response' || !response.body.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttypeConverters.WorkspaceEdit.withFileCodeEdits(edits, this.client, response.body);\n\t\treturn true;\n\t}\n\n\tprivate groupRenames(renames: Iterable<RenameAction>): Iterable<Iterable<RenameAction>> {\n\t\tconst groups = new Map<string, Set<RenameAction>>();\n\n\t\tfor (const rename of renames) {\n\t\t\t// Group renames by type (js/ts) and by workspace.\n\t\t\tconst key = `${this.client.getWorkspaceRootForResource(rename.jsTsFileThatIsBeingMoved)?.fsPath}@@@${doesResourceLookLikeATypeScriptFile(rename.jsTsFileThatIsBeingMoved)}`;\n\t\t\tif (!groups.has(key)) {\n\t\t\t\tgroups.set(key, new Set());\n\t\t\t}\n\t\t\tgroups.get(key)!.add(rename);\n\t\t}\n\n\t\treturn groups.values();\n\t}\n\n\tprivate getConfirmMessage(start: string, resourcesToConfirm: readonly vscode.Uri[]): string {\n\t\tconst MAX_CONFIRM_FILES = 10;\n\n\t\tconst paths = [start];\n\t\tpaths.push('');\n\t\tpaths.push(...resourcesToConfirm.slice(0, MAX_CONFIRM_FILES).map(r => path.basename(r.fsPath)));\n\n\t\tif (resourcesToConfirm.length > MAX_CONFIRM_FILES) {\n\t\t\tif (resourcesToConfirm.length - MAX_CONFIRM_FILES === 1) {\n\t\t\t\tpaths.push(vscode.l10n.t(\"...1 additional file not shown\"));\n\t\t\t} else {\n\t\t\t\tpaths.push(vscode.l10n.t(\"...{0} additional files not shown\", resourcesToConfirm.length - MAX_CONFIRM_FILES));\n\t\t\t}\n\t\t}\n\n\t\tpaths.push('');\n\t\treturn paths.join('\\n');\n\t}\n\n\tprivate getConfigTargetScope(config: vscode.WorkspaceConfiguration, settingsName: string): vscode.ConfigurationTarget {\n\t\tconst inspected = config.inspect(settingsName);\n\t\tif (inspected?.workspaceFolderValue) {\n\t\t\treturn vscode.ConfigurationTarget.WorkspaceFolder;\n\t\t}\n\n\t\tif (inspected?.workspaceValue) {\n\t\t\treturn vscode.ConfigurationTarget.Workspace;\n\t\t}\n\n\t\treturn vscode.ConfigurationTarget.Global;\n\t}\n}\n\nexport function register(\n\tclient: ITypeScriptServiceClient,\n\tfileConfigurationManager: FileConfigurationManager,\n\thandles: (uri: vscode.Uri) => Promise<boolean>,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\treturn new UpdateImportsOnFileRenameHandler(client, fileConfigurationManager, handles);\n\t});\n}\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { getGlobal, objAssign, objCreate, objDefineProp, objHasOwnProperty, throwTypeError } from \"@nevware21/ts-utils\";\r\nimport { ObjClass, ObjProto, strDefault, strShimFunction, strShimPrototype } from \"./Constants\";\r\n// Most of these functions have been directly shamelessly \"lifted\" from the https://github.com/@microsoft/tslib and\r\n// modified to be ES5 compatible and applying several minification and tree-shaking techniques so that Application Insights\r\n// can successfully use TypeScript \"importHelpers\" which imports tslib during compilation but it will use these at runtime\r\n// Which is also why all of the functions have not been included as Application Insights currently doesn't use or require\r\n// them.\r\nexport var SymbolObj = (getGlobal() || {})[\"Symbol\"];\r\nexport var ReflectObj = (getGlobal() || {})[\"Reflect\"];\r\nexport var __hasReflect = !!ReflectObj;\r\nvar strDecorate = \"decorate\";\r\nvar strMetadata = \"metadata\";\r\nvar strGetOwnPropertySymbols = \"getOwnPropertySymbols\";\r\nvar strIterator = \"iterator\";\r\nvar strHasOwnProperty = \"hasOwnProperty\";\r\nexport var __objAssignFnImpl = function (t) {\r\n    // tslint:disable-next-line: ban-comma-operator\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) {\r\n            if (ObjProto[strHasOwnProperty].call(s, p)) {\r\n                t[p] = s[p];\r\n            }\r\n        }\r\n    }\r\n    return t;\r\n};\r\nexport var __assignFn = objAssign || __objAssignFnImpl;\r\n// tslint:disable-next-line: only-arrow-functions\r\nvar extendStaticsFn = function (d, b) {\r\n    extendStaticsFn = ObjClass[\"setPrototypeOf\"] ||\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        ({ __proto__: [] } instanceof Array && function (d, b) {\r\n            d.__proto__ = b;\r\n        }) ||\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        function (d, b) {\r\n            for (var p in b) {\r\n                if (b[strHasOwnProperty](p)) {\r\n                    d[p] = b[p];\r\n                }\r\n            }\r\n        };\r\n    return extendStaticsFn(d, b);\r\n};\r\nexport function __extendsFn(d, b) {\r\n    if (typeof b !== strShimFunction && b !== null) {\r\n        throwTypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    }\r\n    extendStaticsFn(d, b);\r\n    function __() {\r\n        this.constructor = d;\r\n    }\r\n    // tslint:disable-next-line: ban-comma-operator\r\n    d[strShimPrototype] = b === null ? objCreate(b) : (__[strShimPrototype] = b[strShimPrototype], new __());\r\n}\r\nexport function __restFn(s, e) {\r\n    var t = {};\r\n    for (var k in s) {\r\n        if (objHasOwnProperty(s, k) && e.indexOf(k) < 0) {\r\n            t[k] = s[k];\r\n        }\r\n    }\r\n    if (s != null && typeof ObjClass[strGetOwnPropertySymbols] === strShimFunction) {\r\n        for (var i = 0, p = ObjClass[strGetOwnPropertySymbols](s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && ObjProto[\"propertyIsEnumerable\"].call(s, p[i])) {\r\n                t[p[i]] = s[p[i]];\r\n            }\r\n        }\r\n    }\r\n    return t;\r\n}\r\nexport function __decorateFn(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = ObjClass[\"getOwnPropertyDescriptor\"](target, key) : desc, d;\r\n    if (__hasReflect && typeof ReflectObj[strDecorate] === strShimFunction) {\r\n        r = ReflectObj[strDecorate](decorators, target, key, desc);\r\n    }\r\n    else {\r\n        for (var i = decorators.length - 1; i >= 0; i--) {\r\n            // eslint-disable-next-line no-cond-assign\r\n            if (d = decorators[i]) {\r\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n            }\r\n        }\r\n    }\r\n    // tslint:disable-next-line:ban-comma-operator\r\n    return c > 3 && r && objDefineProp(target, key, r), r;\r\n}\r\nexport function __paramFn(paramIndex, decorator) {\r\n    return function (target, key) {\r\n        decorator(target, key, paramIndex);\r\n    };\r\n}\r\nexport function __metadataFn(metadataKey, metadataValue) {\r\n    if (__hasReflect && ReflectObj[strMetadata] === strShimFunction) {\r\n        return ReflectObj[strMetadata](metadataKey, metadataValue);\r\n    }\r\n}\r\nexport function __exportStarFn(m, o) {\r\n    for (var p in m) {\r\n        if (p !== strDefault && !objHasOwnProperty(o, p)) {\r\n            __createBindingFn(o, m, p);\r\n        }\r\n    }\r\n}\r\nexport function __createBindingFn(o, m, k, k2) {\r\n    if (k2 === undefined) {\r\n        k2 = k;\r\n    }\r\n    if (!!objDefineProp) {\r\n        objDefineProp(o, k2, {\r\n            enumerable: true,\r\n            get: function () {\r\n                return m[k];\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        o[k2] = m[k];\r\n    }\r\n}\r\nexport function __valuesFn(o) {\r\n    var s = typeof SymbolObj === strShimFunction && SymbolObj[strIterator], m = s && o[s], i = 0;\r\n    if (m) {\r\n        return m.call(o);\r\n    }\r\n    if (o && typeof o.length === \"number\") {\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) {\r\n                    o = void 0;\r\n                }\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    }\r\n    throwTypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\nexport function __readFn(o, n) {\r\n    var m = typeof SymbolObj === strShimFunction && o[SymbolObj[strIterator]];\r\n    if (!m) {\r\n        return o;\r\n    }\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\r\n            ar.push(r.value);\r\n        }\r\n    }\r\n    catch (error) {\r\n        e = {\r\n            error: error\r\n        };\r\n    }\r\n    finally {\r\n        try {\r\n            // tslint:disable-next-line:no-conditional-assignment\r\n            if (r && !r.done && (m = i[\"return\"])) {\r\n                m.call(i);\r\n            }\r\n        }\r\n        finally {\r\n            if (e) {\r\n                // eslint-disable-next-line no-unsafe-finally\r\n                throw e.error;\r\n            }\r\n        }\r\n    }\r\n    return ar;\r\n}\r\n/** @deprecated */\r\nexport function __spreadArraysFn() {\r\n    var theArgs = arguments;\r\n    // Calculate new total size\r\n    for (var s = 0, i = 0, il = theArgs.length; i < il; i++) {\r\n        s += theArgs[i].length;\r\n    }\r\n    // Create new full array\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++) {\r\n        for (var a = theArgs[i], j = 0, jl = a.length; j < jl; j++, k++) {\r\n            r[k] = a[j];\r\n        }\r\n    }\r\n    return r;\r\n}\r\nexport function __spreadArrayFn(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) {\r\n        to[j] = from[i];\r\n    }\r\n    return to;\r\n}\r\nexport function __makeTemplateObjectFn(cooked, raw) {\r\n    if (objDefineProp) {\r\n        objDefineProp(cooked, \"raw\", { value: raw });\r\n    }\r\n    else {\r\n        cooked.raw = raw;\r\n    }\r\n    return cooked;\r\n}\r\nexport function __importStarFn(mod) {\r\n    if (mod && mod.__esModule) {\r\n        return mod;\r\n    }\r\n    var result = {};\r\n    if (mod != null) {\r\n        for (var k in mod) {\r\n            if (k !== strDefault && Object.prototype.hasOwnProperty.call(mod, k)) {\r\n                __createBindingFn(result, mod, k);\r\n            }\r\n        }\r\n    }\r\n    // Set default module\r\n    if (!!objDefineProp) {\r\n        objDefineProp(result, strDefault, { enumerable: true, value: mod });\r\n    }\r\n    else {\r\n        result[strDefault] = mod;\r\n    }\r\n    return result;\r\n}\r\nexport function __importDefaultFn(mod) {\r\n    return (mod && mod.__esModule) ? mod : { strDefault: mod };\r\n}\r\n//# sourceMappingURL=TsLibShims.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { isWeb } from '../utils/platform';\n\nexport const file = 'file';\nexport const untitled = 'untitled';\nexport const git = 'git';\nexport const github = 'github';\nexport const azurerepos = 'azurerepos';\nexport const chatEditingTextModel = 'chat-editing-text-model';\n\n/** Live share scheme */\nexport const vsls = 'vsls';\nexport const walkThroughSnippet = 'walkThroughSnippet';\nexport const vscodeNotebookCell = 'vscode-notebook-cell';\nexport const officeScript = 'office-script';\n\n/** Used for code blocks in chat by vs code core */\nexport const chatCodeBlock = 'vscode-chat-code-block';\n\nexport function getSemanticSupportedSchemes() {\n\tconst alwaysSupportedSchemes = [\n\t\tuntitled,\n\t\twalkThroughSnippet,\n\t\tvscodeNotebookCell,\n\t\tchatCodeBlock,\n\t];\n\n\tif (isWeb()) {\n\t\treturn [\n\t\t\t...(vscode.workspace.workspaceFolders ?? []).map(folder => folder.uri.scheme),\n\t\t\t...alwaysSupportedSchemes,\n\t\t];\n\t}\n\n\treturn [\n\t\tfile,\n\t\t...alwaysSupportedSchemes,\n\t];\n}\n\n/**\n * File scheme for which JS/TS language feature should be disabled\n */\nexport const disabledSchemes = new Set([\n\tgit,\n\tvsls,\n\tgithub,\n\tazurerepos,\n\tchatEditingTextModel,\n]);\n\nexport function isOfScheme(uri: vscode.Uri, ...schemes: string[]): boolean {\n\tconst normalizedUriScheme = uri.scheme.toLowerCase();\n\treturn schemes.some(scheme => normalizedUriScheme === scheme);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { disabledSchemes } from '../configuration/fileSchemes';\nimport { isJsConfigOrTsConfigFileName } from '../configuration/languageDescription';\nimport { isSupportedLanguageMode } from '../configuration/languageIds';\nimport { Disposable } from '../utils/dispose';\nimport { ActiveJsTsEditorTracker } from './activeJsTsEditorTracker';\n\n/**\n * When clause context set when the current file is managed by vscode's built-in typescript extension.\n */\nexport default class ManagedFileContextManager extends Disposable {\n\tprivate static readonly contextName = 'typescript.isManagedFile';\n\n\tprivate isInManagedFileContext: boolean = false;\n\n\tpublic constructor(activeJsTsEditorTracker: ActiveJsTsEditorTracker) {\n\t\tsuper();\n\t\tactiveJsTsEditorTracker.onDidChangeActiveJsTsEditor(this.onDidChangeActiveTextEditor, this, this._disposables);\n\n\t\tthis.onDidChangeActiveTextEditor(activeJsTsEditorTracker.activeJsTsEditor);\n\t}\n\n\tprivate onDidChangeActiveTextEditor(editor?: vscode.TextEditor): void {\n\t\tif (editor) {\n\t\t\tthis.updateContext(this.isManagedFile(editor));\n\t\t} else {\n\t\t\tthis.updateContext(false);\n\t\t}\n\t}\n\n\tprivate updateContext(newValue: boolean) {\n\t\tif (newValue === this.isInManagedFileContext) {\n\t\t\treturn;\n\t\t}\n\n\t\tvscode.commands.executeCommand('setContext', ManagedFileContextManager.contextName, newValue);\n\t\tthis.isInManagedFileContext = newValue;\n\t}\n\n\tprivate isManagedFile(editor: vscode.TextEditor): boolean {\n\t\treturn this.isManagedScriptFile(editor) || this.isManagedConfigFile(editor);\n\t}\n\n\tprivate isManagedScriptFile(editor: vscode.TextEditor): boolean {\n\t\treturn isSupportedLanguageMode(editor.document) && !disabledSchemes.has(editor.document.uri.scheme);\n\t}\n\n\tprivate isManagedConfigFile(editor: vscode.TextEditor): boolean {\n\t\treturn isJsConfigOrTsConfigFileName(editor.document.fileName);\n\t}\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { LanguageDescription } from '../configuration/languageDescription';\nimport { TelemetryReporter } from '../logging/telemetry';\nimport { API } from '../tsServer/api';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport { Location, Position } from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { Disposable } from '../utils/dispose';\nimport FileConfigurationManager, { InlayHintSettingNames, getInlayHintsPreferences } from './fileConfigurationManager';\nimport { conditionalRegistration, requireMinVersion, requireSomeCapability } from './util/dependentRegistration';\n\n\nconst inlayHintSettingNames = Object.freeze([\n\tInlayHintSettingNames.parameterNamesSuppressWhenArgumentMatchesName,\n\tInlayHintSettingNames.parameterNamesEnabled,\n\tInlayHintSettingNames.variableTypesEnabled,\n\tInlayHintSettingNames.variableTypesSuppressWhenTypeMatchesName,\n\tInlayHintSettingNames.propertyDeclarationTypesEnabled,\n\tInlayHintSettingNames.functionLikeReturnTypesEnabled,\n\tInlayHintSettingNames.enumMemberValuesEnabled,\n]);\n\nclass TypeScriptInlayHintsProvider extends Disposable implements vscode.InlayHintsProvider {\n\n\tpublic static readonly minVersion = API.v440;\n\n\tprivate readonly _onDidChangeInlayHints = this._register(new vscode.EventEmitter<void>());\n\tpublic readonly onDidChangeInlayHints = this._onDidChangeInlayHints.event;\n\n\tprivate hasReportedTelemetry = false;\n\n\tconstructor(\n\t\tprivate readonly language: LanguageDescription,\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager,\n\t\tprivate readonly telemetryReporter: TelemetryReporter,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(vscode.workspace.onDidChangeConfiguration(e => {\n\t\t\tif (inlayHintSettingNames.some(settingName => e.affectsConfiguration(language.id + '.' + settingName))) {\n\t\t\t\tthis._onDidChangeInlayHints.fire();\n\t\t\t}\n\t\t}));\n\n\t\t// When a JS/TS file changes, change inlay hints for all visible editors\n\t\t// since changes in one file can effect the hints the others.\n\t\tthis._register(vscode.workspace.onDidChangeTextDocument(e => {\n\t\t\tif (language.languageIds.includes(e.document.languageId)) {\n\t\t\t\tthis._onDidChangeInlayHints.fire();\n\t\t\t}\n\t\t}));\n\t}\n\n\tasync provideInlayHints(model: vscode.TextDocument, range: vscode.Range, token: vscode.CancellationToken): Promise<vscode.InlayHint[] | undefined> {\n\t\tconst filepath = this.client.toOpenTsFilePath(model);\n\t\tif (!filepath) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!areInlayHintsEnabledForFile(this.language, model)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst start = model.offsetAt(range.start);\n\t\tconst length = model.offsetAt(range.end) - start;\n\n\t\tawait this.fileConfigurationManager.ensureConfigurationForDocument(model, token);\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.hasReportedTelemetry) {\n\t\t\tthis.hasReportedTelemetry = true;\n\t\t\t/* __GDPR__\n\t\t\t\t\"inlayHints.provide\" : {\n\t\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\t\"${include}\": [\n\t\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t*/\n\t\t\tthis.telemetryReporter.logTelemetry('inlayHints.provide', {});\n\t\t}\n\n\t\tconst response = await this.client.execute('provideInlayHints', { file: filepath, start, length }, token);\n\t\tif (response.type !== 'response' || !response.success || !response.body) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn response.body.map(hint => {\n\t\t\tconst result = new vscode.InlayHint(\n\t\t\t\tPosition.fromLocation(hint.position),\n\t\t\t\tthis.convertInlayHintText(hint),\n\t\t\t\tfromProtocolInlayHintKind(hint.kind)\n\t\t\t);\n\t\t\tresult.paddingLeft = hint.whitespaceBefore;\n\t\t\tresult.paddingRight = hint.whitespaceAfter;\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tprivate convertInlayHintText(tsHint: Proto.InlayHintItem): string | vscode.InlayHintLabelPart[] {\n\t\tif (tsHint.displayParts) {\n\t\t\treturn tsHint.displayParts.map((part): vscode.InlayHintLabelPart => {\n\t\t\t\tconst out = new vscode.InlayHintLabelPart(part.text);\n\t\t\t\tif (part.span) {\n\t\t\t\t\tout.location = Location.fromTextSpan(this.client.toResource(part.span.file), part.span);\n\t\t\t\t}\n\t\t\t\treturn out;\n\t\t\t});\n\t\t}\n\n\t\treturn tsHint.text;\n\t}\n}\n\nfunction fromProtocolInlayHintKind(kind: Proto.InlayHintKind): vscode.InlayHintKind | undefined {\n\tswitch (kind) {\n\t\tcase 'Parameter': return vscode.InlayHintKind.Parameter;\n\t\tcase 'Type': return vscode.InlayHintKind.Type;\n\t\tcase 'Enum': return undefined;\n\t\tdefault: return undefined;\n\t}\n}\n\nfunction areInlayHintsEnabledForFile(language: LanguageDescription, document: vscode.TextDocument) {\n\tconst config = vscode.workspace.getConfiguration(language.id, document);\n\tconst preferences = getInlayHintsPreferences(config);\n\n\treturn preferences.includeInlayParameterNameHints === 'literals' ||\n\t\tpreferences.includeInlayParameterNameHints === 'all' ||\n\t\tpreferences.includeInlayEnumMemberValueHints ||\n\t\tpreferences.includeInlayFunctionLikeReturnTypeHints ||\n\t\tpreferences.includeInlayFunctionParameterTypeHints ||\n\t\tpreferences.includeInlayPropertyDeclarationTypeHints ||\n\t\tpreferences.includeInlayVariableTypeHints;\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tlanguage: LanguageDescription,\n\tclient: ITypeScriptServiceClient,\n\tfileConfigurationManager: FileConfigurationManager,\n\ttelemetryReporter: TelemetryReporter,\n) {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, TypeScriptInlayHintsProvider.minVersion),\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\tconst provider = new TypeScriptInlayHintsProvider(language, client, fileConfigurationManager, telemetryReporter);\n\t\treturn vscode.languages.registerInlayHintsProvider(selector.semantic, provider);\n\t});\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_DIAG_LOG, _DYN_PUSH } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nexport function createUnloadHandlerContainer() {\r\n    var handlers = [];\r\n    function _addHandler(handler) {\r\n        if (handler) {\r\n            handlers[_DYN_PUSH /* @min:%2epush */](handler);\r\n        }\r\n    }\r\n    function _runHandlers(unloadCtx, unloadState) {\r\n        arrForEach(handlers, function (handler) {\r\n            try {\r\n                handler(unloadCtx, unloadState);\r\n            }\r\n            catch (e) {\r\n                _throwInternal(unloadCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unexpected error calling unload handler - \" + dumpObj(e));\r\n            }\r\n        });\r\n        handlers = [];\r\n    }\r\n    return {\r\n        add: _addHandler,\r\n        run: _runHandlers\r\n    };\r\n}\r\n//# sourceMappingURL=UnloadHandlerContainer.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { createPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { arrForEach, dumpObj, getNavigator, getWindow, isFunction, objKeys } from \"@nevware21/ts-utils\";\r\nimport { _DYN_DATA, _DYN_HEADERS, _DYN_INITIALIZE, _DYN_LENGTH, _DYN_MESSAGE, _DYN_PROTOCOL, _DYN_REPLACE, _DYN_SEND_POST, _DYN_SET_REQUEST_HEADER, _DYN_STATUS, _DYN_TIMEOUT, _DYN_TO_LOWER_CASE, _DYN_URL_STRING, _DYN_VALUE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { DisabledPropertyName } from \"./Constants\";\r\nimport { _throwInternal, _warnToConsole } from \"./DiagnosticLogger\";\r\nimport { getLocation, isBeaconsSupported, isFetchSupported, isXhrSupported, useXDomainRequest } from \"./EnvUtils\";\r\nimport { _getAllResponseHeaders, formatErrorMessageXdr, formatErrorMessageXhr, getResponseText, openXhr } from \"./HelperFuncs\";\r\nvar STR_EMPTY = \"\";\r\nvar STR_NO_RESPONSE_BODY = \"NoResponseBody\";\r\nvar _noResponseQs = \"&\" + STR_NO_RESPONSE_BODY + \"=true\";\r\nvar STR_POST_METHOD = \"POST\";\r\n/**\r\n * This Internal component\r\n * Manager SendPost functions\r\n * SendPostManger\r\n * @internal for internal use only\r\n */\r\nvar SenderPostManager = /** @class */ (function () {\r\n    function SenderPostManager() {\r\n        var _syncFetchPayload = 0; // Keep track of the outstanding sync fetch payload total (as sync fetch has limits)\r\n        var _enableSendPromise;\r\n        var _isInitialized;\r\n        var _diagLog;\r\n        var _isOneDs;\r\n        var _onCompleteFuncs;\r\n        var _disableCredentials;\r\n        var _fetchCredentials;\r\n        var _fallbackInst;\r\n        var _disableXhr;\r\n        var _disableBeacon;\r\n        var _disableBeaconSync;\r\n        var _disableFetchKeepAlive;\r\n        var _addNoResponse;\r\n        var _timeoutWrapper;\r\n        dynamicProto(SenderPostManager, this, function (_self, _base) {\r\n            var _sendCredentials = true; // for 1ds\r\n            _initDefaults();\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, diagLog) {\r\n                _diagLog = diagLog;\r\n                if (_isInitialized) {\r\n                    _throwInternal(_diagLog, 1 /* eLoggingSeverity.CRITICAL */, 28 /* _eInternalMessageId.SenderNotInitialized */, \"Sender is already initialized\");\r\n                }\r\n                _self.SetConfig(config);\r\n                _isInitialized = true;\r\n            };\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_isInitialized, _isOneDs, _disableCredentials, _enableSendPromise];\r\n            };\r\n            // This componet might get its config from sender, offline sender, 1ds post\r\n            // so set this function to mock dynamic changes\r\n            _self.SetConfig = function (config) {\r\n                try {\r\n                    _onCompleteFuncs = config.senderOnCompleteCallBack || {};\r\n                    _disableCredentials = !!config.disableCredentials;\r\n                    _fetchCredentials = config.fetchCredentials;\r\n                    _isOneDs = !!config.isOneDs;\r\n                    _enableSendPromise = !!config.enableSendPromise;\r\n                    _disableXhr = !!config.disableXhr;\r\n                    _disableBeacon = !!config.disableBeacon;\r\n                    _disableBeaconSync = !!config.disableBeaconSync;\r\n                    _timeoutWrapper = config.timeWrapper;\r\n                    _addNoResponse = !!config.addNoResponse;\r\n                    _disableFetchKeepAlive = !!config.disableFetchKeepAlive;\r\n                    _fallbackInst = { sendPOST: _xhrSender };\r\n                    if (!_isOneDs) {\r\n                        _sendCredentials = false; // for appInsights, set it to false always\r\n                    }\r\n                    if (_disableCredentials) {\r\n                        var location_1 = getLocation();\r\n                        if (location_1 && location_1.protocol && location_1.protocol[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() === \"file:\") {\r\n                            // Special case where a local html file fails with a CORS error on Chromium browsers\r\n                            _sendCredentials = false;\r\n                        }\r\n                    }\r\n                    return true;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return false;\r\n            };\r\n            _self.getSyncFetchPayload = function () {\r\n                return _syncFetchPayload;\r\n            };\r\n            _self.getSenderInst = function (transports, sync) {\r\n                if (transports && transports[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    return _getSenderInterface(transports, sync);\r\n                }\r\n                return null;\r\n            };\r\n            _self.getFallbackInst = function () {\r\n                return _fallbackInst;\r\n            };\r\n            _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] = function (unloadCtx, unloadState) {\r\n                _initDefaults();\r\n            };\r\n            /**\r\n             * success handler\r\n             */\r\n            function _onSuccess(res, onComplete) {\r\n                _doOnComplete(onComplete, 200, {}, res);\r\n            }\r\n            /**\r\n             * error handler\r\n             */\r\n            function _onError(message, onComplete) {\r\n                _throwInternal(_diagLog, 2 /* eLoggingSeverity.WARNING */, 26 /* _eInternalMessageId.OnError */, \"Failed to send telemetry.\", { message: message });\r\n                _doOnComplete(onComplete, 400, {});\r\n            }\r\n            function _onNoPayloadUrl(onComplete) {\r\n                _onError(\"No endpoint url is provided for the batch\", onComplete);\r\n            }\r\n            function _getSenderInterface(transports, syncSupport) {\r\n                var _a;\r\n                var transportType = 0 /* TransportType.NotSet */;\r\n                var sendPostFunc = null;\r\n                var lp = 0;\r\n                while (sendPostFunc == null && lp < transports[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    transportType = transports[lp];\r\n                    if (!_disableXhr && transportType === 1 /* TransportType.Xhr */) {\r\n                        if (useXDomainRequest()) {\r\n                            // IE 8 and 9\r\n                            sendPostFunc = _xdrSender;\r\n                        }\r\n                        else if (isXhrSupported()) {\r\n                            sendPostFunc = _xhrSender;\r\n                        }\r\n                    }\r\n                    else if (transportType === 2 /* TransportType.Fetch */ && isFetchSupported(syncSupport) && (!syncSupport || !_disableFetchKeepAlive)) {\r\n                        sendPostFunc = _doFetchSender;\r\n                    }\r\n                    else if (transportType === 3 /* TransportType.Beacon */ && isBeaconsSupported() && (syncSupport ? !_disableBeaconSync : !_disableBeacon)) {\r\n                        sendPostFunc = _beaconSender;\r\n                    }\r\n                    lp++;\r\n                }\r\n                if (sendPostFunc) {\r\n                    return _a = {\r\n                            _transport: transportType,\r\n                            _isSync: syncSupport\r\n                        },\r\n                        _a[_DYN_SEND_POST /* @min:sendPOST */] = sendPostFunc,\r\n                        _a;\r\n                }\r\n                return null;\r\n            }\r\n            function _doOnComplete(oncomplete, status, headers, response) {\r\n                try {\r\n                    oncomplete && oncomplete(status, headers, response);\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n            }\r\n            function _doBeaconSend(payload, oncomplete) {\r\n                var nav = getNavigator();\r\n                var url = payload[_DYN_URL_STRING /* @min:%2eurlString */];\r\n                if (!url) {\r\n                    _onNoPayloadUrl(oncomplete);\r\n                    // return true here, because we don't want to retry it with fallback sender\r\n                    return true;\r\n                }\r\n                url = payload[_DYN_URL_STRING /* @min:%2eurlString */] + (_addNoResponse ? _noResponseQs : STR_EMPTY);\r\n                var data = payload[_DYN_DATA /* @min:%2edata */];\r\n                // Chrome only allows CORS-safelisted values for the sendBeacon data argument\r\n                // see: https://bugs.chromium.org/p/chromium/issues/detail?id=720283\r\n                // Chrome only allows CORS-safelisted values for the sendBeacon data argument\r\n                // see: https://bugs.chromium.org/p/chromium/issues/detail?id=720283\r\n                var plainTextBatch = _isOneDs ? data : new Blob([data], { type: \"text/plain;charset=UTF-8\" });\r\n                // The sendBeacon method returns true if the user agent is able to successfully queue the data for transfer. Otherwise it returns false.\r\n                var queued = nav.sendBeacon(url, plainTextBatch);\r\n                return queued;\r\n            }\r\n            /**\r\n             * Send Beacon API request\r\n             * @param payload - {string} - The data payload to be sent.\r\n             * @param sync - {boolean} - not used\r\n             * Note: Beacon API does not support custom headers and we are not able to get\r\n             * appId from the backend for the correct correlation.\r\n             */\r\n            function _beaconSender(payload, oncomplete, sync) {\r\n                var data = payload[_DYN_DATA /* @min:%2edata */];\r\n                try {\r\n                    if (data) {\r\n                        // The sendBeacon method returns true if the user agent is able to successfully queue the data for transfer. Otherwise it returns false.\r\n                        if (!_doBeaconSend(payload, oncomplete)) {\r\n                            var onRetry = _onCompleteFuncs && _onCompleteFuncs.beaconOnRetry;\r\n                            if (onRetry && isFunction(onRetry)) {\r\n                                onRetry(payload, oncomplete, _doBeaconSend);\r\n                            }\r\n                            else {\r\n                                _fallbackInst && _fallbackInst[_DYN_SEND_POST /* @min:%2esendPOST */](payload, oncomplete, true);\r\n                                _throwInternal(_diagLog, 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + \"Failed to send telemetry with Beacon API, retried with normal sender.\");\r\n                            }\r\n                        }\r\n                        else {\r\n                            // if can send\r\n                            _onSuccess(STR_EMPTY, oncomplete);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    _isOneDs && _warnToConsole(_diagLog, \"Failed to send telemetry using sendBeacon API. Ex:\" + dumpObj(e));\r\n                    _doOnComplete(oncomplete, _isOneDs ? 0 : 400, {}, STR_EMPTY);\r\n                }\r\n                return;\r\n            }\r\n            /**\r\n             * Send XMLHttpRequest\r\n             * @param payload - {string} - The data payload to be sent.\r\n             * @param sync - {boolean} - Indicates if the request should be sent synchronously\r\n             */\r\n            function _xhrSender(payload, oncomplete, sync) {\r\n                //let  internalPayload = payload as IInternalPayloadData;\r\n                var thePromise;\r\n                var resolveFunc;\r\n                var rejectFunc;\r\n                var headers = payload[_DYN_HEADERS /* @min:%2eheaders */] || {};\r\n                if (!sync && _enableSendPromise) {\r\n                    thePromise = createPromise(function (resolve, reject) {\r\n                        resolveFunc = resolve;\r\n                        rejectFunc = reject;\r\n                    });\r\n                }\r\n                if (_isOneDs && sync && payload.disableXhrSync) {\r\n                    sync = false;\r\n                }\r\n                //const xhr = new XMLHttpRequest();\r\n                var endPointUrl = payload[_DYN_URL_STRING /* @min:%2eurlString */];\r\n                if (!endPointUrl) {\r\n                    _onNoPayloadUrl(oncomplete);\r\n                    resolveFunc && resolveFunc(false);\r\n                    return;\r\n                }\r\n                var xhr = openXhr(STR_POST_METHOD, endPointUrl, _sendCredentials, true, sync, payload[_DYN_TIMEOUT /* @min:%2etimeout */]);\r\n                if (!_isOneDs) {\r\n                    // application/json should NOT add to 1ds post by default\r\n                    xhr[_DYN_SET_REQUEST_HEADER /* @min:%2esetRequestHeader */](\"Content-type\", \"application/json\");\r\n                }\r\n                arrForEach(objKeys(headers), function (headerName) {\r\n                    xhr[_DYN_SET_REQUEST_HEADER /* @min:%2esetRequestHeader */](headerName, headers[headerName]);\r\n                });\r\n                xhr.onreadystatechange = function () {\r\n                    if (!_isOneDs) {\r\n                        _doOnReadyFunc(xhr);\r\n                        if (xhr.readyState === 4) {\r\n                            resolveFunc && resolveFunc(true);\r\n                        }\r\n                    }\r\n                };\r\n                xhr.onload = function () {\r\n                    if (_isOneDs) {\r\n                        _doOnReadyFunc(xhr);\r\n                    }\r\n                };\r\n                function _doOnReadyFunc(xhr) {\r\n                    var onReadyFunc = _onCompleteFuncs && _onCompleteFuncs.xhrOnComplete;\r\n                    var onReadyFuncExist = onReadyFunc && isFunction(onReadyFunc);\r\n                    if (onReadyFuncExist) {\r\n                        onReadyFunc(xhr, oncomplete, payload);\r\n                    }\r\n                    else {\r\n                        var response = getResponseText(xhr);\r\n                        _doOnComplete(oncomplete, xhr[_DYN_STATUS /* @min:%2estatus */], _getAllResponseHeaders(xhr, _isOneDs), response);\r\n                    }\r\n                }\r\n                xhr.onerror = function (event) {\r\n                    _doOnComplete(oncomplete, _isOneDs ? xhr[_DYN_STATUS /* @min:%2estatus */] : 400, _getAllResponseHeaders(xhr, _isOneDs), _isOneDs ? STR_EMPTY : formatErrorMessageXhr(xhr));\r\n                    rejectFunc && rejectFunc(event);\r\n                };\r\n                xhr.ontimeout = function () {\r\n                    _doOnComplete(oncomplete, _isOneDs ? xhr[_DYN_STATUS /* @min:%2estatus */] : 500, _getAllResponseHeaders(xhr, _isOneDs), _isOneDs ? STR_EMPTY : formatErrorMessageXhr(xhr));\r\n                    resolveFunc && resolveFunc(false);\r\n                };\r\n                xhr.send(payload[_DYN_DATA /* @min:%2edata */]);\r\n                return thePromise;\r\n            }\r\n            /**\r\n             * Send fetch API request\r\n             * @param payload - {string} - The data payload to be sent.\r\n             * @param sync - {boolean} - For fetch this identifies whether we are \"unloading\" (false) or a normal request\r\n             */\r\n            function _doFetchSender(payload, oncomplete, sync) {\r\n                var _a;\r\n                var endPointUrl = payload[_DYN_URL_STRING /* @min:%2eurlString */];\r\n                var batch = payload[_DYN_DATA /* @min:%2edata */];\r\n                var plainTextBatch = _isOneDs ? batch : new Blob([batch], { type: \"application/json\" });\r\n                var thePromise;\r\n                var resolveFunc;\r\n                var rejectFunc;\r\n                var requestHeaders = new Headers();\r\n                var batchLength = batch[_DYN_LENGTH /* @min:%2elength */];\r\n                var ignoreResponse = false;\r\n                var responseHandled = false;\r\n                var headers = payload[_DYN_HEADERS /* @min:%2eheaders */] || {};\r\n                //TODO: handle time out for 1ds\r\n                var init = (_a = {\r\n                        method: STR_POST_METHOD,\r\n                        body: plainTextBatch\r\n                    },\r\n                    _a[DisabledPropertyName] = true // Mark so we don't attempt to track this request\r\n                ,\r\n                    _a);\r\n                // Only add headers if there are headers to add, due to issue with some polyfills\r\n                if (payload.headers && objKeys(payload.headers)[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    arrForEach(objKeys(headers), function (headerName) {\r\n                        requestHeaders.append(headerName, headers[headerName]);\r\n                    });\r\n                    init[_DYN_HEADERS /* @min:%2eheaders */] = requestHeaders;\r\n                }\r\n                if (_fetchCredentials) { // if user passed in this value via post channel (1ds), then use it\r\n                    init.credentials = _fetchCredentials;\r\n                }\r\n                else if (_sendCredentials && _isOneDs) {\r\n                    // for 1ds, Don't send credentials when URL is file://\r\n                    init.credentials = \"include\";\r\n                }\r\n                if (sync) {\r\n                    init.keepalive = true;\r\n                    _syncFetchPayload += batchLength;\r\n                    if (_isOneDs) {\r\n                        if (payload[\"_sendReason\"] === 2 /* SendRequestReason.Unload */) {\r\n                            // As a sync request (during unload), it is unlikely that we will get a chance to process the response so\r\n                            // just like beacon send assume that the events have been accepted and processed\r\n                            ignoreResponse = true;\r\n                            if (_addNoResponse) {\r\n                                endPointUrl += _noResponseQs;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        // for appinsights, set to true for all sync request\r\n                        ignoreResponse = true;\r\n                    }\r\n                }\r\n                var request = new Request(endPointUrl, init);\r\n                try {\r\n                    // Also try and tag the request (just in case the value in init is not copied over)\r\n                    request[DisabledPropertyName] = true;\r\n                }\r\n                catch (e) {\r\n                    // If the environment has locked down the XMLHttpRequest (preventExtensions and/or freeze), this would\r\n                    // cause the request to fail and we no telemetry would be sent\r\n                }\r\n                if (!sync && _enableSendPromise) {\r\n                    thePromise = createPromise(function (resolve, reject) {\r\n                        resolveFunc = resolve;\r\n                        rejectFunc = reject;\r\n                    });\r\n                }\r\n                if (!endPointUrl) {\r\n                    _onNoPayloadUrl(oncomplete);\r\n                    resolveFunc && resolveFunc(false);\r\n                    return;\r\n                }\r\n                function _handleError(res) {\r\n                    // In case there is an error in the request. Set the status to 0 for 1ds and 400 for appInsights\r\n                    // so that the events can be retried later.\r\n                    _doOnComplete(oncomplete, _isOneDs ? 0 : 400, {}, _isOneDs ? STR_EMPTY : res);\r\n                }\r\n                function _onFetchComplete(response, payload, value) {\r\n                    var status = response[_DYN_STATUS /* @min:%2estatus */];\r\n                    var onCompleteFunc = _onCompleteFuncs.fetchOnComplete;\r\n                    if (onCompleteFunc && isFunction(onCompleteFunc)) {\r\n                        onCompleteFunc(response, oncomplete, value || STR_EMPTY, payload);\r\n                    }\r\n                    else {\r\n                        _doOnComplete(oncomplete, status, {}, value || STR_EMPTY);\r\n                    }\r\n                }\r\n                try {\r\n                    doAwaitResponse(fetch(_isOneDs ? endPointUrl : request, _isOneDs ? init : null), function (result) {\r\n                        if (sync) {\r\n                            _syncFetchPayload -= batchLength;\r\n                            batchLength = 0;\r\n                        }\r\n                        if (!responseHandled) {\r\n                            responseHandled = true;\r\n                            if (!result.rejected) {\r\n                                var response_1 = result[_DYN_VALUE /* @min:%2evalue */];\r\n                                try {\r\n                                    /**\r\n                                     * The Promise returned from fetch() won’t reject on HTTP error status even if the response is an HTTP 404 or 500.\r\n                                     * Instead, it will resolve normally (with ok status set to false), and it will only reject on network failure\r\n                                     * or if anything prevented the request from completing.\r\n                                     */\r\n                                    if (!_isOneDs && !response_1.ok) {\r\n                                        // this is for appInsights only\r\n                                        _handleError(response_1.statusText);\r\n                                        resolveFunc && resolveFunc(false);\r\n                                    }\r\n                                    else {\r\n                                        if (_isOneDs && !response_1.body) {\r\n                                            _onFetchComplete(response_1, null, STR_EMPTY);\r\n                                            resolveFunc && resolveFunc(true);\r\n                                        }\r\n                                        else {\r\n                                            doAwaitResponse(response_1.text(), function (resp) {\r\n                                                _onFetchComplete(response_1, payload, resp[_DYN_VALUE /* @min:%2evalue */]);\r\n                                                resolveFunc && resolveFunc(true);\r\n                                            });\r\n                                        }\r\n                                    }\r\n                                }\r\n                                catch (e) {\r\n                                    _handleError(dumpObj(e));\r\n                                    rejectFunc && rejectFunc(e);\r\n                                }\r\n                            }\r\n                            else {\r\n                                _handleError(result.reason && result.reason[_DYN_MESSAGE /* @min:%2emessage */]);\r\n                                rejectFunc && rejectFunc(result.reason);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                catch (e) {\r\n                    if (!responseHandled) {\r\n                        _handleError(dumpObj(e));\r\n                        rejectFunc && rejectFunc(e);\r\n                    }\r\n                }\r\n                if (ignoreResponse && !responseHandled) {\r\n                    // Assume success during unload processing as we most likely won't get the response\r\n                    responseHandled = true;\r\n                    _doOnComplete(oncomplete, 200, {});\r\n                    resolveFunc && resolveFunc(true);\r\n                }\r\n                if (_isOneDs && !responseHandled && payload[_DYN_TIMEOUT /* @min:%2etimeout */] > 0) {\r\n                    // Simulate timeout\r\n                    _timeoutWrapper && _timeoutWrapper.set(function () {\r\n                        if (!responseHandled) {\r\n                            // Assume a 500 response (which will cause a retry)\r\n                            responseHandled = true;\r\n                            _doOnComplete(oncomplete, 500, {});\r\n                            resolveFunc && resolveFunc(true);\r\n                        }\r\n                    }, payload[_DYN_TIMEOUT /* @min:%2etimeout */]);\r\n                }\r\n                return thePromise;\r\n            }\r\n            /**\r\n             * Send XDomainRequest\r\n             * @param payload - {string} - The data payload to be sent.\r\n             * @param sync - {boolean} - Indicates if the request should be sent synchronously\r\n             *\r\n             * Note: XDomainRequest does not support sync requests. This 'isAsync' parameter is added\r\n             * to maintain consistency with the xhrSender's contract\r\n             * Note: XDomainRequest does not support custom headers and we are not able to get\r\n             * appId from the backend for the correct correlation.\r\n             */\r\n            function _xdrSender(payload, oncomplete, sync) {\r\n                // It doesn't support custom headers, so no action is taken with current requestHeaders\r\n                var _window = getWindow();\r\n                var xdr = new XDomainRequest();\r\n                var data = payload[_DYN_DATA /* @min:%2edata */];\r\n                xdr.onload = function () {\r\n                    var response = getResponseText(xdr);\r\n                    var onloadFunc = _onCompleteFuncs && _onCompleteFuncs.xdrOnComplete;\r\n                    if (onloadFunc && isFunction(onloadFunc)) {\r\n                        onloadFunc(xdr, oncomplete, payload);\r\n                    }\r\n                    else {\r\n                        _doOnComplete(oncomplete, 200, {}, response);\r\n                    }\r\n                };\r\n                xdr.onerror = function () {\r\n                    _doOnComplete(oncomplete, 400, {}, _isOneDs ? STR_EMPTY : formatErrorMessageXdr(xdr));\r\n                };\r\n                xdr.ontimeout = function () {\r\n                    _doOnComplete(oncomplete, 500, {});\r\n                };\r\n                xdr.onprogress = function () { };\r\n                // XDomainRequest requires the same protocol as the hosting page.\r\n                // If the protocol doesn't match, we can't send the telemetry :(.\r\n                var hostingProtocol = _window && _window.location && _window.location[_DYN_PROTOCOL /* @min:%2eprotocol */] || \"\";\r\n                var endpoint = payload[_DYN_URL_STRING /* @min:%2eurlString */];\r\n                if (!endpoint) {\r\n                    _onNoPayloadUrl(oncomplete);\r\n                    return;\r\n                }\r\n                if (!_isOneDs && endpoint.lastIndexOf(hostingProtocol, 0) !== 0) {\r\n                    var msg = \"Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.\";\r\n                    _throwInternal(_diagLog, 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + msg);\r\n                    _onError(msg, oncomplete);\r\n                    return;\r\n                }\r\n                var endpointUrl = _isOneDs ? endpoint : endpoint[_DYN_REPLACE /* @min:%2ereplace */](/^(https?:)/, \"\");\r\n                xdr.open(STR_POST_METHOD, endpointUrl);\r\n                if (payload[_DYN_TIMEOUT /* @min:%2etimeout */]) {\r\n                    xdr[_DYN_TIMEOUT /* @min:%2etimeout */] = payload[_DYN_TIMEOUT /* @min:%2etimeout */];\r\n                }\r\n                xdr.send(data);\r\n                if (_isOneDs && sync) {\r\n                    _timeoutWrapper && _timeoutWrapper.set(function () {\r\n                        xdr.send(data);\r\n                    }, 0);\r\n                }\r\n                else {\r\n                    xdr.send(data);\r\n                }\r\n            }\r\n            function _initDefaults() {\r\n                _syncFetchPayload = 0;\r\n                _isInitialized = false;\r\n                _enableSendPromise = false;\r\n                _diagLog = null;\r\n                _isOneDs = null;\r\n                _onCompleteFuncs = null;\r\n                _disableCredentials = null;\r\n                _fetchCredentials = null;\r\n                _fallbackInst = null;\r\n                _disableXhr = false;\r\n                _disableBeacon = false;\r\n                _disableBeaconSync = false;\r\n                _disableFetchKeepAlive = false;\r\n                _addNoResponse = false;\r\n                _timeoutWrapper = null;\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for SenderPostManager.prototype.initialize.\r\n// Removed Stub for SenderPostManager.prototype.getSyncFetchPayload.\r\n// Removed Stub for SenderPostManager.prototype.SetConfig.\r\n// Removed Stub for SenderPostManager.prototype.getSenderInst.\r\n// Removed Stub for SenderPostManager.prototype.getFallbackInst.\r\n// Removed Stub for SenderPostManager.prototype._doTeardown.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    SenderPostManager.__ieDyn=1;\n\n    return SenderPostManager;\r\n}());\r\nexport { SenderPostManager };\r\n//# sourceMappingURL=SenderPostManager.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ApiService = exports.ServicePseudoTerminal = exports.TerminalMode = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst sync_api_common_1 = require(\"@vscode/sync-api-common\");\nconst terminalRegExp = /(\\r\\n)|(\\n)/gm;\nclass LineBuffer {\n    constructor() {\n        this.cursor = 0;\n        this.content = [];\n    }\n    clear() {\n        this.cursor = 0;\n        this.content = [];\n    }\n    getLine() {\n        return this.content.join('');\n    }\n    getCursor() {\n        return this.cursor;\n    }\n    isCursorAtEnd() {\n        return this.cursor === this.content.length;\n    }\n    isCursorAtBeginning() {\n        return this.cursor === 0;\n    }\n    insert(value) {\n        for (const char of value) {\n            this.content.splice(this.cursor, 0, char);\n            this.cursor++;\n        }\n    }\n    del() {\n        if (this.cursor === this.content.length) {\n            return false;\n        }\n        this.content.splice(this.cursor, 1);\n        return true;\n    }\n    backspace() {\n        if (this.cursor === 0) {\n            return false;\n        }\n        this.cursor -= 1;\n        this.content.splice(this.cursor, 1);\n        return true;\n    }\n    moveCursorRelative(characters) {\n        const newValue = this.cursor + characters;\n        if (newValue < 0 || newValue > this.content.length) {\n            return false;\n        }\n        this.cursor = newValue;\n        return true;\n    }\n    moveCursorStartOfLine() {\n        if (this.cursor === 0) {\n            return false;\n        }\n        this.cursor = 0;\n        return true;\n    }\n    moveCursorEndOfLine() {\n        if (this.cursor === this.content.length) {\n            return false;\n        }\n        this.cursor = this.content.length;\n        return true;\n    }\n    moveCursorWordLeft() {\n        if (this.cursor === 0) {\n            return false;\n        }\n        let index;\n        // check if we are at the beginning of a word\n        if (this.content[this.cursor - 1] === ' ') {\n            index = this.cursor - 2;\n            while (index > 0) {\n                if (this.content[index] === ' ') {\n                    index--;\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        else {\n            index = this.cursor;\n        }\n        if (index === 0) {\n            this.cursor = index;\n            return true;\n        }\n        // On the first character that is not space\n        while (index > 0) {\n            if (this.content[index] === ' ') {\n                index++;\n                break;\n            }\n            else {\n                index--;\n            }\n        }\n        this.cursor = index;\n        return true;\n    }\n    moveCursorWordRight() {\n        if (this.cursor === this.content.length) {\n            return false;\n        }\n        let index;\n        if (this.content[this.cursor] === ' ') {\n            index = this.cursor + 1;\n            while (index < this.content.length) {\n                if (this.content[index] === ' ') {\n                    index++;\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        else {\n            index = this.cursor;\n        }\n        if (index === this.content.length) {\n            this.cursor = index;\n            return true;\n        }\n        while (index < this.content.length) {\n            if (this.content[index] === ' ') {\n                break;\n            }\n            else {\n                index++;\n            }\n        }\n        this.cursor = index;\n        return true;\n    }\n}\nvar TerminalMode;\n(function (TerminalMode) {\n    TerminalMode[TerminalMode[\"idle\"] = 1] = \"idle\";\n    TerminalMode[TerminalMode[\"inUse\"] = 2] = \"inUse\";\n})(TerminalMode = exports.TerminalMode || (exports.TerminalMode = {}));\nvar ServicePseudoTerminal;\n(function (ServicePseudoTerminal) {\n    function create(mode) {\n        return new ServiceTerminalImpl(mode);\n    }\n    ServicePseudoTerminal.create = create;\n})(ServicePseudoTerminal = exports.ServicePseudoTerminal || (exports.ServicePseudoTerminal = {}));\nclass ServiceTerminalImpl {\n    constructor(mode) {\n        this.mode = mode;\n        this._onDidClose = new vscode.EventEmitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidWrite = new vscode.EventEmitter();\n        this.onDidWrite = this._onDidWrite.event;\n        this._onDidChangeName = new vscode.EventEmitter;\n        this.onDidChangeName = this._onDidChangeName.event;\n        this._onDidCtrlC = new vscode.EventEmitter;\n        this.onDidCtrlC = this._onDidCtrlC.event;\n        this._onAnyKey = new vscode.EventEmitter;\n        this.onAnyKey = this._onAnyKey.event;\n        this.lines = [];\n        this.lineBuffer = new LineBuffer();\n        this.isOpen = false;\n    }\n    setMode(mode) {\n        this.mode = mode;\n    }\n    setName(name) {\n        if (this.isOpen) {\n            this._onDidChangeName.fire(name);\n        }\n        else {\n            this.nameBuffer = name;\n        }\n    }\n    open() {\n        this.isOpen = true;\n        if (this.nameBuffer !== undefined) {\n            this._onDidChangeName.fire(this.nameBuffer);\n            this.nameBuffer = undefined;\n        }\n        if (this.writeBuffer !== undefined) {\n            for (const item of this.writeBuffer) {\n                this._onDidWrite.fire(item);\n            }\n            this.writeBuffer = undefined;\n        }\n    }\n    close() {\n        this._onDidClose.fire();\n    }\n    readline() {\n        if (this.readlineCallback !== undefined) {\n            throw new Error(`Already in readline mode`);\n        }\n        if (this.lines.length > 0) {\n            return Promise.resolve(this.lines.shift());\n        }\n        return new Promise((resolve) => {\n            this.readlineCallback = resolve;\n        });\n    }\n    write(str) {\n        if (this.isOpen) {\n            this._onDidWrite.fire(str);\n        }\n        else {\n            if (this.writeBuffer === undefined) {\n                this.writeBuffer = [];\n            }\n            this.writeBuffer.push(str);\n        }\n    }\n    handleInput(data) {\n        if (this.mode === TerminalMode.idle) {\n            this._onAnyKey.fire();\n            return;\n        }\n        const previousCursor = this.lineBuffer.getCursor();\n        switch (data) {\n            case '\\x03': // ctrl+C\n                this._onDidCtrlC.fire();\n                break;\n            case '\\x06': // ctrl+f\n            case '\\x1b[C': // right\n                this.adjustCursor(this.lineBuffer.moveCursorRelative(1), previousCursor, this.lineBuffer.getCursor());\n                break;\n            case '\\x1bf': // alt+f\n            case '\\x1b[1;5C': // ctrl+right\n                this.adjustCursor(this.lineBuffer.moveCursorWordRight(), previousCursor, this.lineBuffer.getCursor());\n                break;\n            case '\\x02': // ctrl+b\n            case '\\x1b[D': // left\n                this.adjustCursor(this.lineBuffer.moveCursorRelative(-1), previousCursor, this.lineBuffer.getCursor());\n                break;\n            case '\\x1bb': // alt+b\n            case '\\x1b[1;5D': // ctrl+left\n                this.adjustCursor(this.lineBuffer.moveCursorWordLeft(), previousCursor, this.lineBuffer.getCursor());\n                break;\n            case '\\x01': // ctrl+a\n            case '\\x1b[H': // home\n                this.adjustCursor(this.lineBuffer.moveCursorStartOfLine(), previousCursor, this.lineBuffer.getCursor());\n                break;\n            case '\\x05': // ctrl+e\n            case '\\x1b[F': // end\n                this.adjustCursor(this.lineBuffer.moveCursorEndOfLine(), previousCursor, this.lineBuffer.getCursor());\n                break;\n            case '\\x1b[A': // up\n                this.bell();\n                break;\n            case '\\x1b[B': // down\n                this.bell();\n                break;\n            case '\\x08': // shift+backspace\n            case '\\x7F': // backspace\n                this.lineBuffer.backspace() ? this._onDidWrite.fire('\\x1b[D\\x1b[P') : this.bell();\n                break;\n            case '\\x1b[3~': // delete key\n                this.lineBuffer.del() ? this._onDidWrite.fire('\\x1b[P') : this.bell();\n                break;\n            case '\\r': // enter\n                this.handleEnter();\n                break;\n            default:\n                this.lineBuffer.insert(data);\n                if (!this.lineBuffer.isCursorAtEnd()) {\n                    this._onDidWrite.fire('\\x1b[@');\n                }\n                this._onDidWrite.fire(data);\n        }\n    }\n    handleEnter() {\n        this._onDidWrite.fire('\\r\\n');\n        const line = this.lineBuffer.getLine();\n        this.lineBuffer.clear();\n        this.lines.push(line);\n        if (this.readlineCallback !== undefined) {\n            this.readlineCallback(`${this.lines.shift()}\\n`);\n            this.readlineCallback = undefined;\n        }\n    }\n    adjustCursor(success, oldCursor, newCursor) {\n        if (!success) {\n            this.bell();\n            return;\n        }\n        const change = oldCursor - newCursor;\n        const code = change > 0 ? 'D' : 'C';\n        const sequence = `\\x1b[${code}`.repeat(Math.abs(change));\n        this._onDidWrite.fire(sequence);\n    }\n    bell() {\n        this._onDidWrite.fire('\\x07');\n    }\n}\nclass ApiService {\n    constructor(_name, receiver, options) {\n        this.connection = receiver;\n        this.options = options;\n        this.textEncoder = (0, sync_api_common_1.RAL)().TextEncoder.create();\n        this.textDecoder = (0, sync_api_common_1.RAL)().TextDecoder.create();\n        this.pty = options?.pty ?? new ServiceTerminalImpl(TerminalMode.inUse);\n        const handleError = (error) => {\n            if (error instanceof vscode.FileSystemError) {\n                return { errno: this.asFileSystemError(error) };\n            }\n            return { errno: sync_api_common_1.RPCErrno.UnknownError };\n        };\n        this.connection.onRequest('timer/sleep', async (params) => {\n            await new Promise((resolve) => {\n                (0, sync_api_common_1.RAL)().timer.setTimeout(resolve, params.ms);\n            });\n            return { errno: 0 };\n        });\n        this.connection.onRequest('terminal/write', (params) => {\n            if (params !== undefined && params.binary !== undefined) {\n                const str = this.textDecoder.decode(params.binary.slice()).replace(terminalRegExp, (match, m1, m2) => {\n                    if (m1) {\n                        return m1;\n                    }\n                    else if (m2) {\n                        return '\\r\\n';\n                    }\n                    else {\n                        return match;\n                    }\n                });\n                this.pty.write(str);\n            }\n            return { errno: 0 };\n        });\n        this.connection.onRequest('terminal/read', async () => {\n            const line = await this.pty.readline();\n            return { errno: 0, data: this.textEncoder.encode(line) };\n        });\n        this.connection.onRequest('fileSystem/stat', async (params, resultBuffer) => {\n            try {\n                const uri = vscode.Uri.from(params.uri);\n                const vStat = await vscode.workspace.fs.stat(uri);\n                const stat = sync_api_common_1.DTOs.Stat.create(resultBuffer);\n                stat.type = vStat.type;\n                stat.ctime = vStat.mtime;\n                stat.mtime = vStat.mtime;\n                stat.size = vStat.size;\n                if (vStat.permissions !== undefined) {\n                    stat.permission = vStat.permissions;\n                }\n                return { errno: 0 };\n            }\n            catch (error) {\n                return handleError(error);\n            }\n        });\n        this.connection.onRequest('fileSystem/readFile', async (params) => {\n            try {\n                const uri = vscode.Uri.from(params.uri);\n                const contents = await vscode.workspace.fs.readFile(uri);\n                return { errno: 0, data: contents };\n            }\n            catch (error) {\n                return handleError(error);\n            }\n        });\n        this.connection.onRequest('fileSystem/writeFile', async (params) => {\n            try {\n                const uri = vscode.Uri.from(params.uri);\n                await vscode.workspace.fs.writeFile(uri, params.binary);\n                return { errno: 0 };\n            }\n            catch (error) {\n                return handleError(error);\n            }\n        });\n        this.connection.onRequest('fileSystem/readDirectory', async (params) => {\n            try {\n                const uri = vscode.Uri.from(params.uri);\n                const entries = await vscode.workspace.fs.readDirectory(uri);\n                return { errno: 0, data: entries };\n            }\n            catch (error) {\n                return handleError(error);\n            }\n        });\n        this.connection.onRequest('fileSystem/createDirectory', async (params) => {\n            try {\n                const uri = vscode.Uri.from(params.uri);\n                await vscode.workspace.fs.createDirectory(uri);\n                return { errno: 0 };\n            }\n            catch (error) {\n                return handleError(error);\n            }\n        });\n        this.connection.onRequest('fileSystem/delete', async (params) => {\n            try {\n                const uri = vscode.Uri.from(params.uri);\n                await vscode.workspace.fs.delete(uri, params.options);\n                return { errno: 0 };\n            }\n            catch (error) {\n                return handleError(error);\n            }\n        });\n        this.connection.onRequest('fileSystem/rename', async (params) => {\n            try {\n                const source = vscode.Uri.from(params.source);\n                const target = vscode.Uri.from(params.target);\n                await vscode.workspace.fs.rename(source, target, params.options);\n                return { errno: 0 };\n            }\n            catch (error) {\n                return handleError(error);\n            }\n        });\n        this.connection.onRequest('window/activeTextDocument', () => {\n            const activeEditor = vscode.window.activeTextEditor;\n            if (activeEditor === undefined) {\n                return { errno: 0, data: null };\n            }\n            return { errno: 0, data: { uri: activeEditor.document.uri.toJSON() } };\n        });\n        this.connection.onRequest('workspace/workspaceFolders', () => {\n            const folders = vscode.workspace.workspaceFolders ?? [];\n            return { errno: 0, data: folders.map(folder => { return { uri: folder.uri.toJSON(), name: folder.name, index: folder.index }; }) };\n        });\n        this.connection.onRequest('process/proc_exit', (params) => {\n            if (this.options?.exitHandler !== undefined) {\n                this.options.exitHandler(params.rval);\n            }\n            return { errno: 0 };\n        });\n    }\n    getPty() {\n        return this.pty;\n    }\n    asFileSystemError(error) {\n        switch (error.code) {\n            case 'FileNotFound':\n                return sync_api_common_1.DTOs.FileSystemError.FileNotFound;\n            case 'FileExists':\n                return sync_api_common_1.DTOs.FileSystemError.FileExists;\n            case 'FileNotADirectory':\n                return sync_api_common_1.DTOs.FileSystemError.FileNotADirectory;\n            case 'FileIsADirectory':\n                return sync_api_common_1.DTOs.FileSystemError.FileIsADirectory;\n            case 'NoPermissions':\n                return sync_api_common_1.DTOs.FileSystemError.NoPermissions;\n            case 'Unavailable':\n                return sync_api_common_1.DTOs.FileSystemError.Unavailable;\n            default:\n                return sync_api_common_1.RPCErrno.UnknownError;\n        }\n    }\n}\nexports.ApiService = ApiService;\n//# sourceMappingURL=apiService.js.map","const SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\n\nclass TypeScriptReferenceSupport implements vscode.ReferenceProvider {\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient) { }\n\n\tpublic async provideReferences(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\toptions: vscode.ReferenceContext,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.Location[]> {\n\t\tconst filepath = this.client.toOpenTsFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\tconst response = await this.client.execute('references', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst result: vscode.Location[] = [];\n\t\tfor (const ref of response.body.refs) {\n\t\t\tif (!options.includeDeclaration && ref.isDefinition) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst url = this.client.toResource(ref.file);\n\t\t\tconst location = typeConverters.Location.fromTextSpan(url, ref);\n\t\t\tresult.push(location);\n\t\t}\n\t\treturn result;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerReferenceProvider(selector.syntax,\n\t\t\tnew TypeScriptReferenceSupport(client));\n\t});\n}\n","/*\n * 1DS JS SDK Core, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_DEFAULT_ENDPOINT_URL = \"https://browser.events.data.microsoft.com/OneCollector/1.0/\";\r\nexport var STR_VERSION = \"version\";\r\nexport var STR_PROPERTIES = \"properties\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * 1DS JS SDK Core, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n/**\r\n* AppInsightsCore.ts\r\n* @author Abhilash Panwar (abpanwar) Hector Hernandez (hectorh)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { AppInsightsCore as InternalCore, _throwInternal, createDynamicConfig, doPerf, dumpObj, throwError } from \"@microsoft/applicationinsights-core-js\";\r\nimport { objDeepFreeze } from \"@nevware21/ts-utils\";\r\nimport { STR_DEFAULT_ENDPOINT_URL, STR_EMPTY, STR_PROPERTIES, STR_VERSION } from \"./InternalConstants\";\r\nimport { FullVersionString, getTime, isLatency } from \"./Utils\";\r\nimport { _DYN_INDEX_OF, _DYN_INITIALIZE, _DYN_LOGGER, _DYN_POLL_INTERNAL_LOGS, _DYN_TIMINGS } from \"./__DynamicConstants\";\r\n/**\r\n * The default settings for the config.\r\n * WE MUST include all defaults here to ensure that the config is created with all of the properties\r\n * defined as dynamic.\r\n */\r\nvar defaultConfig = objDeepFreeze({\r\n    endpointUrl: STR_DEFAULT_ENDPOINT_URL,\r\n    propertyStorageOverride: { isVal: _chkPropOverride }\r\n});\r\nfunction _chkPropOverride(propertyStorageOverride) {\r\n    // Validate property storage override\r\n    if (propertyStorageOverride && (!propertyStorageOverride.getProperty || !propertyStorageOverride.setProperty)) {\r\n        throwError(\"Invalid property storage override passed.\");\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * @group Classes\r\n * @group Entrypoint\r\n */\r\nvar AppInsightsCore = /** @class */ (function (_super) {\r\n    __extends(AppInsightsCore, _super);\r\n    function AppInsightsCore() {\r\n        var _this = _super.call(this) || this;\r\n        dynamicProto(AppInsightsCore, _this, function (_self, _base) {\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, extensions, logger, notificationManager) {\r\n                doPerf(_self, function () { return \"AppInsightsCore.initialize\"; }, function () {\r\n                    try {\r\n                        _base[_DYN_INITIALIZE /* @min:%2einitialize */](createDynamicConfig(config, defaultConfig, logger || _self[_DYN_LOGGER /* @min:%2elogger */], false).cfg, extensions, logger, notificationManager);\r\n                    }\r\n                    catch (e) {\r\n                        var logger_1 = _self[_DYN_LOGGER /* @min:%2elogger */];\r\n                        var message = dumpObj(e);\r\n                        if (message[_DYN_INDEX_OF /* @min:%2eindexOf */](\"channels\") !== -1) {\r\n                            // Add some additional context to the underlying reported error\r\n                            message += \"\\n - Channels must be provided through config.channels only!\";\r\n                        }\r\n                        _throwInternal(logger_1, 1 /* eLoggingSeverity.CRITICAL */, 514 /* _eExtendedInternalMessageId.FailedToInitializeSDK */, \"SDK Initialization Failed - no telemetry will be sent: \" + message);\r\n                    }\r\n                }, function () { return ({ config: config, extensions: extensions, logger: logger, notificationManager: notificationManager }); });\r\n            };\r\n            _self.track = function (item) {\r\n                doPerf(_self, function () { return \"AppInsightsCore.track\"; }, function () {\r\n                    var telemetryItem = item;\r\n                    if (telemetryItem) {\r\n                        telemetryItem[_DYN_TIMINGS /* @min:%2etimings */] = telemetryItem[_DYN_TIMINGS /* @min:%2etimings */] || {};\r\n                        telemetryItem[_DYN_TIMINGS /* @min:%2etimings */].trackStart = getTime();\r\n                        if (!isLatency(telemetryItem.latency)) {\r\n                            telemetryItem.latency = 1 /* EventLatencyValue.Normal */;\r\n                        }\r\n                        var itemExt = telemetryItem.ext = telemetryItem.ext || {};\r\n                        itemExt.sdk = itemExt.sdk || {};\r\n                        itemExt.sdk.ver = FullVersionString;\r\n                        var baseData = telemetryItem.baseData = telemetryItem.baseData || {};\r\n                        baseData[STR_PROPERTIES /* @min:%2eproperties */] = baseData[STR_PROPERTIES /* @min:%2eproperties */] || {};\r\n                        var itemProperties = baseData[STR_PROPERTIES /* @min:%2eproperties */];\r\n                        itemProperties[STR_VERSION] = itemProperties[STR_VERSION] || _self.pluginVersionString || STR_EMPTY;\r\n                    }\r\n                    _base.track(telemetryItem);\r\n                }, function () { return ({ item: item }); }, !(item.sync));\r\n            };\r\n            _self[_DYN_POLL_INTERNAL_LOGS /* @min:%2epollInternalLogs */] = function (eventName) {\r\n                return _base[_DYN_POLL_INTERNAL_LOGS /* @min:%2epollInternalLogs */](eventName || \"InternalLog\");\r\n            };\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for AppInsightsCore.prototype.initialize.\r\n// Removed Stub for AppInsightsCore.prototype.track.\r\n// Removed Stub for AppInsightsCore.prototype.pollInternalLogs.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    AppInsightsCore.__ieDyn=1;\n\n    return AppInsightsCore;\r\n}(InternalCore));\r\nexport { AppInsightsCore };\r\n//# sourceMappingURL=AppInsightsCore.js.map","/*\n * 1DS JS SDK Core, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* Enums.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n* File containing the enums as constants.\r\n*/\r\nimport { createEnumStyle } from \"@microsoft/applicationinsights-core-js\";\r\n/**\r\n * The ValueKind contains a set of values that specify value kind of the property.\r\n * Either PII (Personal Identifiable Information) or customer content.\r\n */\r\nexport var ValueKind = createEnumStyle({\r\n    NotSet: 0 /* eValueKind.NotSet */,\r\n    Pii_DistinguishedName: 1 /* eValueKind.Pii_DistinguishedName */,\r\n    Pii_GenericData: 2 /* eValueKind.Pii_GenericData */,\r\n    Pii_IPV4Address: 3 /* eValueKind.Pii_IPV4Address */,\r\n    Pii_IPv6Address: 4 /* eValueKind.Pii_IPv6Address */,\r\n    Pii_MailSubject: 5 /* eValueKind.Pii_MailSubject */,\r\n    Pii_PhoneNumber: 6 /* eValueKind.Pii_PhoneNumber */,\r\n    Pii_QueryString: 7 /* eValueKind.Pii_QueryString */,\r\n    Pii_SipAddress: 8 /* eValueKind.Pii_SipAddress */,\r\n    Pii_SmtpAddress: 9 /* eValueKind.Pii_SmtpAddress */,\r\n    Pii_Identity: 10 /* eValueKind.Pii_Identity */,\r\n    Pii_Uri: 11 /* eValueKind.Pii_Uri */,\r\n    Pii_Fqdn: 12 /* eValueKind.Pii_Fqdn */,\r\n    Pii_IPV4AddressLegacy: 13 /* eValueKind.Pii_IPV4AddressLegacy */,\r\n    Pii_IPv6ScrubLastHextets: 14 /* eValueKind.Pii_IPv6ScrubLastHextets */,\r\n    Pii_DropValue: 15 /* eValueKind.Pii_DropValue */,\r\n    CustomerContent_GenericContent: 32 /* eValueKind.CustomerContent_GenericContent */\r\n});\r\n/**\r\n * The EventLatency contains a set of values that specify the latency with which an event is sent.\r\n */\r\nexport var EventLatency = createEnumStyle({\r\n    /**\r\n     * Normal latency.\r\n     */\r\n    Normal: 1 /* EventLatencyValue.Normal */,\r\n    /**\r\n     * Cost deferred latency. At the moment this latency is treated as Normal latency.\r\n     */\r\n    CostDeferred: 2 /* EventLatencyValue.CostDeferred */,\r\n    /**\r\n     * Real time latency.\r\n     */\r\n    RealTime: 3 /* EventLatencyValue.RealTime */,\r\n    /**\r\n     * Bypass normal batching/timing and send as soon as possible, this will still send asynchronously.\r\n     * Added in v3.1.1\r\n     */\r\n    Immediate: 4 /* EventLatencyValue.Immediate */\r\n});\r\n/**\r\n * Enum for property types.\r\n */\r\nexport var EventPropertyType = createEnumStyle({\r\n    Unspecified: 0 /* eEventPropertyType.Unspecified */,\r\n    String: 1 /* eEventPropertyType.String */,\r\n    Int32: 2 /* eEventPropertyType.Int32 */,\r\n    UInt32: 3 /* eEventPropertyType.UInt32 */,\r\n    Int64: 4 /* eEventPropertyType.Int64 */,\r\n    UInt64: 5 /* eEventPropertyType.UInt64 */,\r\n    Double: 6 /* eEventPropertyType.Double */,\r\n    Bool: 7 /* eEventPropertyType.Bool */,\r\n    Guid: 8 /* eEventPropertyType.Guid */,\r\n    DateTime: 9 /* eEventPropertyType.DateTime */\r\n});\r\n/**\r\n * The EventPersistence contains a set of values that specify the event's persistence.\r\n */\r\nexport var EventPersistence = createEnumStyle({\r\n    /**\r\n     * Normal persistence.\r\n     */\r\n    Normal: 1 /* EventPersistenceValue.Normal */,\r\n    /**\r\n     * Critical persistence.\r\n     */\r\n    Critical: 2 /* EventPersistenceValue.Critical */\r\n});\r\nexport var TraceLevel = createEnumStyle({\r\n    NONE: 0 /* eTraceLevel.NONE */,\r\n    ERROR: 1 /* eTraceLevel.ERROR */,\r\n    WARNING: 2 /* eTraceLevel.WARNING */,\r\n    INFORMATION: 3 /* eTraceLevel.INFORMATION */\r\n});\r\n//# sourceMappingURL=Enums.js.map","/*\n * 1DS JS SDK Core, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { isNullOrUndefined, isString, objForEachKey } from \"@microsoft/applicationinsights-core-js\";\r\nimport { arrForEach, arrIncludes, arrIndexOf, getLength } from \"@nevware21/ts-utils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { getFieldValueType, isValueAssigned, isValueKind } from \"./Utils\";\r\nimport { _DYN_CAN_HANDLE, _DYN_HANDLE_FIELD, _DYN_KIND, _DYN_LENGTH, _DYN_RM_FIELD_SANITIZER, _DYN_RM_SANITIZER, _DYN_VALUE } from \"./__DynamicConstants\";\r\nvar ValueSanitizer = /** @class */ (function () {\r\n    function ValueSanitizer(fieldSanitizerProvider) {\r\n        var _self = this;\r\n        // To aid with performance this is a lookup map to check if the field value sanitizer supports this field\r\n        var _sanitizerMap = {};\r\n        var _sanitizers = [];\r\n        var _fieldSanitizers = [];\r\n        if (fieldSanitizerProvider) {\r\n            _fieldSanitizers.push(fieldSanitizerProvider);\r\n        }\r\n        function _getFieldSanitizer(path, name) {\r\n            var result;\r\n            var fieldLookup = _sanitizerMap[path];\r\n            if (fieldLookup) {\r\n                result = fieldLookup[name];\r\n            }\r\n            if (!result && result !== null) {\r\n                // Null is a valid result indicating that the value sanitizer does not support this field\r\n                if (isString(path) && isString(name)) {\r\n                    if (_fieldSanitizers[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        for (var lp = 0; lp < _fieldSanitizers[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                            if (_fieldSanitizers[lp][_DYN_HANDLE_FIELD /* @min:%2ehandleField */](path, name)) {\r\n                                result = {\r\n                                    canHandle: true,\r\n                                    fieldHandler: _fieldSanitizers[lp]\r\n                                };\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (_sanitizers[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n                        // Special use-case where there is no sanitizer to pass on to, so just resolving the field\r\n                        // and returning the resulting value (same as sanitizeProperty())\r\n                        result = {\r\n                            canHandle: true\r\n                        };\r\n                    }\r\n                }\r\n                // We still don't have a handler so lets lookup the providers\r\n                if (!result && result !== null) {\r\n                    // Setting the result to null -- which means we and any contained sanitizers can't handle this field\r\n                    result = null;\r\n                    for (var lp = 0; lp < _sanitizers[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                        if (_sanitizers[lp][_DYN_HANDLE_FIELD /* @min:%2ehandleField */](path, name)) {\r\n                            result = {\r\n                                canHandle: true,\r\n                                handler: _sanitizers[lp],\r\n                                fieldHandler: null\r\n                            };\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (!fieldLookup) {\r\n                    fieldLookup = _sanitizerMap[path] = {};\r\n                }\r\n                fieldLookup[name] = result;\r\n            }\r\n            return result;\r\n        }\r\n        _self.clearCache = function () {\r\n            _sanitizerMap = {};\r\n        };\r\n        _self.addSanitizer = function (newSanitizer) {\r\n            if (newSanitizer) {\r\n                if (!arrIncludes(_sanitizers, newSanitizer)) {\r\n                    _sanitizers.push(newSanitizer);\r\n                }\r\n                // Invalidate any previously mapped fields\r\n                _sanitizerMap = {};\r\n            }\r\n        };\r\n        _self.addFieldSanitizer = function (fieldSanitizer) {\r\n            if (fieldSanitizer) {\r\n                if (!arrIncludes(_fieldSanitizers, fieldSanitizer)) {\r\n                    _fieldSanitizers.push(fieldSanitizer);\r\n                }\r\n                // Invalidate any previously mapped fields\r\n                _sanitizerMap = {};\r\n            }\r\n        };\r\n        _self[_DYN_RM_SANITIZER /* @min:%2ermSanitizer */] = function (theSanitizer) {\r\n            if (theSanitizer) {\r\n                var idx = arrIndexOf(_sanitizers, theSanitizer);\r\n                if (idx !== -1) {\r\n                    _sanitizers.splice(idx, 1);\r\n                    // Invalidate any previously mapped fields\r\n                    _sanitizerMap = {};\r\n                }\r\n                // Try and remove the sanitizer from any chained sanitizer as well\r\n                arrForEach(_sanitizers, function (sanitizer) {\r\n                    sanitizer && sanitizer[_DYN_RM_SANITIZER /* @min:%2ermSanitizer */] && sanitizer[_DYN_RM_SANITIZER /* @min:%2ermSanitizer */](theSanitizer);\r\n                });\r\n            }\r\n        };\r\n        _self[_DYN_RM_FIELD_SANITIZER /* @min:%2ermFieldSanitizer */] = function (theFieldSanitizer) {\r\n            if (theFieldSanitizer) {\r\n                var idx = arrIndexOf(_fieldSanitizers, theFieldSanitizer);\r\n                if (idx !== -1) {\r\n                    _fieldSanitizers.splice(idx, 1);\r\n                    // Invalidate any previously mapped fields\r\n                    _sanitizerMap = {};\r\n                }\r\n                // Try and remove the field sanitizer from any chained sanitizer as well\r\n                arrForEach(_sanitizers, function (sanitizer) {\r\n                    sanitizer && sanitizer[_DYN_RM_FIELD_SANITIZER /* @min:%2ermFieldSanitizer */] && sanitizer[_DYN_RM_FIELD_SANITIZER /* @min:%2ermFieldSanitizer */](theFieldSanitizer);\r\n                });\r\n            }\r\n        };\r\n        _self.isEmpty = function () {\r\n            return (getLength(_sanitizers) + getLength(_fieldSanitizers)) === 0;\r\n        };\r\n        _self[_DYN_HANDLE_FIELD /* @min:%2ehandleField */] = function (path, name) {\r\n            var mapValue = _getFieldSanitizer(path, name);\r\n            return mapValue ? mapValue[_DYN_CAN_HANDLE /* @min:%2ecanHandle */] : false;\r\n        };\r\n        _self[_DYN_VALUE /* @min:%2evalue */] = function (path, name, value, stringifyObjects) {\r\n            var mapValue = _getFieldSanitizer(path, name);\r\n            if (mapValue && mapValue[_DYN_CAN_HANDLE /* @min:%2ecanHandle */]) {\r\n                if (!mapValue || !mapValue[_DYN_CAN_HANDLE /* @min:%2ecanHandle */]) {\r\n                    return null;\r\n                }\r\n                if (mapValue.handler) {\r\n                    // This value sanitizer can't handle this field so pass it only the next one\r\n                    return mapValue.handler[_DYN_VALUE /* @min:%2evalue */](path, name, value, stringifyObjects);\r\n                }\r\n                // Check that property is valid\r\n                if (!isString(name) || isNullOrUndefined(value) || value === STR_EMPTY) {\r\n                    return null;\r\n                }\r\n                var property = null;\r\n                var fieldType = getFieldValueType(value);\r\n                if ((fieldType & 8192 /* FieldValueSanitizerType.EventProperty */) === 8192 /* FieldValueSanitizerType.EventProperty */) {\r\n                    var subType = fieldType & ~8192 /* FieldValueSanitizerType.EventProperty */;\r\n                    property = value;\r\n                    if (!isValueAssigned(property[_DYN_VALUE /* @min:%2evalue */]) ||\r\n                        (subType !== 1 /* FieldValueSanitizerType.String */ &&\r\n                            subType !== 2 /* FieldValueSanitizerType.Number */ &&\r\n                            subType !== 3 /* FieldValueSanitizerType.Boolean */ &&\r\n                            (subType & 4096 /* FieldValueSanitizerType.Array */) !== 4096 /* FieldValueSanitizerType.Array */)) {\r\n                        // Not a supported IEventProperty type to be able to sanitize\r\n                        return null;\r\n                    }\r\n                }\r\n                else if (fieldType === 1 /* FieldValueSanitizerType.String */ ||\r\n                    fieldType === 2 /* FieldValueSanitizerType.Number */ ||\r\n                    fieldType === 3 /* FieldValueSanitizerType.Boolean */ ||\r\n                    (fieldType & 4096 /* FieldValueSanitizerType.Array */) === 4096 /* FieldValueSanitizerType.Array */) {\r\n                    // If the property isn't IEventProperty (and is either string, number, boolean or array), convert it into one.\r\n                    property = _convertToProperty(path, name, value);\r\n                }\r\n                else if (fieldType === 4 /* FieldValueSanitizerType.Object */) {\r\n                    property = _convertToProperty(path, name, !!stringifyObjects ? JSON.stringify(value) : value);\r\n                }\r\n                if (property) {\r\n                    return _handleProperty(mapValue, path, name, fieldType, property, stringifyObjects);\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        _self.property = function (path, name, property, stringifyObjects) {\r\n            var mapValue = _getFieldSanitizer(path, name);\r\n            if (!mapValue || !mapValue[_DYN_CAN_HANDLE /* @min:%2ecanHandle */]) {\r\n                return null;\r\n            }\r\n            // Check that property is valid\r\n            if (!isString(name) || isNullOrUndefined(property) || !isValueAssigned(property[_DYN_VALUE /* @min:%2evalue */])) {\r\n                return null;\r\n            }\r\n            var fieldType = getFieldValueType(property[_DYN_VALUE /* @min:%2evalue */]);\r\n            if (fieldType === 0 /* FieldValueSanitizerType.NotSet */) {\r\n                // Not a supported field that we can sanitize or serialize\r\n                return null;\r\n            }\r\n            return _handleProperty(mapValue, path, name, fieldType, property, stringifyObjects);\r\n        };\r\n        function _handleProperty(mapValue, path, name, fieldType, property, stringifyObjects) {\r\n            if (mapValue.handler) {\r\n                // This value sanitizer can't handle this field so pass it only the next one\r\n                return mapValue.handler.property(path, name, property, stringifyObjects);\r\n            }\r\n            // If either pii or cc is set convert value to string (since only string pii/cc is allowed).\r\n            // If the value is a complex type like an array that can't be converted to string we will drop\r\n            // the property.\r\n            if (!isNullOrUndefined(property[_DYN_KIND /* @min:%2ekind */])) {\r\n                if ((fieldType & 4096 /* FieldValueSanitizerType.Array */) === 4096 /* FieldValueSanitizerType.Array */ || !isValueKind(property[_DYN_KIND /* @min:%2ekind */])) {\r\n                    return null;\r\n                }\r\n                // Convert the value to a string and assign back to the original value\r\n                property[_DYN_VALUE /* @min:%2evalue */] = property[_DYN_VALUE /* @min:%2evalue */].toString();\r\n            }\r\n            return _callFieldSanitizer(mapValue.fieldHandler, path, name, fieldType, property);\r\n        }\r\n        function _convertToProperty(path, name, value) {\r\n            if (isValueAssigned(value)) {\r\n                return { value: value };\r\n            }\r\n            return null;\r\n        }\r\n        function _callFieldSanitizer(fieldProvider, path, name, theType, property) {\r\n            if (property && fieldProvider) {\r\n                var sanitizer = fieldProvider.getSanitizer(path, name, theType, property[_DYN_KIND /* @min:%2ekind */], property.propertyType);\r\n                if (sanitizer) {\r\n                    // This is where we the field will call the handler to \"scrub\" the value. This the primary hook for the ClientHashing Plugin to\r\n                    // be able to apply the hashFunc() / Sha256 conversion of the properties value\r\n                    if (theType === 4 /* FieldValueSanitizerType.Object */) {\r\n                        // Special case of an embedded object (ext.metadata, data.properties)\r\n                        var newValue_1 = {};\r\n                        var propValue = property[_DYN_VALUE /* @min:%2evalue */];\r\n                        objForEachKey(propValue, function (propKey, theValue) {\r\n                            var newPath = path + \".\" + name;\r\n                            if (isValueAssigned(theValue)) {\r\n                                var newProp = _convertToProperty(newPath, propKey, theValue);\r\n                                newProp = _callFieldSanitizer(fieldProvider, newPath, propKey, getFieldValueType(theValue), newProp);\r\n                                if (newProp) {\r\n                                    newValue_1[propKey] = newProp[_DYN_VALUE /* @min:%2evalue */];\r\n                                }\r\n                            }\r\n                        });\r\n                        property[_DYN_VALUE /* @min:%2evalue */] = newValue_1;\r\n                    }\r\n                    else {\r\n                        var details = {\r\n                            path: path,\r\n                            name: name,\r\n                            type: theType,\r\n                            prop: property,\r\n                            sanitizer: _self\r\n                        };\r\n                        property = sanitizer.call(_self, details);\r\n                    }\r\n                }\r\n            }\r\n            return property;\r\n        }\r\n    }\r\n    ValueSanitizer.getFieldType = getFieldValueType;\r\n    return ValueSanitizer;\r\n}());\r\nexport { ValueSanitizer };\r\n//# sourceMappingURL=ValueSanitizer.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\"use strict\";\r\nexport var MinChannelPriorty = 100;\r\n//# sourceMappingURL=IChannelControls.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n//  @skip-file-minify\r\nimport { createEnumStyle } from \"../JavaScriptSDK.Enums/EnumHelperFuncs\";\r\nexport var LoggingSeverity = createEnumStyle({\r\n    DISABLED: 0 /* eLoggingSeverity.DISABLED */,\r\n    CRITICAL: 1 /* eLoggingSeverity.CRITICAL */,\r\n    WARNING: 2 /* eLoggingSeverity.WARNING */,\r\n    DEBUG: 3 /* eLoggingSeverity.DEBUG */\r\n});\r\n//# sourceMappingURL=LoggingEnums.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { asString, isArray, isDefined, isNullOrUndefined, isObject, isPlainObject, isUndefined, objForEachKey, objHasOwn } from \"@nevware21/ts-utils\";\r\nimport { _DYN_BLK_VAL, _DYN_LENGTH, _DYN_RD_ONLY } from \"../__DynamicConstants\";\r\nfunction _isConfigDefaults(value) {\r\n    return (value && isObject(value) && (value.isVal || value.fb || objHasOwn(value, \"v\") || objHasOwn(value, \"mrg\") || objHasOwn(value, \"ref\") || value.set));\r\n}\r\nfunction _getDefault(dynamicHandler, theConfig, cfgDefaults) {\r\n    var defValue;\r\n    var isDefaultValid = cfgDefaults.dfVal || isDefined;\r\n    // There is a fallback config key so try and grab that first\r\n    if (theConfig && cfgDefaults.fb) {\r\n        var fallbacks = cfgDefaults.fb;\r\n        if (!isArray(fallbacks)) {\r\n            fallbacks = [fallbacks];\r\n        }\r\n        for (var lp = 0; lp < fallbacks[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n            var fallback = fallbacks[lp];\r\n            var fbValue = theConfig[fallback];\r\n            if (isDefaultValid(fbValue)) {\r\n                defValue = fbValue;\r\n            }\r\n            else if (dynamicHandler) {\r\n                // Needed to ensure that the fallback value (and potentially) new field is also dynamic even if null/undefined\r\n                fbValue = dynamicHandler.cfg[fallback];\r\n                if (isDefaultValid(fbValue)) {\r\n                    defValue = fbValue;\r\n                }\r\n                // Needed to ensure that the fallback value (and potentially) new field is also dynamic even if null/undefined\r\n                dynamicHandler.set(dynamicHandler.cfg, asString(fallback), fbValue);\r\n            }\r\n            if (isDefaultValid(defValue)) {\r\n                // We have a valid default so break out of the look\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    // If the value is still not defined and we have a default value then use that\r\n    if (!isDefaultValid(defValue) && isDefaultValid(cfgDefaults.v)) {\r\n        defValue = cfgDefaults.v;\r\n    }\r\n    return defValue;\r\n}\r\n/**\r\n * Recursively resolve the default value\r\n * @param dynamicHandler\r\n * @param theConfig\r\n * @param cfgDefaults\r\n * @returns\r\n */\r\nfunction _resolveDefaultValue(dynamicHandler, theConfig, cfgDefaults) {\r\n    var theValue = cfgDefaults;\r\n    if (cfgDefaults && _isConfigDefaults(cfgDefaults)) {\r\n        theValue = _getDefault(dynamicHandler, theConfig, cfgDefaults);\r\n    }\r\n    if (theValue) {\r\n        if (_isConfigDefaults(theValue)) {\r\n            theValue = _resolveDefaultValue(dynamicHandler, theConfig, theValue);\r\n        }\r\n        var newValue_1;\r\n        if (isArray(theValue)) {\r\n            newValue_1 = [];\r\n            newValue_1[_DYN_LENGTH /* @min:%2elength */] = theValue[_DYN_LENGTH /* @min:%2elength */];\r\n        }\r\n        else if (isPlainObject(theValue)) {\r\n            newValue_1 = {};\r\n        }\r\n        if (newValue_1) {\r\n            objForEachKey(theValue, function (key, value) {\r\n                if (value && _isConfigDefaults(value)) {\r\n                    value = _resolveDefaultValue(dynamicHandler, theConfig, value);\r\n                }\r\n                newValue_1[key] = value;\r\n            });\r\n            theValue = newValue_1;\r\n        }\r\n    }\r\n    return theValue;\r\n}\r\n/**\r\n * Applies the default value on the config property and makes sure that it's dynamic\r\n * @param theConfig\r\n * @param name\r\n * @param defaultValue\r\n */\r\nexport function _applyDefaultValue(dynamicHandler, theConfig, name, defaultValue) {\r\n    // Resolve the initial config value from the provided value or use the defined default\r\n    var isValid;\r\n    var setFn;\r\n    var defValue;\r\n    var cfgDefaults = defaultValue;\r\n    var mergeDf;\r\n    var reference;\r\n    var readOnly;\r\n    var blkDynamicValue;\r\n    if (_isConfigDefaults(cfgDefaults)) {\r\n        // looks like a IConfigDefault\r\n        isValid = cfgDefaults.isVal;\r\n        setFn = cfgDefaults.set;\r\n        readOnly = cfgDefaults[_DYN_RD_ONLY /* @min:%2erdOnly */];\r\n        blkDynamicValue = cfgDefaults[_DYN_BLK_VAL /* @min:%2eblkVal */];\r\n        mergeDf = cfgDefaults.mrg;\r\n        reference = cfgDefaults.ref;\r\n        if (!reference && isUndefined(reference)) {\r\n            reference = !!mergeDf;\r\n        }\r\n        defValue = _getDefault(dynamicHandler, theConfig, cfgDefaults);\r\n    }\r\n    else {\r\n        defValue = defaultValue;\r\n    }\r\n    if (blkDynamicValue) {\r\n        // Mark the property so that any value assigned will be blocked from conversion, we need to do this\r\n        // before assigning or fetching the value to ensure it's not converted\r\n        dynamicHandler[_DYN_BLK_VAL /* @min:%2eblkVal */](theConfig, name);\r\n    }\r\n    // Set the value to the default value;\r\n    var theValue;\r\n    var usingDefault = true;\r\n    var cfgValue = theConfig[name];\r\n    // try and get and user provided values\r\n    if (cfgValue || !isNullOrUndefined(cfgValue)) {\r\n        // Use the defined theConfig[name] value\r\n        theValue = cfgValue;\r\n        usingDefault = false;\r\n        // The values are different and we have a special default value check, which is used to\r\n        // override config values like empty strings to continue using the default\r\n        if (isValid && theValue !== defValue && !isValid(theValue)) {\r\n            theValue = defValue;\r\n            usingDefault = true;\r\n        }\r\n        if (setFn) {\r\n            theValue = setFn(theValue, defValue, theConfig);\r\n            usingDefault = theValue === defValue;\r\n        }\r\n    }\r\n    if (!usingDefault) {\r\n        if (isPlainObject(theValue) || isArray(defValue)) {\r\n            // we are using the user supplied value and it's an object\r\n            if (mergeDf && defValue && (isPlainObject(defValue) || isArray(defValue))) {\r\n                // Resolve/apply the defaults\r\n                objForEachKey(defValue, function (dfName, dfValue) {\r\n                    // Sets the value and makes it dynamic (if it doesn't already exist)\r\n                    _applyDefaultValue(dynamicHandler, theValue, dfName, dfValue);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    else if (defValue) {\r\n        // Just resolve the default\r\n        theValue = _resolveDefaultValue(dynamicHandler, theConfig, defValue);\r\n    }\r\n    else {\r\n        theValue = defValue;\r\n    }\r\n    // if (theValue && usingDefault && (isPlainObject(theValue) || isArray(theValue))) {\r\n    //     theValue = _cfgDeepCopy(theValue);\r\n    // }\r\n    // Needed to ensure that the (potentially) new field is dynamic even if null/undefined\r\n    dynamicHandler.set(theConfig, name, theValue);\r\n    if (reference) {\r\n        dynamicHandler.ref(theConfig, name);\r\n    }\r\n    if (readOnly) {\r\n        dynamicHandler[_DYN_RD_ONLY /* @min:%2erdOnly */](theConfig, name);\r\n    }\r\n}\r\n//# sourceMappingURL=ConfigDefaults.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../../tsServer/protocol/protocol';\nimport * as typeConverters from '../../typeConverters';\nimport { ITypeScriptServiceClient } from '../../typescriptService';\n\nexport function getEditForCodeAction(\n\tclient: ITypeScriptServiceClient,\n\taction: Proto.CodeAction\n): vscode.WorkspaceEdit | undefined {\n\treturn action.changes?.length\n\t\t? typeConverters.WorkspaceEdit.fromFileCodeEdits(client, action.changes)\n\t\t: undefined;\n}\n\nexport async function applyCodeAction(\n\tclient: ITypeScriptServiceClient,\n\taction: Proto.CodeAction,\n\ttoken: vscode.CancellationToken\n): Promise<boolean> {\n\tconst workspaceEdit = getEditForCodeAction(client, action);\n\tif (workspaceEdit) {\n\t\tif (!(await vscode.workspace.applyEdit(workspaceEdit))) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn applyCodeActionCommands(client, action.commands, token);\n}\n\nexport async function applyCodeActionCommands(\n\tclient: ITypeScriptServiceClient,\n\tcommands: ReadonlyArray<{}> | undefined,\n\ttoken: vscode.CancellationToken,\n): Promise<boolean> {\n\tif (commands?.length) {\n\t\tfor (const command of commands) {\n\t\t\tawait client.execute('applyCodeActionCommand', { command }, token);\n\t\t}\n\t}\n\treturn true;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport * as fileSchemes from '../configuration/fileSchemes';\nimport { isTypeScriptDocument } from '../configuration/languageIds';\nimport { API } from '../tsServer/api';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { Disposable } from '../utils/dispose';\nimport { equals } from '../utils/objects';\nimport { ResourceMap } from '../utils/resourceMap';\n\ninterface FileConfiguration {\n\treadonly formatOptions: Proto.FormatCodeSettings;\n\treadonly preferences: Proto.UserPreferences;\n}\n\ninterface FormattingOptions {\n\n\treadonly tabSize: number | undefined;\n\n\treadonly insertSpaces: boolean | undefined;\n}\n\nfunction areFileConfigurationsEqual(a: FileConfiguration, b: FileConfiguration): boolean {\n\treturn equals(a, b);\n}\n\nexport default class FileConfigurationManager extends Disposable {\n\tprivate readonly formatOptions: ResourceMap<Promise<FileConfiguration | undefined>>;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tonCaseInsensitiveFileSystem: boolean\n\t) {\n\t\tsuper();\n\t\tthis.formatOptions = new ResourceMap(undefined, { onCaseInsensitiveFileSystem });\n\t\tvscode.workspace.onDidCloseTextDocument(textDocument => {\n\t\t\t// When a document gets closed delete the cached formatting options.\n\t\t\t// This is necessary since the tsserver now closed a project when its\n\t\t\t// last file in it closes which drops the stored formatting options\n\t\t\t// as well.\n\t\t\tthis.formatOptions.delete(textDocument.uri);\n\t\t}, undefined, this._disposables);\n\t}\n\n\tpublic async ensureConfigurationForDocument(\n\t\tdocument: vscode.TextDocument,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<void> {\n\t\tconst formattingOptions = this.getFormattingOptions(document);\n\t\tif (formattingOptions) {\n\t\t\treturn this.ensureConfigurationOptions(document, formattingOptions, token);\n\t\t}\n\t}\n\n\tprivate getFormattingOptions(document: vscode.TextDocument): FormattingOptions | undefined {\n\t\tconst editor = vscode.window.visibleTextEditors.find(editor => editor.document.uri.toString() === document.uri.toString());\n\t\tif (!editor) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\ttabSize: typeof editor.options.tabSize === 'number' ? editor.options.tabSize : undefined,\n\t\t\tinsertSpaces: typeof editor.options.insertSpaces === 'boolean' ? editor.options.insertSpaces : undefined,\n\t\t};\n\t}\n\n\tpublic async ensureConfigurationOptions(\n\t\tdocument: vscode.TextDocument,\n\t\toptions: FormattingOptions,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<void> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentOptions = this.getFileOptions(document, options);\n\t\tconst cachedOptions = this.formatOptions.get(document.uri);\n\t\tif (cachedOptions) {\n\t\t\tconst cachedOptionsValue = await cachedOptions;\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (cachedOptionsValue && areFileConfigurationsEqual(cachedOptionsValue, currentOptions)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst task = (async () => {\n\t\t\ttry {\n\t\t\t\tconst response = await this.client.execute('configure', { file, ...currentOptions }, token);\n\t\t\t\treturn response.type === 'response' ? currentOptions : undefined;\n\t\t\t} catch {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t})();\n\n\t\tthis.formatOptions.set(document.uri, task);\n\n\t\tawait task;\n\t}\n\n\tpublic async setGlobalConfigurationFromDocument(\n\t\tdocument: vscode.TextDocument,\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<void> {\n\t\tconst formattingOptions = this.getFormattingOptions(document);\n\t\tif (!formattingOptions) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst args: Proto.ConfigureRequestArguments = {\n\t\t\tfile: undefined /*global*/,\n\t\t\t...this.getFileOptions(document, formattingOptions),\n\t\t};\n\t\tawait this.client.execute('configure', args, token);\n\t}\n\n\tpublic reset() {\n\t\tthis.formatOptions.clear();\n\t}\n\n\tprivate getFileOptions(\n\t\tdocument: vscode.TextDocument,\n\t\toptions: FormattingOptions\n\t): FileConfiguration {\n\t\treturn {\n\t\t\tformatOptions: this.getFormatOptions(document, options),\n\t\t\tpreferences: this.getPreferences(document)\n\t\t};\n\t}\n\n\tprivate getFormatOptions(\n\t\tdocument: vscode.TextDocument,\n\t\toptions: FormattingOptions\n\t): Proto.FormatCodeSettings {\n\t\tconst config = vscode.workspace.getConfiguration(\n\t\t\tisTypeScriptDocument(document) ? 'typescript.format' : 'javascript.format',\n\t\t\tdocument.uri);\n\n\t\treturn {\n\t\t\ttabSize: options.tabSize,\n\t\t\tindentSize: options.tabSize,\n\t\t\tconvertTabsToSpaces: options.insertSpaces,\n\t\t\t// We can use \\n here since the editor normalizes later on to its line endings.\n\t\t\tnewLineCharacter: '\\n',\n\t\t\tinsertSpaceAfterCommaDelimiter: config.get<boolean>('insertSpaceAfterCommaDelimiter'),\n\t\t\tinsertSpaceAfterConstructor: config.get<boolean>('insertSpaceAfterConstructor'),\n\t\t\tinsertSpaceAfterSemicolonInForStatements: config.get<boolean>('insertSpaceAfterSemicolonInForStatements'),\n\t\t\tinsertSpaceBeforeAndAfterBinaryOperators: config.get<boolean>('insertSpaceBeforeAndAfterBinaryOperators'),\n\t\t\tinsertSpaceAfterKeywordsInControlFlowStatements: config.get<boolean>('insertSpaceAfterKeywordsInControlFlowStatements'),\n\t\t\tinsertSpaceAfterFunctionKeywordForAnonymousFunctions: config.get<boolean>('insertSpaceAfterFunctionKeywordForAnonymousFunctions'),\n\t\t\tinsertSpaceBeforeFunctionParenthesis: config.get<boolean>('insertSpaceBeforeFunctionParenthesis'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingNonemptyBraces: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingEmptyBraces: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingEmptyBraces'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces'),\n\t\t\tinsertSpaceAfterTypeAssertion: config.get<boolean>('insertSpaceAfterTypeAssertion'),\n\t\t\tplaceOpenBraceOnNewLineForFunctions: config.get<boolean>('placeOpenBraceOnNewLineForFunctions'),\n\t\t\tplaceOpenBraceOnNewLineForControlBlocks: config.get<boolean>('placeOpenBraceOnNewLineForControlBlocks'),\n\t\t\tsemicolons: config.get<Proto.SemicolonPreference>('semicolons'),\n\t\t\tindentSwitchCase: config.get<boolean>('indentSwitchCase'),\n\t\t};\n\t}\n\n\tprivate getPreferences(document: vscode.TextDocument): Proto.UserPreferences {\n\t\tconst config = vscode.workspace.getConfiguration(\n\t\t\tisTypeScriptDocument(document) ? 'typescript' : 'javascript',\n\t\t\tdocument);\n\n\t\tconst preferencesConfig = vscode.workspace.getConfiguration(\n\t\t\tisTypeScriptDocument(document) ? 'typescript.preferences' : 'javascript.preferences',\n\t\t\tdocument);\n\n\t\tconst preferences: Proto.UserPreferences = {\n\t\t\t...config.get('unstable'),\n\t\t\tquotePreference: this.getQuoteStylePreference(preferencesConfig),\n\t\t\timportModuleSpecifierPreference: getImportModuleSpecifierPreference(preferencesConfig),\n\t\t\timportModuleSpecifierEnding: getImportModuleSpecifierEndingPreference(preferencesConfig),\n\t\t\tjsxAttributeCompletionStyle: getJsxAttributeCompletionStyle(preferencesConfig),\n\t\t\tallowTextChangesInNewFiles: document.uri.scheme === fileSchemes.file,\n\t\t\tprovidePrefixAndSuffixTextForRename: preferencesConfig.get<boolean>('useAliasesForRenames', true),\n\t\t\tallowRenameOfImportPath: true,\n\t\t\tincludeAutomaticOptionalChainCompletions: config.get<boolean>('suggest.includeAutomaticOptionalChainCompletions', true),\n\t\t\tprovideRefactorNotApplicableReason: true,\n\t\t\tgenerateReturnInDocTemplate: config.get<boolean>('suggest.jsdoc.generateReturns', true),\n\t\t\tincludeCompletionsForImportStatements: config.get<boolean>('suggest.includeCompletionsForImportStatements', true),\n\t\t\tincludeCompletionsWithSnippetText: true,\n\t\t\tincludeCompletionsWithClassMemberSnippets: config.get<boolean>('suggest.classMemberSnippets.enabled', true),\n\t\t\tincludeCompletionsWithObjectLiteralMethodSnippets: config.get<boolean>('suggest.objectLiteralMethodSnippets.enabled', true),\n\t\t\tautoImportFileExcludePatterns: this.getAutoImportFileExcludePatternsPreference(preferencesConfig, vscode.workspace.getWorkspaceFolder(document.uri)?.uri),\n\t\t\tautoImportSpecifierExcludeRegexes: preferencesConfig.get<string[]>('autoImportSpecifierExcludeRegexes'),\n\t\t\tpreferTypeOnlyAutoImports: preferencesConfig.get<boolean>('preferTypeOnlyAutoImports', false),\n\t\t\tuseLabelDetailsInCompletionEntries: true,\n\t\t\tallowIncompleteCompletions: true,\n\t\t\tdisplayPartsForJSDoc: true,\n\t\t\tdisableLineTextInReferences: true,\n\t\t\tinteractiveInlayHints: true,\n\t\t\tincludeCompletionsForModuleExports: config.get<boolean>('suggest.autoImports'),\n\t\t\t...getInlayHintsPreferences(config),\n\t\t\t...this.getOrganizeImportsPreferences(preferencesConfig),\n\t\t\tmaximumHoverLength: this.getMaximumHoverLength(document),\n\t\t};\n\n\t\treturn preferences;\n\t}\n\n\tprivate getQuoteStylePreference(config: vscode.WorkspaceConfiguration) {\n\t\tswitch (config.get<string>('quoteStyle')) {\n\t\t\tcase 'single': return 'single';\n\t\t\tcase 'double': return 'double';\n\t\t\tdefault: return 'auto';\n\t\t}\n\t}\n\n\tprivate getAutoImportFileExcludePatternsPreference(config: vscode.WorkspaceConfiguration, workspaceFolder: vscode.Uri | undefined): string[] | undefined {\n\t\treturn workspaceFolder && config.get<string[]>('autoImportFileExcludePatterns')?.map(p => {\n\t\t\t// Normalization rules: https://github.com/microsoft/TypeScript/pull/49578\n\t\t\tconst isRelative = /^\\.\\.?($|[\\/\\\\])/.test(p);\n\t\t\t// In TypeScript < 5.3, the first path component cannot be a wildcard, so we need to prefix\n\t\t\t// it with a path root (e.g. `/` or `c:\\`)\n\t\t\tconst wildcardPrefix = this.client.apiVersion.gte(API.v540)\n\t\t\t\t? ''\n\t\t\t\t: path.parse(this.client.toTsFilePath(workspaceFolder)!).root;\n\t\t\treturn path.isAbsolute(p) ? p :\n\t\t\t\tp.startsWith('*') ? wildcardPrefix + p :\n\t\t\t\t\tisRelative ? this.client.toTsFilePath(vscode.Uri.joinPath(workspaceFolder, p))! :\n\t\t\t\t\t\twildcardPrefix + '**' + path.sep + p;\n\t\t});\n\t}\n\n\tprivate getOrganizeImportsPreferences(config: vscode.WorkspaceConfiguration): Proto.UserPreferences {\n\t\tconst organizeImportsCollation = config.get<'ordinal' | 'unicode'>('organizeImports.unicodeCollation');\n\t\tconst organizeImportsCaseSensitivity = config.get<'auto' | 'caseInsensitive' | 'caseSensitive'>('organizeImports.caseSensitivity');\n\t\treturn {\n\t\t\t// More specific settings\n\t\t\torganizeImportsTypeOrder: withDefaultAsUndefined(config.get<'auto' | 'last' | 'inline' | 'first'>('organizeImports.typeOrder', 'auto'), 'auto'),\n\t\t\torganizeImportsIgnoreCase: organizeImportsCaseSensitivity === 'caseInsensitive' ? true\n\t\t\t\t: organizeImportsCaseSensitivity === 'caseSensitive' ? false\n\t\t\t\t\t: 'auto',\n\t\t\torganizeImportsCollation,\n\n\t\t\t// The rest of the settings are only applicable when using unicode collation\n\t\t\t...(organizeImportsCollation === 'unicode' ? {\n\t\t\t\torganizeImportsCaseFirst: organizeImportsCaseSensitivity === 'caseInsensitive' ? undefined : withDefaultAsUndefined(config.get<'default' | 'upper' | 'lower' | false>('organizeImports.caseFirst', false), 'default'),\n\t\t\t\torganizeImportsAccentCollation: config.get<boolean>('organizeImports.accentCollation'),\n\t\t\t\torganizeImportsLocale: config.get<string>('organizeImports.locale'),\n\t\t\t\torganizeImportsNumericCollation: config.get<boolean>('organizeImports.numericCollation'),\n\t\t\t} : {}),\n\t\t};\n\t}\n\n\n\tprivate getMaximumHoverLength(document: vscode.TextDocument): number {\n\t\tconst defaultMaxLength = 500;\n\t\tconst maximumHoverLength = vscode.workspace.getConfiguration('js/ts', document).get<number>('hover.maximumLength', defaultMaxLength);\n\t\tif (!Number.isSafeInteger(maximumHoverLength) || maximumHoverLength <= 0) {\n\t\t\treturn defaultMaxLength;\n\t\t}\n\t\treturn maximumHoverLength;\n\t}\n}\n\nfunction withDefaultAsUndefined<T, O extends T>(value: T, def: O): Exclude<T, O> | undefined {\n\treturn value === def ? undefined : value as Exclude<T, O>;\n}\n\nexport class InlayHintSettingNames {\n\tstatic readonly parameterNamesSuppressWhenArgumentMatchesName = 'inlayHints.parameterNames.suppressWhenArgumentMatchesName';\n\tstatic readonly parameterNamesEnabled = 'inlayHints.parameterTypes.enabled';\n\tstatic readonly variableTypesEnabled = 'inlayHints.variableTypes.enabled';\n\tstatic readonly variableTypesSuppressWhenTypeMatchesName = 'inlayHints.variableTypes.suppressWhenTypeMatchesName';\n\tstatic readonly propertyDeclarationTypesEnabled = 'inlayHints.propertyDeclarationTypes.enabled';\n\tstatic readonly functionLikeReturnTypesEnabled = 'inlayHints.functionLikeReturnTypes.enabled';\n\tstatic readonly enumMemberValuesEnabled = 'inlayHints.enumMemberValues.enabled';\n}\n\nexport function getInlayHintsPreferences(config: vscode.WorkspaceConfiguration) {\n\treturn {\n\t\tincludeInlayParameterNameHints: getInlayParameterNameHintsPreference(config),\n\t\tincludeInlayParameterNameHintsWhenArgumentMatchesName: !config.get<boolean>(InlayHintSettingNames.parameterNamesSuppressWhenArgumentMatchesName, true),\n\t\tincludeInlayFunctionParameterTypeHints: config.get<boolean>(InlayHintSettingNames.parameterNamesEnabled, false),\n\t\tincludeInlayVariableTypeHints: config.get<boolean>(InlayHintSettingNames.variableTypesEnabled, false),\n\t\tincludeInlayVariableTypeHintsWhenTypeMatchesName: !config.get<boolean>(InlayHintSettingNames.variableTypesSuppressWhenTypeMatchesName, true),\n\t\tincludeInlayPropertyDeclarationTypeHints: config.get<boolean>(InlayHintSettingNames.propertyDeclarationTypesEnabled, false),\n\t\tincludeInlayFunctionLikeReturnTypeHints: config.get<boolean>(InlayHintSettingNames.functionLikeReturnTypesEnabled, false),\n\t\tincludeInlayEnumMemberValueHints: config.get<boolean>(InlayHintSettingNames.enumMemberValuesEnabled, false),\n\t} as const;\n}\n\nfunction getInlayParameterNameHintsPreference(config: vscode.WorkspaceConfiguration) {\n\tswitch (config.get<string>('inlayHints.parameterNames.enabled')) {\n\t\tcase 'none': return 'none';\n\t\tcase 'literals': return 'literals';\n\t\tcase 'all': return 'all';\n\t\tdefault: return undefined;\n\t}\n}\n\nfunction getImportModuleSpecifierPreference(config: vscode.WorkspaceConfiguration) {\n\tswitch (config.get<string>('importModuleSpecifier')) {\n\t\tcase 'project-relative': return 'project-relative';\n\t\tcase 'relative': return 'relative';\n\t\tcase 'non-relative': return 'non-relative';\n\t\tdefault: return undefined;\n\t}\n}\n\nfunction getImportModuleSpecifierEndingPreference(config: vscode.WorkspaceConfiguration) {\n\tswitch (config.get<string>('importModuleSpecifierEnding')) {\n\t\tcase 'minimal': return 'minimal';\n\t\tcase 'index': return 'index';\n\t\tcase 'js': return 'js';\n\t\tdefault: return 'auto';\n\t}\n}\n\nfunction getJsxAttributeCompletionStyle(config: vscode.WorkspaceConfiguration) {\n\tswitch (config.get<string>('jsxAttributeCompletionStyle')) {\n\t\tcase 'braces': return 'braces';\n\t\tcase 'none': return 'none';\n\t\tdefault: return 'auto';\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { CommandManager } from '../commands/commandManager';\nimport { isSupportedLanguageMode, isTypeScriptDocument, jsTsLanguageModes } from '../configuration/languageIds';\nimport { ProjectType, isImplicitProjectConfigFile, openOrCreateConfig, openProjectConfigForFile, openProjectConfigOrPromptToCreate } from '../tsconfig';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { Disposable } from '../utils/dispose';\nimport { ActiveJsTsEditorTracker } from './activeJsTsEditorTracker';\n\n\nnamespace IntellisenseState {\n\texport const enum Type { None, Pending, Resolved, SyntaxOnly }\n\n\texport const None = Object.freeze({ type: Type.None } as const);\n\n\texport const SyntaxOnly = Object.freeze({ type: Type.SyntaxOnly } as const);\n\n\texport class Pending {\n\t\tpublic readonly type = Type.Pending;\n\n\t\tpublic readonly cancellation = new vscode.CancellationTokenSource();\n\n\t\tconstructor(\n\t\t\tpublic readonly resource: vscode.Uri,\n\t\t\tpublic readonly projectType: ProjectType,\n\t\t) { }\n\t}\n\n\texport class Resolved {\n\t\tpublic readonly type = Type.Resolved;\n\n\t\tconstructor(\n\t\t\tpublic readonly resource: vscode.Uri,\n\t\t\tpublic readonly projectType: ProjectType,\n\t\t\tpublic readonly configFile: string,\n\t\t) { }\n\t}\n\n\texport type State = typeof None | Pending | Resolved | typeof SyntaxOnly;\n}\n\ntype CreateOrOpenConfigCommandArgs = [root: vscode.Uri, projectType: ProjectType];\n\nexport class IntellisenseStatus extends Disposable {\n\n\tpublic readonly openOpenConfigCommandId = '_typescript.openConfig';\n\tpublic readonly createOrOpenConfigCommandId = '_typescript.createOrOpenConfig';\n\n\tprivate _statusItem?: vscode.LanguageStatusItem;\n\n\tprivate _ready = false;\n\tprivate _state: IntellisenseState.State = IntellisenseState.None;\n\n\tconstructor(\n\t\tprivate readonly _client: ITypeScriptServiceClient,\n\t\tcommandManager: CommandManager,\n\t\tprivate readonly _activeTextEditorManager: ActiveJsTsEditorTracker,\n\t) {\n\t\tsuper();\n\n\t\tcommandManager.register({\n\t\t\tid: this.openOpenConfigCommandId,\n\t\t\texecute: async (...[root, projectType]: CreateOrOpenConfigCommandArgs) => {\n\t\t\t\tif (this._state.type === IntellisenseState.Type.Resolved) {\n\t\t\t\t\tawait openProjectConfigOrPromptToCreate(projectType, this._client, root, this._state.configFile);\n\t\t\t\t} else if (this._state.type === IntellisenseState.Type.Pending) {\n\t\t\t\t\tawait openProjectConfigForFile(projectType, this._client, this._state.resource);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t\tcommandManager.register({\n\t\t\tid: this.createOrOpenConfigCommandId,\n\t\t\texecute: async (...[root, projectType]: CreateOrOpenConfigCommandArgs) => {\n\t\t\t\tawait openOrCreateConfig(this._client.apiVersion, projectType, root, this._client.configuration);\n\t\t\t},\n\t\t});\n\n\t\t_activeTextEditorManager.onDidChangeActiveJsTsEditor(this.updateStatus, this, this._disposables);\n\n\t\tthis._client.onReady(() => {\n\t\t\tthis._ready = true;\n\t\t\tthis.updateStatus();\n\t\t});\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tthis._statusItem?.dispose();\n\t}\n\n\tprivate async updateStatus() {\n\t\tconst doc = this._activeTextEditorManager.activeJsTsEditor?.document;\n\t\tif (!doc || !isSupportedLanguageMode(doc)) {\n\t\t\tthis.updateState(IntellisenseState.None);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._client.hasCapabilityForResource(doc.uri, ClientCapability.Semantic)) {\n\t\t\tthis.updateState(IntellisenseState.SyntaxOnly);\n\t\t\treturn;\n\t\t}\n\n\t\tconst file = this._client.toOpenTsFilePath(doc, { suppressAlertOnFailure: true });\n\t\tif (!file) {\n\t\t\tthis.updateState(IntellisenseState.None);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._ready) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst projectType = isTypeScriptDocument(doc) ? ProjectType.TypeScript : ProjectType.JavaScript;\n\n\t\tconst pendingState = new IntellisenseState.Pending(doc.uri, projectType);\n\t\tthis.updateState(pendingState);\n\n\t\tconst response = await this._client.execute('projectInfo', { file, needFileNameList: false }, pendingState.cancellation.token);\n\t\tif (response.type === 'response' && response.body) {\n\t\t\tif (this._state === pendingState) {\n\t\t\t\tthis.updateState(new IntellisenseState.Resolved(doc.uri, projectType, response.body.configFileName));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate updateState(newState: IntellisenseState.State): void {\n\t\tif (this._state === newState) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._state.type === IntellisenseState.Type.Pending) {\n\t\t\tthis._state.cancellation.cancel();\n\t\t\tthis._state.cancellation.dispose();\n\t\t}\n\n\t\tthis._state = newState;\n\n\t\tswitch (this._state.type) {\n\t\t\tcase IntellisenseState.Type.None: {\n\t\t\t\tthis._statusItem?.dispose();\n\t\t\t\tthis._statusItem = undefined;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase IntellisenseState.Type.Pending: {\n\t\t\t\tconst statusItem = this.ensureStatusItem();\n\t\t\t\tstatusItem.severity = vscode.LanguageStatusSeverity.Information;\n\t\t\t\tstatusItem.text = vscode.l10n.t(\"Loading IntelliSense status\");\n\t\t\t\tstatusItem.detail = undefined;\n\t\t\t\tstatusItem.command = undefined;\n\t\t\t\tstatusItem.busy = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase IntellisenseState.Type.Resolved: {\n\t\t\t\tconst noConfigFileText = this._state.projectType === ProjectType.TypeScript\n\t\t\t\t\t? vscode.l10n.t(\"No tsconfig\")\n\t\t\t\t\t: vscode.l10n.t(\"No jsconfig\");\n\n\t\t\t\tconst rootPath = this._client.getWorkspaceRootForResource(this._state.resource);\n\t\t\t\tif (!rootPath) {\n\t\t\t\t\tif (this._statusItem) {\n\t\t\t\t\t\tthis._statusItem.text = noConfigFileText;\n\t\t\t\t\t\tthis._statusItem.detail = !vscode.workspace.workspaceFolders\n\t\t\t\t\t\t\t? vscode.l10n.t(\"No opened folders\")\n\t\t\t\t\t\t\t: vscode.l10n.t(\"File is not part opened folders\");\n\t\t\t\t\t\tthis._statusItem.busy = false;\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst statusItem = this.ensureStatusItem();\n\t\t\t\tstatusItem.busy = false;\n\t\t\t\tstatusItem.detail = undefined;\n\n\t\t\t\tstatusItem.severity = vscode.LanguageStatusSeverity.Information;\n\t\t\t\tif (isImplicitProjectConfigFile(this._state.configFile)) {\n\t\t\t\t\tstatusItem.text = noConfigFileText;\n\t\t\t\t\tstatusItem.detail = undefined;\n\t\t\t\t\tstatusItem.command = {\n\t\t\t\t\t\tcommand: this.createOrOpenConfigCommandId,\n\t\t\t\t\t\ttitle: this._state.projectType === ProjectType.TypeScript\n\t\t\t\t\t\t\t? vscode.l10n.t(\"Configure TSConfig\")\n\t\t\t\t\t\t\t: vscode.l10n.t(\"Configure JSConfig\"),\n\t\t\t\t\t\targuments: [rootPath, this._state.projectType] satisfies CreateOrOpenConfigCommandArgs,\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tstatusItem.text = vscode.workspace.asRelativePath(this._state.configFile);\n\t\t\t\t\tstatusItem.detail = undefined;\n\t\t\t\t\tstatusItem.command = {\n\t\t\t\t\t\tcommand: this.openOpenConfigCommandId,\n\t\t\t\t\t\ttitle: vscode.l10n.t(\"Open Config File\"),\n\t\t\t\t\t\targuments: [rootPath, this._state.projectType] satisfies CreateOrOpenConfigCommandArgs,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase IntellisenseState.Type.SyntaxOnly: {\n\t\t\t\tconst statusItem = this.ensureStatusItem();\n\t\t\t\tstatusItem.severity = vscode.LanguageStatusSeverity.Warning;\n\t\t\t\tstatusItem.text = vscode.l10n.t(\"Partial mode\");\n\t\t\t\tstatusItem.detail = vscode.l10n.t(\"Project wide IntelliSense not available\");\n\t\t\t\tstatusItem.busy = false;\n\t\t\t\tstatusItem.command = {\n\t\t\t\t\ttitle: vscode.l10n.t(\"Learn More\"),\n\t\t\t\t\tcommand: 'vscode.open',\n\t\t\t\t\targuments: [\n\t\t\t\t\t\tvscode.Uri.parse('https://aka.ms/vscode/jsts/partial-mode'),\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate ensureStatusItem(): vscode.LanguageStatusItem {\n\t\tif (!this._statusItem) {\n\t\t\tthis._statusItem = vscode.languages.createLanguageStatusItem('typescript.projectStatus', jsTsLanguageModes);\n\t\t\tthis._statusItem.name = vscode.l10n.t(\"JS/TS IntelliSense Status\");\n\t\t}\n\t\treturn this._statusItem;\n\t}\n}\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_ITEMS_RECEIVED, _DYN_LENGTH, _DYN_NAME } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { getJSON } from \"./EnvUtils\";\r\n/**\r\n * Parses the response from the backend.\r\n * @param response - XMLHttpRequest or XDomainRequest response\r\n */\r\nexport function parseResponse(response, diagLog) {\r\n    try {\r\n        if (response && response !== \"\") {\r\n            var result = getJSON().parse(response);\r\n            if (result && result[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] && result[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] >= result.itemsAccepted &&\r\n                result.itemsReceived - result.itemsAccepted === result.errors[_DYN_LENGTH /* @min:%2elength */]) {\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        _throwInternal(diagLog, 1 /* eLoggingSeverity.CRITICAL */, 43 /* _eInternalMessageId.InvalidBackendResponse */, \"Cannot parse the response. \" + (e[_DYN_NAME /* @min:%2ename */] || dumpObj(e)), {\r\n            response: response\r\n        });\r\n    }\r\n    return null;\r\n}\r\n//# sourceMappingURL=ResponseHelpers.js.map","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { createAllPromise, createPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { arrForEach, arrIndexOf, objDefine, safe, scheduleTimeout } from \"@nevware21/ts-utils\";\r\nimport { createDynamicConfig } from \"../Config/DynamicConfig\";\r\nimport { _DYN_ADD_NOTIFICATION_LIS1, _DYN_CANCEL, _DYN_DATA, _DYN_IS_ASYNC, _DYN_IS_CHILD_EVT, _DYN_LENGTH, _DYN_PUSH, _DYN_REMOVE_NOTIFICATION_0, _DYN_SPLICE, _DYN_UNLOAD, _DYN_WATCH } from \"../__DynamicConstants\";\r\nimport { STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_EVENTS_SENT, STR_OFFLINE_DROP, STR_OFFLINE_SENT, STR_OFFLINE_STORE, STR_PERF_EVENT } from \"./InternalConstants\";\r\nvar defaultValues = {\r\n    perfEvtsSendAll: false\r\n};\r\nfunction _runScheduledListeners(asyncNotifications) {\r\n    asyncNotifications.h = null;\r\n    var callbacks = asyncNotifications.cb;\r\n    asyncNotifications.cb = [];\r\n    arrForEach(callbacks, function (cb) {\r\n        // Run the listener in a try-catch to ensure that a single listener failing doesn't prevent the others from running\r\n        safe(cb.fn, [cb.arg]);\r\n    });\r\n}\r\n// This function is used to combine the logic of running the listeners and handling the async notifications so that they don't\r\n// create multiple timers if there are multiple async listeners.\r\nfunction _runListeners(listeners, name, asyncNotifications, callback) {\r\n    arrForEach(listeners, function (listener) {\r\n        if (listener && listener[name]) {\r\n            if (asyncNotifications) {\r\n                // Schedule the callback to be called after the current call stack has cleared.\r\n                asyncNotifications.cb[_DYN_PUSH /* @min:%2epush */]({\r\n                    fn: callback,\r\n                    arg: listener\r\n                });\r\n                asyncNotifications.h = asyncNotifications.h || scheduleTimeout(_runScheduledListeners, 0, asyncNotifications);\r\n            }\r\n            else {\r\n                // Run the listener in a try-catch to ensure that a single listener failing doesn't prevent the others from running\r\n                safe(callback, [listener]);\r\n            }\r\n        }\r\n    });\r\n}\r\n/**\r\n * Class to manage sending notifications to all the listeners.\r\n */\r\nvar NotificationManager = /** @class */ (function () {\r\n    function NotificationManager(config) {\r\n        this.listeners = [];\r\n        var perfEvtsSendAll;\r\n        var unloadHandler;\r\n        var _listeners = [];\r\n        var _asyncNotifications = {\r\n            h: null,\r\n            cb: []\r\n        };\r\n        var cfgHandler = createDynamicConfig(config, defaultValues);\r\n        unloadHandler = cfgHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n            perfEvtsSendAll = !!details.cfg.perfEvtsSendAll;\r\n        });\r\n        dynamicProto(NotificationManager, this, function (_self) {\r\n            objDefine(_self, \"listeners\", {\r\n                g: function () { return _listeners; }\r\n            });\r\n            _self[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */] = function (listener) {\r\n                _listeners[_DYN_PUSH /* @min:%2epush */](listener);\r\n            };\r\n            /**\r\n             * Removes all instances of the listener.\r\n             * @param listener - AWTNotificationListener to remove.\r\n             */\r\n            _self[_DYN_REMOVE_NOTIFICATION_0 /* @min:%2eremoveNotificationListener */] = function (listener) {\r\n                var index = arrIndexOf(_listeners, listener);\r\n                while (index > -1) {\r\n                    _listeners[_DYN_SPLICE /* @min:%2esplice */](index, 1);\r\n                    index = arrIndexOf(_listeners, listener);\r\n                }\r\n            };\r\n            /**\r\n             * Notification for events sent.\r\n             * @param events - The array of events that have been sent.\r\n             */\r\n            _self[STR_EVENTS_SENT /* @min:%2eeventsSent */] = function (events) {\r\n                _runListeners(_listeners, STR_EVENTS_SENT, _asyncNotifications, function (listener) {\r\n                    listener[STR_EVENTS_SENT /* @min:%2eeventsSent */](events);\r\n                });\r\n            };\r\n            /**\r\n             * Notification for events being discarded.\r\n             * @param events - The array of events that have been discarded by the SDK.\r\n             * @param reason - The reason for which the SDK discarded the events. The EventsDiscardedReason\r\n             * constant should be used to check the different values.\r\n             */\r\n            _self[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */] = function (events, reason) {\r\n                _runListeners(_listeners, STR_EVENTS_DISCARDED, _asyncNotifications, function (listener) {\r\n                    listener[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */](events, reason);\r\n                });\r\n            };\r\n            /**\r\n             * [Optional] A function called when the events have been requested to be sent to the sever.\r\n             * @param sendReason - The reason why the event batch is being sent.\r\n             * @param isAsync - A flag which identifies whether the requests are being sent in an async or sync manner.\r\n             */\r\n            _self[STR_EVENTS_SEND_REQUEST /* @min:%2eeventsSendRequest */] = function (sendReason, isAsync) {\r\n                _runListeners(_listeners, STR_EVENTS_SEND_REQUEST, isAsync ? _asyncNotifications : null, function (listener) {\r\n                    listener[STR_EVENTS_SEND_REQUEST /* @min:%2eeventsSendRequest */](sendReason, isAsync);\r\n                });\r\n            };\r\n            _self[STR_PERF_EVENT /* @min:%2eperfEvent */] = function (perfEvent) {\r\n                if (perfEvent) {\r\n                    // Send all events or only parent events\r\n                    if (perfEvtsSendAll || !perfEvent[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */]()) {\r\n                        _runListeners(_listeners, STR_PERF_EVENT, null, function (listener) {\r\n                            if (perfEvent[_DYN_IS_ASYNC /* @min:%2eisAsync */]) {\r\n                                scheduleTimeout(function () { return listener[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent); }, 0);\r\n                            }\r\n                            else {\r\n                                listener[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            };\r\n            _self[STR_OFFLINE_STORE /* @min:%2eofflineEventsStored */] = function (events) {\r\n                if (events && events[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    _runListeners(_listeners, STR_OFFLINE_STORE, _asyncNotifications, function (listener) {\r\n                        listener[STR_OFFLINE_STORE /* @min:%2eofflineEventsStored */](events);\r\n                    });\r\n                }\r\n            };\r\n            _self[STR_OFFLINE_SENT /* @min:%2eofflineBatchSent */] = function (batch) {\r\n                if (batch && batch[_DYN_DATA /* @min:%2edata */]) {\r\n                    _runListeners(_listeners, STR_OFFLINE_SENT, _asyncNotifications, function (listener) {\r\n                        listener[STR_OFFLINE_SENT /* @min:%2eofflineBatchSent */](batch);\r\n                    });\r\n                }\r\n            };\r\n            _self[STR_OFFLINE_DROP /* @min:%2eofflineBatchDrop */] = function (cnt, reason) {\r\n                if (cnt > 0) {\r\n                    var rn_1 = reason || 0; // default is unknown\r\n                    _runListeners(_listeners, STR_OFFLINE_DROP, _asyncNotifications, function (listener) {\r\n                        listener[STR_OFFLINE_DROP /* @min:%2eofflineBatchDrop */](cnt, rn_1);\r\n                    });\r\n                }\r\n            };\r\n            _self[_DYN_UNLOAD /* @min:%2eunload */] = function (isAsync) {\r\n                var _finishUnload = function () {\r\n                    unloadHandler && unloadHandler.rm();\r\n                    unloadHandler = null;\r\n                    _listeners = [];\r\n                    // Clear any async listener\r\n                    _asyncNotifications.h && _asyncNotifications.h[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                    _asyncNotifications.h = null;\r\n                    _asyncNotifications.cb = [];\r\n                };\r\n                var waiting;\r\n                _runListeners(_listeners, \"unload\", null, function (listener) {\r\n                    var asyncUnload = listener[_DYN_UNLOAD /* @min:%2eunload */](isAsync);\r\n                    if (asyncUnload) {\r\n                        if (!waiting) {\r\n                            waiting = [];\r\n                        }\r\n                        waiting[_DYN_PUSH /* @min:%2epush */](asyncUnload);\r\n                    }\r\n                });\r\n                if (waiting) {\r\n                    return createPromise(function (resolve) {\r\n                        return doAwaitResponse(createAllPromise(waiting), function () {\r\n                            _finishUnload();\r\n                            resolve();\r\n                        });\r\n                    });\r\n                }\r\n                else {\r\n                    _finishUnload();\r\n                }\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for NotificationManager.prototype.addNotificationListener.\r\n// Removed Stub for NotificationManager.prototype.removeNotificationListener.\r\n// Removed Stub for NotificationManager.prototype.eventsSent.\r\n// Removed Stub for NotificationManager.prototype.eventsDiscarded.\r\n// Removed Stub for NotificationManager.prototype.eventsSendRequest.\r\n// Removed Stub for NotificationManager.prototype.perfEvent.\r\n// Removed Stub for NotificationManager.prototype.unload.\r\n// Removed Stub for NotificationManager.prototype.offlineEventsStored.\r\n// Removed Stub for NotificationManager.prototype.offlineBatchSent.\r\n// Removed Stub for NotificationManager.prototype.offlineBatchDrop.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    NotificationManager.__ieDyn=1;\n\n    return NotificationManager;\r\n}());\r\nexport { NotificationManager };\r\n//# sourceMappingURL=NotificationManager.js.map","module.exports = require(\"vscode\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as jsonc from 'jsonc-parser';\nimport { isAbsolute, posix } from 'path';\nimport * as vscode from 'vscode';\nimport { Utils } from 'vscode-uri';\nimport { coalesce } from '../utils/arrays';\nimport { exists, looksLikeAbsoluteWindowsPath } from '../utils/fs';\n\nfunction mapChildren<R>(node: jsonc.Node | undefined, f: (x: jsonc.Node) => R): R[] {\n\treturn node && node.type === 'array' && node.children\n\t\t? node.children.map(f)\n\t\t: [];\n}\n\nconst openExtendsLinkCommandId = '_typescript.openExtendsLink';\n\nenum TsConfigLinkType {\n\tExtends,\n\tReferences\n}\n\ntype OpenExtendsLinkCommandArgs = {\n\treadonly resourceUri: vscode.Uri;\n\treadonly extendsValue: string;\n\treadonly linkType: TsConfigLinkType;\n};\n\n\nclass TsconfigLinkProvider implements vscode.DocumentLinkProvider {\n\n\tpublic provideDocumentLinks(\n\t\tdocument: vscode.TextDocument,\n\t\t_token: vscode.CancellationToken\n\t): vscode.DocumentLink[] {\n\t\tconst root = jsonc.parseTree(document.getText());\n\t\tif (!root) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn coalesce([\n\t\t\tthis.getExtendsLink(document, root),\n\t\t\t...this.getFilesLinks(document, root),\n\t\t\t...this.getReferencesLinks(document, root)\n\t\t]);\n\t}\n\n\tprivate getExtendsLink(document: vscode.TextDocument, root: jsonc.Node): vscode.DocumentLink | undefined {\n\t\tconst node = jsonc.findNodeAtLocation(root, ['extends']);\n\t\treturn node && this.tryCreateTsConfigLink(document, node, TsConfigLinkType.Extends);\n\t}\n\n\tprivate getReferencesLinks(document: vscode.TextDocument, root: jsonc.Node) {\n\t\treturn mapChildren(\n\t\t\tjsonc.findNodeAtLocation(root, ['references']),\n\t\t\tchild => {\n\t\t\t\tconst pathNode = jsonc.findNodeAtLocation(child, ['path']);\n\t\t\t\treturn pathNode && this.tryCreateTsConfigLink(document, pathNode, TsConfigLinkType.References);\n\t\t\t});\n\t}\n\n\tprivate tryCreateTsConfigLink(document: vscode.TextDocument, node: jsonc.Node, linkType: TsConfigLinkType): vscode.DocumentLink | undefined {\n\t\tif (!this.isPathValue(node)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args: OpenExtendsLinkCommandArgs = {\n\t\t\tresourceUri: { ...document.uri.toJSON(), $mid: undefined },\n\t\t\textendsValue: node.value,\n\t\t\tlinkType\n\t\t};\n\n\t\tconst link = new vscode.DocumentLink(\n\t\t\tthis.getRange(document, node),\n\t\t\tvscode.Uri.parse(`command:${openExtendsLinkCommandId}?${JSON.stringify(args)}`));\n\t\tlink.tooltip = vscode.l10n.t(\"Follow link\");\n\t\treturn link;\n\t}\n\n\tprivate getFilesLinks(document: vscode.TextDocument, root: jsonc.Node) {\n\t\treturn mapChildren(\n\t\t\tjsonc.findNodeAtLocation(root, ['files']),\n\t\t\tchild => this.pathNodeToLink(document, child));\n\t}\n\n\tprivate pathNodeToLink(\n\t\tdocument: vscode.TextDocument,\n\t\tnode: jsonc.Node | undefined\n\t): vscode.DocumentLink | undefined {\n\t\treturn this.isPathValue(node)\n\t\t\t? new vscode.DocumentLink(this.getRange(document, node), this.getFileTarget(document, node))\n\t\t\t: undefined;\n\t}\n\n\tprivate isPathValue(node: jsonc.Node | undefined): node is jsonc.Node {\n\t\treturn node\n\t\t\t&& node.type === 'string'\n\t\t\t&& node.value\n\t\t\t&& !(node.value as string).includes('*'); // don't treat globs as links.\n\t}\n\n\tprivate getFileTarget(document: vscode.TextDocument, node: jsonc.Node): vscode.Uri {\n\t\tif (isAbsolute(node.value)) {\n\t\t\treturn vscode.Uri.file(node.value);\n\t\t}\n\n\t\treturn vscode.Uri.joinPath(Utils.dirname(document.uri), node.value);\n\t}\n\n\tprivate getRange(document: vscode.TextDocument, node: jsonc.Node) {\n\t\tconst offset = node.offset;\n\t\tconst start = document.positionAt(offset + 1);\n\t\tconst end = document.positionAt(offset + (node.length - 1));\n\t\treturn new vscode.Range(start, end);\n\t}\n}\n\nasync function resolveNodeModulesPath(baseDirUri: vscode.Uri, pathCandidates: string[]): Promise<vscode.Uri | undefined> {\n\tlet currentUri = baseDirUri;\n\tconst baseCandidate = pathCandidates[0];\n\tconst sepIndex = baseCandidate.startsWith('@') ? 2 : 1;\n\tconst moduleBasePath = baseCandidate.split(posix.sep).slice(0, sepIndex).join(posix.sep);\n\twhile (true) {\n\t\tconst moduleAbsoluteUrl = vscode.Uri.joinPath(currentUri, 'node_modules', moduleBasePath);\n\t\tlet moduleStat: vscode.FileStat | undefined;\n\t\ttry {\n\t\t\tmoduleStat = await vscode.workspace.fs.stat(moduleAbsoluteUrl);\n\t\t} catch (err) {\n\t\t\t// noop\n\t\t}\n\n\t\tif (moduleStat && (moduleStat.type & vscode.FileType.Directory)) {\n\t\t\tfor (const uriCandidate of pathCandidates\n\t\t\t\t.map((relativePath) => relativePath.split(posix.sep).slice(sepIndex).join(posix.sep))\n\t\t\t\t// skip empty paths within module\n\t\t\t\t.filter(Boolean)\n\t\t\t\t.map((relativeModulePath) => vscode.Uri.joinPath(moduleAbsoluteUrl, relativeModulePath))\n\t\t\t) {\n\t\t\t\tif (await exists(uriCandidate)) {\n\t\t\t\t\treturn uriCandidate;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Continue to looking for potentially another version\n\t\t}\n\n\t\tconst oldUri = currentUri;\n\t\tcurrentUri = vscode.Uri.joinPath(currentUri, '..');\n\n\t\t// Can't go next. Reached the system root\n\t\tif (oldUri.path === currentUri.path) {\n\t\t\treturn;\n\t\t}\n\t}\n}\n\n// Reference Extends:https://github.com/microsoft/TypeScript/blob/febfd442cdba343771f478cf433b0892f213ad2f/src/compiler/commandLineParser.ts#L3005\n// Reference Project References: https://github.com/microsoft/TypeScript/blob/7377f5cb9db19d79a6167065b323a45611c812b5/src/compiler/tsbuild.ts#L188C1-L194C2\n/**\n* @returns Returns undefined in case of lack of result while trying to resolve from node_modules\n*/\nasync function getTsconfigPath(baseDirUri: vscode.Uri, pathValue: string, linkType: TsConfigLinkType): Promise<vscode.Uri | undefined> {\n\tasync function resolve(absolutePath: vscode.Uri): Promise<vscode.Uri> {\n\t\tif (absolutePath.path.endsWith('.json') || await exists(absolutePath)) {\n\t\t\treturn absolutePath;\n\t\t}\n\t\treturn absolutePath.with({\n\t\t\tpath: `${absolutePath.path}${linkType === TsConfigLinkType.References ? '/tsconfig.json' : '.json'}`\n\t\t});\n\t}\n\n\tconst isRelativePath = ['./', '../'].some(str => pathValue.startsWith(str));\n\tif (isRelativePath) {\n\t\treturn resolve(vscode.Uri.joinPath(baseDirUri, pathValue));\n\t}\n\n\tif (pathValue.startsWith('/') || looksLikeAbsoluteWindowsPath(pathValue)) {\n\t\treturn resolve(vscode.Uri.file(pathValue));\n\t}\n\n\t// Otherwise resolve like a module\n\treturn resolveNodeModulesPath(baseDirUri, [\n\t\tpathValue,\n\t\t...pathValue.endsWith('.json') ? [] : [\n\t\t\t`${pathValue}.json`,\n\t\t\t`${pathValue}/tsconfig.json`,\n\t\t]\n\t]);\n}\n\nexport function register() {\n\tconst patterns: vscode.GlobPattern[] = [\n\t\t'**/[jt]sconfig.json',\n\t\t'**/[jt]sconfig.*.json',\n\t];\n\n\tconst languages = ['json', 'jsonc'];\n\n\tconst selector: vscode.DocumentSelector =\n\t\tlanguages.map(language => patterns.map((pattern): vscode.DocumentFilter => ({ language, pattern })))\n\t\t\t.flat();\n\n\treturn vscode.Disposable.from(\n\t\tvscode.commands.registerCommand(openExtendsLinkCommandId, async ({ resourceUri, extendsValue, linkType }: OpenExtendsLinkCommandArgs) => {\n\t\t\tconst tsconfigPath = await getTsconfigPath(Utils.dirname(vscode.Uri.from(resourceUri)), extendsValue, linkType);\n\t\t\tif (tsconfigPath === undefined) {\n\t\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"Failed to resolve {0} as module\", extendsValue));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Will suggest to create a .json variant if it doesn't exist yet (but only for relative paths)\n\t\t\tawait vscode.commands.executeCommand('vscode.open', tsconfigPath);\n\t\t}),\n\t\tvscode.languages.registerDocumentLinkProvider(selector, new TsconfigLinkProvider()),\n\t);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Extension, extensions, Uri } from 'vscode';\n\nexport interface RemoteHubApi {\n\tgetProviderUri(uri: Uri): Uri;\n\tgetProviderRootUri(uri: Uri): Uri;\n\n\tgetVirtualUri(uri: Uri): Uri;\n\tgetVirtualWorkspaceUri(uri: Uri): Uri | undefined;\n\n\tloadWorkspaceContents?(workspaceUri: Uri): Promise<boolean>;\n}\n\nnamespace RemoteRepositories {\n\n\tlet remoteHub: Extension<RemoteHubApi> | undefined;\n\n\tfunction getRemoteExtension(): Extension<RemoteHubApi> {\n\t\tif (remoteHub !== undefined) {\n\t\t\treturn remoteHub;\n\t\t}\n\n\t\tremoteHub = extensions.getExtension<RemoteHubApi>('ms-vscode.remote-repositories')\n\t\t\t?? extensions.getExtension<RemoteHubApi>('GitHub.remoteHub')\n\t\t\t?? extensions.getExtension<RemoteHubApi>('GitHub.remoteHub-insiders');\n\n\t\tif (remoteHub === undefined) {\n\t\t\tthrow new Error(`No Remote repository extension found.`);\n\t\t}\n\t\treturn remoteHub;\n\t}\n\n\texport function getApi(): Thenable<RemoteHubApi> {\n\t\treturn getRemoteExtension().activate();\n\t}\n}\n\nexport default RemoteRepositories;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { TypeScriptServiceConfiguration } from '../configuration/configuration';\nimport { DiagnosticLanguage } from '../configuration/languageDescription';\nimport { TelemetryReporter } from '../logging/telemetry';\nimport { DiagnosticPerformanceData as TsDiagnosticPerformanceData } from '../tsServer/protocol/protocol';\nimport * as arrays from '../utils/arrays';\nimport { Disposable } from '../utils/dispose';\nimport { equals } from '../utils/objects';\nimport { ResourceMap } from '../utils/resourceMap';\n\nfunction diagnosticsEquals(a: vscode.Diagnostic, b: vscode.Diagnostic): boolean {\n\tif (a === b) {\n\t\treturn true;\n\t}\n\n\treturn a.code === b.code\n\t\t&& a.message === b.message\n\t\t&& a.severity === b.severity\n\t\t&& a.source === b.source\n\t\t&& a.range.isEqual(b.range)\n\t\t&& arrays.equals(a.relatedInformation || arrays.empty, b.relatedInformation || arrays.empty, (a, b) => {\n\t\t\treturn a.message === b.message\n\t\t\t\t&& a.location.range.isEqual(b.location.range)\n\t\t\t\t&& a.location.uri.fsPath === b.location.uri.fsPath;\n\t\t})\n\t\t&& arrays.equals(a.tags || arrays.empty, b.tags || arrays.empty);\n}\n\nexport const enum DiagnosticKind {\n\tSyntax,\n\tSemantic,\n\tSuggestion,\n\tRegionSemantic,\n}\n\nclass FileDiagnostics {\n\n\tprivate readonly _diagnostics = new Map<DiagnosticKind, ReadonlyArray<vscode.Diagnostic>>();\n\n\tconstructor(\n\t\tpublic readonly file: vscode.Uri,\n\t\tpublic language: DiagnosticLanguage\n\t) { }\n\n\tpublic updateDiagnostics(\n\t\tlanguage: DiagnosticLanguage,\n\t\tkind: DiagnosticKind,\n\t\tdiagnostics: ReadonlyArray<vscode.Diagnostic>,\n\t\tranges: ReadonlyArray<vscode.Range> | undefined\n\t): boolean {\n\t\tif (language !== this.language) {\n\t\t\tthis._diagnostics.clear();\n\t\t\tthis.language = language;\n\t\t}\n\n\t\tconst existing = this._diagnostics.get(kind);\n\t\tif (existing?.length === 0 && diagnostics.length === 0) {\n\t\t\t// No need to update\n\t\t\treturn false;\n\t\t}\n\n\t\tif (kind === DiagnosticKind.RegionSemantic) {\n\t\t\treturn this.updateRegionDiagnostics(diagnostics, ranges!);\n\t\t}\n\t\tthis._diagnostics.set(kind, diagnostics);\n\t\treturn true;\n\t}\n\n\tpublic getAllDiagnostics(settings: DiagnosticSettings): vscode.Diagnostic[] {\n\t\tif (!settings.getValidate(this.language)) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn [\n\t\t\t...this.get(DiagnosticKind.Syntax),\n\t\t\t...this.get(DiagnosticKind.Semantic),\n\t\t\t...this.getSuggestionDiagnostics(settings),\n\t\t];\n\t}\n\n\tpublic delete(toDelete: vscode.Diagnostic): void {\n\t\tfor (const [type, diags] of this._diagnostics) {\n\t\t\tthis._diagnostics.set(type, diags.filter(diag => !diagnosticsEquals(diag, toDelete)));\n\t\t}\n\t}\n\n\t/**\n\t * @param ranges The ranges whose diagnostics were updated.\n\t */\n\tprivate updateRegionDiagnostics(\n\t\tdiagnostics: ReadonlyArray<vscode.Diagnostic>,\n\t\tranges: ReadonlyArray<vscode.Range>): boolean {\n\t\tif (!this._diagnostics.get(DiagnosticKind.Semantic)) {\n\t\t\tthis._diagnostics.set(DiagnosticKind.Semantic, diagnostics);\n\t\t\treturn true;\n\t\t}\n\t\tconst oldDiagnostics = this._diagnostics.get(DiagnosticKind.Semantic)!;\n\t\tconst newDiagnostics = oldDiagnostics.filter(diag => !ranges.some(range => diag.range.intersection(range)));\n\t\tnewDiagnostics.push(...diagnostics);\n\t\tthis._diagnostics.set(DiagnosticKind.Semantic, newDiagnostics);\n\t\treturn true;\n\t}\n\n\tprivate getSuggestionDiagnostics(settings: DiagnosticSettings) {\n\t\tconst enableSuggestions = settings.getEnableSuggestions(this.language);\n\t\treturn this.get(DiagnosticKind.Suggestion).filter(x => {\n\t\t\tif (!enableSuggestions) {\n\t\t\t\t// Still show unused\n\t\t\t\treturn x.tags && (x.tags.includes(vscode.DiagnosticTag.Unnecessary) || x.tags.includes(vscode.DiagnosticTag.Deprecated));\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tprivate get(kind: DiagnosticKind): ReadonlyArray<vscode.Diagnostic> {\n\t\treturn this._diagnostics.get(kind) || [];\n\t}\n}\n\ninterface LanguageDiagnosticSettings {\n\treadonly validate: boolean;\n\treadonly enableSuggestions: boolean;\n}\n\nfunction areLanguageDiagnosticSettingsEqual(currentSettings: LanguageDiagnosticSettings, newSettings: LanguageDiagnosticSettings): boolean {\n\treturn currentSettings.validate === newSettings.validate\n\t\t&& currentSettings.enableSuggestions === newSettings.enableSuggestions;\n}\n\nclass DiagnosticSettings {\n\tprivate static readonly defaultSettings: LanguageDiagnosticSettings = {\n\t\tvalidate: true,\n\t\tenableSuggestions: true\n\t};\n\n\tprivate readonly _languageSettings = new Map<DiagnosticLanguage, LanguageDiagnosticSettings>();\n\n\tpublic getValidate(language: DiagnosticLanguage): boolean {\n\t\treturn this.get(language).validate;\n\t}\n\n\tpublic setValidate(language: DiagnosticLanguage, value: boolean): boolean {\n\t\treturn this.update(language, settings => ({\n\t\t\tvalidate: value,\n\t\t\tenableSuggestions: settings.enableSuggestions,\n\t\t}));\n\t}\n\n\tpublic getEnableSuggestions(language: DiagnosticLanguage): boolean {\n\t\treturn this.get(language).enableSuggestions;\n\t}\n\n\tpublic setEnableSuggestions(language: DiagnosticLanguage, value: boolean): boolean {\n\t\treturn this.update(language, settings => ({\n\t\t\tvalidate: settings.validate,\n\t\t\tenableSuggestions: value\n\t\t}));\n\t}\n\n\tprivate get(language: DiagnosticLanguage): LanguageDiagnosticSettings {\n\t\treturn this._languageSettings.get(language) || DiagnosticSettings.defaultSettings;\n\t}\n\n\tprivate update(language: DiagnosticLanguage, f: (x: LanguageDiagnosticSettings) => LanguageDiagnosticSettings): boolean {\n\t\tconst currentSettings = this.get(language);\n\t\tconst newSettings = f(currentSettings);\n\t\tthis._languageSettings.set(language, newSettings);\n\t\treturn !areLanguageDiagnosticSettingsEqual(currentSettings, newSettings);\n\t}\n}\n\ninterface DiagnosticPerformanceData extends TsDiagnosticPerformanceData {\n\tfileLineCount?: number;\n}\n\nclass DiagnosticsTelemetryManager extends Disposable {\n\n\tprivate readonly _diagnosticCodesMap = new Map<number, number>();\n\tprivate readonly _diagnosticSnapshotsMap = new ResourceMap<readonly vscode.Diagnostic[]>(uri => uri.toString(), { onCaseInsensitiveFileSystem: false });\n\tprivate _timeout: NodeJS.Timeout | undefined;\n\tprivate _telemetryEmitter: NodeJS.Timeout | undefined;\n\n\tconstructor(\n\t\tprivate readonly _telemetryReporter: TelemetryReporter,\n\t\tprivate readonly _diagnosticsCollection: vscode.DiagnosticCollection,\n\t) {\n\t\tsuper();\n\t\tthis._register(vscode.workspace.onDidChangeTextDocument(e => {\n\t\t\tif (e.document.languageId === 'typescript' || e.document.languageId === 'typescriptreact') {\n\t\t\t\tthis._updateAllDiagnosticCodesAfterTimeout();\n\t\t\t}\n\t\t}));\n\t\tthis._updateAllDiagnosticCodesAfterTimeout();\n\t\tthis._registerTelemetryEventEmitter();\n\t}\n\n\tpublic logDiagnosticsPerformanceTelemetry(performanceData: DiagnosticPerformanceData[]): void {\n\t\tfor (const data of performanceData) {\n\t\t\t/* __GDPR__\n\t\t\t\t\"diagnostics.performance\" : {\n\t\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\t\"syntaxDiagDuration\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\t\t\t\"semanticDiagDuration\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\t\t\t\"suggestionDiagDuration\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\t\t\t\"regionSemanticDiagDuration\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\t\t\t\"fileLineCount\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\t\t\t\"${include}\": [\n\t\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t*/\n\t\t\tthis._telemetryReporter.logTelemetry('diagnostics.performance',\n\t\t\t\t{\n\t\t\t\t\tsyntaxDiagDuration: data.syntaxDiag,\n\t\t\t\t\tsemanticDiagDuration: data.semanticDiag,\n\t\t\t\t\tsuggestionDiagDuration: data.suggestionDiag,\n\t\t\t\t\tregionSemanticDiagDuration: data.regionSemanticDiag,\n\t\t\t\t\tfileLineCount: data.fileLineCount,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _updateAllDiagnosticCodesAfterTimeout() {\n\t\tclearTimeout(this._timeout);\n\t\tthis._timeout = setTimeout(() => this._updateDiagnosticCodes(), 5000);\n\t}\n\n\tprivate _increaseDiagnosticCodeCount(code: string | number | undefined) {\n\t\tif (code === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tthis._diagnosticCodesMap.set(Number(code), (this._diagnosticCodesMap.get(Number(code)) || 0) + 1);\n\t}\n\n\tprivate _updateDiagnosticCodes() {\n\t\tthis._diagnosticsCollection.forEach((uri, diagnostics) => {\n\t\t\tconst previousDiagnostics = this._diagnosticSnapshotsMap.get(uri);\n\t\t\tthis._diagnosticSnapshotsMap.set(uri, diagnostics);\n\t\t\tconst diagnosticsDiff = diagnostics.filter((diagnostic) => !previousDiagnostics?.some((previousDiagnostic) => equals(diagnostic, previousDiagnostic)));\n\t\t\tdiagnosticsDiff.forEach((diagnostic) => {\n\t\t\t\tconst code = diagnostic.code;\n\t\t\t\tthis._increaseDiagnosticCodeCount(typeof code === 'string' || typeof code === 'number' ? code : code?.value);\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate _registerTelemetryEventEmitter() {\n\t\tthis._telemetryEmitter = setInterval(() => {\n\t\t\tif (this._diagnosticCodesMap.size > 0) {\n\t\t\t\tlet diagnosticCodes = '';\n\t\t\t\tthis._diagnosticCodesMap.forEach((value, key) => {\n\t\t\t\t\tdiagnosticCodes += `${key}:${value},`;\n\t\t\t\t});\n\t\t\t\tthis._diagnosticCodesMap.clear();\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"typescript.diagnostics\" : {\n\t\t\t\t\t\t\"owner\": \"aiday-mar\",\n\t\t\t\t\t\t\"diagnosticCodes\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\t\"${include}\": [\n\t\t\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\tthis._telemetryReporter.logTelemetry('typescript.diagnostics', {\n\t\t\t\t\tdiagnosticCodes: diagnosticCodes\n\t\t\t\t});\n\t\t\t}\n\t\t}, 5 * 60 * 1000); // 5 minutes\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tclearTimeout(this._timeout);\n\t\tclearInterval(this._telemetryEmitter);\n\t}\n}\n\nexport class DiagnosticsManager extends Disposable {\n\tprivate readonly _diagnostics: ResourceMap<FileDiagnostics>;\n\tprivate readonly _settings = new DiagnosticSettings();\n\tprivate readonly _currentDiagnostics: vscode.DiagnosticCollection;\n\tprivate readonly _pendingUpdates: ResourceMap<any>;\n\n\tprivate readonly _updateDelay = 50;\n\n\tprivate readonly _diagnosticsTelemetryManager: DiagnosticsTelemetryManager | undefined;\n\n\tconstructor(\n\t\towner: string,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\ttelemetryReporter: TelemetryReporter,\n\t\tonCaseInsensitiveFileSystem: boolean\n\t) {\n\t\tsuper();\n\t\tthis._diagnostics = new ResourceMap<FileDiagnostics>(undefined, { onCaseInsensitiveFileSystem });\n\t\tthis._pendingUpdates = new ResourceMap<any>(undefined, { onCaseInsensitiveFileSystem });\n\n\t\tthis._currentDiagnostics = this._register(vscode.languages.createDiagnosticCollection(owner));\n\t\t// Here we are selecting only 1 user out of 1000 to send telemetry diagnostics\n\t\tif (Math.random() * 1000 <= 1 || configuration.enableDiagnosticsTelemetry) {\n\t\t\tthis._diagnosticsTelemetryManager = this._register(new DiagnosticsTelemetryManager(telemetryReporter, this._currentDiagnostics));\n\t\t}\n\t}\n\n\tpublic override dispose() {\n\t\tsuper.dispose();\n\n\t\tfor (const value of this._pendingUpdates.values()) {\n\t\t\tclearTimeout(value);\n\t\t}\n\t\tthis._pendingUpdates.clear();\n\t}\n\n\tpublic reInitialize(): void {\n\t\tthis._currentDiagnostics.clear();\n\t\tthis._diagnostics.clear();\n\t}\n\n\tpublic setValidate(language: DiagnosticLanguage, value: boolean) {\n\t\tconst didUpdate = this._settings.setValidate(language, value);\n\t\tif (didUpdate) {\n\t\t\tthis.rebuildAll();\n\t\t}\n\t}\n\n\tpublic setEnableSuggestions(language: DiagnosticLanguage, value: boolean) {\n\t\tconst didUpdate = this._settings.setEnableSuggestions(language, value);\n\t\tif (didUpdate) {\n\t\t\tthis.rebuildAll();\n\t\t}\n\t}\n\n\tpublic updateDiagnostics(\n\t\tfile: vscode.Uri,\n\t\tlanguage: DiagnosticLanguage,\n\t\tkind: DiagnosticKind,\n\t\tdiagnostics: ReadonlyArray<vscode.Diagnostic>,\n\t\tranges: ReadonlyArray<vscode.Range> | undefined,\n\t): void {\n\t\tlet didUpdate = false;\n\t\tconst entry = this._diagnostics.get(file);\n\t\tif (entry) {\n\t\t\tdidUpdate = entry.updateDiagnostics(language, kind, diagnostics, ranges);\n\t\t} else if (diagnostics.length) {\n\t\t\tconst fileDiagnostics = new FileDiagnostics(file, language);\n\t\t\tfileDiagnostics.updateDiagnostics(language, kind, diagnostics, ranges);\n\t\t\tthis._diagnostics.set(file, fileDiagnostics);\n\t\t\tdidUpdate = true;\n\t\t}\n\n\t\tif (didUpdate) {\n\t\t\tthis.scheduleDiagnosticsUpdate(file);\n\t\t}\n\t}\n\n\tpublic configFileDiagnosticsReceived(\n\t\tfile: vscode.Uri,\n\t\tdiagnostics: ReadonlyArray<vscode.Diagnostic>\n\t): void {\n\t\tthis._currentDiagnostics.set(file, diagnostics);\n\t}\n\n\tpublic deleteAllDiagnosticsInFile(resource: vscode.Uri): void {\n\t\tthis._currentDiagnostics.delete(resource);\n\t\tthis._diagnostics.delete(resource);\n\t}\n\n\tpublic deleteDiagnostic(resource: vscode.Uri, diagnostic: vscode.Diagnostic): void {\n\t\tconst fileDiagnostics = this._diagnostics.get(resource);\n\t\tif (fileDiagnostics) {\n\t\t\tfileDiagnostics.delete(diagnostic);\n\t\t\tthis.rebuildFile(fileDiagnostics);\n\t\t}\n\t}\n\n\tpublic getDiagnostics(file: vscode.Uri): ReadonlyArray<vscode.Diagnostic> {\n\t\treturn this._currentDiagnostics.get(file) || [];\n\t}\n\n\tpublic logDiagnosticsPerformanceTelemetry(performanceData: DiagnosticPerformanceData[]): void {\n\t\tthis._diagnosticsTelemetryManager?.logDiagnosticsPerformanceTelemetry(performanceData);\n\t}\n\n\tprivate scheduleDiagnosticsUpdate(file: vscode.Uri) {\n\t\tif (!this._pendingUpdates.has(file)) {\n\t\t\tthis._pendingUpdates.set(file, setTimeout(() => this.updateCurrentDiagnostics(file), this._updateDelay));\n\t\t}\n\t}\n\n\tprivate updateCurrentDiagnostics(file: vscode.Uri): void {\n\t\tif (this._pendingUpdates.has(file)) {\n\t\t\tclearTimeout(this._pendingUpdates.get(file));\n\t\t\tthis._pendingUpdates.delete(file);\n\t\t}\n\n\t\tconst fileDiagnostics = this._diagnostics.get(file);\n\t\tthis._currentDiagnostics.set(file, fileDiagnostics ? fileDiagnostics.getAllDiagnostics(this._settings) : []);\n\t}\n\n\tprivate rebuildAll(): void {\n\t\tthis._currentDiagnostics.clear();\n\t\tfor (const fileDiagnostic of this._diagnostics.values()) {\n\t\t\tthis.rebuildFile(fileDiagnostic);\n\t\t}\n\t}\n\n\tprivate rebuildFile(fileDiagnostic: FileDiagnostics) {\n\t\tthis._currentDiagnostics.set(fileDiagnostic.file, fileDiagnostic.getAllDiagnostics(this._settings));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { ActiveJsTsEditorTracker } from '../ui/activeJsTsEditorTracker';\nimport { Lazy } from '../utils/lazy';\nimport { openProjectConfigForFile, ProjectType } from '../tsconfig';\nimport { Command } from './commandManager';\n\nexport class TypeScriptGoToProjectConfigCommand implements Command {\n\tpublic readonly id = 'typescript.goToProjectConfig';\n\n\tpublic constructor(\n\t\tprivate readonly activeJsTsEditorTracker: ActiveJsTsEditorTracker,\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>,\n\t) { }\n\n\tpublic execute() {\n\t\tconst editor = this.activeJsTsEditorTracker.activeJsTsEditor;\n\t\tif (editor) {\n\t\t\topenProjectConfigForFile(ProjectType.TypeScript, this.lazyClientHost.value.serviceClient, editor.document.uri);\n\t\t}\n\t}\n}\n\nexport class JavaScriptGoToProjectConfigCommand implements Command {\n\tpublic readonly id = 'javascript.goToProjectConfig';\n\n\tpublic constructor(\n\t\tprivate readonly activeJsTsEditorTracker: ActiveJsTsEditorTracker,\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>,\n\t) { }\n\n\tpublic execute() {\n\t\tconst editor = this.activeJsTsEditorTracker.activeJsTsEditor;\n\t\tif (editor) {\n\t\t\topenProjectConfigForFile(ProjectType.JavaScript, this.lazyClientHost.value.serviceClient, editor.document.uri);\n\t\t}\n\t}\n}\n","const parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n","/*\n * 1DS JS SDK Core, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 4\r\nexport var _DYN_LOGGER = \"logger\"; // Count: 4\r\nexport var _DYN_INDEX_OF = \"indexOf\"; // Count: 4\r\nexport var _DYN_TIMINGS = \"timings\"; // Count: 4\r\nexport var _DYN_POLL_INTERNAL_LOGS = \"pollInternalLogs\"; // Count: 4\r\nexport var _DYN_VALUE = \"value\"; // Count: 20\r\nexport var _DYN_KIND = \"kind\"; // Count: 5\r\nexport var _DYN_LENGTH = \"length\"; // Count: 7\r\nexport var _DYN_PROCESS_TELEMETRY_ST0 = \"processTelemetryStart\"; // Count: 3\r\nexport var _DYN_HANDLE_FIELD = \"handleField\"; // Count: 3\r\nexport var _DYN_RM_SANITIZER = \"rmSanitizer\"; // Count: 3\r\nexport var _DYN_RM_FIELD_SANITIZER = \"rmFieldSanitizer\"; // Count: 3\r\nexport var _DYN_CAN_HANDLE = \"canHandle\"; // Count: 7\r\n//# sourceMappingURL=__DynamicConstants.js.map","const compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport class Kind {\n\tpublic static readonly alias = 'alias';\n\tpublic static readonly callSignature = 'call';\n\tpublic static readonly class = 'class';\n\tpublic static readonly const = 'const';\n\tpublic static readonly constructorImplementation = 'constructor';\n\tpublic static readonly constructSignature = 'construct';\n\tpublic static readonly directory = 'directory';\n\tpublic static readonly enum = 'enum';\n\tpublic static readonly enumMember = 'enum member';\n\tpublic static readonly externalModuleName = 'external module name';\n\tpublic static readonly function = 'function';\n\tpublic static readonly indexSignature = 'index';\n\tpublic static readonly interface = 'interface';\n\tpublic static readonly keyword = 'keyword';\n\tpublic static readonly let = 'let';\n\tpublic static readonly localFunction = 'local function';\n\tpublic static readonly localVariable = 'local var';\n\tpublic static readonly method = 'method';\n\tpublic static readonly memberGetAccessor = 'getter';\n\tpublic static readonly memberSetAccessor = 'setter';\n\tpublic static readonly memberVariable = 'property';\n\tpublic static readonly module = 'module';\n\tpublic static readonly primitiveType = 'primitive type';\n\tpublic static readonly script = 'script';\n\tpublic static readonly type = 'type';\n\tpublic static readonly variable = 'var';\n\tpublic static readonly warning = 'warning';\n\tpublic static readonly string = 'string';\n\tpublic static readonly parameter = 'parameter';\n\tpublic static readonly typeParameter = 'type parameter';\n}\n\n\nexport class DiagnosticCategory {\n\tpublic static readonly error = 'error';\n\tpublic static readonly warning = 'warning';\n\tpublic static readonly suggestion = 'suggestion';\n}\n\nexport class KindModifiers {\n\tpublic static readonly optional = 'optional';\n\tpublic static readonly deprecated = 'deprecated';\n\tpublic static readonly color = 'color';\n\n\tpublic static readonly dtsFile = '.d.ts';\n\tpublic static readonly tsFile = '.ts';\n\tpublic static readonly tsxFile = '.tsx';\n\tpublic static readonly jsFile = '.js';\n\tpublic static readonly jsxFile = '.jsx';\n\tpublic static readonly jsonFile = '.json';\n\n\tpublic static readonly fileExtensionKindModifiers = [\n\t\tKindModifiers.dtsFile,\n\t\tKindModifiers.tsFile,\n\t\tKindModifiers.tsxFile,\n\t\tKindModifiers.jsFile,\n\t\tKindModifiers.jsxFile,\n\t\tKindModifiers.jsonFile,\n\t];\n}\n\nexport class DisplayPartKind {\n\tpublic static readonly functionName = 'functionName';\n\tpublic static readonly methodName = 'methodName';\n\tpublic static readonly parameterName = 'parameterName';\n\tpublic static readonly propertyName = 'propertyName';\n\tpublic static readonly punctuation = 'punctuation';\n\tpublic static readonly text = 'text';\n}\n\nexport enum EventName {\n\tsyntaxDiag = 'syntaxDiag',\n\tsemanticDiag = 'semanticDiag',\n\tsuggestionDiag = 'suggestionDiag',\n\tregionSemanticDiag = 'regionSemanticDiag',\n\tconfigFileDiag = 'configFileDiag',\n\ttelemetry = 'telemetry',\n\tprojectLanguageServiceState = 'projectLanguageServiceState',\n\tprojectsUpdatedInBackground = 'projectsUpdatedInBackground',\n\tbeginInstallTypes = 'beginInstallTypes',\n\tendInstallTypes = 'endInstallTypes',\n\ttypesInstallerInitializationFailed = 'typesInstallerInitializationFailed',\n\tsurveyReady = 'surveyReady',\n\tprojectLoadingStart = 'projectLoadingStart',\n\tprojectLoadingFinish = 'projectLoadingFinish',\n\tcreateFileWatcher = 'createFileWatcher',\n\tcreateDirectoryWatcher = 'createDirectoryWatcher',\n\tcloseFileWatcher = 'closeFileWatcher',\n\trequestCompleted = 'requestCompleted',\n}\n\nexport enum OrganizeImportsMode {\n\tAll = 'All',\n\tSortAndCombine = 'SortAndCombine',\n\tRemoveUnused = 'RemoveUnused',\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nexport class SelectTypeScriptVersionCommand implements Command {\n\tpublic static readonly id = 'typescript.selectTypeScriptVersion';\n\tpublic readonly id = SelectTypeScriptVersionCommand.id;\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.serviceClient.showVersionPicker();\n\t}\n}\n","const parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // Otherwise it can be determined by checking the high version\n\n    if (highVersion.patch) {\n      // anything higher than a patch bump would result in the wrong version\n      return 'patch'\n    }\n\n    if (highVersion.minor) {\n      // anything higher than a minor bump would result in the wrong version\n      return 'minor'\n    }\n\n    // bumping major/minor/patch all have same result\n    return 'major'\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as fileSchemes from '../configuration/fileSchemes';\nimport * as languageModeIds from '../configuration/languageIds';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { inMemoryResourcePrefix } from '../typescriptServiceClient';\nimport { coalesce } from '../utils/arrays';\nimport { Delayer, setImmediate } from '../utils/async';\nimport { nulToken } from '../utils/cancellation';\nimport { Disposable } from '../utils/dispose';\nimport { ResourceMap } from '../utils/resourceMap';\nimport { API } from './api';\nimport type * as Proto from './protocol/protocol';\n\ntype ScriptKind = 'TS' | 'TSX' | 'JS' | 'JSX';\n\nfunction mode2ScriptKind(mode: string): ScriptKind | undefined {\n\tswitch (mode) {\n\t\tcase languageModeIds.typescript: return 'TS';\n\t\tcase languageModeIds.typescriptreact: return 'TSX';\n\t\tcase languageModeIds.javascript: return 'JS';\n\t\tcase languageModeIds.javascriptreact: return 'JSX';\n\t}\n\treturn undefined;\n}\n\nconst enum BufferState { Initial, Open, Closed }\n\nconst enum BufferOperationType { Close, Open, Change }\n\nclass CloseOperation {\n\treadonly type = BufferOperationType.Close;\n\tconstructor(\n\t\tpublic readonly args: string,\n\t\tpublic readonly scriptKind: ScriptKind | undefined,\n\t) { }\n}\n\nclass OpenOperation {\n\treadonly type = BufferOperationType.Open;\n\tconstructor(\n\t\tpublic readonly args: Proto.OpenRequestArgs,\n\t\tpublic readonly scriptKind: ScriptKind | undefined,\n\t) { }\n}\n\nclass ChangeOperation {\n\treadonly type = BufferOperationType.Change;\n\tconstructor(\n\t\tpublic readonly args: Proto.FileCodeEdits\n\t) { }\n}\n\ntype BufferOperation = CloseOperation | OpenOperation | ChangeOperation;\n\n/**\n * Manages synchronization of buffers with the TS server.\n *\n * If supported, batches together file changes. This allows the TS server to more efficiently process changes.\n */\nclass BufferSynchronizer {\n\n\tprivate readonly _pending: ResourceMap<BufferOperation>;\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tpathNormalizer: (path: vscode.Uri) => string | undefined,\n\t\tonCaseInsensitiveFileSystem: boolean\n\t) {\n\t\tthis._pending = new ResourceMap<BufferOperation>(pathNormalizer, {\n\t\t\tonCaseInsensitiveFileSystem\n\t\t});\n\t}\n\n\tpublic open(resource: vscode.Uri, args: Proto.OpenRequestArgs) {\n\t\tthis.updatePending(resource, new OpenOperation(args, args.scriptKindName));\n\t}\n\n\t/**\n\t * @return Was the buffer open?\n\t */\n\tpublic close(resource: vscode.Uri, filepath: string, scriptKind: ScriptKind | undefined): boolean {\n\t\treturn this.updatePending(resource, new CloseOperation(filepath, scriptKind));\n\t}\n\n\tpublic change(resource: vscode.Uri, filepath: string, events: readonly vscode.TextDocumentContentChangeEvent[]) {\n\t\tif (!events.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.updatePending(resource, new ChangeOperation({\n\t\t\tfileName: filepath,\n\t\t\ttextChanges: events.map((change): Proto.CodeEdit => ({\n\t\t\t\tnewText: change.text,\n\t\t\t\tstart: typeConverters.Position.toLocation(change.range.start),\n\t\t\t\tend: typeConverters.Position.toLocation(change.range.end),\n\t\t\t})).reverse(), // Send the edits end-of-document to start-of-document order\n\t\t}));\n\t}\n\n\tpublic reset(): void {\n\t\tthis._pending.clear();\n\t}\n\n\tpublic beforeCommand(command: string): void {\n\t\tif (command === 'updateOpen') {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.flush();\n\t}\n\n\tprivate flush() {\n\t\tif (this._pending.size > 0) {\n\t\t\tconst closedFiles: string[] = [];\n\t\t\tconst openFiles: Proto.OpenRequestArgs[] = [];\n\t\t\tconst changedFiles: Proto.FileCodeEdits[] = [];\n\t\t\tfor (const change of this._pending.values()) {\n\t\t\t\tswitch (change.type) {\n\t\t\t\t\tcase BufferOperationType.Change: changedFiles.push(change.args); break;\n\t\t\t\t\tcase BufferOperationType.Open: openFiles.push(change.args); break;\n\t\t\t\t\tcase BufferOperationType.Close: closedFiles.push(change.args); break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.client.execute('updateOpen', { changedFiles, closedFiles, openFiles }, nulToken, { nonRecoverable: true });\n\t\t\tthis._pending.clear();\n\t\t}\n\t}\n\n\tprivate updatePending(resource: vscode.Uri, op: BufferOperation): boolean {\n\t\tswitch (op.type) {\n\t\t\tcase BufferOperationType.Close: {\n\t\t\t\tconst existing = this._pending.get(resource);\n\t\t\t\tswitch (existing?.type) {\n\t\t\t\t\tcase BufferOperationType.Open:\n\t\t\t\t\t\tif (existing.scriptKind === op.scriptKind) {\n\t\t\t\t\t\t\tthis._pending.delete(resource);\n\t\t\t\t\t\t\treturn false; // Open then close. No need to do anything\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (this._pending.has(resource)) {\n\t\t\t// we saw this file before, make sure we flush before working with it again\n\t\t\tthis.flush();\n\t\t}\n\t\tthis._pending.set(resource, op);\n\t\treturn true;\n\t}\n}\n\nclass SyncedBuffer {\n\n\tprivate state = BufferState.Initial;\n\n\tconstructor(\n\t\tprivate readonly document: vscode.TextDocument,\n\t\tpublic readonly filepath: string,\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly synchronizer: BufferSynchronizer,\n\t) { }\n\n\tpublic open(): void {\n\t\tconst args: Proto.OpenRequestArgs = {\n\t\t\tfile: this.filepath,\n\t\t\tfileContent: this.document.getText(),\n\t\t\tprojectRootPath: this.getProjectRootPath(this.document.uri),\n\t\t};\n\n\t\tconst scriptKind = mode2ScriptKind(this.document.languageId);\n\t\tif (scriptKind) {\n\t\t\targs.scriptKindName = scriptKind;\n\t\t}\n\n\t\tconst tsPluginsForDocument = this.client.pluginManager.plugins\n\t\t\t.filter(x => x.languages.indexOf(this.document.languageId) >= 0);\n\n\t\tif (tsPluginsForDocument.length) {\n\t\t\t(args as any).plugins = tsPluginsForDocument.map(plugin => plugin.name);\n\t\t}\n\n\t\tthis.synchronizer.open(this.resource, args);\n\t\tthis.state = BufferState.Open;\n\t}\n\n\tprivate getProjectRootPath(resource: vscode.Uri): string | undefined {\n\t\tlet workspaceRoot = this.client.getWorkspaceRootForResource(resource);\n\n\t\t// If we didn't find a real workspace, we still want to try sending along a workspace folder\n\t\t// to prevent TS from loading projects from outside of any workspace.\n\t\t// Just pick the highest level one on the same FS even though the file is outside of it\n\t\tif (!workspaceRoot && vscode.workspace.workspaceFolders) {\n\t\t\tfor (const root of Array.from(vscode.workspace.workspaceFolders).sort((a, b) => a.uri.path.length - b.uri.path.length)) {\n\t\t\t\tif (root.uri.scheme === resource.scheme && root.uri.authority === resource.authority) {\n\t\t\t\t\tworkspaceRoot = root.uri;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (workspaceRoot) {\n\t\t\tconst tsRoot = this.client.toTsFilePath(workspaceRoot);\n\t\t\treturn tsRoot?.startsWith(inMemoryResourcePrefix) ? undefined : tsRoot;\n\t\t}\n\n\t\treturn fileSchemes.isOfScheme(resource, fileSchemes.officeScript, fileSchemes.chatCodeBlock) ? '/' : undefined;\n\t}\n\n\tpublic get resource(): vscode.Uri {\n\t\treturn this.document.uri;\n\t}\n\n\tpublic get lineCount(): number {\n\t\treturn this.document.lineCount;\n\t}\n\n\tpublic get languageId(): string {\n\t\treturn this.document.languageId;\n\t}\n\n\t/**\n\t * @return Was the buffer open?\n\t */\n\tpublic close(): boolean {\n\t\tif (this.state !== BufferState.Open) {\n\t\t\tthis.state = BufferState.Closed;\n\t\t\treturn false;\n\t\t}\n\t\tthis.state = BufferState.Closed;\n\t\treturn this.synchronizer.close(this.resource, this.filepath, mode2ScriptKind(this.document.languageId));\n\t}\n\n\tpublic onContentChanged(events: readonly vscode.TextDocumentContentChangeEvent[]): void {\n\t\tif (this.state !== BufferState.Open) {\n\t\t\tconsole.error(`Unexpected buffer state: ${this.state}`);\n\t\t}\n\n\t\tthis.synchronizer.change(this.resource, this.filepath, events);\n\t}\n}\n\nclass SyncedBufferMap extends ResourceMap<SyncedBuffer> {\n\n\tpublic getForPath(filePath: string): SyncedBuffer | undefined {\n\t\treturn this.get(vscode.Uri.file(filePath));\n\t}\n\n\tpublic get allBuffers(): Iterable<SyncedBuffer> {\n\t\treturn this.values();\n\t}\n}\n\nclass PendingDiagnostics extends ResourceMap<number> {\n\tpublic getOrderedFileSet(): ResourceMap<void | vscode.Range[]> {\n\t\tconst orderedResources = Array.from(this.entries())\n\t\t\t.sort((a, b) => a.value - b.value)\n\t\t\t.map(entry => entry.resource);\n\n\t\tconst map = new ResourceMap<void | vscode.Range[]>(this._normalizePath, this.config);\n\t\tfor (const resource of orderedResources) {\n\t\t\tmap.set(resource, undefined);\n\t\t}\n\t\treturn map;\n\t}\n}\n\nclass GetErrRequest {\n\n\tpublic static executeGetErrRequest(\n\t\tclient: ITypeScriptServiceClient,\n\t\tfiles: ResourceMap<void | vscode.Range[]>,\n\t\tonDone: () => void\n\t) {\n\t\treturn new GetErrRequest(client, files, onDone);\n\t}\n\n\tprivate _done: boolean = false;\n\tprivate readonly _token: vscode.CancellationTokenSource = new vscode.CancellationTokenSource();\n\n\tprivate constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tpublic readonly files: ResourceMap<void | vscode.Range[]>,\n\t\tonDone: () => void\n\t) {\n\t\tif (!this.isErrorReportingEnabled()) {\n\t\t\tthis._done = true;\n\t\t\tsetImmediate(onDone);\n\t\t\treturn;\n\t\t}\n\n\t\tconst supportsSyntaxGetErr = this.client.apiVersion.gte(API.v440);\n\t\tconst fileEntries = Array.from(files.entries()).filter(entry => supportsSyntaxGetErr || client.hasCapabilityForResource(entry.resource, ClientCapability.Semantic));\n\t\tconst allFiles = coalesce(fileEntries\n\t\t\t.map(entry => client.toTsFilePath(entry.resource)));\n\n\t\tif (!allFiles.length) {\n\t\t\tthis._done = true;\n\t\t\tsetImmediate(onDone);\n\t\t} else {\n\t\t\tlet request;\n\t\t\tif (this.areProjectDiagnosticsEnabled()) {\n\t\t\t\t// Note that geterrForProject is almost certainly not the api we want here as it ends up computing far\n\t\t\t\t// too many diagnostics\n\t\t\t\trequest = client.executeAsync('geterrForProject', { delay: 0, file: allFiles[0] }, this._token.token);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet requestFiles;\n\t\t\t\tif (this.areRegionDiagnosticsEnabled()) {\n\t\t\t\t\trequestFiles = coalesce(fileEntries\n\t\t\t\t\t\t.map(entry => {\n\t\t\t\t\t\t\tconst file = client.toTsFilePath(entry.resource);\n\t\t\t\t\t\t\tconst ranges = entry.value;\n\t\t\t\t\t\t\tif (file && ranges) {\n\t\t\t\t\t\t\t\treturn typeConverters.Range.toFileRangesRequestArgs(file, ranges);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn file;\n\t\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\trequestFiles = allFiles;\n\t\t\t\t}\n\t\t\t\trequest = client.executeAsync('geterr', { delay: 0, files: requestFiles }, this._token.token);\n\t\t\t}\n\n\t\t\trequest.finally(() => {\n\t\t\t\tif (this._done) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._done = true;\n\t\t\t\tonDone();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate isErrorReportingEnabled() {\n\t\tif (this.client.apiVersion.gte(API.v440)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\t// Older TS versions only support `getErr` on semantic server\n\t\t\treturn this.client.capabilities.has(ClientCapability.Semantic);\n\t\t}\n\t}\n\n\tprivate areProjectDiagnosticsEnabled() {\n\t\treturn this.client.configuration.enableProjectDiagnostics && this.client.capabilities.has(ClientCapability.Semantic);\n\t}\n\n\tprivate areRegionDiagnosticsEnabled() {\n\t\treturn this.client.configuration.enableRegionDiagnostics && this.client.apiVersion.gte(API.v560);\n\t}\n\n\tpublic cancel(): any {\n\t\tif (!this._done) {\n\t\t\tthis._token.cancel();\n\t\t}\n\n\t\tthis._token.dispose();\n\t}\n}\n\nclass TabResourceTracker extends Disposable {\n\n\tprivate readonly _onDidChange = this._register(new vscode.EventEmitter<{\n\t\treadonly closed: Iterable<vscode.Uri>;\n\t\treadonly opened: Iterable<vscode.Uri>;\n\t}>());\n\tpublic readonly onDidChange = this._onDidChange.event;\n\n\tprivate readonly _tabResources: ResourceMap<{ readonly tabs: Set<vscode.Tab> }>;\n\n\tconstructor(\n\t\tnormalizePath: (resource: vscode.Uri) => string | undefined,\n\t\tconfig: {\n\t\t\treadonly onCaseInsensitiveFileSystem: boolean;\n\t\t},\n\t) {\n\t\tsuper();\n\n\t\tthis._tabResources = new ResourceMap<{ readonly tabs: Set<vscode.Tab> }>(normalizePath, config);\n\n\t\tfor (const tabGroup of vscode.window.tabGroups.all) {\n\t\t\tfor (const tab of tabGroup.tabs) {\n\t\t\t\tthis.add(tab);\n\t\t\t}\n\t\t}\n\n\t\tthis._register(vscode.window.tabGroups.onDidChangeTabs(e => {\n\t\t\tconst closed = e.closed.flatMap(tab => this.delete(tab));\n\t\t\tconst opened = e.opened.flatMap(tab => this.add(tab));\n\t\t\tif (closed.length || opened.length) {\n\t\t\t\tthis._onDidChange.fire({ closed, opened });\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic has(resource: vscode.Uri): boolean {\n\t\tif (resource.scheme === fileSchemes.vscodeNotebookCell) {\n\t\t\tconst notebook = vscode.workspace.notebookDocuments.find(doc =>\n\t\t\t\tdoc.getCells().some(cell => cell.document.uri.toString() === resource.toString()));\n\n\t\t\treturn !!notebook && this.has(notebook.uri);\n\t\t}\n\n\t\tconst entry = this._tabResources.get(resource);\n\t\treturn !!entry && entry.tabs.size > 0;\n\t}\n\n\tprivate add(tab: vscode.Tab): vscode.Uri[] {\n\t\tconst addedResources: vscode.Uri[] = [];\n\t\tfor (const uri of this.getResourcesForTab(tab)) {\n\t\t\tconst entry = this._tabResources.get(uri);\n\t\t\tif (entry) {\n\t\t\t\tentry.tabs.add(tab);\n\t\t\t} else {\n\t\t\t\tthis._tabResources.set(uri, { tabs: new Set([tab]) });\n\t\t\t\taddedResources.push(uri);\n\t\t\t}\n\t\t}\n\t\treturn addedResources;\n\t}\n\n\tprivate delete(tab: vscode.Tab): vscode.Uri[] {\n\t\tconst closedResources: vscode.Uri[] = [];\n\t\tfor (const uri of this.getResourcesForTab(tab)) {\n\t\t\tconst entry = this._tabResources.get(uri);\n\t\t\tif (!entry) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tentry.tabs.delete(tab);\n\t\t\tif (entry.tabs.size === 0) {\n\t\t\t\tthis._tabResources.delete(uri);\n\t\t\t\tclosedResources.push(uri);\n\t\t\t}\n\t\t}\n\t\treturn closedResources;\n\t}\n\n\tprivate getResourcesForTab(tab: vscode.Tab): vscode.Uri[] {\n\t\tif (tab.input instanceof vscode.TabInputText) {\n\t\t\treturn [tab.input.uri];\n\t\t} else if (tab.input instanceof vscode.TabInputTextDiff) {\n\t\t\treturn [tab.input.original, tab.input.modified];\n\t\t} else if (tab.input instanceof vscode.TabInputNotebook) {\n\t\t\treturn [tab.input.uri];\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n}\n\n\nexport default class BufferSyncSupport extends Disposable {\n\n\tprivate readonly client: ITypeScriptServiceClient;\n\n\tprivate _validateJavaScript = true;\n\tprivate _validateTypeScript = true;\n\n\tprivate readonly modeIds: Set<string>;\n\tprivate readonly syncedBuffers: SyncedBufferMap;\n\tprivate readonly pendingDiagnostics: PendingDiagnostics;\n\tprivate readonly diagnosticDelayer: Delayer<any>;\n\tprivate pendingGetErr: GetErrRequest | undefined;\n\tprivate listening: boolean = false;\n\tprivate readonly synchronizer: BufferSynchronizer;\n\n\tprivate readonly _tabResources: TabResourceTracker;\n\n\tconstructor(\n\t\tclient: ITypeScriptServiceClient,\n\t\tmodeIds: readonly string[],\n\t\tonCaseInsensitiveFileSystem: boolean\n\t) {\n\t\tsuper();\n\t\tthis.client = client;\n\t\tthis.modeIds = new Set<string>(modeIds);\n\n\t\tthis.diagnosticDelayer = new Delayer<any>(300);\n\n\t\tconst pathNormalizer = (path: vscode.Uri) => this.client.toTsFilePath(path);\n\t\tthis.syncedBuffers = new SyncedBufferMap(pathNormalizer, { onCaseInsensitiveFileSystem });\n\t\tthis.pendingDiagnostics = new PendingDiagnostics(pathNormalizer, { onCaseInsensitiveFileSystem });\n\t\tthis.synchronizer = new BufferSynchronizer(client, pathNormalizer, onCaseInsensitiveFileSystem);\n\n\t\tthis._tabResources = this._register(new TabResourceTracker(pathNormalizer, { onCaseInsensitiveFileSystem }));\n\t\tthis._register(this._tabResources.onDidChange(e => {\n\t\t\tif (this.client.configuration.enableProjectDiagnostics) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (const closed of e.closed) {\n\t\t\t\tconst syncedBuffer = this.syncedBuffers.get(closed);\n\t\t\t\tif (syncedBuffer) {\n\t\t\t\t\tthis.pendingDiagnostics.delete(closed);\n\t\t\t\t\tthis.pendingGetErr?.files.delete(closed);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const opened of e.opened) {\n\t\t\t\tconst syncedBuffer = this.syncedBuffers.get(opened);\n\t\t\t\tif (syncedBuffer) {\n\t\t\t\t\tthis.requestDiagnostic(syncedBuffer);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.updateConfiguration();\n\t\tvscode.workspace.onDidChangeConfiguration(this.updateConfiguration, this, this._disposables);\n\t}\n\n\tprivate readonly _onDelete = this._register(new vscode.EventEmitter<vscode.Uri>());\n\tpublic readonly onDelete = this._onDelete.event;\n\n\tprivate readonly _onWillChange = this._register(new vscode.EventEmitter<vscode.Uri>());\n\tpublic readonly onWillChange = this._onWillChange.event;\n\n\tpublic listen(): void {\n\t\tif (this.listening) {\n\t\t\treturn;\n\t\t}\n\t\tthis.listening = true;\n\t\tvscode.workspace.onDidOpenTextDocument(this.openTextDocument, this, this._disposables);\n\t\tvscode.workspace.onDidCloseTextDocument(this.onDidCloseTextDocument, this, this._disposables);\n\t\tvscode.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument, this, this._disposables);\n\t\tvscode.window.onDidChangeVisibleTextEditors(e => {\n\t\t\tfor (const { document } of e) {\n\t\t\t\tconst syncedBuffer = this.syncedBuffers.get(document.uri);\n\t\t\t\tif (syncedBuffer) {\n\t\t\t\t\tthis.requestDiagnostic(syncedBuffer);\n\t\t\t\t}\n\t\t\t}\n\t\t}, this, this._disposables);\n\t\tvscode.workspace.textDocuments.forEach(this.openTextDocument, this);\n\t}\n\n\tpublic handles(resource: vscode.Uri): boolean {\n\t\treturn this.syncedBuffers.has(resource);\n\t}\n\n\tpublic ensureHasBuffer(resource: vscode.Uri): boolean {\n\t\tif (this.syncedBuffers.has(resource)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst existingDocument = vscode.workspace.textDocuments.find(doc => doc.uri.toString() === resource.toString());\n\t\tif (existingDocument) {\n\t\t\treturn this.openTextDocument(existingDocument);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpublic toVsCodeResource(resource: vscode.Uri): vscode.Uri {\n\t\tconst filepath = this.client.toTsFilePath(resource);\n\t\tfor (const buffer of this.syncedBuffers.allBuffers) {\n\t\t\tif (buffer.filepath === filepath) {\n\t\t\t\treturn buffer.resource;\n\t\t\t}\n\t\t}\n\t\treturn resource;\n\t}\n\n\tpublic toResource(filePath: string): vscode.Uri {\n\t\tconst buffer = this.syncedBuffers.getForPath(filePath);\n\t\tif (buffer) {\n\t\t\treturn buffer.resource;\n\t\t}\n\t\treturn vscode.Uri.file(filePath);\n\t}\n\n\tpublic reset(): void {\n\t\tthis.pendingGetErr?.cancel();\n\t\tthis.pendingDiagnostics.clear();\n\t\tthis.synchronizer.reset();\n\t}\n\n\tpublic reinitialize(): void {\n\t\tthis.reset();\n\t\tfor (const buffer of this.syncedBuffers.allBuffers) {\n\t\t\tbuffer.open();\n\t\t}\n\t}\n\n\tpublic openTextDocument(document: vscode.TextDocument): boolean {\n\t\tif (!this.modeIds.has(document.languageId)) {\n\t\t\treturn false;\n\t\t}\n\t\tconst resource = document.uri;\n\t\tconst filepath = this.client.toTsFilePath(resource);\n\t\tif (!filepath) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.syncedBuffers.has(resource)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst syncedBuffer = new SyncedBuffer(document, filepath, this.client, this.synchronizer);\n\t\tthis.syncedBuffers.set(resource, syncedBuffer);\n\t\tsyncedBuffer.open();\n\t\tthis.requestDiagnostic(syncedBuffer);\n\t\treturn true;\n\t}\n\n\tpublic closeResource(resource: vscode.Uri): void {\n\t\tconst syncedBuffer = this.syncedBuffers.get(resource);\n\t\tif (!syncedBuffer) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.pendingDiagnostics.delete(resource);\n\t\tthis.pendingGetErr?.files.delete(resource);\n\t\tthis.syncedBuffers.delete(resource);\n\t\tconst wasBufferOpen = syncedBuffer.close();\n\t\tthis._onDelete.fire(resource);\n\t\tif (wasBufferOpen) {\n\t\t\tthis.requestAllDiagnostics();\n\t\t}\n\t}\n\n\tpublic interruptGetErr<R>(f: () => R): R {\n\t\tif (!this.pendingGetErr\n\t\t\t|| this.client.configuration.enableProjectDiagnostics // `geterr` happens on separate server so no need to cancel it.\n\t\t) {\n\t\t\treturn f();\n\t\t}\n\n\t\tthis.pendingGetErr.cancel();\n\t\tthis.pendingGetErr = undefined;\n\t\tconst result = f();\n\t\tthis.triggerDiagnostics();\n\t\treturn result;\n\t}\n\n\tpublic beforeCommand(command: string): void {\n\t\tthis.synchronizer.beforeCommand(command);\n\t}\n\n\tpublic lineCount(resource: vscode.Uri): number | undefined {\n\t\treturn this.syncedBuffers.get(resource)?.lineCount;\n\t}\n\n\tprivate onDidCloseTextDocument(document: vscode.TextDocument): void {\n\t\tthis.closeResource(document.uri);\n\t}\n\n\tprivate onDidChangeTextDocument(e: vscode.TextDocumentChangeEvent): void {\n\t\tconst syncedBuffer = this.syncedBuffers.get(e.document.uri);\n\t\tif (!syncedBuffer) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._onWillChange.fire(syncedBuffer.resource);\n\n\t\tsyncedBuffer.onContentChanged(e.contentChanges);\n\t\tconst didTrigger = this.requestDiagnostic(syncedBuffer);\n\n\t\tif (!didTrigger && this.pendingGetErr) {\n\t\t\t// In this case we always want to re-trigger all diagnostics\n\t\t\tthis.pendingGetErr.cancel();\n\t\t\tthis.pendingGetErr = undefined;\n\t\t\tthis.triggerDiagnostics();\n\t\t}\n\t}\n\n\tpublic requestAllDiagnostics() {\n\t\tfor (const buffer of this.syncedBuffers.allBuffers) {\n\t\t\tif (this.shouldValidate(buffer)) {\n\t\t\t\tthis.pendingDiagnostics.set(buffer.resource, Date.now());\n\t\t\t}\n\t\t}\n\t\tthis.triggerDiagnostics();\n\t}\n\n\tpublic getErr(resources: readonly vscode.Uri[]): any {\n\t\tconst handledResources = resources.filter(resource => this.handles(resource));\n\t\tif (!handledResources.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const resource of handledResources) {\n\t\t\tthis.pendingDiagnostics.set(resource, Date.now());\n\t\t}\n\n\t\tthis.triggerDiagnostics();\n\t}\n\n\tprivate triggerDiagnostics(delay: number = 200) {\n\t\tthis.diagnosticDelayer.trigger(() => {\n\t\t\tthis.sendPendingDiagnostics();\n\t\t}, delay);\n\t}\n\n\tprivate requestDiagnostic(buffer: SyncedBuffer): boolean {\n\t\tif (!this.shouldValidate(buffer)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.pendingDiagnostics.set(buffer.resource, Date.now());\n\n\t\tconst delay = Math.min(Math.max(Math.ceil(buffer.lineCount / 20), 300), 800);\n\t\tthis.triggerDiagnostics(delay);\n\t\treturn true;\n\t}\n\n\tpublic hasPendingDiagnostics(resource: vscode.Uri): boolean {\n\t\treturn this.pendingDiagnostics.has(resource);\n\t}\n\n\tprivate sendPendingDiagnostics(): void {\n\t\tconst orderedFileSet = this.pendingDiagnostics.getOrderedFileSet();\n\n\t\tif (this.pendingGetErr) {\n\t\t\tthis.pendingGetErr.cancel();\n\n\t\t\tfor (const { resource } of this.pendingGetErr.files.entries()) {\n\t\t\t\tif (this.syncedBuffers.get(resource)) {\n\t\t\t\t\torderedFileSet.set(resource, undefined);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.pendingGetErr = undefined;\n\t\t}\n\n\t\t// Add all open TS buffers to the geterr request. They might be visible\n\t\tfor (const buffer of this.syncedBuffers.values()) {\n\t\t\tconst editors = vscode.window.visibleTextEditors.filter(editor => editor.document.uri.toString() === buffer.resource.toString());\n\t\t\tconst visibleRanges = editors.flatMap(editor => editor.visibleRanges);\n\t\t\torderedFileSet.set(buffer.resource, visibleRanges.length ? visibleRanges : undefined);\n\t\t}\n\n\t\tfor (const { resource } of orderedFileSet.entries()) {\n\t\t\tconst buffer = this.syncedBuffers.get(resource);\n\t\t\tif (buffer && !this.shouldValidate(buffer)) {\n\t\t\t\torderedFileSet.delete(resource);\n\t\t\t}\n\t\t}\n\n\t\tif (orderedFileSet.size) {\n\t\t\tconst getErr = this.pendingGetErr = GetErrRequest.executeGetErrRequest(this.client, orderedFileSet, () => {\n\t\t\t\tif (this.pendingGetErr === getErr) {\n\t\t\t\t\tthis.pendingGetErr = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.pendingDiagnostics.clear();\n\t}\n\n\tprivate updateConfiguration() {\n\t\tconst jsConfig = vscode.workspace.getConfiguration('javascript', null);\n\t\tconst tsConfig = vscode.workspace.getConfiguration('typescript', null);\n\n\t\tthis._validateJavaScript = jsConfig.get<boolean>('validate.enable', true);\n\t\tthis._validateTypeScript = tsConfig.get<boolean>('validate.enable', true);\n\t}\n\n\tprivate shouldValidate(buffer: SyncedBuffer): boolean {\n\t\tif (fileSchemes.isOfScheme(buffer.resource, fileSchemes.chatCodeBlock)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.client.configuration.enableProjectDiagnostics && !this._tabResources.has(buffer.resource)) { // Only validate resources that are showing to the user\n\t\t\treturn false;\n\t\t}\n\n\t\tswitch (buffer.languageId) {\n\t\t\tcase languageModeIds.javascript:\n\t\t\tcase languageModeIds.javascriptreact:\n\t\t\t\treturn this._validateJavaScript;\n\n\t\t\tcase languageModeIds.typescript:\n\t\t\tcase languageModeIds.typescriptreact:\n\t\t\tdefault:\n\t\t\t\treturn this._validateTypeScript;\n\t\t}\n\t}\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { arrForEach, isArray, isString, strLeft, strTrim } from \"@nevware21/ts-utils\";\r\nimport { _DYN_GET_ATTRIBUTE, _DYN_LENGTH, _DYN_PUSH, _DYN_SPAN_ID, _DYN_SPLIT, _DYN_TO_LOWER_CASE, _DYN_TRACE_FLAGS, _DYN_TRACE_ID, _DYN_VERSION } from \"../__DynamicConstants\";\r\nimport { generateW3CId } from \"./CoreUtils\";\r\nimport { findMetaTag, findNamedServerTiming } from \"./EnvUtils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// using {0,16} for leading and trailing whitespace just to constrain the possible runtime of a random string\r\nvar TRACE_PARENT_REGEX = /^([\\da-f]{2})-([\\da-f]{32})-([\\da-f]{16})-([\\da-f]{2})(-[^\\s]{1,64})?$/i;\r\nvar DEFAULT_VERSION = \"00\";\r\nvar INVALID_VERSION = \"ff\";\r\nvar INVALID_TRACE_ID = \"00000000000000000000000000000000\";\r\nvar INVALID_SPAN_ID = \"0000000000000000\";\r\nvar SAMPLED_FLAG = 0x01;\r\nfunction _isValid(value, len, invalidValue) {\r\n    if (value && value[_DYN_LENGTH /* @min:%2elength */] === len && value !== invalidValue) {\r\n        return !!value.match(/^[\\da-f]*$/i);\r\n    }\r\n    return false;\r\n}\r\nfunction _formatValue(value, len, defValue) {\r\n    if (_isValid(value, len)) {\r\n        return value;\r\n    }\r\n    return defValue;\r\n}\r\nfunction _formatFlags(value) {\r\n    if (isNaN(value) || value < 0 || value > 255) {\r\n        value = 0x01;\r\n    }\r\n    var result = value.toString(16);\r\n    while (result[_DYN_LENGTH /* @min:%2elength */] < 2) {\r\n        result = \"0\" + result;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Create a new ITraceParent instance using the provided values.\r\n * @param traceId - The traceId to use, when invalid a new random W3C id will be generated.\r\n * @param spanId - The parent/span id to use, a new random value will be generated if it is invalid.\r\n * @param flags - The traceFlags to use, defaults to zero (0) if not supplied or invalid\r\n * @param version - The version to used, defaults to version \"01\" if not supplied or invalid.\r\n * @returns\r\n */\r\nexport function createTraceParent(traceId, spanId, flags, version) {\r\n    var _a;\r\n    return _a = {},\r\n        _a[_DYN_VERSION /* @min:version */] = _isValid(version, 2, INVALID_VERSION) ? version : DEFAULT_VERSION,\r\n        _a[_DYN_TRACE_ID /* @min:traceId */] = isValidTraceId(traceId) ? traceId : generateW3CId(),\r\n        _a[_DYN_SPAN_ID /* @min:spanId */] = isValidSpanId(spanId) ? spanId : strLeft(generateW3CId(), 16),\r\n        _a.traceFlags = flags >= 0 && flags <= 0xFF ? flags : 1,\r\n        _a;\r\n}\r\n/**\r\n * Attempt to parse the provided string as a W3C TraceParent header value (https://www.w3.org/TR/trace-context/#traceparent-header)\r\n *\r\n * @param value - The value to be parsed\r\n * @param selectIdx - If the found value is comma separated which is the preferred entry to select, defaults to the first\r\n * @returns\r\n */\r\nexport function parseTraceParent(value, selectIdx) {\r\n    var _a;\r\n    if (!value) {\r\n        // Don't pass a null/undefined or empty string\r\n        return null;\r\n    }\r\n    if (isArray(value)) {\r\n        // The value may have been encoded on the page into an array so handle this automatically\r\n        value = value[0] || \"\";\r\n    }\r\n    if (!value || !isString(value) || value[_DYN_LENGTH /* @min:%2elength */] > 8192) {\r\n        // limit potential processing based on total length\r\n        return null;\r\n    }\r\n    if (value.indexOf(\",\") !== -1) {\r\n        var values = value[_DYN_SPLIT /* @min:%2esplit */](\",\");\r\n        value = values[selectIdx > 0 && values[_DYN_LENGTH /* @min:%2elength */] > selectIdx ? selectIdx : 0];\r\n    }\r\n    // See https://www.w3.org/TR/trace-context/#versioning-of-traceparent\r\n    var match = TRACE_PARENT_REGEX.exec(strTrim(value));\r\n    if (!match || // No match\r\n        match[1] === INVALID_VERSION || // version ff is forbidden\r\n        match[2] === INVALID_TRACE_ID || // All zeros is considered to be invalid\r\n        match[3] === INVALID_SPAN_ID) { // All zeros is considered to be invalid\r\n        return null;\r\n    }\r\n    return _a = {\r\n            version: (match[1] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */](),\r\n            traceId: (match[2] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */](),\r\n            spanId: (match[3] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]()\r\n        },\r\n        _a[_DYN_TRACE_FLAGS /* @min:traceFlags */] = parseInt(match[4], 16),\r\n        _a;\r\n}\r\n/**\r\n * Is the provided W3c Trace Id a valid string representation, it must be a 32-character string\r\n * of lowercase hexadecimal characters for example, 4bf92f3577b34da6a3ce929d0e0e4736.\r\n * If all characters as zero (00000000000000000000000000000000) it will be considered an invalid value.\r\n * @param value - The W3c trace Id to be validated\r\n * @returns true if valid otherwise false\r\n */\r\nexport function isValidTraceId(value) {\r\n    return _isValid(value, 32, INVALID_TRACE_ID);\r\n}\r\n/**\r\n * Is the provided W3c span id (aka. parent id) a valid string representation, it must be a 16-character\r\n * string of lowercase hexadecimal characters, for example, 00f067aa0ba902b7.\r\n * If all characters are zero (0000000000000000) this is considered an invalid value.\r\n * @param value - The W3c span id to be validated\r\n * @returns true if valid otherwise false\r\n */\r\nexport function isValidSpanId(value) {\r\n    return _isValid(value, 16, INVALID_SPAN_ID);\r\n}\r\n/**\r\n * Validates that the provided ITraceParent instance conforms to the currently supported specifications\r\n * @param value\r\n * @returns\r\n */\r\nexport function isValidTraceParent(value) {\r\n    if (!value ||\r\n        !_isValid(value[_DYN_VERSION /* @min:%2eversion */], 2, INVALID_VERSION) ||\r\n        !_isValid(value[_DYN_TRACE_ID /* @min:%2etraceId */], 32, INVALID_TRACE_ID) ||\r\n        !_isValid(value[_DYN_SPAN_ID /* @min:%2espanId */], 16, INVALID_SPAN_ID) ||\r\n        !_isValid(_formatFlags(value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */]), 2)) {\r\n        // Each known field must contain a valid value\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Is the parsed traceParent indicating that the trace is currently sampled.\r\n * @param value - The parsed traceParent value\r\n * @returns\r\n */\r\nexport function isSampledFlag(value) {\r\n    if (isValidTraceParent(value)) {\r\n        return (value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */] & SAMPLED_FLAG) === SAMPLED_FLAG;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Format the ITraceParent value as a string using the supported and know version formats.\r\n * So even if the passed traceParent is a later version the string value returned from this\r\n * function will convert it to only the known version formats.\r\n * This currently only supports version \"00\" and invalid \"ff\"\r\n * @param value - The parsed traceParent value\r\n * @returns\r\n */\r\nexport function formatTraceParent(value) {\r\n    if (value) {\r\n        // Special Note: This only supports formatting as version 00, future versions should encode any known supported version\r\n        // So parsing a future version will populate the correct version value but reformatting will reduce it to version 00.\r\n        var flags = _formatFlags(value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */]);\r\n        if (!_isValid(flags, 2)) {\r\n            flags = \"01\";\r\n        }\r\n        var version = value[_DYN_VERSION /* @min:%2eversion */] || DEFAULT_VERSION;\r\n        if (version !== \"00\" && version !== \"ff\") {\r\n            // Reduce version to \"00\"\r\n            version = DEFAULT_VERSION;\r\n        }\r\n        // Format as version 00\r\n        return \"\".concat(version.toLowerCase(), \"-\").concat(_formatValue(value.traceId, 32, INVALID_TRACE_ID).toLowerCase(), \"-\").concat(_formatValue(value.spanId, 16, INVALID_SPAN_ID).toLowerCase(), \"-\").concat(flags.toLowerCase());\r\n    }\r\n    return \"\";\r\n}\r\n/**\r\n * Helper function to fetch the passed traceparent from the page, looking for it as a meta-tag or a Server-Timing header.\r\n * @param selectIdx - If the found value is comma separated which is the preferred entry to select, defaults to the first\r\n * @returns\r\n */\r\nexport function findW3cTraceParent(selectIdx) {\r\n    var name = \"traceparent\";\r\n    var traceParent = parseTraceParent(findMetaTag(name), selectIdx);\r\n    if (!traceParent) {\r\n        traceParent = parseTraceParent(findNamedServerTiming(name), selectIdx);\r\n    }\r\n    return traceParent;\r\n}\r\n/**\r\n * Find all script tags in the provided document and return the information about them.\r\n * @param doc\r\n * @returns\r\n */\r\nexport function findAllScripts(doc) {\r\n    var scripts = doc.getElementsByTagName(\"script\");\r\n    var result = [];\r\n    arrForEach(scripts, function (script) {\r\n        var src = script[_DYN_GET_ATTRIBUTE /* @min:%2egetAttribute */](\"src\");\r\n        if (src) {\r\n            var crossOrigin = script[_DYN_GET_ATTRIBUTE /* @min:%2egetAttribute */](\"crossorigin\");\r\n            var async = script.hasAttribute(\"async\") === true;\r\n            var defer = script.hasAttribute(\"defer\") === true;\r\n            var referrerPolicy = script[_DYN_GET_ATTRIBUTE /* @min:%2egetAttribute */](\"referrerpolicy\");\r\n            var info = { url: src };\r\n            if (crossOrigin) {\r\n                info.crossOrigin = crossOrigin;\r\n            }\r\n            if (async) {\r\n                info.async = async;\r\n            }\r\n            if (defer) {\r\n                info.defer = defer;\r\n            }\r\n            if (referrerPolicy) {\r\n                info.referrerPolicy = referrerPolicy;\r\n            }\r\n            result[_DYN_PUSH /* @min:%2epush */](info);\r\n        }\r\n    });\r\n    return result;\r\n}\r\n//# sourceMappingURL=W3cTraceParent.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { CachedResponse } from '../tsServer/cachedResponse';\nimport { parseKindModifier } from '../tsServer/protocol/modifiers';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as PConst from '../tsServer/protocol/protocol.const';\nimport * as typeConverters from '../typeConverters';\nimport { ITypeScriptServiceClient } from '../typescriptService';\n\nconst getSymbolKind = (kind: string): vscode.SymbolKind => {\n\tswitch (kind) {\n\t\tcase PConst.Kind.module: return vscode.SymbolKind.Module;\n\t\tcase PConst.Kind.class: return vscode.SymbolKind.Class;\n\t\tcase PConst.Kind.enum: return vscode.SymbolKind.Enum;\n\t\tcase PConst.Kind.interface: return vscode.SymbolKind.Interface;\n\t\tcase PConst.Kind.method: return vscode.SymbolKind.Method;\n\t\tcase PConst.Kind.memberVariable: return vscode.SymbolKind.Property;\n\t\tcase PConst.Kind.memberGetAccessor: return vscode.SymbolKind.Property;\n\t\tcase PConst.Kind.memberSetAccessor: return vscode.SymbolKind.Property;\n\t\tcase PConst.Kind.variable: return vscode.SymbolKind.Variable;\n\t\tcase PConst.Kind.const: return vscode.SymbolKind.Variable;\n\t\tcase PConst.Kind.localVariable: return vscode.SymbolKind.Variable;\n\t\tcase PConst.Kind.function: return vscode.SymbolKind.Function;\n\t\tcase PConst.Kind.localFunction: return vscode.SymbolKind.Function;\n\t\tcase PConst.Kind.constructSignature: return vscode.SymbolKind.Constructor;\n\t\tcase PConst.Kind.constructorImplementation: return vscode.SymbolKind.Constructor;\n\t}\n\treturn vscode.SymbolKind.Variable;\n};\n\nclass TypeScriptDocumentSymbolProvider implements vscode.DocumentSymbolProvider {\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly cachedResponse: CachedResponse<Proto.NavTreeResponse>,\n\t) { }\n\n\tpublic async provideDocumentSymbols(document: vscode.TextDocument, token: vscode.CancellationToken): Promise<vscode.DocumentSymbol[] | undefined> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args: Proto.FileRequestArgs = { file };\n\t\tconst response = await this.cachedResponse.execute(document, () => this.client.execute('navtree', args, token));\n\t\tif (response.type !== 'response' || !response.body?.childItems) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// The root represents the file. Ignore this when showing in the UI\n\t\tconst result: vscode.DocumentSymbol[] = [];\n\t\tfor (const item of response.body.childItems) {\n\t\t\tTypeScriptDocumentSymbolProvider.convertNavTree(document.uri, result, item);\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate static convertNavTree(\n\t\tresource: vscode.Uri,\n\t\toutput: vscode.DocumentSymbol[],\n\t\titem: Proto.NavigationTree,\n\t): boolean {\n\t\tlet shouldInclude = TypeScriptDocumentSymbolProvider.shouldInclueEntry(item);\n\t\tif (!shouldInclude && !item.childItems?.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst children = new Set(item.childItems || []);\n\t\tfor (const span of item.spans) {\n\t\t\tconst range = typeConverters.Range.fromTextSpan(span);\n\t\t\tconst symbolInfo = TypeScriptDocumentSymbolProvider.convertSymbol(item, range);\n\n\t\t\tfor (const child of children) {\n\t\t\t\tif (child.spans.some(span => !!range.intersection(typeConverters.Range.fromTextSpan(span)))) {\n\t\t\t\t\tconst includedChild = TypeScriptDocumentSymbolProvider.convertNavTree(resource, symbolInfo.children, child);\n\t\t\t\t\tshouldInclude = shouldInclude || includedChild;\n\t\t\t\t\tchildren.delete(child);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (shouldInclude) {\n\t\t\t\toutput.push(symbolInfo);\n\t\t\t}\n\t\t}\n\n\t\treturn shouldInclude;\n\t}\n\n\tprivate static convertSymbol(item: Proto.NavigationTree, range: vscode.Range): vscode.DocumentSymbol {\n\t\tconst selectionRange = item.nameSpan ? typeConverters.Range.fromTextSpan(item.nameSpan) : range;\n\t\tlet label = item.text;\n\n\t\tswitch (item.kind) {\n\t\t\tcase PConst.Kind.memberGetAccessor: label = `(get) ${label}`; break;\n\t\t\tcase PConst.Kind.memberSetAccessor: label = `(set) ${label}`; break;\n\t\t}\n\n\t\tconst symbolInfo = new vscode.DocumentSymbol(\n\t\t\tlabel,\n\t\t\t'',\n\t\t\tgetSymbolKind(item.kind),\n\t\t\trange,\n\t\t\trange.contains(selectionRange) ? selectionRange : range);\n\n\n\t\tconst kindModifiers = parseKindModifier(item.kindModifiers);\n\t\tif (kindModifiers.has(PConst.KindModifiers.deprecated)) {\n\t\t\tsymbolInfo.tags = [vscode.SymbolTag.Deprecated];\n\t\t}\n\n\t\treturn symbolInfo;\n\t}\n\n\tprivate static shouldInclueEntry(item: Proto.NavigationTree | Proto.NavigationBarItem): boolean {\n\t\tif (item.kind === PConst.Kind.alias) {\n\t\t\treturn false;\n\t\t}\n\t\treturn !!(item.text && item.text !== '<function>' && item.text !== '<class>');\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n\tcachedResponse: CachedResponse<Proto.NavTreeResponse>,\n) {\n\treturn vscode.languages.registerDocumentSymbolProvider(selector.syntax,\n\t\tnew TypeScriptDocumentSymbolProvider(client, cachedResponse), { label: 'TypeScript' });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { API } from '../tsServer/api';\nimport { parseKindModifier } from '../tsServer/protocol/modifiers';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as PConst from '../tsServer/protocol/protocol.const';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireMinVersion, requireSomeCapability } from './util/dependentRegistration';\n\nclass TypeScriptCallHierarchySupport implements vscode.CallHierarchyProvider {\n\tpublic static readonly minVersion = API.v380;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async prepareCallHierarchy(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.CallHierarchyItem | vscode.CallHierarchyItem[] | undefined> {\n\t\tconst filepath = this.client.toOpenTsFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\tconst response = await this.client.execute('prepareCallHierarchy', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn Array.isArray(response.body)\n\t\t\t? response.body.map(fromProtocolCallHierarchyItem)\n\t\t\t: fromProtocolCallHierarchyItem(response.body);\n\t}\n\n\tpublic async provideCallHierarchyIncomingCalls(item: vscode.CallHierarchyItem, token: vscode.CancellationToken): Promise<vscode.CallHierarchyIncomingCall[] | undefined> {\n\t\tconst filepath = this.client.toTsFilePath(item.uri);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, item.selectionRange.start);\n\t\tconst response = await this.client.execute('provideCallHierarchyIncomingCalls', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn response.body.map(fromProtocolCallHierarchyIncomingCall);\n\t}\n\n\tpublic async provideCallHierarchyOutgoingCalls(item: vscode.CallHierarchyItem, token: vscode.CancellationToken): Promise<vscode.CallHierarchyOutgoingCall[] | undefined> {\n\t\tconst filepath = this.client.toTsFilePath(item.uri);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, item.selectionRange.start);\n\t\tconst response = await this.client.execute('provideCallHierarchyOutgoingCalls', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn response.body.map(fromProtocolCallHierarchyOutgoingCall);\n\t}\n}\n\nfunction isSourceFileItem(item: Proto.CallHierarchyItem) {\n\treturn item.kind === PConst.Kind.script || item.kind === PConst.Kind.module && item.selectionSpan.start.line === 1 && item.selectionSpan.start.offset === 1;\n}\n\nfunction fromProtocolCallHierarchyItem(item: Proto.CallHierarchyItem): vscode.CallHierarchyItem {\n\tconst useFileName = isSourceFileItem(item);\n\tconst name = useFileName ? path.basename(item.file) : item.name;\n\tconst detail = useFileName ? vscode.workspace.asRelativePath(path.dirname(item.file)) : item.containerName ?? '';\n\tconst result = new vscode.CallHierarchyItem(\n\t\ttypeConverters.SymbolKind.fromProtocolScriptElementKind(item.kind),\n\t\tname,\n\t\tdetail,\n\t\tvscode.Uri.file(item.file),\n\t\ttypeConverters.Range.fromTextSpan(item.span),\n\t\ttypeConverters.Range.fromTextSpan(item.selectionSpan)\n\t);\n\n\tconst kindModifiers = item.kindModifiers ? parseKindModifier(item.kindModifiers) : undefined;\n\tif (kindModifiers?.has(PConst.KindModifiers.deprecated)) {\n\t\tresult.tags = [vscode.SymbolTag.Deprecated];\n\t}\n\treturn result;\n}\n\nfunction fromProtocolCallHierarchyIncomingCall(item: Proto.CallHierarchyIncomingCall): vscode.CallHierarchyIncomingCall {\n\treturn new vscode.CallHierarchyIncomingCall(\n\t\tfromProtocolCallHierarchyItem(item.from),\n\t\titem.fromSpans.map(typeConverters.Range.fromTextSpan)\n\t);\n}\n\nfunction fromProtocolCallHierarchyOutgoingCall(item: Proto.CallHierarchyOutgoingCall): vscode.CallHierarchyOutgoingCall {\n\treturn new vscode.CallHierarchyOutgoingCall(\n\t\tfromProtocolCallHierarchyItem(item.to),\n\t\titem.fromSpans.map(typeConverters.Range.fromTextSpan)\n\t);\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient\n) {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, TypeScriptCallHierarchySupport.minVersion),\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerCallHierarchyProvider(selector.semantic,\n\t\t\tnew TypeScriptCallHierarchySupport(client));\n\t});\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _Uint8Result_length, _Int8Result_length, _Uint16Result_length, _Int16Result_length, _Uint32Result_length, _Int32Result_length, _Uint64Result_length, _Int64Result_length, _VariableResult_mode;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseServiceConnection = exports.RequestResult = exports.BaseClientConnection = exports.RPCError = exports.RPCErrno = exports.VariableResult = exports.Int64Result = exports.Uint64Result = exports.Int32Result = exports.Uint32Result = exports.Int16Result = exports.Uint16Result = exports.Int8Result = exports.Uint8Result = exports.Notification = exports.Request = void 0;\nconst ral_1 = __importDefault(require(\"./ral\"));\nvar TypedArray;\n(function (TypedArray) {\n    function is(value) {\n        return value instanceof Uint8Array || value instanceof Int8Array || value instanceof Uint16Array || value instanceof Int16Array ||\n            value instanceof Uint32Array || value instanceof Int32Array || value instanceof BigUint64Array || value instanceof BigInt64Array;\n    }\n    TypedArray.is = is;\n    function set(sharedArrayBuffer, offset, data) {\n        if (data instanceof Uint8Array) {\n            new Uint8Array(sharedArrayBuffer, offset, data.length).set(data);\n        }\n        else if (data instanceof Int8Array) {\n            new Int8Array(sharedArrayBuffer, offset, data.length).set(data);\n        }\n        else if (data instanceof Uint16Array) {\n            new Uint16Array(sharedArrayBuffer, offset, data.length).set(data);\n        }\n        else if (data instanceof Int16Array) {\n            new Int16Array(sharedArrayBuffer, offset, data.length).set(data);\n        }\n        else if (data instanceof Uint32Array) {\n            new Uint32Array(sharedArrayBuffer, offset, data.length).set(data);\n        }\n        else if (data instanceof Int32Array) {\n            new Int32Array(sharedArrayBuffer, offset, data.length).set(data);\n        }\n        else if (data instanceof BigUint64Array) {\n            new BigUint64Array(sharedArrayBuffer, offset, data.length).set(data);\n        }\n        else if (data instanceof BigInt64Array) {\n            new BigInt64Array(sharedArrayBuffer, offset, data.length).set(data);\n        }\n        else {\n            throw new Error(`Unknown type array type`);\n        }\n    }\n    TypedArray.set = set;\n})(TypedArray || (TypedArray = {}));\nvar Request;\n(function (Request) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && typeof candidate.method === 'string';\n    }\n    Request.is = is;\n})(Request = exports.Request || (exports.Request = {}));\nvar Notification;\n(function (Notification) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && typeof candidate.method === 'string' && typeof candidate.id === 'undefined';\n    }\n    Notification.is = is;\n})(Notification = exports.Notification || (exports.Notification = {}));\nclass NoResult {\n    constructor() {\n    }\n    get kind() {\n        return NoResult.kind;\n    }\n    get byteLength() {\n        return 0;\n    }\n    get length() {\n        return 0;\n    }\n    getPadding(offset) {\n        return 0;\n    }\n    createResultArray(sharedArrayBuffer, offset) {\n        return new Uint8Array(sharedArrayBuffer, offset, 0);\n    }\n}\nNoResult.kind = 0;\nclass Uint8Result {\n    constructor(value) {\n        _Uint8Result_length.set(this, void 0);\n        __classPrivateFieldSet(this, _Uint8Result_length, value, \"f\");\n    }\n    static fromLength(length) {\n        return new Uint8Result(length);\n    }\n    static fromByteLength(byteLength) {\n        return new Uint8Result(byteLength);\n    }\n    get kind() {\n        return Uint8Result.kind;\n    }\n    get byteLength() {\n        return __classPrivateFieldGet(this, _Uint8Result_length, \"f\") * Uint8Array.BYTES_PER_ELEMENT;\n    }\n    get length() {\n        return __classPrivateFieldGet(this, _Uint8Result_length, \"f\");\n    }\n    getPadding(offset) {\n        return TypedArrayResult.getPadding(offset);\n    }\n    createResultArray(sharedArrayBuffer, offset) {\n        return new Uint8Array(sharedArrayBuffer, offset, this.length);\n    }\n    is(value) {\n        return value instanceof Uint8Array;\n    }\n}\nexports.Uint8Result = Uint8Result;\n_Uint8Result_length = new WeakMap();\nUint8Result.kind = 1;\nclass Int8Result {\n    constructor(value) {\n        _Int8Result_length.set(this, void 0);\n        __classPrivateFieldSet(this, _Int8Result_length, value, \"f\");\n    }\n    static fromLength(length) {\n        return new Int8Result(length);\n    }\n    static fromByteLength(byteLength) {\n        return new Int8Result(byteLength);\n    }\n    get kind() {\n        return Int8Result.kind;\n    }\n    get byteLength() {\n        return __classPrivateFieldGet(this, _Int8Result_length, \"f\") * Int8Array.BYTES_PER_ELEMENT;\n    }\n    get length() {\n        return __classPrivateFieldGet(this, _Int8Result_length, \"f\");\n    }\n    getPadding(offset) {\n        return TypedArrayResult.getPadding(offset);\n    }\n    createResultArray(sharedArrayBuffer, offset) {\n        return new Int8Array(sharedArrayBuffer, offset, this.length);\n    }\n    is(value) {\n        return value instanceof Int8Array;\n    }\n}\nexports.Int8Result = Int8Result;\n_Int8Result_length = new WeakMap();\nInt8Result.kind = 2;\nclass Uint16Result {\n    constructor(value) {\n        _Uint16Result_length.set(this, void 0);\n        __classPrivateFieldSet(this, _Uint16Result_length, value, \"f\");\n    }\n    static fromLength(length) {\n        return new Uint16Result(length);\n    }\n    static fromByteLength(byteLength) {\n        if (byteLength % Uint16Array.BYTES_PER_ELEMENT !== 0) {\n            throw new Error(`Byte length must be a multiple of ${Uint16Array.BYTES_PER_ELEMENT} but was ${byteLength}`);\n        }\n        return new Uint16Result(byteLength / Uint16Array.BYTES_PER_ELEMENT);\n    }\n    get kind() {\n        return Uint16Result.kind;\n    }\n    get byteLength() {\n        return __classPrivateFieldGet(this, _Uint16Result_length, \"f\") * Uint16Array.BYTES_PER_ELEMENT;\n    }\n    get length() {\n        return __classPrivateFieldGet(this, _Uint16Result_length, \"f\");\n    }\n    getPadding(offset) {\n        return TypedArrayResult.getPadding(offset);\n    }\n    createResultArray(sharedArrayBuffer, offset) {\n        return new Uint16Array(sharedArrayBuffer, offset, this.length);\n    }\n    is(value) {\n        return value instanceof Uint16Array;\n    }\n}\nexports.Uint16Result = Uint16Result;\n_Uint16Result_length = new WeakMap();\nUint16Result.kind = 3;\nclass Int16Result {\n    constructor(value) {\n        _Int16Result_length.set(this, void 0);\n        __classPrivateFieldSet(this, _Int16Result_length, value, \"f\");\n    }\n    static fromLength(length) {\n        return new Int16Result(length);\n    }\n    static fromByteLength(byteLength) {\n        if (byteLength % Int16Array.BYTES_PER_ELEMENT !== 0) {\n            throw new Error(`Byte length must be a multiple of ${Int16Array.BYTES_PER_ELEMENT} but was ${byteLength}`);\n        }\n        return new Int16Result(byteLength / Int16Array.BYTES_PER_ELEMENT);\n    }\n    get kind() {\n        return Int16Result.kind;\n    }\n    get byteLength() {\n        return __classPrivateFieldGet(this, _Int16Result_length, \"f\") * Int16Array.BYTES_PER_ELEMENT;\n    }\n    get length() {\n        return __classPrivateFieldGet(this, _Int16Result_length, \"f\");\n    }\n    getPadding(offset) {\n        return TypedArrayResult.getPadding(offset);\n    }\n    createResultArray(sharedArrayBuffer, offset) {\n        return new Int16Array(sharedArrayBuffer, offset, this.length);\n    }\n    is(value) {\n        return value instanceof Int16Array;\n    }\n}\nexports.Int16Result = Int16Result;\n_Int16Result_length = new WeakMap();\nInt16Result.kind = 4;\nclass Uint32Result {\n    constructor(value) {\n        _Uint32Result_length.set(this, void 0);\n        __classPrivateFieldSet(this, _Uint32Result_length, value, \"f\");\n    }\n    static fromLength(length) {\n        return new Uint32Result(length);\n    }\n    static fromByteLength(byteLength) {\n        if (byteLength % Uint32Array.BYTES_PER_ELEMENT !== 0) {\n            throw new Error(`Byte length must be a multiple of ${Uint32Array.BYTES_PER_ELEMENT} but was ${byteLength}`);\n        }\n        return new Uint32Result(byteLength / Uint32Array.BYTES_PER_ELEMENT);\n    }\n    get kind() {\n        return Uint32Result.kind;\n    }\n    get byteLength() {\n        return __classPrivateFieldGet(this, _Uint32Result_length, \"f\") * Uint32Array.BYTES_PER_ELEMENT;\n    }\n    get length() {\n        return __classPrivateFieldGet(this, _Uint32Result_length, \"f\");\n    }\n    getPadding(offset) {\n        return TypedArrayResult.getPadding(offset);\n    }\n    createResultArray(sharedArrayBuffer, offset) {\n        return new Uint32Array(sharedArrayBuffer, offset, this.length);\n    }\n    is(value) {\n        return value instanceof Uint32Array;\n    }\n}\nexports.Uint32Result = Uint32Result;\n_Uint32Result_length = new WeakMap();\nUint32Result.kind = 5;\nclass Int32Result {\n    constructor(value) {\n        _Int32Result_length.set(this, void 0);\n        __classPrivateFieldSet(this, _Int32Result_length, value, \"f\");\n    }\n    static fromLength(length) {\n        return new Int32Result(length);\n    }\n    static fromByteLength(byteLength) {\n        if (byteLength % Int32Array.BYTES_PER_ELEMENT !== 0) {\n            throw new Error(`Byte length must be a multiple of ${Int32Array.BYTES_PER_ELEMENT} but was ${byteLength}`);\n        }\n        return new Int32Result(byteLength / Int32Array.BYTES_PER_ELEMENT);\n    }\n    get kind() {\n        return Int32Result.kind;\n    }\n    get byteLength() {\n        return __classPrivateFieldGet(this, _Int32Result_length, \"f\") * Int32Array.BYTES_PER_ELEMENT;\n    }\n    get length() {\n        return __classPrivateFieldGet(this, _Int32Result_length, \"f\");\n    }\n    getPadding(offset) {\n        return TypedArrayResult.getPadding(offset);\n    }\n    createResultArray(sharedArrayBuffer, offset) {\n        return new Int32Array(sharedArrayBuffer, offset, this.length);\n    }\n    is(value) {\n        return value instanceof Int32Array;\n    }\n}\nexports.Int32Result = Int32Result;\n_Int32Result_length = new WeakMap();\nInt32Result.kind = 6;\nclass Uint64Result {\n    constructor(value) {\n        _Uint64Result_length.set(this, void 0);\n        __classPrivateFieldSet(this, _Uint64Result_length, value, \"f\");\n    }\n    static fromLength(length) {\n        return new Uint64Result(length);\n    }\n    static fromByteLength(byteLength) {\n        if (byteLength % BigUint64Array.BYTES_PER_ELEMENT !== 0) {\n            throw new Error(`Byte length must be a multiple of ${BigUint64Array.BYTES_PER_ELEMENT} but was ${byteLength}`);\n        }\n        return new Uint64Result(byteLength / BigUint64Array.BYTES_PER_ELEMENT);\n    }\n    get kind() {\n        return Uint64Result.kind;\n    }\n    get byteLength() {\n        return __classPrivateFieldGet(this, _Uint64Result_length, \"f\") * BigUint64Array.BYTES_PER_ELEMENT;\n    }\n    get length() {\n        return __classPrivateFieldGet(this, _Uint64Result_length, \"f\");\n    }\n    getPadding(offset) {\n        return BigUint64Array.BYTES_PER_ELEMENT - (offset % BigUint64Array.BYTES_PER_ELEMENT);\n    }\n    createResultArray(sharedArrayBuffer, offset) {\n        return new BigUint64Array(sharedArrayBuffer, offset, this.length);\n    }\n    is(value) {\n        return value instanceof BigUint64Array;\n    }\n}\nexports.Uint64Result = Uint64Result;\n_Uint64Result_length = new WeakMap();\nUint64Result.kind = 7;\nclass Int64Result {\n    constructor(value) {\n        _Int64Result_length.set(this, void 0);\n        __classPrivateFieldSet(this, _Int64Result_length, value, \"f\");\n    }\n    static fromLength(length) {\n        return new Int64Result(length);\n    }\n    static fromByteLength(byteLength) {\n        if (byteLength % BigInt64Array.BYTES_PER_ELEMENT !== 0) {\n            throw new Error(`Byte length must be a multiple of ${BigInt64Array.BYTES_PER_ELEMENT} but was ${byteLength}`);\n        }\n        return new Int64Result(byteLength / BigInt64Array.BYTES_PER_ELEMENT);\n    }\n    get kind() {\n        return Int64Result.kind;\n    }\n    get byteLength() {\n        return __classPrivateFieldGet(this, _Int64Result_length, \"f\") * BigInt64Array.BYTES_PER_ELEMENT;\n    }\n    get length() {\n        return __classPrivateFieldGet(this, _Int64Result_length, \"f\");\n    }\n    getPadding(offset) {\n        return BigInt64Array.BYTES_PER_ELEMENT - (offset % BigInt64Array.BYTES_PER_ELEMENT);\n    }\n    createResultArray(sharedArrayBuffer, offset) {\n        return new BigInt64Array(sharedArrayBuffer, offset, this.length);\n    }\n    is(value) {\n        return value instanceof BigInt64Array;\n    }\n}\nexports.Int64Result = Int64Result;\n_Int64Result_length = new WeakMap();\nInt64Result.kind = 8;\nclass VariableResult {\n    constructor(mode) {\n        _VariableResult_mode.set(this, void 0);\n        __classPrivateFieldSet(this, _VariableResult_mode, mode, \"f\");\n    }\n    get kind() {\n        return VariableResult.kind;\n    }\n    get mode() {\n        return __classPrivateFieldGet(this, _VariableResult_mode, \"f\");\n    }\n    get byteLength() {\n        return 0;\n    }\n    get length() {\n        return 0;\n    }\n    getPadding(_offset) {\n        return 0;\n    }\n}\nexports.VariableResult = VariableResult;\n_VariableResult_mode = new WeakMap();\nVariableResult.kind = 9;\nvar TypedArrayResult;\n(function (TypedArrayResult) {\n    function fromByteLength(kind, byteLength) {\n        switch (kind) {\n            case Uint8Result.kind:\n                return Uint8Result.fromByteLength(byteLength);\n            case Int8Result.kind:\n                return Int8Result.fromByteLength(byteLength);\n            case Uint16Result.kind:\n                return Uint16Result.fromByteLength(byteLength);\n            case Int16Result.kind:\n                return Int16Result.fromByteLength(byteLength);\n            case Uint32Result.kind:\n                return Uint32Result.fromByteLength(byteLength);\n            case Int32Result.kind:\n                return Int32Result.fromByteLength(byteLength);\n            case Uint64Result.kind:\n                return Uint64Result.fromByteLength(byteLength);\n            case Int64Result.kind:\n                return Int64Result.fromByteLength(byteLength);\n            case VariableResult.kind:\n                // send another request to get the result.\n                throw new Error(`No result array for variable results result type.`);\n            default:\n                throw new Error(`Unknown result kind ${kind}`);\n        }\n    }\n    TypedArrayResult.fromByteLength = fromByteLength;\n    /**\n     * For now we align everything on a 4 byte boundary\n     */\n    function getPadding(offset) {\n        return 4 - (offset % 4);\n    }\n    TypedArrayResult.getPadding = getPadding;\n})(TypedArrayResult || (TypedArrayResult = {}));\nvar ResultType;\n(function (ResultType) {\n    function is(value) {\n        return value instanceof Uint8Result || value instanceof Int8Result || value instanceof Uint16Result || value instanceof Int16Result ||\n            value instanceof Uint32Result || value instanceof Int32Result || value instanceof Uint64Result || value instanceof Int64Result ||\n            value instanceof VariableResult || value instanceof NoResult;\n    }\n    ResultType.is = is;\n})(ResultType || (ResultType = {}));\n/**\n * Errno numbers specific to the sync RPC calls. We start at 16384 to not collide\n * with POSIX error numbers.\n */\nvar RPCErrno;\n(function (RPCErrno) {\n    /**\n     * No error occurred. RPC  call completed successfully.\n     */\n    RPCErrno.Success = 0;\n    /**\n     * The sync RPC called timed out.\n     */\n    RPCErrno.TimedOut = 1;\n    /**\n     * A unknown error has occurred.\n     */\n    RPCErrno.UnknownError = 16384;\n    /**\n     * Fetching the lazy result from the service failed.\n     */\n    RPCErrno.LazyResultFailed = RPCErrno.UnknownError + 1;\n    /**\n     * No handler on the service side found.\n     */\n    RPCErrno.NoHandlerFound = RPCErrno.LazyResultFailed + 1;\n    /**\n     * Invalid message format.\n     */\n    RPCErrno.InvalidMessageFormat = RPCErrno.NoHandlerFound + 1;\n    /**\n     * Start of the custom error number range.\n     */\n    RPCErrno.$Custom = 32768;\n})(RPCErrno = exports.RPCErrno || (exports.RPCErrno = {}));\nclass RPCError extends Error {\n    constructor(errno, message) {\n        super(message);\n        this.errno = errno;\n    }\n}\nexports.RPCError = RPCError;\nclass BaseClientConnection {\n    constructor() {\n        this.sendRequest = this._sendRequest;\n        this.id = 1;\n        this.textEncoder = (0, ral_1.default)().TextEncoder.create();\n        this.textDecoder = (0, ral_1.default)().TextDecoder.create();\n        this.readyPromise = new Promise((resolve, reject) => {\n            this.readyCallbacks = { resolve, reject };\n        });\n    }\n    serviceReady() {\n        return this.readyPromise;\n    }\n    _sendRequest(method, arg1, arg2, arg3) {\n        const id = this.id++;\n        const request = { id: id, method };\n        let params = undefined;\n        let resultType = new NoResult();\n        let timeout = undefined;\n        if (ResultType.is(arg1)) {\n            resultType = arg1;\n        }\n        else if (typeof arg1 === 'number') {\n            timeout = arg1;\n        }\n        else if (arg1 !== undefined || arg1 !== null) {\n            params = arg1;\n        }\n        if (typeof arg2 === 'number') {\n            timeout = arg2;\n        }\n        else if (arg2 !== undefined) {\n            resultType = arg2;\n        }\n        if (typeof arg3 === 'number') {\n            timeout = arg3;\n        }\n        if (params !== undefined) {\n            request.params = {};\n            for (const property of Object.keys(params)) {\n                if (property !== 'binary') {\n                    request.params[property] = params[property];\n                }\n                else {\n                    request.params['binary'] = null;\n                }\n            }\n        }\n        const requestData = this.textEncoder.encode(JSON.stringify(request, undefined, 0));\n        const binaryData = params?.binary;\n        const binaryDataLength = binaryData !== undefined ? binaryData.byteLength : 0;\n        const requestOffset = 4 /* SyncSize.total */ + 32 /* HeaderSize.total */;\n        const binaryOffset = requestOffset + requestData.byteLength;\n        const resultByteLength = resultType.byteLength;\n        const resultPadding = resultType.getPadding(binaryOffset + binaryDataLength);\n        const resultOffset = (binaryOffset + binaryDataLength) + resultPadding;\n        const sharedArrayBufferLength = 4 /* SyncSize.total */ + 32 /* HeaderSize.total */ + requestData.byteLength + binaryDataLength + resultPadding + resultByteLength;\n        const sharedArrayBuffer = new SharedArrayBuffer(sharedArrayBufferLength);\n        const header = new Uint32Array(sharedArrayBuffer, 4 /* SyncSize.total */, 32 /* HeaderSize.total */ / 4);\n        header[0 /* HeaderIndex.messageOffset */] = requestOffset;\n        header[1 /* HeaderIndex.messageByteLength */] = requestData.byteLength;\n        header[2 /* HeaderIndex.binaryParamOffset */] = binaryOffset;\n        header[3 /* HeaderIndex.binaryParamByteLength */] = binaryDataLength;\n        header[4 /* HeaderIndex.errno */] = RPCErrno.Success;\n        header[5 /* HeaderIndex.resultKind */] = resultType.kind;\n        header[6 /* HeaderIndex.resultOffset */] = resultOffset;\n        header[7 /* HeaderIndex.resultByteLength */] = resultByteLength;\n        const raw = new Uint8Array(sharedArrayBuffer);\n        raw.set(requestData, requestOffset);\n        if (binaryData !== undefined) {\n            raw.set(binaryData, binaryOffset);\n        }\n        // Send the shard array buffer to the other worker\n        const sync = new Int32Array(sharedArrayBuffer, 0, 1);\n        Atomics.store(sync, 0, 0);\n        // Send the shared array buffer to the extension host worker\n        this.postMessage(sharedArrayBuffer);\n        // Wait for the answer\n        const result = Atomics.wait(sync, 0, 0, timeout);\n        switch (result) {\n            case 'timed-out':\n                return { errno: RPCErrno.TimedOut };\n            case 'not-equal':\n                const value = Atomics.load(sync, 0);\n                // If the value === 1 the service has already\n                // provided the result. Otherwise we actually\n                // don't know what happened :-(.\n                if (value !== 1) {\n                    return { errno: RPCErrno.UnknownError };\n                }\n        }\n        const errno = header[4 /* HeaderIndex.errno */];\n        if (errno !== 0) {\n            return { errno };\n        }\n        else {\n            switch (resultType.kind) {\n                case NoResult.kind:\n                    return { errno: 0 };\n                case VariableResult.kind:\n                    const lazyResultLength = header[7 /* HeaderIndex.resultByteLength */];\n                    if (lazyResultLength === 0) {\n                        return { errno: 0, data: resultType.mode === 'binary' ? new Uint8Array(0) : '' };\n                    }\n                    const lazyResult = this._sendRequest('$/fetchResult', { resultId: id }, Uint8Result.fromLength(lazyResultLength), timeout);\n                    if (lazyResult.errno !== 0) {\n                        return { errno: lazyResult.errno };\n                    }\n                    if (RequestResult.hasData(lazyResult)) {\n                        try {\n                            // We need to slice the Uint8Array we received since it is a view onto a\n                            // shared array buffer and in the browser the text decoder throws when\n                            // reading from a Uint8Array. Since this seems to be the correct behavior\n                            // anyways (the array could otherwise change underneath) we do the same\n                            // for NodeJS\n                            const data = resultType.mode === 'binary'\n                                ? lazyResult.data\n                                : JSON.parse(this.textDecoder.decode(lazyResult.data.slice()));\n                            return { errno: 0, data };\n                        }\n                        catch (error) {\n                            (0, ral_1.default)().console.error(error);\n                            return { errno: RPCErrno.LazyResultFailed };\n                        }\n                    }\n                    else {\n                        return { errno: RPCErrno.LazyResultFailed };\n                    }\n                default:\n                    return { errno: 0, data: resultType.createResultArray(sharedArrayBuffer, resultOffset) };\n            }\n        }\n    }\n    handleMessage(message) {\n        if (message.method === '$/ready') {\n            this.readyCallbacks.resolve(message.params);\n        }\n    }\n}\nexports.BaseClientConnection = BaseClientConnection;\nvar RequestResult;\n(function (RequestResult) {\n    function hasData(value) {\n        const candidate = value;\n        return candidate.errno === 0 && candidate.data !== undefined;\n    }\n    RequestResult.hasData = hasData;\n})(RequestResult = exports.RequestResult || (exports.RequestResult = {}));\nclass BaseServiceConnection {\n    constructor() {\n        this.onRequest = this._onRequest;\n        this.textDecoder = (0, ral_1.default)().TextDecoder.create();\n        this.textEncoder = (0, ral_1.default)().TextEncoder.create();\n        this.requestHandlers = new Map();\n        this.requestResults = new Map();\n    }\n    _onRequest(method, handler) {\n        this.requestHandlers.set(method, handler);\n        return {\n            dispose: () => this.requestHandlers.delete(method)\n        };\n    }\n    async handleMessage(sharedArrayBuffer) {\n        const header = new Uint32Array(sharedArrayBuffer, 4 /* SyncSize.total */, 32 /* HeaderSize.total */ / 4);\n        const requestOffset = header[0 /* HeaderIndex.messageOffset */];\n        const requestLength = header[1 /* HeaderIndex.messageByteLength */];\n        try {\n            // See above why we need to slice the Uint8Array.\n            const message = JSON.parse(this.textDecoder.decode(new Uint8Array(sharedArrayBuffer, requestOffset, requestLength).slice()));\n            if (Request.is(message)) {\n                if (message.method === '$/fetchResult') {\n                    const resultId = message.params.resultId;\n                    const result = this.requestResults.get(resultId);\n                    this.requestResults.delete(resultId);\n                    const resultOffset = header[6 /* HeaderIndex.resultOffset */];\n                    const resultByteLength = header[7 /* HeaderIndex.resultByteLength */];\n                    if (result !== undefined && result.byteLength === resultByteLength) {\n                        TypedArray.set(sharedArrayBuffer, resultOffset, result);\n                        header[4 /* HeaderIndex.errno */] = RPCErrno.Success;\n                    }\n                    else {\n                        header[4 /* HeaderIndex.errno */] = RPCErrno.LazyResultFailed;\n                    }\n                }\n                else {\n                    if (message.params?.binary === null) {\n                        const binaryParamsLength = header[3 /* HeaderIndex.binaryParamByteLength */];\n                        const binaryParamsOffset = header[2 /* HeaderIndex.binaryParamOffset */];\n                        const binary = new Uint8Array(sharedArrayBuffer, binaryParamsOffset, binaryParamsLength);\n                        message.params = message.params ?? {};\n                        message.params.binary = binary;\n                    }\n                    const handler = this.requestHandlers.get(message.method);\n                    if (handler !== undefined) {\n                        const resultKind = header[5 /* HeaderIndex.resultKind */];\n                        const resultOffset = header[6 /* HeaderIndex.resultOffset */];\n                        const resultByteLength = header[7 /* HeaderIndex.resultByteLength */];\n                        let handlerResult;\n                        let requestResult;\n                        switch (resultKind) {\n                            case NoResult.kind:\n                                handlerResult = message.params !== undefined ? handler(message.params) : handler();\n                                requestResult = handlerResult instanceof Promise ? await handlerResult : handlerResult;\n                                header[4 /* HeaderIndex.errno */] = requestResult.errno;\n                                break;\n                            case VariableResult.kind:\n                                handlerResult = message.params !== undefined ? handler(message.params) : handler();\n                                requestResult = handlerResult instanceof Promise ? await handlerResult : handlerResult;\n                                header[4 /* HeaderIndex.errno */] = requestResult.errno;\n                                if (requestResult.errno === 0) {\n                                    if (RequestResult.hasData(requestResult)) {\n                                        const data = requestResult.data;\n                                        const buffer = TypedArray.is(data)\n                                            ? data\n                                            : this.textEncoder.encode(JSON.stringify(data, undefined, 0));\n                                        header[7 /* HeaderIndex.resultByteLength */] = buffer.byteLength;\n                                        // We only need to keep a result which is greater than zero.\n                                        // If it is zero we can create an empty array on the other side.\n                                        if (buffer.byteLength > 0) {\n                                            this.requestResults.set(message.id, buffer);\n                                        }\n                                    }\n                                }\n                                break;\n                            default:\n                                const typedResult = TypedArrayResult.fromByteLength(resultKind, resultByteLength);\n                                const resultBuffer = typedResult.createResultArray(sharedArrayBuffer, resultOffset);\n                                handlerResult = message.params !== undefined ? handler(message.params, resultBuffer) : handler(resultBuffer);\n                                requestResult = handlerResult instanceof Promise ? await handlerResult : handlerResult;\n                                header[4 /* HeaderIndex.errno */] = requestResult.errno;\n                        }\n                    }\n                    else {\n                        header[4 /* HeaderIndex.errno */] = RPCErrno.NoHandlerFound;\n                    }\n                }\n            }\n            else {\n                header[4 /* HeaderIndex.errno */] = RPCErrno.InvalidMessageFormat;\n            }\n        }\n        catch (error) {\n            (0, ral_1.default)().console.error(error);\n            header[4 /* HeaderIndex.errno */] = RPCErrno.UnknownError;\n        }\n        const sync = new Int32Array(sharedArrayBuffer, 0, 1);\n        Atomics.store(sync, 0, 1);\n        Atomics.notify(sync, 0);\n    }\n    signalReady() {\n        const notification = { method: '$/ready' };\n        this.postMessage(notification);\n    }\n}\nexports.BaseServiceConnection = BaseServiceConnection;\n//# sourceMappingURL=connection.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { conditionalRegistration, requireGlobalConfiguration } from '../languageFeatures/util/dependentRegistration';\nimport { supportsReadableByteStreams } from '../utils/platform';\nimport { AutoInstallerFs } from './autoInstallerFs';\nimport { MemFs } from './memFs';\nimport { Logger } from '../logging/logger';\n\nexport function registerAtaSupport(logger: Logger): vscode.Disposable {\n\tif (!supportsReadableByteStreams()) {\n\t\treturn vscode.Disposable.from();\n\t}\n\n\treturn conditionalRegistration([\n\t\trequireGlobalConfiguration('typescript', 'tsserver.web.typeAcquisition.enabled'),\n\t], () => {\n\t\treturn vscode.Disposable.from(\n\t\t\t// Ata\n\t\t\tvscode.workspace.registerFileSystemProvider('vscode-global-typings', new MemFs('global-typings', logger), {\n\t\t\t\tisCaseSensitive: true,\n\t\t\t\tisReadonly: false,\n\t\t\t}),\n\n\t\t\t// Read accesses to node_modules\n\t\t\tvscode.workspace.registerFileSystemProvider('vscode-node-modules', new AutoInstallerFs(logger), {\n\t\t\t\tisCaseSensitive: true,\n\t\t\t\tisReadonly: false\n\t\t\t}));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { PackageManager, ResolvedProject } from '@vscode/ts-package-manager';\nimport { basename, join } from 'path';\nimport * as vscode from 'vscode';\nimport { URI } from 'vscode-uri';\nimport { Disposable } from '../utils/dispose';\nimport { MemFs } from './memFs';\nimport { Logger } from '../logging/logger';\n\nconst TEXT_DECODER = new TextDecoder('utf-8');\nconst TEXT_ENCODER = new TextEncoder();\n\nexport class AutoInstallerFs extends Disposable implements vscode.FileSystemProvider {\n\n\tprivate readonly memfs: MemFs;\n\tprivate readonly packageManager: PackageManager;\n\tprivate readonly _projectCache = new Map</* root */ string, Promise<void> | undefined>();\n\n\tprivate readonly _emitter = this._register(new vscode.EventEmitter<vscode.FileChangeEvent[]>());\n\treadonly onDidChangeFile = this._emitter.event;\n\n\tconstructor(\n\t\tprivate readonly logger: Logger\n\t) {\n\t\tsuper();\n\n\t\tconst memfs = new MemFs('auto-installer', logger);\n\t\tthis.memfs = memfs;\n\t\tmemfs.onDidChangeFile((e) => {\n\t\t\tthis._emitter.fire(e.map(ev => ({\n\t\t\t\ttype: ev.type,\n\t\t\t\t// TODO: we're gonna need a MappedUri dance...\n\t\t\t\turi: ev.uri.with({ scheme: 'memfs' })\n\t\t\t})));\n\t\t});\n\n\t\tthis.packageManager = new PackageManager({\n\t\t\treadDirectory(path: string, _extensions?: readonly string[], _exclude?: readonly string[], _include?: readonly string[], _depth?: number): string[] {\n\t\t\t\treturn memfs.readDirectory(URI.file(path)).map(([name, _]) => name);\n\t\t\t},\n\n\t\t\tdeleteFile(path: string): void {\n\t\t\t\tmemfs.delete(URI.file(path));\n\t\t\t},\n\n\t\t\tcreateDirectory(path: string): void {\n\t\t\t\tmemfs.createDirectory(URI.file(path));\n\t\t\t},\n\n\t\t\twriteFile(path: string, data: string, _writeByteOrderMark?: boolean): void {\n\t\t\t\tmemfs.writeFile(URI.file(path), TEXT_ENCODER.encode(data), { overwrite: true, create: true });\n\t\t\t},\n\n\t\t\tdirectoryExists(path: string): boolean {\n\t\t\t\ttry {\n\t\t\t\t\tconst stat = memfs.stat(URI.file(path));\n\t\t\t\t\treturn stat.type === vscode.FileType.Directory;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\treadFile(path: string, _encoding?: string): string | undefined {\n\t\t\t\ttry {\n\t\t\t\t\treturn TEXT_DECODER.decode(memfs.readFile(URI.file(path)));\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\twatch(resource: vscode.Uri): vscode.Disposable {\n\t\tthis.logger.trace(`AutoInstallerFs.watch. Resource: ${resource.toString()}}`);\n\t\treturn this.memfs.watch(resource);\n\t}\n\n\tasync stat(uri: vscode.Uri): Promise<vscode.FileStat> {\n\t\tthis.logger.trace(`AutoInstallerFs.stat: ${uri}`);\n\n\t\tconst mapped = new MappedUri(uri);\n\n\t\t// TODO: case sensitivity configuration\n\n\t\t// We pretend every single node_modules or @types directory ever actually\n\t\t// exists.\n\t\tif (basename(mapped.path) === 'node_modules' || basename(mapped.path) === '@types') {\n\t\t\treturn {\n\t\t\t\tmtime: 0,\n\t\t\t\tctime: 0,\n\t\t\t\ttype: vscode.FileType.Directory,\n\t\t\t\tsize: 0\n\t\t\t};\n\t\t}\n\n\t\tawait this.ensurePackageContents(mapped);\n\n\t\treturn this.memfs.stat(URI.file(mapped.path));\n\t}\n\n\tasync readDirectory(uri: vscode.Uri): Promise<[string, vscode.FileType][]> {\n\t\tthis.logger.trace(`AutoInstallerFs.readDirectory: ${uri}`);\n\n\t\tconst mapped = new MappedUri(uri);\n\t\tawait this.ensurePackageContents(mapped);\n\n\t\treturn this.memfs.readDirectory(URI.file(mapped.path));\n\t}\n\n\tasync readFile(uri: vscode.Uri): Promise<Uint8Array> {\n\t\tthis.logger.trace(`AutoInstallerFs.readFile: ${uri}`);\n\n\t\tconst mapped = new MappedUri(uri);\n\t\tawait this.ensurePackageContents(mapped);\n\n\t\treturn this.memfs.readFile(URI.file(mapped.path));\n\t}\n\n\twriteFile(_uri: vscode.Uri, _content: Uint8Array, _options: { create: boolean; overwrite: boolean }): void {\n\t\tthrow new Error('not implemented');\n\t}\n\n\trename(_oldUri: vscode.Uri, _newUri: vscode.Uri, _options: { overwrite: boolean }): void {\n\t\tthrow new Error('not implemented');\n\t}\n\n\tdelete(_uri: vscode.Uri): void {\n\t\tthrow new Error('not implemented');\n\t}\n\n\tcreateDirectory(_uri: vscode.Uri): void {\n\t\tthrow new Error('not implemented');\n\t}\n\n\tprivate async ensurePackageContents(incomingUri: MappedUri): Promise<void> {\n\t\t// If we're not looking for something inside node_modules, bail early.\n\t\tif (!incomingUri.path.includes('node_modules')) {\n\t\t\tthrow vscode.FileSystemError.FileNotFound();\n\t\t}\n\n\t\t// standard lib files aren't handled through here\n\t\tif (incomingUri.path.includes('node_modules/@typescript') || incomingUri.path.includes('node_modules/@types/typescript__')) {\n\t\t\tthrow vscode.FileSystemError.FileNotFound();\n\t\t}\n\n\t\tconst root = await this.getProjectRoot(incomingUri.original);\n\t\tif (!root) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.logger.trace(`AutoInstallerFs.ensurePackageContents. Path: ${incomingUri.path}, Root: ${root}`);\n\n\t\tconst existingInstall = this._projectCache.get(root);\n\t\tif (existingInstall) {\n\t\t\tthis.logger.trace(`AutoInstallerFs.ensurePackageContents. Found ongoing install for: ${root}/node_modules`);\n\t\t\treturn existingInstall;\n\t\t}\n\n\t\tconst installing = (async () => {\n\t\t\tlet proj: ResolvedProject;\n\t\t\ttry {\n\t\t\t\tproj = await this.packageManager.resolveProject(root, await this.getInstallOpts(incomingUri.original, root));\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(`failed to resolve project at ${incomingUri.path}: `, e);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait proj.restore();\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(`failed to restore package at ${incomingUri.path}: `, e);\n\t\t\t}\n\t\t})();\n\t\tthis._projectCache.set(root, installing);\n\t\tawait installing;\n\t}\n\n\tprivate async getInstallOpts(originalUri: URI, root: string) {\n\t\tconst vsfs = vscode.workspace.fs;\n\n\t\t// We definitely need a package.json to be there.\n\t\tconst pkgJson = TEXT_DECODER.decode(await vsfs.readFile(originalUri.with({ path: join(root, 'package.json') })));\n\n\t\tlet kdlLock;\n\t\ttry {\n\t\t\tkdlLock = TEXT_DECODER.decode(await vsfs.readFile(originalUri.with({ path: join(root, 'package-lock.kdl') })));\n\t\t} catch (e) { }\n\n\t\tlet npmLock;\n\t\ttry {\n\t\t\tnpmLock = TEXT_DECODER.decode(await vsfs.readFile(originalUri.with({ path: join(root, 'package-lock.json') })));\n\t\t} catch (e) { }\n\n\t\treturn {\n\t\t\tpkgJson,\n\t\t\tkdlLock,\n\t\t\tnpmLock\n\t\t};\n\t}\n\n\tprivate async getProjectRoot(incomingUri: URI): Promise<string | undefined> {\n\t\tconst vsfs = vscode.workspace.fs;\n\t\tconst pkgPath = incomingUri.path.match(/^(.*?)\\/node_modules/);\n\t\tconst ret = pkgPath?.[1];\n\t\tif (!ret) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tawait vsfs.stat(incomingUri.with({ path: join(ret, 'package.json') }));\n\t\t\treturn ret;\n\t\t} catch (e) {\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nclass MappedUri {\n\treadonly raw: vscode.Uri;\n\treadonly original: vscode.Uri;\n\treadonly mapped: vscode.Uri;\n\tconstructor(uri: vscode.Uri) {\n\t\tthis.raw = uri;\n\n\t\tconst parts = uri.path.match(/^\\/([^\\/]+)\\/([^\\/]*)(?:\\/(.+))?$/);\n\t\tif (!parts) {\n\t\t\tthrow new Error(`Invalid uri: ${uri.toString()}, ${uri.path}`);\n\t\t}\n\n\t\tconst scheme = parts[1];\n\t\tconst authority = parts[2] === 'ts-nul-authority' ? '' : parts[2];\n\t\tconst path = parts[3];\n\t\tthis.original = URI.from({ scheme, authority, path: (path ? '/' + path : path) });\n\t\tthis.mapped = this.original.with({ scheme: this.raw.scheme, authority: this.raw.authority });\n\t}\n\n\tget path() {\n\t\treturn this.mapped.path;\n\t}\n\tget scheme() {\n\t\treturn this.mapped.scheme;\n\t}\n\tget authority() {\n\t\treturn this.mapped.authority;\n\t}\n\tget flatPath() {\n\t\treturn join('/', this.scheme, this.authority, this.path);\n\t}\n}\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","'use strict'\n\n// A linked list to keep track of recently-used-ness\nconst Yallist = require('yallist')\n\nconst MAX = Symbol('max')\nconst LENGTH = Symbol('length')\nconst LENGTH_CALCULATOR = Symbol('lengthCalculator')\nconst ALLOW_STALE = Symbol('allowStale')\nconst MAX_AGE = Symbol('maxAge')\nconst DISPOSE = Symbol('dispose')\nconst NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet')\nconst LRU_LIST = Symbol('lruList')\nconst CACHE = Symbol('cache')\nconst UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet')\n\nconst naiveLength = () => 1\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nclass LRUCache {\n  constructor (options) {\n    if (typeof options === 'number')\n      options = { max: options }\n\n    if (!options)\n      options = {}\n\n    if (options.max && (typeof options.max !== 'number' || options.max < 0))\n      throw new TypeError('max must be a non-negative number')\n    // Kind of weird to have a default max of Infinity, but oh well.\n    const max = this[MAX] = options.max || Infinity\n\n    const lc = options.length || naiveLength\n    this[LENGTH_CALCULATOR] = (typeof lc !== 'function') ? naiveLength : lc\n    this[ALLOW_STALE] = options.stale || false\n    if (options.maxAge && typeof options.maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n    this[MAX_AGE] = options.maxAge || 0\n    this[DISPOSE] = options.dispose\n    this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n    this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false\n    this.reset()\n  }\n\n  // resize the cache when the max changes.\n  set max (mL) {\n    if (typeof mL !== 'number' || mL < 0)\n      throw new TypeError('max must be a non-negative number')\n\n    this[MAX] = mL || Infinity\n    trim(this)\n  }\n  get max () {\n    return this[MAX]\n  }\n\n  set allowStale (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  }\n  get allowStale () {\n    return this[ALLOW_STALE]\n  }\n\n  set maxAge (mA) {\n    if (typeof mA !== 'number')\n      throw new TypeError('maxAge must be a non-negative number')\n\n    this[MAX_AGE] = mA\n    trim(this)\n  }\n  get maxAge () {\n    return this[MAX_AGE]\n  }\n\n  // resize the cache when the lengthCalculator changes.\n  set lengthCalculator (lC) {\n    if (typeof lC !== 'function')\n      lC = naiveLength\n\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(hit => {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      })\n    }\n    trim(this)\n  }\n  get lengthCalculator () { return this[LENGTH_CALCULATOR] }\n\n  get length () { return this[LENGTH] }\n  get itemCount () { return this[LRU_LIST].length }\n\n  rforEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].tail; walker !== null;) {\n      const prev = walker.prev\n      forEachStep(this, fn, walker, thisp)\n      walker = prev\n    }\n  }\n\n  forEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].head; walker !== null;) {\n      const next = walker.next\n      forEachStep(this, fn, walker, thisp)\n      walker = next\n    }\n  }\n\n  keys () {\n    return this[LRU_LIST].toArray().map(k => k.key)\n  }\n\n  values () {\n    return this[LRU_LIST].toArray().map(k => k.value)\n  }\n\n  reset () {\n    if (this[DISPOSE] &&\n        this[LRU_LIST] &&\n        this[LRU_LIST].length) {\n      this[LRU_LIST].forEach(hit => this[DISPOSE](hit.key, hit.value))\n    }\n\n    this[CACHE] = new Map() // hash of items by key\n    this[LRU_LIST] = new Yallist() // list of items in order of use recency\n    this[LENGTH] = 0 // length of items in the list\n  }\n\n  dump () {\n    return this[LRU_LIST].map(hit =>\n      isStale(this, hit) ? false : {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }).toArray().filter(h => h)\n  }\n\n  dumpLru () {\n    return this[LRU_LIST]\n  }\n\n  set (key, value, maxAge) {\n    maxAge = maxAge || this[MAX_AGE]\n\n    if (maxAge && typeof maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n\n    const now = maxAge ? Date.now() : 0\n    const len = this[LENGTH_CALCULATOR](value, key)\n\n    if (this[CACHE].has(key)) {\n      if (len > this[MAX]) {\n        del(this, this[CACHE].get(key))\n        return false\n      }\n\n      const node = this[CACHE].get(key)\n      const item = node.value\n\n      // dispose of the old one before overwriting\n      // split out into 2 ifs for better coverage tracking\n      if (this[DISPOSE]) {\n        if (!this[NO_DISPOSE_ON_SET])\n          this[DISPOSE](key, item.value)\n      }\n\n      item.now = now\n      item.maxAge = maxAge\n      item.value = value\n      this[LENGTH] += len - item.length\n      item.length = len\n      this.get(key)\n      trim(this)\n      return true\n    }\n\n    const hit = new Entry(key, value, len, now, maxAge)\n\n    // oversized objects fall out of cache automatically.\n    if (hit.length > this[MAX]) {\n      if (this[DISPOSE])\n        this[DISPOSE](key, value)\n\n      return false\n    }\n\n    this[LENGTH] += hit.length\n    this[LRU_LIST].unshift(hit)\n    this[CACHE].set(key, this[LRU_LIST].head)\n    trim(this)\n    return true\n  }\n\n  has (key) {\n    if (!this[CACHE].has(key)) return false\n    const hit = this[CACHE].get(key).value\n    return !isStale(this, hit)\n  }\n\n  get (key) {\n    return get(this, key, true)\n  }\n\n  peek (key) {\n    return get(this, key, false)\n  }\n\n  pop () {\n    const node = this[LRU_LIST].tail\n    if (!node)\n      return null\n\n    del(this, node)\n    return node.value\n  }\n\n  del (key) {\n    del(this, this[CACHE].get(key))\n  }\n\n  load (arr) {\n    // reset the cache\n    this.reset()\n\n    const now = Date.now()\n    // A previous serialized cache has the most recent items first\n    for (let l = arr.length - 1; l >= 0; l--) {\n      const hit = arr[l]\n      const expiresAt = hit.e || 0\n      if (expiresAt === 0)\n        // the item was created without expiration in a non aged cache\n        this.set(hit.k, hit.v)\n      else {\n        const maxAge = expiresAt - now\n        // dont add already expired items\n        if (maxAge > 0) {\n          this.set(hit.k, hit.v, maxAge)\n        }\n      }\n    }\n  }\n\n  prune () {\n    this[CACHE].forEach((value, key) => get(this, key, false))\n  }\n}\n\nconst get = (self, key, doUse) => {\n  const node = self[CACHE].get(key)\n  if (node) {\n    const hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE])\n        return undefined\n    } else {\n      if (doUse) {\n        if (self[UPDATE_AGE_ON_GET])\n          node.value.now = Date.now()\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    return hit.value\n  }\n}\n\nconst isStale = (self, hit) => {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE]))\n    return false\n\n  const diff = Date.now() - hit.now\n  return hit.maxAge ? diff > hit.maxAge\n    : self[MAX_AGE] && (diff > self[MAX_AGE])\n}\n\nconst trim = self => {\n  if (self[LENGTH] > self[MAX]) {\n    for (let walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      const prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nconst del = (self, node) => {\n  if (node) {\n    const hit = node.value\n    if (self[DISPOSE])\n      self[DISPOSE](hit.key, hit.value)\n\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\nclass Entry {\n  constructor (key, value, length, now, maxAge) {\n    this.key = key\n    this.value = value\n    this.length = length\n    this.now = now\n    this.maxAge = maxAge || 0\n  }\n}\n\nconst forEachStep = (self, fn, node, thisp) => {\n  let hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE])\n      hit = undefined\n  }\n  if (hit)\n    fn.call(thisp, hit.value, hit.key, self)\n}\n\nmodule.exports = LRUCache\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Helpers for converting FROM vscode types TO ts types\n */\n\nimport * as vscode from 'vscode';\nimport type * as Proto from './tsServer/protocol/protocol';\nimport * as PConst from './tsServer/protocol/protocol.const';\nimport { ITypeScriptServiceClient } from './typescriptService';\n\nexport namespace Range {\n\texport const fromTextSpan = (span: Proto.TextSpan): vscode.Range =>\n\t\tfromLocations(span.start, span.end);\n\n\texport const toTextSpan = (range: vscode.Range): Proto.TextSpan => ({\n\t\tstart: Position.toLocation(range.start),\n\t\tend: Position.toLocation(range.end)\n\t});\n\n\texport const fromLocations = (start: Proto.Location, end: Proto.Location): vscode.Range =>\n\t\tnew vscode.Range(\n\t\t\tMath.max(0, start.line - 1), Math.max(start.offset - 1, 0),\n\t\t\tMath.max(0, end.line - 1), Math.max(0, end.offset - 1));\n\n\texport const toFileRange = (range: vscode.Range): Proto.FileRange => ({\n\t\tstartLine: range.start.line + 1,\n\t\tstartOffset: range.start.character + 1,\n\t\tendLine: range.end.line + 1,\n\t\tendOffset: range.end.character + 1\n\t});\n\n\texport const toFileRangeRequestArgs = (file: string, range: vscode.Range): Proto.FileRangeRequestArgs => ({\n\t\tfile,\n\t\t...toFileRange(range)\n\t});\n\n\texport const toFileRangesRequestArgs = (file: string, ranges: vscode.Range[]): Proto.FileRangesRequestArgs => ({\n\t\tfile,\n\t\tranges: ranges.map(toFileRange)\n\t});\n\n\texport const toFormattingRequestArgs = (file: string, range: vscode.Range): Proto.FormatRequestArgs => ({\n\t\tfile,\n\t\tline: range.start.line + 1,\n\t\toffset: range.start.character + 1,\n\t\tendLine: range.end.line + 1,\n\t\tendOffset: range.end.character + 1\n\t});\n}\n\nexport namespace Position {\n\texport const fromLocation = (tslocation: Proto.Location): vscode.Position =>\n\t\tnew vscode.Position(tslocation.line - 1, tslocation.offset - 1);\n\n\texport const toLocation = (vsPosition: vscode.Position): Proto.Location => ({\n\t\tline: vsPosition.line + 1,\n\t\toffset: vsPosition.character + 1,\n\t});\n\n\texport const toFileLocationRequestArgs = (file: string, position: vscode.Position): Proto.FileLocationRequestArgs => ({\n\t\tfile,\n\t\tline: position.line + 1,\n\t\toffset: position.character + 1,\n\t});\n}\n\nexport namespace Location {\n\texport const fromTextSpan = (resource: vscode.Uri, tsTextSpan: Proto.TextSpan): vscode.Location =>\n\t\tnew vscode.Location(resource, Range.fromTextSpan(tsTextSpan));\n}\n\nexport namespace TextEdit {\n\texport const fromCodeEdit = (edit: Proto.CodeEdit): vscode.TextEdit =>\n\t\tnew vscode.TextEdit(\n\t\t\tRange.fromTextSpan(edit),\n\t\t\tedit.newText);\n}\n\nexport namespace WorkspaceEdit {\n\texport function fromFileCodeEdits(\n\t\tclient: ITypeScriptServiceClient,\n\t\tedits: Iterable<Proto.FileCodeEdits>\n\t): vscode.WorkspaceEdit {\n\t\treturn withFileCodeEdits(new vscode.WorkspaceEdit(), client, edits);\n\t}\n\n\texport function withFileCodeEdits(\n\t\tworkspaceEdit: vscode.WorkspaceEdit,\n\t\tclient: ITypeScriptServiceClient,\n\t\tedits: Iterable<Proto.FileCodeEdits>\n\t): vscode.WorkspaceEdit {\n\t\tfor (const edit of edits) {\n\t\t\tconst resource = client.toResource(edit.fileName);\n\t\t\tfor (const textChange of edit.textChanges) {\n\t\t\t\tworkspaceEdit.replace(resource,\n\t\t\t\t\tRange.fromTextSpan(textChange),\n\t\t\t\t\ttextChange.newText);\n\t\t\t}\n\t\t}\n\n\t\treturn workspaceEdit;\n\t}\n}\n\nexport namespace SymbolKind {\n\texport function fromProtocolScriptElementKind(kind: Proto.ScriptElementKind) {\n\t\tswitch (kind) {\n\t\t\tcase PConst.Kind.module: return vscode.SymbolKind.Module;\n\t\t\tcase PConst.Kind.class: return vscode.SymbolKind.Class;\n\t\t\tcase PConst.Kind.enum: return vscode.SymbolKind.Enum;\n\t\t\tcase PConst.Kind.enumMember: return vscode.SymbolKind.EnumMember;\n\t\t\tcase PConst.Kind.interface: return vscode.SymbolKind.Interface;\n\t\t\tcase PConst.Kind.indexSignature: return vscode.SymbolKind.Method;\n\t\t\tcase PConst.Kind.callSignature: return vscode.SymbolKind.Method;\n\t\t\tcase PConst.Kind.method: return vscode.SymbolKind.Method;\n\t\t\tcase PConst.Kind.memberVariable: return vscode.SymbolKind.Property;\n\t\t\tcase PConst.Kind.memberGetAccessor: return vscode.SymbolKind.Property;\n\t\t\tcase PConst.Kind.memberSetAccessor: return vscode.SymbolKind.Property;\n\t\t\tcase PConst.Kind.variable: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.let: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.const: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.localVariable: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.alias: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.function: return vscode.SymbolKind.Function;\n\t\t\tcase PConst.Kind.localFunction: return vscode.SymbolKind.Function;\n\t\t\tcase PConst.Kind.constructSignature: return vscode.SymbolKind.Constructor;\n\t\t\tcase PConst.Kind.constructorImplementation: return vscode.SymbolKind.Constructor;\n\t\t\tcase PConst.Kind.typeParameter: return vscode.SymbolKind.TypeParameter;\n\t\t\tcase PConst.Kind.string: return vscode.SymbolKind.String;\n\t\t\tdefault: return vscode.SymbolKind.Variable;\n\t\t}\n\t}\n}\n\nexport namespace CompletionTriggerKind {\n\texport function toProtocolCompletionTriggerKind(kind: vscode.CompletionTriggerKind): Proto.CompletionTriggerKind {\n\t\tswitch (kind) {\n\t\t\tcase vscode.CompletionTriggerKind.Invoke: return 1;\n\t\t\tcase vscode.CompletionTriggerKind.TriggerCharacter: return 2;\n\t\t\tcase vscode.CompletionTriggerKind.TriggerForIncompleteCompletions: return 3;\n\t\t}\n\t}\n}\n\nexport namespace OrganizeImportsMode {\n\texport function toProtocolOrganizeImportsMode(mode: PConst.OrganizeImportsMode): Proto.OrganizeImportsMode {\n\t\tswitch (mode) {\n\t\t\tcase PConst.OrganizeImportsMode.All: return 'All' as Proto.OrganizeImportsMode.All;\n\t\t\tcase PConst.OrganizeImportsMode.SortAndCombine: return 'SortAndCombine' as Proto.OrganizeImportsMode.SortAndCombine;\n\t\t\tcase PConst.OrganizeImportsMode.RemoveUnused: return 'RemoveUnused' as Proto.OrganizeImportsMode.RemoveUnused;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as typeConverters from '../typeConverters';\nimport { ITypeScriptServiceClient } from '../typescriptService';\n\n\nexport default class TypeScriptDefinitionProviderBase {\n\tconstructor(\n\t\tprotected readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tprotected async getSymbolLocations(\n\t\tdefinitionType: 'definition' | 'implementation' | 'typeDefinition',\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.Location[] | undefined> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(file, position);\n\t\tconst response = await this.client.execute(definitionType, args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn response.body.map(location =>\n\t\t\ttypeConverters.Location.fromTextSpan(this.client.toResource(location.file), location));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nexport class RestartTsServerCommand implements Command {\n\tpublic readonly id = 'typescript.restartTsServer';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.serviceClient.restartTsServer(true);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from 'vscode';\n\nexport interface ITask<T> {\n\t(): T;\n}\n\nexport class Delayer<T> {\n\n\tpublic defaultDelay: number;\n\tprivate timeout: any; // Timer\n\tprivate completionPromise: Promise<T | undefined> | null;\n\tprivate onSuccess: ((value: T | PromiseLike<T> | undefined) => void) | null;\n\tprivate task: ITask<T> | null;\n\n\tconstructor(defaultDelay: number) {\n\t\tthis.defaultDelay = defaultDelay;\n\t\tthis.timeout = null;\n\t\tthis.completionPromise = null;\n\t\tthis.onSuccess = null;\n\t\tthis.task = null;\n\t}\n\n\tpublic trigger(task: ITask<T>, delay: number = this.defaultDelay): Promise<T | undefined> {\n\t\tthis.task = task;\n\t\tif (delay >= 0) {\n\t\t\tthis.cancelTimeout();\n\t\t}\n\n\t\tif (!this.completionPromise) {\n\t\t\tthis.completionPromise = new Promise<T | undefined>((resolve) => {\n\t\t\t\tthis.onSuccess = resolve;\n\t\t\t}).then(() => {\n\t\t\t\tthis.completionPromise = null;\n\t\t\t\tthis.onSuccess = null;\n\t\t\t\tconst result = this.task?.();\n\t\t\t\tthis.task = null;\n\t\t\t\treturn result;\n\t\t\t});\n\t\t}\n\n\t\tif (delay >= 0 || this.timeout === null) {\n\t\t\tthis.timeout = setTimeout(() => {\n\t\t\t\tthis.timeout = null;\n\t\t\t\tthis.onSuccess?.(undefined);\n\t\t\t}, delay >= 0 ? delay : this.defaultDelay);\n\t\t}\n\n\t\treturn this.completionPromise;\n\t}\n\n\tprivate cancelTimeout(): void {\n\t\tif (this.timeout !== null) {\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.timeout = null;\n\t\t}\n\t}\n}\n\nexport function setImmediate(callback: (...args: any[]) => void, ...args: any[]): Disposable {\n\tif (global.setImmediate) {\n\t\tconst handle = global.setImmediate(callback, ...args);\n\t\treturn { dispose: () => global.clearImmediate(handle) };\n\t} else {\n\t\tconst handle = setTimeout(callback, 0, ...args);\n\t\treturn { dispose: () => clearTimeout(handle) };\n\t}\n}\n\n\n/**\n * A helper to prevent accumulation of sequential async tasks.\n *\n * Imagine a mail man with the sole task of delivering letters. As soon as\n * a letter submitted for delivery, he drives to the destination, delivers it\n * and returns to his base. Imagine that during the trip, N more letters were submitted.\n * When the mail man returns, he picks those N letters and delivers them all in a\n * single trip. Even though N+1 submissions occurred, only 2 deliveries were made.\n *\n * The throttler implements this via the queue() method, by providing it a task\n * factory. Following the example:\n *\n * \t\tconst throttler = new Throttler();\n * \t\tconst letters = [];\n *\n * \t\tfunction deliver() {\n * \t\t\tconst lettersToDeliver = letters;\n * \t\t\tletters = [];\n * \t\t\treturn makeTheTrip(lettersToDeliver);\n * \t\t}\n *\n * \t\tfunction onLetterReceived(l) {\n * \t\t\tletters.push(l);\n * \t\t\tthrottler.queue(deliver);\n * \t\t}\n */\nexport class Throttler {\n\n\tprivate activePromise: Promise<any> | null;\n\tprivate queuedPromise: Promise<any> | null;\n\tprivate queuedPromiseFactory: ITask<Promise<any>> | null;\n\n\tprivate isDisposed = false;\n\n\tconstructor() {\n\t\tthis.activePromise = null;\n\t\tthis.queuedPromise = null;\n\t\tthis.queuedPromiseFactory = null;\n\t}\n\n\tqueue<T>(promiseFactory: ITask<Promise<T>>): Promise<T> {\n\t\tif (this.isDisposed) {\n\t\t\treturn Promise.reject(new Error('Throttler is disposed'));\n\t\t}\n\n\t\tif (this.activePromise) {\n\t\t\tthis.queuedPromiseFactory = promiseFactory;\n\n\t\t\tif (!this.queuedPromise) {\n\t\t\t\tconst onComplete = () => {\n\t\t\t\t\tthis.queuedPromise = null;\n\n\t\t\t\t\tif (this.isDisposed) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = this.queue(this.queuedPromiseFactory!);\n\t\t\t\t\tthis.queuedPromiseFactory = null;\n\n\t\t\t\t\treturn result;\n\t\t\t\t};\n\n\t\t\t\tthis.queuedPromise = new Promise(resolve => {\n\t\t\t\t\tthis.activePromise!.then(onComplete, onComplete).then(resolve);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.queuedPromise!.then(resolve, reject);\n\t\t\t});\n\t\t}\n\n\t\tthis.activePromise = promiseFactory();\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.activePromise!.then((result: T) => {\n\t\t\t\tthis.activePromise = null;\n\t\t\t\tresolve(result);\n\t\t\t}, (err: unknown) => {\n\t\t\t\tthis.activePromise = null;\n\t\t\t\treject(err);\n\t\t\t});\n\t\t});\n\t}\n\n\tdispose(): void {\n\t\tthis.isDisposed = true;\n\t}\n}\n\nexport function raceTimeout<T>(promise: Promise<T>, timeout: number, onTimeout?: () => void): Promise<T | undefined> {\n\tlet promiseResolve: ((value: T | undefined) => void) | undefined = undefined;\n\n\tconst timer = setTimeout(() => {\n\t\tpromiseResolve?.(undefined);\n\t\tonTimeout?.();\n\t}, timeout);\n\n\treturn Promise.race([\n\t\tpromise.finally(() => clearTimeout(timer)),\n\t\tnew Promise<T | undefined>(resolve => promiseResolve = resolve)\n\t]);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { API } from '../tsServer/api';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireMinVersion, requireSomeCapability } from './util/dependentRegistration';\n\nclass LinkedEditingSupport implements vscode.LinkedEditingRangeProvider {\n\n\tpublic static readonly minVersion = API.v510;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tasync provideLinkedEditingRanges(document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken): Promise<vscode.LinkedEditingRanges | undefined> {\n\t\tconst filepath = this.client.toOpenTsFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\tconst response = await this.client.execute('linkedEditingRange', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst wordPattern = response.body.wordPattern ? new RegExp(response.body.wordPattern) : undefined;\n\t\treturn new vscode.LinkedEditingRanges(response.body.ranges.map(range => typeConverters.Range.fromTextSpan(range)), wordPattern);\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient\n) {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, LinkedEditingSupport.minVersion),\n\t\trequireSomeCapability(client, ClientCapability.Syntax),\n\t], () => {\n\t\treturn vscode.languages.registerLinkedEditingRangeProvider(selector.syntax,\n\t\t\tnew LinkedEditingSupport(client));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport { Disposable } from '../utils/dispose';\nimport { Logger } from './logger';\n\ninterface RequestExecutionMetadata {\n\treadonly queuingStartTime: number;\n}\n\nexport default class Tracer extends Disposable {\n\n\tconstructor(\n\t\tprivate readonly logger: Logger\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic traceRequest(serverId: string, request: Proto.Request, responseExpected: boolean, queueLength: number): void {\n\t\tif (this.logger.logLevel === vscode.LogLevel.Trace) {\n\t\t\tthis.trace(serverId, `Sending request: ${request.command} (${request.seq}). Response expected: ${responseExpected ? 'yes' : 'no'}. Current queue length: ${queueLength}`, request.arguments);\n\t\t}\n\t}\n\n\tpublic traceResponse(serverId: string, response: Proto.Response, meta: RequestExecutionMetadata): void {\n\t\tif (this.logger.logLevel === vscode.LogLevel.Trace) {\n\t\t\tthis.trace(serverId, `Response received: ${response.command} (${response.request_seq}). Request took ${Date.now() - meta.queuingStartTime} ms. Success: ${response.success} ${!response.success ? '. Message: ' + response.message : ''}`, response.body);\n\t\t}\n\t}\n\n\tpublic traceRequestCompleted(serverId: string, command: string, request_seq: number, meta: RequestExecutionMetadata): any {\n\t\tif (this.logger.logLevel === vscode.LogLevel.Trace) {\n\t\t\tthis.trace(serverId, `Async response received: ${command} (${request_seq}). Request took ${Date.now() - meta.queuingStartTime} ms.`);\n\t\t}\n\t}\n\n\tpublic traceEvent(serverId: string, event: Proto.Event): void {\n\t\tif (this.logger.logLevel === vscode.LogLevel.Trace) {\n\t\t\tthis.trace(serverId, `Event received: ${event.event} (${event.seq}).`, event.body);\n\t\t}\n\t}\n\n\tpublic trace(serverId: string, message: string, data?: unknown): void {\n\t\tthis.logger.trace(`<${serverId}> ${message}`, ...(data ? [JSON.stringify(data, null, 4)] : []));\n\t}\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { arrForEach, dumpObj, isArray, isFunction, isNullOrUndefined, isUndefined, objForEachKey, objFreeze, objKeys } from \"@nevware21/ts-utils\";\r\nimport { _applyDefaultValue } from \"../Config/ConfigDefaults\";\r\nimport { createDynamicConfig } from \"../Config/DynamicConfig\";\r\nimport { _DYN_CREATE_NEW, _DYN_DIAG_LOG, _DYN_GET_NEXT, _DYN_GET_PLUGIN, _DYN_IDENTIFIER, _DYN_IS_ASYNC, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_LOGGER, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_SET_DF, _DYN_SET_NEXT_PLUGIN, _DYN_TEARDOWN, _DYN_UNLOAD, _DYN_UPDATE } from \"../__DynamicConstants\";\r\nimport { _throwInternal, safeGetLogger } from \"./DiagnosticLogger\";\r\nimport { proxyFunctions } from \"./HelperFuncs\";\r\nimport { STR_CORE, STR_DISABLED, STR_EMPTY, STR_EXTENSION_CONFIG, STR_PRIORITY, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { doPerf } from \"./PerfManager\";\r\nimport { _getPluginState } from \"./TelemetryHelpers\";\r\nvar strTelemetryPluginChain = \"TelemetryPluginChain\";\r\nvar strHasRunFlags = \"_hasRun\";\r\nvar strGetTelCtx = \"_getTelCtx\";\r\nvar _chainId = 0;\r\nfunction _getNextProxyStart(proxy, core, startAt) {\r\n    while (proxy) {\r\n        if (proxy[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]() === startAt) {\r\n            return proxy;\r\n        }\r\n        proxy = proxy[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n    }\r\n    // This wasn't found in the existing chain so create an isolated one with just this plugin\r\n    return createTelemetryProxyChain([startAt], core.config || {}, core);\r\n}\r\n/**\r\n * @ignore\r\n * @param telemetryChain\r\n * @param dynamicHandler\r\n * @param core\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n * @returns\r\n */\r\nfunction _createInternalContext(telemetryChain, dynamicHandler, core, startAt) {\r\n    // We have a special case where we want to start execution from this specific plugin\r\n    // or we simply reuse the existing telemetry plugin chain (normal execution case)\r\n    var _nextProxy = null; // By Default set as no next plugin\r\n    var _onComplete = [];\r\n    if (!dynamicHandler) {\r\n        dynamicHandler = createDynamicConfig({}, null, core[_DYN_LOGGER /* @min:%2elogger */]);\r\n    }\r\n    if (startAt !== null) {\r\n        // There is no next element (null) vs not defined (undefined) so use the full chain\r\n        _nextProxy = startAt ? _getNextProxyStart(telemetryChain, core, startAt) : telemetryChain;\r\n    }\r\n    var context = {\r\n        _next: _moveNext,\r\n        ctx: {\r\n            core: function () {\r\n                return core;\r\n            },\r\n            diagLog: function () {\r\n                return safeGetLogger(core, dynamicHandler.cfg);\r\n            },\r\n            getCfg: function () {\r\n                return dynamicHandler.cfg;\r\n            },\r\n            getExtCfg: _resolveExtCfg,\r\n            getConfig: _getConfig,\r\n            hasNext: function () {\r\n                return !!_nextProxy;\r\n            },\r\n            getNext: function () {\r\n                return _nextProxy;\r\n            },\r\n            setNext: function (nextPlugin) {\r\n                _nextProxy = nextPlugin;\r\n            },\r\n            iterate: _iterateChain,\r\n            onComplete: _addOnComplete\r\n        }\r\n    };\r\n    function _addOnComplete(onComplete, that) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (onComplete) {\r\n            _onComplete[_DYN_PUSH /* @min:%2epush */]({\r\n                func: onComplete,\r\n                self: !isUndefined(that) ? that : context.ctx,\r\n                args: args\r\n            });\r\n        }\r\n    }\r\n    function _moveNext() {\r\n        var nextProxy = _nextProxy;\r\n        // Automatically move to the next plugin\r\n        _nextProxy = nextProxy ? nextProxy[_DYN_GET_NEXT /* @min:%2egetNext */]() : null;\r\n        if (!nextProxy) {\r\n            var onComplete = _onComplete;\r\n            if (onComplete && onComplete[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                arrForEach(onComplete, function (completeDetails) {\r\n                    try {\r\n                        completeDetails.func.call(completeDetails.self, completeDetails.args);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(core[_DYN_LOGGER /* @min:%2elogger */], 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unexpected Exception during onComplete - \" + dumpObj(e));\r\n                    }\r\n                });\r\n                _onComplete = [];\r\n            }\r\n        }\r\n        return nextProxy;\r\n    }\r\n    function _getExtCfg(identifier, createIfMissing) {\r\n        var idCfg = null;\r\n        var cfg = dynamicHandler.cfg;\r\n        if (cfg && identifier) {\r\n            var extCfg = cfg[STR_EXTENSION_CONFIG /* @min:%2eextensionConfig */];\r\n            if (!extCfg && createIfMissing) {\r\n                extCfg = {};\r\n            }\r\n            // Always set the value so that the property always exists\r\n            cfg[STR_EXTENSION_CONFIG] = extCfg; // Note: it is valid for the \"value\" to be undefined\r\n            // Calling `ref()` has a side effect of causing the referenced property to become dynamic  (if not already)\r\n            extCfg = dynamicHandler.ref(cfg, STR_EXTENSION_CONFIG);\r\n            if (extCfg) {\r\n                idCfg = extCfg[identifier];\r\n                if (!idCfg && createIfMissing) {\r\n                    idCfg = {};\r\n                }\r\n                // Always set the value so that the property always exists\r\n                extCfg[identifier] = idCfg; // Note: it is valid for the \"value\" to be undefined\r\n                // Calling `ref()` has a side effect of causing the referenced property to become dynamic  (if not already)\r\n                idCfg = dynamicHandler.ref(extCfg, identifier);\r\n            }\r\n        }\r\n        return idCfg;\r\n    }\r\n    function _resolveExtCfg(identifier, defaultValues) {\r\n        var newConfig = _getExtCfg(identifier, true);\r\n        if (defaultValues) {\r\n            // Enumerate over the defaultValues and if not already populated attempt to\r\n            // find a value from the root config or use the default value\r\n            objForEachKey(defaultValues, function (field, defaultValue) {\r\n                // for each unspecified field, set the default value\r\n                if (isNullOrUndefined(newConfig[field])) {\r\n                    var cfgValue = dynamicHandler.cfg[field];\r\n                    if (cfgValue || !isNullOrUndefined(cfgValue)) {\r\n                        newConfig[field] = cfgValue;\r\n                    }\r\n                }\r\n                _applyDefaultValue(dynamicHandler, newConfig, field, defaultValue);\r\n            });\r\n        }\r\n        return dynamicHandler[_DYN_SET_DF /* @min:%2esetDf */](newConfig, defaultValues);\r\n    }\r\n    function _getConfig(identifier, field, defaultValue) {\r\n        if (defaultValue === void 0) { defaultValue = false; }\r\n        var theValue;\r\n        var extConfig = _getExtCfg(identifier, false);\r\n        var rootConfig = dynamicHandler.cfg;\r\n        if (extConfig && (extConfig[field] || !isNullOrUndefined(extConfig[field]))) {\r\n            theValue = extConfig[field];\r\n        }\r\n        else if (rootConfig[field] || !isNullOrUndefined(rootConfig[field])) {\r\n            theValue = rootConfig[field];\r\n        }\r\n        return (theValue || !isNullOrUndefined(theValue)) ? theValue : defaultValue;\r\n    }\r\n    function _iterateChain(cb) {\r\n        // Keep processing until we reach the end of the chain\r\n        var nextPlugin;\r\n        while (!!(nextPlugin = context._next())) {\r\n            var plugin = nextPlugin[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]();\r\n            if (plugin) {\r\n                // callback with the current on\r\n                cb(plugin);\r\n            }\r\n        }\r\n    }\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryContext(telemetryChain, cfg, core, startAt) {\r\n    var config = createDynamicConfig(cfg);\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(env) {\r\n        var nextPlugin = internalContext._next();\r\n        if (nextPlugin) {\r\n            // Run the next plugin which will call \"processNext()\"\r\n            nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, context);\r\n        }\r\n        return !nextPlugin;\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config.cfg, core, startAt);\r\n        }\r\n        return createProcessTelemetryContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), config.cfg, core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain for handling the unloading of the chain\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryUnloadContext(telemetryChain, core, startAt) {\r\n    var config = createDynamicConfig(core.config);\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(unloadState) {\r\n        var nextPlugin = internalContext._next();\r\n        nextPlugin && nextPlugin[_DYN_UNLOAD /* @min:%2eunload */](context, unloadState);\r\n        return !nextPlugin;\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config.cfg, core, startAt);\r\n        }\r\n        return createProcessTelemetryUnloadContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain for updating the configuration\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryUpdateContext(telemetryChain, core, startAt) {\r\n    var config = createDynamicConfig(core.config);\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(updateState) {\r\n        return context.iterate(function (plugin) {\r\n            if (isFunction(plugin[_DYN_UPDATE /* @min:%2eupdate */])) {\r\n                plugin[_DYN_UPDATE /* @min:%2eupdate */](context, updateState);\r\n            }\r\n        });\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config.cfg, core, startAt);\r\n        }\r\n        return createProcessTelemetryUpdateContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates an execution chain from the array of plugins\r\n * @param plugins - The array of plugins that will be executed in this order\r\n * @param defItemCtx - The default execution context to use when no telemetry context is passed to processTelemetry(), this\r\n * should be for legacy plugins only. Currently, only used for passing the current core instance and to provide better error\r\n * reporting (hasRun) when errors occur.\r\n */\r\nexport function createTelemetryProxyChain(plugins, config, core, startAt) {\r\n    var firstProxy = null;\r\n    var add = startAt ? false : true;\r\n    if (isArray(plugins) && plugins[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        // Create the proxies and wire up the next plugin chain\r\n        var lastProxy_1 = null;\r\n        arrForEach(plugins, function (thePlugin) {\r\n            if (!add && startAt === thePlugin) {\r\n                add = true;\r\n            }\r\n            if (add && thePlugin && isFunction(thePlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */])) {\r\n                // Only add plugins that are processors\r\n                var newProxy = createTelemetryPluginProxy(thePlugin, config, core);\r\n                if (!firstProxy) {\r\n                    firstProxy = newProxy;\r\n                }\r\n                if (lastProxy_1) {\r\n                    // Set this new proxy as the next for the previous one\r\n                    lastProxy_1._setNext(newProxy);\r\n                }\r\n                lastProxy_1 = newProxy;\r\n            }\r\n        });\r\n    }\r\n    if (startAt && !firstProxy) {\r\n        // Special case where the \"startAt\" was not in the original list of plugins\r\n        return createTelemetryProxyChain([startAt], config, core);\r\n    }\r\n    return firstProxy;\r\n}\r\n/**\r\n * Create the processing telemetry proxy instance, the proxy is used to abstract the current plugin to allow monitoring and\r\n * execution plugins while passing around the dynamic execution state (IProcessTelemetryContext), the proxy instance no longer\r\n * contains any execution state and can be reused between requests (this was not the case for 2.7.2 and earlier with the\r\n * TelemetryPluginChain class).\r\n * @param plugin - The plugin instance to proxy\r\n * @param config - The default execution context to use when no telemetry context is passed to processTelemetry(), this\r\n * should be for legacy plugins only. Currently, only used for passing the current core instance and to provide better error\r\n * reporting (hasRun) when errors occur.\r\n * @returns\r\n */\r\nexport function createTelemetryPluginProxy(plugin, config, core) {\r\n    var nextProxy = null;\r\n    var hasProcessTelemetry = isFunction(plugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */]);\r\n    var hasSetNext = isFunction(plugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */]);\r\n    var chainId;\r\n    if (plugin) {\r\n        chainId = plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"-\" + plugin[STR_PRIORITY /* @min:%2epriority */] + \"-\" + _chainId++;\r\n    }\r\n    else {\r\n        chainId = \"Unknown-0-\" + _chainId++;\r\n    }\r\n    var proxyChain = {\r\n        getPlugin: function () {\r\n            return plugin;\r\n        },\r\n        getNext: function () {\r\n            return nextProxy;\r\n        },\r\n        processTelemetry: _processTelemetry,\r\n        unload: _unloadPlugin,\r\n        update: _updatePlugin,\r\n        _id: chainId,\r\n        _setNext: function (nextPlugin) {\r\n            nextProxy = nextPlugin;\r\n        }\r\n    };\r\n    function _getTelCtx() {\r\n        var itemCtx;\r\n        // Looks like a plugin didn't pass the (optional) context, so create a new one\r\n        if (plugin && isFunction(plugin[strGetTelCtx])) {\r\n            // This plugin extends from the BaseTelemetryPlugin so lets use it\r\n            itemCtx = plugin[strGetTelCtx]();\r\n        }\r\n        if (!itemCtx) {\r\n            // Create a temporary one\r\n            itemCtx = createProcessTelemetryContext(proxyChain, config, core);\r\n        }\r\n        return itemCtx;\r\n    }\r\n    function _processChain(itemCtx, processPluginFn, name, details, isAsync) {\r\n        var hasRun = false;\r\n        var identifier = plugin ? plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] : strTelemetryPluginChain;\r\n        var hasRunContext = itemCtx[strHasRunFlags];\r\n        if (!hasRunContext) {\r\n            // Assign and populate\r\n            hasRunContext = itemCtx[strHasRunFlags] = {};\r\n        }\r\n        // Ensure that we keep the context in sync\r\n        itemCtx.setNext(nextProxy);\r\n        if (plugin) {\r\n            doPerf(itemCtx[STR_CORE /* @min:%2ecore */](), function () { return identifier + \":\" + name; }, function () {\r\n                // Mark this component as having run\r\n                hasRunContext[chainId] = true;\r\n                try {\r\n                    // Set a flag on the next plugin so we know if it was attempted to be executed\r\n                    var nextId = nextProxy ? nextProxy._id : STR_EMPTY;\r\n                    if (nextId) {\r\n                        hasRunContext[nextId] = false;\r\n                    }\r\n                    hasRun = processPluginFn(itemCtx);\r\n                }\r\n                catch (error) {\r\n                    var hasNextRun = nextProxy ? hasRunContext[nextProxy._id] : true;\r\n                    if (hasNextRun) {\r\n                        // The next plugin after us has already run so set this one as complete\r\n                        hasRun = true;\r\n                    }\r\n                    if (!nextProxy || !hasNextRun) {\r\n                        // Either we have no next plugin or the current one did not attempt to call the next plugin\r\n                        // Which means the current one is the root of the failure so log/report this failure\r\n                        _throwInternal(itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 73 /* _eInternalMessageId.PluginException */, \"Plugin [\" + identifier + \"] failed during \" + name + \" - \" + dumpObj(error) + \", run flags: \" + dumpObj(hasRunContext));\r\n                    }\r\n                }\r\n            }, details, isAsync);\r\n        }\r\n        return hasRun;\r\n    }\r\n    function _processTelemetry(env, itemCtx) {\r\n        itemCtx = itemCtx || _getTelCtx();\r\n        function _callProcessTelemetry(itemCtx) {\r\n            if (!plugin || !hasProcessTelemetry) {\r\n                return false;\r\n            }\r\n            var pluginState = _getPluginState(plugin);\r\n            if (pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] || pluginState[STR_DISABLED]) {\r\n                return false;\r\n            }\r\n            // Ensure that we keep the context in sync (for processNext()), just in case a plugin\r\n            // doesn't calls processTelemetry() instead of itemContext.processNext() or some\r\n            // other form of error occurred\r\n            if (hasSetNext) {\r\n                // Backward compatibility setting the next plugin on the instance\r\n                plugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */](nextProxy);\r\n            }\r\n            plugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, itemCtx);\r\n            // Process Telemetry is expected to call itemCtx.processNext() or nextPlugin.processTelemetry()\r\n            return true;\r\n        }\r\n        if (!_processChain(itemCtx, _callProcessTelemetry, \"processTelemetry\", function () { return ({ item: env }); }, !(env.sync))) {\r\n            // The underlying plugin is either not defined, not enabled or does not have a processTelemetry implementation\r\n            // so we still want the next plugin to be executed.\r\n            itemCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](env);\r\n        }\r\n    }\r\n    function _unloadPlugin(unloadCtx, unloadState) {\r\n        function _callTeardown() {\r\n            // Setting default of hasRun as false so the proxyProcessFn() is called as teardown() doesn't have to exist or call unloadNext().\r\n            var hasRun = false;\r\n            if (plugin) {\r\n                var pluginState = _getPluginState(plugin);\r\n                var pluginCore = plugin[STR_CORE] || pluginState[STR_CORE /* @min:%2ecore */];\r\n                // Only teardown the plugin if it was initialized by the current core (i.e. It's not a shared plugin)\r\n                if (plugin && (!pluginCore || pluginCore === unloadCtx.core()) && !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */]) {\r\n                    // Handle plugins that don't extend from the BaseTelemetryPlugin\r\n                    pluginState[STR_CORE /* @min:%2ecore */] = null;\r\n                    pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] = true;\r\n                    pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = false;\r\n                    if (plugin[_DYN_TEARDOWN /* @min:%2eteardown */] && plugin[_DYN_TEARDOWN /* @min:%2eteardown */](unloadCtx, unloadState) === true) {\r\n                        // plugin told us that it was going to (or has) call unloadCtx.processNext()\r\n                        hasRun = true;\r\n                    }\r\n                }\r\n            }\r\n            return hasRun;\r\n        }\r\n        if (!_processChain(unloadCtx, _callTeardown, \"unload\", function () { }, unloadState[_DYN_IS_ASYNC /* @min:%2eisAsync */])) {\r\n            // Only called if we hasRun was not true\r\n            unloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n        }\r\n    }\r\n    function _updatePlugin(updateCtx, updateState) {\r\n        function _callUpdate() {\r\n            // Setting default of hasRun as false so the proxyProcessFn() is called as teardown() doesn't have to exist or call unloadNext().\r\n            var hasRun = false;\r\n            if (plugin) {\r\n                var pluginState = _getPluginState(plugin);\r\n                var pluginCore = plugin[STR_CORE] || pluginState[STR_CORE /* @min:%2ecore */];\r\n                // Only update the plugin if it was initialized by the current core (i.e. It's not a shared plugin)\r\n                if (plugin && (!pluginCore || pluginCore === updateCtx.core()) && !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */]) {\r\n                    if (plugin[_DYN_UPDATE /* @min:%2eupdate */] && plugin[_DYN_UPDATE /* @min:%2eupdate */](updateCtx, updateState) === true) {\r\n                        // plugin told us that it was going to (or has) call unloadCtx.processNext()\r\n                        hasRun = true;\r\n                    }\r\n                }\r\n            }\r\n            return hasRun;\r\n        }\r\n        if (!_processChain(updateCtx, _callUpdate, \"update\", function () { }, false)) {\r\n            // Only called if we hasRun was not true\r\n            updateCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](updateState);\r\n        }\r\n    }\r\n    return objFreeze(proxyChain);\r\n}\r\n/**\r\n * This class will be removed!\r\n * @deprecated use createProcessTelemetryContext() instead\r\n */\r\nvar ProcessTelemetryContext = /** @class */ (function () {\r\n    /**\r\n     * Creates a new Telemetry Item context with the current config, core and plugin execution chain\r\n     * @param plugins - The plugin instances that will be executed\r\n     * @param config - The current config\r\n     * @param core - The current core instance\r\n     */\r\n    function ProcessTelemetryContext(pluginChain, config, core, startAt) {\r\n        var _self = this;\r\n        var context = createProcessTelemetryContext(pluginChain, config, core, startAt);\r\n        // Proxy all functions of the context to this object\r\n        proxyFunctions(_self, context, objKeys(context));\r\n    }\r\n    return ProcessTelemetryContext;\r\n}());\r\nexport { ProcessTelemetryContext };\r\n//# sourceMappingURL=ProcessTelemetryContext.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { TypeScriptServiceConfiguration } from './configuration/configuration';\nimport { API } from './tsServer/api';\nimport type * as Proto from './tsServer/protocol/protocol';\nimport { ITypeScriptServiceClient, ServerResponse } from './typescriptService';\nimport { nulToken } from './utils/cancellation';\n\n\nexport const enum ProjectType {\n\tTypeScript,\n\tJavaScript,\n}\n\nexport function isImplicitProjectConfigFile(configFileName: string) {\n\treturn configFileName.startsWith('/dev/null/');\n}\n\nexport function inferredProjectCompilerOptions(\n\tversion: API,\n\tprojectType: ProjectType,\n\tserviceConfig: TypeScriptServiceConfiguration,\n): Proto.ExternalProjectCompilerOptions {\n\tconst projectConfig: Proto.ExternalProjectCompilerOptions = {\n\t\tmodule: (version.gte(API.v540) ? 'Preserve' : 'ESNext') as Proto.ModuleKind,\n\t\tmoduleResolution: (version.gte(API.v540) ? 'Bundler' : 'Node') as Proto.ModuleResolutionKind,\n\t\ttarget: 'ES2022' as Proto.ScriptTarget,\n\t\tjsx: 'react-jsx' as Proto.JsxEmit,\n\t};\n\n\tif (version.gte(API.v500)) {\n\t\tprojectConfig.allowImportingTsExtensions = true;\n\t}\n\n\tif (serviceConfig.implicitProjectConfiguration.checkJs) {\n\t\tprojectConfig.checkJs = true;\n\t\tif (projectType === ProjectType.TypeScript) {\n\t\t\tprojectConfig.allowJs = true;\n\t\t}\n\t}\n\n\tif (serviceConfig.implicitProjectConfiguration.experimentalDecorators) {\n\t\tprojectConfig.experimentalDecorators = true;\n\t}\n\n\tif (serviceConfig.implicitProjectConfiguration.strictNullChecks) {\n\t\tprojectConfig.strictNullChecks = true;\n\t}\n\n\tif (serviceConfig.implicitProjectConfiguration.strictFunctionTypes) {\n\t\tprojectConfig.strictFunctionTypes = true;\n\t}\n\n\tif (serviceConfig.implicitProjectConfiguration.strict) {\n\t\tprojectConfig.strict = true;\n\t}\n\n\tif (serviceConfig.implicitProjectConfiguration.module) {\n\t\tprojectConfig.module = serviceConfig.implicitProjectConfiguration.module as Proto.ModuleKind;\n\t}\n\n\tif (serviceConfig.implicitProjectConfiguration.target) {\n\t\tprojectConfig.target = serviceConfig.implicitProjectConfiguration.target as Proto.ScriptTarget;\n\t}\n\n\tif (projectType === ProjectType.TypeScript) {\n\t\tprojectConfig.sourceMap = true;\n\t}\n\n\treturn projectConfig;\n}\n\nfunction inferredProjectConfigSnippet(\n\tversion: API,\n\tprojectType: ProjectType,\n\tconfig: TypeScriptServiceConfiguration\n) {\n\tconst baseConfig = inferredProjectCompilerOptions(version, projectType, config);\n\tif (projectType === ProjectType.TypeScript) {\n\t\tdelete baseConfig.allowImportingTsExtensions;\n\t}\n\n\tconst compilerOptions = Object.keys(baseConfig).map(key => `\"${key}\": ${JSON.stringify(baseConfig[key])}`);\n\treturn new vscode.SnippetString(`{\n\t\"compilerOptions\": {\n\t\t${compilerOptions.join(',\\n\\t\\t')}$0\n\t},\n\t\"exclude\": [\n\t\t\"node_modules\",\n\t\t\"**/node_modules/*\"\n\t]\n}`);\n}\n\nexport async function openOrCreateConfig(\n\tversion: API,\n\tprojectType: ProjectType,\n\trootPath: vscode.Uri,\n\tconfiguration: TypeScriptServiceConfiguration,\n): Promise<vscode.TextEditor | null> {\n\tconst configFile = vscode.Uri.joinPath(rootPath, projectType === ProjectType.TypeScript ? 'tsconfig.json' : 'jsconfig.json');\n\tconst col = vscode.window.activeTextEditor?.viewColumn;\n\ttry {\n\t\tconst doc = await vscode.workspace.openTextDocument(configFile);\n\t\treturn vscode.window.showTextDocument(doc, col);\n\t} catch {\n\t\tconst doc = await vscode.workspace.openTextDocument(configFile.with({ scheme: 'untitled' }));\n\t\tconst editor = await vscode.window.showTextDocument(doc, col);\n\t\tif (editor.document.getText().length === 0) {\n\t\t\tawait editor.insertSnippet(inferredProjectConfigSnippet(version, projectType, configuration));\n\t\t}\n\t\treturn editor;\n\t}\n}\n\nexport async function openProjectConfigOrPromptToCreate(\n\tprojectType: ProjectType,\n\tclient: ITypeScriptServiceClient,\n\trootPath: vscode.Uri,\n\tconfigFilePath: string,\n): Promise<void> {\n\tif (!isImplicitProjectConfigFile(configFilePath)) {\n\t\tconst doc = await vscode.workspace.openTextDocument(client.toResource(configFilePath));\n\t\tvscode.window.showTextDocument(doc, vscode.window.activeTextEditor?.viewColumn);\n\t\treturn;\n\t}\n\n\tconst CreateConfigItem: vscode.MessageItem = {\n\t\ttitle: projectType === ProjectType.TypeScript\n\t\t\t? vscode.l10n.t(\"Configure tsconfig.json\")\n\t\t\t: vscode.l10n.t(\"Configure jsconfig.json\"),\n\t};\n\n\tconst selected = await vscode.window.showInformationMessage(\n\t\t(projectType === ProjectType.TypeScript\n\t\t\t? vscode.l10n.t(\"File is not part of a TypeScript project. View the [tsconfig.json documentation]({0}) to learn more.\", 'https://go.microsoft.com/fwlink/?linkid=841896')\n\t\t\t: vscode.l10n.t(\"File is not part of a JavaScript project. View the [jsconfig.json documentation]({0}) to learn more.\", 'https://go.microsoft.com/fwlink/?linkid=759670')\n\t\t),\n\t\tCreateConfigItem);\n\n\tswitch (selected) {\n\t\tcase CreateConfigItem:\n\t\t\topenOrCreateConfig(client.apiVersion, projectType, rootPath, client.configuration);\n\t\t\treturn;\n\t}\n}\n\nexport async function openProjectConfigForFile(\n\tprojectType: ProjectType,\n\tclient: ITypeScriptServiceClient,\n\tresource: vscode.Uri,\n): Promise<void> {\n\tconst rootPath = client.getWorkspaceRootForResource(resource);\n\tif (!rootPath) {\n\t\tvscode.window.showInformationMessage(\n\t\t\tvscode.l10n.t(\"Please open a folder in VS Code to use a TypeScript or JavaScript project\"));\n\t\treturn;\n\t}\n\n\tconst file = client.toTsFilePath(resource);\n\t// TSServer errors when 'projectInfo' is invoked on a non js/ts file\n\tif (!file || !client.toTsFilePath(resource)) {\n\t\tvscode.window.showWarningMessage(\n\t\t\tvscode.l10n.t(\"Could not determine TypeScript or JavaScript project. Unsupported file type\"));\n\t\treturn;\n\t}\n\n\tlet res: ServerResponse.Response<Proto.ProjectInfoResponse> | undefined;\n\ttry {\n\t\tres = await client.execute('projectInfo', { file, needFileNameList: false }, nulToken);\n\t} catch {\n\t\t// noop\n\t}\n\n\tif (res?.type !== 'response' || !res.body) {\n\t\tvscode.window.showWarningMessage(vscode.l10n.t(\"Could not determine TypeScript or JavaScript project\"));\n\t\treturn;\n\t}\n\treturn openProjectConfigOrPromptToCreate(projectType, client, rootPath, res.body.configFileName);\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as fileSchemes from '../configuration/fileSchemes';\nimport { doesResourceLookLikeAJavaScriptFile, doesResourceLookLikeATypeScriptFile } from '../configuration/languageDescription';\nimport { API } from '../tsServer/api';\nimport { parseKindModifier } from '../tsServer/protocol/modifiers';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as PConst from '../tsServer/protocol/protocol.const';\nimport * as typeConverters from '../typeConverters';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { coalesce } from '../utils/arrays';\n\nfunction getSymbolKind(item: Proto.NavtoItem): vscode.SymbolKind {\n\tswitch (item.kind) {\n\t\tcase PConst.Kind.method: return vscode.SymbolKind.Method;\n\t\tcase PConst.Kind.enum: return vscode.SymbolKind.Enum;\n\t\tcase PConst.Kind.enumMember: return vscode.SymbolKind.EnumMember;\n\t\tcase PConst.Kind.function: return vscode.SymbolKind.Function;\n\t\tcase PConst.Kind.class: return vscode.SymbolKind.Class;\n\t\tcase PConst.Kind.interface: return vscode.SymbolKind.Interface;\n\t\tcase PConst.Kind.type: return vscode.SymbolKind.Class;\n\t\tcase PConst.Kind.memberVariable: return vscode.SymbolKind.Field;\n\t\tcase PConst.Kind.memberGetAccessor: return vscode.SymbolKind.Field;\n\t\tcase PConst.Kind.memberSetAccessor: return vscode.SymbolKind.Field;\n\t\tcase PConst.Kind.variable: return vscode.SymbolKind.Variable;\n\t\tdefault: return vscode.SymbolKind.Variable;\n\t}\n}\n\nclass TypeScriptWorkspaceSymbolProvider implements vscode.WorkspaceSymbolProvider {\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly modeIds: readonly string[],\n\t) { }\n\n\tpublic async provideWorkspaceSymbols(\n\t\tsearch: string,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.SymbolInformation[]> {\n\t\tlet file: string | undefined;\n\t\tif (this.searchAllOpenProjects) {\n\t\t\tfile = undefined;\n\t\t} else {\n\t\t\tconst document = this.getDocument();\n\t\t\tfile = document ? await this.toOpenedFiledPath(document) : undefined;\n\n\t\t\tif (!file && this.client.apiVersion.lt(API.v390)) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\tconst args: Proto.NavtoRequestArgs = {\n\t\t\tfile,\n\t\t\tsearchValue: search,\n\t\t\tmaxResultCount: 256,\n\t\t};\n\n\t\tconst response = await this.client.execute('navto', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn coalesce(response.body.map(item => this.toSymbolInformation(item)));\n\t}\n\n\tprivate get searchAllOpenProjects() {\n\t\treturn this.client.apiVersion.gte(API.v390)\n\t\t\t&& vscode.workspace.getConfiguration('typescript').get('workspaceSymbols.scope', 'allOpenProjects') === 'allOpenProjects';\n\t}\n\n\tprivate async toOpenedFiledPath(document: vscode.TextDocument) {\n\t\tif (document.uri.scheme === fileSchemes.git) {\n\t\t\ttry {\n\t\t\t\tconst path = vscode.Uri.file(JSON.parse(document.uri.query)?.path);\n\t\t\t\tif (doesResourceLookLikeATypeScriptFile(path) || doesResourceLookLikeAJavaScriptFile(path)) {\n\t\t\t\t\tconst document = await vscode.workspace.openTextDocument(path);\n\t\t\t\t\treturn this.client.toOpenTsFilePath(document);\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\t// noop\n\t\t\t}\n\t\t}\n\t\treturn this.client.toOpenTsFilePath(document);\n\t}\n\n\tprivate toSymbolInformation(item: Proto.NavtoItem): vscode.SymbolInformation | undefined {\n\t\tif (item.kind === 'alias' && !item.containerName) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst uri = this.client.toResource(item.file);\n\t\tif (fileSchemes.isOfScheme(uri, fileSchemes.chatCodeBlock)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst label = TypeScriptWorkspaceSymbolProvider.getLabel(item);\n\t\tconst info = new vscode.SymbolInformation(\n\t\t\tlabel,\n\t\t\tgetSymbolKind(item),\n\t\t\titem.containerName || '',\n\t\t\ttypeConverters.Location.fromTextSpan(uri, item));\n\t\tconst kindModifiers = item.kindModifiers ? parseKindModifier(item.kindModifiers) : undefined;\n\t\tif (kindModifiers?.has(PConst.KindModifiers.deprecated)) {\n\t\t\tinfo.tags = [vscode.SymbolTag.Deprecated];\n\t\t}\n\t\treturn info;\n\t}\n\n\tprivate static getLabel(item: Proto.NavtoItem) {\n\t\tconst label = item.name;\n\t\tif (item.kind === 'method' || item.kind === 'function') {\n\t\t\treturn label + '()';\n\t\t}\n\t\treturn label;\n\t}\n\n\tprivate getDocument(): vscode.TextDocument | undefined {\n\t\t// typescript wants to have a resource even when asking\n\t\t// general questions so we check the active editor. If this\n\t\t// doesn't match we take the first TS document.\n\n\t\tconst activeDocument = vscode.window.activeTextEditor?.document;\n\t\tif (activeDocument) {\n\t\t\tif (this.modeIds.includes(activeDocument.languageId)) {\n\t\t\t\treturn activeDocument;\n\t\t\t}\n\t\t}\n\n\t\tconst documents = vscode.workspace.textDocuments;\n\t\tfor (const document of documents) {\n\t\t\tif (this.modeIds.includes(document.languageId)) {\n\t\t\t\treturn document;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport function register(\n\tclient: ITypeScriptServiceClient,\n\tmodeIds: readonly string[],\n) {\n\treturn vscode.languages.registerWorkspaceSymbolProvider(\n\t\tnew TypeScriptWorkspaceSymbolProvider(client, modeIds));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { CommandManager } from './commands/commandManager';\nimport { IExperimentationTelemetryReporter } from './experimentTelemetryReporter';\nimport { OngoingRequestCancellerFactory } from './tsServer/cancellation';\nimport { ILogDirectoryProvider } from './tsServer/logDirectoryProvider';\nimport { TsServerProcessFactory } from './tsServer/server';\nimport { ITypeScriptVersionProvider } from './tsServer/versionProvider';\nimport TypeScriptServiceClientHost from './typeScriptServiceClientHost';\nimport { ActiveJsTsEditorTracker } from './ui/activeJsTsEditorTracker';\nimport ManagedFileContextManager from './ui/managedFileContext';\nimport { ServiceConfigurationProvider } from './configuration/configuration';\nimport * as fileSchemes from './configuration/fileSchemes';\nimport { standardLanguageDescriptions, isJsConfigOrTsConfigFileName } from './configuration/languageDescription';\nimport { Lazy } from './utils/lazy';\nimport { Logger } from './logging/logger';\nimport { PluginManager } from './tsServer/plugins';\n\nexport function createLazyClientHost(\n\tcontext: vscode.ExtensionContext,\n\tonCaseInsensitiveFileSystem: boolean,\n\tservices: {\n\t\tpluginManager: PluginManager;\n\t\tcommandManager: CommandManager;\n\t\tlogDirectoryProvider: ILogDirectoryProvider;\n\t\tcancellerFactory: OngoingRequestCancellerFactory;\n\t\tversionProvider: ITypeScriptVersionProvider;\n\t\tprocessFactory: TsServerProcessFactory;\n\t\tactiveJsTsEditorTracker: ActiveJsTsEditorTracker;\n\t\tserviceConfigurationProvider: ServiceConfigurationProvider;\n\t\texperimentTelemetryReporter: IExperimentationTelemetryReporter | undefined;\n\t\tlogger: Logger;\n\t},\n\tonCompletionAccepted: (item: vscode.CompletionItem) => void,\n): Lazy<TypeScriptServiceClientHost> {\n\treturn new Lazy(() => {\n\t\treturn new TypeScriptServiceClientHost(\n\t\t\tstandardLanguageDescriptions,\n\t\t\tcontext,\n\t\t\tonCaseInsensitiveFileSystem,\n\t\t\tservices,\n\t\t\tonCompletionAccepted);\n\t});\n}\n\nexport function lazilyActivateClient(\n\tlazyClientHost: Lazy<TypeScriptServiceClientHost>,\n\tpluginManager: PluginManager,\n\tactiveJsTsEditorTracker: ActiveJsTsEditorTracker,\n\tonActivate: () => Promise<void> = () => Promise.resolve(),\n): vscode.Disposable {\n\tconst disposables: vscode.Disposable[] = [];\n\n\tconst supportedLanguage = [\n\t\t...standardLanguageDescriptions.map(x => x.languageIds),\n\t\t...pluginManager.plugins.map(x => x.languages)\n\t].flat();\n\n\tlet hasActivated = false;\n\tconst maybeActivate = (textDocument: vscode.TextDocument): boolean => {\n\t\tif (!hasActivated && isSupportedDocument(supportedLanguage, textDocument)) {\n\t\t\thasActivated = true;\n\n\t\t\tonActivate().then(() => {\n\t\t\t\t// Force activation\n\t\t\t\tvoid lazyClientHost.value;\n\n\t\t\t\tdisposables.push(new ManagedFileContextManager(activeJsTsEditorTracker));\n\t\t\t});\n\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\tconst didActivate = vscode.workspace.textDocuments.some(maybeActivate);\n\tif (!didActivate) {\n\t\tconst openListener = vscode.workspace.onDidOpenTextDocument(doc => {\n\t\t\tif (maybeActivate(doc)) {\n\t\t\t\topenListener.dispose();\n\t\t\t}\n\t\t}, undefined, disposables);\n\t}\n\n\treturn vscode.Disposable.from(...disposables);\n}\n\nfunction isSupportedDocument(\n\tsupportedLanguage: readonly string[],\n\tdocument: vscode.TextDocument\n): boolean {\n\treturn (supportedLanguage.indexOf(document.languageId) >= 0 || isJsConfigOrTsConfigFileName(document.fileName))\n\t\t&& !fileSchemes.disabledSchemes.has(document.uri.scheme);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Lazy } from '../utils/lazy';\n\nexport class Logger {\n\n\tprivate readonly output = new Lazy<vscode.LogOutputChannel>(() => {\n\t\treturn vscode.window.createOutputChannel('TypeScript', { log: true });\n\t});\n\n\tpublic get logLevel(): vscode.LogLevel {\n\t\treturn this.output.value.logLevel;\n\t}\n\n\tpublic info(message: string, ...args: any[]): void {\n\t\tthis.output.value.info(message, ...args);\n\t}\n\n\tpublic trace(message: string, ...args: any[]): void {\n\t\tthis.output.value.trace(message, ...args);\n\t}\n\n\tpublic error(message: string, data?: any): void {\n\t\t// See https://github.com/microsoft/TypeScript/issues/10496\n\t\tif (data && data.message === 'No content available.') {\n\t\t\treturn;\n\t\t}\n\t\tthis.output.value.error(message, ...(data ? [data] : []));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Command, CommandManager } from '../commands/commandManager';\nimport { isSupportedLanguageMode } from '../configuration/languageIds';\nimport { API } from '../tsServer/api';\nimport * as typeConverters from '../typeConverters';\nimport { ITypeScriptServiceClient } from '../typescriptService';\n\n\nclass FileReferencesCommand implements Command {\n\n\tpublic static readonly context = 'tsSupportsFileReferences';\n\tpublic static readonly minVersion = API.v420;\n\n\tpublic readonly id = 'typescript.findAllFileReferences';\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async execute(resource?: vscode.Uri) {\n\t\tif (this.client.apiVersion.lt(FileReferencesCommand.minVersion)) {\n\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"Find file references failed. Requires TypeScript 4.2+.\"));\n\t\t\treturn;\n\t\t}\n\n\t\tresource ??= vscode.window.activeTextEditor?.document.uri;\n\t\tif (!resource) {\n\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"Find file references failed. No resource provided.\"));\n\t\t\treturn;\n\t\t}\n\n\t\tconst document = await vscode.workspace.openTextDocument(resource);\n\t\tif (!isSupportedLanguageMode(document)) {\n\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"Find file references failed. Unsupported file type.\"));\n\t\t\treturn;\n\t\t}\n\n\t\tconst openedFiledPath = this.client.toOpenTsFilePath(document);\n\t\tif (!openedFiledPath) {\n\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"Find file references failed. Unknown file type.\"));\n\t\t\treturn;\n\t\t}\n\n\t\tawait vscode.window.withProgress({\n\t\t\tlocation: vscode.ProgressLocation.Window,\n\t\t\ttitle: vscode.l10n.t(\"Finding file references\")\n\t\t}, async (_progress, token) => {\n\n\t\t\tconst response = await this.client.execute('fileReferences', {\n\t\t\t\tfile: openedFiledPath\n\t\t\t}, token);\n\t\t\tif (response.type !== 'response' || !response.body) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst locations: vscode.Location[] = response.body.refs.map(reference =>\n\t\t\t\ttypeConverters.Location.fromTextSpan(this.client.toResource(reference.file), reference));\n\n\t\t\tconst config = vscode.workspace.getConfiguration('references');\n\t\t\tconst existingSetting = config.inspect<string>('preferredLocation');\n\n\t\t\tawait config.update('preferredLocation', 'view');\n\t\t\ttry {\n\t\t\t\tawait vscode.commands.executeCommand('editor.action.showReferences', resource, new vscode.Position(0, 0), locations);\n\t\t\t} finally {\n\t\t\t\tawait config.update('preferredLocation', existingSetting?.workspaceFolderValue ?? existingSetting?.workspaceValue);\n\t\t\t}\n\t\t});\n\t}\n}\n\n\nexport function register(\n\tclient: ITypeScriptServiceClient,\n\tcommandManager: CommandManager\n) {\n\tfunction updateContext() {\n\t\tvscode.commands.executeCommand('setContext', FileReferencesCommand.context, client.apiVersion.gte(FileReferencesCommand.minVersion));\n\t}\n\tupdateContext();\n\n\tcommandManager.register(new FileReferencesCommand(client));\n\treturn client.onTsServerStarted(() => updateContext());\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { asString, isBoolean, isFunction, isNullOrUndefined, isString } from \"@nevware21/ts-utils\";\r\nimport { STR_EMPTY } from \"../JavaScriptSDK/InternalConstants\";\r\nimport { _DYN_BLK_VAL, _DYN_TO_LOWER_CASE } from \"../__DynamicConstants\";\r\n/**\r\n * @internal\r\n * @ignore\r\n * @param str\r\n * @param defaultValue\r\n * @returns\r\n */\r\nfunction _stringToBoolOrDefault(theValue, defaultValue, theConfig) {\r\n    if (!theValue && isNullOrUndefined(theValue)) {\r\n        return defaultValue;\r\n    }\r\n    if (isBoolean(theValue)) {\r\n        return theValue;\r\n    }\r\n    return asString(theValue)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() === \"true\";\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance with the field defined as an object\r\n * that should be merged\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfMerge(defaultValue) {\r\n    return {\r\n        mrg: true,\r\n        v: defaultValue\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance with the provided field set function\r\n * @param setter - The IConfigCheckFn function to validate the user provided value\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfSet(setter, defaultValue) {\r\n    return {\r\n        set: setter,\r\n        v: defaultValue\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance with the provided field validator\r\n * @param validator - The IConfigCheckFn function to validate the user provided value\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @param fallBackName - The fallback configuration name if the current value is not available\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfValidate(validator, defaultValue, fallBackName) {\r\n    return {\r\n        fb: fallBackName,\r\n        isVal: validator,\r\n        v: defaultValue\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance that will validate and convert the user\r\n * provided value to a boolean from a string or boolean value\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @param fallBackName - The fallback configuration name if the current value is not available\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfBoolean(defaultValue, fallBackName) {\r\n    return {\r\n        fb: fallBackName,\r\n        set: _stringToBoolOrDefault,\r\n        v: !!defaultValue\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance that will validate that the user\r\n * provided value is a function.\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfFunc(defaultValue) {\r\n    return {\r\n        isVal: isFunction,\r\n        v: defaultValue || null\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance that will validate that the user\r\n * provided value is a function.\r\n * @param defaultValue - The default string value to apply it not provided or it's not valid, defaults to an empty string\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfString(defaultValue) {\r\n    return {\r\n        isVal: isString,\r\n        v: asString(defaultValue || STR_EMPTY)\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance identifying that value associated with this property\r\n * should not have it's properties converted into a dynamic config properties.\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfBlockPropValue(defaultValue) {\r\n    var _a;\r\n    return _a = {},\r\n        _a[_DYN_BLK_VAL /* @min:blkVal */] = true,\r\n        _a.v = defaultValue,\r\n        _a;\r\n}\r\n//# sourceMappingURL=ConfigDefaultHelpers.js.map","// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\nimport * as Previewer from './util/textRendering';\n\nclass TypeScriptSignatureHelpProvider implements vscode.SignatureHelpProvider {\n\n\tpublic static readonly triggerCharacters = ['(', ',', '<'];\n\tpublic static readonly retriggerCharacters = [')'];\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async provideSignatureHelp(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken,\n\t\tcontext: vscode.SignatureHelpContext,\n\t): Promise<vscode.SignatureHelp | undefined> {\n\t\tconst filepath = this.client.toOpenTsFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args: Proto.SignatureHelpRequestArgs = {\n\t\t\t...typeConverters.Position.toFileLocationRequestArgs(filepath, position),\n\t\t\ttriggerReason: toTsTriggerReason(context)\n\t\t};\n\t\tconst response = await this.client.interruptGetErr(() => this.client.execute('signatureHelp', args, token));\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst info = response.body;\n\t\tconst result = new vscode.SignatureHelp();\n\t\tresult.signatures = info.items.map(signature => this.convertSignature(signature, document.uri));\n\t\tresult.activeSignature = this.getActiveSignature(context, info, result.signatures);\n\t\tresult.activeParameter = this.getActiveParameter(info);\n\n\t\treturn result;\n\t}\n\n\tprivate getActiveSignature(context: vscode.SignatureHelpContext, info: Proto.SignatureHelpItems, signatures: readonly vscode.SignatureInformation[]): number {\n\t\t// Try matching the previous active signature's label to keep it selected\n\t\tconst previouslyActiveSignature = context.activeSignatureHelp?.signatures[context.activeSignatureHelp.activeSignature];\n\t\tif (previouslyActiveSignature && context.isRetrigger) {\n\t\t\tconst existingIndex = signatures.findIndex(other => other.label === previouslyActiveSignature?.label);\n\t\t\tif (existingIndex >= 0) {\n\t\t\t\treturn existingIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn info.selectedItemIndex;\n\t}\n\n\tprivate getActiveParameter(info: Proto.SignatureHelpItems): number {\n\t\tconst activeSignature = info.items[info.selectedItemIndex];\n\t\tif (activeSignature?.isVariadic) {\n\t\t\treturn Math.min(info.argumentIndex, activeSignature.parameters.length - 1);\n\t\t}\n\t\treturn info.argumentIndex;\n\t}\n\n\tprivate convertSignature(item: Proto.SignatureHelpItem, baseUri: vscode.Uri) {\n\t\tconst signature = new vscode.SignatureInformation(\n\t\t\tPreviewer.asPlainTextWithLinks(item.prefixDisplayParts, this.client),\n\t\t\tPreviewer.documentationToMarkdown(item.documentation, item.tags.filter(x => x.name !== 'param'), this.client, baseUri));\n\n\t\tlet textIndex = signature.label.length;\n\t\tconst separatorLabel = Previewer.asPlainTextWithLinks(item.separatorDisplayParts, this.client);\n\t\tfor (let i = 0; i < item.parameters.length; ++i) {\n\t\t\tconst parameter = item.parameters[i];\n\t\t\tconst label = Previewer.asPlainTextWithLinks(parameter.displayParts, this.client);\n\n\t\t\tsignature.parameters.push(\n\t\t\t\tnew vscode.ParameterInformation(\n\t\t\t\t\t[textIndex, textIndex + label.length],\n\t\t\t\t\tPreviewer.documentationToMarkdown(parameter.documentation, [], this.client, baseUri)));\n\n\t\t\ttextIndex += label.length;\n\t\t\tsignature.label += label;\n\n\t\t\tif (i !== item.parameters.length - 1) {\n\t\t\t\tsignature.label += separatorLabel;\n\t\t\t\ttextIndex += separatorLabel.length;\n\t\t\t}\n\t\t}\n\n\t\tsignature.label += Previewer.asPlainTextWithLinks(item.suffixDisplayParts, this.client);\n\t\treturn signature;\n\t}\n}\n\nfunction toTsTriggerReason(context: vscode.SignatureHelpContext): Proto.SignatureHelpTriggerReason {\n\tswitch (context.triggerKind) {\n\t\tcase vscode.SignatureHelpTriggerKind.TriggerCharacter:\n\t\t\tif (context.triggerCharacter) {\n\t\t\t\tif (context.isRetrigger) {\n\t\t\t\t\treturn { kind: 'retrigger', triggerCharacter: context.triggerCharacter as any };\n\t\t\t\t} else {\n\t\t\t\t\treturn { kind: 'characterTyped', triggerCharacter: context.triggerCharacter as any };\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn { kind: 'invoked' };\n\t\t\t}\n\n\t\tcase vscode.SignatureHelpTriggerKind.ContentChange:\n\t\t\treturn context.isRetrigger ? { kind: 'retrigger' } : { kind: 'invoked' };\n\n\t\tcase vscode.SignatureHelpTriggerKind.Invoke:\n\t\tdefault:\n\t\t\treturn { kind: 'invoked' };\n\t}\n}\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerSignatureHelpProvider(selector.syntax,\n\t\t\tnew TypeScriptSignatureHelpProvider(client), {\n\t\t\ttriggerCharacters: TypeScriptSignatureHelpProvider.triggerCharacters,\n\t\t\tretriggerCharacters: TypeScriptSignatureHelpProvider.retriggerCharacters\n\t\t});\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../../configuration/documentSelector';\nimport { LanguageDescription } from '../../configuration/languageDescription';\nimport { CachedResponse } from '../../tsServer/cachedResponse';\nimport type * as Proto from '../../tsServer/protocol/protocol';\nimport * as PConst from '../../tsServer/protocol/protocol.const';\nimport { ExecutionTarget } from '../../tsServer/server';\nimport * as typeConverters from '../../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../../typescriptService';\nimport { conditionalRegistration, requireGlobalConfiguration, requireSomeCapability } from '../util/dependentRegistration';\nimport { ReferencesCodeLens, TypeScriptBaseCodeLensProvider, getSymbolRange } from './baseCodeLensProvider';\n\n\nexport class TypeScriptReferencesCodeLensProvider extends TypeScriptBaseCodeLensProvider {\n\tpublic constructor(\n\t\tclient: ITypeScriptServiceClient,\n\t\tprotected _cachedResponse: CachedResponse<Proto.NavTreeResponse>,\n\t\tprivate readonly language: LanguageDescription\n\t) {\n\t\tsuper(client, _cachedResponse);\n\t\tthis._register(\n\t\t\tvscode.workspace.onDidChangeConfiguration(evt => {\n\t\t\t\tif (evt.affectsConfiguration(`${language.id}.referencesCodeLens.showOnAllFunctions`)) {\n\t\t\t\t\tthis.changeEmitter.fire();\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic async resolveCodeLens(codeLens: ReferencesCodeLens, token: vscode.CancellationToken): Promise<vscode.CodeLens> {\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(codeLens.file, codeLens.range.start);\n\t\tconst response = await this.client.execute('references', args, token, {\n\t\t\tlowPriority: true,\n\t\t\texecutionTarget: ExecutionTarget.Semantic,\n\t\t\tcancelOnResourceChange: codeLens.document,\n\t\t});\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\tcodeLens.command = response.type === 'cancelled'\n\t\t\t\t? TypeScriptBaseCodeLensProvider.cancelledCommand\n\t\t\t\t: TypeScriptBaseCodeLensProvider.errorCommand;\n\t\t\treturn codeLens;\n\t\t}\n\n\t\tconst locations = response.body.refs\n\t\t\t.filter(reference => !reference.isDefinition)\n\t\t\t.map(reference =>\n\t\t\t\ttypeConverters.Location.fromTextSpan(this.client.toResource(reference.file), reference));\n\n\t\tcodeLens.command = {\n\t\t\ttitle: this.getCodeLensLabel(locations),\n\t\t\tcommand: locations.length ? 'editor.action.showReferences' : '',\n\t\t\targuments: [codeLens.document, codeLens.range.start, locations]\n\t\t};\n\t\treturn codeLens;\n\t}\n\n\tprivate getCodeLensLabel(locations: ReadonlyArray<vscode.Location>): string {\n\t\treturn locations.length === 1\n\t\t\t? vscode.l10n.t(\"1 reference\")\n\t\t\t: vscode.l10n.t(\"{0} references\", locations.length);\n\t}\n\n\tprotected extractSymbol(\n\t\tdocument: vscode.TextDocument,\n\t\titem: Proto.NavigationTree,\n\t\tparent: Proto.NavigationTree | undefined\n\t): vscode.Range | undefined {\n\t\tif (parent && parent.kind === PConst.Kind.enum) {\n\t\t\treturn getSymbolRange(document, item);\n\t\t}\n\n\t\tswitch (item.kind) {\n\t\t\tcase PConst.Kind.function: {\n\t\t\t\tconst showOnAllFunctions = vscode.workspace.getConfiguration(this.language.id).get<boolean>('referencesCodeLens.showOnAllFunctions');\n\t\t\t\tif (showOnAllFunctions && item.nameSpan) {\n\t\t\t\t\treturn getSymbolRange(document, item);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// fallthrough\n\n\t\t\tcase PConst.Kind.const:\n\t\t\tcase PConst.Kind.let:\n\t\t\tcase PConst.Kind.variable:\n\t\t\t\t// Only show references for exported variables\n\t\t\t\tif (/\\bexport\\b/.test(item.kindModifiers)) {\n\t\t\t\t\treturn getSymbolRange(document, item);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase PConst.Kind.class:\n\t\t\t\tif (item.text === '<class>') {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\treturn getSymbolRange(document, item);\n\n\t\t\tcase PConst.Kind.interface:\n\t\t\tcase PConst.Kind.type:\n\t\t\tcase PConst.Kind.enum:\n\t\t\t\treturn getSymbolRange(document, item);\n\n\t\t\tcase PConst.Kind.method:\n\t\t\tcase PConst.Kind.memberGetAccessor:\n\t\t\tcase PConst.Kind.memberSetAccessor:\n\t\t\tcase PConst.Kind.constructorImplementation:\n\t\t\tcase PConst.Kind.memberVariable:\n\t\t\t\t// Don't show if child and parent have same start\n\t\t\t\t// For https://github.com/microsoft/vscode/issues/90396\n\t\t\t\tif (parent &&\n\t\t\t\t\ttypeConverters.Position.fromLocation(parent.spans[0].start).isEqual(typeConverters.Position.fromLocation(item.spans[0].start))\n\t\t\t\t) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\t// Only show if parent is a class type object (not a literal)\n\t\t\t\tswitch (parent?.kind) {\n\t\t\t\t\tcase PConst.Kind.class:\n\t\t\t\t\tcase PConst.Kind.interface:\n\t\t\t\t\tcase PConst.Kind.type:\n\t\t\t\t\t\treturn getSymbolRange(document, item);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tlanguage: LanguageDescription,\n\tclient: ITypeScriptServiceClient,\n\tcachedResponse: CachedResponse<Proto.NavTreeResponse>,\n) {\n\treturn conditionalRegistration([\n\t\trequireGlobalConfiguration(language.id, 'referencesCodeLens.enabled'),\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerCodeLensProvider(selector.semantic,\n\t\t\tnew TypeScriptReferencesCodeLensProvider(client, cachedResponse, language));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { TsServerLogLevel } from '../configuration/configuration';\nimport { Disposable } from '../utils/dispose';\n\n\nexport class LogLevelMonitor extends Disposable {\n\n\tprivate static readonly logLevelConfigKey = 'typescript.tsserver.log';\n\tprivate static readonly logLevelChangedStorageKey = 'typescript.tsserver.logLevelChanged';\n\tprivate static readonly doNotPromptLogLevelStorageKey = 'typescript.tsserver.doNotPromptLogLevel';\n\n\tconstructor(private readonly context: vscode.ExtensionContext) {\n\t\tsuper();\n\n\t\tthis._register(vscode.workspace.onDidChangeConfiguration(this.onConfigurationChange, this, this._disposables));\n\n\t\tif (this.shouldNotifyExtendedLogging()) {\n\t\t\tthis.notifyExtendedLogging();\n\t\t}\n\t}\n\n\tprivate onConfigurationChange(event: vscode.ConfigurationChangeEvent) {\n\t\tconst logLevelChanged = event.affectsConfiguration(LogLevelMonitor.logLevelConfigKey);\n\t\tif (!logLevelChanged) {\n\t\t\treturn;\n\t\t}\n\t\tthis.context.globalState.update(LogLevelMonitor.logLevelChangedStorageKey, new Date());\n\t}\n\n\tprivate get logLevel(): TsServerLogLevel {\n\t\treturn TsServerLogLevel.fromString(vscode.workspace.getConfiguration().get<string>(LogLevelMonitor.logLevelConfigKey, 'off'));\n\t}\n\n\t/**\n\t * Last date change if it exists and can be parsed as a date,\n\t * otherwise undefined.\n\t */\n\tprivate get lastLogLevelChange(): Date | undefined {\n\t\tconst lastChange = this.context.globalState.get<string | undefined>(LogLevelMonitor.logLevelChangedStorageKey);\n\n\t\tif (lastChange) {\n\t\t\tconst date = new Date(lastChange);\n\t\t\tif (date instanceof Date && !isNaN(date.valueOf())) {\n\t\t\t\treturn date;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate get doNotPrompt(): boolean {\n\t\treturn this.context.globalState.get<boolean | undefined>(LogLevelMonitor.doNotPromptLogLevelStorageKey) || false;\n\t}\n\n\tprivate shouldNotifyExtendedLogging(): boolean {\n\t\tconst lastChangeMilliseconds = this.lastLogLevelChange ? new Date(this.lastLogLevelChange).valueOf() : 0;\n\t\tconst lastChangePlusOneWeek = new Date(lastChangeMilliseconds + /* 7 days in milliseconds */ 86400000 * 7);\n\n\t\tif (!this.doNotPrompt && this.logLevel !== TsServerLogLevel.Off && lastChangePlusOneWeek.valueOf() < Date.now()) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate notifyExtendedLogging() {\n\t\tconst enum Choice {\n\t\t\tDisableLogging = 0,\n\t\t\tDoNotShowAgain = 1\n\t\t}\n\t\tinterface Item extends vscode.MessageItem {\n\t\t\treadonly choice: Choice;\n\t\t}\n\n\t\tvscode.window.showInformationMessage<Item>(\n\t\t\tvscode.l10n.t(\"TS Server logging is currently enabled which may impact performance.\"),\n\t\t\t{\n\t\t\t\ttitle: vscode.l10n.t(\"Disable logging\"),\n\t\t\t\tchoice: Choice.DisableLogging\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: vscode.l10n.t(\"Don't show again\"),\n\t\t\t\tchoice: Choice.DoNotShowAgain\n\t\t\t})\n\t\t\t.then(selection => {\n\t\t\t\tif (!selection) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (selection.choice === Choice.DisableLogging) {\n\t\t\t\t\treturn vscode.workspace.getConfiguration().update(LogLevelMonitor.logLevelConfigKey, 'off', true);\n\t\t\t\t} else if (selection.choice === Choice.DoNotShowAgain) {\n\t\t\t\t\treturn this.context.globalState.update(LogLevelMonitor.doNotPromptLogLevelStorageKey, true);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t});\n\t}\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.packagePath = exports.ResolvedProject = exports.PackageManager = exports.PackageType = void 0;\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nconst path_1 = require(\"path\");\nconst node_maintainer_1 = require(\"../node-maintainer/node_maintainer\");\nconst node_maintainer_bg_wasm_1 = __importDefault(require(\"../node-maintainer/node_maintainer_bg.wasm\"));\n(0, node_maintainer_1.initSync)(dataURItoUint8Array(node_maintainer_bg_wasm_1.default));\nconst decoder = new TextDecoder();\nvar PackageType;\n(function (PackageType) {\n    PackageType[\"Dependency\"] = \"dependencies\";\n    PackageType[\"DevDependency\"] = \"devDependencies\";\n    PackageType[\"OptionalDependency\"] = \"optionalDependencies\";\n    PackageType[\"PeerDependency\"] = \"peerDependencies\";\n})(PackageType || (exports.PackageType = PackageType = {}));\nclass PackageManager {\n    constructor(fs) {\n        this.fs = fs;\n        this.nassun = new node_maintainer_1.Nassun({});\n    }\n    async resolveProject(root, opts = {}) {\n        if (opts.addPackages || opts.removePackages) {\n            await this.updateJson((0, path_1.join)(root, 'package.json'), opts);\n        }\n        console.time(`dependency resolution: ${root}`);\n        const maintainer = await this.resolveMaintainer(root, opts);\n        console.timeEnd(`dependency resolution: ${root}`);\n        return new ResolvedProject(this.fs, maintainer, root);\n    }\n    async updateJson(packageJsonPath, opts = {}) {\n        const packageType = opts.packageType ?? PackageType.Dependency;\n        const corgis = await Promise.all((opts.addPackages ?? []).map(async (pkg) => this.nassun.corgiMetadata(pkg)));\n        let pkgJson;\n        try {\n            pkgJson = this.readJson(packageJsonPath);\n        }\n        catch (e) {\n            console.error('failed to read package.json', e);\n            pkgJson = {};\n        }\n        for (const packageName of opts.removePackages ?? []) {\n            delete pkgJson.dependencies?.[packageName];\n            delete pkgJson.devDependencies?.[packageName];\n            delete pkgJson.optionalDependencies?.[packageName];\n            delete pkgJson.peerDependencies?.[packageName];\n        }\n        for (const corgi of corgis) {\n            if (!pkgJson[packageType]) {\n                pkgJson[packageType] = {};\n            }\n            pkgJson[packageType][corgi.name] = `^${corgi.version}`;\n        }\n        const stringified = JSON.stringify(pkgJson, undefined, 2);\n        this.fs.writeFile(packageJsonPath, stringified);\n    }\n    async resolveMaintainer(root, opts) {\n        const pkgJson = opts.pkgJson || this.fs.readFile((0, path_1.join)(root, 'package.json')) || '{}';\n        const kdlPkgLock = opts.kdlLock || this.fs.readFile((0, path_1.join)(root, 'package-lock.kdl'));\n        const npmPkgLock = opts.npmLock || this.fs.readFile((0, path_1.join)(root, 'package-lock.json'));\n        return (0, node_maintainer_1.resolveManifest)(JSON.parse(pkgJson.trim()), { kdlLock: kdlPkgLock, npmLock: npmPkgLock });\n    }\n    /**\n     * What it says on the tin. Reads a JSON file from the given path. Throws\n     * if the file doesn't exist (as opposed to returning `undefined`, like\n     * fs.readFile does).\n     */\n    readJson(path) {\n        const data = this.fs.readFile(path);\n        if (!data) {\n            throw new Error('Failed to read file: ' + path);\n        }\n        return JSON.parse(data.trim());\n    }\n}\nexports.PackageManager = PackageManager;\nclass ResolvedProject {\n    constructor(fs, maintainer, root) {\n        this.fs = fs;\n        this.maintainer = maintainer;\n        this.root = root;\n        this.prefix = (0, path_1.join)(root, 'node_modules');\n        this.metaPath = (0, path_1.join)(this.prefix, '.meta.json');\n    }\n    /**\n     * Synchronizes the project's node_modules directory with the current resolved dependencies, pruning any extraneous ones.\n     */\n    async restore() {\n        console.time(`project restore: ${this.root}`);\n        this.pruneExtraneous();\n        await this.extractMissing();\n        this.writeLockfile();\n        console.timeEnd(`project restore: ${this.root}`);\n    }\n    /**\n     * Extracts a package at the given path. If a package has already been\n     * extracted to that location, it will be replaced.\n     *\n     * @param path to a package\n     * @returns The number of files extracted, or undefined if the path\n     */\n    async restorePackageAt(path) {\n        console.time(`restore package at: ${path}`);\n        this.checkPath(path);\n        const meta = JSON.parse(this.fs.readFile(this.metaPath) || '{}');\n        if (!meta.packages) {\n            meta.packages = {};\n        }\n        const projRoot = this.getProjectRoot(path);\n        if (!projRoot) {\n            console.error('root not found for ', path);\n            console.timeEnd(`restore package at: ${path}`);\n            return;\n        }\n        const pkgPath = packagePath(path);\n        const pkg = this.packageAtPath(path.slice(projRoot.length));\n        if (!pkg) {\n            console.error('no package at path', path, pkgPath);\n            console.timeEnd(`restore package at: ${path}`);\n            return;\n        }\n        if (pkg && pkgPath && meta.packages?.[pkgPath.slice(this.prefix.length)]?.resolved === pkg.resolved) {\n            // Already installed and synced. No need to do anything else!\n            console.timeEnd(`restore package at: ${path}`);\n            return;\n        }\n        else {\n            rimraf(this.fs, pkgPath);\n        }\n        let count;\n        try {\n            // NB(zkat): load-bearing `await`. We need to await here because\n            // otherwise we'll have a use-after-free error when extracting the\n            // package entries.\n            count = await this.extractPackageTo(pkg, pkgPath);\n            meta.packages[pkgPath.slice(this.prefix.length)] = {\n                name: pkg.name,\n                resolved: pkg.resolved\n            };\n        }\n        catch (e) {\n            console.error('error extracting: ', e);\n            console.timeEnd(`restore package at: ${path}`);\n            throw e;\n        }\n        finally {\n            pkg.free();\n        }\n        rimraf(this.fs, this.metaPath);\n        this.fs.writeFile(this.metaPath, JSON.stringify(meta, null, 2));\n        this.writeLockfile();\n        console.timeEnd(`restore package at: ${path}`);\n        return count;\n    }\n    /**\n     * Deletes/prunes files and directories that aren't expected to be there\n     * by the currently-calculated tree. Extraneous calculation happens based on the contents of `.meta.json`\n     * @returns\n     */\n    pruneExtraneous() {\n        const meta = JSON.parse(this.fs.readFile(this.metaPath) || '{}');\n        let count = 0;\n        if (!this.fs.directoryExists(this.prefix)) {\n            return count;\n        }\n        for (const entryPath of walkDir(this.fs, this.prefix)) {\n            if (entryPath === this.metaPath) {\n                // Leave the meta path alone.\n                continue;\n            }\n            const pkgPath = packagePath(entryPath);\n            // Only look at toplevel package paths.\n            if (pkgPath === entryPath) {\n                const subPath = pkgPath.slice(this.prefix.length);\n                const pkg = this.packageAtPath(subPath);\n                try {\n                    if (pkg && meta.packages?.[pkgPath.slice(this.prefix.length)]?.resolved === pkg.resolved) {\n                        // There's a valid package here. Move along.\n                    }\n                    else {\n                        // Extraneous!\n                        count++;\n                        rimraf(this.fs, entryPath);\n                    }\n                }\n                finally {\n                    pkg?.free();\n                }\n            }\n        }\n        return count;\n    }\n    packageAtPath(path) {\n        return this.maintainer.packageAtPath(path);\n    }\n    getProjectRoot(path) {\n        const pkgPath = path.match(/(^.*\\/)node_modules/);\n        return pkgPath?.[1];\n    }\n    checkPath(path) {\n        if (!path.startsWith(this.root)) {\n            throw new Error(`Path ${path} is not in project root ${this.root}`);\n        }\n        if (!(0, path_1.isAbsolute)(path)) {\n            throw new Error(`Path ${path} is not absolute`);\n        }\n    }\n    async extractPackageTo(pkg, pkgPath) {\n        const mkdirCache = new Set();\n        mkdirp(mkdirCache, this.fs, pkgPath);\n        // Clean up the directory, in case it already exists, but leave\n        // node_modules alone to avoid clobbering other packages.\n        for (const file of this.fs.readDirectory(pkgPath)) {\n            if ((0, path_1.basename)(file) === 'node_modules') {\n                continue;\n            }\n            rimraf(this.fs, file);\n        }\n        const entries = await pkg.entries();\n        const reader = entries.getReader();\n        let fileCount = 0;\n        while (true) {\n            const { done, value: entry } = await reader.read();\n            if (done) {\n                break;\n            }\n            // Strip the first level of a package, just like NPM does.\n            const entryPath = (0, path_1.join)(pkgPath, entry.path.replace(/^([^/]*\\/)?/, ''));\n            // We simulate directories based on files we find.\n            mkdirp(mkdirCache, this.fs, (0, path_1.dirname)(entryPath));\n            // Types are registered here:\n            // https://www.gnu.org/software/tar/manual/html_node/Standard.html.\n            // You can get these numbers by just doing `'5'.codePointAt(0)`,\n            // but we may as well hard-code the three values we actually care\n            // about here.\n            if (entry.type === 53) {\n                // '5' == 53 == directory\n                mkdirp(mkdirCache, this.fs, entryPath);\n                await drainStream(entry.contents);\n            }\n            else if (entry.type === 0 || entry.type === 48) {\n                // '0' == 48 or '\\x00' == 0 == regular file\n                const data = await streamToArrayBuffer(entry.contents, entry.size);\n                this.fs.writeFile(entryPath, decoder.decode(data));\n                fileCount++;\n            }\n            else {\n                // Anything else, we throw away, but we have to make sure to\n                // drain any contents before we can continue reading the\n                // tarball.\n                await drainStream(entry.contents);\n            }\n        }\n        return fileCount;\n    }\n    async extractMissing() {\n        const meta = { packages: {} };\n        await this.maintainer.forEachPackage(async (pkg, path) => {\n            const fullPath = (0, path_1.join)(this.prefix, path);\n            meta.packages[path] = {\n                name: pkg.name,\n                resolved: pkg.resolved\n            };\n            try {\n                if (!this.fs.directoryExists(fullPath)) {\n                    await this.extractPackageTo(pkg, fullPath);\n                }\n            }\n            finally {\n                pkg.free();\n            }\n        });\n        rimraf(this.fs, this.metaPath);\n        this.fs.writeFile(this.metaPath, JSON.stringify(meta, null, 2));\n    }\n    writeLockfile() {\n        this.fs.writeFile((0, path_1.join)(this.root, 'package-lock.kdl'), this.maintainer.toKdl());\n    }\n}\nexports.ResolvedProject = ResolvedProject;\n//---- Utils\n/**\n * Given a full path to a particular file, presumably inside a package,\n * this returns the path of the package containing that file.\n * @param path the full file path to the file.\n * @returns the subpath of the package itself\n */\nfunction packagePath(path) {\n    return path.replace(/(^.*\\/node_modules\\/(?:@[^/]+\\/)?[^/]+)\\/?(?!node_modules\\/).*/, '$1');\n}\nexports.packagePath = packagePath;\n// via https://stackoverflow.com/questions/12168909/blob-from-dataurl\nfunction dataURItoUint8Array(dataURI) {\n    const byteString = atob(dataURI.split(',')[1]);\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    return ia;\n}\nasync function drainStream(stream) {\n    const reader = stream.getReader();\n    while (true) { // eslint-disable-line no-constant-condition\n        const { done } = await reader.read();\n        if (done) {\n            break;\n        }\n    }\n    return reader.closed;\n}\nasync function streamToArrayBuffer(stream, length) {\n    const result = new Uint8Array(length);\n    const reader = stream.getReader();\n    let idx = 0;\n    while (true) { // eslint-disable-line no-constant-condition\n        const { done, value } = await reader.read();\n        if (done) {\n            break;\n        }\n        result.set(value, idx);\n        idx += value.length;\n    }\n    return result;\n}\nfunction* walkDir(fs, path) {\n    let contents = fs.readDirectory(path);\n    while (contents.length) {\n        const entry = contents.shift();\n        const entryPath = (0, path_1.join)(path, entry);\n        if (fs.directoryExists(entryPath)) {\n            contents = fs.readDirectory(entryPath).map(e => (0, path_1.join)(entry, e)).concat(contents);\n        }\n        yield entryPath;\n    }\n}\nfunction mkdirp(cache, fs, path) {\n    path.split('/').reduce((dir, next) => {\n        const joined = (0, path_1.join)(dir, next);\n        if (!cache.has(joined) && !fs.directoryExists(joined)) {\n            fs.createDirectory(joined);\n            cache.add(joined);\n        }\n        return joined;\n    }, '');\n}\nfunction rimraf(fs, path) {\n    if (fs.directoryExists(path)) {\n        for (const subPath of fs.readDirectory(path).map(e => (0, path_1.join)(path, e))) {\n            rimraf(fs, subPath);\n        }\n    }\n    try {\n        fs.deleteFile?.(path);\n    }\n    catch (e) {\n        // shou ga nai\n    }\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nvar _a;\r\nimport { __spreadArrayFn as __spreadArray } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { createPromise, createSyncAllSettledPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { arrAppend, arrForEach, arrIndexOf, createTimeout, deepExtend, hasDocument, isFunction, isNullOrUndefined, isPlainObject, isPromiseLike, objDeepFreeze, objDefine, objForEachKey, objFreeze, objHasOwn, scheduleTimeout, throwError } from \"@nevware21/ts-utils\";\r\nimport { createDynamicConfig, onConfigChange } from \"../Config/DynamicConfig\";\r\nimport { ActiveStatus } from \"../JavaScriptSDK.Enums/InitActiveStatusEnum\";\r\nimport { _DYN_ADD_NOTIFICATION_LIS1, _DYN_CANCEL, _DYN_CREATE_NEW, _DYN_ENABLED, _DYN_GET_NOTIFY_MGR, _DYN_GET_PLUGIN, _DYN_GET_PROCESS_TEL_CONT2, _DYN_IDENTIFIER, _DYN_INITIALIZE, _DYN_INSTRUMENTATION_KEY, _DYN_IS_ASYNC, _DYN_IS_INITIALIZED, _DYN_I_KEY, _DYN_LENGTH, _DYN_LOGGER, _DYN_LOGGING_LEVEL_CONSOL4, _DYN_MESSAGE, _DYN_MESSAGE_ID, _DYN_NAME, _DYN_NOTIFY, _DYN_ON_COMPLETE, _DYN_POLL_INTERNAL_LOGS, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_REMOVE_NOTIFICATION_0, _DYN_SET_DF, _DYN_SPLICE, _DYN_STOP_POLLING_INTERNA3, _DYN_TEARDOWN, _DYN_TIME, _DYN_UNLOAD, _DYN_VALUE, _DYN_VERSION, _DYN_WATCH, _DYN__INACTIVE } from \"../__DynamicConstants\";\r\nimport { doUnloadAll, runTargetUnload } from \"./AsyncUtils\";\r\nimport { ChannelControllerPriority } from \"./Constants\";\r\nimport { createCookieMgr } from \"./CookieMgr\";\r\nimport { createUniqueNamespace } from \"./DataCacheHelper\";\r\nimport { getDebugListener } from \"./DbgExtensionUtils\";\r\nimport { DiagnosticLogger, _InternalLogMessage, _throwInternal, _warnToConsole } from \"./DiagnosticLogger\";\r\nimport { getSetValue, isNotNullOrUndefined, proxyFunctionAs, proxyFunctions, toISOString } from \"./HelperFuncs\";\r\nimport { STR_CHANNELS, STR_CORE, STR_CREATE_PERF_MGR, STR_DISABLED, STR_EMPTY, STR_EVENTS_DISCARDED, STR_EXTENSIONS, STR_EXTENSION_CONFIG, STR_GET_PERF_MGR, STR_PRIORITY, UNDEFINED_VALUE } from \"./InternalConstants\";\r\nimport { NotificationManager } from \"./NotificationManager\";\r\nimport { PerfManager, doPerf, getGblPerfMgr } from \"./PerfManager\";\r\nimport { createProcessTelemetryContext, createProcessTelemetryUnloadContext, createProcessTelemetryUpdateContext, createTelemetryProxyChain } from \"./ProcessTelemetryContext\";\r\nimport { _getPluginState, createDistributedTraceContext, initializePlugins, sortPlugins } from \"./TelemetryHelpers\";\r\nimport { TelemetryInitializerPlugin } from \"./TelemetryInitializerPlugin\";\r\nimport { createUnloadHandlerContainer } from \"./UnloadHandlerContainer\";\r\nimport { createUnloadHookContainer } from \"./UnloadHookContainer\";\r\nvar strValidationError = \"Plugins must provide initialize method\";\r\nvar strNotificationManager = \"_notificationManager\";\r\nvar strSdkUnloadingError = \"SDK is still unloading...\";\r\nvar strSdkNotInitialized = \"SDK is not initialized\";\r\nvar maxInitQueueSize = 100;\r\nvar maxInitTimeout = 50000;\r\n// const strPluginUnloadFailed = \"Failed to unload plugin\";\r\n/**\r\n * The default settings for the config.\r\n * WE MUST include all defaults here to ensure that the config is created with all of the properties\r\n * defined as dynamic.\r\n */\r\nvar defaultConfig = objDeepFreeze((_a = {\r\n        cookieCfg: {}\r\n    },\r\n    _a[STR_EXTENSIONS] = { rdOnly: true, ref: true, v: [] },\r\n    _a[STR_CHANNELS] = { rdOnly: true, ref: true, v: [] },\r\n    _a[STR_EXTENSION_CONFIG] = { ref: true, v: {} },\r\n    _a[STR_CREATE_PERF_MGR] = UNDEFINED_VALUE,\r\n    _a.loggingLevelConsole = 0 /* eLoggingSeverity.DISABLED */,\r\n    _a.diagnosticLogInterval = UNDEFINED_VALUE,\r\n    _a));\r\n/**\r\n * Helper to create the default performance manager\r\n * @param core\r\n * @param notificationMgr\r\n */\r\nfunction _createPerfManager(core, notificationMgr) {\r\n    return new PerfManager(notificationMgr);\r\n}\r\nfunction _validateExtensions(logger, channelPriority, allExtensions) {\r\n    var _a;\r\n    // Concat all available extensions\r\n    var coreExtensions = [];\r\n    var channels = [];\r\n    // Check if any two extensions have the same priority, then warn to console\r\n    // And extract the local extensions from the\r\n    var extPriorities = {};\r\n    // Extension validation\r\n    arrForEach(allExtensions, function (ext) {\r\n        // Check for ext.initialize\r\n        if (isNullOrUndefined(ext) || isNullOrUndefined(ext[_DYN_INITIALIZE /* @min:%2einitialize */])) {\r\n            throwError(strValidationError);\r\n        }\r\n        var extPriority = ext[STR_PRIORITY /* @min:%2epriority */];\r\n        var identifier = ext[_DYN_IDENTIFIER /* @min:%2eidentifier */];\r\n        if (ext && extPriority) {\r\n            if (!isNullOrUndefined(extPriorities[extPriority])) {\r\n                _warnToConsole(logger, \"Two extensions have same priority #\" + extPriority + \" - \" + extPriorities[extPriority] + \", \" + identifier);\r\n            }\r\n            else {\r\n                // set a value\r\n                extPriorities[extPriority] = identifier;\r\n            }\r\n        }\r\n        // Split extensions to core and channels\r\n        if (!extPriority || extPriority < channelPriority) {\r\n            // Add to core extension that will be managed by AppInsightsCore\r\n            coreExtensions[_DYN_PUSH /* @min:%2epush */](ext);\r\n        }\r\n        else {\r\n            channels[_DYN_PUSH /* @min:%2epush */](ext);\r\n        }\r\n    });\r\n    return _a = {},\r\n        _a[STR_CORE /* @min:core */] = coreExtensions,\r\n        _a[STR_CHANNELS /* @min:channels */] = channels,\r\n        _a;\r\n}\r\nfunction _isPluginPresent(thePlugin, plugins) {\r\n    var exists = false;\r\n    arrForEach(plugins, function (plugin) {\r\n        if (plugin === thePlugin) {\r\n            exists = true;\r\n            return -1;\r\n        }\r\n    });\r\n    return exists;\r\n}\r\nfunction _deepMergeConfig(details, target, newValues, merge) {\r\n    // Lets assign the new values to the existing config\r\n    if (newValues) {\r\n        objForEachKey(newValues, function (key, value) {\r\n            if (merge) {\r\n                if (isPlainObject(value) && isPlainObject(target[key])) {\r\n                    // The target is an object and it has a value\r\n                    _deepMergeConfig(details, target[key], value, merge);\r\n                }\r\n            }\r\n            if (merge && isPlainObject(value) && isPlainObject(target[key])) {\r\n                // The target is an object and it has a value\r\n                _deepMergeConfig(details, target[key], value, merge);\r\n            }\r\n            else {\r\n                // Just Assign (replace) and/or make the property dynamic\r\n                details.set(target, key, value);\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction _findWatcher(listeners, newWatcher) {\r\n    var theListener = null;\r\n    var idx = -1;\r\n    arrForEach(listeners, function (listener, lp) {\r\n        if (listener.w === newWatcher) {\r\n            theListener = listener;\r\n            idx = lp;\r\n            return -1;\r\n        }\r\n    });\r\n    return { i: idx, l: theListener };\r\n}\r\nfunction _addDelayedCfgListener(listeners, newWatcher) {\r\n    var theListener = _findWatcher(listeners, newWatcher).l;\r\n    if (!theListener) {\r\n        theListener = {\r\n            w: newWatcher,\r\n            rm: function () {\r\n                var fnd = _findWatcher(listeners, newWatcher);\r\n                if (fnd.i !== -1) {\r\n                    listeners[_DYN_SPLICE /* @min:%2esplice */](fnd.i, 1);\r\n                }\r\n            }\r\n        };\r\n        listeners[_DYN_PUSH /* @min:%2epush */](theListener);\r\n    }\r\n    return theListener;\r\n}\r\nfunction _registerDelayedCfgListener(config, listeners, logger) {\r\n    arrForEach(listeners, function (listener) {\r\n        var unloadHdl = onConfigChange(config, listener.w, logger);\r\n        delete listener.w; // Clear the listener reference so it will get garbage collected.\r\n        // replace the remove function\r\n        listener.rm = function () {\r\n            unloadHdl.rm();\r\n        };\r\n    });\r\n}\r\n// Moved this outside of the closure to reduce the retained memory footprint\r\nfunction _initDebugListener(configHandler, unloadContainer, notificationManager, debugListener) {\r\n    // Will get recalled if any referenced config values are changed\r\n    unloadContainer.add(configHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n        var disableDbgExt = details.cfg.disableDbgExt;\r\n        if (disableDbgExt === true && debugListener) {\r\n            // Remove any previously loaded debug listener\r\n            notificationManager[_DYN_REMOVE_NOTIFICATION_0 /* @min:%2eremoveNotificationListener */](debugListener);\r\n            debugListener = null;\r\n        }\r\n        if (notificationManager && !debugListener && disableDbgExt !== true) {\r\n            debugListener = getDebugListener(details.cfg);\r\n            notificationManager[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */](debugListener);\r\n        }\r\n    }));\r\n    return debugListener;\r\n}\r\n// Moved this outside of the closure to reduce the retained memory footprint\r\nfunction _createUnloadHook(unloadHook) {\r\n    return objDefine({\r\n        rm: function () {\r\n            unloadHook.rm();\r\n        }\r\n    }, \"toJSON\", { v: function () { return \"aicore::onCfgChange<\" + JSON.stringify(unloadHook) + \">\"; } });\r\n}\r\n/**\r\n * @group Classes\r\n * @group Entrypoint\r\n */\r\nvar AppInsightsCore = /** @class */ (function () {\r\n    function AppInsightsCore() {\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _configHandler;\r\n        var _isInitialized;\r\n        var _logger;\r\n        var _eventQueue;\r\n        var _notificationManager;\r\n        var _perfManager;\r\n        var _cfgPerfManager;\r\n        var _cookieManager;\r\n        var _pluginChain;\r\n        var _configExtensions;\r\n        var _channelConfig;\r\n        var _channels;\r\n        var _isUnloading;\r\n        var _telemetryInitializerPlugin;\r\n        var _internalLogsEventName;\r\n        var _evtNamespace;\r\n        var _unloadHandlers;\r\n        var _hookContainer;\r\n        var _debugListener;\r\n        var _traceCtx;\r\n        var _instrumentationKey;\r\n        var _cfgListeners;\r\n        var _extensions;\r\n        var _pluginVersionStringArr;\r\n        var _pluginVersionString;\r\n        var _activeStatus; // to indicate if ikey or endpoint url promised is resolved or not\r\n        var _endpoint;\r\n        var _initInMemoMaxSize; // max event count limit during wait for init promises to be resolved\r\n        var _isStatusSet; // track if active status is set in case of init timeout and init promises setting the status twice\r\n        var _initTimer;\r\n        /**\r\n         * Internal log poller\r\n         */\r\n        var _internalLogPoller;\r\n        var _internalLogPollerListening;\r\n        var _forceStopInternalLogPoller;\r\n        dynamicProto(AppInsightsCore, this, function (_self) {\r\n            // Set the default values (also called during teardown)\r\n            _initDefaults();\r\n            // Special internal method to allow the unit tests and DebugPlugin to hook embedded objects\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_extensions, _eventQueue];\r\n            };\r\n            _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = function () { return _isInitialized; };\r\n            // since version 3.3.0\r\n            _self.activeStatus = function () { return _activeStatus; };\r\n            // since version 3.3.0\r\n            // internal\r\n            _self._setPendingStatus = function () {\r\n                _activeStatus = 3 /* eActiveStatus.PENDING */;\r\n            };\r\n            // Creating the self.initialize = ()\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, extensions, logger, notificationManager) {\r\n                if (_isUnloading) {\r\n                    throwError(strSdkUnloadingError);\r\n                }\r\n                // Make sure core is only initialized once\r\n                if (_self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]()) {\r\n                    throwError(\"Core cannot be initialized more than once\");\r\n                }\r\n                _configHandler = createDynamicConfig(config, defaultConfig, logger || _self[_DYN_LOGGER /* @min:%2elogger */], false);\r\n                // Re-assigning the local config property so we don't have any references to the passed value and it can be garbage collected\r\n                config = _configHandler.cfg;\r\n                // This will be \"re-run\" if the referenced config properties are changed\r\n                _addUnloadHook(_configHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n                    var rootCfg = details.cfg;\r\n                    var isPending = _activeStatus === 3 /* eActiveStatus.PENDING */;\r\n                    if (isPending) {\r\n                        // means waiting for previous promises to be resolved, won't apply new changes\r\n                        return;\r\n                    }\r\n                    _initInMemoMaxSize = rootCfg.initInMemoMaxSize || maxInitQueueSize;\r\n                    // app Insights core only handle ikey and endpointurl, aisku will handle cs\r\n                    var ikey = rootCfg[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                    var endpointUrl = rootCfg.endpointUrl; // do not need to validate endpoint url, if it is null, default one will be set by sender\r\n                    if (isNullOrUndefined(ikey)) {\r\n                        _instrumentationKey = null;\r\n                        // if new ikey is null, set status to be inactive, all new events will be saved in memory or dropped\r\n                        _activeStatus = ActiveStatus[_DYN__INACTIVE /* @min:%2eINACTIVE */];\r\n                        var msg = \"Please provide instrumentation key\";\r\n                        if (!_isInitialized) {\r\n                            // only throw error during initialization\r\n                            throwError(msg);\r\n                        }\r\n                        else {\r\n                            _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 100 /* _eInternalMessageId.InvalidInstrumentationKey */, msg);\r\n                            _releaseQueues();\r\n                        }\r\n                        return;\r\n                    }\r\n                    var promises = [];\r\n                    if (isPromiseLike(ikey)) {\r\n                        promises[_DYN_PUSH /* @min:%2epush */](ikey);\r\n                        _instrumentationKey = null; // reset current local ikey variable (otherwise it will always be the previous ikeys if timeout is called before promise cb)\r\n                    }\r\n                    else {\r\n                        // string\r\n                        _instrumentationKey = ikey;\r\n                    }\r\n                    if (isPromiseLike(endpointUrl)) {\r\n                        promises[_DYN_PUSH /* @min:%2epush */](endpointUrl);\r\n                        _endpoint = null; // reset current local endpoint variable (otherwise it will always be the previous urls if timeout is called before promise cb)\r\n                    }\r\n                    else {\r\n                        // string or null\r\n                        _endpoint = endpointUrl;\r\n                    }\r\n                    // at least have one promise\r\n                    if (promises[_DYN_LENGTH /* @min:%2elength */]) {\r\n                        // reset to false for new dynamic changes\r\n                        _isStatusSet = false;\r\n                        _activeStatus = 3 /* eActiveStatus.PENDING */;\r\n                        var initTimeout = isNotNullOrUndefined(rootCfg.initTimeOut) ? rootCfg.initTimeOut : maxInitTimeout; // rootCfg.initTimeOut could be 0\r\n                        var allPromises = createSyncAllSettledPromise(promises);\r\n                        _initTimer = scheduleTimeout(function () {\r\n                            // set _isStatusSet to true\r\n                            // set active status\r\n                            // release queues\r\n                            _initTimer = null;\r\n                            if (!_isStatusSet) {\r\n                                _setStatus();\r\n                            }\r\n                        }, initTimeout);\r\n                        doAwaitResponse(allPromises, function (response) {\r\n                            try {\r\n                                if (_isStatusSet) {\r\n                                    // promises take too long to resolve, ignore them\r\n                                    // active status should be set by timeout already\r\n                                    return;\r\n                                }\r\n                                if (!response.rejected) {\r\n                                    var values = response[_DYN_VALUE /* @min:%2evalue */];\r\n                                    if (values && values[_DYN_LENGTH /* @min:%2elength */]) {\r\n                                        // ikey\r\n                                        var ikeyRes = values[0];\r\n                                        _instrumentationKey = ikeyRes && ikeyRes[_DYN_VALUE /* @min:%2evalue */];\r\n                                        // endpoint\r\n                                        if (values[_DYN_LENGTH /* @min:%2elength */] > 1) {\r\n                                            var endpointRes = values[1];\r\n                                            _endpoint = endpointRes && endpointRes[_DYN_VALUE /* @min:%2evalue */];\r\n                                        }\r\n                                    }\r\n                                    if (_instrumentationKey) {\r\n                                        // if ikey is null, no need to trigger extra dynamic changes for extensions\r\n                                        config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */] = _instrumentationKey; // set config.instrumentationKey for extensions to consume\r\n                                        config.endpointUrl = _endpoint; // set config.endpointUrl for extensions to consume\r\n                                    }\r\n                                }\r\n                                // set _isStatusSet to true\r\n                                // set active status\r\n                                // release queues\r\n                                _setStatus();\r\n                            }\r\n                            catch (e) {\r\n                                if (!_isStatusSet) {\r\n                                    _setStatus();\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        // means no promises\r\n                        _setStatus();\r\n                    }\r\n                    //_instrumentationKey = details.cfg.instrumentationKey;\r\n                    // Mark the extensionConfig and all first level keys as referenced\r\n                    // This is so that calls to getExtCfg() will always return the same object\r\n                    // Even when a user may \"re-assign\" the plugin properties (or it's unloaded/reloaded)\r\n                    var extCfg = details.ref(details.cfg, STR_EXTENSION_CONFIG);\r\n                    objForEachKey(extCfg, function (key) {\r\n                        details.ref(extCfg, key);\r\n                    });\r\n                }));\r\n                _notificationManager = notificationManager;\r\n                // Initialize the debug listener outside of the closure to reduce the retained memory footprint\r\n                _debugListener = _initDebugListener(_configHandler, _hookContainer, _notificationManager && _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */](), _debugListener);\r\n                _initPerfManager();\r\n                _self[_DYN_LOGGER /* @min:%2elogger */] = logger;\r\n                var cfgExtensions = config[STR_EXTENSIONS /* @min:%2eextensions */];\r\n                // Extension validation\r\n                _configExtensions = [];\r\n                _configExtensions[_DYN_PUSH /* @min:%2epush */].apply(_configExtensions, __spreadArray(__spreadArray([], extensions, false), cfgExtensions, false));\r\n                _channelConfig = config[STR_CHANNELS /* @min:%2echannels */];\r\n                _initPluginChain(null);\r\n                if (!_channels || _channels[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n                    throwError(\"No \" + STR_CHANNELS + \" available\");\r\n                }\r\n                if (_channelConfig && _channelConfig[_DYN_LENGTH /* @min:%2elength */] > 1) {\r\n                    var teeController = _self[_DYN_GET_PLUGIN /* @min:%2egetPlugin */](\"TeeChannelController\");\r\n                    if (!teeController || !teeController.plugin) {\r\n                        _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 28 /* _eInternalMessageId.SenderNotInitialized */, \"TeeChannel required\");\r\n                    }\r\n                }\r\n                _registerDelayedCfgListener(config, _cfgListeners, _logger);\r\n                _cfgListeners = null;\r\n                _isInitialized = true;\r\n                if (_activeStatus === ActiveStatus.ACTIVE) {\r\n                    _releaseQueues();\r\n                }\r\n            };\r\n            _self.getChannels = function () {\r\n                var controls = [];\r\n                if (_channels) {\r\n                    arrForEach(_channels, function (channel) {\r\n                        controls[_DYN_PUSH /* @min:%2epush */](channel);\r\n                    });\r\n                }\r\n                return objFreeze(controls);\r\n            };\r\n            _self.track = function (telemetryItem) {\r\n                doPerf(_self[STR_GET_PERF_MGR /* @min:%2egetPerfMgr */](), function () { return \"AppInsightsCore:track\"; }, function () {\r\n                    if (telemetryItem === null) {\r\n                        _notifyInvalidEvent(telemetryItem);\r\n                        // throw error\r\n                        throwError(\"Invalid telemetry item\");\r\n                    }\r\n                    // do basic validation before sending it through the pipeline\r\n                    if (!telemetryItem[_DYN_NAME /* @min:%2ename */] && isNullOrUndefined(telemetryItem[_DYN_NAME /* @min:%2ename */])) {\r\n                        _notifyInvalidEvent(telemetryItem);\r\n                        throwError(\"telemetry name required\");\r\n                    }\r\n                    // setup default iKey if not passed in\r\n                    telemetryItem[_DYN_I_KEY /* @min:%2eiKey */] = telemetryItem[_DYN_I_KEY /* @min:%2eiKey */] || _instrumentationKey;\r\n                    // add default timestamp if not passed in\r\n                    telemetryItem[_DYN_TIME /* @min:%2etime */] = telemetryItem[_DYN_TIME /* @min:%2etime */] || toISOString(new Date());\r\n                    // Common Schema 4.0\r\n                    telemetryItem.ver = telemetryItem.ver || \"4.0\";\r\n                    if (!_isUnloading && _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]() && _activeStatus === ActiveStatus.ACTIVE) {\r\n                        // Process the telemetry plugin chain\r\n                        _createTelCtx()[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](telemetryItem);\r\n                    }\r\n                    else if (_activeStatus !== ActiveStatus[_DYN__INACTIVE /* @min:%2eINACTIVE */]) {\r\n                        // Queue events until all extensions are initialized\r\n                        if (_eventQueue[_DYN_LENGTH /* @min:%2elength */] <= _initInMemoMaxSize) {\r\n                            // set limit, if full, stop adding new events\r\n                            _eventQueue[_DYN_PUSH /* @min:%2epush */](telemetryItem);\r\n                        }\r\n                    }\r\n                }, function () { return ({ item: telemetryItem }); }, !(telemetryItem.sync));\r\n            };\r\n            _self[_DYN_GET_PROCESS_TEL_CONT2 /* @min:%2egetProcessTelContext */] = _createTelCtx;\r\n            _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */] = function () {\r\n                if (!_notificationManager) {\r\n                    _notificationManager = new NotificationManager(_configHandler.cfg);\r\n                    // For backward compatibility only\r\n                    _self[strNotificationManager] = _notificationManager;\r\n                }\r\n                return _notificationManager;\r\n            };\r\n            /**\r\n             * Adds a notification listener. The SDK calls methods on the listener when an appropriate notification is raised.\r\n             * The added plugins must raise notifications. If the plugins do not implement the notifications, then no methods will be\r\n             * called.\r\n             * @param listener - An INotificationListener object.\r\n             */\r\n            _self[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */] = function (listener) {\r\n                _self.getNotifyMgr()[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */](listener);\r\n            };\r\n            /**\r\n             * Removes all instances of the listener.\r\n             * @param listener - INotificationListener to remove.\r\n             */\r\n            _self[_DYN_REMOVE_NOTIFICATION_0 /* @min:%2eremoveNotificationListener */] = function (listener) {\r\n                if (_notificationManager) {\r\n                    _notificationManager[_DYN_REMOVE_NOTIFICATION_0 /* @min:%2eremoveNotificationListener */](listener);\r\n                }\r\n            };\r\n            _self.getCookieMgr = function () {\r\n                if (!_cookieManager) {\r\n                    _cookieManager = createCookieMgr(_configHandler.cfg, _self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                }\r\n                return _cookieManager;\r\n            };\r\n            _self.setCookieMgr = function (cookieMgr) {\r\n                if (_cookieManager !== cookieMgr) {\r\n                    runTargetUnload(_cookieManager, false);\r\n                    _cookieManager = cookieMgr;\r\n                }\r\n            };\r\n            _self[STR_GET_PERF_MGR /* @min:%2egetPerfMgr */] = function () {\r\n                return _perfManager || _cfgPerfManager || getGblPerfMgr();\r\n            };\r\n            _self.setPerfMgr = function (perfMgr) {\r\n                _perfManager = perfMgr;\r\n            };\r\n            _self.eventCnt = function () {\r\n                return _eventQueue[_DYN_LENGTH /* @min:%2elength */];\r\n            };\r\n            _self.releaseQueue = function () {\r\n                if (_isInitialized && _eventQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var eventQueue = _eventQueue;\r\n                    _eventQueue = [];\r\n                    if (_activeStatus === 2 /* eActiveStatus.ACTIVE */) {\r\n                        arrForEach(eventQueue, function (event) {\r\n                            event[_DYN_I_KEY /* @min:%2eiKey */] = event[_DYN_I_KEY /* @min:%2eiKey */] || _instrumentationKey;\r\n                            _createTelCtx()[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](event);\r\n                        });\r\n                    }\r\n                    else {\r\n                        // new one for msg ikey\r\n                        _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 20 /* _eInternalMessageId.FailedToSendQueuedTelemetry */, \"core init status is not active\");\r\n                    }\r\n                }\r\n            };\r\n            _self[_DYN_POLL_INTERNAL_LOGS /* @min:%2epollInternalLogs */] = function (eventName) {\r\n                _internalLogsEventName = eventName || null;\r\n                _forceStopInternalLogPoller = false;\r\n                _internalLogPoller && _internalLogPoller[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                return _startLogPoller(true);\r\n            };\r\n            function _setStatus() {\r\n                _isStatusSet = true;\r\n                if (isNullOrUndefined(_instrumentationKey)) {\r\n                    _activeStatus = ActiveStatus[_DYN__INACTIVE /* @min:%2eINACTIVE */];\r\n                    _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 112 /* _eInternalMessageId.InitPromiseException */, \"ikey can't be resolved from promises\");\r\n                }\r\n                else {\r\n                    _activeStatus = ActiveStatus.ACTIVE;\r\n                }\r\n                _releaseQueues();\r\n            }\r\n            function _releaseQueues() {\r\n                if (_isInitialized) {\r\n                    _self.releaseQueue();\r\n                    _self[_DYN_POLL_INTERNAL_LOGS /* @min:%2epollInternalLogs */]();\r\n                }\r\n            }\r\n            function _startLogPoller(alwaysStart) {\r\n                if ((!_internalLogPoller || !_internalLogPoller[_DYN_ENABLED /* @min:%2eenabled */]) && !_forceStopInternalLogPoller) {\r\n                    var shouldStart = alwaysStart || (_logger && _logger.queue[_DYN_LENGTH /* @min:%2elength */] > 0);\r\n                    if (shouldStart) {\r\n                        if (!_internalLogPollerListening) {\r\n                            _internalLogPollerListening = true;\r\n                            // listen for any configuration changes so that changes to the\r\n                            // interval will cause the timer to be re-initialized\r\n                            _addUnloadHook(_configHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n                                var interval = details.cfg.diagnosticLogInterval;\r\n                                if (!interval || !(interval > 0)) {\r\n                                    interval = 10000;\r\n                                }\r\n                                var isRunning = false;\r\n                                if (_internalLogPoller) {\r\n                                    // It was already created so remember it's running and cancel\r\n                                    isRunning = _internalLogPoller[_DYN_ENABLED /* @min:%2eenabled */];\r\n                                    _internalLogPoller[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                                }\r\n                                // Create / reconfigure\r\n                                _internalLogPoller = createTimeout(_flushInternalLogs, interval);\r\n                                _internalLogPoller.unref();\r\n                                // Restart if previously running\r\n                                _internalLogPoller[_DYN_ENABLED /* @min:%2eenabled */] = isRunning;\r\n                            }));\r\n                        }\r\n                        _internalLogPoller[_DYN_ENABLED /* @min:%2eenabled */] = true;\r\n                    }\r\n                }\r\n                return _internalLogPoller;\r\n            }\r\n            _self[_DYN_STOP_POLLING_INTERNA3 /* @min:%2estopPollingInternalLogs */] = function () {\r\n                _forceStopInternalLogPoller = true;\r\n                _internalLogPoller && _internalLogPoller[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                _flushInternalLogs();\r\n            };\r\n            // Add addTelemetryInitializer\r\n            proxyFunctions(_self, function () { return _telemetryInitializerPlugin; }, [\"addTelemetryInitializer\"]);\r\n            _self[_DYN_UNLOAD /* @min:%2eunload */] = function (isAsync, unloadComplete, cbTimeout) {\r\n                var _a;\r\n                if (isAsync === void 0) { isAsync = true; }\r\n                if (!_isInitialized) {\r\n                    // The SDK is not initialized\r\n                    throwError(strSdkNotInitialized);\r\n                }\r\n                // Check if the SDK still unloading so throw\r\n                if (_isUnloading) {\r\n                    // The SDK is already unloading\r\n                    throwError(strSdkUnloadingError);\r\n                }\r\n                var unloadState = (_a = {\r\n                        reason: 50 /* TelemetryUnloadReason.SdkUnload */\r\n                    },\r\n                    _a[_DYN_IS_ASYNC /* @min:isAsync */] = isAsync,\r\n                    _a.flushComplete = false,\r\n                    _a);\r\n                var result;\r\n                if (isAsync && !unloadComplete) {\r\n                    result = createPromise(function (resolve) {\r\n                        // Set the callback to the promise resolve callback\r\n                        unloadComplete = resolve;\r\n                    });\r\n                }\r\n                var processUnloadCtx = createProcessTelemetryUnloadContext(_getPluginChain(), _self);\r\n                processUnloadCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](function () {\r\n                    _hookContainer.run(_self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                    // Run any \"unload\" functions for the _cookieManager, _notificationManager and _logger\r\n                    doUnloadAll([_cookieManager, _notificationManager, _logger], isAsync, function () {\r\n                        _initDefaults();\r\n                        unloadComplete && unloadComplete(unloadState);\r\n                    });\r\n                }, _self);\r\n                function _doUnload(flushComplete) {\r\n                    unloadState.flushComplete = flushComplete;\r\n                    _isUnloading = true;\r\n                    // Run all of the unload handlers first (before unloading the plugins)\r\n                    _unloadHandlers.run(processUnloadCtx, unloadState);\r\n                    // Stop polling the internal logs\r\n                    _self[_DYN_STOP_POLLING_INTERNA3 /* @min:%2estopPollingInternalLogs */]();\r\n                    // Start unloading the components, from this point onwards the SDK should be considered to be in an unstable state\r\n                    processUnloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n                }\r\n                _flushInternalLogs();\r\n                if (!_flushChannels(isAsync, _doUnload, 6 /* SendRequestReason.SdkUnload */, cbTimeout)) {\r\n                    _doUnload(false);\r\n                }\r\n                return result;\r\n            };\r\n            _self[_DYN_GET_PLUGIN /* @min:%2egetPlugin */] = _getPlugin;\r\n            _self.addPlugin = function (plugin, replaceExisting, isAsync, addCb) {\r\n                if (!plugin) {\r\n                    addCb && addCb(false);\r\n                    _logOrThrowError(strValidationError);\r\n                    return;\r\n                }\r\n                var existingPlugin = _getPlugin(plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n                if (existingPlugin && !replaceExisting) {\r\n                    addCb && addCb(false);\r\n                    _logOrThrowError(\"Plugin [\" + plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"] is already loaded!\");\r\n                    return;\r\n                }\r\n                var updateState = {\r\n                    reason: 16 /* TelemetryUpdateReason.PluginAdded */\r\n                };\r\n                function _addPlugin(removed) {\r\n                    _configExtensions[_DYN_PUSH /* @min:%2epush */](plugin);\r\n                    updateState.added = [plugin];\r\n                    // Re-Initialize the plugin chain\r\n                    _initPluginChain(updateState);\r\n                    addCb && addCb(true);\r\n                }\r\n                if (existingPlugin) {\r\n                    var removedPlugins_1 = [existingPlugin.plugin];\r\n                    var unloadState = {\r\n                        reason: 2 /* TelemetryUnloadReason.PluginReplace */,\r\n                        isAsync: !!isAsync\r\n                    };\r\n                    _removePlugins(removedPlugins_1, unloadState, function (removed) {\r\n                        if (!removed) {\r\n                            // Previous plugin was successfully removed or was not installed\r\n                            addCb && addCb(false);\r\n                        }\r\n                        else {\r\n                            updateState.removed = removedPlugins_1;\r\n                            updateState.reason |= 32 /* TelemetryUpdateReason.PluginRemoved */;\r\n                            _addPlugin(true);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    _addPlugin(false);\r\n                }\r\n            };\r\n            _self.updateCfg = function (newConfig, mergeExisting) {\r\n                if (mergeExisting === void 0) { mergeExisting = true; }\r\n                var updateState;\r\n                if (_self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]()) {\r\n                    updateState = {\r\n                        reason: 1 /* TelemetryUpdateReason.ConfigurationChanged */,\r\n                        cfg: _configHandler.cfg,\r\n                        oldCfg: deepExtend({}, _configHandler.cfg),\r\n                        newConfig: deepExtend({}, newConfig),\r\n                        merge: mergeExisting\r\n                    };\r\n                    newConfig = updateState.newConfig;\r\n                    var cfg = _configHandler.cfg;\r\n                    // replace the immutable (if initialized) values\r\n                    // We don't currently allow updating the extensions and channels via the update config\r\n                    // So overwriting any user provided values to reuse the existing values\r\n                    newConfig[STR_EXTENSIONS /* @min:%2eextensions */] = cfg[STR_EXTENSIONS /* @min:%2eextensions */];\r\n                    newConfig[STR_CHANNELS /* @min:%2echannels */] = cfg[STR_CHANNELS /* @min:%2echannels */];\r\n                }\r\n                // Explicitly blocking any previous config watchers so that they don't get called because\r\n                // of this bulk update (Probably not necessary)\r\n                _configHandler._block(function (details) {\r\n                    // Lets assign the new values to the existing config either overwriting or re-assigning\r\n                    var theConfig = details.cfg;\r\n                    _deepMergeConfig(details, theConfig, newConfig, mergeExisting);\r\n                    if (!mergeExisting) {\r\n                        // Remove (unassign) the values \"missing\" from the newConfig and also not in the default config\r\n                        objForEachKey(theConfig, function (key) {\r\n                            if (!objHasOwn(newConfig, key)) {\r\n                                // Set the value to undefined\r\n                                details.set(theConfig, key, UNDEFINED_VALUE);\r\n                            }\r\n                        });\r\n                    }\r\n                    // Apply defaults to the new config\r\n                    details[_DYN_SET_DF /* @min:%2esetDf */](theConfig, defaultConfig);\r\n                }, true);\r\n                // Now execute all of the listeners (synchronously) so they update their values immediately\r\n                _configHandler[_DYN_NOTIFY /* @min:%2enotify */]();\r\n                if (updateState) {\r\n                    _doUpdate(updateState);\r\n                }\r\n            };\r\n            _self.evtNamespace = function () {\r\n                return _evtNamespace;\r\n            };\r\n            _self.flush = _flushChannels;\r\n            _self.getTraceCtx = function (createNew) {\r\n                if (!_traceCtx) {\r\n                    _traceCtx = createDistributedTraceContext();\r\n                }\r\n                return _traceCtx;\r\n            };\r\n            _self.setTraceCtx = function (traceCtx) {\r\n                _traceCtx = traceCtx || null;\r\n            };\r\n            _self.addUnloadHook = _addUnloadHook;\r\n            // Create the addUnloadCb\r\n            proxyFunctionAs(_self, \"addUnloadCb\", function () { return _unloadHandlers; }, \"add\");\r\n            _self.onCfgChange = function (handler) {\r\n                var unloadHook;\r\n                if (!_isInitialized) {\r\n                    unloadHook = _addDelayedCfgListener(_cfgListeners, handler);\r\n                }\r\n                else {\r\n                    unloadHook = onConfigChange(_configHandler.cfg, handler, _self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                }\r\n                return _createUnloadHook(unloadHook);\r\n            };\r\n            _self.getWParam = function () {\r\n                return (hasDocument() || !!_configHandler.cfg.enableWParam) ? 0 : -1;\r\n            };\r\n            function _setPluginVersions() {\r\n                var thePlugins = {};\r\n                _pluginVersionStringArr = [];\r\n                var _addPluginVersions = function (plugins) {\r\n                    if (plugins) {\r\n                        arrForEach(plugins, function (plugin) {\r\n                            if (plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] && plugin[_DYN_VERSION /* @min:%2eversion */] && !thePlugins[plugin.identifier]) {\r\n                                var ver = plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"=\" + plugin[_DYN_VERSION /* @min:%2eversion */];\r\n                                _pluginVersionStringArr[_DYN_PUSH /* @min:%2epush */](ver);\r\n                                thePlugins[plugin.identifier] = plugin;\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                _addPluginVersions(_channels);\r\n                if (_channelConfig) {\r\n                    arrForEach(_channelConfig, function (channels) {\r\n                        _addPluginVersions(channels);\r\n                    });\r\n                }\r\n                _addPluginVersions(_configExtensions);\r\n            }\r\n            function _initDefaults() {\r\n                _isInitialized = false;\r\n                // Use a default logger so initialization errors are not dropped on the floor with full logging\r\n                _configHandler = createDynamicConfig({}, defaultConfig, _self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                // Set the logging level to critical so that any critical initialization failures are displayed on the console\r\n                _configHandler.cfg[_DYN_LOGGING_LEVEL_CONSOL4 /* @min:%2eloggingLevelConsole */] = 1 /* eLoggingSeverity.CRITICAL */;\r\n                // Define _self.config\r\n                objDefine(_self, \"config\", {\r\n                    g: function () { return _configHandler.cfg; },\r\n                    s: function (newValue) {\r\n                        _self.updateCfg(newValue, false);\r\n                    }\r\n                });\r\n                objDefine(_self, \"pluginVersionStringArr\", {\r\n                    g: function () {\r\n                        if (!_pluginVersionStringArr) {\r\n                            _setPluginVersions();\r\n                        }\r\n                        return _pluginVersionStringArr;\r\n                    }\r\n                });\r\n                objDefine(_self, \"pluginVersionString\", {\r\n                    g: function () {\r\n                        if (!_pluginVersionString) {\r\n                            if (!_pluginVersionStringArr) {\r\n                                _setPluginVersions();\r\n                            }\r\n                            _pluginVersionString = _pluginVersionStringArr.join(\";\");\r\n                        }\r\n                        return _pluginVersionString || STR_EMPTY;\r\n                    }\r\n                });\r\n                objDefine(_self, \"logger\", {\r\n                    g: function () {\r\n                        if (!_logger) {\r\n                            _logger = new DiagnosticLogger(_configHandler.cfg);\r\n                            _configHandler[_DYN_LOGGER /* @min:%2elogger */] = _logger;\r\n                        }\r\n                        return _logger;\r\n                    },\r\n                    s: function (newLogger) {\r\n                        _configHandler[_DYN_LOGGER /* @min:%2elogger */] = newLogger;\r\n                        if (_logger !== newLogger) {\r\n                            runTargetUnload(_logger, false);\r\n                            _logger = newLogger;\r\n                        }\r\n                    }\r\n                });\r\n                _self[_DYN_LOGGER /* @min:%2elogger */] = new DiagnosticLogger(_configHandler.cfg);\r\n                _extensions = [];\r\n                var cfgExtensions = _self.config[STR_EXTENSIONS /* @min:%2eextensions */] || [];\r\n                cfgExtensions.splice(0, cfgExtensions[_DYN_LENGTH /* @min:%2elength */]);\r\n                arrAppend(cfgExtensions, _extensions);\r\n                _telemetryInitializerPlugin = new TelemetryInitializerPlugin();\r\n                _eventQueue = [];\r\n                runTargetUnload(_notificationManager, false);\r\n                _notificationManager = null;\r\n                _perfManager = null;\r\n                _cfgPerfManager = null;\r\n                runTargetUnload(_cookieManager, false);\r\n                _cookieManager = null;\r\n                _pluginChain = null;\r\n                _configExtensions = [];\r\n                _channelConfig = null;\r\n                _channels = null;\r\n                _isUnloading = false;\r\n                _internalLogsEventName = null;\r\n                _evtNamespace = createUniqueNamespace(\"AIBaseCore\", true);\r\n                _unloadHandlers = createUnloadHandlerContainer();\r\n                _traceCtx = null;\r\n                _instrumentationKey = null;\r\n                _hookContainer = createUnloadHookContainer();\r\n                _cfgListeners = [];\r\n                _pluginVersionString = null;\r\n                _pluginVersionStringArr = null;\r\n                _forceStopInternalLogPoller = false;\r\n                _internalLogPoller = null;\r\n                _internalLogPollerListening = false;\r\n                _activeStatus = 0 /* eActiveStatus.NONE */; // default is None\r\n                _endpoint = null;\r\n                _initInMemoMaxSize = null;\r\n                _isStatusSet = false;\r\n                _initTimer = null;\r\n            }\r\n            function _createTelCtx() {\r\n                var theCtx = createProcessTelemetryContext(_getPluginChain(), _configHandler.cfg, _self);\r\n                theCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](_startLogPoller);\r\n                return theCtx;\r\n            }\r\n            // Initialize or Re-initialize the plugins\r\n            function _initPluginChain(updateState) {\r\n                // Extension validation\r\n                var theExtensions = _validateExtensions(_self[_DYN_LOGGER /* @min:%2elogger */], ChannelControllerPriority, _configExtensions);\r\n                _pluginChain = null;\r\n                _pluginVersionString = null;\r\n                _pluginVersionStringArr = null;\r\n                // Get the primary channel queue and include as part of the normal extensions\r\n                _channels = (_channelConfig || [])[0] || [];\r\n                // Add any channels provided in the extensions and sort them\r\n                _channels = sortPlugins(arrAppend(_channels, theExtensions[STR_CHANNELS /* @min:%2echannels */]));\r\n                // Create an array of all extensions, including the _channels\r\n                var allExtensions = arrAppend(sortPlugins(theExtensions[STR_CORE /* @min:%2ecore */]), _channels);\r\n                // Required to allow plugins to call core.getPlugin() during their own initialization\r\n                _extensions = objFreeze(allExtensions);\r\n                // This has a side effect of adding the extensions passed during initialization\r\n                // into the config.extensions, so you can see all of the extensions loaded.\r\n                // This will also get updated by the addPlugin() and remove plugin code.\r\n                var cfgExtensions = _self.config[STR_EXTENSIONS /* @min:%2eextensions */] || [];\r\n                cfgExtensions.splice(0, cfgExtensions[_DYN_LENGTH /* @min:%2elength */]);\r\n                arrAppend(cfgExtensions, _extensions);\r\n                var rootCtx = _createTelCtx();\r\n                // Initializing the channels first\r\n                if (_channels && _channels[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    initializePlugins(rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](_channels), allExtensions);\r\n                }\r\n                // Now initialize the normal extensions (explicitly not including the _channels as this can cause duplicate initialization)\r\n                initializePlugins(rootCtx, allExtensions);\r\n                if (updateState) {\r\n                    _doUpdate(updateState);\r\n                }\r\n            }\r\n            function _getPlugin(pluginIdentifier) {\r\n                var theExt = null;\r\n                var thePlugin = null;\r\n                var channelHosts = [];\r\n                arrForEach(_extensions, function (ext) {\r\n                    if (ext[_DYN_IDENTIFIER /* @min:%2eidentifier */] === pluginIdentifier && ext !== _telemetryInitializerPlugin) {\r\n                        thePlugin = ext;\r\n                        return -1;\r\n                    }\r\n                    if (ext.getChannel) {\r\n                        channelHosts[_DYN_PUSH /* @min:%2epush */](ext);\r\n                    }\r\n                });\r\n                if (!thePlugin && channelHosts[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    arrForEach(channelHosts, function (host) {\r\n                        thePlugin = host.getChannel(pluginIdentifier);\r\n                        if (!thePlugin) {\r\n                            return -1;\r\n                        }\r\n                    });\r\n                }\r\n                if (thePlugin) {\r\n                    theExt = {\r\n                        plugin: thePlugin,\r\n                        setEnabled: function (enabled) {\r\n                            _getPluginState(thePlugin)[STR_DISABLED] = !enabled;\r\n                        },\r\n                        isEnabled: function () {\r\n                            var pluginState = _getPluginState(thePlugin);\r\n                            return !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] && !pluginState[STR_DISABLED];\r\n                        },\r\n                        remove: function (isAsync, removeCb) {\r\n                            var _a;\r\n                            if (isAsync === void 0) { isAsync = true; }\r\n                            var pluginsToRemove = [thePlugin];\r\n                            var unloadState = (_a = {\r\n                                    reason: 1 /* TelemetryUnloadReason.PluginUnload */\r\n                                },\r\n                                _a[_DYN_IS_ASYNC /* @min:isAsync */] = isAsync,\r\n                                _a);\r\n                            _removePlugins(pluginsToRemove, unloadState, function (removed) {\r\n                                if (removed) {\r\n                                    // Re-Initialize the plugin chain\r\n                                    _initPluginChain({\r\n                                        reason: 32 /* TelemetryUpdateReason.PluginRemoved */,\r\n                                        removed: pluginsToRemove\r\n                                    });\r\n                                }\r\n                                removeCb && removeCb(removed);\r\n                            });\r\n                        }\r\n                    };\r\n                }\r\n                return theExt;\r\n            }\r\n            function _getPluginChain() {\r\n                if (!_pluginChain) {\r\n                    // copy the collection of extensions\r\n                    var extensions = (_extensions || []).slice();\r\n                    // During add / remove this may get called again, so don't read if already present\r\n                    if (arrIndexOf(extensions, _telemetryInitializerPlugin) === -1) {\r\n                        extensions[_DYN_PUSH /* @min:%2epush */](_telemetryInitializerPlugin);\r\n                    }\r\n                    _pluginChain = createTelemetryProxyChain(sortPlugins(extensions), _configHandler.cfg, _self);\r\n                }\r\n                return _pluginChain;\r\n            }\r\n            function _removePlugins(thePlugins, unloadState, removeComplete) {\r\n                if (thePlugins && thePlugins[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var unloadChain = createTelemetryProxyChain(thePlugins, _configHandler.cfg, _self);\r\n                    var unloadCtx = createProcessTelemetryUnloadContext(unloadChain, _self);\r\n                    unloadCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](function () {\r\n                        var removed = false;\r\n                        // Remove the listed config extensions\r\n                        var newConfigExtensions = [];\r\n                        arrForEach(_configExtensions, function (plugin, idx) {\r\n                            if (!_isPluginPresent(plugin, thePlugins)) {\r\n                                newConfigExtensions[_DYN_PUSH /* @min:%2epush */](plugin);\r\n                            }\r\n                            else {\r\n                                removed = true;\r\n                            }\r\n                        });\r\n                        _configExtensions = newConfigExtensions;\r\n                        _pluginVersionString = null;\r\n                        _pluginVersionStringArr = null;\r\n                        // Re-Create the channel config\r\n                        var newChannelConfig = [];\r\n                        if (_channelConfig) {\r\n                            arrForEach(_channelConfig, function (queue, idx) {\r\n                                var newQueue = [];\r\n                                arrForEach(queue, function (channel) {\r\n                                    if (!_isPluginPresent(channel, thePlugins)) {\r\n                                        newQueue[_DYN_PUSH /* @min:%2epush */](channel);\r\n                                    }\r\n                                    else {\r\n                                        removed = true;\r\n                                    }\r\n                                });\r\n                                newChannelConfig[_DYN_PUSH /* @min:%2epush */](newQueue);\r\n                            });\r\n                            _channelConfig = newChannelConfig;\r\n                        }\r\n                        removeComplete && removeComplete(removed);\r\n                        _startLogPoller();\r\n                    });\r\n                    unloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n                }\r\n                else {\r\n                    removeComplete(false);\r\n                }\r\n            }\r\n            function _flushInternalLogs() {\r\n                if (_logger && _logger.queue) {\r\n                    var queue = _logger.queue.slice(0);\r\n                    _logger.queue[_DYN_LENGTH /* @min:%2elength */] = 0;\r\n                    arrForEach(queue, function (logMessage) {\r\n                        var _a;\r\n                        var item = (_a = {},\r\n                            _a[_DYN_NAME /* @min:name */] = _internalLogsEventName ? _internalLogsEventName : \"InternalMessageId: \" + logMessage[_DYN_MESSAGE_ID /* @min:%2emessageId */],\r\n                            _a[_DYN_I_KEY /* @min:iKey */] = _instrumentationKey,\r\n                            _a[_DYN_TIME /* @min:time */] = toISOString(new Date()),\r\n                            _a.baseType = _InternalLogMessage.dataType,\r\n                            _a.baseData = { message: logMessage[_DYN_MESSAGE /* @min:%2emessage */] },\r\n                            _a);\r\n                        _self.track(item);\r\n                    });\r\n                }\r\n            }\r\n            function _flushChannels(isAsync, callBack, sendReason, cbTimeout) {\r\n                // Setting waiting to one so that we don't call the callBack until we finish iterating\r\n                var waiting = 1;\r\n                var doneIterating = false;\r\n                var cbTimer = null;\r\n                cbTimeout = cbTimeout || 5000;\r\n                function doCallback() {\r\n                    waiting--;\r\n                    if (doneIterating && waiting === 0) {\r\n                        cbTimer && cbTimer[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                        cbTimer = null;\r\n                        callBack && callBack(doneIterating);\r\n                        callBack = null;\r\n                    }\r\n                }\r\n                if (_channels && _channels[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var flushCtx = _createTelCtx()[_DYN_CREATE_NEW /* @min:%2ecreateNew */](_channels);\r\n                    flushCtx.iterate(function (plugin) {\r\n                        if (plugin.flush) {\r\n                            waiting++;\r\n                            var handled_1 = false;\r\n                            // Not all channels will call this callback for every scenario\r\n                            if (!plugin.flush(isAsync, function () {\r\n                                handled_1 = true;\r\n                                doCallback();\r\n                            }, sendReason)) {\r\n                                if (!handled_1) {\r\n                                    // If any channel doesn't return true and it didn't call the callback, then we should assume that the callback\r\n                                    // will never be called, so use a timeout to allow the channel(s) some time to \"finish\" before triggering any\r\n                                    // followup function (such as unloading)\r\n                                    if (isAsync && cbTimer == null) {\r\n                                        cbTimer = scheduleTimeout(function () {\r\n                                            cbTimer = null;\r\n                                            doCallback();\r\n                                        }, cbTimeout);\r\n                                    }\r\n                                    else {\r\n                                        doCallback();\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                doneIterating = true;\r\n                doCallback();\r\n                return true;\r\n            }\r\n            function _initPerfManager() {\r\n                // Save the previous config based performance manager creator to avoid creating new perf manager instances if unchanged\r\n                var prevCfgPerfMgr;\r\n                // Will get recalled if any referenced config values are changed\r\n                _addUnloadHook(_configHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n                    var enablePerfMgr = details.cfg.enablePerfMgr;\r\n                    if (enablePerfMgr) {\r\n                        var createPerfMgr = details.cfg[STR_CREATE_PERF_MGR /* @min:%2ecreatePerfMgr */];\r\n                        // for preCfgPerfMgr = createPerfMgr = null\r\n                        // initial createPerfMgr function should be _createPerfManager\r\n                        if ((prevCfgPerfMgr !== createPerfMgr) || !prevCfgPerfMgr) {\r\n                            if (!createPerfMgr) {\r\n                                createPerfMgr = _createPerfManager;\r\n                            }\r\n                            // Set the performance manager creation function if not defined\r\n                            getSetValue(details.cfg, STR_CREATE_PERF_MGR, createPerfMgr);\r\n                            prevCfgPerfMgr = createPerfMgr;\r\n                            // Remove any existing config based performance manager\r\n                            _cfgPerfManager = null;\r\n                        }\r\n                        // Only create the performance manager if it's not already created or manually set\r\n                        if (!_perfManager && !_cfgPerfManager && isFunction(createPerfMgr)) {\r\n                            // Create a new config based performance manager\r\n                            _cfgPerfManager = createPerfMgr(_self, _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */]());\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Remove any existing config based performance manager\r\n                        _cfgPerfManager = null;\r\n                        // Clear the previous cached value so it can be GC'd\r\n                        prevCfgPerfMgr = null;\r\n                    }\r\n                }));\r\n            }\r\n            function _doUpdate(updateState) {\r\n                var updateCtx = createProcessTelemetryUpdateContext(_getPluginChain(), _self);\r\n                updateCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](_startLogPoller);\r\n                if (!_self._updateHook || _self._updateHook(updateCtx, updateState) !== true) {\r\n                    updateCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](updateState);\r\n                }\r\n            }\r\n            function _logOrThrowError(message) {\r\n                var logger = _self[_DYN_LOGGER /* @min:%2elogger */];\r\n                if (logger) {\r\n                    // there should always be a logger\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, message);\r\n                    _startLogPoller();\r\n                }\r\n                else {\r\n                    throwError(message);\r\n                }\r\n            }\r\n            function _notifyInvalidEvent(telemetryItem) {\r\n                var manager = _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */]();\r\n                if (manager) {\r\n                    manager[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */]([telemetryItem], 2 /* eEventsDiscardedReason.InvalidEvent */);\r\n                }\r\n            }\r\n            function _addUnloadHook(hooks) {\r\n                _hookContainer.add(hooks);\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for AppInsightsCore.prototype.initialize.\r\n// Removed Stub for AppInsightsCore.prototype.getChannels.\r\n// Removed Stub for AppInsightsCore.prototype.track.\r\n// Removed Stub for AppInsightsCore.prototype.getProcessTelContext.\r\n// Removed Stub for AppInsightsCore.prototype.getNotifyMgr.\r\n// Removed Stub for AppInsightsCore.prototype.addNotificationListener.\r\n// Removed Stub for AppInsightsCore.prototype.removeNotificationListener.\r\n// Removed Stub for AppInsightsCore.prototype.getCookieMgr.\r\n// Removed Stub for AppInsightsCore.prototype.setCookieMgr.\r\n// Removed Stub for AppInsightsCore.prototype.getPerfMgr.\r\n// Removed Stub for AppInsightsCore.prototype.setPerfMgr.\r\n// Removed Stub for AppInsightsCore.prototype.eventCnt.\r\n// Removed Stub for AppInsightsCore.prototype.pollInternalLogs.\r\n// Removed Stub for AppInsightsCore.prototype.stopPollingInternalLogs.\r\n// Removed Stub for AppInsightsCore.prototype.addTelemetryInitializer.\r\n// Removed Stub for AppInsightsCore.prototype.unload.\r\n// Removed Stub for AppInsightsCore.prototype.getPlugin.\r\n// Removed Stub for AppInsightsCore.prototype.addPlugin.\r\n// Removed Stub for AppInsightsCore.prototype.updateCfg.\r\n// Removed Stub for AppInsightsCore.prototype.evtNamespace.\r\n// Removed Stub for AppInsightsCore.prototype.addUnloadCb.\r\n// Removed Stub for AppInsightsCore.prototype.flush.\r\n// Removed Stub for AppInsightsCore.prototype.getTraceCtx.\r\n// Removed Stub for AppInsightsCore.prototype.setTraceCtx.\r\n// Removed Stub for AppInsightsCore.prototype.addUnloadHook.\r\n// Removed Stub for AppInsightsCore.prototype.onCfgChange.\r\n// Removed Stub for AppInsightsCore.prototype.activeStatus.\r\n// Removed Stub for AppInsightsCore.prototype._setPendingStatus.\r\n// Removed Stub for AppInsightsCore.prototype.releaseQueue.\r\n// Removed Stub for AppInsightsCore.prototype._updateHook.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    AppInsightsCore.__ieDyn=1;\n\n    return AppInsightsCore;\r\n}());\r\nexport { AppInsightsCore };\r\n//# sourceMappingURL=AppInsightsCore.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n// \r\n// \r\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrAppend, arrForEach, dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_APPLY, _DYN_DIAG_LOG, _DYN_LENGTH, _DYN_PROCESS_NEXT, _DYN_SPLICE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { BaseTelemetryPlugin } from \"./BaseTelemetryPlugin\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { getExceptionName } from \"./HelperFuncs\";\r\nimport { STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nfunction _addInitializer(_initializers, id, telemetryInitializer) {\r\n    var theInitializer = {\r\n        id: id,\r\n        fn: telemetryInitializer\r\n    };\r\n    arrAppend(_initializers, theInitializer);\r\n    var handler = {\r\n        remove: function () {\r\n            arrForEach(_initializers, function (initializer, idx) {\r\n                if (initializer.id === theInitializer.id) {\r\n                    _initializers[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                    return -1;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    return handler;\r\n}\r\nfunction _runInitializers(_initializers, item, logger) {\r\n    var doNotSendItem = false;\r\n    var telemetryInitializersCount = _initializers[_DYN_LENGTH /* @min:%2elength */];\r\n    for (var i = 0; i < telemetryInitializersCount; ++i) {\r\n        var telemetryInitializer = _initializers[i];\r\n        if (telemetryInitializer) {\r\n            try {\r\n                if (telemetryInitializer.fn[_DYN_APPLY /* @min:%2eapply */](null, [item]) === false) {\r\n                    doNotSendItem = true;\r\n                    break;\r\n                }\r\n            }\r\n            catch (e) {\r\n                // log error but dont stop executing rest of the telemetry initializers\r\n                // doNotSendItem = true;\r\n                _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 64 /* _eInternalMessageId.TelemetryInitializerFailed */, \"Telemetry initializer failed: \" + getExceptionName(e), { exception: dumpObj(e) }, true);\r\n            }\r\n        }\r\n    }\r\n    return !doNotSendItem;\r\n}\r\nvar TelemetryInitializerPlugin = /** @class */ (function (_super) {\r\n    __extends(TelemetryInitializerPlugin, _super);\r\n    function TelemetryInitializerPlugin() {\r\n        var _this = _super.call(this) || this;\r\n        _this.identifier = \"TelemetryInitializerPlugin\";\r\n        _this.priority = 199;\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _id;\r\n        var _initializers;\r\n        _initDefaults();\r\n        dynamicProto(TelemetryInitializerPlugin, _this, function (_self, _base) {\r\n            _self.addTelemetryInitializer = function (telemetryInitializer) {\r\n                return _addInitializer(_initializers, _id++, telemetryInitializer);\r\n            };\r\n            _self[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */] = function (item, itemCtx) {\r\n                if (_runInitializers(_initializers, item, itemCtx ? itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */]() : _self[_DYN_DIAG_LOG /* @min:%2ediagLog */]())) {\r\n                    _self[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](item, itemCtx);\r\n                }\r\n            };\r\n            _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] = function () {\r\n                _initDefaults();\r\n            };\r\n        });\r\n        function _initDefaults() {\r\n            _id = 0;\r\n            _initializers = [];\r\n        }\r\n        return _this;\r\n    }\r\n// Removed Stub for TelemetryInitializerPlugin.prototype.addTelemetryInitializer.\r\n// Removed Stub for TelemetryInitializerPlugin.prototype.processTelemetry.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    TelemetryInitializerPlugin.__ieDyn=1;\n\n    return TelemetryInitializerPlugin;\r\n}(BaseTelemetryPlugin));\r\nexport { TelemetryInitializerPlugin };\r\n//# sourceMappingURL=TelemetryInitializerPlugin.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n// Licensed under the\r\nexport { correlationIdSetPrefix, correlationIdGetPrefix, correlationIdCanIncludeCorrelationHeader, correlationIdGetCorrelationContext, correlationIdGetCorrelationContextValue, dateTimeUtilsNow, dateTimeUtilsDuration, isInternalApplicationInsightsEndpoint, createDistributedTraceContextFromTrace } from \"./Util\";\r\nexport { ThrottleMgr } from \"./ThrottleMgr\";\r\nexport { parseConnectionString, ConnectionStringParser } from \"./ConnectionStringParser\";\r\nexport { RequestHeaders } from \"./RequestResponseHeaders\";\r\nexport { DisabledPropertyName, ProcessLegacy, SampleRate, HttpMethod, DEFAULT_BREEZE_ENDPOINT, DEFAULT_BREEZE_PATH, strNotSpecified } from \"./Constants\";\r\nexport { Envelope } from \"./Telemetry/Common/Envelope\";\r\nexport { Event } from \"./Telemetry/Event\";\r\nexport { Exception } from \"./Telemetry/Exception\";\r\nexport { Metric } from \"./Telemetry/Metric\";\r\nexport { PageView } from \"./Telemetry/PageView\";\r\nexport { RemoteDependencyData } from \"./Telemetry/RemoteDependencyData\";\r\nexport { Trace } from \"./Telemetry/Trace\";\r\nexport { PageViewPerformance } from \"./Telemetry/PageViewPerformance\";\r\nexport { Data } from \"./Telemetry/Common/Data\";\r\nexport { SeverityLevel } from \"./Interfaces/Contracts/SeverityLevel\";\r\nexport { ConfigurationManager } from \"./Interfaces/IConfig\";\r\nexport { ContextTagKeys } from \"./Interfaces/Contracts/ContextTagKeys\";\r\nexport { dataSanitizeKeyAndAddUniqueness, dataSanitizeKey, dataSanitizeString, dataSanitizeUrl, dataSanitizeMessage, dataSanitizeException, dataSanitizeProperties, dataSanitizeMeasurements, dataSanitizeId, dataSanitizeInput, dsPadNumber } from \"./Telemetry/Common/DataSanitizer\";\r\nexport { TelemetryItemCreator, createTelemetryItem } from \"./TelemetryItemCreator\";\r\nexport { CtxTagKeys, Extensions } from \"./Interfaces/PartAExtensions\";\r\nexport { DistributedTracingModes, EventPersistence } from \"./Enums\";\r\nexport { stringToBoolOrDefault, msToTimeSpan, getExtensionByName, isCrossOriginError } from \"./HelperFuncs\";\r\nexport { isBeaconsSupported as isBeaconApiSupported, createTraceParent, parseTraceParent, isValidTraceId, isValidSpanId, isValidTraceParent, isSampledFlag, formatTraceParent, findW3cTraceParent, findAllScripts } from \"@microsoft/applicationinsights-core-js\";\r\nexport { createDomEvent } from \"./DomHelperFuncs\";\r\nexport { utlDisableStorage, utlEnableStorage, utlCanUseLocalStorage, utlGetLocalStorage, utlSetLocalStorage, utlRemoveStorage, utlCanUseSessionStorage, utlGetSessionStorageKeys, utlGetSessionStorage, utlSetSessionStorage, utlRemoveSessionStorage, utlSetStoragePrefix } from \"./StorageHelperFuncs\";\r\nexport { urlParseUrl, urlGetAbsoluteUrl, urlGetPathName, urlGetCompleteUrl, urlParseHost, urlParseFullHost } from \"./UrlHelperFuncs\";\r\nexport { createOfflineListener } from \"./Offline\";\r\nexport var PropertiesPluginIdentifier = \"AppInsightsPropertiesPlugin\";\r\nexport var BreezeChannelIdentifier = \"AppInsightsChannelPlugin\";\r\nexport var AnalyticsPluginIdentifier = \"ApplicationInsightsAnalytics\";\r\n//# sourceMappingURL=applicationinsights-common.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as semver from 'semver';\nimport * as vscode from 'vscode';\n\n\nexport class API {\n\tpublic static fromSimpleString(value: string): API {\n\t\treturn new API(value, value, value);\n\t}\n\n\tpublic static readonly defaultVersion = API.fromSimpleString('1.0.0');\n\tpublic static readonly v380 = API.fromSimpleString('3.8.0');\n\tpublic static readonly v390 = API.fromSimpleString('3.9.0');\n\tpublic static readonly v400 = API.fromSimpleString('4.0.0');\n\tpublic static readonly v401 = API.fromSimpleString('4.0.1');\n\tpublic static readonly v420 = API.fromSimpleString('4.2.0');\n\tpublic static readonly v430 = API.fromSimpleString('4.3.0');\n\tpublic static readonly v440 = API.fromSimpleString('4.4.0');\n\tpublic static readonly v460 = API.fromSimpleString('4.6.0');\n\tpublic static readonly v470 = API.fromSimpleString('4.7.0');\n\tpublic static readonly v490 = API.fromSimpleString('4.9.0');\n\tpublic static readonly v500 = API.fromSimpleString('5.0.0');\n\tpublic static readonly v510 = API.fromSimpleString('5.1.0');\n\tpublic static readonly v520 = API.fromSimpleString('5.2.0');\n\tpublic static readonly v544 = API.fromSimpleString('5.4.4');\n\tpublic static readonly v540 = API.fromSimpleString('5.4.0');\n\tpublic static readonly v560 = API.fromSimpleString('5.6.0');\n\tpublic static readonly v570 = API.fromSimpleString('5.7.0');\n\tpublic static readonly v590 = API.fromSimpleString('5.9.0');\n\n\tpublic static fromVersionString(versionString: string): API {\n\t\tlet version = semver.valid(versionString);\n\t\tif (!version) {\n\t\t\treturn new API(vscode.l10n.t(\"invalid version\"), '1.0.0', '1.0.0');\n\t\t}\n\n\t\t// Cut off any prerelease tag since we sometimes consume those on purpose.\n\t\tconst index = versionString.indexOf('-');\n\t\tif (index >= 0) {\n\t\t\tversion = version.substr(0, index);\n\t\t}\n\t\treturn new API(versionString, version, versionString);\n\t}\n\n\tprivate constructor(\n\t\t/**\n\t\t * Human readable string for the current version. Displayed in the UI\n\t\t */\n\t\tpublic readonly displayName: string,\n\n\t\t/**\n\t\t * Semver version, e.g. '3.9.0'\n\t\t */\n\t\tpublic readonly version: string,\n\n\t\t/**\n\t\t * Full version string including pre-release tags, e.g. '3.9.0-beta'\n\t\t */\n\t\tpublic readonly fullVersionString: string,\n\t) { }\n\n\tpublic eq(other: API): boolean {\n\t\treturn semver.eq(this.version, other.version);\n\t}\n\n\tpublic gte(other: API): boolean {\n\t\treturn semver.gte(this.version, other.version);\n\t}\n\n\tpublic lt(other: API): boolean {\n\t\treturn !this.gte(other);\n\t}\n\n\tpublic isYarnPnp(): boolean {\n\t\treturn this.fullVersionString.includes('-sdk');\n\t}\n}\n","const SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","const SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { basename, dirname } from 'path';\nimport * as vscode from 'vscode';\nimport { Logger } from '../logging/logger';\n\nexport class MemFs implements vscode.FileSystemProvider {\n\n\tprivate readonly root = new FsDirectoryEntry(\n\t\tnew Map(),\n\t\t0,\n\t\t0,\n\t);\n\n\tconstructor(\n\t\tprivate readonly id: string,\n\t\tprivate readonly logger: Logger,\n\t) { }\n\n\tstat(uri: vscode.Uri): vscode.FileStat {\n\t\tthis.logger.trace(`MemFs.stat ${this.id}. uri: ${uri}`);\n\t\tconst entry = this.getEntry(uri);\n\t\tif (!entry) {\n\t\t\tthrow vscode.FileSystemError.FileNotFound();\n\t\t}\n\n\t\treturn entry;\n\t}\n\n\treadDirectory(uri: vscode.Uri): [string, vscode.FileType][] {\n\t\tthis.logger.trace(`MemFs.readDirectory ${this.id}. uri: ${uri}`);\n\n\t\tconst entry = this.getEntry(uri);\n\t\tif (!entry) {\n\t\t\tthrow vscode.FileSystemError.FileNotFound();\n\t\t}\n\t\tif (!(entry instanceof FsDirectoryEntry)) {\n\t\t\tthrow vscode.FileSystemError.FileNotADirectory();\n\t\t}\n\n\t\treturn Array.from(entry.contents.entries(), ([name, entry]) => [name, entry.type]);\n\t}\n\n\treadFile(uri: vscode.Uri): Uint8Array {\n\t\tthis.logger.trace(`MemFs.readFile ${this.id}. uri: ${uri}`);\n\n\t\tconst entry = this.getEntry(uri);\n\t\tif (!entry) {\n\t\t\tthrow vscode.FileSystemError.FileNotFound();\n\t\t}\n\n\t\tif (!(entry instanceof FsFileEntry)) {\n\t\t\tthrow vscode.FileSystemError.FileIsADirectory(uri);\n\t\t}\n\n\t\treturn entry.data;\n\t}\n\n\twriteFile(uri: vscode.Uri, content: Uint8Array, { create, overwrite }: { create: boolean; overwrite: boolean }): void {\n\t\tthis.logger.trace(`MemFs.writeFile ${this.id}. uri: ${uri}`);\n\n\t\tconst dir = this.getParent(uri);\n\n\t\tconst fileName = basename(uri.path);\n\t\tconst dirContents = dir.contents;\n\n\t\tconst time = Date.now() / 1000;\n\t\tconst entry = dirContents.get(basename(uri.path));\n\t\tif (!entry) {\n\t\t\tif (create) {\n\t\t\t\tdirContents.set(fileName, new FsFileEntry(content, time, time));\n\t\t\t\tthis._emitter.fire([{ type: vscode.FileChangeType.Created, uri }]);\n\t\t\t} else {\n\t\t\t\tthrow vscode.FileSystemError.FileNotFound();\n\t\t\t}\n\t\t} else {\n\t\t\tif (entry instanceof FsDirectoryEntry) {\n\t\t\t\tthrow vscode.FileSystemError.FileIsADirectory(uri);\n\t\t\t}\n\n\t\t\tif (overwrite) {\n\t\t\t\tentry.mtime = time;\n\t\t\t\tentry.data = content;\n\t\t\t\tthis._emitter.fire([{ type: vscode.FileChangeType.Changed, uri }]);\n\t\t\t} else {\n\t\t\t\tthrow vscode.FileSystemError.NoPermissions('overwrite option was not passed in');\n\t\t\t}\n\t\t}\n\t}\n\n\trename(_oldUri: vscode.Uri, _newUri: vscode.Uri, _options: { overwrite: boolean }): void {\n\t\tthrow new Error('not implemented');\n\t}\n\n\tdelete(uri: vscode.Uri): void {\n\t\ttry {\n\t\t\tconst dir = this.getParent(uri);\n\t\t\tdir.contents.delete(basename(uri.path));\n\t\t\tthis._emitter.fire([{ type: vscode.FileChangeType.Deleted, uri }]);\n\t\t} catch (e) { }\n\t}\n\n\tcreateDirectory(uri: vscode.Uri): void {\n\t\tthis.logger.trace(`MemFs.createDirectory ${this.id}. uri: ${uri}`);\n\n\t\tconst dir = this.getParent(uri);\n\t\tconst now = Date.now() / 1000;\n\t\tdir.contents.set(basename(uri.path), new FsDirectoryEntry(new Map(), now, now));\n\t}\n\n\tprivate getEntry(uri: vscode.Uri): FsEntry | undefined {\n\t\t// TODO: have this throw FileNotFound itself?\n\t\t// TODO: support configuring case sensitivity\n\t\tlet node: FsEntry = this.root;\n\t\tfor (const component of uri.path.split('/')) {\n\t\t\tif (!component) {\n\t\t\t\t// Skip empty components (root, stuff between double slashes,\n\t\t\t\t// trailing slashes)\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!(node instanceof FsDirectoryEntry)) {\n\t\t\t\t// We're looking at a File or such, so bail.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst next = node.contents.get(component);\n\t\t\tif (!next) {\n\t\t\t\t// not found!\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnode = next;\n\t\t}\n\t\treturn node;\n\t}\n\n\tprivate getParent(uri: vscode.Uri): FsDirectoryEntry {\n\t\tconst dir = this.getEntry(uri.with({ path: dirname(uri.path) }));\n\t\tif (!dir) {\n\t\t\tthrow vscode.FileSystemError.FileNotFound();\n\t\t}\n\t\tif (!(dir instanceof FsDirectoryEntry)) {\n\t\t\tthrow vscode.FileSystemError.FileNotADirectory();\n\t\t}\n\t\treturn dir;\n\t}\n\n\t// --- manage file events\n\n\tprivate readonly _emitter = new vscode.EventEmitter<vscode.FileChangeEvent[]>();\n\n\treadonly onDidChangeFile: vscode.Event<vscode.FileChangeEvent[]> = this._emitter.event;\n\tprivate readonly watchers = new Map<string, Set<Symbol>>;\n\n\twatch(resource: vscode.Uri): vscode.Disposable {\n\t\tif (!this.watchers.has(resource.path)) {\n\t\t\tthis.watchers.set(resource.path, new Set());\n\t\t}\n\t\tconst sy = Symbol(resource.path);\n\t\treturn new vscode.Disposable(() => {\n\t\t\tconst watcher = this.watchers.get(resource.path);\n\t\t\tif (watcher) {\n\t\t\t\twatcher.delete(sy);\n\t\t\t\tif (!watcher.size) {\n\t\t\t\t\tthis.watchers.delete(resource.path);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass FsFileEntry {\n\treadonly type = vscode.FileType.File;\n\n\tget size(): number {\n\t\treturn this.data.length;\n\t}\n\n\tconstructor(\n\t\tpublic data: Uint8Array,\n\t\tpublic readonly ctime: number,\n\t\tpublic mtime: number,\n\t) { }\n}\n\nclass FsDirectoryEntry {\n\treadonly type = vscode.FileType.Directory;\n\n\tget size(): number {\n\t\treturn [...this.contents.values()].reduce((acc: number, entry: FsEntry) => acc + entry.size, 0);\n\t}\n\n\tconstructor(\n\t\tpublic readonly contents: Map<string, FsEntry>,\n\t\tpublic readonly ctime: number,\n\t\tpublic readonly mtime: number,\n\t) { }\n}\n\ntype FsEntry = FsFileEntry | FsDirectoryEntry;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport const typescript = 'typescript';\nexport const typescriptreact = 'typescriptreact';\nexport const javascript = 'javascript';\nexport const javascriptreact = 'javascriptreact';\nexport const jsxTags = 'jsx-tags';\n\nexport const jsTsLanguageModes = [\n\tjavascript,\n\tjavascriptreact,\n\ttypescript,\n\ttypescriptreact,\n];\n\nexport function isSupportedLanguageMode(doc: vscode.TextDocument) {\n\treturn vscode.languages.match([typescript, typescriptreact, javascript, javascriptreact], doc) > 0;\n}\n\nexport function isTypeScriptDocument(doc: vscode.TextDocument) {\n\treturn vscode.languages.match([typescript, typescriptreact], doc) > 0;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { API } from '../tsServer/api';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport DefinitionProviderBase from './definitionProviderBase';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\n\nexport default class TypeScriptDefinitionProvider extends DefinitionProviderBase implements vscode.DefinitionProvider {\n\n\tpublic async provideDefinition(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.DefinitionLink[] | vscode.Definition | undefined> {\n\t\tconst filepath = this.client.toOpenTsFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\tconst response = await this.client.execute('definitionAndBoundSpan', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst span = response.body.textSpan ? typeConverters.Range.fromTextSpan(response.body.textSpan) : undefined;\n\t\tlet definitions = response.body.definitions;\n\n\t\tif (vscode.workspace.getConfiguration(document.languageId).get('preferGoToSourceDefinition', false) && this.client.apiVersion.gte(API.v470)) {\n\t\t\tconst sourceDefinitionsResponse = await this.client.execute('findSourceDefinition', args, token);\n\t\t\tif (sourceDefinitionsResponse.type === 'response' && sourceDefinitionsResponse.body?.length) {\n\t\t\t\tdefinitions = sourceDefinitionsResponse.body;\n\t\t\t}\n\t\t}\n\n\t\treturn definitions\n\t\t\t.map((location): vscode.DefinitionLink => {\n\t\t\t\tconst target = typeConverters.Location.fromTextSpan(this.client.toResource(location.file), location);\n\t\t\t\tif (location.contextStart && location.contextEnd) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\toriginSelectionRange: span,\n\t\t\t\t\t\ttargetRange: typeConverters.Range.fromLocations(location.contextStart, location.contextEnd),\n\t\t\t\t\t\ttargetUri: target.uri,\n\t\t\t\t\t\ttargetSelectionRange: target.range,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\toriginSelectionRange: span,\n\t\t\t\t\ttargetRange: target.range,\n\t\t\t\t\ttargetUri: target.uri\n\t\t\t\t};\n\t\t\t});\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerDefinitionProvider(selector.syntax,\n\t\t\tnew TypeScriptDefinitionProvider(client));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { PluginManager } from '../tsServer/plugins';\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { ActiveJsTsEditorTracker } from '../ui/activeJsTsEditorTracker';\nimport { Lazy } from '../utils/lazy';\nimport { CommandManager } from './commandManager';\nimport { ConfigurePluginCommand } from './configurePlugin';\nimport { EnableTsgoCommand, DisableTsgoCommand } from './useTsgo';\nimport { JavaScriptGoToProjectConfigCommand, TypeScriptGoToProjectConfigCommand } from './goToProjectConfiguration';\nimport { LearnMoreAboutRefactoringsCommand } from './learnMoreAboutRefactorings';\nimport { OpenJsDocLinkCommand } from './openJsDocLink';\nimport { OpenTsServerLogCommand } from './openTsServerLog';\nimport { ReloadJavaScriptProjectsCommand, ReloadTypeScriptProjectsCommand } from './reloadProject';\nimport { RestartTsServerCommand } from './restartTsServer';\nimport { SelectTypeScriptVersionCommand } from './selectTypeScriptVersion';\nimport { TSServerRequestCommand } from './tsserverRequests';\n\nexport function registerBaseCommands(\n\tcommandManager: CommandManager,\n\tlazyClientHost: Lazy<TypeScriptServiceClientHost>,\n\tpluginManager: PluginManager,\n\tactiveJsTsEditorTracker: ActiveJsTsEditorTracker,\n): void {\n\tcommandManager.register(new ReloadTypeScriptProjectsCommand(lazyClientHost));\n\tcommandManager.register(new ReloadJavaScriptProjectsCommand(lazyClientHost));\n\tcommandManager.register(new SelectTypeScriptVersionCommand(lazyClientHost));\n\tcommandManager.register(new OpenTsServerLogCommand(lazyClientHost));\n\tcommandManager.register(new RestartTsServerCommand(lazyClientHost));\n\tcommandManager.register(new TypeScriptGoToProjectConfigCommand(activeJsTsEditorTracker, lazyClientHost));\n\tcommandManager.register(new JavaScriptGoToProjectConfigCommand(activeJsTsEditorTracker, lazyClientHost));\n\tcommandManager.register(new ConfigurePluginCommand(pluginManager));\n\tcommandManager.register(new LearnMoreAboutRefactoringsCommand());\n\tcommandManager.register(new TSServerRequestCommand(lazyClientHost));\n\tcommandManager.register(new OpenJsDocLinkCommand());\n\tcommandManager.register(new EnableTsgoCommand());\n\tcommandManager.register(new DisableTsgoCommand());\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { LanguageDescription } from '../configuration/languageDescription';\nimport { API } from '../tsServer/api';\nimport protocol from '../tsServer/protocol/protocol';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient, ServerResponse } from '../typescriptService';\nimport { raceTimeout } from '../utils/async';\nimport FileConfigurationManager from './fileConfigurationManager';\nimport { conditionalRegistration, requireGlobalConfiguration, requireMinVersion, requireSomeCapability } from './util/dependentRegistration';\n\nclass CopyMetadata {\n\n\tstatic parse(data: string): CopyMetadata | undefined {\n\t\ttry {\n\n\t\t\tconst parsedData = JSON.parse(data);\n\t\t\tconst resource = vscode.Uri.parse(parsedData.resource);\n\t\t\tconst ranges = parsedData.ranges.map((range: any) => new vscode.Range(range.start, range.end));\n\t\t\tconst copyOperation = parsedData.copyOperation ? Promise.resolve(parsedData.copyOperation) : undefined;\n\t\t\treturn new CopyMetadata(resource, ranges, copyOperation);\n\t\t} catch (error) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tconstructor(\n\t\tpublic readonly resource: vscode.Uri,\n\t\tpublic readonly ranges: readonly vscode.Range[],\n\t\tpublic readonly copyOperation: Promise<ServerResponse.Response<protocol.PreparePasteEditsResponse>> | undefined\n\t) { }\n}\n\nclass TsPasteEdit extends vscode.DocumentPasteEdit {\n\n\tstatic tryCreateFromResponse(\n\t\tclient: ITypeScriptServiceClient,\n\t\tresponse: ServerResponse.Response<protocol.GetPasteEditsResponse>\n\t): TsPasteEdit | undefined {\n\t\tif (response.type !== 'response' || !response.body?.edits.length) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst pasteEdit = new TsPasteEdit();\n\n\t\tconst additionalEdit = new vscode.WorkspaceEdit();\n\t\tfor (const edit of response.body.edits) {\n\t\t\tadditionalEdit.set(client.toResource(edit.fileName), edit.textChanges.map(typeConverters.TextEdit.fromCodeEdit));\n\t\t}\n\t\tpasteEdit.additionalEdit = additionalEdit;\n\n\t\treturn pasteEdit;\n\t}\n\n\tconstructor() {\n\t\tsuper('', vscode.l10n.t(\"Paste with imports\"), DocumentPasteProvider.kind);\n\t\tthis.yieldTo = [\n\t\t\tvscode.DocumentDropOrPasteEditKind.Text.append('plain')\n\t\t];\n\t}\n}\n\nclass TsPendingPasteEdit extends TsPasteEdit {\n\tconstructor(\n\t\ttext: string,\n\t\tpublic readonly operation: Promise<ServerResponse.Response<protocol.GetPasteEditsResponse>>\n\t) {\n\t\tsuper();\n\t\tthis.insertText = text;\n\t}\n}\n\nconst enabledSettingId = 'updateImportsOnPaste.enabled';\n\nclass DocumentPasteProvider implements vscode.DocumentPasteEditProvider<TsPasteEdit> {\n\n\tstatic readonly kind = vscode.DocumentDropOrPasteEditKind.TextUpdateImports.append('jsts');\n\tstatic readonly metadataMimeType = 'application/vnd.code.jsts.metadata';\n\n\tconstructor(\n\t\tprivate readonly _modeId: string,\n\t\tprivate readonly _client: ITypeScriptServiceClient,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager,\n\t) { }\n\n\tasync prepareDocumentPaste(document: vscode.TextDocument, ranges: readonly vscode.Range[], dataTransfer: vscode.DataTransfer, token: vscode.CancellationToken) {\n\t\tif (!this.isEnabled(document)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst file = this._client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst copyRequest = this._client.interruptGetErr(() => this._client.execute('preparePasteEdits', {\n\t\t\tfile,\n\t\t\tcopiedTextSpan: ranges.map(typeConverters.Range.toTextSpan),\n\t\t}, token));\n\n\t\tconst copyTimeout = 200;\n\t\tconst response = await raceTimeout(copyRequest, copyTimeout);\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (response) {\n\t\t\tif (response.type !== 'response' || !response.body) {\n\t\t\t\t// We got a response which told us no to bother with the paste\n\t\t\t\t// Don't store anything so that we don't trigger on paste\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdataTransfer.set(DocumentPasteProvider.metadataMimeType,\n\t\t\t\tnew vscode.DataTransferItem(new CopyMetadata(document.uri, ranges, undefined)));\n\t\t} else {\n\t\t\t// We are still waiting on the response. Store the pending request so that we can try checking it on paste\n\t\t\t// when it has hopefully resolved\n\t\t\tdataTransfer.set(DocumentPasteProvider.metadataMimeType,\n\t\t\t\tnew vscode.DataTransferItem(new CopyMetadata(document.uri, ranges, copyRequest)));\n\t\t}\n\t}\n\n\tasync provideDocumentPasteEdits(\n\t\tdocument: vscode.TextDocument,\n\t\tranges: readonly vscode.Range[],\n\t\tdataTransfer: vscode.DataTransfer,\n\t\t_context: vscode.DocumentPasteEditContext,\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<TsPasteEdit[] | undefined> {\n\t\tif (!this.isEnabled(document)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst file = this._client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst text = await dataTransfer.get('text/plain')?.asString();\n\t\tif (!text || token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get optional metadata\n\t\tconst metadata = await this.extractMetadata(dataTransfer, token);\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet copiedFrom: {\n\t\t\tfile: string;\n\t\t\tspans: protocol.TextSpan[];\n\t\t} | undefined;\n\t\tif (metadata) {\n\t\t\tconst spans = metadata.ranges.map(typeConverters.Range.toTextSpan);\n\t\t\tconst copyFile = this._client.toTsFilePath(metadata.resource);\n\t\t\tif (copyFile) {\n\t\t\t\tcopiedFrom = { file: copyFile, spans };\n\t\t\t}\n\t\t}\n\n\t\tif (copiedFrom?.file === file) {\n\t\t\t// We are pasting in the same file we copied from. No need to do anything\n\t\t\treturn;\n\t\t}\n\n\t\tconst pasteCts = new vscode.CancellationTokenSource();\n\t\ttoken.onCancellationRequested(() => pasteCts.cancel());\n\n\t\t// If we have a copy operation, use that to potentially eagerly cancel the paste if it resolves to false\n\t\tmetadata?.copyOperation?.then(copyResponse => {\n\t\t\tif (copyResponse.type !== 'response' || !copyResponse.body) {\n\t\t\t\tpasteCts.cancel();\n\t\t\t}\n\t\t}, (_err) => {\n\t\t\t// Expected. May have been cancelled.\n\t\t});\n\n\t\ttry {\n\t\t\tconst pasteOperation = this._client.interruptGetErr(() => {\n\t\t\t\tthis.fileConfigurationManager.ensureConfigurationForDocument(document, token);\n\n\t\t\t\treturn this._client.execute('getPasteEdits', {\n\t\t\t\t\tfile,\n\t\t\t\t\t// TODO: only supports a single paste for now\n\t\t\t\t\tpastedText: [text],\n\t\t\t\t\tpasteLocations: ranges.map(typeConverters.Range.toTextSpan),\n\t\t\t\t\tcopiedFrom\n\t\t\t\t}, pasteCts.token);\n\t\t\t});\n\n\t\t\tconst pasteTimeout = 200;\n\t\t\tconst response = await raceTimeout(pasteOperation, pasteTimeout);\n\t\t\tif (response) {\n\t\t\t\t// Success, can return real paste edit.\n\t\t\t\tconst edit = TsPasteEdit.tryCreateFromResponse(this._client, response);\n\t\t\t\treturn edit ? [edit] : undefined;\n\t\t\t} else {\n\t\t\t\t// Still waiting on the response. Eagerly return a paste edit that we will resolve when we\n\t\t\t\t// really need to apply it\n\t\t\t\treturn [new TsPendingPasteEdit(text, pasteOperation)];\n\t\t\t}\n\t\t} finally {\n\t\t\tpasteCts.dispose();\n\t\t}\n\t}\n\n\tasync resolveDocumentPasteEdit(inEdit: TsPasteEdit, _token: vscode.CancellationToken): Promise<TsPasteEdit | undefined> {\n\t\tif (!(inEdit instanceof TsPendingPasteEdit)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst response = await inEdit.operation;\n\t\tconst pasteEdit = TsPendingPasteEdit.tryCreateFromResponse(this._client, response);\n\t\treturn pasteEdit ?? inEdit;\n\t}\n\n\tprivate async extractMetadata(dataTransfer: vscode.DataTransfer, token: vscode.CancellationToken): Promise<CopyMetadata | undefined> {\n\t\tconst metadata = await dataTransfer.get(DocumentPasteProvider.metadataMimeType)?.value;\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (metadata instanceof CopyMetadata) {\n\t\t\treturn metadata;\n\t\t}\n\n\t\tif (typeof metadata === 'string') {\n\t\t\treturn CopyMetadata.parse(metadata);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate isEnabled(document: vscode.TextDocument) {\n\t\tconst config = vscode.workspace.getConfiguration(this._modeId, document.uri);\n\t\treturn config.get(enabledSettingId, true);\n\t}\n}\n\nexport function register(selector: DocumentSelector, language: LanguageDescription, client: ITypeScriptServiceClient, fileConfigurationManager: FileConfigurationManager) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t\trequireMinVersion(client, API.v570),\n\t\trequireGlobalConfiguration(language.id, enabledSettingId),\n\t], () => {\n\t\treturn vscode.languages.registerDocumentPasteEditProvider(selector.semantic, new DocumentPasteProvider(language.id, client, fileConfigurationManager), {\n\t\t\tprovidedPasteEditKinds: [DocumentPasteProvider.kind],\n\t\t\tcopyMimeTypes: [DocumentPasteProvider.metadataMimeType],\n\t\t\tpasteMimeTypes: [DocumentPasteProvider.metadataMimeType],\n\t\t});\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { PluginManager } from '../tsServer/plugins';\nimport { Command } from './commandManager';\n\nexport class ConfigurePluginCommand implements Command {\n\tpublic readonly id = '_typescript.configurePlugin';\n\n\tpublic constructor(\n\t\tprivate readonly pluginManager: PluginManager,\n\t) { }\n\n\tpublic execute(pluginId: string, configuration: any) {\n\t\tthis.pluginManager.setConfiguration(pluginId, configuration);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as typeConverters from '../typeConverters';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { coalesce } from '../utils/arrays';\n\nclass TypeScriptFoldingProvider implements vscode.FoldingRangeProvider {\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tasync provideFoldingRanges(\n\t\tdocument: vscode.TextDocument,\n\t\t_context: vscode.FoldingContext,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.FoldingRange[] | undefined> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst args: Proto.FileRequestArgs = { file };\n\t\tconst response = await this.client.execute('getOutliningSpans', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn coalesce(response.body.map(span => this.convertOutliningSpan(span, document)));\n\t}\n\n\tprivate convertOutliningSpan(\n\t\tspan: Proto.OutliningSpan,\n\t\tdocument: vscode.TextDocument\n\t): vscode.FoldingRange | undefined {\n\t\tconst range = typeConverters.Range.fromTextSpan(span.textSpan);\n\t\tconst kind = TypeScriptFoldingProvider.getFoldingRangeKind(span);\n\n\t\t// Workaround for #49904\n\t\tif (span.kind === 'comment') {\n\t\t\tconst line = document.lineAt(range.start.line).text;\n\t\t\tif (/\\/\\/\\s*#endregion/gi.test(line)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\n\t\tconst start = range.start.line;\n\t\tconst end = this.adjustFoldingEnd(range, document);\n\t\treturn new vscode.FoldingRange(start, end, kind);\n\t}\n\n\tprivate static readonly foldEndPairCharacters = ['}', ']', ')', '`', '>'];\n\n\tprivate adjustFoldingEnd(range: vscode.Range, document: vscode.TextDocument) {\n\t\t// workaround for #47240\n\t\tif (range.end.character > 0) {\n\t\t\tconst foldEndCharacter = document.getText(new vscode.Range(range.end.translate(0, -1), range.end));\n\t\t\tif (TypeScriptFoldingProvider.foldEndPairCharacters.includes(foldEndCharacter)) {\n\t\t\t\treturn Math.max(range.end.line - 1, range.start.line);\n\t\t\t}\n\t\t}\n\n\t\treturn range.end.line;\n\t}\n\n\tprivate static getFoldingRangeKind(span: Proto.OutliningSpan): vscode.FoldingRangeKind | undefined {\n\t\tswitch (span.kind) {\n\t\t\tcase 'comment': return vscode.FoldingRangeKind.Comment;\n\t\t\tcase 'region': return vscode.FoldingRangeKind.Region;\n\t\t\tcase 'imports': return vscode.FoldingRangeKind.Imports;\n\t\t\tcase 'code':\n\t\t\tdefault: return undefined;\n\t\t}\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n): vscode.Disposable {\n\treturn vscode.languages.registerFoldingRangeProvider(selector.syntax,\n\t\tnew TypeScriptFoldingProvider(client));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport VsCodeTelemetryReporter from '@vscode/extension-telemetry';\nimport * as vscode from 'vscode';\nimport { Api, getExtensionApi } from './api';\nimport { CommandManager } from './commands/commandManager';\nimport { registerBaseCommands } from './commands/index';\nimport { TypeScriptServiceConfiguration } from './configuration/configuration';\nimport { BrowserServiceConfigurationProvider } from './configuration/configuration.browser';\nimport { ExperimentationTelemetryReporter, IExperimentationTelemetryReporter } from './experimentTelemetryReporter';\nimport { registerAtaSupport } from './filesystems/ata';\nimport { createLazyClientHost, lazilyActivateClient } from './lazyClientHost';\nimport { Logger } from './logging/logger';\nimport RemoteRepositories from './remoteRepositories.browser';\nimport { API } from './tsServer/api';\nimport { noopRequestCancellerFactory } from './tsServer/cancellation';\nimport { noopLogDirectoryProvider } from './tsServer/logDirectoryProvider';\nimport { PluginManager } from './tsServer/plugins';\nimport { WorkerServerProcessFactory } from './tsServer/serverProcess.browser';\nimport { ITypeScriptVersionProvider, TypeScriptVersion, TypeScriptVersionSource } from './tsServer/versionProvider';\nimport { ActiveJsTsEditorTracker } from './ui/activeJsTsEditorTracker';\nimport { Disposable } from './utils/dispose';\nimport { getPackageInfo } from './utils/packageInfo';\nimport { isWebAndHasSharedArrayBuffers } from './utils/platform';\n\nclass StaticVersionProvider implements ITypeScriptVersionProvider {\n\n\tconstructor(\n\t\tprivate readonly _version: TypeScriptVersion\n\t) { }\n\n\tupdateConfiguration(_configuration: TypeScriptServiceConfiguration): void {\n\t\t// noop\n\t}\n\n\tget defaultVersion() { return this._version; }\n\tget bundledVersion() { return this._version; }\n\n\treadonly globalVersion = undefined;\n\treadonly localVersion = undefined;\n\treadonly localVersions = [];\n}\n\nexport async function activate(context: vscode.ExtensionContext): Promise<Api> {\n\tconst pluginManager = new PluginManager();\n\tcontext.subscriptions.push(pluginManager);\n\n\tconst commandManager = new CommandManager();\n\tcontext.subscriptions.push(commandManager);\n\n\tconst onCompletionAccepted = new vscode.EventEmitter<vscode.CompletionItem>();\n\tcontext.subscriptions.push(onCompletionAccepted);\n\n\tconst activeJsTsEditorTracker = new ActiveJsTsEditorTracker();\n\tcontext.subscriptions.push(activeJsTsEditorTracker);\n\n\tconst versionProvider = new StaticVersionProvider(\n\t\tnew TypeScriptVersion(\n\t\t\tTypeScriptVersionSource.Bundled,\n\t\t\tvscode.Uri.joinPath(context.extensionUri, 'dist/browser/typescript/tsserver.web.js').toString(),\n\t\t\tAPI.fromSimpleString('5.9.0')));\n\n\tlet experimentTelemetryReporter: IExperimentationTelemetryReporter | undefined;\n\tconst packageInfo = getPackageInfo(context);\n\tif (packageInfo) {\n\t\tconst { aiKey } = packageInfo;\n\t\tconst vscTelemetryReporter = new VsCodeTelemetryReporter(aiKey);\n\t\texperimentTelemetryReporter = new ExperimentationTelemetryReporter(vscTelemetryReporter);\n\t\tcontext.subscriptions.push(experimentTelemetryReporter);\n\t}\n\n\tconst logger = new Logger();\n\n\tconst lazyClientHost = createLazyClientHost(context, false, {\n\t\tpluginManager,\n\t\tcommandManager,\n\t\tlogDirectoryProvider: noopLogDirectoryProvider,\n\t\tcancellerFactory: noopRequestCancellerFactory,\n\t\tversionProvider,\n\t\tprocessFactory: new WorkerServerProcessFactory(context.extensionUri, logger),\n\t\tactiveJsTsEditorTracker,\n\t\tserviceConfigurationProvider: new BrowserServiceConfigurationProvider(),\n\t\texperimentTelemetryReporter,\n\t\tlogger,\n\t}, item => {\n\t\tonCompletionAccepted.fire(item);\n\t});\n\n\tregisterBaseCommands(commandManager, lazyClientHost, pluginManager, activeJsTsEditorTracker);\n\n\t// context.subscriptions.push(task.register(lazyClientHost.map(x => x.serviceClient)));\n\n\timport('./languageFeatures/tsconfig').then(module => {\n\t\tcontext.subscriptions.push(module.register());\n\t});\n\n\tcontext.subscriptions.push(lazilyActivateClient(lazyClientHost, pluginManager, activeJsTsEditorTracker, async () => {\n\t\tawait startPreloadWorkspaceContentsIfNeeded(context, logger);\n\t}));\n\n\tcontext.subscriptions.push(registerAtaSupport(logger));\n\n\treturn getExtensionApi(onCompletionAccepted.event, pluginManager);\n}\n\nasync function startPreloadWorkspaceContentsIfNeeded(context: vscode.ExtensionContext, logger: Logger): Promise<void> {\n\tif (!isWebAndHasSharedArrayBuffers()) {\n\t\treturn;\n\t}\n\n\tif (!vscode.workspace.workspaceFolders) {\n\t\treturn;\n\t}\n\n\tawait Promise.all(vscode.workspace.workspaceFolders.map(async folder => {\n\t\tconst workspaceUri = folder.uri;\n\t\tif (workspaceUri.scheme !== 'vscode-vfs' || !workspaceUri.authority.startsWith('github')) {\n\t\t\tlogger.info(`Skipped pre loading workspace contents for repository ${workspaceUri?.toString()}`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst loader = new RemoteWorkspaceContentsPreloader(workspaceUri, logger);\n\t\tcontext.subscriptions.push(loader);\n\t\ttry {\n\t\t\tawait loader.triggerPreload();\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t}));\n}\n\nclass RemoteWorkspaceContentsPreloader extends Disposable {\n\n\tprivate _preload: Promise<void> | undefined;\n\n\tconstructor(\n\t\tprivate readonly workspaceUri: vscode.Uri,\n\t\tprivate readonly logger: Logger,\n\t) {\n\t\tsuper();\n\n\t\tconst fsWatcher = this._register(vscode.workspace.createFileSystemWatcher(new vscode.RelativePattern(workspaceUri, '*')));\n\t\tthis._register(fsWatcher.onDidChange(uri => {\n\t\t\tif (uri.toString() === workspaceUri.toString()) {\n\t\t\t\tthis._preload = undefined;\n\t\t\t\tthis.triggerPreload();\n\t\t\t}\n\t\t}));\n\t}\n\n\tasync triggerPreload() {\n\t\tthis._preload ??= this.doPreload();\n\t\treturn this._preload;\n\t}\n\n\tprivate async doPreload(): Promise<void> {\n\t\ttry {\n\t\t\tconst remoteHubApi = await RemoteRepositories.getApi();\n\t\t\tif (await remoteHubApi.loadWorkspaceContents?.(this.workspaceUri)) {\n\t\t\t\tthis.logger.info(`Successfully loaded workspace content for repository ${this.workspaceUri.toString()}`);\n\t\t\t} else {\n\t\t\t\tthis.logger.info(`Failed to load workspace content for repository ${this.workspaceUri.toString()}`);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.logger.info(`Loading workspace content for repository ${this.workspaceUri.toString()} failed: ${error instanceof Error ? error.toString() : 'Unknown reason'}`);\n\t\t\tconsole.error(error);\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const empty = Object.freeze([]);\n\nexport function equals<T>(\n\ta: ReadonlyArray<T>,\n\tb: ReadonlyArray<T>,\n\titemEquals: (a: T, b: T) => boolean = (a, b) => a === b\n): boolean {\n\tif (a === b) {\n\t\treturn true;\n\t}\n\tif (a.length !== b.length) {\n\t\treturn false;\n\t}\n\treturn a.every((x, i) => itemEquals(x, b[i]));\n}\n\nexport function coalesce<T>(array: ReadonlyArray<T | undefined>): T[] {\n\treturn array.filter((e): e is T => !!e);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ServerResponse } from '../typescriptService';\nimport type * as Proto from './protocol/protocol';\n\ntype Resolve<T extends Proto.Response> = () => Promise<ServerResponse.Response<T>>;\n\n/**\n * Caches a class of TS Server request based on document.\n */\nexport class CachedResponse<T extends Proto.Response> {\n\tprivate response?: Promise<ServerResponse.Response<T>>;\n\tprivate version: number = -1;\n\tprivate document: string = '';\n\n\t/**\n\t * Execute a request. May return cached value or resolve the new value\n\t *\n\t * Caller must ensure that all input `resolve` functions return equivilent results (keyed only off of document).\n\t */\n\tpublic execute(\n\t\tdocument: vscode.TextDocument,\n\t\tresolve: Resolve<T>\n\t): Promise<ServerResponse.Response<T>> {\n\t\tif (this.response && this.matches(document)) {\n\t\t\t// Chain so that on cancellation we fall back to the next resolve\n\t\t\treturn this.response = this.response.then(result => result.type === 'cancelled' ? resolve() : result);\n\t\t}\n\t\treturn this.reset(document, resolve);\n\t}\n\n\tprivate matches(document: vscode.TextDocument): boolean {\n\t\treturn this.version === document.version && this.document === document.uri.toString();\n\t}\n\n\tprivate async reset(\n\t\tdocument: vscode.TextDocument,\n\t\tresolve: Resolve<T>\n\t): Promise<ServerResponse.Response<T>> {\n\t\tthis.version = document.version;\n\t\tthis.document = document.uri.toString();\n\t\treturn this.response = resolve();\n\t}\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createEnumStyle } from \"../JavaScriptSDK.Enums/EnumHelperFuncs\";\r\n/**\r\n * The EventsDiscardedReason enumeration contains a set of values that specify the reason for discarding an event.\r\n */\r\nexport var EventsDiscardedReason = createEnumStyle({\r\n    /**\r\n     * Unknown.\r\n     */\r\n    Unknown: 0 /* eEventsDiscardedReason.Unknown */,\r\n    /**\r\n     * Status set to non-retryable.\r\n     */\r\n    NonRetryableStatus: 1 /* eEventsDiscardedReason.NonRetryableStatus */,\r\n    /**\r\n     * The event is invalid.\r\n     */\r\n    InvalidEvent: 2 /* eEventsDiscardedReason.InvalidEvent */,\r\n    /**\r\n     * The size of the event is too large.\r\n     */\r\n    SizeLimitExceeded: 3 /* eEventsDiscardedReason.SizeLimitExceeded */,\r\n    /**\r\n     * The server is not accepting events from this instrumentation key.\r\n     */\r\n    KillSwitch: 4 /* eEventsDiscardedReason.KillSwitch */,\r\n    /**\r\n     * The event queue is full.\r\n     */\r\n    QueueFull: 5 /* eEventsDiscardedReason.QueueFull */\r\n});\r\n/**\r\n *  The eBatchDiscardedReason enumeration contains a set of values that specify the reason for discarding offline batches.\r\n */\r\nexport var BatchDiscardedReason = createEnumStyle({\r\n    /**\r\n     * Unknown.\r\n     */\r\n    Unknown: 0 /* eBatchDiscardedReason.Unknown */,\r\n    /**\r\n      * Status set to non-retryable after sending\r\n      */\r\n    NonRetryableStatus: 1 /* eBatchDiscardedReason.NonRetryableStatus */,\r\n    /**\r\n     * Batches with lower number of critical events are dropped to free up storage space\r\n     */\r\n    CleanStorage: 2 /* eBatchDiscardedReason.CleanStorage */,\r\n    /**\r\n     * The batches in storage exceed max allowed time\r\n     */\r\n    MaxInStorageTimeExceeded: 3 /* eBatchDiscardedReason.MaxInStorageTimeExceeded */\r\n});\r\n//# sourceMappingURL=EventsDiscardedReason.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { ObjAssign, ObjClass } from \"@microsoft/applicationinsights-shims\";\r\nimport { arrForEach, asString as asString21, isArray, isBoolean, isError, isFunction, isNullOrUndefined, isNumber, isObject, isPlainObject, isString, isUndefined, objDeepFreeze, objDefine, objForEachKey, objHasOwn, strIndexOf, strTrim } from \"@nevware21/ts-utils\";\r\nimport { _DYN_APPLY, _DYN_GET_ALL_RESPONSE_HEA5, _DYN_GET_RESPONSE_HEADER, _DYN_LENGTH, _DYN_NAME, _DYN_REPLACE, _DYN_SPLIT, _DYN_STATUS, _DYN_TO_LOWER_CASE } from \"../__DynamicConstants\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// RESTRICT and AVOID circular dependencies you should not import other contained modules or export the contents of this file directly\r\n// Added to help with minification\r\nvar strGetPrototypeOf = \"getPrototypeOf\";\r\nvar rCamelCase = /-([a-z])/g;\r\nvar rNormalizeInvalid = /([^\\w\\d_$])/g;\r\nvar rLeadingNumeric = /^(\\d+[\\w\\d_$])/;\r\nexport var _getObjProto = Object[strGetPrototypeOf];\r\nexport function isNotUndefined(value) {\r\n    return !isUndefined(value);\r\n}\r\nexport function isNotNullOrUndefined(value) {\r\n    return !isNullOrUndefined(value);\r\n}\r\n/**\r\n * Validates that the string name conforms to the JS IdentifierName specification and if not\r\n * normalizes the name so that it would. This method does not identify or change any keywords\r\n * meaning that if you pass in a known keyword the same value will be returned.\r\n * This is a simplified version\r\n * @param name - The name to validate\r\n */\r\nexport function normalizeJsName(name) {\r\n    var value = name;\r\n    if (value && isString(value)) {\r\n        // CamelCase everything after the \"-\" and remove the dash\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rCamelCase, function (_all, letter) {\r\n            return letter.toUpperCase();\r\n        });\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rNormalizeInvalid, \"_\");\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rLeadingNumeric, function (_all, match) {\r\n            return \"_\" + match;\r\n        });\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * A simple wrapper (for minification support) to check if the value contains the search string.\r\n * @param value - The string value to check for the existence of the search value\r\n * @param search - The value search within the value\r\n */\r\nexport function strContains(value, search) {\r\n    if (value && search) {\r\n        return strIndexOf(value, search) !== -1;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Convert a date to I.S.O. format in IE8\r\n */\r\nexport function toISOString(date) {\r\n    return date && date.toISOString() || \"\";\r\n}\r\nexport var deepFreeze = objDeepFreeze;\r\n/**\r\n * Returns the name of object if it's an Error. Otherwise, returns empty string.\r\n */\r\nexport function getExceptionName(object) {\r\n    if (isError(object)) {\r\n        return object[_DYN_NAME /* @min:%2ename */];\r\n    }\r\n    return STR_EMPTY;\r\n}\r\n/**\r\n * Sets the provided value on the target instance using the field name when the provided chk function returns true, the chk\r\n * function will only be called if the new value is no equal to the original value.\r\n * @param target - The target object\r\n * @param field - The key of the target\r\n * @param value - The value to set\r\n * @param valChk - [Optional] Callback to check the value that if supplied will be called check if the new value can be set\r\n * @param srcChk - [Optional] Callback to check to original value that if supplied will be called if the new value should be set (if allowed)\r\n * @returns The existing or new value, depending what was set\r\n */\r\nexport function setValue(target, field, value, valChk, srcChk) {\r\n    var theValue = value;\r\n    if (target) {\r\n        theValue = target[field];\r\n        if (theValue !== value && (!srcChk || srcChk(theValue)) && (!valChk || valChk(value))) {\r\n            theValue = value;\r\n            target[field] = theValue;\r\n        }\r\n    }\r\n    return theValue;\r\n}\r\n/**\r\n * Returns the current value from the target object if not null or undefined otherwise sets the new value and returns it\r\n * @param target - The target object to return or set the default value\r\n * @param field - The key for the field to set on the target\r\n * @param defValue - [Optional] The value to set if not already present, when not provided a empty object will be added\r\n */\r\nexport function getSetValue(target, field, defValue) {\r\n    var theValue;\r\n    if (target) {\r\n        theValue = target[field];\r\n        if (!theValue && isNullOrUndefined(theValue)) {\r\n            // Supports having the default as null\r\n            theValue = !isUndefined(defValue) ? defValue : {};\r\n            target[field] = theValue;\r\n        }\r\n    }\r\n    else {\r\n        // Expanded for performance so we only check defValue if required\r\n        theValue = !isUndefined(defValue) ? defValue : {};\r\n    }\r\n    return theValue;\r\n}\r\nfunction _createProxyFunction(source, funcName) {\r\n    var srcFunc = null;\r\n    var src = null;\r\n    if (isFunction(source)) {\r\n        srcFunc = source;\r\n    }\r\n    else {\r\n        src = source;\r\n    }\r\n    return function () {\r\n        // Capture the original arguments passed to the method\r\n        var originalArguments = arguments;\r\n        if (srcFunc) {\r\n            src = srcFunc();\r\n        }\r\n        if (src) {\r\n            return src[funcName][_DYN_APPLY /* @min:%2eapply */](src, originalArguments);\r\n        }\r\n    };\r\n}\r\n/**\r\n * Effectively assigns all enumerable properties (not just own properties) and functions (including inherited prototype) from\r\n * the source object to the target, it attempts to use proxy getters / setters (if possible) and proxy functions to avoid potential\r\n * implementation issues by assigning prototype functions as instance ones\r\n *\r\n * This method is the primary method used to \"update\" the snippet proxy with the ultimate implementations.\r\n *\r\n * Special ES3 Notes:\r\n * Updates (setting) of direct property values on the target or indirectly on the source object WILL NOT WORK PROPERLY, updates to the\r\n * properties of \"referenced\" object will work (target.context.newValue = 10 => will be reflected in the source.context as it's the\r\n * same object). ES3 Failures: assigning target.myProp = 3 -> Won't change source.myProp = 3, likewise the reverse would also fail.\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param chkSet - An optional callback to determine whether a specific property/function should be proxied\r\n */\r\nexport function proxyAssign(target, source, chkSet) {\r\n    if (target && source && isObject(target) && isObject(source)) {\r\n        var _loop_1 = function (field) {\r\n            if (isString(field)) {\r\n                var value = source[field];\r\n                if (isFunction(value)) {\r\n                    if (!chkSet || chkSet(field, true, source, target)) {\r\n                        // Create a proxy function rather than just copying the (possible) prototype to the new object as an instance function\r\n                        target[field] = _createProxyFunction(source, field);\r\n                    }\r\n                }\r\n                else if (!chkSet || chkSet(field, false, source, target)) {\r\n                    if (objHasOwn(target, field)) {\r\n                        // Remove any previous instance property\r\n                        delete target[field];\r\n                    }\r\n                    objDefine(target, field, {\r\n                        g: function () {\r\n                            return source[field];\r\n                        },\r\n                        s: function (theValue) {\r\n                            source[field] = theValue;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        // effectively apply/proxy full source to the target instance\r\n        for (var field in source) {\r\n            _loop_1(field);\r\n        }\r\n    }\r\n    return target;\r\n}\r\n/**\r\n * Creates a proxy function on the target which internally will call the source version with all arguments passed to the target method.\r\n *\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param name - The function name that will be added on the target\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param theFunc - The function name on the source that will be proxied on the target\r\n * @param overwriteTarget - If `false` this will not replace any pre-existing name otherwise (the default) it will overwrite any existing name\r\n */\r\nexport function proxyFunctionAs(target, name, source, theFunc, overwriteTarget) {\r\n    if (target && name && source) {\r\n        if (overwriteTarget !== false || isUndefined(target[name])) {\r\n            target[name] = _createProxyFunction(source, theFunc);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Creates proxy functions on the target which internally will call the source version with all arguments passed to the target method.\r\n *\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param functionsToProxy - An array of function names that will be proxied on the target\r\n * @param overwriteTarget - If false this will not replace any pre-existing name otherwise (the default) it will overwrite any existing name\r\n */\r\nexport function proxyFunctions(target, source, functionsToProxy, overwriteTarget) {\r\n    if (target && source && isObject(target) && isArray(functionsToProxy)) {\r\n        arrForEach(functionsToProxy, function (theFuncName) {\r\n            if (isString(theFuncName)) {\r\n                proxyFunctionAs(target, theFuncName, source, theFuncName, overwriteTarget);\r\n            }\r\n        });\r\n    }\r\n    return target;\r\n}\r\n/**\r\n * Simpler helper to create a dynamic class that implements the interface and populates the values with the defaults.\r\n * Only instance properties (hasOwnProperty) values are copied from the defaults to the new instance\r\n * @param defaults - Simple helper\r\n */\r\nexport function createClassFromInterface(defaults) {\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            var _this = this;\r\n            if (defaults) {\r\n                objForEachKey(defaults, function (field, value) {\r\n                    _this[field] = value;\r\n                });\r\n            }\r\n        }\r\n        return class_1;\r\n    }());\r\n}\r\n/**\r\n * A helper function to assist with JIT performance for objects that have properties added / removed dynamically\r\n * this is primarily for chromium based browsers and has limited effects on Firefox and none of IE. Only call this\r\n * function after you have finished \"updating\" the object, calling this within loops reduces or defeats the benefits.\r\n * This helps when iterating using for..in, objKeys() and objForEach()\r\n * @param theObject - The object to be optimized if possible\r\n */\r\nexport function optimizeObject(theObject) {\r\n    // V8 Optimization to cause the JIT compiler to create a new optimized object for looking up the own properties\r\n    // primarily for object with <= 19 properties for >= 20 the effect is reduced or non-existent\r\n    if (theObject && ObjAssign) {\r\n        theObject = ObjClass(ObjAssign({}, theObject));\r\n    }\r\n    return theObject;\r\n}\r\nexport function objExtend(obj1, obj2, obj3, obj4, obj5, obj6) {\r\n    // Variables\r\n    var theArgs = arguments;\r\n    var extended = theArgs[0] || {};\r\n    var argLen = theArgs[_DYN_LENGTH /* @min:%2elength */];\r\n    var deep = false;\r\n    var idx = 1;\r\n    // Check for \"Deep\" flag\r\n    if (argLen > 0 && isBoolean(extended)) {\r\n        deep = extended;\r\n        extended = theArgs[idx] || {};\r\n        idx++;\r\n    }\r\n    // Handle case when target is a string or something (possible in deep copy)\r\n    if (!isObject(extended)) {\r\n        extended = {};\r\n    }\r\n    // Loop through each remaining object and conduct a merge\r\n    for (; idx < argLen; idx++) {\r\n        var arg = theArgs[idx];\r\n        var isArgArray = isArray(arg);\r\n        var isArgObj = isObject(arg);\r\n        for (var prop in arg) {\r\n            var propOk = (isArgArray && (prop in arg)) || (isArgObj && objHasOwn(arg, prop));\r\n            if (!propOk) {\r\n                continue;\r\n            }\r\n            var newValue = arg[prop];\r\n            var isNewArray = void 0;\r\n            // If deep merge and property is an object, merge properties\r\n            if (deep && newValue && ((isNewArray = isArray(newValue)) || isPlainObject(newValue))) {\r\n                // Grab the current value of the extended object\r\n                var clone = extended[prop];\r\n                if (isNewArray) {\r\n                    if (!isArray(clone)) {\r\n                        // We can't \"merge\" an array with a non-array so overwrite the original\r\n                        clone = [];\r\n                    }\r\n                }\r\n                else if (!isPlainObject(clone)) {\r\n                    // We can't \"merge\" an object with a non-object\r\n                    clone = {};\r\n                }\r\n                // Never move the original objects always clone them\r\n                newValue = objExtend(deep, clone, newValue);\r\n            }\r\n            // Assign the new (or previous) value (unless undefined)\r\n            if (newValue !== undefined) {\r\n                extended[prop] = newValue;\r\n            }\r\n        }\r\n    }\r\n    return extended;\r\n}\r\nexport var asString = asString21;\r\nexport function isFeatureEnabled(feature, cfg) {\r\n    var rlt = false;\r\n    var ft = cfg && cfg.featureOptIn && cfg.featureOptIn[feature];\r\n    if (feature && ft) {\r\n        var mode = ft.mode;\r\n        // NOTE: None will be considered as true\r\n        rlt = (mode == 3 /* FeatureOptInMode.enable */) || (mode == 1 /* FeatureOptInMode.none */);\r\n    }\r\n    return rlt;\r\n}\r\nexport function getResponseText(xhr) {\r\n    try {\r\n        return xhr.responseText;\r\n    }\r\n    catch (e) {\r\n        // Best effort, as XHR may throw while XDR wont so just ignore\r\n    }\r\n    return null;\r\n}\r\nexport function formatErrorMessageXdr(xdr, message) {\r\n    if (xdr) {\r\n        return \"XDomainRequest,Response:\" + getResponseText(xdr) || \"\";\r\n    }\r\n    return message;\r\n}\r\nexport function formatErrorMessageXhr(xhr, message) {\r\n    if (xhr) {\r\n        return \"XMLHttpRequest,Status:\" + xhr[_DYN_STATUS /* @min:%2estatus */] + \",Response:\" + getResponseText(xhr) || xhr.response || \"\";\r\n    }\r\n    return message;\r\n}\r\nexport function prependTransports(theTransports, newTransports) {\r\n    if (newTransports) {\r\n        if (isNumber(newTransports)) {\r\n            theTransports = [newTransports].concat(theTransports);\r\n        }\r\n        else if (isArray(newTransports)) {\r\n            theTransports = newTransports.concat(theTransports);\r\n        }\r\n    }\r\n    return theTransports;\r\n}\r\nvar strDisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nvar strWithCredentials = \"withCredentials\";\r\nvar strTimeout = \"timeout\";\r\n/**\r\n * Create and open an XMLHttpRequest object\r\n * @param method - The request method\r\n * @param urlString - The url\r\n * @param withCredentials - Option flag indicating that credentials should be sent\r\n * @param disabled - Optional flag indicating that the XHR object should be marked as disabled and not tracked (default is false)\r\n * @param isSync - Optional flag indicating if the instance should be a synchronous request (defaults to false)\r\n * @param timeout - Optional value identifying the timeout value that should be assigned to the XHR request\r\n * @returns A new opened XHR request\r\n */\r\nexport function openXhr(method, urlString, withCredentials, disabled, isSync, timeout) {\r\n    if (disabled === void 0) { disabled = false; }\r\n    if (isSync === void 0) { isSync = false; }\r\n    function _wrapSetXhrProp(xhr, prop, value) {\r\n        try {\r\n            xhr[prop] = value;\r\n        }\r\n        catch (e) {\r\n            // - Wrapping as depending on the environment setting the property may fail (non-terminally)\r\n        }\r\n    }\r\n    var xhr = new XMLHttpRequest();\r\n    if (disabled) {\r\n        // Tag the instance so it's not tracked (trackDependency)\r\n        // If the environment has locked down the XMLHttpRequest (preventExtensions and/or freeze), this would\r\n        // cause the request to fail and we no telemetry would be sent\r\n        _wrapSetXhrProp(xhr, strDisabledPropertyName, disabled);\r\n    }\r\n    if (withCredentials) {\r\n        // Some libraries require that the withCredentials flag is set \"before\" open and\r\n        // - Wrapping as IE 10 has started throwing when setting before open\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    xhr.open(method, urlString, !isSync);\r\n    if (withCredentials) {\r\n        // withCredentials should be set AFTER open (https://xhr.spec.whatwg.org/#the-withcredentials-attribute)\r\n        // And older firefox instances from 11+ will throw for sync events (current versions don't) which happens during unload processing\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    // Only set the timeout for asynchronous requests as\r\n    // \"Timeout shouldn't be used for synchronous XMLHttpRequests requests used in a document environment or it will throw an InvalidAccessError exception.\"\"\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/timeout\r\n    if (!isSync && timeout) {\r\n        _wrapSetXhrProp(xhr, strTimeout, timeout);\r\n    }\r\n    return xhr;\r\n}\r\n/**\r\n* Converts the XHR getAllResponseHeaders to a map containing the header key and value.\r\n* @internal\r\n*/\r\n// tslint:disable-next-line: align\r\nexport function convertAllHeadersToMap(headersString) {\r\n    var headers = {};\r\n    if (isString(headersString)) {\r\n        var headersArray = strTrim(headersString)[_DYN_SPLIT /* @min:%2esplit */](/[\\r\\n]+/);\r\n        arrForEach(headersArray, function (headerEntry) {\r\n            if (headerEntry) {\r\n                var idx = headerEntry.indexOf(\": \");\r\n                if (idx !== -1) {\r\n                    // The new spec has the headers returning all as lowercase -- but not all browsers do this yet\r\n                    var header = strTrim(headerEntry.substring(0, idx))[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n                    var value = strTrim(headerEntry.substring(idx + 1));\r\n                    headers[header] = value;\r\n                }\r\n                else {\r\n                    headers[strTrim(headerEntry)] = 1;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return headers;\r\n}\r\n/**\r\n* append the XHR headers.\r\n* @internal\r\n*/\r\nexport function _appendHeader(theHeaders, xhr, name) {\r\n    if (!theHeaders[name] && xhr && xhr[_DYN_GET_RESPONSE_HEADER /* @min:%2egetResponseHeader */]) {\r\n        var value = xhr[_DYN_GET_RESPONSE_HEADER /* @min:%2egetResponseHeader */](name);\r\n        if (value) {\r\n            theHeaders[name] = strTrim(value);\r\n        }\r\n    }\r\n    return theHeaders;\r\n}\r\nvar STR_KILL_DURATION_HEADER = \"kill-duration\";\r\nvar STR_KILL_DURATION_SECONDS_HEADER = \"kill-duration-seconds\";\r\nvar STR_TIME_DELTA_HEADER = \"time-delta-millis\";\r\n/**\r\n* get the XHR getAllResponseHeaders.\r\n* @internal\r\n*/\r\nexport function _getAllResponseHeaders(xhr, isOneDs) {\r\n    var theHeaders = {};\r\n    if (!xhr[_DYN_GET_ALL_RESPONSE_HEA5 /* @min:%2egetAllResponseHeaders */]) {\r\n        // Firefox 2-63 doesn't have getAllResponseHeaders function but it does have getResponseHeader\r\n        // Only call these if getAllResponseHeaders doesn't exist, otherwise we can get invalid response errors\r\n        // as collector is not currently returning the correct header to allow JS to access these headers\r\n        if (!!isOneDs) {\r\n            theHeaders = _appendHeader(theHeaders, xhr, STR_TIME_DELTA_HEADER);\r\n            theHeaders = _appendHeader(theHeaders, xhr, STR_KILL_DURATION_HEADER);\r\n            theHeaders = _appendHeader(theHeaders, xhr, STR_KILL_DURATION_SECONDS_HEADER);\r\n        }\r\n    }\r\n    else {\r\n        theHeaders = convertAllHeadersToMap(xhr[_DYN_GET_ALL_RESPONSE_HEA5 /* @min:%2egetAllResponseHeaders */]());\r\n    }\r\n    return theHeaders;\r\n}\r\n//# sourceMappingURL=HelperFuncs.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as typeConverters from '../typeConverters';\nimport { ITypeScriptServiceClient } from '../typescriptService';\n\nclass TypeScriptDocumentHighlightProvider implements vscode.DocumentHighlightProvider, vscode.MultiDocumentHighlightProvider {\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async provideMultiDocumentHighlights(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\totherDocuments: vscode.TextDocument[],\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.MultiDocumentHighlight[]> {\n\t\tconst allFiles = [document, ...otherDocuments].map(doc => this.client.toOpenTsFilePath(doc)).filter(file => !!file) as string[];\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\n\t\tif (!file || allFiles.length === 0) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst args = {\n\t\t\t...typeConverters.Position.toFileLocationRequestArgs(file, position),\n\t\t\tfilesToSearch: allFiles\n\t\t};\n\t\tconst response = await this.client.execute('documentHighlights', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst result = response.body.map(highlightItem =>\n\t\t\tnew vscode.MultiDocumentHighlight(\n\t\t\t\tvscode.Uri.file(highlightItem.file),\n\t\t\t\t[...convertDocumentHighlight(highlightItem)]\n\t\t\t)\n\t\t);\n\n\t\treturn result;\n\t}\n\n\tpublic async provideDocumentHighlights(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.DocumentHighlight[]> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst args = {\n\t\t\t...typeConverters.Position.toFileLocationRequestArgs(file, position),\n\t\t\tfilesToSearch: [file]\n\t\t};\n\t\tconst response = await this.client.execute('documentHighlights', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn response.body.flatMap(convertDocumentHighlight);\n\t}\n}\n\nfunction convertDocumentHighlight(highlight: Proto.DocumentHighlightsItem): ReadonlyArray<vscode.DocumentHighlight> {\n\treturn highlight.highlightSpans.map(span =>\n\t\tnew vscode.DocumentHighlight(\n\t\t\ttypeConverters.Range.fromTextSpan(span),\n\t\t\tspan.kind === 'writtenReference' ? vscode.DocumentHighlightKind.Write : vscode.DocumentHighlightKind.Read));\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\tconst provider = new TypeScriptDocumentHighlightProvider(client);\n\n\treturn vscode.Disposable.from(\n\t\tvscode.languages.registerDocumentHighlightProvider(selector.syntax, provider),\n\t\tvscode.languages.registerMultiDocumentHighlightProvider(selector.syntax, provider)\n\t);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { LanguageDescription } from '../configuration/languageDescription';\nimport * as typeConverters from '../typeConverters';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport FileConfigurationManager from './fileConfigurationManager';\n\n\n\nconst defaultJsDoc = new vscode.SnippetString(`/**\\n * $0\\n */`);\n\nclass JsDocCompletionItem extends vscode.CompletionItem {\n\tconstructor(\n\t\tpublic readonly document: vscode.TextDocument,\n\t\tpublic readonly position: vscode.Position\n\t) {\n\t\tsuper('/** */', vscode.CompletionItemKind.Text);\n\t\tthis.detail = vscode.l10n.t(\"JSDoc comment\");\n\t\tthis.sortText = '\\0';\n\n\t\tconst line = document.lineAt(position.line).text;\n\t\tconst prefix = line.slice(0, position.character).match(/\\/\\**\\s*$/);\n\t\tconst suffix = line.slice(position.character).match(/^\\s*\\**\\//);\n\t\tconst start = position.translate(0, prefix ? -prefix[0].length : 0);\n\t\tconst range = new vscode.Range(start, position.translate(0, suffix ? suffix[0].length : 0));\n\t\tthis.range = { inserting: range, replacing: range };\n\t}\n}\n\nclass JsDocCompletionProvider implements vscode.CompletionItemProvider {\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly language: LanguageDescription,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager,\n\t) { }\n\n\tpublic async provideCompletionItems(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.CompletionItem[] | undefined> {\n\t\tif (!vscode.workspace.getConfiguration(this.language.id, document).get('suggest.completeJSDocs')) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (!this.isPotentiallyValidDocCompletionPosition(document, position)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst response = await this.client.interruptGetErr(async () => {\n\t\t\tawait this.fileConfigurationManager.ensureConfigurationForDocument(document, token);\n\n\t\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(file, position);\n\t\t\treturn this.client.execute('docCommentTemplate', args, token);\n\t\t});\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst item = new JsDocCompletionItem(document, position);\n\n\t\t// Workaround for #43619\n\t\t// docCommentTemplate previously returned undefined for empty jsdoc templates.\n\t\t// TS 2.7 now returns a single line doc comment, which breaks indentation.\n\t\tif (response.body.newText === '/** */') {\n\t\t\titem.insertText = defaultJsDoc;\n\t\t} else {\n\t\t\titem.insertText = templateToSnippet(response.body.newText);\n\t\t}\n\n\t\treturn [item];\n\t}\n\n\tprivate isPotentiallyValidDocCompletionPosition(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position\n\t): boolean {\n\t\t// Only show the JSdoc completion when the everything before the cursor is whitespace\n\t\t// or could be the opening of a comment\n\t\tconst line = document.lineAt(position.line).text;\n\t\tconst prefix = line.slice(0, position.character);\n\t\tif (!/^\\s*$|\\/\\*\\*\\s*$|^\\s*\\/\\*\\*+\\s*$/.test(prefix)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// And everything after is possibly a closing comment or more whitespace\n\t\tconst suffix = line.slice(position.character);\n\t\treturn /^\\s*(\\*+\\/)?\\s*$/.test(suffix);\n\t}\n}\n\nexport function templateToSnippet(template: string): vscode.SnippetString {\n\t// TODO: use append placeholder\n\tlet snippetIndex = 1;\n\ttemplate = template.replace(/\\$/g, '\\\\$'); // CodeQL [SM02383] This is only used for text which is put into the editor. It is not for rendered html\n\ttemplate = template.replace(/^[ \\t]*(?=(\\/|[ ]\\*))/gm, '');\n\ttemplate = template.replace(/^(\\/\\*\\*\\s*\\*[ ]*)$/m, (x) => x + `\\$0`);\n\ttemplate = template.replace(/\\* @param([ ]\\{\\S+\\})?\\s+(\\S+)[ \\t]*$/gm, (_param, type, post) => {\n\t\tlet out = '* @param ';\n\t\tif (type === ' {any}' || type === ' {*}') {\n\t\t\tout += `{\\$\\{${snippetIndex++}:*\\}} `;\n\t\t} else if (type) {\n\t\t\tout += type + ' ';\n\t\t}\n\t\tout += post + ` \\${${snippetIndex++}}`;\n\t\treturn out;\n\t});\n\n\ttemplate = template.replace(/\\* @returns[ \\t]*$/gm, `* @returns \\${${snippetIndex++}}`);\n\n\treturn new vscode.SnippetString(template);\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tlanguage: LanguageDescription,\n\tclient: ITypeScriptServiceClient,\n\tfileConfigurationManager: FileConfigurationManager,\n\n): vscode.Disposable {\n\treturn vscode.languages.registerCompletionItemProvider(selector.syntax,\n\t\tnew JsDocCompletionProvider(client, language, fileConfigurationManager),\n\t\t'*');\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nvar _a;\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { dumpObj, isFunction, isUndefined } from \"@nevware21/ts-utils\";\r\nimport { createDynamicConfig, onConfigChange } from \"../Config/DynamicConfig\";\r\nimport { _DYN_DIAG_LOG, _DYN_LOGGER, _DYN_LOGGING_LEVEL_CONSOL4, _DYN_LOG_INTERNAL_MESSAGE, _DYN_MESSAGE, _DYN_MESSAGE_ID, _DYN_PUSH, _DYN_REPLACE, _DYN_THROW_INTERNAL, _DYN_UNLOAD, _DYN_WARN_TO_CONSOLE } from \"../__DynamicConstants\";\r\nimport { getDebugExt } from \"./DbgExtensionUtils\";\r\nimport { getConsole, getJSON, hasJSON } from \"./EnvUtils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nvar STR_WARN_TO_CONSOLE = \"warnToConsole\";\r\n/**\r\n * For user non actionable traces use AI Internal prefix.\r\n */\r\nvar AiNonUserActionablePrefix = \"AI (Internal): \";\r\n/**\r\n * Prefix of the traces in portal.\r\n */\r\nvar AiUserActionablePrefix = \"AI: \";\r\n/**\r\n *  Session storage key for the prefix for the key indicating message type already logged\r\n */\r\nvar AIInternalMessagePrefix = \"AITR_\";\r\nvar defaultValues = {\r\n    loggingLevelConsole: 0,\r\n    loggingLevelTelemetry: 1,\r\n    maxMessageLimit: 25,\r\n    enableDebug: false\r\n};\r\nvar _logFuncs = (_a = {},\r\n    _a[0 /* eLoggingSeverity.DISABLED */] = null,\r\n    _a[1 /* eLoggingSeverity.CRITICAL */] = \"errorToConsole\",\r\n    _a[2 /* eLoggingSeverity.WARNING */] = STR_WARN_TO_CONSOLE,\r\n    _a[3 /* eLoggingSeverity.DEBUG */] = \"debugToConsole\",\r\n    _a);\r\nfunction _sanitizeDiagnosticText(text) {\r\n    if (text) {\r\n        return \"\\\"\" + text[_DYN_REPLACE /* @min:%2ereplace */](/\\\"/g, STR_EMPTY) + \"\\\"\";\r\n    }\r\n    return STR_EMPTY;\r\n}\r\nfunction _logToConsole(func, message) {\r\n    var theConsole = getConsole();\r\n    if (!!theConsole) {\r\n        var logFunc = \"log\";\r\n        if (theConsole[func]) {\r\n            logFunc = func;\r\n        }\r\n        if (isFunction(theConsole[logFunc])) {\r\n            theConsole[logFunc](message);\r\n        }\r\n    }\r\n}\r\nvar _InternalLogMessage = /** @class */ (function () {\r\n    function _InternalLogMessage(msgId, msg, isUserAct, properties) {\r\n        if (isUserAct === void 0) { isUserAct = false; }\r\n        var _self = this;\r\n        _self[_DYN_MESSAGE_ID /* @min:%2emessageId */] = msgId;\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] =\r\n            (isUserAct ? AiUserActionablePrefix : AiNonUserActionablePrefix) +\r\n                msgId;\r\n        var strProps = STR_EMPTY;\r\n        if (hasJSON()) {\r\n            strProps = getJSON().stringify(properties);\r\n        }\r\n        var diagnosticText = (msg ? \" message:\" + _sanitizeDiagnosticText(msg) : STR_EMPTY) +\r\n            (properties ? \" props:\" + _sanitizeDiagnosticText(strProps) : STR_EMPTY);\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] += diagnosticText;\r\n    }\r\n    _InternalLogMessage.dataType = \"MessageData\";\r\n    return _InternalLogMessage;\r\n}());\r\nexport { _InternalLogMessage };\r\nexport function safeGetLogger(core, config) {\r\n    return (core || {})[_DYN_LOGGER /* @min:%2elogger */] || new DiagnosticLogger(config);\r\n}\r\nvar DiagnosticLogger = /** @class */ (function () {\r\n    function DiagnosticLogger(config) {\r\n        this.identifier = \"DiagnosticLogger\";\r\n        /**\r\n         * The internal logging queue\r\n         */\r\n        this.queue = [];\r\n        /**\r\n         * Count of internal messages sent\r\n         */\r\n        var _messageCount = 0;\r\n        /**\r\n         * Holds information about what message types were already logged to console or sent to server.\r\n         */\r\n        var _messageLogged = {};\r\n        var _loggingLevelConsole;\r\n        var _loggingLevelTelemetry;\r\n        var _maxInternalMessageLimit;\r\n        var _enableDebug;\r\n        var _unloadHandler;\r\n        dynamicProto(DiagnosticLogger, this, function (_self) {\r\n            _unloadHandler = _setDefaultsFromConfig(config || {});\r\n            _self.consoleLoggingLevel = function () { return _loggingLevelConsole; };\r\n            /**\r\n             * This method will throw exceptions in debug mode or attempt to log the error as a console warning.\r\n             * @param severity - {LoggingSeverity} - The severity of the log message\r\n             * @param message - {_InternalLogMessage} - The log message.\r\n             */\r\n            _self[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */] = function (severity, msgId, msg, properties, isUserAct) {\r\n                if (isUserAct === void 0) { isUserAct = false; }\r\n                var message = new _InternalLogMessage(msgId, msg, isUserAct, properties);\r\n                if (_enableDebug) {\r\n                    throw dumpObj(message);\r\n                }\r\n                else {\r\n                    // Get the logging function and fallback to warnToConsole of for some reason errorToConsole doesn't exist\r\n                    var logFunc = _logFuncs[severity] || STR_WARN_TO_CONSOLE;\r\n                    if (!isUndefined(message[_DYN_MESSAGE /* @min:%2emessage */])) {\r\n                        if (isUserAct) {\r\n                            // check if this message type was already logged to console for this page view and if so, don't log it again\r\n                            var messageKey = +message[_DYN_MESSAGE_ID /* @min:%2emessageId */];\r\n                            if (!_messageLogged[messageKey] && _loggingLevelConsole >= severity) {\r\n                                _self[logFunc](message[_DYN_MESSAGE /* @min:%2emessage */]);\r\n                                _messageLogged[messageKey] = true;\r\n                            }\r\n                        }\r\n                        else {\r\n                            // Only log traces if the console Logging Level is >= the throwInternal severity level\r\n                            if (_loggingLevelConsole >= severity) {\r\n                                _self[logFunc](message[_DYN_MESSAGE /* @min:%2emessage */]);\r\n                            }\r\n                        }\r\n                        _logInternalMessage(severity, message);\r\n                    }\r\n                    else {\r\n                        _debugExtMsg(\"throw\" + (severity === 1 /* eLoggingSeverity.CRITICAL */ ? \"Critical\" : \"Warning\"), message);\r\n                    }\r\n                }\r\n            };\r\n            _self.debugToConsole = function (message) {\r\n                _logToConsole(\"debug\", message);\r\n                _debugExtMsg(\"warning\", message);\r\n            };\r\n            _self[_DYN_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */] = function (message) {\r\n                _logToConsole(\"warn\", message);\r\n                _debugExtMsg(\"warning\", message);\r\n            };\r\n            _self.errorToConsole = function (message) {\r\n                _logToConsole(\"error\", message);\r\n                _debugExtMsg(\"error\", message);\r\n            };\r\n            _self.resetInternalMessageCount = function () {\r\n                _messageCount = 0;\r\n                _messageLogged = {};\r\n            };\r\n            _self[_DYN_LOG_INTERNAL_MESSAGE /* @min:%2elogInternalMessage */] = _logInternalMessage;\r\n            _self[_DYN_UNLOAD /* @min:%2eunload */] = function (isAsync) {\r\n                _unloadHandler && _unloadHandler.rm();\r\n                _unloadHandler = null;\r\n            };\r\n            function _logInternalMessage(severity, message) {\r\n                if (_areInternalMessagesThrottled()) {\r\n                    return;\r\n                }\r\n                // check if this message type was already logged for this session and if so, don't log it again\r\n                var logMessage = true;\r\n                var messageKey = AIInternalMessagePrefix + message[_DYN_MESSAGE_ID /* @min:%2emessageId */];\r\n                // if the session storage is not available, limit to only one message type per page view\r\n                if (_messageLogged[messageKey]) {\r\n                    logMessage = false;\r\n                }\r\n                else {\r\n                    _messageLogged[messageKey] = true;\r\n                }\r\n                if (logMessage) {\r\n                    // Push the event in the internal queue\r\n                    if (severity <= _loggingLevelTelemetry) {\r\n                        _self.queue[_DYN_PUSH /* @min:%2epush */](message);\r\n                        _messageCount++;\r\n                        _debugExtMsg((severity === 1 /* eLoggingSeverity.CRITICAL */ ? \"error\" : \"warn\"), message);\r\n                    }\r\n                    // When throttle limit reached, send a special event\r\n                    if (_messageCount === _maxInternalMessageLimit) {\r\n                        var throttleLimitMessage = \"Internal events throttle limit per PageView reached for this app.\";\r\n                        var throttleMessage = new _InternalLogMessage(23 /* _eInternalMessageId.MessageLimitPerPVExceeded */, throttleLimitMessage, false);\r\n                        _self.queue[_DYN_PUSH /* @min:%2epush */](throttleMessage);\r\n                        if (severity === 1 /* eLoggingSeverity.CRITICAL */) {\r\n                            _self.errorToConsole(throttleLimitMessage);\r\n                        }\r\n                        else {\r\n                            _self[_DYN_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](throttleLimitMessage);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            function _setDefaultsFromConfig(config) {\r\n                // make sure the config is dynamic\r\n                return onConfigChange(createDynamicConfig(config, defaultValues, _self).cfg, function (details) {\r\n                    var config = details.cfg;\r\n                    _loggingLevelConsole = config[_DYN_LOGGING_LEVEL_CONSOL4 /* @min:%2eloggingLevelConsole */];\r\n                    _loggingLevelTelemetry = config.loggingLevelTelemetry;\r\n                    _maxInternalMessageLimit = config.maxMessageLimit;\r\n                    _enableDebug = config.enableDebug;\r\n                });\r\n            }\r\n            function _areInternalMessagesThrottled() {\r\n                return _messageCount >= _maxInternalMessageLimit;\r\n            }\r\n            function _debugExtMsg(name, data) {\r\n                var dbgExt = getDebugExt(config || {});\r\n                if (dbgExt && dbgExt[_DYN_DIAG_LOG /* @min:%2ediagLog */]) {\r\n                    dbgExt[_DYN_DIAG_LOG /* @min:%2ediagLog */](name, data);\r\n                }\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for DiagnosticLogger.prototype.consoleLoggingLevel.\r\n// Removed Stub for DiagnosticLogger.prototype.throwInternal.\r\n// Removed Stub for DiagnosticLogger.prototype.debugToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.warnToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.errorToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.resetInternalMessageCount.\r\n// Removed Stub for DiagnosticLogger.prototype.logInternalMessage.\r\n// Removed Stub for DiagnosticLogger.prototype.unload.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    DiagnosticLogger.__ieDyn=1;\n\n    return DiagnosticLogger;\r\n}());\r\nexport { DiagnosticLogger };\r\nfunction _getLogger(logger) {\r\n    return (logger || new DiagnosticLogger());\r\n}\r\n/**\r\n * This is a helper method which will call throwInternal on the passed logger, will throw exceptions in\r\n * debug mode or attempt to log the error as a console warning. This helper is provided mostly to better\r\n * support minification as logger.throwInternal() will not compress the publish \"throwInternal\" used throughout\r\n * the code.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param severity - {LoggingSeverity} - The severity of the log message\r\n * @param message - {_InternalLogMessage} - The log message.\r\n */\r\nexport function _throwInternal(logger, severity, msgId, msg, properties, isUserAct) {\r\n    if (isUserAct === void 0) { isUserAct = false; }\r\n    _getLogger(logger)[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */](severity, msgId, msg, properties, isUserAct);\r\n}\r\n/**\r\n * This is a helper method which will call warnToConsole on the passed logger with the provided message.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param message - {_InternalLogMessage} - The log message.\r\n */\r\nexport function _warnToConsole(logger, message) {\r\n    _getLogger(logger)[_DYN_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](message);\r\n}\r\n/**\r\n * Logs a message to the internal queue.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param severity - {LoggingSeverity} - The severity of the log message\r\n * @param message - {_InternalLogMessage} - The message to log.\r\n */\r\nexport function _logInternalMessage(logger, severity, message) {\r\n    _getLogger(logger)[_DYN_LOG_INTERNAL_MESSAGE /* @min:%2elogInternalMessage */](severity, message);\r\n}\r\n//# sourceMappingURL=DiagnosticLogger.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._RALType = void 0;\nvar _RALType;\n(function (_RALType) {\n    _RALType[_RALType[\"Browser\"] = 1] = \"Browser\";\n    _RALType[_RALType[\"Node\"] = 2] = \"Node\";\n})(_RALType = exports._RALType || (exports._RALType = {}));\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    RAL.Type = _RALType;\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n//# sourceMappingURL=ral.js.map","const Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n","const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (!identifier && identifierBase === false) {\n          throw new Error('invalid increment argument: identifier is empty')\n        }\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as vscode from 'vscode';\n\nimport { TypeScriptRequests } from '../typescriptService';\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { nulToken } from '../utils/cancellation';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nfunction isCancellationToken(value: any): value is vscode.CancellationToken {\n\treturn value && typeof value.isCancellationRequested === 'boolean' && typeof value.onCancellationRequested === 'function';\n}\n\ninterface RequestArgs {\n\treadonly file?: unknown;\n\treadonly $traceId?: unknown;\n}\n\nexport class TSServerRequestCommand implements Command {\n\tpublic readonly id = 'typescript.tsserverRequest';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic async execute(command: keyof TypeScriptRequests, args?: any, config?: any, token?: vscode.CancellationToken): Promise<unknown> {\n\t\tif (!isCancellationToken(token)) {\n\t\t\ttoken = nulToken;\n\t\t}\n\t\tif (args && typeof args === 'object' && !Array.isArray(args)) {\n\t\t\tconst requestArgs = args as RequestArgs;\n\t\t\tconst hasFile = requestArgs.file instanceof vscode.Uri;\n\t\t\tconst hasTraceId = typeof requestArgs.$traceId === 'string';\n\t\t\tif (hasFile || hasTraceId) {\n\t\t\t\tconst newArgs = { ...args };\n\t\t\t\tif (hasFile) {\n\t\t\t\t\tconst client = this.lazyClientHost.value.serviceClient;\n\t\t\t\t\tnewArgs.file = client.toOpenTsFilePath(requestArgs.file);\n\t\t\t\t}\n\t\t\t\tif (hasTraceId) {\n\t\t\t\t\tconst telemetryReporter = this.lazyClientHost.value.serviceClient.telemetryReporter;\n\t\t\t\t\ttelemetryReporter.logTraceEvent('TSServerRequestCommand.execute', requestArgs.$traceId, JSON.stringify({ command }));\n\t\t\t\t}\n\t\t\t\targs = newArgs;\n\t\t\t}\n\t\t}\n\n\t\t// The list can be found in the TypeScript compiler as `const enum CommandTypes`,\n\t\t// to avoid extensions making calls which could affect the internal tsserver state\n\t\t// these are only read-y sorts of commands\n\t\tconst allowList = [\n\t\t\t// Seeing the JS/DTS output for a file\n\t\t\t'emit-output',\n\t\t\t// Grabbing a file's diagnostics\n\t\t\t'semanticDiagnosticsSync',\n\t\t\t'syntacticDiagnosticsSync',\n\t\t\t'suggestionDiagnosticsSync',\n\t\t\t// Introspecting code at a position\n\t\t\t'quickinfo',\n\t\t\t'quickinfo-full',\n\t\t\t'completionInfo'\n\t\t];\n\n\t\tif (allowList.includes(command) || command.startsWith('_')) {\n\t\t\treturn this.lazyClientHost.value.serviceClient.execute(command, args, token, config);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n","const compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nexport class OpenTsServerLogCommand implements Command {\n\tpublic readonly id = 'typescript.openTsServerLog';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.serviceClient.openTsServerLogFile();\n\t}\n}\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { arrSlice, getLength } from \"@nevware21/ts-utils\";\r\nimport { _DYN_UNLOAD } from \"../__DynamicConstants\";\r\n/**\r\n * Run the unload function of the target object if it exists\r\n * @param target - The target object that contains the unload function\r\n * @param isAsync - The caller identifies whether it is expecting the operation to complete synchronously or asynchronously. Even\r\n * if the caller is not waiting the operation may still be performed asynchronously depending on the component and the reverse is\r\n * also true.\r\n * @returns The result of the target function\r\n */\r\nexport function runTargetUnload(target, isAsync) {\r\n    if (target && target[_DYN_UNLOAD /* @min:%2eunload */]) {\r\n        return target[_DYN_UNLOAD /* @min:%2eunload */](isAsync);\r\n    }\r\n}\r\n/**\r\n * Call the unload function on all targets handling any returned [IPromise](https://nevware21.github.io/ts-async/typedoc/interfaces/IPromise.html)\r\n * / Promise before calling the next targets unload\r\n * @param targets - An array of the targets to unload\r\n * @param isAsync - The caller identifies whether it is expecting the operations to complete synchronously or asynchronously.  Even\r\n * if the caller is not waiting the operation may still be performed asynchronously depending on the component and the reverse is\r\n * also true.\r\n * @param done - Optional callback function to call once all of the unload functions have been called.\r\n */\r\nexport function doUnloadAll(targets, isAsync, done) {\r\n    var result;\r\n    if (!done) {\r\n        result = createPromise(function (resolved) {\r\n            done = resolved;\r\n        });\r\n    }\r\n    if (targets && getLength(targets) > 0) {\r\n        doAwaitResponse(runTargetUnload(targets[0], isAsync), function () {\r\n            doUnloadAll(arrSlice(targets, 1), isAsync, done);\r\n        });\r\n    }\r\n    else {\r\n        done();\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=AsyncUtils.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport * as errorCodes from '../tsServer/protocol/errorCodes';\nimport * as fixNames from '../tsServer/protocol/fixNames';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { DiagnosticsManager } from './diagnostics';\nimport FileConfigurationManager from './fileConfigurationManager';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\n\n\ninterface AutoFix {\n\treadonly codes: Set<number>;\n\treadonly fixName: string;\n}\n\nasync function buildIndividualFixes(\n\tfixes: readonly AutoFix[],\n\tedit: vscode.WorkspaceEdit,\n\tclient: ITypeScriptServiceClient,\n\tfile: string,\n\tdiagnostics: readonly vscode.Diagnostic[],\n\ttoken: vscode.CancellationToken,\n): Promise<void> {\n\tfor (const diagnostic of diagnostics) {\n\t\tfor (const { codes, fixName } of fixes) {\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!codes.has(diagnostic.code as number)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst args: Proto.CodeFixRequestArgs = {\n\t\t\t\t...typeConverters.Range.toFileRangeRequestArgs(file, diagnostic.range),\n\t\t\t\terrorCodes: [+(diagnostic.code!)]\n\t\t\t};\n\n\t\t\tconst response = await client.execute('getCodeFixes', args, token);\n\t\t\tif (response.type !== 'response') {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst fix = response.body?.find(fix => fix.fixName === fixName);\n\t\t\tif (fix) {\n\t\t\t\ttypeConverters.WorkspaceEdit.withFileCodeEdits(edit, client, fix.changes);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n\nasync function buildCombinedFix(\n\tfixes: readonly AutoFix[],\n\tedit: vscode.WorkspaceEdit,\n\tclient: ITypeScriptServiceClient,\n\tfile: string,\n\tdiagnostics: readonly vscode.Diagnostic[],\n\ttoken: vscode.CancellationToken,\n): Promise<void> {\n\tfor (const diagnostic of diagnostics) {\n\t\tfor (const { codes, fixName } of fixes) {\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!codes.has(diagnostic.code as number)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst args: Proto.CodeFixRequestArgs = {\n\t\t\t\t...typeConverters.Range.toFileRangeRequestArgs(file, diagnostic.range),\n\t\t\t\terrorCodes: [+(diagnostic.code!)]\n\t\t\t};\n\n\t\t\tconst response = await client.execute('getCodeFixes', args, token);\n\t\t\tif (response.type !== 'response' || !response.body?.length) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst fix = response.body?.find(fix => fix.fixName === fixName);\n\t\t\tif (!fix) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!fix.fixId) {\n\t\t\t\ttypeConverters.WorkspaceEdit.withFileCodeEdits(edit, client, fix.changes);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst combinedArgs: Proto.GetCombinedCodeFixRequestArgs = {\n\t\t\t\tscope: {\n\t\t\t\t\ttype: 'file',\n\t\t\t\t\targs: { file }\n\t\t\t\t},\n\t\t\t\tfixId: fix.fixId,\n\t\t\t};\n\n\t\t\tconst combinedResponse = await client.execute('getCombinedCodeFix', combinedArgs, token);\n\t\t\tif (combinedResponse.type !== 'response' || !combinedResponse.body) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttypeConverters.WorkspaceEdit.withFileCodeEdits(edit, client, combinedResponse.body.changes);\n\t\t\treturn;\n\t\t}\n\t}\n}\n\n// #region Source Actions\n\nabstract class SourceAction extends vscode.CodeAction {\n\tabstract build(\n\t\tclient: ITypeScriptServiceClient,\n\t\tfile: string,\n\t\tdiagnostics: readonly vscode.Diagnostic[],\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<void>;\n}\n\nclass SourceFixAll extends SourceAction {\n\n\tstatic readonly kind = vscode.CodeActionKind.SourceFixAll.append('ts');\n\n\tconstructor() {\n\t\tsuper(vscode.l10n.t(\"Fix all fixable JS/TS issues\"), SourceFixAll.kind);\n\t}\n\n\tasync build(client: ITypeScriptServiceClient, file: string, diagnostics: readonly vscode.Diagnostic[], token: vscode.CancellationToken): Promise<void> {\n\t\tthis.edit = new vscode.WorkspaceEdit();\n\n\t\tawait buildIndividualFixes([\n\t\t\t{ codes: errorCodes.incorrectlyImplementsInterface, fixName: fixNames.classIncorrectlyImplementsInterface },\n\t\t\t{ codes: errorCodes.asyncOnlyAllowedInAsyncFunctions, fixName: fixNames.awaitInSyncFunction },\n\t\t], this.edit, client, file, diagnostics, token);\n\n\t\tawait buildCombinedFix([\n\t\t\t{ codes: errorCodes.unreachableCode, fixName: fixNames.unreachableCode }\n\t\t], this.edit, client, file, diagnostics, token);\n\t}\n}\n\nclass SourceRemoveUnused extends SourceAction {\n\n\tstatic readonly kind = vscode.CodeActionKind.Source.append('removeUnused').append('ts');\n\n\tconstructor() {\n\t\tsuper(vscode.l10n.t(\"Remove all unused code\"), SourceRemoveUnused.kind);\n\t}\n\n\tasync build(client: ITypeScriptServiceClient, file: string, diagnostics: readonly vscode.Diagnostic[], token: vscode.CancellationToken): Promise<void> {\n\t\tthis.edit = new vscode.WorkspaceEdit();\n\t\tawait buildCombinedFix([\n\t\t\t{ codes: errorCodes.variableDeclaredButNeverUsed, fixName: fixNames.unusedIdentifier },\n\t\t], this.edit, client, file, diagnostics, token);\n\t}\n}\n\nclass SourceAddMissingImports extends SourceAction {\n\n\tstatic readonly kind = vscode.CodeActionKind.Source.append('addMissingImports').append('ts');\n\n\tconstructor() {\n\t\tsuper(vscode.l10n.t(\"Add all missing imports\"), SourceAddMissingImports.kind);\n\t}\n\n\tasync build(client: ITypeScriptServiceClient, file: string, diagnostics: readonly vscode.Diagnostic[], token: vscode.CancellationToken): Promise<void> {\n\t\tthis.edit = new vscode.WorkspaceEdit();\n\t\tawait buildCombinedFix([\n\t\t\t{ codes: errorCodes.cannotFindName, fixName: fixNames.fixImport }\n\t\t],\n\t\t\tthis.edit, client, file, diagnostics, token);\n\t}\n}\n\n//#endregion\n\nclass TypeScriptAutoFixProvider implements vscode.CodeActionProvider {\n\n\tprivate static readonly kindProviders = [\n\t\tSourceFixAll,\n\t\tSourceRemoveUnused,\n\t\tSourceAddMissingImports,\n\t];\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager,\n\t\tprivate readonly diagnosticsManager: DiagnosticsManager,\n\t) { }\n\n\tpublic get metadata(): vscode.CodeActionProviderMetadata {\n\t\treturn {\n\t\t\tprovidedCodeActionKinds: TypeScriptAutoFixProvider.kindProviders.map(x => x.kind),\n\t\t};\n\t}\n\n\tpublic async provideCodeActions(\n\t\tdocument: vscode.TextDocument,\n\t\t_range: vscode.Range,\n\t\tcontext: vscode.CodeActionContext,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.CodeAction[] | undefined> {\n\t\tif (!context.only || !vscode.CodeActionKind.Source.intersects(context.only)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst actions = this.getFixAllActions(context.only);\n\t\tconst diagnostics = this.diagnosticsManager.getDiagnostics(document.uri);\n\t\tif (!diagnostics.length) {\n\t\t\t// Actions are a no-op in this case but we still want to return them\n\t\t\treturn actions;\n\t\t}\n\n\t\tawait this.fileConfigurationManager.ensureConfigurationForDocument(document, token);\n\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tawait Promise.all(actions.map(action => action.build(this.client, file, diagnostics, token)));\n\n\t\treturn actions;\n\t}\n\n\tprivate getFixAllActions(only: vscode.CodeActionKind): SourceAction[] {\n\t\treturn TypeScriptAutoFixProvider.kindProviders\n\t\t\t.filter(provider => only.intersects(provider.kind))\n\t\t\t.map(provider => new provider());\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n\tfileConfigurationManager: FileConfigurationManager,\n\tdiagnosticsManager: DiagnosticsManager,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\tconst provider = new TypeScriptAutoFixProvider(client, fileConfigurationManager, diagnosticsManager);\n\t\treturn vscode.languages.registerCodeActionsProvider(selector.semantic, provider, provider.metadata);\n\t});\n}\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { objDefine } from \"@nevware21/ts-utils\";\r\nimport { _DYN_NODE_TYPE } from \"../__DynamicConstants\";\r\nimport { normalizeJsName } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { newId } from \"./RandomHelper\";\r\nvar version = '3.3.4';\r\nvar instanceName = \".\" + newId(6);\r\nvar _dataUid = 0;\r\n// Accepts only:\r\n//  - Node\r\n//    - Node.ELEMENT_NODE\r\n//    - Node.DOCUMENT_NODE\r\n//  - Object\r\n//    - Any\r\nfunction _canAcceptData(target) {\r\n    return target[_DYN_NODE_TYPE /* @min:%2enodeType */] === 1 || target[_DYN_NODE_TYPE /* @min:%2enodeType */] === 9 || !(+target[_DYN_NODE_TYPE /* @min:%2enodeType */]);\r\n}\r\nfunction _getCache(data, target) {\r\n    var theCache = target[data.id];\r\n    if (!theCache) {\r\n        theCache = {};\r\n        try {\r\n            if (_canAcceptData(target)) {\r\n                objDefine(target, data.id, {\r\n                    e: false,\r\n                    v: theCache\r\n                });\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Not all environments allow extending all objects, so just ignore the cache in those cases\r\n        }\r\n    }\r\n    return theCache;\r\n}\r\nexport function createUniqueNamespace(name, includeVersion) {\r\n    if (includeVersion === void 0) { includeVersion = false; }\r\n    return normalizeJsName(name + (_dataUid++) + (includeVersion ? \".\" + version : STR_EMPTY) + instanceName);\r\n}\r\nexport function createElmNodeData(name) {\r\n    var data = {\r\n        id: createUniqueNamespace(\"_aiData-\" + (name || STR_EMPTY) + \".\" + version),\r\n        accept: function (target) {\r\n            return _canAcceptData(target);\r\n        },\r\n        get: function (target, name, defValue, addDefault) {\r\n            var theCache = target[data.id];\r\n            if (!theCache) {\r\n                if (addDefault) {\r\n                    // Side effect is adds the cache\r\n                    theCache = _getCache(data, target);\r\n                    theCache[normalizeJsName(name)] = defValue;\r\n                }\r\n                return defValue;\r\n            }\r\n            return theCache[normalizeJsName(name)];\r\n        },\r\n        kill: function (target, name) {\r\n            if (target && target[name]) {\r\n                try {\r\n                    delete target[name];\r\n                }\r\n                catch (e) {\r\n                    // Just cleaning up, so if this fails -- ignore\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return data;\r\n}\r\n//# sourceMappingURL=DataCacheHelper.js.map","const compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createEnum, createTypeMap } from \"@nevware21/ts-utils\";\r\n/**\r\n * Create an enum style object which has both the key => value and value => key mappings\r\n * @param values - The values to populate on the new object\r\n * @returns\r\n */\r\nexport var createEnumStyle = createEnum;\r\n/**\r\n * Create a 2 index map that maps an enum's key and value to the defined map value, X[\"key\"] => mapValue and X[0] => mapValue.\r\n * Generic values\r\n * - E = the const enum type (typeof eRequestHeaders);\r\n * - V = Identifies the valid values for the keys, this should include both the enum numeric and string key of the type. The\r\n * resulting \"Value\" of each entry identifies the valid values withing the assignments.\r\n * @param values - The values to populate on the new object\r\n * @returns\r\n */\r\nexport var createValueMap = createTypeMap;\r\n//# sourceMappingURL=EnumHelperFuncs.js.map","const SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as arrays from '../utils/arrays';\nimport { Disposable } from '../utils/dispose';\n\nexport interface TypeScriptServerPlugin {\n\treadonly extension: vscode.Extension<unknown>;\n\treadonly uri: vscode.Uri;\n\treadonly name: string;\n\treadonly enableForWorkspaceTypeScriptVersions: boolean;\n\treadonly languages: ReadonlyArray<string>;\n\treadonly configNamespace?: string;\n}\n\nnamespace TypeScriptServerPlugin {\n\texport function equals(a: TypeScriptServerPlugin, b: TypeScriptServerPlugin): boolean {\n\t\treturn a.uri.toString() === b.uri.toString()\n\t\t\t&& a.name === b.name\n\t\t\t&& a.enableForWorkspaceTypeScriptVersions === b.enableForWorkspaceTypeScriptVersions\n\t\t\t&& arrays.equals(a.languages, b.languages);\n\t}\n}\n\nexport class PluginManager extends Disposable {\n\tprivate readonly _pluginConfigurations = new Map<string, {}>();\n\n\tprivate _plugins?: Map<string, ReadonlyArray<TypeScriptServerPlugin>>;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tvscode.extensions.onDidChange(() => {\n\t\t\tif (!this._plugins) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst newPlugins = this.readPlugins();\n\t\t\tif (!arrays.equals(Array.from(this._plugins.values()).flat(), Array.from(newPlugins.values()).flat(), TypeScriptServerPlugin.equals)) {\n\t\t\t\tthis._plugins = newPlugins;\n\t\t\t\tthis._onDidUpdatePlugins.fire(this);\n\t\t\t}\n\t\t}, undefined, this._disposables);\n\t}\n\n\tpublic get plugins(): ReadonlyArray<TypeScriptServerPlugin> {\n\t\tthis._plugins ??= this.readPlugins();\n\t\treturn Array.from(this._plugins.values()).flat();\n\t}\n\n\tprivate readonly _onDidUpdatePlugins = this._register(new vscode.EventEmitter<this>());\n\tpublic readonly onDidChangePlugins = this._onDidUpdatePlugins.event;\n\n\tprivate readonly _onDidUpdateConfig = this._register(new vscode.EventEmitter<{ pluginId: string; config: {} }>());\n\tpublic readonly onDidUpdateConfig = this._onDidUpdateConfig.event;\n\n\tpublic setConfiguration(pluginId: string, config: {}) {\n\t\tthis._pluginConfigurations.set(pluginId, config);\n\t\tthis._onDidUpdateConfig.fire({ pluginId, config });\n\t}\n\n\tpublic configurations(): IterableIterator<[string, {}]> {\n\t\treturn this._pluginConfigurations.entries();\n\t}\n\n\tprivate readPlugins() {\n\t\tconst pluginMap = new Map<string, ReadonlyArray<TypeScriptServerPlugin>>();\n\t\tfor (const extension of vscode.extensions.all) {\n\t\t\tconst pack = extension.packageJSON;\n\t\t\tif (pack.contributes && Array.isArray(pack.contributes.typescriptServerPlugins)) {\n\t\t\t\tconst plugins: TypeScriptServerPlugin[] = [];\n\t\t\t\tfor (const plugin of pack.contributes.typescriptServerPlugins) {\n\t\t\t\t\tplugins.push({\n\t\t\t\t\t\textension,\n\t\t\t\t\t\tname: plugin.name,\n\t\t\t\t\t\tenableForWorkspaceTypeScriptVersions: !!plugin.enableForWorkspaceTypeScriptVersions,\n\t\t\t\t\t\turi: extension.extensionUri,\n\t\t\t\t\t\tlanguages: Array.isArray(plugin.languages) ? plugin.languages : [],\n\t\t\t\t\t\tconfigNamespace: plugin.configNamespace,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (plugins.length) {\n\t\t\t\t\tpluginMap.set(extension.id, plugins);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn pluginMap;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as Proto from './protocol/protocol';\n\nexport enum RequestQueueingType {\n\t/**\n\t * Normal request that is executed in order.\n\t */\n\tNormal = 1,\n\n\t/**\n\t * Request that normal requests jump in front of in the queue.\n\t */\n\tLowPriority = 2,\n\n\t/**\n\t * A fence that blocks request reordering.\n\t *\n\t * Fences are not reordered. Unlike a normal request, a fence will never jump in front of a low priority request\n\t * in the request queue.\n\t */\n\tFence = 3,\n}\n\nexport interface RequestItem {\n\treadonly request: Proto.Request;\n\treadonly expectsResponse: boolean;\n\treadonly isAsync: boolean;\n\treadonly queueingType: RequestQueueingType;\n}\n\nexport class RequestQueue {\n\tprivate readonly queue: RequestItem[] = [];\n\tprivate sequenceNumber: number = 0;\n\n\tpublic get length(): number {\n\t\treturn this.queue.length;\n\t}\n\n\tpublic enqueue(item: RequestItem): void {\n\t\tif (item.queueingType === RequestQueueingType.Normal) {\n\t\t\tlet index = this.queue.length - 1;\n\t\t\twhile (index >= 0) {\n\t\t\t\tif (this.queue[index].queueingType !== RequestQueueingType.LowPriority) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t--index;\n\t\t\t}\n\t\t\tthis.queue.splice(index + 1, 0, item);\n\t\t} else {\n\t\t\t// Only normal priority requests can be reordered. All other requests just go to the end.\n\t\t\tthis.queue.push(item);\n\t\t}\n\t}\n\n\tpublic dequeue(): RequestItem | undefined {\n\t\treturn this.queue.shift();\n\t}\n\n\tpublic getQueuedCommands(skipLast: boolean = false): string[] {\n\t\tconst result: string[] = [];\n\t\tconst end = skipLast ? this.queue.length - 1 : this.queue.length;\n\t\tif (end <= 0) {\n\t\t\treturn result;\n\t\t}\n\t\tfor (let i = 0; i < end; i++) {\n\t\t\tconst item = this.queue[i];\n\t\t\tresult.push(item.request.command);\n\t\t\tif (result.length >= 5) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic tryDeletePendingRequest(seq: number): boolean {\n\t\tfor (let i = 0; i < this.queue.length; i++) {\n\t\t\tif (this.queue[i].request.seq === seq) {\n\t\t\t\tthis.queue.splice(i, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic createRequest(command: string, args: any): Proto.Request {\n\t\treturn {\n\t\t\tseq: this.sequenceNumber++,\n\t\t\ttype: 'request',\n\t\t\tcommand: command,\n\t\t\targuments: args\n\t\t};\n\t}\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MessageConnection = exports.ClientConnection = exports.ServiceConnection = void 0;\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst ril_1 = __importDefault(require(\"./ril\"));\nril_1.default.install();\n__exportStar(require(\"../common/api\"), exports);\nvar connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"ServiceConnection\", { enumerable: true, get: function () { return connection_1.ServiceConnection; } });\nObject.defineProperty(exports, \"ClientConnection\", { enumerable: true, get: function () { return connection_1.ClientConnection; } });\nvar messageConnection_1 = require(\"./messageConnection\");\nObject.defineProperty(exports, \"MessageConnection\", { enumerable: true, get: function () { return messageConnection_1.MessageConnection; } });\n//# sourceMappingURL=main.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ServiceConnection = exports.ClientConnection = void 0;\nconst ral_1 = __importDefault(require(\"../common/ral\"));\nconst connection_1 = require(\"../common/connection\");\nclass ClientConnection extends connection_1.BaseClientConnection {\n    constructor(port) {\n        super();\n        this.port = port;\n        this.port.onmessage = ((event) => {\n            this.handleMessage(event.data);\n        });\n    }\n    postMessage(sharedArrayBuffer) {\n        this.port.postMessage(sharedArrayBuffer);\n    }\n}\nexports.ClientConnection = ClientConnection;\nclass ServiceConnection extends connection_1.BaseServiceConnection {\n    constructor(port) {\n        super();\n        this.port = port;\n        this.port.onmessage = (async (event) => {\n            try {\n                await this.handleMessage(event.data);\n            }\n            catch (error) {\n                (0, ral_1.default)().console.error(error);\n            }\n        });\n    }\n    postMessage(message) {\n        this.port.postMessage(message);\n    }\n}\nexports.ServiceConnection = ServiceConnection;\n//# sourceMappingURL=connection.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Command } from '../../commands/commandManager';\nimport { nulToken } from '../../utils/cancellation';\nimport type * as Proto from '../../tsServer/protocol/protocol';\nimport * as typeConverters from '../../typeConverters';\nimport { ITypeScriptServiceClient } from '../../typescriptService';\nimport { TelemetryReporter } from '../../logging/telemetry';\n\nexport class EditorChatFollowUp implements Command {\n\tpublic static readonly ID = '_typescript.quickFix.editorChatReplacement2';\n\tpublic readonly id = EditorChatFollowUp.ID;\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly telemetryReporter: TelemetryReporter,\n\t) { }\n\n\tasync execute({ message, document, expand, action }: EditorChatFollowUp_Args) {\n\t\tif (action.type === 'quickfix') {\n\t\t\t/* __GDPR__\n\t\t\t\t\"aiQuickfix.execute\" : {\n\t\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\t\"action\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\"${include}\": [\n\t\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t*/\n\t\t\tthis.telemetryReporter.logTelemetry('aiQuickfix.execute', {\n\t\t\t\taction: action.quickfix.fixName,\n\t\t\t});\n\t\t} else {\n\t\t\t/* __GDPR__\n\t\t\t\t\"aiRefactor.execute\" : {\n\t\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\t\"action\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\"${include}\": [\n\t\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t*/\n\t\t\tthis.telemetryReporter.logTelemetry('aiRefactor.execute', {\n\t\t\t\taction: action.refactor.name,\n\t\t\t});\n\t\t}\n\n\t\tconst initialRange =\n\t\t\texpand.kind === 'navtree-function'\n\t\t\t\t? await findScopeEndLineFromNavTree(\n\t\t\t\t\tthis.client,\n\t\t\t\t\tdocument,\n\t\t\t\t\texpand.pos.line\n\t\t\t\t)\n\t\t\t\t: expand.kind === 'refactor-info'\n\t\t\t\t\t? await findEditScope(\n\t\t\t\t\t\tthis.client,\n\t\t\t\t\t\tdocument,\n\t\t\t\t\t\texpand.refactor.edits.flatMap((e) => e.textChanges)\n\t\t\t\t\t)\n\t\t\t\t\t: expand.kind === 'code-action'\n\t\t\t\t\t\t? await findEditScope(\n\t\t\t\t\t\t\tthis.client,\n\t\t\t\t\t\t\tdocument,\n\t\t\t\t\t\t\texpand.action.changes.flatMap((c) => c.textChanges)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: expand.range;\n\t\tconst initialSelection = initialRange ? new vscode.Selection(initialRange.start, initialRange.end) : undefined;\n\t\tawait vscode.commands.executeCommand('vscode.editorChat.start', {\n\t\t\tinitialRange,\n\t\t\tinitialSelection,\n\t\t\tmessage,\n\t\t\tautoSend: true,\n\t\t});\n\t}\n}\nexport interface EditorChatFollowUp_Args {\n\treadonly message: string;\n\treadonly document: vscode.TextDocument;\n\treadonly expand: Expand;\n\treadonly action: {\n\t\treadonly type: 'refactor';\n\t\treadonly refactor: Proto.RefactorActionInfo;\n\t} | {\n\t\treadonly type: 'quickfix';\n\t\treadonly quickfix: Proto.CodeFixAction;\n\t};\n}\n\nexport class CompositeCommand implements Command {\n\tpublic static readonly ID = '_typescript.compositeCommand';\n\tpublic readonly id = CompositeCommand.ID;\n\n\tpublic async execute(...commands: vscode.Command[]): Promise<void> {\n\t\tfor (const command of commands) {\n\t\t\tawait vscode.commands.executeCommand(\n\t\t\t\tcommand.command,\n\t\t\t\t...(command.arguments ?? [])\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport type Expand =\n\t| { kind: 'none'; readonly range: vscode.Range }\n\t| { kind: 'navtree-function'; readonly pos: vscode.Position }\n\t| { kind: 'refactor-info'; readonly refactor: Proto.RefactorEditInfo }\n\t| { kind: 'code-action'; readonly action: Proto.CodeAction };\n\nfunction findScopeEndLineFromNavTreeWorker(\n\tstartLine: number,\n\tnavigationTree: Proto.NavigationTree[]\n): vscode.Range | undefined {\n\tfor (const node of navigationTree) {\n\t\tconst range = typeConverters.Range.fromTextSpan(node.spans[0]);\n\t\tif (startLine === range.start.line) {\n\t\t\treturn range;\n\t\t} else if (\n\t\t\tstartLine > range.start.line &&\n\t\t\tstartLine <= range.end.line &&\n\t\t\tnode.childItems\n\t\t) {\n\t\t\treturn findScopeEndLineFromNavTreeWorker(startLine, node.childItems);\n\t\t}\n\t}\n\treturn undefined;\n}\n\nasync function findScopeEndLineFromNavTree(\n\tclient: ITypeScriptServiceClient,\n\tdocument: vscode.TextDocument,\n\tstartLine: number\n) {\n\tconst filepath = client.toOpenTsFilePath(document);\n\tif (!filepath) {\n\t\treturn;\n\t}\n\tconst response = await client.execute(\n\t\t'navtree',\n\t\t{ file: filepath },\n\t\tnulToken\n\t);\n\tif (response.type !== 'response' || !response.body?.childItems) {\n\t\treturn;\n\t}\n\treturn findScopeEndLineFromNavTreeWorker(startLine, response.body.childItems);\n}\n\nasync function findEditScope(\n\tclient: ITypeScriptServiceClient,\n\tdocument: vscode.TextDocument,\n\tedits: Proto.CodeEdit[]\n): Promise<vscode.Range> {\n\tlet first = typeConverters.Position.fromLocation(edits[0].start);\n\tlet firstEdit = edits[0];\n\tlet lastEdit = edits[0];\n\tlet last = typeConverters.Position.fromLocation(edits[0].start);\n\tfor (const edit of edits) {\n\t\tconst start = typeConverters.Position.fromLocation(edit.start);\n\t\tconst end = typeConverters.Position.fromLocation(edit.end);\n\t\tif (start.compareTo(first) < 0) {\n\t\t\tfirst = start;\n\t\t\tfirstEdit = edit;\n\t\t}\n\t\tif (end.compareTo(last) > 0) {\n\t\t\tlast = end;\n\t\t\tlastEdit = edit;\n\t\t}\n\t}\n\tconst text = document.getText();\n\tconst startIndex = text.indexOf(firstEdit.newText);\n\tconst start = startIndex > -1 ? document.positionAt(startIndex) : first;\n\tconst endIndex = text.lastIndexOf(lastEdit.newText);\n\tconst end =\n\t\tendIndex > -1\n\t\t\t? document.positionAt(endIndex + lastEdit.newText.length)\n\t\t\t: last;\n\tconst expandEnd = await findScopeEndLineFromNavTree(\n\t\tclient,\n\t\tdocument,\n\t\tend.line\n\t);\n\treturn new vscode.Range(start, expandEnd?.end ?? end);\n}\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","var LIB;LIB=(()=>{\"use strict\";var t={470:t=>{function e(t){if(\"string\"!=typeof t)throw new TypeError(\"Path must be a string. Received \"+JSON.stringify(t))}function r(t,e){for(var r,n=\"\",o=0,i=-1,a=0,h=0;h<=t.length;++h){if(h<t.length)r=t.charCodeAt(h);else{if(47===r)break;r=47}if(47===r){if(i===h-1||1===a);else if(i!==h-1&&2===a){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var s=n.lastIndexOf(\"/\");if(s!==n.length-1){-1===s?(n=\"\",o=0):o=(n=n.slice(0,s)).length-1-n.lastIndexOf(\"/\"),i=h,a=0;continue}}else if(2===n.length||1===n.length){n=\"\",o=0,i=h,a=0;continue}e&&(n.length>0?n+=\"/..\":n=\"..\",o=2)}else n.length>0?n+=\"/\"+t.slice(i+1,h):n=t.slice(i+1,h),o=h-i-1;i=h,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var n={resolve:function(){for(var t,n=\"\",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a;i>=0?a=arguments[i]:(void 0===t&&(t=process.cwd()),a=t),e(a),0!==a.length&&(n=a+\"/\"+n,o=47===a.charCodeAt(0))}return n=r(n,!o),o?n.length>0?\"/\"+n:\"/\":n.length>0?n:\".\"},normalize:function(t){if(e(t),0===t.length)return\".\";var n=47===t.charCodeAt(0),o=47===t.charCodeAt(t.length-1);return 0!==(t=r(t,!n)).length||n||(t=\".\"),t.length>0&&o&&(t+=\"/\"),n?\"/\"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return\".\";for(var t,r=0;r<arguments.length;++r){var o=arguments[r];e(o),o.length>0&&(void 0===t?t=o:t+=\"/\"+o)}return void 0===t?\".\":n.normalize(t)},relative:function(t,r){if(e(t),e(r),t===r)return\"\";if((t=n.resolve(t))===(r=n.resolve(r)))return\"\";for(var o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var i=t.length,a=i-o,h=1;h<r.length&&47===r.charCodeAt(h);++h);for(var s=r.length-h,c=a<s?a:s,f=-1,u=0;u<=c;++u){if(u===c){if(s>c){if(47===r.charCodeAt(h+u))return r.slice(h+u+1);if(0===u)return r.slice(h+u)}else a>c&&(47===t.charCodeAt(o+u)?f=u:0===u&&(f=0));break}var l=t.charCodeAt(o+u);if(l!==r.charCodeAt(h+u))break;47===l&&(f=u)}var p=\"\";for(u=o+f+1;u<=i;++u)u!==i&&47!==t.charCodeAt(u)||(0===p.length?p+=\"..\":p+=\"/..\");return p.length>0?p+r.slice(h+f):(h+=f,47===r.charCodeAt(h)&&++h,r.slice(h))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return\".\";for(var r=t.charCodeAt(0),n=47===r,o=-1,i=!0,a=t.length-1;a>=1;--a)if(47===(r=t.charCodeAt(a))){if(!i){o=a;break}}else i=!1;return-1===o?n?\"/\":\".\":n&&1===o?\"//\":t.slice(0,o)},basename:function(t,r){if(void 0!==r&&\"string\"!=typeof r)throw new TypeError('\"ext\" argument must be a string');e(t);var n,o=0,i=-1,a=!0;if(void 0!==r&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return\"\";var h=r.length-1,s=-1;for(n=t.length-1;n>=0;--n){var c=t.charCodeAt(n);if(47===c){if(!a){o=n+1;break}}else-1===s&&(a=!1,s=n+1),h>=0&&(c===r.charCodeAt(h)?-1==--h&&(i=n):(h=-1,i=s))}return o===i?i=s:-1===i&&(i=t.length),t.slice(o,i)}for(n=t.length-1;n>=0;--n)if(47===t.charCodeAt(n)){if(!a){o=n+1;break}}else-1===i&&(a=!1,i=n+1);return-1===i?\"\":t.slice(o,i)},extname:function(t){e(t);for(var r=-1,n=0,o=-1,i=!0,a=0,h=t.length-1;h>=0;--h){var s=t.charCodeAt(h);if(47!==s)-1===o&&(i=!1,o=h+1),46===s?-1===r?r=h:1!==a&&(a=1):-1!==r&&(a=-1);else if(!i){n=h+1;break}}return-1===r||-1===o||0===a||1===a&&r===o-1&&r===n+1?\"\":t.slice(r,o)},format:function(t){if(null===t||\"object\"!=typeof t)throw new TypeError('The \"pathObject\" argument must be of type Object. Received type '+typeof t);return function(t,e){var r=e.dir||e.root,n=e.base||(e.name||\"\")+(e.ext||\"\");return r?r===e.root?r+n:r+\"/\"+n:n}(0,t)},parse:function(t){e(t);var r={root:\"\",dir:\"\",base:\"\",ext:\"\",name:\"\"};if(0===t.length)return r;var n,o=t.charCodeAt(0),i=47===o;i?(r.root=\"/\",n=1):n=0;for(var a=-1,h=0,s=-1,c=!0,f=t.length-1,u=0;f>=n;--f)if(47!==(o=t.charCodeAt(f)))-1===s&&(c=!1,s=f+1),46===o?-1===a?a=f:1!==u&&(u=1):-1!==a&&(u=-1);else if(!c){h=f+1;break}return-1===a||-1===s||0===u||1===u&&a===s-1&&a===h+1?-1!==s&&(r.base=r.name=0===h&&i?t.slice(1,s):t.slice(h,s)):(0===h&&i?(r.name=t.slice(1,a),r.base=t.slice(1,s)):(r.name=t.slice(h,a),r.base=t.slice(h,s)),r.ext=t.slice(a,s)),h>0?r.dir=t.slice(0,h-1):i&&(r.dir=\"/\"),r},sep:\"/\",delimiter:\":\",win32:null,posix:null};n.posix=n,t.exports=n},447:(t,e,r)=>{var n;if(r.r(e),r.d(e,{URI:()=>d,Utils:()=>P}),\"object\"==typeof process)n=\"win32\"===process.platform;else if(\"object\"==typeof navigator){var o=navigator.userAgent;n=o.indexOf(\"Windows\")>=0}var i,a,h=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Class extends value \"+String(e)+\" is not a constructor or null\");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=/^\\w[\\w\\d+.-]*$/,c=/^\\//,f=/^\\/\\//;function u(t,e){if(!t.scheme&&e)throw new Error('[UriError]: Scheme is missing: {scheme: \"\", authority: \"'.concat(t.authority,'\", path: \"').concat(t.path,'\", query: \"').concat(t.query,'\", fragment: \"').concat(t.fragment,'\"}'));if(t.scheme&&!s.test(t.scheme))throw new Error(\"[UriError]: Scheme contains illegal characters.\");if(t.path)if(t.authority){if(!c.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character')}else if(f.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")')}var l=\"\",p=\"/\",g=/^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/,d=function(){function t(t,e,r,n,o,i){void 0===i&&(i=!1),\"object\"==typeof t?(this.scheme=t.scheme||l,this.authority=t.authority||l,this.path=t.path||l,this.query=t.query||l,this.fragment=t.fragment||l):(this.scheme=function(t,e){return t||e?t:\"file\"}(t,i),this.authority=e||l,this.path=function(t,e){switch(t){case\"https\":case\"http\":case\"file\":e?e[0]!==p&&(e=p+e):e=p}return e}(this.scheme,r||l),this.query=n||l,this.fragment=o||l,u(this,i))}return t.isUri=function(e){return e instanceof t||!!e&&\"string\"==typeof e.authority&&\"string\"==typeof e.fragment&&\"string\"==typeof e.path&&\"string\"==typeof e.query&&\"string\"==typeof e.scheme&&\"string\"==typeof e.fsPath&&\"function\"==typeof e.with&&\"function\"==typeof e.toString},Object.defineProperty(t.prototype,\"fsPath\",{get:function(){return A(this,!1)},enumerable:!1,configurable:!0}),t.prototype.with=function(t){if(!t)return this;var e=t.scheme,r=t.authority,n=t.path,o=t.query,i=t.fragment;return void 0===e?e=this.scheme:null===e&&(e=l),void 0===r?r=this.authority:null===r&&(r=l),void 0===n?n=this.path:null===n&&(n=l),void 0===o?o=this.query:null===o&&(o=l),void 0===i?i=this.fragment:null===i&&(i=l),e===this.scheme&&r===this.authority&&n===this.path&&o===this.query&&i===this.fragment?this:new y(e,r,n,o,i)},t.parse=function(t,e){void 0===e&&(e=!1);var r=g.exec(t);return r?new y(r[2]||l,O(r[4]||l),O(r[5]||l),O(r[7]||l),O(r[9]||l),e):new y(l,l,l,l,l)},t.file=function(t){var e=l;if(n&&(t=t.replace(/\\\\/g,p)),t[0]===p&&t[1]===p){var r=t.indexOf(p,2);-1===r?(e=t.substring(2),t=p):(e=t.substring(2,r),t=t.substring(r)||p)}return new y(\"file\",e,t,l,l)},t.from=function(t){var e=new y(t.scheme,t.authority,t.path,t.query,t.fragment);return u(e,!0),e},t.prototype.toString=function(t){return void 0===t&&(t=!1),w(this,t)},t.prototype.toJSON=function(){return this},t.revive=function(e){if(e){if(e instanceof t)return e;var r=new y(e);return r._formatted=e.external,r._fsPath=e._sep===v?e.fsPath:null,r}return e},t}(),v=n?1:void 0,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._formatted=null,e._fsPath=null,e}return h(e,t),Object.defineProperty(e.prototype,\"fsPath\",{get:function(){return this._fsPath||(this._fsPath=A(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(t){return void 0===t&&(t=!1),t?w(this,!0):(this._formatted||(this._formatted=w(this,!1)),this._formatted)},e.prototype.toJSON=function(){var t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=v),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t},e}(d),m=((a={})[58]=\"%3A\",a[47]=\"%2F\",a[63]=\"%3F\",a[35]=\"%23\",a[91]=\"%5B\",a[93]=\"%5D\",a[64]=\"%40\",a[33]=\"%21\",a[36]=\"%24\",a[38]=\"%26\",a[39]=\"%27\",a[40]=\"%28\",a[41]=\"%29\",a[42]=\"%2A\",a[43]=\"%2B\",a[44]=\"%2C\",a[59]=\"%3B\",a[61]=\"%3D\",a[32]=\"%20\",a);function b(t,e){for(var r=void 0,n=-1,o=0;o<t.length;o++){var i=t.charCodeAt(o);if(i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||45===i||46===i||95===i||126===i||e&&47===i)-1!==n&&(r+=encodeURIComponent(t.substring(n,o)),n=-1),void 0!==r&&(r+=t.charAt(o));else{void 0===r&&(r=t.substr(0,o));var a=m[i];void 0!==a?(-1!==n&&(r+=encodeURIComponent(t.substring(n,o)),n=-1),r+=a):-1===n&&(n=o)}}return-1!==n&&(r+=encodeURIComponent(t.substring(n))),void 0!==r?r:t}function C(t){for(var e=void 0,r=0;r<t.length;r++){var n=t.charCodeAt(r);35===n||63===n?(void 0===e&&(e=t.substr(0,r)),e+=m[n]):void 0!==e&&(e+=t[r])}return void 0!==e?e:t}function A(t,e){var r;return r=t.authority&&t.path.length>1&&\"file\"===t.scheme?\"//\".concat(t.authority).concat(t.path):47===t.path.charCodeAt(0)&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&58===t.path.charCodeAt(2)?e?t.path.substr(1):t.path[1].toLowerCase()+t.path.substr(2):t.path,n&&(r=r.replace(/\\//g,\"\\\\\")),r}function w(t,e){var r=e?C:b,n=\"\",o=t.scheme,i=t.authority,a=t.path,h=t.query,s=t.fragment;if(o&&(n+=o,n+=\":\"),(i||\"file\"===o)&&(n+=p,n+=p),i){var c=i.indexOf(\"@\");if(-1!==c){var f=i.substr(0,c);i=i.substr(c+1),-1===(c=f.indexOf(\":\"))?n+=r(f,!1):(n+=r(f.substr(0,c),!1),n+=\":\",n+=r(f.substr(c+1),!1)),n+=\"@\"}-1===(c=(i=i.toLowerCase()).indexOf(\":\"))?n+=r(i,!1):(n+=r(i.substr(0,c),!1),n+=i.substr(c))}if(a){if(a.length>=3&&47===a.charCodeAt(0)&&58===a.charCodeAt(2))(u=a.charCodeAt(1))>=65&&u<=90&&(a=\"/\".concat(String.fromCharCode(u+32),\":\").concat(a.substr(3)));else if(a.length>=2&&58===a.charCodeAt(1)){var u;(u=a.charCodeAt(0))>=65&&u<=90&&(a=\"\".concat(String.fromCharCode(u+32),\":\").concat(a.substr(2)))}n+=r(a,!0)}return h&&(n+=\"?\",n+=r(h,!1)),s&&(n+=\"#\",n+=e?s:b(s,!1)),n}function x(t){try{return decodeURIComponent(t)}catch(e){return t.length>3?t.substr(0,3)+x(t.substr(3)):t}}var _=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function O(t){return t.match(_)?t.replace(_,(function(t){return x(t)})):t}var P,j=r(470),U=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},I=j.posix||j;!function(t){t.joinPath=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return t.with({path:I.join.apply(I,U([t.path],e,!1))})},t.resolvePath=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=t.path||\"/\";return t.with({path:I.resolve.apply(I,U([n],e,!1))})},t.dirname=function(t){var e=I.dirname(t.path);return 1===e.length&&46===e.charCodeAt(0)?t:t.with({path:e})},t.basename=function(t){return I.basename(t.path)},t.extname=function(t){return I.extname(t.path)}}(P||(P={}))}},e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}return r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r(447)})();export const{URI,Utils}=LIB;\n//# sourceMappingURL=index.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { basename } from 'path';\nimport * as vscode from 'vscode';\nimport * as languageIds from './languageIds';\n\nexport const enum DiagnosticLanguage {\n\tJavaScript,\n\tTypeScript\n}\n\nexport const allDiagnosticLanguages = [DiagnosticLanguage.JavaScript, DiagnosticLanguage.TypeScript];\n\nexport interface LanguageDescription {\n\treadonly id: string;\n\treadonly diagnosticOwner: string;\n\treadonly diagnosticSource: string;\n\treadonly diagnosticLanguage: DiagnosticLanguage;\n\treadonly languageIds: readonly string[];\n\treadonly configFilePattern?: RegExp;\n\treadonly isExternal?: boolean;\n\treadonly standardFileExtensions: readonly string[];\n}\n\nexport const standardLanguageDescriptions: LanguageDescription[] = [\n\t{\n\t\tid: 'typescript',\n\t\tdiagnosticOwner: 'typescript',\n\t\tdiagnosticSource: 'ts',\n\t\tdiagnosticLanguage: DiagnosticLanguage.TypeScript,\n\t\tlanguageIds: [languageIds.typescript, languageIds.typescriptreact],\n\t\tconfigFilePattern: /^tsconfig(\\..*)?\\.json$/i,\n\t\tstandardFileExtensions: [\n\t\t\t'ts',\n\t\t\t'tsx',\n\t\t\t'cts',\n\t\t\t'mts'\n\t\t],\n\t}, {\n\t\tid: 'javascript',\n\t\tdiagnosticOwner: 'typescript',\n\t\tdiagnosticSource: 'ts',\n\t\tdiagnosticLanguage: DiagnosticLanguage.JavaScript,\n\t\tlanguageIds: [languageIds.javascript, languageIds.javascriptreact],\n\t\tconfigFilePattern: /^jsconfig(\\..*)?\\.json$/i,\n\t\tstandardFileExtensions: [\n\t\t\t'js',\n\t\t\t'jsx',\n\t\t\t'cjs',\n\t\t\t'mjs',\n\t\t\t'es6',\n\t\t\t'pac',\n\t\t],\n\t}\n];\n\nexport function isTsConfigFileName(fileName: string): boolean {\n\treturn /^tsconfig\\.(.+\\.)?json$/i.test(basename(fileName));\n}\n\nexport function isJsConfigOrTsConfigFileName(fileName: string): boolean {\n\treturn /^[jt]sconfig\\.(.+\\.)?json$/i.test(basename(fileName));\n}\n\nexport function doesResourceLookLikeATypeScriptFile(resource: vscode.Uri): boolean {\n\treturn /\\.(tsx?|mts|cts)$/i.test(resource.fsPath);\n}\n\nexport function doesResourceLookLikeAJavaScriptFile(resource: vscode.Uri): boolean {\n\treturn /\\.(jsx?|mjs|cjs)$/i.test(resource.fsPath);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport * as Proto from '../tsServer/protocol/protocol';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\n\n// as we don't do deltas, for performance reasons, don't compute semantic tokens for documents above that limit\nconst CONTENT_LENGTH_LIMIT = 100000;\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\tconst provider = new DocumentSemanticTokensProvider(client);\n\t\treturn vscode.languages.registerDocumentRangeSemanticTokensProvider(selector.semantic, provider, provider.getLegend());\n\t});\n}\n\nclass DocumentSemanticTokensProvider implements vscode.DocumentSemanticTokensProvider, vscode.DocumentRangeSemanticTokensProvider {\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic getLegend(): vscode.SemanticTokensLegend {\n\t\treturn new vscode.SemanticTokensLegend(tokenTypes, tokenModifiers);\n\t}\n\n\tpublic async provideDocumentSemanticTokens(document: vscode.TextDocument, token: vscode.CancellationToken): Promise<vscode.SemanticTokens | null> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file || document.getText().length > CONTENT_LENGTH_LIMIT) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.provideSemanticTokens(document, { file, start: 0, length: document.getText().length }, token);\n\t}\n\n\tpublic async provideDocumentRangeSemanticTokens(document: vscode.TextDocument, range: vscode.Range, token: vscode.CancellationToken): Promise<vscode.SemanticTokens | null> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file || (document.offsetAt(range.end) - document.offsetAt(range.start) > CONTENT_LENGTH_LIMIT)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst start = document.offsetAt(range.start);\n\t\tconst length = document.offsetAt(range.end) - start;\n\t\treturn this.provideSemanticTokens(document, { file, start, length }, token);\n\t}\n\n\tprivate async provideSemanticTokens(document: vscode.TextDocument, requestArg: Proto.EncodedSemanticClassificationsRequestArgs, token: vscode.CancellationToken): Promise<vscode.SemanticTokens | null> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst versionBeforeRequest = document.version;\n\n\t\tconst response = await this.client.execute('encodedSemanticClassifications-full', { ...requestArg, format: '2020' }, token, {\n\t\t\tcancelOnResourceChange: document.uri\n\t\t});\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst versionAfterRequest = document.version;\n\n\t\tif (versionBeforeRequest !== versionAfterRequest) {\n\t\t\t// cannot convert result's offsets to (line;col) values correctly\n\t\t\t// a new request will come in soon...\n\t\t\t//\n\t\t\t// here we cannot return null, because returning null would remove all semantic tokens.\n\t\t\t// we must throw to indicate that the semantic tokens should not be removed.\n\t\t\t// using the string busy here because it is not logged to error telemetry if the error text contains busy.\n\n\t\t\t// as the new request will come in right after our response, we first wait for the document activity to stop\n\t\t\tawait waitForDocumentChangesToEnd(document);\n\n\t\t\tthrow new vscode.CancellationError();\n\t\t}\n\n\t\tconst tokenSpan = response.body.spans;\n\n\t\tconst builder = new vscode.SemanticTokensBuilder();\n\t\tfor (let i = 0; i < tokenSpan.length;) {\n\t\t\tconst offset = tokenSpan[i++];\n\t\t\tconst length = tokenSpan[i++];\n\t\t\tconst tsClassification = tokenSpan[i++];\n\n\t\t\tconst tokenType = getTokenTypeFromClassification(tsClassification);\n\t\t\tif (tokenType === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst tokenModifiers = getTokenModifierFromClassification(tsClassification);\n\n\t\t\t// we can use the document's range conversion methods because the result is at the same version as the document\n\t\t\tconst startPos = document.positionAt(offset);\n\t\t\tconst endPos = document.positionAt(offset + length);\n\n\t\t\tfor (let line = startPos.line; line <= endPos.line; line++) {\n\t\t\t\tconst startCharacter = (line === startPos.line ? startPos.character : 0);\n\t\t\t\tconst endCharacter = (line === endPos.line ? endPos.character : document.lineAt(line).text.length);\n\t\t\t\tbuilder.push(line, startCharacter, endCharacter - startCharacter, tokenType, tokenModifiers);\n\t\t\t}\n\t\t}\n\n\t\treturn builder.build();\n\t}\n}\n\nfunction waitForDocumentChangesToEnd(document: vscode.TextDocument) {\n\tlet version = document.version;\n\treturn new Promise<void>((resolve) => {\n\t\tconst iv = setInterval(_ => {\n\t\t\tif (document.version === version) {\n\t\t\t\tclearInterval(iv);\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\tversion = document.version;\n\t\t}, 400);\n\t});\n}\n\n\n// typescript encodes type and modifiers in the classification:\n// TSClassification = (TokenType + 1) << 8 + TokenModifier\n\nconst enum TokenType {\n\tclass = 0,\n\tenum = 1,\n\tinterface = 2,\n\tnamespace = 3,\n\ttypeParameter = 4,\n\ttype = 5,\n\tparameter = 6,\n\tvariable = 7,\n\tenumMember = 8,\n\tproperty = 9,\n\tfunction = 10,\n\tmethod = 11,\n\t_ = 12\n}\n\nconst enum TokenModifier {\n\tdeclaration = 0,\n\tstatic = 1,\n\tasync = 2,\n\treadonly = 3,\n\tdefaultLibrary = 4,\n\tlocal = 5,\n\t_ = 6\n}\n\nconst enum TokenEncodingConsts {\n\ttypeOffset = 8,\n\tmodifierMask = 255\n}\n\nfunction getTokenTypeFromClassification(tsClassification: number): number | undefined {\n\tif (tsClassification > TokenEncodingConsts.modifierMask) {\n\t\treturn (tsClassification >> TokenEncodingConsts.typeOffset) - 1;\n\t}\n\treturn undefined;\n}\n\nfunction getTokenModifierFromClassification(tsClassification: number) {\n\treturn tsClassification & TokenEncodingConsts.modifierMask;\n}\n\nconst tokenTypes: string[] = [];\ntokenTypes[TokenType.class] = 'class';\ntokenTypes[TokenType.enum] = 'enum';\ntokenTypes[TokenType.interface] = 'interface';\ntokenTypes[TokenType.namespace] = 'namespace';\ntokenTypes[TokenType.typeParameter] = 'typeParameter';\ntokenTypes[TokenType.type] = 'type';\ntokenTypes[TokenType.parameter] = 'parameter';\ntokenTypes[TokenType.variable] = 'variable';\ntokenTypes[TokenType.enumMember] = 'enumMember';\ntokenTypes[TokenType.property] = 'property';\ntokenTypes[TokenType.function] = 'function';\ntokenTypes[TokenType.method] = 'method';\n\nconst tokenModifiers: string[] = [];\ntokenModifiers[TokenModifier.async] = 'async';\ntokenModifiers[TokenModifier.declaration] = 'declaration';\ntokenModifiers[TokenModifier.readonly] = 'readonly';\ntokenModifiers[TokenModifier.static] = 'static';\ntokenModifiers[TokenModifier.local] = 'local';\ntokenModifiers[TokenModifier.defaultLibrary] = 'defaultLibrary';\n","/*\n * 1DS JS SDK Core, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nvar _a;\r\n/**\r\n* Utils.ts\r\n* @author  Abhilash Panwar (abpanwar) Hector Hernandez (hectorh)\r\n* @copyright Microsoft 2018\r\n* File containing utility functions.\r\n*/\r\nimport { arrForEach, getGlobalInst, getNavigator, hasDocument, hasWindow, isArray, isBoolean, isNullOrUndefined, isNumber, isObject, isReactNative, isString, isUndefined, newGuid, objForEachKey, perfNow } from \"@microsoft/applicationinsights-core-js\";\r\nimport { ObjProto, strShimObject } from \"@microsoft/applicationinsights-shims\";\r\nimport { strIndexOf, strLeft } from \"@nevware21/ts-utils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { _DYN_INDEX_OF, _DYN_KIND, _DYN_LENGTH, _DYN_PROCESS_TELEMETRY_ST0, _DYN_TIMINGS, _DYN_VALUE } from \"./__DynamicConstants\";\r\nexport var Version = '4.3.4';\r\nexport var FullVersionString = \"1DS-Web-JS-\" + Version;\r\nvar ObjHasOwnProperty = ObjProto.hasOwnProperty;\r\n// Defining here so we don't need to take (import) the ApplicationInsights Common module\r\nvar strDisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nvar strWithCredentials = \"withCredentials\";\r\nvar strTimeout = \"timeout\";\r\n// If value is array just get the type for the first element\r\nvar _fieldTypeEventPropMap = (_a = {},\r\n    _a[0 /* FieldValueSanitizerType.NotSet */] = 0 /* eEventPropertyType.Unspecified */,\r\n    _a[2 /* FieldValueSanitizerType.Number */] = 6 /* eEventPropertyType.Double */,\r\n    _a[1 /* FieldValueSanitizerType.String */] = 1 /* eEventPropertyType.String */,\r\n    _a[3 /* FieldValueSanitizerType.Boolean */] = 7 /* eEventPropertyType.Bool */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 2 /* FieldValueSanitizerType.Number */] = 6 /* eEventPropertyType.Double */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 1 /* FieldValueSanitizerType.String */] = 1 /* eEventPropertyType.String */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 3 /* FieldValueSanitizerType.Boolean */] = 7 /* eEventPropertyType.Bool */,\r\n    _a);\r\n/**\r\n * @ignore\r\n */\r\n// let _uaDisallowsSameSiteNone = null;\r\nvar uInt8ArraySupported = null;\r\n// var _areCookiesAvailable: boolean | undefined;\r\n/**\r\n * Checks if document object is available\r\n */\r\nexport var isDocumentObjectAvailable = hasDocument();\r\n/**\r\n * Checks if window object is available\r\n */\r\nexport var isWindowObjectAvailable = hasWindow();\r\n/**\r\n * Checks if value is assigned to the given param.\r\n * @param value - The token from which the tenant id is to be extracted.\r\n * @returns True/false denoting if value is assigned to the param.\r\n */\r\nexport function isValueAssigned(value) {\r\n    /// <summary> takes a value and checks for undefined, null and empty string </summary>\r\n    /// <param type=\"any\"> value to be tested </param>\r\n    /// <returns> true if value is null undefined or emptyString </returns>\r\n    return !(value === STR_EMPTY || isNullOrUndefined(value));\r\n}\r\n/**\r\n * Gets the tenant id from the tenant token.\r\n * @param apiKey - The token from which the tenant id is to be extracted.\r\n * @returns The tenant id.\r\n */\r\nexport function getTenantId(apiKey) {\r\n    if (apiKey) {\r\n        var indexTenantId = strIndexOf(apiKey, \"-\");\r\n        if (indexTenantId > -1) {\r\n            return strLeft(apiKey, indexTenantId);\r\n        }\r\n    }\r\n    return STR_EMPTY;\r\n}\r\n/**\r\n * Checks if Uint8Array are available in the current environment. Safari and Firefox along with\r\n * ReactNative are known to not support Uint8Array properly.\r\n * @returns True if available, false otherwise.\r\n */\r\nexport function isUint8ArrayAvailable() {\r\n    if (uInt8ArraySupported === null) {\r\n        uInt8ArraySupported = !isUndefined(Uint8Array) && !isSafariOrFirefox() && !isReactNative();\r\n    }\r\n    return uInt8ArraySupported;\r\n}\r\n/**\r\n * Checks if the value is a valid EventLatency.\r\n * @param value - The value that needs to be checked.\r\n * @returns True if the value is in AWTEventLatency, false otherwise.\r\n */\r\nexport function isLatency(value) {\r\n    if (value && isNumber(value) && value >= 1 /* EventLatencyValue.Normal */ && value <= 4 /* EventLatencyValue.Immediate */) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Sanitizes the Property. It checks the that the property name and value are valid. It also\r\n * checks/populates the correct type and pii of the property value.\r\n * @param name - property name                          - The property name.\r\n * @param property - The property value or an IEventProperty containing value,\r\n * type ,pii and customer content.\r\n * @returns IEventProperty containing valid name, value, pii and type or null if invalid.\r\n */\r\nexport function sanitizeProperty(name, property, stringifyObjects) {\r\n    // Check that property is valid\r\n    if ((!property && !isValueAssigned(property)) || typeof name !== \"string\") {\r\n        return null;\r\n    }\r\n    // Perf optimization -- only need to get the type once not multiple times\r\n    var propType = typeof property;\r\n    // If the property isn't IEventProperty (and is either string, number, boolean or array), convert it into one.\r\n    if (propType === \"string\" || propType === \"number\" || propType === \"boolean\" || isArray(property)) {\r\n        property = { value: property };\r\n    }\r\n    else if (propType === \"object\" && !ObjHasOwnProperty.call(property, \"value\")) {\r\n        property = { value: stringifyObjects ? JSON.stringify(property) : property };\r\n    }\r\n    else if (isNullOrUndefined(property[_DYN_VALUE /* @min:%2evalue */])\r\n        || property[_DYN_VALUE /* @min:%2evalue */] === STR_EMPTY || (!isString(property[_DYN_VALUE /* @min:%2evalue */])\r\n        && !isNumber(property[_DYN_VALUE /* @min:%2evalue */]) && !isBoolean(property[_DYN_VALUE /* @min:%2evalue */])\r\n        && !isArray(property[_DYN_VALUE /* @min:%2evalue */]))) {\r\n        // Since property is IEventProperty, we need to validate its value\r\n        return null;\r\n    }\r\n    // We need to check that if the property value is an array, it is valid\r\n    if (isArray(property[_DYN_VALUE /* @min:%2evalue */]) &&\r\n        !isArrayValid(property[_DYN_VALUE /* @min:%2evalue */])) {\r\n        return null;\r\n    }\r\n    // If either pii or cc is set convert value to string (since only string pii/cc is allowed).\r\n    // If the value is a complex type like an array that can't be converted to string we will drop\r\n    // the property.\r\n    if (!isNullOrUndefined(property[_DYN_KIND /* @min:%2ekind */])) {\r\n        if (isArray(property[_DYN_VALUE /* @min:%2evalue */]) || !isValueKind(property[_DYN_KIND /* @min:%2ekind */])) {\r\n            return null;\r\n        }\r\n        property[_DYN_VALUE /* @min:%2evalue */] = property[_DYN_VALUE /* @min:%2evalue */].toString();\r\n    }\r\n    return property;\r\n}\r\nexport function getCommonSchemaMetaData(value, kind, type) {\r\n    var encodedTypeValue = -1;\r\n    if (!isUndefined(value)) {\r\n        if (kind > 0) {\r\n            if (kind === 32 /* eValueKind.CustomerContent_GenericContent */) {\r\n                // encode customer content. Value can only be string. bit 13-16 are for cc\r\n                encodedTypeValue = (1 << 13);\r\n            }\r\n            else if (kind <= 13) {\r\n                // encode PII. Value can only be string. bits 5-12 are for Pii\r\n                encodedTypeValue = (kind << 5);\r\n            }\r\n        }\r\n        // isDataType checks that the \"type\" is a number so we don't need to check for undefined\r\n        if (isDataType(type)) {\r\n            // Data Type is provided and valid, so use that\r\n            if (encodedTypeValue === -1) {\r\n                // Don't return -1\r\n                encodedTypeValue = 0;\r\n            }\r\n            encodedTypeValue |= type;\r\n        }\r\n        else {\r\n            var propType = _fieldTypeEventPropMap[getFieldValueType(value)] || -1;\r\n            if (encodedTypeValue !== -1 && propType !== -1) {\r\n                // pii exists so we must return correct type\r\n                encodedTypeValue |= propType;\r\n            }\r\n            else if (propType === 6 /* eEventPropertyType.Double */) {\r\n                encodedTypeValue = propType;\r\n            }\r\n        }\r\n    }\r\n    return encodedTypeValue;\r\n}\r\n/**\r\n * Helper to get and decode the cookie value using decodeURIComponent, this is for historical\r\n * backward compatibility where the document.cookie value was decoded before parsing.\r\n * @param cookieMgr - The cookie manager to use\r\n * @param name - The name of the cookie to get\r\n * @param decode - A flag to indicate whether the cookie value should be decoded\r\n * @returns The decoded cookie value (if available) otherwise an empty string.\r\n */\r\nexport function getCookieValue(cookieMgr, name, decode) {\r\n    if (decode === void 0) { decode = true; }\r\n    var cookieValue;\r\n    if (cookieMgr) {\r\n        cookieValue = cookieMgr.get(name);\r\n        if (decode && cookieValue && decodeURIComponent) {\r\n            cookieValue = decodeURIComponent(cookieValue);\r\n        }\r\n    }\r\n    return cookieValue || STR_EMPTY;\r\n}\r\n/**\r\n * Create a new guid.\r\n * @param style - The style of guid to generated, defaults to Digits\r\n * Digits (Default) : 32 digits separated by hyphens: 00000000-0000-0000-0000-000000000000\r\n * Braces - 32 digits separated by hyphens, enclosed in braces: {00000000-0000-0000-0000-000000000000}\r\n * Parentheses - 32 digits separated by hyphens, enclosed in parentheses: (00000000-0000-0000-0000-000000000000)\r\n * Numeric - 32 digits: 00000000000000000000000000000000\r\n * @returns The formatted guid.\r\n */\r\nexport function createGuid(style) {\r\n    if (style === void 0) { style = \"D\" /* GuidStyle.Digits */; }\r\n    var theGuid = newGuid();\r\n    if (style === \"B\" /* GuidStyle.Braces */) {\r\n        theGuid = \"{\" + theGuid + \"}\";\r\n    }\r\n    else if (style === \"P\" /* GuidStyle.Parentheses */) {\r\n        theGuid = \"(\" + theGuid + \")\";\r\n    }\r\n    else if (style === \"N\" /* GuidStyle.Numeric */) {\r\n        theGuid = theGuid.replace(/-/g, STR_EMPTY);\r\n    }\r\n    return theGuid;\r\n}\r\n/**\r\n * Pass in the objects to merge as arguments.\r\n * @param obj1 - object to merge.  Set this argument to 'true' for a deep extend.\r\n * @param obj2 - object to merge.\r\n * @param obj3 - object to merge.\r\n * @param obj4 - object to merge.\r\n * @param obj5 - object to merge.\r\n * @returns The extended object.\r\n */\r\nexport function extend(obj, obj2, obj3, obj4, obj5) {\r\n    // Variables\r\n    var extended = {};\r\n    var deep = false;\r\n    var i = 0;\r\n    var length = arguments[_DYN_LENGTH /* @min:%2elength */];\r\n    var theArgs = arguments;\r\n    // Check if a deep merge\r\n    if (isBoolean(theArgs[0])) {\r\n        deep = theArgs[0];\r\n        i++;\r\n    }\r\n    // Loop through each object and conduct a merge\r\n    for (; i < length; i++) {\r\n        var obj = theArgs[i];\r\n        objForEachKey(obj, function (prop, value) {\r\n            // If deep merge and property is an object, merge properties\r\n            if (deep && value && isObject(value)) {\r\n                if (isArray(value)) {\r\n                    extended[prop] = extended[prop] || [];\r\n                    arrForEach(value, function (arrayValue, arrayIndex) {\r\n                        if (arrayValue && isObject(arrayValue)) {\r\n                            extended[prop][arrayIndex] = extend(true, extended[prop][arrayIndex], arrayValue);\r\n                        }\r\n                        else {\r\n                            extended[prop][arrayIndex] = arrayValue;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    extended[prop] = extend(true, extended[prop], value);\r\n                }\r\n            }\r\n            else {\r\n                extended[prop] = value;\r\n            }\r\n        });\r\n    }\r\n    return extended;\r\n}\r\nexport var getTime = perfNow;\r\nexport function isValueKind(value) {\r\n    // Always assume that it's a number (no type checking) for performance as this is used during the JSON serialization\r\n    if (value === 0 /* eValueKind.NotSet */ || ((value > 0 /* eValueKind.NotSet */ && value <= 13 /* eValueKind.Pii_IPV4AddressLegacy */) || value === 32 /* eValueKind.CustomerContent_GenericContent */)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isDataType(value) {\r\n    // Remark: 0 returns false, but it doesn't affect encoding anyways\r\n    // Always assume that it's a number (no type checking) for performance as this is used during the JSON serialization\r\n    if (value >= 0 && value <= 9) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSafariOrFirefox() {\r\n    var nav = getNavigator();\r\n    // If non-browser navigator will be undefined\r\n    if (!isUndefined(nav) && nav.userAgent) {\r\n        var ua = nav.userAgent.toLowerCase();\r\n        if ((ua[_DYN_INDEX_OF /* @min:%2eindexOf */](\"safari\") >= 0 || ua[_DYN_INDEX_OF /* @min:%2eindexOf */](\"firefox\") >= 0) && ua[_DYN_INDEX_OF /* @min:%2eindexOf */](\"chrome\") < 0) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function isArrayValid(value) {\r\n    return value[_DYN_LENGTH /* @min:%2elength */] > 0;\r\n}\r\nexport function setProcessTelemetryTimings(event, identifier) {\r\n    var evt = event;\r\n    evt[_DYN_TIMINGS /* @min:%2etimings */] = evt[_DYN_TIMINGS /* @min:%2etimings */] || {};\r\n    evt[_DYN_TIMINGS /* @min:%2etimings */][_DYN_PROCESS_TELEMETRY_ST0 /* @min:%2eprocessTelemetryStart */] = evt[_DYN_TIMINGS /* @min:%2etimings */][_DYN_PROCESS_TELEMETRY_ST0 /* @min:%2eprocessTelemetryStart */] || {};\r\n    evt[_DYN_TIMINGS /* @min:%2etimings */][_DYN_PROCESS_TELEMETRY_ST0 /* @min:%2eprocessTelemetryStart */][identifier] = getTime();\r\n}\r\n/**\r\n * Returns a bitwise value for the FieldValueSanitizerType enum representing the decoded type of the passed value\r\n * @param value The value to determine the type\r\n */\r\nexport function getFieldValueType(value) {\r\n    var theType = 0 /* FieldValueSanitizerType.NotSet */;\r\n    if (value !== null && value !== undefined) {\r\n        var objType = typeof value;\r\n        if (objType === \"string\") {\r\n            theType = 1 /* FieldValueSanitizerType.String */;\r\n        }\r\n        else if (objType === \"number\") {\r\n            theType = 2 /* FieldValueSanitizerType.Number */;\r\n        }\r\n        else if (objType === \"boolean\") {\r\n            theType = 3 /* FieldValueSanitizerType.Boolean */;\r\n        }\r\n        else if (objType === strShimObject) {\r\n            theType = 4 /* FieldValueSanitizerType.Object */;\r\n            if (isArray(value)) {\r\n                theType = 4096 /* FieldValueSanitizerType.Array */;\r\n                if (value[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    // Empty arrays are not supported and are considered to be the same as null\r\n                    theType |= getFieldValueType(value[0]);\r\n                }\r\n            }\r\n            else if (ObjHasOwnProperty.call(value, \"value\")) {\r\n                // Looks like an IEventProperty\r\n                theType = 8192 /* FieldValueSanitizerType.EventProperty */ | getFieldValueType(value[_DYN_VALUE /* @min:%2evalue */]);\r\n            }\r\n        }\r\n    }\r\n    return theType;\r\n}\r\n/**\r\n * Helper to identify whether we are running in a chromium based browser environment\r\n */\r\nexport function isChromium() {\r\n    return !!getGlobalInst(\"chrome\");\r\n}\r\n/**\r\n * Create and open an XMLHttpRequest object\r\n * @param method - The request method\r\n * @param urlString - The url\r\n * @param withCredentials - Option flag indicating that credentials should be sent\r\n * @param disabled - Optional flag indicating that the XHR object should be marked as disabled and not tracked (default is false)\r\n * @param isSync - Optional flag indicating if the instance should be a synchronous request (defaults to false)\r\n * @param timeout - Optional value identifying the timeout value that should be assigned to the XHR request\r\n * @returns A new opened XHR request\r\n */\r\nexport function openXhr(method, urlString, withCredentials, disabled, isSync, timeout) {\r\n    if (disabled === void 0) { disabled = false; }\r\n    if (isSync === void 0) { isSync = false; }\r\n    function _wrapSetXhrProp(xhr, prop, value) {\r\n        try {\r\n            xhr[prop] = value;\r\n        }\r\n        catch (e) {\r\n            // - Wrapping as depending on the environment setting the property may fail (non-terminally)\r\n        }\r\n    }\r\n    var xhr = new XMLHttpRequest();\r\n    if (disabled) {\r\n        // Tag the instance so it's not tracked (trackDependency)\r\n        // If the environment has locked down the XMLHttpRequest (preventExtensions and/or freeze), this would\r\n        // cause the request to fail and we no telemetry would be sent\r\n        _wrapSetXhrProp(xhr, strDisabledPropertyName, disabled);\r\n    }\r\n    if (withCredentials) {\r\n        // Some libraries require that the withCredentials flag is set \"before\" open and\r\n        // - Wrapping as IE 10 has started throwing when setting before open\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    xhr.open(method, urlString, !isSync);\r\n    if (withCredentials) {\r\n        // withCredentials should be set AFTER open (https://xhr.spec.whatwg.org/#the-withcredentials-attribute)\r\n        // And older firefox instances from 11+ will throw for sync events (current versions don't) which happens during unload processing\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    // Only set the timeout for asynchronous requests as\r\n    // \"Timeout shouldn't be used for synchronous XMLHttpRequests requests used in a document environment or it will throw an InvalidAccessError exception.\"\"\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/timeout\r\n    if (!isSync && timeout) {\r\n        _wrapSetXhrProp(xhr, strTimeout, timeout);\r\n    }\r\n    return xhr;\r\n}\r\n/**\r\n * Check to see if the value is > 0\r\n * @param value - The value to check\r\n * @returns true if > 0 otherwise false\r\n */\r\nexport function isGreaterThanZero(value) {\r\n    return value > 0;\r\n}\r\n//# sourceMappingURL=Utils.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport VsCodeTelemetryReporter from '@vscode/extension-telemetry';\nimport * as vscode from 'vscode';\nimport * as tas from 'vscode-tas-client';\n\nexport interface IExperimentationTelemetryReporter extends tas.IExperimentationTelemetry, vscode.Disposable {\n\tpostEventObj(eventName: string, props: { [prop: string]: string }): void;\n}\n\n/**\n * This reporter *supports* experimentation telemetry,\n * but will only do so when passed to an {@link ExperimentationService}.\n */\n\nexport class ExperimentationTelemetryReporter implements IExperimentationTelemetryReporter {\n\n\tprivate _sharedProperties: Record<string, string> = {};\n\tprivate readonly _reporter: VsCodeTelemetryReporter;\n\n\tconstructor(reporter: VsCodeTelemetryReporter) {\n\t\tthis._reporter = reporter;\n\t}\n\n\tsetSharedProperty(name: string, value: string): void {\n\t\tthis._sharedProperties[name] = value;\n\t}\n\n\tpostEvent(eventName: string, props: Map<string, string>): void {\n\t\tconst propsObject = {\n\t\t\t...this._sharedProperties,\n\t\t\t...Object.fromEntries(props),\n\t\t};\n\t\tthis._reporter.sendTelemetryEvent(eventName, propsObject);\n\t}\n\n\tpostEventObj(eventName: string, props: { [prop: string]: string }) {\n\t\tthis._reporter.sendTelemetryEvent(eventName, {\n\t\t\t...this._sharedProperties,\n\t\t\t...props,\n\t\t});\n\t}\n\n\tdispose() {\n\t\tthis._reporter.dispose();\n\t}\n}\n\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { createEnumStyle } from \"./EnumHelperFuncs\";\r\nexport var ActiveStatus = createEnumStyle({\r\n    NONE: 0 /* eActiveStatus.NONE */,\r\n    PENDING: 3 /* eActiveStatus.PENDING */,\r\n    INACTIVE: 1 /* eActiveStatus.INACTIVE */,\r\n    ACTIVE: 2 /* eActiveStatus.ACTIVE */\r\n});\r\n//# sourceMappingURL=InitActiveStatusEnum.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IExperimentationTelemetryReporter } from '../experimentTelemetryReporter';\n\nexport interface TelemetryProperties {\n\treadonly [prop: string]: string | number | boolean | undefined;\n}\n\nexport interface TelemetryReporter {\n\tlogTelemetry(eventName: string, properties?: TelemetryProperties): void;\n\tlogTraceEvent(tracePoint: string, correlationId: string, command?: string): void;\n}\n\nexport class VSCodeTelemetryReporter implements TelemetryReporter {\n\tconstructor(\n\t\tprivate readonly reporter: IExperimentationTelemetryReporter | undefined,\n\t\tprivate readonly clientVersionDelegate: () => string\n\t) { }\n\n\tpublic logTelemetry(eventName: string, properties: { [prop: string]: string } = {}) {\n\t\tconst reporter = this.reporter;\n\t\tif (!reporter) {\n\t\t\treturn;\n\t\t}\n\n\t\t/* __GDPR__FRAGMENT__\n\t\t\t\"TypeScriptCommonProperties\" : {\n\t\t\t\t\"version\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t}\n\t\t*/\n\t\tproperties['version'] = this.clientVersionDelegate();\n\n\t\treporter.postEventObj(eventName, properties);\n\t}\n\n\tpublic logTraceEvent(point: string, traceId: string, data?: string): void {\n\t\tconst event: { point: string; traceId: string; data?: string | undefined } = {\n\t\t\tpoint,\n\t\t\ttraceId\n\t\t};\n\t\tif (data) {\n\t\t\tevent.data = data;\n\t\t}\n\n\t\t/* __GDPR__\n\t\t\t\"typeScriptExtension.trace\" : {\n\t\t\t\t\"owner\": \"dirkb\",\n\t\t\t\t\"${include}\": [\n\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t],\n\t\t\t\t\"point\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"comment\": \"The trace point.\" },\n\t\t\t\t\"traceId\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"comment\": \"The traceId is used to correlate the request with other trace points.\" },\n\t\t\t\t\"data\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"comment\": \"Additional data\" }\n\t\t\t}\n\t\t*/\n\t\tthis.logTelemetry('typeScriptExtension.trace', event);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { SelectTypeScriptVersionCommand } from '../commands/selectTypeScriptVersion';\nimport { jsTsLanguageModes } from '../configuration/languageIds';\nimport { TypeScriptVersion } from '../tsServer/versionProvider';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { Disposable } from '../utils/dispose';\n\n\nexport class VersionStatus extends Disposable {\n\n\tprivate readonly _statusItem: vscode.LanguageStatusItem;\n\n\tconstructor(\n\t\tprivate readonly _client: ITypeScriptServiceClient,\n\t) {\n\t\tsuper();\n\n\t\tthis._statusItem = this._register(vscode.languages.createLanguageStatusItem('typescript.version', jsTsLanguageModes));\n\n\t\tthis._statusItem.name = vscode.l10n.t(\"TypeScript Version\");\n\t\tthis._statusItem.detail = vscode.l10n.t(\"TypeScript version\");\n\n\t\tthis._register(this._client.onTsServerStarted(({ version }) => this.onDidChangeTypeScriptVersion(version)));\n\t}\n\n\tprivate onDidChangeTypeScriptVersion(version: TypeScriptVersion) {\n\t\tthis._statusItem.text = version.displayName;\n\t\tthis._statusItem.command = {\n\t\t\tcommand: SelectTypeScriptVersionCommand.id,\n\t\t\ttitle: vscode.l10n.t(\"Select Version\"),\n\t\t\ttooltip: version.path\n\t\t};\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as Proto from '../tsServer/protocol/protocol';\nimport * as objects from '../utils/objects';\n\nexport enum TsServerLogLevel {\n\tOff,\n\tNormal,\n\tTerse,\n\tVerbose,\n\tRequestTime\n}\n\nexport namespace TsServerLogLevel {\n\texport function fromString(value: string): TsServerLogLevel {\n\t\tswitch (value?.toLowerCase()) {\n\t\t\tcase 'normal':\n\t\t\t\treturn TsServerLogLevel.Normal;\n\t\t\tcase 'terse':\n\t\t\t\treturn TsServerLogLevel.Terse;\n\t\t\tcase 'verbose':\n\t\t\t\treturn TsServerLogLevel.Verbose;\n\t\t\tcase 'requestTime':\n\t\t\t\treturn TsServerLogLevel.RequestTime;\n\t\t\tcase 'off':\n\t\t\tdefault:\n\t\t\t\treturn TsServerLogLevel.Off;\n\t\t}\n\t}\n\n\texport function toString(value: TsServerLogLevel): string {\n\t\tswitch (value) {\n\t\t\tcase TsServerLogLevel.Normal:\n\t\t\t\treturn 'normal';\n\t\t\tcase TsServerLogLevel.Terse:\n\t\t\t\treturn 'terse';\n\t\t\tcase TsServerLogLevel.Verbose:\n\t\t\t\treturn 'verbose';\n\t\t\tcase TsServerLogLevel.RequestTime:\n\t\t\t\treturn 'requestTime';\n\t\t\tcase TsServerLogLevel.Off:\n\t\t\tdefault:\n\t\t\t\treturn 'off';\n\t\t}\n\t}\n}\n\nexport const enum SyntaxServerConfiguration {\n\tNever,\n\tAlways,\n\t/** Use a single syntax server for every request, even on desktop */\n\tAuto,\n}\n\nexport class ImplicitProjectConfiguration {\n\n\tpublic readonly target: string | undefined;\n\tpublic readonly module: string | undefined;\n\tpublic readonly checkJs: boolean;\n\tpublic readonly experimentalDecorators: boolean;\n\tpublic readonly strictNullChecks: boolean;\n\tpublic readonly strictFunctionTypes: boolean;\n\tpublic readonly strict: boolean;\n\n\tconstructor(configuration: vscode.WorkspaceConfiguration) {\n\t\tthis.target = ImplicitProjectConfiguration.readTarget(configuration);\n\t\tthis.module = ImplicitProjectConfiguration.readModule(configuration);\n\t\tthis.checkJs = ImplicitProjectConfiguration.readCheckJs(configuration);\n\t\tthis.experimentalDecorators = ImplicitProjectConfiguration.readExperimentalDecorators(configuration);\n\t\tthis.strictNullChecks = ImplicitProjectConfiguration.readImplicitStrictNullChecks(configuration);\n\t\tthis.strictFunctionTypes = ImplicitProjectConfiguration.readImplicitStrictFunctionTypes(configuration);\n\t\tthis.strict = ImplicitProjectConfiguration.readImplicitStrict(configuration);\n\t}\n\n\tpublic isEqualTo(other: ImplicitProjectConfiguration): boolean {\n\t\treturn objects.equals(this, other);\n\t}\n\n\tprivate static readTarget(configuration: vscode.WorkspaceConfiguration): string | undefined {\n\t\treturn configuration.get<string>('js/ts.implicitProjectConfig.target');\n\t}\n\n\tprivate static readModule(configuration: vscode.WorkspaceConfiguration): string | undefined {\n\t\treturn configuration.get<string>('js/ts.implicitProjectConfig.module');\n\t}\n\n\tprivate static readCheckJs(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.checkJs', false);\n\t}\n\n\tprivate static readExperimentalDecorators(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.experimentalDecorators', false);\n\t}\n\n\tprivate static readImplicitStrictNullChecks(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.strictNullChecks', true);\n\t}\n\n\tprivate static readImplicitStrictFunctionTypes(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.strictFunctionTypes', true);\n\t}\n\n\tprivate static readImplicitStrict(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.strict', true);\n\t}\n}\n\nexport interface TypeScriptServiceConfiguration {\n\treadonly locale: string | null;\n\treadonly globalTsdk: string | null;\n\treadonly localTsdk: string | null;\n\treadonly npmLocation: string | null;\n\treadonly tsServerLogLevel: TsServerLogLevel;\n\treadonly tsServerPluginPaths: readonly string[];\n\treadonly implicitProjectConfiguration: ImplicitProjectConfiguration;\n\treadonly disableAutomaticTypeAcquisition: boolean;\n\treadonly useSyntaxServer: SyntaxServerConfiguration;\n\treadonly webProjectWideIntellisenseEnabled: boolean;\n\treadonly webProjectWideIntellisenseSuppressSemanticErrors: boolean;\n\treadonly webTypeAcquisitionEnabled: boolean;\n\treadonly enableDiagnosticsTelemetry: boolean;\n\treadonly enableProjectDiagnostics: boolean;\n\treadonly maxTsServerMemory: number;\n\treadonly enablePromptUseWorkspaceTsdk: boolean;\n\treadonly useVsCodeWatcher: boolean;\n\treadonly watchOptions: Proto.WatchOptions | undefined;\n\treadonly includePackageJsonAutoImports: 'auto' | 'on' | 'off' | undefined;\n\treadonly enableTsServerTracing: boolean;\n\treadonly localNodePath: string | null;\n\treadonly globalNodePath: string | null;\n\treadonly workspaceSymbolsExcludeLibrarySymbols: boolean;\n\treadonly enableRegionDiagnostics: boolean;\n}\n\nexport function areServiceConfigurationsEqual(a: TypeScriptServiceConfiguration, b: TypeScriptServiceConfiguration): boolean {\n\treturn objects.equals(a, b);\n}\n\nexport interface ServiceConfigurationProvider {\n\tloadFromWorkspace(): TypeScriptServiceConfiguration;\n}\n\nconst vscodeWatcherName = 'vscode';\ntype vscodeWatcherName = typeof vscodeWatcherName;\n\n\nexport abstract class BaseServiceConfigurationProvider implements ServiceConfigurationProvider {\n\n\tpublic loadFromWorkspace(): TypeScriptServiceConfiguration {\n\t\tconst configuration = vscode.workspace.getConfiguration();\n\t\treturn {\n\t\t\tlocale: this.readLocale(configuration),\n\t\t\tglobalTsdk: this.readGlobalTsdk(configuration),\n\t\t\tlocalTsdk: this.readLocalTsdk(configuration),\n\t\t\tnpmLocation: this.readNpmLocation(configuration),\n\t\t\ttsServerLogLevel: this.readTsServerLogLevel(configuration),\n\t\t\ttsServerPluginPaths: this.readTsServerPluginPaths(configuration),\n\t\t\timplicitProjectConfiguration: new ImplicitProjectConfiguration(configuration),\n\t\t\tdisableAutomaticTypeAcquisition: this.readDisableAutomaticTypeAcquisition(configuration),\n\t\t\tuseSyntaxServer: this.readUseSyntaxServer(configuration),\n\t\t\twebProjectWideIntellisenseEnabled: this.readWebProjectWideIntellisenseEnable(configuration),\n\t\t\twebProjectWideIntellisenseSuppressSemanticErrors: this.readWebProjectWideIntellisenseSuppressSemanticErrors(configuration),\n\t\t\twebTypeAcquisitionEnabled: this.readWebTypeAcquisition(configuration),\n\t\t\tenableDiagnosticsTelemetry: this.readEnableDiagnosticsTelemetry(configuration),\n\t\t\tenableProjectDiagnostics: this.readEnableProjectDiagnostics(configuration),\n\t\t\tmaxTsServerMemory: this.readMaxTsServerMemory(configuration),\n\t\t\tenablePromptUseWorkspaceTsdk: this.readEnablePromptUseWorkspaceTsdk(configuration),\n\t\t\tuseVsCodeWatcher: this.readUseVsCodeWatcher(configuration),\n\t\t\twatchOptions: this.readWatchOptions(configuration),\n\t\t\tincludePackageJsonAutoImports: this.readIncludePackageJsonAutoImports(configuration),\n\t\t\tenableTsServerTracing: this.readEnableTsServerTracing(configuration),\n\t\t\tlocalNodePath: this.readLocalNodePath(configuration),\n\t\t\tglobalNodePath: this.readGlobalNodePath(configuration),\n\t\t\tworkspaceSymbolsExcludeLibrarySymbols: this.readWorkspaceSymbolsExcludeLibrarySymbols(configuration),\n\t\t\tenableRegionDiagnostics: this.readEnableRegionDiagnostics(configuration),\n\t\t};\n\t}\n\n\tprotected abstract readGlobalTsdk(configuration: vscode.WorkspaceConfiguration): string | null;\n\tprotected abstract readLocalTsdk(configuration: vscode.WorkspaceConfiguration): string | null;\n\tprotected abstract readLocalNodePath(configuration: vscode.WorkspaceConfiguration): string | null;\n\tprotected abstract readGlobalNodePath(configuration: vscode.WorkspaceConfiguration): string | null;\n\n\tprotected readTsServerLogLevel(configuration: vscode.WorkspaceConfiguration): TsServerLogLevel {\n\t\tconst setting = configuration.get<string>('typescript.tsserver.log', 'off');\n\t\treturn TsServerLogLevel.fromString(setting);\n\t}\n\n\tprotected readTsServerPluginPaths(configuration: vscode.WorkspaceConfiguration): string[] {\n\t\treturn configuration.get<string[]>('typescript.tsserver.pluginPaths', []);\n\t}\n\n\tprotected readNpmLocation(configuration: vscode.WorkspaceConfiguration): string | null {\n\t\treturn configuration.get<string | null>('typescript.npm', null);\n\t}\n\n\tprotected readDisableAutomaticTypeAcquisition(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.disableAutomaticTypeAcquisition', false);\n\t}\n\n\tprotected readLocale(configuration: vscode.WorkspaceConfiguration): string | null {\n\t\tconst value = configuration.get<string>('typescript.locale', 'auto');\n\t\treturn !value || value === 'auto' ? null : value;\n\t}\n\n\tprotected readUseSyntaxServer(configuration: vscode.WorkspaceConfiguration): SyntaxServerConfiguration {\n\t\tconst value = configuration.get<string>('typescript.tsserver.useSyntaxServer');\n\t\tswitch (value) {\n\t\t\tcase 'never': return SyntaxServerConfiguration.Never;\n\t\t\tcase 'always': return SyntaxServerConfiguration.Always;\n\t\t\tcase 'auto': return SyntaxServerConfiguration.Auto;\n\t\t}\n\n\t\t// Fallback to deprecated setting\n\t\tconst deprecatedValue = configuration.get<boolean | string>('typescript.tsserver.useSeparateSyntaxServer', true);\n\t\tif (deprecatedValue === 'forAllRequests') { // Undocumented setting\n\t\t\treturn SyntaxServerConfiguration.Always;\n\t\t}\n\t\tif (deprecatedValue === true) {\n\t\t\treturn SyntaxServerConfiguration.Auto;\n\t\t}\n\t\treturn SyntaxServerConfiguration.Never;\n\t}\n\n\tprotected readEnableDiagnosticsTelemetry(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\t// This setting does not appear in the settings view, as it is not to be enabled by users outside the team\n\t\treturn configuration.get<boolean>('typescript.enableDiagnosticsTelemetry', false);\n\t}\n\n\tprotected readEnableProjectDiagnostics(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.tsserver.experimental.enableProjectDiagnostics', false);\n\t}\n\n\tprivate readUseVsCodeWatcher(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\tconst watcherExcludes = configuration.get<Record<string, boolean>>('files.watcherExclude') ?? {};\n\t\tif (\n\t\t\twatcherExcludes['**/node_modules/*/**'] === true || // VS Code default prior to 1.94.x\n\t\t\twatcherExcludes['**/node_modules/**'] === true ||\n\t\t\twatcherExcludes['**/node_modules'] === true ||\n\t\t\twatcherExcludes['**'] === true\t \t\t\t\t\t// VS Code Watching is entirely disabled\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst experimentalConfig = configuration.inspect('typescript.tsserver.experimental.useVsCodeWatcher');\n\t\tif (typeof experimentalConfig?.globalValue === 'boolean') {\n\t\t\treturn experimentalConfig.globalValue;\n\t\t}\n\t\tif (typeof experimentalConfig?.workspaceValue === 'boolean') {\n\t\t\treturn experimentalConfig.workspaceValue;\n\t\t}\n\t\tif (typeof experimentalConfig?.workspaceFolderValue === 'boolean') {\n\t\t\treturn experimentalConfig.workspaceFolderValue;\n\t\t}\n\n\t\treturn configuration.get<Proto.WatchOptions | vscodeWatcherName>('typescript.tsserver.watchOptions', vscodeWatcherName) === vscodeWatcherName;\n\t}\n\n\tprivate readWatchOptions(configuration: vscode.WorkspaceConfiguration): Proto.WatchOptions | undefined {\n\t\tconst watchOptions = configuration.get<Proto.WatchOptions | vscodeWatcherName>('typescript.tsserver.watchOptions');\n\t\tif (watchOptions === vscodeWatcherName) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Returned value may be a proxy. Clone it into a normal object\n\t\treturn { ...(watchOptions ?? {}) };\n\t}\n\n\tprotected readIncludePackageJsonAutoImports(configuration: vscode.WorkspaceConfiguration): 'auto' | 'on' | 'off' | undefined {\n\t\treturn configuration.get<'auto' | 'on' | 'off'>('typescript.preferences.includePackageJsonAutoImports');\n\t}\n\n\tprotected readMaxTsServerMemory(configuration: vscode.WorkspaceConfiguration): number {\n\t\tconst defaultMaxMemory = 3072;\n\t\tconst minimumMaxMemory = 128;\n\t\tconst memoryInMB = configuration.get<number>('typescript.tsserver.maxTsServerMemory', defaultMaxMemory);\n\t\tif (!Number.isSafeInteger(memoryInMB)) {\n\t\t\treturn defaultMaxMemory;\n\t\t}\n\t\treturn Math.max(memoryInMB, minimumMaxMemory);\n\t}\n\n\tprotected readEnablePromptUseWorkspaceTsdk(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.enablePromptUseWorkspaceTsdk', false);\n\t}\n\n\tprotected readEnableTsServerTracing(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.tsserver.enableTracing', false);\n\t}\n\n\tprivate readWorkspaceSymbolsExcludeLibrarySymbols(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.workspaceSymbols.excludeLibrarySymbols', true);\n\t}\n\n\tprivate readWebProjectWideIntellisenseEnable(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.tsserver.web.projectWideIntellisense.enabled', true);\n\t}\n\n\tprivate readWebProjectWideIntellisenseSuppressSemanticErrors(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn this.readWebTypeAcquisition(configuration) && configuration.get<boolean>('typescript.tsserver.web.projectWideIntellisense.suppressSemanticErrors', false);\n\t}\n\n\tprivate readWebTypeAcquisition(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.tsserver.web.typeAcquisition.enabled', true);\n\t}\n\n\tprivate readEnableRegionDiagnostics(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.tsserver.enableRegionDiagnostics', true);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function escapeRegExp(text: string) {\n\treturn text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport Tracer from '../logging/tracer';\n\nexport interface OngoingRequestCanceller {\n\treadonly cancellationPipeName: string | undefined;\n\ttryCancelOngoingRequest(seq: number): boolean;\n}\n\nexport interface OngoingRequestCancellerFactory {\n\tcreate(serverId: string, tracer: Tracer): OngoingRequestCanceller;\n}\n\nconst noopRequestCanceller = new class implements OngoingRequestCanceller {\n\tpublic readonly cancellationPipeName = undefined;\n\n\tpublic tryCancelOngoingRequest(_seq: number): boolean {\n\t\treturn false;\n\t}\n};\n\nexport const noopRequestCancellerFactory = new class implements OngoingRequestCancellerFactory {\n\tcreate(_serverId: string, _tracer: Tracer): OngoingRequestCanceller {\n\t\treturn noopRequestCanceller;\n\t}\n};\n","const Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nvar _a, _b;\r\nimport { arrForEach, arrIndexOf, dumpObj, getDocument, getLazy, getNavigator, isArray, isFunction, isNullOrUndefined, isString, isTruthy, isUndefined, objForEachKey, strEndsWith, strIndexOf, strLeft, strSubstring, strTrim, utcNow } from \"@nevware21/ts-utils\";\r\nimport { cfgDfMerge } from \"../Config/ConfigDefaultHelpers\";\r\nimport { createDynamicConfig, onConfigChange } from \"../Config/DynamicConfig\";\r\nimport { _DYN_ENABLED, _DYN_LENGTH, _DYN_LOGGER, _DYN_PROTOCOL, _DYN_SET_DF, _DYN_SPLIT, _DYN_UNLOAD, _DYN_USER_AGENT } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { getLocation, isIE } from \"./EnvUtils\";\r\nimport { getExceptionName, isNotNullOrUndefined, setValue, strContains } from \"./HelperFuncs\";\r\nimport { STR_DOMAIN, STR_EMPTY, STR_PATH, UNDEFINED_VALUE } from \"./InternalConstants\";\r\nvar strToGMTString = \"toGMTString\";\r\nvar strToUTCString = \"toUTCString\";\r\nvar strCookie = \"cookie\";\r\nvar strExpires = \"expires\";\r\nvar strIsCookieUseDisabled = \"isCookieUseDisabled\";\r\nvar strDisableCookiesUsage = \"disableCookiesUsage\";\r\nvar strConfigCookieMgr = \"_ckMgr\";\r\nvar _supportsCookies = null;\r\nvar _allowUaSameSite = null;\r\nvar _parsedCookieValue = null;\r\nvar _doc;\r\nvar _cookieCache = {};\r\nvar _globalCookieConfig = {};\r\n// // `isCookieUseDisabled` is deprecated, so explicitly casting as a key of IConfiguration to avoid typing error\r\n// // when both isCookieUseDisabled and disableCookiesUsage are used disableCookiesUsage will take precedent, which is\r\n// // why its listed first\r\n/**\r\n * Set the supported dynamic config values as undefined (or an empty object) so that\r\n * any listeners will be informed of any changes.\r\n * Explicitly NOT including the deprecated `isCookieUseDisabled` as we don't want to support\r\n * the v1 deprecated field as dynamic for updates\r\n */\r\nvar rootDefaultConfig = (_a = {\r\n        cookieCfg: cfgDfMerge((_b = {},\r\n            _b[STR_DOMAIN] = { fb: \"cookieDomain\", dfVal: isNotNullOrUndefined },\r\n            _b.path = { fb: \"cookiePath\", dfVal: isNotNullOrUndefined },\r\n            _b.enabled = UNDEFINED_VALUE,\r\n            _b.ignoreCookies = UNDEFINED_VALUE,\r\n            _b.blockedCookies = UNDEFINED_VALUE,\r\n            _b)),\r\n        cookieDomain: UNDEFINED_VALUE,\r\n        cookiePath: UNDEFINED_VALUE\r\n    },\r\n    _a[strDisableCookiesUsage] = UNDEFINED_VALUE,\r\n    _a);\r\nfunction _getDoc() {\r\n    !_doc && (_doc = getLazy(function () { return getDocument(); }));\r\n}\r\n/**\r\n * @ignore\r\n * DO NOT USE or export from the module, this is exposed as public to support backward compatibility of previous static utility methods only.\r\n * If you want to manager cookies either use the ICookieMgr available from the core instance via getCookieMgr() or create\r\n * your own instance of the CookieMgr and use that.\r\n * Using this directly for enabling / disabling cookie handling will not only affect your usage but EVERY user of cookies.\r\n * Example, if you are using a shared component that is also using Application Insights you will affect their cookie handling.\r\n * @param logger - The DiagnosticLogger to use for reporting errors.\r\n */\r\nfunction _gblCookieMgr(config, logger) {\r\n    // Stash the global instance against the BaseCookieMgr class\r\n    var inst = createCookieMgr[strConfigCookieMgr] || _globalCookieConfig[strConfigCookieMgr];\r\n    if (!inst) {\r\n        // Note: not using the getSetValue() helper as that would require always creating a temporary cookieMgr\r\n        // that ultimately is never used\r\n        inst = createCookieMgr[strConfigCookieMgr] = createCookieMgr(config, logger);\r\n        _globalCookieConfig[strConfigCookieMgr] = inst;\r\n    }\r\n    return inst;\r\n}\r\nfunction _isMgrEnabled(cookieMgr) {\r\n    if (cookieMgr) {\r\n        return cookieMgr.isEnabled();\r\n    }\r\n    return true;\r\n}\r\nfunction _isIgnoredCookie(cookieMgrCfg, name) {\r\n    if (name && cookieMgrCfg && isArray(cookieMgrCfg.ignoreCookies)) {\r\n        return arrIndexOf(cookieMgrCfg.ignoreCookies, name) !== -1;\r\n    }\r\n    return false;\r\n}\r\nfunction _isBlockedCookie(cookieMgrCfg, name) {\r\n    if (name && cookieMgrCfg && isArray(cookieMgrCfg.blockedCookies)) {\r\n        if (arrIndexOf(cookieMgrCfg.blockedCookies, name) !== -1) {\r\n            return true;\r\n        }\r\n    }\r\n    return _isIgnoredCookie(cookieMgrCfg, name);\r\n}\r\nfunction _isCfgEnabled(rootConfig, cookieMgrConfig) {\r\n    var isCfgEnabled = cookieMgrConfig[_DYN_ENABLED /* @min:%2eenabled */];\r\n    if (isNullOrUndefined(isCfgEnabled)) {\r\n        // Set the enabled from the provided setting or the legacy root values\r\n        var cookieEnabled = void 0;\r\n        // This field is deprecated and dynamic updates will not be fully supported\r\n        if (!isUndefined(rootConfig[strIsCookieUseDisabled])) {\r\n            cookieEnabled = !rootConfig[strIsCookieUseDisabled];\r\n        }\r\n        // If this value is defined it takes precedent over the above\r\n        if (!isUndefined(rootConfig[strDisableCookiesUsage])) {\r\n            cookieEnabled = !rootConfig[strDisableCookiesUsage];\r\n        }\r\n        // Not setting the cookieMgrConfig.enabled as that will update (set) the global dynamic config\r\n        // So future \"updates\" then may not be as expected\r\n        isCfgEnabled = cookieEnabled;\r\n    }\r\n    return isCfgEnabled;\r\n}\r\n/**\r\n * Helper to return the ICookieMgr from the core (if not null/undefined) or a default implementation\r\n * associated with the configuration or a legacy default.\r\n * @param core\r\n * @param config\r\n * @returns\r\n */\r\nexport function safeGetCookieMgr(core, config) {\r\n    var cookieMgr;\r\n    if (core) {\r\n        // Always returns an instance\r\n        cookieMgr = core.getCookieMgr();\r\n    }\r\n    else if (config) {\r\n        var cookieCfg = config.cookieCfg;\r\n        if (cookieCfg && cookieCfg[strConfigCookieMgr]) {\r\n            cookieMgr = cookieCfg[strConfigCookieMgr];\r\n        }\r\n        else {\r\n            cookieMgr = createCookieMgr(config);\r\n        }\r\n    }\r\n    if (!cookieMgr) {\r\n        // Get or initialize the default global (legacy) cookie manager if we couldn't find one\r\n        cookieMgr = _gblCookieMgr(config, (core || {})[_DYN_LOGGER /* @min:%2elogger */]);\r\n    }\r\n    return cookieMgr;\r\n}\r\nexport function createCookieMgr(rootConfig, logger) {\r\n    var _a;\r\n    var cookieMgrConfig;\r\n    var _path;\r\n    var _domain;\r\n    var unloadHandler;\r\n    // Explicitly checking against false, so that setting to undefined will === true\r\n    var _enabled;\r\n    var _getCookieFn;\r\n    var _setCookieFn;\r\n    var _delCookieFn;\r\n    // Make sure the root config is dynamic as it may be the global config\r\n    rootConfig = createDynamicConfig(rootConfig || _globalCookieConfig, null, logger).cfg;\r\n    // Will get recalled if the referenced configuration is changed\r\n    unloadHandler = onConfigChange(rootConfig, function (details) {\r\n        // Make sure the root config has all of the the defaults to the root config to ensure they are dynamic\r\n        details[_DYN_SET_DF /* @min:%2esetDf */](details.cfg, rootDefaultConfig);\r\n        // Create and apply the defaults to the cookieCfg element\r\n        cookieMgrConfig = details.ref(details.cfg, \"cookieCfg\"); // details.setDf(details.cfg.cookieCfg, defaultConfig);\r\n        _path = cookieMgrConfig[STR_PATH /* @min:%2epath */] || \"/\";\r\n        _domain = cookieMgrConfig[STR_DOMAIN /* @min:%2edomain */];\r\n        // Explicitly checking against false, so that setting to undefined will === true\r\n        _enabled = _isCfgEnabled(rootConfig, cookieMgrConfig) !== false;\r\n        _getCookieFn = cookieMgrConfig.getCookie || _getCookieValue;\r\n        _setCookieFn = cookieMgrConfig.setCookie || _setCookieValue;\r\n        _delCookieFn = cookieMgrConfig.delCookie || _setCookieValue;\r\n    }, logger);\r\n    var cookieMgr = (_a = {\r\n            isEnabled: function () {\r\n                var enabled = _isCfgEnabled(rootConfig, cookieMgrConfig) !== false && _enabled && areCookiesSupported(logger);\r\n                // Using an indirect lookup for any global cookie manager to support tree shaking for SDK's\r\n                // that don't use the \"applicationinsights-core\" version of the default cookie function\r\n                var gblManager = _globalCookieConfig[strConfigCookieMgr];\r\n                if (enabled && gblManager && cookieMgr !== gblManager) {\r\n                    // Make sure the GlobalCookie Manager instance (if not this instance) is also enabled.\r\n                    // As the global (deprecated) functions may have been called (for backward compatibility)\r\n                    enabled = _isMgrEnabled(gblManager);\r\n                }\r\n                return enabled;\r\n            },\r\n            setEnabled: function (value) {\r\n                // Explicitly checking against false, so that setting to undefined will === true\r\n                _enabled = value !== false;\r\n                cookieMgrConfig[_DYN_ENABLED /* @min:%2eenabled */] = value;\r\n            },\r\n            set: function (name, value, maxAgeSec, domain, path) {\r\n                var result = false;\r\n                if (_isMgrEnabled(cookieMgr) && !_isBlockedCookie(cookieMgrConfig, name)) {\r\n                    var values = {};\r\n                    var theValue = strTrim(value || STR_EMPTY);\r\n                    var idx = strIndexOf(theValue, \";\");\r\n                    if (idx !== -1) {\r\n                        theValue = strTrim(strLeft(value, idx));\r\n                        values = _extractParts(strSubstring(value, idx + 1));\r\n                    }\r\n                    // Only update domain if not already present (isUndefined) and the value is truthy (not null, undefined or empty string)\r\n                    setValue(values, STR_DOMAIN, domain || _domain, isTruthy, isUndefined);\r\n                    if (!isNullOrUndefined(maxAgeSec)) {\r\n                        var _isIE = isIE();\r\n                        if (isUndefined(values[strExpires])) {\r\n                            var nowMs = utcNow();\r\n                            // Only add expires if not already present\r\n                            var expireMs = nowMs + (maxAgeSec * 1000);\r\n                            // Sanity check, if zero or -ve then ignore\r\n                            if (expireMs > 0) {\r\n                                var expiry = new Date();\r\n                                expiry.setTime(expireMs);\r\n                                setValue(values, strExpires, _formatDate(expiry, !_isIE ? strToUTCString : strToGMTString) || _formatDate(expiry, _isIE ? strToGMTString : strToUTCString) || STR_EMPTY, isTruthy);\r\n                            }\r\n                        }\r\n                        if (!_isIE) {\r\n                            // Only replace if not already present\r\n                            setValue(values, \"max-age\", STR_EMPTY + maxAgeSec, null, isUndefined);\r\n                        }\r\n                    }\r\n                    var location_1 = getLocation();\r\n                    if (location_1 && location_1[_DYN_PROTOCOL /* @min:%2eprotocol */] === \"https:\") {\r\n                        setValue(values, \"secure\", null, null, isUndefined);\r\n                        // Only set same site if not also secure\r\n                        if (_allowUaSameSite === null) {\r\n                            _allowUaSameSite = !uaDisallowsSameSiteNone((getNavigator() || {})[_DYN_USER_AGENT /* @min:%2euserAgent */]);\r\n                        }\r\n                        if (_allowUaSameSite) {\r\n                            setValue(values, \"SameSite\", \"None\", null, isUndefined);\r\n                        }\r\n                    }\r\n                    setValue(values, STR_PATH, path || _path, null, isUndefined);\r\n                    //let setCookieFn = cookieMgrConfig.setCookie || _setCookieValue;\r\n                    _setCookieFn(name, _formatCookieValue(theValue, values));\r\n                    result = true;\r\n                }\r\n                return result;\r\n            },\r\n            get: function (name) {\r\n                var value = STR_EMPTY;\r\n                if (_isMgrEnabled(cookieMgr) && !_isIgnoredCookie(cookieMgrConfig, name)) {\r\n                    value = _getCookieFn(name);\r\n                }\r\n                return value;\r\n            },\r\n            del: function (name, path) {\r\n                var result = false;\r\n                if (_isMgrEnabled(cookieMgr)) {\r\n                    // Only remove the cookie if the manager and cookie support has not been disabled\r\n                    result = cookieMgr.purge(name, path);\r\n                }\r\n                return result;\r\n            },\r\n            purge: function (name, path) {\r\n                var _a;\r\n                var result = false;\r\n                if (areCookiesSupported(logger)) {\r\n                    // Setting the expiration date in the past immediately removes the cookie\r\n                    var values = (_a = {},\r\n                        _a[STR_PATH] = path ? path : \"/\",\r\n                        _a[strExpires] = \"Thu, 01 Jan 1970 00:00:01 GMT\",\r\n                        _a);\r\n                    if (!isIE()) {\r\n                        // Set max age to expire now\r\n                        values[\"max-age\"] = \"0\";\r\n                    }\r\n                    // let delCookie = cookieMgrConfig.delCookie || _setCookieValue;\r\n                    _delCookieFn(name, _formatCookieValue(STR_EMPTY, values));\r\n                    result = true;\r\n                }\r\n                return result;\r\n            }\r\n        },\r\n        _a[_DYN_UNLOAD /* @min:unload */] = function (isAsync) {\r\n            unloadHandler && unloadHandler.rm();\r\n            unloadHandler = null;\r\n        },\r\n        _a);\r\n    // Associated this cookie manager with the config\r\n    cookieMgr[strConfigCookieMgr] = cookieMgr;\r\n    return cookieMgr;\r\n}\r\n/*\r\n* Helper method to tell if document.cookie object is supported by the runtime\r\n*/\r\nexport function areCookiesSupported(logger) {\r\n    if (_supportsCookies === null) {\r\n        _supportsCookies = false;\r\n        !_doc && _getDoc();\r\n        try {\r\n            var doc = _doc.v || {};\r\n            _supportsCookies = doc[strCookie] !== undefined;\r\n        }\r\n        catch (e) {\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 68 /* _eInternalMessageId.CannotAccessCookie */, \"Cannot access document.cookie - \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return _supportsCookies;\r\n}\r\nfunction _extractParts(theValue) {\r\n    var values = {};\r\n    if (theValue && theValue[_DYN_LENGTH /* @min:%2elength */]) {\r\n        var parts = strTrim(theValue)[_DYN_SPLIT /* @min:%2esplit */](\";\");\r\n        arrForEach(parts, function (thePart) {\r\n            thePart = strTrim(thePart || STR_EMPTY);\r\n            if (thePart) {\r\n                var idx = strIndexOf(thePart, \"=\");\r\n                if (idx === -1) {\r\n                    values[thePart] = null;\r\n                }\r\n                else {\r\n                    values[strTrim(strLeft(thePart, idx))] = strTrim(strSubstring(thePart, idx + 1));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return values;\r\n}\r\nfunction _formatDate(theDate, func) {\r\n    if (isFunction(theDate[func])) {\r\n        return theDate[func]();\r\n    }\r\n    return null;\r\n}\r\nfunction _formatCookieValue(value, values) {\r\n    var cookieValue = value || STR_EMPTY;\r\n    objForEachKey(values, function (name, theValue) {\r\n        cookieValue += \"; \" + name + (!isNullOrUndefined(theValue) ? \"=\" + theValue : STR_EMPTY);\r\n    });\r\n    return cookieValue;\r\n}\r\nfunction _getCookieValue(name) {\r\n    var cookieValue = STR_EMPTY;\r\n    !_doc && _getDoc();\r\n    if (_doc.v) {\r\n        var theCookie = _doc.v[strCookie] || STR_EMPTY;\r\n        if (_parsedCookieValue !== theCookie) {\r\n            _cookieCache = _extractParts(theCookie);\r\n            _parsedCookieValue = theCookie;\r\n        }\r\n        cookieValue = strTrim(_cookieCache[name] || STR_EMPTY);\r\n    }\r\n    return cookieValue;\r\n}\r\nfunction _setCookieValue(name, cookieValue) {\r\n    !_doc && _getDoc();\r\n    if (_doc.v) {\r\n        _doc.v[strCookie] = name + \"=\" + cookieValue;\r\n    }\r\n}\r\nexport function uaDisallowsSameSiteNone(userAgent) {\r\n    if (!isString(userAgent)) {\r\n        return false;\r\n    }\r\n    // Cover all iOS based browsers here. This includes:\r\n    // - Safari on iOS 12 for iPhone, iPod Touch, iPad\r\n    // - WkWebview on iOS 12 for iPhone, iPod Touch, iPad\r\n    // - Chrome on iOS 12 for iPhone, iPod Touch, iPad\r\n    // All of which are broken by SameSite=None, because they use the iOS networking stack\r\n    if (strContains(userAgent, \"CPU iPhone OS 12\") || strContains(userAgent, \"iPad; CPU OS 12\")) {\r\n        return true;\r\n    }\r\n    // Cover Mac OS X based browsers that use the Mac OS networking stack. This includes:\r\n    // - Safari on Mac OS X\r\n    // This does not include:\r\n    // - Internal browser on Mac OS X\r\n    // - Chrome on Mac OS X\r\n    // - Chromium on Mac OS X\r\n    // Because they do not use the Mac OS networking stack.\r\n    if (strContains(userAgent, \"Macintosh; Intel Mac OS X 10_14\") && strContains(userAgent, \"Version/\") && strContains(userAgent, \"Safari\")) {\r\n        return true;\r\n    }\r\n    // Cover Mac OS X internal browsers that use the Mac OS networking stack. This includes:\r\n    // - Internal browser on Mac OS X\r\n    // This does not include:\r\n    // - Safari on Mac OS X\r\n    // - Chrome on Mac OS X\r\n    // - Chromium on Mac OS X\r\n    // Because they do not use the Mac OS networking stack.\r\n    if (strContains(userAgent, \"Macintosh; Intel Mac OS X 10_14\") && strEndsWith(userAgent, \"AppleWebKit/605.1.15 (KHTML, like Gecko)\")) {\r\n        return true;\r\n    }\r\n    // Cover Chrome 50-69, because some versions are broken by SameSite=None, and none in this range require it.\r\n    // Note: this covers some pre-Chromium Edge versions, but pre-Chromim Edge does not require SameSite=None, so this is fine.\r\n    // Note: this regex applies to Windows, Mac OS X, and Linux, deliberately.\r\n    if (strContains(userAgent, \"Chrome/5\") || strContains(userAgent, \"Chrome/6\")) {\r\n        return true;\r\n    }\r\n    // Unreal Engine runs Chromium 59, but does not advertise as Chrome until 4.23. Treat versions of Unreal\r\n    // that don't specify their Chrome version as lacking support for SameSite=None.\r\n    if (strContains(userAgent, \"UnrealEngine\") && !strContains(userAgent, \"Chrome\")) {\r\n        return true;\r\n    }\r\n    // UCBrowser < 12.13.2 ignores Set-Cookie headers with SameSite=None\r\n    // NB: this rule isn't complete - you need regex to make a complete rule.\r\n    // See: https://www.chromium.org/updates/same-site/incompatible-clients\r\n    if (strContains(userAgent, \"UCBrowser/12\") || strContains(userAgent, \"UCBrowser/11\")) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n//# sourceMappingURL=CookieMgr.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as fileSchemes from '../configuration/fileSchemes';\nimport { looksLikeAbsoluteWindowsPath } from './fs';\n\n/**\n * Maps of file resources\n *\n * Attempts to handle correct mapping on both case sensitive and case in-sensitive\n * file systems.\n */\nexport class ResourceMap<T> {\n\n\tprivate static readonly defaultPathNormalizer = (resource: vscode.Uri): string => {\n\t\tif (resource.scheme === fileSchemes.file) {\n\t\t\treturn resource.fsPath;\n\t\t}\n\t\treturn resource.toString(true);\n\t};\n\n\tprivate readonly _map = new Map<string, { readonly resource: vscode.Uri; value: T }>();\n\n\tconstructor(\n\t\tprotected readonly _normalizePath: (resource: vscode.Uri) => string | undefined = ResourceMap.defaultPathNormalizer,\n\t\tprotected readonly config: {\n\t\t\treadonly onCaseInsensitiveFileSystem: boolean;\n\t\t},\n\t) { }\n\n\tpublic get size() {\n\t\treturn this._map.size;\n\t}\n\n\tpublic has(resource: vscode.Uri): boolean {\n\t\tconst file = this.toKey(resource);\n\t\treturn !!file && this._map.has(file);\n\t}\n\n\tpublic get(resource: vscode.Uri): T | undefined {\n\t\tconst file = this.toKey(resource);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst entry = this._map.get(file);\n\t\treturn entry ? entry.value : undefined;\n\t}\n\n\tpublic set(resource: vscode.Uri, value: T) {\n\t\tconst file = this.toKey(resource);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\t\tconst entry = this._map.get(file);\n\t\tif (entry) {\n\t\t\tentry.value = value;\n\t\t} else {\n\t\t\tthis._map.set(file, { resource, value });\n\t\t}\n\t}\n\n\tpublic delete(resource: vscode.Uri): void {\n\t\tconst file = this.toKey(resource);\n\t\tif (file) {\n\t\t\tthis._map.delete(file);\n\t\t}\n\t}\n\n\tpublic clear(): void {\n\t\tthis._map.clear();\n\t}\n\n\tpublic values(): Iterable<T> {\n\t\treturn Array.from(this._map.values(), x => x.value);\n\t}\n\n\tpublic entries(): Iterable<{ resource: vscode.Uri; value: T }> {\n\t\treturn this._map.values();\n\t}\n\n\tprivate toKey(resource: vscode.Uri): string | undefined {\n\t\tconst key = this._normalizePath(resource);\n\t\tif (!key) {\n\t\t\treturn key;\n\t\t}\n\t\treturn this.isCaseInsensitivePath(key) ? key.toLowerCase() : key;\n\t}\n\n\tprivate isCaseInsensitivePath(path: string) {\n\t\tif (looksLikeAbsoluteWindowsPath(path)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn path[0] === '/' && this.config.onCaseInsensitiveFileSystem;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Command, CommandManager } from '../commands/commandManager';\nimport { isSupportedLanguageMode } from '../configuration/languageIds';\nimport { API } from '../tsServer/api';\nimport * as typeConverters from '../typeConverters';\nimport { ITypeScriptServiceClient } from '../typescriptService';\n\n\nclass SourceDefinitionCommand implements Command {\n\n\tpublic static readonly context = 'tsSupportsSourceDefinition';\n\tpublic static readonly minVersion = API.v470;\n\n\tpublic readonly id = 'typescript.goToSourceDefinition';\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async execute() {\n\t\tif (this.client.apiVersion.lt(SourceDefinitionCommand.minVersion)) {\n\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"Go to Source Definition failed. Requires TypeScript 4.7+.\"));\n\t\t\treturn;\n\t\t}\n\n\t\tconst activeEditor = vscode.window.activeTextEditor;\n\t\tif (!activeEditor) {\n\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"Go to Source Definition failed. No resource provided.\"));\n\t\t\treturn;\n\t\t}\n\n\t\tconst resource = activeEditor.document.uri;\n\t\tconst document = await vscode.workspace.openTextDocument(resource);\n\t\tif (!isSupportedLanguageMode(document)) {\n\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"Go to Source Definition failed. Unsupported file type.\"));\n\t\t\treturn;\n\t\t}\n\n\t\tconst openedFiledPath = this.client.toOpenTsFilePath(document);\n\t\tif (!openedFiledPath) {\n\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"Go to Source Definition failed. Unknown file type.\"));\n\t\t\treturn;\n\t\t}\n\n\t\tawait vscode.window.withProgress({\n\t\t\tlocation: vscode.ProgressLocation.Window,\n\t\t\ttitle: vscode.l10n.t(\"Finding source definitions\")\n\t\t}, async (_progress, token) => {\n\n\t\t\tconst position = activeEditor.selection.anchor;\n\t\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(openedFiledPath, position);\n\t\t\tconst response = await this.client.execute('findSourceDefinition', args, token);\n\t\t\tif (response.type === 'response' && response.body) {\n\t\t\t\tconst locations: vscode.Location[] = response.body.map(reference =>\n\t\t\t\t\ttypeConverters.Location.fromTextSpan(this.client.toResource(reference.file), reference));\n\n\t\t\t\tif (locations.length) {\n\t\t\t\t\tif (locations.length === 1) {\n\t\t\t\t\t\tvscode.commands.executeCommand('vscode.open', locations[0].uri.with({\n\t\t\t\t\t\t\tfragment: `L${locations[0].range.start.line + 1},${locations[0].range.start.character + 1}`\n\t\t\t\t\t\t}));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvscode.commands.executeCommand('editor.action.showReferences', resource, position, locations);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"No source definitions found.\"));\n\t\t});\n\t}\n}\n\n\nexport function register(\n\tclient: ITypeScriptServiceClient,\n\tcommandManager: CommandManager\n) {\n\tfunction updateContext() {\n\t\tvscode.commands.executeCommand('setContext', SourceDefinitionCommand.context, client.apiVersion.gte(SourceDefinitionCommand.minVersion));\n\t}\n\tupdateContext();\n\n\tcommandManager.register(new SourceDefinitionCommand(client));\n\treturn client.onTsServerStarted(() => updateContext());\n}\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nexport class ReloadTypeScriptProjectsCommand implements Command {\n\tpublic readonly id = 'typescript.reloadProjects';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.reloadProjects();\n\t}\n}\n\nexport class ReloadJavaScriptProjectsCommand implements Command {\n\tpublic readonly id = 'javascript.reloadProjects';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.reloadProjects();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const Schemes = Object.freeze({\n\tfile: 'file',\n\tuntitled: 'untitled',\n\tmailto: 'mailto',\n\tvscode: 'vscode',\n\t'vscode-insiders': 'vscode-insiders',\n\tnotebookCell: 'vscode-notebook-cell',\n});\n\nexport function isOfScheme(scheme: string, link: string): boolean {\n\treturn link.toLowerCase().startsWith(scheme + ':');\n}\n","const outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { OpenJsDocLinkCommand, OpenJsDocLinkCommand_Args } from '../../commands/openJsDocLink';\nimport type * as Proto from '../../tsServer/protocol/protocol';\nimport * as typeConverters from '../../typeConverters';\n\nexport interface IFilePathToResourceConverter {\n\t/**\n\t * Convert a typescript filepath to a VS Code resource.\n\t */\n\ttoResource(filepath: string): vscode.Uri;\n}\n\nfunction getTagBodyText(\n\ttag: Proto.JSDocTagInfo,\n\tfilePathConverter: IFilePathToResourceConverter,\n): string | undefined {\n\tif (!tag.text) {\n\t\treturn undefined;\n\t}\n\n\t// Convert to markdown code block if it does not already contain one\n\tfunction makeCodeblock(text: string): string {\n\t\tif (/^\\s*[~`]{3}/m.test(text)) {\n\t\t\treturn text;\n\t\t}\n\t\treturn '```tsx\\n' + text + '\\n```';\n\t}\n\n\tlet text = convertLinkTags(tag.text, filePathConverter);\n\tswitch (tag.name) {\n\t\tcase 'example': {\n\t\t\t// Example text does not support `{@link}` as it is considered code.\n\t\t\t// TODO: should we support it if it appears outside of an explicit code block?\n\t\t\ttext = asPlainText(tag.text);\n\n\t\t\t// check for caption tags, fix for #79704\n\t\t\tconst captionTagMatches = text.match(/<caption>(.*?)<\\/caption>\\s*(\\r\\n|\\n)/);\n\t\t\tif (captionTagMatches && captionTagMatches.index === 0) {\n\t\t\t\treturn captionTagMatches[1] + '\\n' + makeCodeblock(text.substr(captionTagMatches[0].length));\n\t\t\t} else {\n\t\t\t\treturn makeCodeblock(text);\n\t\t\t}\n\t\t}\n\t\tcase 'author': {\n\t\t\t// fix obsucated email address, #80898\n\t\t\tconst emailMatch = text.match(/(.+)\\s<([-.\\w]+@[-.\\w]+)>/);\n\t\t\tif (emailMatch === null) {\n\t\t\t\treturn text;\n\t\t\t} else {\n\t\t\t\treturn `${emailMatch[1]} ${emailMatch[2]}`;\n\t\t\t}\n\t\t}\n\t\tcase 'default': {\n\t\t\treturn makeCodeblock(text);\n\t\t}\n\t\tdefault: {\n\t\t\treturn text;\n\t\t}\n\t}\n}\n\nfunction getTagDocumentation(\n\ttag: Proto.JSDocTagInfo,\n\tfilePathConverter: IFilePathToResourceConverter,\n): string | undefined {\n\tswitch (tag.name) {\n\t\tcase 'augments':\n\t\tcase 'extends':\n\t\tcase 'param':\n\t\tcase 'template': {\n\t\t\tconst body = getTagBody(tag, filePathConverter);\n\t\t\tif (body?.length === 3) {\n\t\t\t\tconst param = body[1];\n\t\t\t\tconst doc = body[2];\n\t\t\t\tconst label = `*@${tag.name}* \\`${param}\\``;\n\t\t\t\tif (!doc) {\n\t\t\t\t\treturn label;\n\t\t\t\t}\n\t\t\t\treturn label + (doc.match(/\\r\\n|\\n/g) ? '  \\n' + doc : ` \\u2014 ${doc}`);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tcase 'return':\n\t\tcase 'returns': {\n\t\t\t// For return(s), we require a non-empty body\n\t\t\tif (!tag.text?.length) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tbreak;\n\t\t}\n\t}\n\n\n\t// Generic tag\n\tconst label = `*@${tag.name}*`;\n\tconst text = getTagBodyText(tag, filePathConverter);\n\tif (!text) {\n\t\treturn label;\n\t}\n\treturn label + (text.match(/\\r\\n|\\n/g) ? '  \\n' + text : ` \\u2014 ${text}`);\n}\n\nfunction getTagBody(tag: Proto.JSDocTagInfo, filePathConverter: IFilePathToResourceConverter): Array<string> | undefined {\n\tif (tag.name === 'template') {\n\t\tconst parts = tag.text;\n\t\tif (parts && typeof (parts) !== 'string') {\n\t\t\tconst params = parts.filter(p => p.kind === 'typeParameterName').map(p => p.text).join(', ');\n\t\t\tconst docs = parts.filter(p => p.kind === 'text').map(p => convertLinkTags(p.text.replace(/^\\s*-?\\s*/, ''), filePathConverter)).join(' ');\n\t\t\treturn params ? ['', params, docs] : undefined;\n\t\t}\n\t}\n\treturn (convertLinkTags(tag.text, filePathConverter)).split(/^(\\S+)\\s*-?\\s*/);\n}\n\nfunction asPlainText(parts: readonly Proto.SymbolDisplayPart[] | string): string {\n\tif (typeof parts === 'string') {\n\t\treturn parts;\n\t}\n\treturn parts.map(part => part.text).join('');\n}\n\nexport function asPlainTextWithLinks(\n\tparts: readonly Proto.SymbolDisplayPart[] | string,\n\tfilePathConverter: IFilePathToResourceConverter,\n): string {\n\treturn convertLinkTags(parts, filePathConverter);\n}\n\n/**\n * Convert `@link` inline tags to markdown links\n */\nfunction convertLinkTags(\n\tparts: readonly Proto.SymbolDisplayPart[] | string | undefined,\n\tfilePathConverter: IFilePathToResourceConverter,\n): string {\n\tif (!parts) {\n\t\treturn '';\n\t}\n\n\tif (typeof parts === 'string') {\n\t\treturn parts;\n\t}\n\n\tconst out: string[] = [];\n\n\tlet currentLink: { name?: string; target?: Proto.FileSpan; text?: string; readonly linkcode: boolean } | undefined;\n\tfor (const part of parts) {\n\t\tswitch (part.kind) {\n\t\t\tcase 'link':\n\t\t\t\tif (currentLink) {\n\t\t\t\t\tif (currentLink.target) {\n\t\t\t\t\t\tconst file = filePathConverter.toResource(currentLink.target.file);\n\t\t\t\t\t\tconst args: OpenJsDocLinkCommand_Args = {\n\t\t\t\t\t\t\tfile: { ...file.toJSON(), $mid: undefined }, // Prevent VS Code from trying to transform the uri,\n\t\t\t\t\t\t\tposition: typeConverters.Position.fromLocation(currentLink.target.start)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst command = `command:${OpenJsDocLinkCommand.id}?${encodeURIComponent(JSON.stringify([args]))}`;\n\n\t\t\t\t\t\tconst linkText = currentLink.text ? currentLink.text : escapeMarkdownSyntaxTokensForCode(currentLink.name ?? '');\n\t\t\t\t\t\tout.push(`[${currentLink.linkcode ? '`' + linkText + '`' : linkText}](${command})`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst text = currentLink.text ?? currentLink.name;\n\t\t\t\t\t\tif (text) {\n\t\t\t\t\t\t\tif (/^https?:/.test(text)) {\n\t\t\t\t\t\t\t\tconst parts = text.split(' ');\n\t\t\t\t\t\t\t\tif (parts.length === 1 && !currentLink.linkcode) {\n\t\t\t\t\t\t\t\t\tout.push(`<${parts[0]}>`);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tconst linkText = parts.length > 1 ? parts.slice(1).join(' ') : parts[0];\n\t\t\t\t\t\t\t\t\tout.push(`[${currentLink.linkcode ? '`' + escapeMarkdownSyntaxTokensForCode(linkText) + '`' : linkText}](${parts[0]})`);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tout.push(escapeMarkdownSyntaxTokensForCode(text));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcurrentLink = undefined;\n\t\t\t\t} else {\n\t\t\t\t\tcurrentLink = {\n\t\t\t\t\t\tlinkcode: part.text === '{@linkcode '\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'linkName':\n\t\t\t\tif (currentLink) {\n\t\t\t\t\tcurrentLink.name = part.text;\n\t\t\t\t\tcurrentLink.target = (part as Proto.JSDocLinkDisplayPart).target;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'linkText':\n\t\t\t\tif (currentLink) {\n\t\t\t\t\tcurrentLink.text = part.text;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tout.push(part.text);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn out.join('');\n}\n\nfunction escapeMarkdownSyntaxTokensForCode(text: string): string {\n\treturn text.replace(/`/g, '\\\\$&'); // CodeQL [SM02383] This is only meant to escape backticks. The Markdown is fully sanitized after being rendered.\n}\n\nexport function tagsToMarkdown(\n\ttags: readonly Proto.JSDocTagInfo[],\n\tfilePathConverter: IFilePathToResourceConverter,\n): string {\n\treturn tags.map(tag => getTagDocumentation(tag, filePathConverter)).join('  \\n\\n');\n}\n\nexport function documentationToMarkdown(\n\tdocumentation: readonly Proto.SymbolDisplayPart[] | string,\n\ttags: readonly Proto.JSDocTagInfo[],\n\tfilePathConverter: IFilePathToResourceConverter,\n\tbaseUri: vscode.Uri | undefined,\n): vscode.MarkdownString {\n\tconst out = new vscode.MarkdownString();\n\tappendDocumentationAsMarkdown(out, documentation, tags, filePathConverter);\n\tout.baseUri = baseUri;\n\tout.isTrusted = { enabledCommands: [OpenJsDocLinkCommand.id] };\n\treturn out;\n}\n\nexport function appendDocumentationAsMarkdown(\n\tout: vscode.MarkdownString,\n\tdocumentation: readonly Proto.SymbolDisplayPart[] | string | undefined,\n\ttags: readonly Proto.JSDocTagInfo[] | undefined,\n\tconverter: IFilePathToResourceConverter,\n): vscode.MarkdownString {\n\tif (documentation) {\n\t\tout.appendMarkdown(asPlainTextWithLinks(documentation, converter));\n\t}\n\n\tif (tags) {\n\t\tconst tagsPreview = tagsToMarkdown(tags, converter);\n\t\tif (tagsPreview) {\n\t\t\tout.appendMarkdown('\\n\\n' + tagsPreview);\n\t\t}\n\t}\n\n\tout.isTrusted = { enabledCommands: [OpenJsDocLinkCommand.id] };\n\n\treturn out;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Command, CommandManager } from '../commands/commandManager';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { LanguageDescription } from '../configuration/languageDescription';\nimport { TelemetryReporter } from '../logging/telemetry';\nimport { API } from '../tsServer/api';\nimport { parseKindModifier } from '../tsServer/protocol/modifiers';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as PConst from '../tsServer/protocol/protocol.const';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient, ServerResponse } from '../typescriptService';\nimport TypingsStatus from '../ui/typingsStatus';\nimport { nulToken } from '../utils/cancellation';\nimport FileConfigurationManager from './fileConfigurationManager';\nimport { applyCodeAction } from './util/codeAction';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\nimport { snippetForFunctionCall } from './util/snippetForFunctionCall';\nimport * as Previewer from './util/textRendering';\n\n\ninterface DotAccessorContext {\n\treadonly range: vscode.Range;\n\treadonly text: string;\n}\n\ninterface CompletionContext {\n\treadonly isNewIdentifierLocation: boolean;\n\treadonly isMemberCompletion: boolean;\n\n\treadonly dotAccessorContext?: DotAccessorContext;\n\n\treadonly enableCallCompletions: boolean;\n\treadonly completeFunctionCalls: boolean;\n\n\treadonly wordRange: vscode.Range | undefined;\n\treadonly line: string;\n\treadonly optionalReplacementRange: vscode.Range | undefined;\n}\n\ntype ResolvedCompletionItem = {\n\treadonly edits?: readonly vscode.TextEdit[];\n\treadonly commands: readonly vscode.Command[];\n};\n\nclass MyCompletionItem extends vscode.CompletionItem {\n\n\tpublic readonly useCodeSnippet: boolean;\n\n\tconstructor(\n\t\tpublic readonly position: vscode.Position,\n\t\tpublic readonly document: vscode.TextDocument,\n\t\tpublic readonly tsEntry: Proto.CompletionEntry,\n\t\tprivate readonly completionContext: CompletionContext,\n\t\tpublic readonly metadata: any | undefined,\n\t\tclient: ITypeScriptServiceClient,\n\t\tdefaultCommitCharacters: readonly string[] | undefined,\n\t) {\n\t\tconst label = tsEntry.name || (tsEntry.insertText ?? '');\n\t\tsuper(label, MyCompletionItem.convertKind(tsEntry.kind));\n\n\t\tif (tsEntry.source && tsEntry.hasAction && client.apiVersion.lt(API.v490)) {\n\t\t\t// De-prioritze auto-imports\n\t\t\t// https://github.com/microsoft/vscode/issues/40311\n\t\t\tthis.sortText = '\\uffff' + tsEntry.sortText;\n\t\t} else {\n\t\t\tthis.sortText = tsEntry.sortText;\n\t\t}\n\n\t\tif (tsEntry.source && tsEntry.hasAction) {\n\t\t\t// Render \"fancy\" when source is a workspace path\n\t\t\tconst qualifierCandidate = vscode.workspace.asRelativePath(tsEntry.source);\n\t\t\tif (qualifierCandidate !== tsEntry.source) {\n\t\t\t\tthis.label = { label, description: qualifierCandidate };\n\t\t\t}\n\n\t\t}\n\n\t\tconst { sourceDisplay, isSnippet } = tsEntry;\n\t\tif (sourceDisplay) {\n\t\t\tthis.label = { label, description: Previewer.asPlainTextWithLinks(sourceDisplay, client) };\n\t\t}\n\n\t\tif (tsEntry.labelDetails) {\n\t\t\tthis.label = { label, ...tsEntry.labelDetails };\n\t\t}\n\n\t\tthis.preselect = tsEntry.isRecommended;\n\t\tthis.position = position;\n\t\tthis.useCodeSnippet = completionContext.completeFunctionCalls && (this.kind === vscode.CompletionItemKind.Function || this.kind === vscode.CompletionItemKind.Method);\n\n\t\tthis.range = this.getRangeFromReplacementSpan(tsEntry, completionContext);\n\t\tthis.commitCharacters = MyCompletionItem.getCommitCharacters(completionContext, tsEntry, defaultCommitCharacters);\n\t\tthis.insertText = isSnippet && tsEntry.insertText ? new vscode.SnippetString(tsEntry.insertText) : tsEntry.insertText;\n\t\tthis.filterText = tsEntry.filterText || this.getFilterText(completionContext.line, tsEntry.insertText);\n\n\t\tif (completionContext.isMemberCompletion && completionContext.dotAccessorContext && !(this.insertText instanceof vscode.SnippetString)) {\n\t\t\tthis.filterText = completionContext.dotAccessorContext.text + (this.insertText || this.textLabel);\n\t\t\tif (!this.range) {\n\t\t\t\tconst replacementRange = this.completionContext.wordRange;\n\t\t\t\tif (replacementRange) {\n\t\t\t\t\tthis.range = {\n\t\t\t\t\t\tinserting: completionContext.dotAccessorContext.range,\n\t\t\t\t\t\treplacing: completionContext.dotAccessorContext.range.union(replacementRange),\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthis.range = completionContext.dotAccessorContext.range;\n\t\t\t\t}\n\t\t\t\tthis.insertText = this.filterText;\n\t\t\t}\n\t\t}\n\n\t\tif (tsEntry.kindModifiers) {\n\t\t\tconst kindModifiers = parseKindModifier(tsEntry.kindModifiers);\n\t\t\tif (kindModifiers.has(PConst.KindModifiers.optional)) {\n\t\t\t\tthis.insertText ??= this.textLabel;\n\t\t\t\tthis.filterText ??= this.textLabel;\n\n\t\t\t\tif (typeof this.label === 'string') {\n\t\t\t\t\tthis.label += '?';\n\t\t\t\t} else {\n\t\t\t\t\tthis.label.label += '?';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (kindModifiers.has(PConst.KindModifiers.deprecated)) {\n\t\t\t\tthis.tags = [vscode.CompletionItemTag.Deprecated];\n\t\t\t}\n\n\t\t\tif (kindModifiers.has(PConst.KindModifiers.color)) {\n\t\t\t\tthis.kind = vscode.CompletionItemKind.Color;\n\t\t\t}\n\n\t\t\tthis.detail = getScriptKindDetails(tsEntry);\n\t\t}\n\n\t\tthis.resolveRange();\n\t}\n\n\tprivate get textLabel() {\n\t\treturn typeof this.label === 'string' ? this.label : this.label.label;\n\t}\n\n\tprivate _resolvedPromise?: {\n\t\treadonly requestToken: vscode.CancellationTokenSource;\n\t\treadonly promise: Promise<ResolvedCompletionItem | undefined>;\n\t\twaiting: number;\n\t};\n\n\tpublic async resolveCompletionItem(\n\t\tclient: ITypeScriptServiceClient,\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<ResolvedCompletionItem | undefined> {\n\t\ttoken.onCancellationRequested(() => {\n\t\t\tif (this._resolvedPromise && --this._resolvedPromise.waiting <= 0) {\n\t\t\t\t// Give a little extra time for another caller to come in\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (this._resolvedPromise && this._resolvedPromise.waiting <= 0) {\n\t\t\t\t\t\tthis._resolvedPromise.requestToken.cancel();\n\t\t\t\t\t}\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t});\n\n\t\tif (this._resolvedPromise) {\n\t\t\t++this._resolvedPromise.waiting;\n\t\t\treturn this._resolvedPromise.promise;\n\t\t}\n\n\t\tconst requestToken = new vscode.CancellationTokenSource();\n\n\t\tconst promise = (async (): Promise<ResolvedCompletionItem | undefined> => {\n\t\t\tconst filepath = client.toOpenTsFilePath(this.document);\n\t\t\tif (!filepath) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst args: Proto.CompletionDetailsRequestArgs = {\n\t\t\t\t...typeConverters.Position.toFileLocationRequestArgs(filepath, this.position),\n\t\t\t\tentryNames: [\n\t\t\t\t\tthis.tsEntry.source || this.tsEntry.data ? {\n\t\t\t\t\t\tname: this.tsEntry.name,\n\t\t\t\t\t\tsource: this.tsEntry.source,\n\t\t\t\t\t\tdata: this.tsEntry.data,\n\t\t\t\t\t} : this.tsEntry.name\n\t\t\t\t]\n\t\t\t};\n\t\t\tconst response = await client.interruptGetErr(() => client.execute('completionEntryDetails', args, requestToken.token));\n\t\t\tif (response.type !== 'response' || !response.body?.length) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst detail = response.body[0];\n\n\t\t\tconst newItemDetails = this.getDetails(client, detail);\n\t\t\tif (newItemDetails) {\n\t\t\t\tthis.detail = newItemDetails;\n\t\t\t}\n\n\t\t\tthis.documentation = this.getDocumentation(client, detail, this.document.uri);\n\n\t\t\tconst codeAction = this.getCodeActions(detail, filepath);\n\t\t\tconst commands: vscode.Command[] = [{\n\t\t\t\tcommand: CompletionAcceptedCommand.ID,\n\t\t\t\ttitle: '',\n\t\t\t\targuments: [this]\n\t\t\t}];\n\t\t\tif (codeAction.command) {\n\t\t\t\tcommands.push(codeAction.command);\n\t\t\t}\n\t\t\tconst additionalTextEdits = codeAction.additionalTextEdits;\n\n\t\t\tif (this.useCodeSnippet) {\n\t\t\t\tconst shouldCompleteFunction = await this.isValidFunctionCompletionContext(client, filepath, this.position, this.document, token);\n\t\t\t\tif (shouldCompleteFunction) {\n\t\t\t\t\tconst { snippet, parameterCount } = snippetForFunctionCall({ ...this, label: this.textLabel }, detail.displayParts);\n\t\t\t\t\tthis.insertText = snippet;\n\t\t\t\t\tif (parameterCount > 0) {\n\t\t\t\t\t\t//Fix for https://github.com/microsoft/vscode/issues/104059\n\t\t\t\t\t\t//Don't show parameter hints if \"editor.parameterHints.enabled\": false\n\t\t\t\t\t\tif (vscode.workspace.getConfiguration('editor.parameterHints').get('enabled')) {\n\t\t\t\t\t\t\tcommands.push({ title: 'triggerParameterHints', command: 'editor.action.triggerParameterHints' });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { commands, edits: additionalTextEdits };\n\t\t})();\n\n\t\tthis._resolvedPromise = {\n\t\t\tpromise,\n\t\t\trequestToken,\n\t\t\twaiting: 1,\n\t\t};\n\n\t\treturn this._resolvedPromise.promise;\n\t}\n\n\tprivate getDetails(\n\t\tclient: ITypeScriptServiceClient,\n\t\tdetail: Proto.CompletionEntryDetails,\n\t): string | undefined {\n\t\tconst parts: string[] = [];\n\n\t\tif (detail.kind === PConst.Kind.script) {\n\t\t\t// details were already added\n\t\t\treturn undefined;\n\t\t}\n\n\t\tfor (const action of detail.codeActions ?? []) {\n\t\t\tparts.push(action.description);\n\t\t}\n\n\t\tparts.push(Previewer.asPlainTextWithLinks(detail.displayParts, client));\n\t\treturn parts.join('\\n\\n');\n\t}\n\n\tprivate getDocumentation(\n\t\tclient: ITypeScriptServiceClient,\n\t\tdetail: Proto.CompletionEntryDetails,\n\t\tbaseUri: vscode.Uri,\n\t): vscode.MarkdownString | undefined {\n\t\tconst documentation = new vscode.MarkdownString();\n\t\tPreviewer.appendDocumentationAsMarkdown(documentation, detail.documentation, detail.tags, client);\n\t\tdocumentation.baseUri = baseUri;\n\t\treturn documentation.value.length ? documentation : undefined;\n\t}\n\n\tprivate async isValidFunctionCompletionContext(\n\t\tclient: ITypeScriptServiceClient,\n\t\tfilepath: string,\n\t\tposition: vscode.Position,\n\t\tdocument: vscode.TextDocument,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<boolean> {\n\t\t// Workaround for https://github.com/microsoft/TypeScript/issues/12677\n\t\t// Don't complete function calls inside of destructive assignments or imports\n\t\ttry {\n\t\t\tconst args: Proto.FileLocationRequestArgs = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\t\tconst response = await client.execute('quickinfo', args, token);\n\t\t\tif (response.type === 'response' && response.body) {\n\t\t\t\tswitch (response.body.kind) {\n\t\t\t\t\tcase 'var':\n\t\t\t\t\tcase 'let':\n\t\t\t\t\tcase 'const':\n\t\t\t\t\tcase 'alias':\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch {\n\t\t\t// Noop\n\t\t}\n\n\t\tconst line = document.lineAt(position.line);\n\t\t// Don't complete function call if there is already something that looks like a function call\n\t\t// https://github.com/microsoft/vscode/issues/18131\n\n\t\tconst after = line.text.slice(position.character);\n\t\tif (after.match(/^[a-z_$0-9]*\\s*\\(/gi)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Don't complete function call if it looks like a jsx tag.\n\t\tconst before = line.text.slice(0, position.character);\n\t\tif (before.match(/<\\s*[\\w]*$/gi)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate getCodeActions(\n\t\tdetail: Proto.CompletionEntryDetails,\n\t\tfilepath: string\n\t): { command?: vscode.Command; additionalTextEdits?: vscode.TextEdit[] } {\n\t\tif (!detail.codeActions?.length) {\n\t\t\treturn {};\n\t\t}\n\n\t\t// Try to extract out the additionalTextEdits for the current file.\n\t\t// Also check if we still have to apply other workspace edits and commands\n\t\t// using a vscode command\n\t\tconst additionalTextEdits: vscode.TextEdit[] = [];\n\t\tlet hasRemainingCommandsOrEdits = false;\n\t\tfor (const tsAction of detail.codeActions) {\n\t\t\tif (tsAction.commands) {\n\t\t\t\thasRemainingCommandsOrEdits = true;\n\t\t\t}\n\n\t\t\t// Apply all edits in the current file using `additionalTextEdits`\n\t\t\tif (tsAction.changes) {\n\t\t\t\tfor (const change of tsAction.changes) {\n\t\t\t\t\tif (change.fileName === filepath) {\n\t\t\t\t\t\tadditionalTextEdits.push(...change.textChanges.map(typeConverters.TextEdit.fromCodeEdit));\n\t\t\t\t\t} else {\n\t\t\t\t\t\thasRemainingCommandsOrEdits = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet command: vscode.Command | undefined = undefined;\n\t\tif (hasRemainingCommandsOrEdits) {\n\t\t\t// Create command that applies all edits not in the current file.\n\t\t\tcommand = {\n\t\t\t\ttitle: '',\n\t\t\t\tcommand: ApplyCompletionCodeActionCommand.ID,\n\t\t\t\targuments: [filepath, detail.codeActions.map((x): Proto.CodeAction => ({\n\t\t\t\t\tcommands: x.commands,\n\t\t\t\t\tdescription: x.description,\n\t\t\t\t\tchanges: x.changes.filter(x => x.fileName !== filepath)\n\t\t\t\t}))]\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tcommand,\n\t\t\tadditionalTextEdits: additionalTextEdits.length ? additionalTextEdits : undefined\n\t\t};\n\t}\n\n\tprivate getRangeFromReplacementSpan(tsEntry: Proto.CompletionEntry, completionContext: CompletionContext) {\n\t\tif (!tsEntry.replacementSpan) {\n\t\t\tif (completionContext.optionalReplacementRange) {\n\t\t\t\treturn {\n\t\t\t\t\tinserting: new vscode.Range(completionContext.optionalReplacementRange.start, this.position),\n\t\t\t\t\treplacing: completionContext.optionalReplacementRange,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// If TS returns an explicit replacement range on this item, we should use it for both types of completion\n\n\t\t// Make sure we only replace a single line at most\n\t\tlet replaceRange = typeConverters.Range.fromTextSpan(tsEntry.replacementSpan);\n\t\tif (!replaceRange.isSingleLine) {\n\t\t\treplaceRange = new vscode.Range(replaceRange.start.line, replaceRange.start.character, replaceRange.start.line, completionContext.line.length);\n\t\t}\n\t\treturn {\n\t\t\tinserting: replaceRange,\n\t\t\treplacing: replaceRange,\n\t\t};\n\t}\n\n\tprivate getFilterText(line: string, insertText: string | undefined): string | undefined {\n\t\t// Handle private field completions\n\t\tif (this.tsEntry.name.startsWith('#')) {\n\t\t\tconst wordRange = this.completionContext.wordRange;\n\t\t\tconst wordStart = wordRange ? line.charAt(wordRange.start.character) : undefined;\n\t\t\tif (insertText) {\n\t\t\t\tif (insertText.startsWith('this.#')) {\n\t\t\t\t\treturn wordStart === '#' ? insertText : insertText.replace(/^this\\.#/, '');\n\t\t\t\t} else {\n\t\t\t\t\treturn insertText;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn wordStart === '#' ? undefined : this.tsEntry.name.replace(/^#/, '');\n\t\t\t}\n\t\t}\n\n\t\t// For `this.` completions, generally don't set the filter text since we don't want them to be overly prioritized. #74164\n\t\tif (insertText?.startsWith('this.')) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Handle the case:\n\t\t// ```\n\t\t// const xyz = { 'ab c': 1 };\n\t\t// xyz.ab|\n\t\t// ```\n\t\t// In which case we want to insert a bracket accessor but should use `.abc` as the filter text instead of\n\t\t// the bracketed insert text.\n\t\telse if (insertText?.startsWith('[')) {\n\t\t\treturn insertText.replace(/^\\[['\"](.+)[['\"]\\]$/, '.$1');\n\t\t}\n\n\t\t// In all other cases, fallback to using the insertText\n\t\treturn insertText;\n\t}\n\n\tprivate resolveRange(): void {\n\t\tif (this.range) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst replaceRange = this.completionContext.wordRange;\n\t\tif (replaceRange) {\n\t\t\tthis.range = {\n\t\t\t\tinserting: new vscode.Range(replaceRange.start, this.position),\n\t\t\t\treplacing: replaceRange\n\t\t\t};\n\t\t}\n\t}\n\n\tprivate static convertKind(kind: string): vscode.CompletionItemKind {\n\t\tswitch (kind) {\n\t\t\tcase PConst.Kind.primitiveType:\n\t\t\tcase PConst.Kind.keyword:\n\t\t\t\treturn vscode.CompletionItemKind.Keyword;\n\n\t\t\tcase PConst.Kind.const:\n\t\t\tcase PConst.Kind.let:\n\t\t\tcase PConst.Kind.variable:\n\t\t\tcase PConst.Kind.localVariable:\n\t\t\tcase PConst.Kind.alias:\n\t\t\tcase PConst.Kind.parameter:\n\t\t\t\treturn vscode.CompletionItemKind.Variable;\n\n\t\t\tcase PConst.Kind.memberVariable:\n\t\t\tcase PConst.Kind.memberGetAccessor:\n\t\t\tcase PConst.Kind.memberSetAccessor:\n\t\t\t\treturn vscode.CompletionItemKind.Field;\n\n\t\t\tcase PConst.Kind.function:\n\t\t\tcase PConst.Kind.localFunction:\n\t\t\t\treturn vscode.CompletionItemKind.Function;\n\n\t\t\tcase PConst.Kind.method:\n\t\t\tcase PConst.Kind.constructSignature:\n\t\t\tcase PConst.Kind.callSignature:\n\t\t\tcase PConst.Kind.indexSignature:\n\t\t\t\treturn vscode.CompletionItemKind.Method;\n\n\t\t\tcase PConst.Kind.enum:\n\t\t\t\treturn vscode.CompletionItemKind.Enum;\n\n\t\t\tcase PConst.Kind.enumMember:\n\t\t\t\treturn vscode.CompletionItemKind.EnumMember;\n\n\t\t\tcase PConst.Kind.module:\n\t\t\tcase PConst.Kind.externalModuleName:\n\t\t\t\treturn vscode.CompletionItemKind.Module;\n\n\t\t\tcase PConst.Kind.class:\n\t\t\tcase PConst.Kind.type:\n\t\t\t\treturn vscode.CompletionItemKind.Class;\n\n\t\t\tcase PConst.Kind.interface:\n\t\t\t\treturn vscode.CompletionItemKind.Interface;\n\n\t\t\tcase PConst.Kind.warning:\n\t\t\t\treturn vscode.CompletionItemKind.Text;\n\n\t\t\tcase PConst.Kind.script:\n\t\t\t\treturn vscode.CompletionItemKind.File;\n\n\t\t\tcase PConst.Kind.directory:\n\t\t\t\treturn vscode.CompletionItemKind.Folder;\n\n\t\t\tcase PConst.Kind.string:\n\t\t\t\treturn vscode.CompletionItemKind.Constant;\n\n\t\t\tdefault:\n\t\t\t\treturn vscode.CompletionItemKind.Property;\n\t\t}\n\t}\n\n\tprivate static getCommitCharacters(\n\t\tcontext: CompletionContext,\n\t\tentry: Proto.CompletionEntry,\n\t\tdefaultCommitCharacters: readonly string[] | undefined,\n\t): string[] | undefined {\n\t\tlet commitCharacters = entry.commitCharacters ?? (defaultCommitCharacters ? Array.from(defaultCommitCharacters) : undefined);\n\t\tif (commitCharacters) {\n\t\t\tif (context.enableCallCompletions\n\t\t\t\t&& !context.isNewIdentifierLocation\n\t\t\t\t&& entry.kind !== PConst.Kind.warning\n\t\t\t\t&& entry.kind !== PConst.Kind.string) {\n\t\t\t\tcommitCharacters.push('(');\n\t\t\t}\n\t\t\treturn commitCharacters;\n\t\t}\n\n\t\tif (entry.kind === PConst.Kind.warning || entry.kind === PConst.Kind.string) { // Ambient JS word based suggestion, strings\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (context.isNewIdentifierLocation) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tcommitCharacters = ['.', ',', ';'];\n\t\tif (context.enableCallCompletions) {\n\t\t\tcommitCharacters.push('(');\n\t\t}\n\n\t\treturn commitCharacters;\n\t}\n}\n\nfunction getScriptKindDetails(tsEntry: Proto.CompletionEntry,): string | undefined {\n\tif (!tsEntry.kindModifiers || tsEntry.kind !== PConst.Kind.script) {\n\t\treturn;\n\t}\n\n\tconst kindModifiers = parseKindModifier(tsEntry.kindModifiers);\n\tfor (const extModifier of PConst.KindModifiers.fileExtensionKindModifiers) {\n\t\tif (kindModifiers.has(extModifier)) {\n\t\t\tif (tsEntry.name.toLowerCase().endsWith(extModifier)) {\n\t\t\t\treturn tsEntry.name;\n\t\t\t} else {\n\t\t\t\treturn tsEntry.name + extModifier;\n\t\t\t}\n\t\t}\n\t}\n\treturn undefined;\n}\n\n\nclass CompletionAcceptedCommand implements Command {\n\tpublic static readonly ID = '_typescript.onCompletionAccepted';\n\tpublic readonly id = CompletionAcceptedCommand.ID;\n\n\tpublic constructor(\n\t\tprivate readonly onCompletionAccepted: (item: vscode.CompletionItem) => void,\n\t\tprivate readonly telemetryReporter: TelemetryReporter,\n\t) { }\n\n\tpublic execute(item: vscode.CompletionItem) {\n\t\tthis.onCompletionAccepted(item);\n\t\tif (item instanceof MyCompletionItem) {\n\t\t\t/* __GDPR__\n\t\t\t\t\"completions.accept\" : {\n\t\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\t\"isPackageJsonImport\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\"isImportStatementCompletion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\"${include}\": [\n\t\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t*/\n\t\t\tthis.telemetryReporter.logTelemetry('completions.accept', {\n\t\t\t\tisPackageJsonImport: item.tsEntry.isPackageJsonImport ? 'true' : undefined,\n\t\t\t\tisImportStatementCompletion: item.tsEntry.isImportStatementCompletion ? 'true' : undefined,\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * Command fired when an completion item needs to be applied\n */\nclass ApplyCompletionCommand implements Command {\n\tpublic static readonly ID = '_typescript.applyCompletionCommand';\n\tpublic readonly id = ApplyCompletionCommand.ID;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t) { }\n\n\tpublic async execute(item: MyCompletionItem) {\n\t\tconst resolved = await item.resolveCompletionItem(this.client, nulToken);\n\t\tif (!resolved) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { edits, commands } = resolved;\n\n\t\tif (edits) {\n\t\t\tconst workspaceEdit = new vscode.WorkspaceEdit();\n\t\t\tfor (const edit of edits) {\n\t\t\t\tworkspaceEdit.replace(item.document.uri, edit.range, edit.newText);\n\t\t\t}\n\t\t\tawait vscode.workspace.applyEdit(workspaceEdit);\n\t\t}\n\n\t\tfor (const command of commands) {\n\t\t\tawait vscode.commands.executeCommand(command.command, ...(command.arguments ?? []));\n\t\t}\n\t}\n}\n\nclass ApplyCompletionCodeActionCommand implements Command {\n\tpublic static readonly ID = '_typescript.applyCompletionCodeAction';\n\tpublic readonly id = ApplyCompletionCodeActionCommand.ID;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async execute(_file: string, codeActions: Proto.CodeAction[]): Promise<boolean> {\n\t\tif (codeActions.length === 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (codeActions.length === 1) {\n\t\t\treturn applyCodeAction(this.client, codeActions[0], nulToken);\n\t\t}\n\n\t\tconst selection = await vscode.window.showQuickPick(\n\t\t\tcodeActions.map(action => ({\n\t\t\t\tlabel: action.description,\n\t\t\t\tdescription: '',\n\t\t\t\taction,\n\t\t\t})), {\n\t\t\tplaceHolder: vscode.l10n.t(\"Select code action to apply\")\n\t\t});\n\n\t\tif (selection) {\n\t\t\treturn applyCodeAction(this.client, selection.action, nulToken);\n\t\t}\n\t\treturn false;\n\t}\n}\n\ninterface CompletionConfiguration {\n\treadonly completeFunctionCalls: boolean;\n\treadonly nameSuggestions: boolean;\n\treadonly pathSuggestions: boolean;\n\treadonly autoImportSuggestions: boolean;\n\treadonly importStatementSuggestions: boolean;\n}\n\nnamespace CompletionConfiguration {\n\texport const completeFunctionCalls = 'suggest.completeFunctionCalls';\n\texport const nameSuggestions = 'suggest.names';\n\texport const pathSuggestions = 'suggest.paths';\n\texport const autoImportSuggestions = 'suggest.autoImports';\n\texport const importStatementSuggestions = 'suggest.importStatements';\n\n\texport function getConfigurationForResource(\n\t\tmodeId: string,\n\t\tresource: vscode.Uri\n\t): CompletionConfiguration {\n\t\tconst config = vscode.workspace.getConfiguration(modeId, resource);\n\t\treturn {\n\t\t\tcompleteFunctionCalls: config.get<boolean>(CompletionConfiguration.completeFunctionCalls, false),\n\t\t\tpathSuggestions: config.get<boolean>(CompletionConfiguration.pathSuggestions, true),\n\t\t\tautoImportSuggestions: config.get<boolean>(CompletionConfiguration.autoImportSuggestions, true),\n\t\t\tnameSuggestions: config.get<boolean>(CompletionConfiguration.nameSuggestions, true),\n\t\t\timportStatementSuggestions: config.get<boolean>(CompletionConfiguration.importStatementSuggestions, true),\n\t\t};\n\t}\n}\n\nclass TypeScriptCompletionItemProvider implements vscode.CompletionItemProvider<MyCompletionItem> {\n\n\tpublic static readonly triggerCharacters = ['.', '\"', '\\'', '`', '/', '@', '<', '#', ' '];\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly language: LanguageDescription,\n\t\tprivate readonly typingsStatus: TypingsStatus,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager,\n\t\tcommandManager: CommandManager,\n\t\tprivate readonly telemetryReporter: TelemetryReporter,\n\t\tonCompletionAccepted: (item: vscode.CompletionItem) => void\n\t) {\n\t\tcommandManager.register(new ApplyCompletionCodeActionCommand(this.client));\n\t\tcommandManager.register(new CompletionAcceptedCommand(onCompletionAccepted, this.telemetryReporter));\n\t\tcommandManager.register(new ApplyCompletionCommand(this.client));\n\t}\n\n\tpublic async provideCompletionItems(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken,\n\t\tcontext: vscode.CompletionContext\n\t): Promise<vscode.CompletionList<MyCompletionItem> | undefined> {\n\t\tif (!vscode.workspace.getConfiguration(this.language.id, document).get('suggest.enabled')) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (this.typingsStatus.isAcquiringTypings) {\n\t\t\treturn Promise.reject<vscode.CompletionList<MyCompletionItem>>({\n\t\t\t\tlabel: vscode.l10n.t({\n\t\t\t\t\tmessage: \"Acquiring typings...\",\n\t\t\t\t\tcomment: ['Typings refers to the *.d.ts typings files that power our IntelliSense. It should not be localized'],\n\t\t\t\t}),\n\t\t\t\tdetail: vscode.l10n.t({\n\t\t\t\t\tmessage: \"Acquiring typings definitions for IntelliSense.\",\n\t\t\t\t\tcomment: ['Typings refers to the *.d.ts typings files that power our IntelliSense. It should not be localized'],\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst line = document.lineAt(position.line);\n\t\tconst completionConfiguration = CompletionConfiguration.getConfigurationForResource(this.language.id, document.uri);\n\n\t\tif (!this.shouldTrigger(context, line, position, completionConfiguration)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tlet wordRange = document.getWordRangeAtPosition(position);\n\t\tif (wordRange && !wordRange.isEmpty) {\n\t\t\tconst secondCharPosition = wordRange.start.translate(0, 1);\n\t\t\tconst firstChar = document.getText(new vscode.Range(wordRange.start, secondCharPosition));\n\t\t\tif (firstChar === '@') {\n\t\t\t\twordRange = wordRange.with(secondCharPosition);\n\t\t\t}\n\t\t}\n\n\t\tawait this.client.interruptGetErr(() => this.fileConfigurationManager.ensureConfigurationForDocument(document, token));\n\n\t\tconst args: Proto.CompletionsRequestArgs = {\n\t\t\t...typeConverters.Position.toFileLocationRequestArgs(file, position),\n\t\t\tincludeExternalModuleExports: completionConfiguration.autoImportSuggestions,\n\t\t\tincludeInsertTextCompletions: true,\n\t\t\ttriggerCharacter: this.getTsTriggerCharacter(context),\n\t\t\ttriggerKind: typeConverters.CompletionTriggerKind.toProtocolCompletionTriggerKind(context.triggerKind),\n\t\t};\n\n\t\tlet dotAccessorContext: DotAccessorContext | undefined;\n\t\tlet response: ServerResponse.Response<Proto.CompletionInfoResponse> | undefined;\n\t\tlet duration: number | undefined;\n\t\tlet optionalReplacementRange: vscode.Range | undefined;\n\n\t\tconst startTime = Date.now();\n\t\ttry {\n\t\t\tresponse = await this.client.interruptGetErr(() => this.client.execute('completionInfo', args, token));\n\t\t} finally {\n\t\t\tduration = Date.now() - startTime;\n\t\t}\n\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\tthis.logCompletionsTelemetry(duration, response);\n\t\t\treturn undefined;\n\t\t}\n\t\tconst isNewIdentifierLocation = response.body.isNewIdentifierLocation;\n\t\tconst isMemberCompletion = response.body.isMemberCompletion;\n\t\tif (isMemberCompletion) {\n\t\t\tconst dotMatch = line.text.slice(0, position.character).match(/\\??\\.\\s*$/) || undefined;\n\t\t\tif (dotMatch) {\n\t\t\t\tconst range = new vscode.Range(position.translate({ characterDelta: -dotMatch[0].length }), position);\n\t\t\t\tconst text = document.getText(range);\n\t\t\t\tdotAccessorContext = { range, text };\n\t\t\t}\n\t\t}\n\t\tconst isIncomplete = !!response.body.isIncomplete || (response.metadata as any)?.isIncomplete;\n\t\tconst entries = response.body.entries;\n\t\tconst metadata = response.metadata;\n\t\tconst defaultCommitCharacters = Object.freeze(response.body.defaultCommitCharacters);\n\n\t\tif (response.body.optionalReplacementSpan) {\n\t\t\toptionalReplacementRange = typeConverters.Range.fromTextSpan(response.body.optionalReplacementSpan);\n\t\t}\n\n\t\tconst completionContext: CompletionContext = {\n\t\t\tisNewIdentifierLocation,\n\t\t\tisMemberCompletion,\n\t\t\tdotAccessorContext,\n\t\t\tenableCallCompletions: !completionConfiguration.completeFunctionCalls,\n\t\t\twordRange,\n\t\t\tline: line.text,\n\t\t\tcompleteFunctionCalls: completionConfiguration.completeFunctionCalls,\n\t\t\toptionalReplacementRange,\n\t\t};\n\n\t\tlet includesPackageJsonImport = false;\n\t\tlet includesImportStatementCompletion = false;\n\t\tconst items: MyCompletionItem[] = [];\n\t\tfor (const entry of entries) {\n\t\t\tif (!shouldExcludeCompletionEntry(entry, completionConfiguration)) {\n\t\t\t\tconst item = new MyCompletionItem(\n\t\t\t\t\tposition,\n\t\t\t\t\tdocument,\n\t\t\t\t\tentry,\n\t\t\t\t\tcompletionContext,\n\t\t\t\t\tmetadata,\n\t\t\t\t\tthis.client,\n\t\t\t\t\tdefaultCommitCharacters);\n\t\t\t\titem.command = {\n\t\t\t\t\tcommand: ApplyCompletionCommand.ID,\n\t\t\t\t\ttitle: '',\n\t\t\t\t\targuments: [item]\n\t\t\t\t};\n\t\t\t\titems.push(item);\n\t\t\t\tincludesPackageJsonImport = includesPackageJsonImport || !!entry.isPackageJsonImport;\n\t\t\t\tincludesImportStatementCompletion = includesImportStatementCompletion || !!entry.isImportStatementCompletion;\n\t\t\t}\n\t\t}\n\t\tif (duration !== undefined) {\n\t\t\tthis.logCompletionsTelemetry(duration, response, includesPackageJsonImport, includesImportStatementCompletion);\n\t\t}\n\t\treturn new vscode.CompletionList(items, isIncomplete);\n\t}\n\n\tprivate logCompletionsTelemetry(\n\t\tduration: number,\n\t\tresponse: ServerResponse.Response<Proto.CompletionInfoResponse> | undefined,\n\t\tincludesPackageJsonImport?: boolean,\n\t\tincludesImportStatementCompletion?: boolean,\n\t) {\n\t\t/* __GDPR__\n\t\t\t\"completions.execute\" : {\n\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\"duration\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"type\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"count\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"flags\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"updateGraphDurationMs\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"createAutoImportProviderProgramDurationMs\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"includesPackageJsonImport\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"includesImportStatementCompletion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"${include}\": [\n\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t]\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryReporter.logTelemetry('completions.execute', {\n\t\t\tduration: String(duration),\n\t\t\ttype: response?.type ?? 'unknown',\n\t\t\tflags: response?.type === 'response' && typeof response.body?.flags === 'number' ? String(response.body.flags) : undefined,\n\t\t\tcount: String(response?.type === 'response' && response.body ? response.body.entries.length : 0),\n\t\t\tupdateGraphDurationMs: response?.type === 'response' && typeof response.performanceData?.updateGraphDurationMs === 'number'\n\t\t\t\t? String(response.performanceData.updateGraphDurationMs)\n\t\t\t\t: undefined,\n\t\t\tcreateAutoImportProviderProgramDurationMs: response?.type === 'response' && typeof response.performanceData?.createAutoImportProviderProgramDurationMs === 'number'\n\t\t\t\t? String(response.performanceData.createAutoImportProviderProgramDurationMs)\n\t\t\t\t: undefined,\n\t\t\tincludesPackageJsonImport: includesPackageJsonImport ? 'true' : undefined,\n\t\t\tincludesImportStatementCompletion: includesImportStatementCompletion ? 'true' : undefined,\n\t\t});\n\t}\n\n\tprivate getTsTriggerCharacter(context: vscode.CompletionContext): Proto.CompletionsTriggerCharacter | undefined {\n\t\tswitch (context.triggerCharacter) {\n\t\t\tcase '@': {\n\t\t\t\treturn '@';\n\t\t\t}\n\t\t\tcase '#': {\n\t\t\t\treturn '#';\n\t\t\t}\n\t\t\tcase ' ': {\n\t\t\t\treturn this.client.apiVersion.gte(API.v430) ? ' ' : undefined;\n\t\t\t}\n\t\t\tcase '.':\n\t\t\tcase '\"':\n\t\t\tcase '\\'':\n\t\t\tcase '`':\n\t\t\tcase '/':\n\t\t\tcase '<': {\n\t\t\t\treturn context.triggerCharacter;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async resolveCompletionItem(\n\t\titem: MyCompletionItem,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<MyCompletionItem | undefined> {\n\t\tawait item.resolveCompletionItem(this.client, token);\n\t\treturn item;\n\t}\n\n\tprivate shouldTrigger(\n\t\tcontext: vscode.CompletionContext,\n\t\tline: vscode.TextLine,\n\t\tposition: vscode.Position,\n\t\tconfiguration: CompletionConfiguration,\n\t): boolean {\n\t\tif (context.triggerCharacter === ' ') {\n\t\t\tif (!configuration.importStatementSuggestions || this.client.apiVersion.lt(API.v430)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst pre = line.text.slice(0, position.character);\n\t\t\treturn pre === 'import';\n\t\t}\n\t\treturn true;\n\t}\n}\n\nfunction shouldExcludeCompletionEntry(\n\telement: Proto.CompletionEntry,\n\tcompletionConfiguration: CompletionConfiguration\n) {\n\treturn (\n\t\t(!completionConfiguration.nameSuggestions && element.kind === PConst.Kind.warning)\n\t\t|| (!completionConfiguration.pathSuggestions &&\n\t\t\t(element.kind === PConst.Kind.directory || element.kind === PConst.Kind.script || element.kind === PConst.Kind.externalModuleName))\n\t\t|| (!completionConfiguration.autoImportSuggestions && element.hasAction)\n\t);\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tlanguage: LanguageDescription,\n\tclient: ITypeScriptServiceClient,\n\ttypingsStatus: TypingsStatus,\n\tfileConfigurationManager: FileConfigurationManager,\n\tcommandManager: CommandManager,\n\ttelemetryReporter: TelemetryReporter,\n\tonCompletionAccepted: (item: vscode.CompletionItem) => void\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerCompletionItemProvider(selector.syntax,\n\t\t\tnew TypeScriptCompletionItemProvider(client, language, typingsStatus, fileConfigurationManager, commandManager, telemetryReporter, onCompletionAccepted),\n\t\t\t...TypeScriptCompletionItemProvider.triggerCharacters);\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport async function exists(resource: vscode.Uri): Promise<boolean> {\n\ttry {\n\t\tconst stat = await vscode.workspace.fs.stat(resource);\n\t\t// stat.type is an enum flag\n\t\treturn !!(stat.type & vscode.FileType.File);\n\t} catch {\n\t\treturn false;\n\t}\n}\n\nexport function looksLikeAbsoluteWindowsPath(path: string): boolean {\n\treturn /^[a-zA-Z]:[\\/\\\\]/.test(path);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { TelemetryReporter } from '../logging/telemetry';\nimport { isImplicitProjectConfigFile, openOrCreateConfig, ProjectType } from '../tsconfig';\nimport { ITypeScriptServiceClient } from '../typescriptService';\n\n\ninterface Hint {\n\tmessage: string;\n}\n\nclass ExcludeHintItem {\n\tpublic configFileName?: string;\n\tprivate readonly _item: vscode.StatusBarItem;\n\tprivate _currentHint?: Hint;\n\n\tconstructor(\n\t\tprivate readonly telemetryReporter: TelemetryReporter\n\t) {\n\t\tthis._item = vscode.window.createStatusBarItem('status.typescript.exclude', vscode.StatusBarAlignment.Right, 98 /* to the right of typescript version status (99) */);\n\t\tthis._item.name = vscode.l10n.t(\"TypeScript: Configure Excludes\");\n\t\tthis._item.command = 'js.projectStatus.command';\n\t}\n\n\tpublic getCurrentHint(): Hint {\n\t\treturn this._currentHint!;\n\t}\n\n\tpublic hide() {\n\t\tthis._item.hide();\n\t}\n\n\tpublic show(largeRoots?: string) {\n\t\tthis._currentHint = {\n\t\t\tmessage: largeRoots\n\t\t\t\t? vscode.l10n.t(\"To enable project-wide JavaScript/TypeScript language features, exclude folders with many files, like: {0}\", largeRoots)\n\t\t\t\t: vscode.l10n.t(\"To enable project-wide JavaScript/TypeScript language features, exclude large folders with source files that you do not work on.\")\n\t\t};\n\t\tthis._item.tooltip = this._currentHint.message;\n\t\tthis._item.text = vscode.l10n.t(\"Configure Excludes\");\n\t\tthis._item.tooltip = vscode.l10n.t(\"To enable project-wide JavaScript/TypeScript language features, exclude large folders with source files that you do not work on.\");\n\t\tthis._item.color = '#A5DF3B';\n\t\tthis._item.show();\n\t\t/* __GDPR__\n\t\t\t\"js.hintProjectExcludes\" : {\n\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\"${include}\": [\n\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t]\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryReporter.logTelemetry('js.hintProjectExcludes');\n\t}\n}\n\n\nfunction createLargeProjectMonitorFromTypeScript(item: ExcludeHintItem, client: ITypeScriptServiceClient): vscode.Disposable {\n\n\tinterface LargeProjectMessageItem extends vscode.MessageItem {\n\t\tindex: number;\n\t}\n\n\treturn client.onProjectLanguageServiceStateChanged(body => {\n\t\tif (body.languageServiceEnabled) {\n\t\t\titem.hide();\n\t\t} else {\n\t\t\titem.show();\n\t\t\tconst configFileName = body.projectName;\n\t\t\tif (configFileName) {\n\t\t\t\titem.configFileName = configFileName;\n\t\t\t\tvscode.window.showWarningMessage<LargeProjectMessageItem>(item.getCurrentHint().message,\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: vscode.l10n.t(\"Configure Excludes\"),\n\t\t\t\t\t\tindex: 0\n\t\t\t\t\t}).then(selected => {\n\t\t\t\t\t\tif (selected && selected.index === 0) {\n\t\t\t\t\t\t\tonConfigureExcludesSelected(client, configFileName);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction onConfigureExcludesSelected(\n\tclient: ITypeScriptServiceClient,\n\tconfigFileName: string\n) {\n\tif (!isImplicitProjectConfigFile(configFileName)) {\n\t\tvscode.workspace.openTextDocument(configFileName)\n\t\t\t.then(vscode.window.showTextDocument);\n\t} else {\n\t\tconst root = client.getWorkspaceRootForResource(vscode.Uri.file(configFileName));\n\t\tif (root) {\n\t\t\topenOrCreateConfig(\n\t\t\t\tclient.apiVersion,\n\t\t\t\t/tsconfig\\.?.*\\.json/.test(configFileName) ? ProjectType.TypeScript : ProjectType.JavaScript,\n\t\t\t\troot,\n\t\t\t\tclient.configuration);\n\t\t}\n\t}\n}\n\nexport function create(\n\tclient: ITypeScriptServiceClient,\n): vscode.Disposable {\n\tconst toDispose: vscode.Disposable[] = [];\n\n\tconst item = new ExcludeHintItem(client.telemetryReporter);\n\ttoDispose.push(vscode.commands.registerCommand('js.projectStatus.command', () => {\n\t\tif (item.configFileName) {\n\t\t\tonConfigureExcludesSelected(client, item.configFileName);\n\t\t}\n\t\tconst { message } = item.getCurrentHint();\n\t\treturn vscode.window.showInformationMessage(message);\n\t}));\n\n\ttoDispose.push(createLargeProjectMonitorFromTypeScript(item, client));\n\n\treturn vscode.Disposable.from(...toDispose);\n}\n","// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\n\nexport function disposeAll(disposables: Iterable<vscode.Disposable>) {\n\tconst errors: any[] = [];\n\n\tfor (const disposable of disposables) {\n\t\ttry {\n\t\t\tdisposable.dispose();\n\t\t} catch (e) {\n\t\t\terrors.push(e);\n\t\t}\n\t}\n\n\tif (errors.length === 1) {\n\t\tthrow errors[0];\n\t} else if (errors.length > 1) {\n\t\tthrow new AggregateError(errors, 'Encountered errors while disposing of store');\n\t}\n}\n\nexport interface IDisposable {\n\tdispose(): void;\n}\n\nexport abstract class Disposable {\n\tprivate _isDisposed = false;\n\n\tprotected _disposables: vscode.Disposable[] = [];\n\n\tpublic dispose(): any {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isDisposed = true;\n\t\tdisposeAll(this._disposables);\n\t}\n\n\tprotected _register<T extends vscode.Disposable>(value: T): T {\n\t\tif (this._isDisposed) {\n\t\t\tvalue.dispose();\n\t\t} else {\n\t\t\tthis._disposables.push(value);\n\t\t}\n\t\treturn value;\n\t}\n\n\tprotected get isDisposed() {\n\t\treturn this._isDisposed;\n\t}\n}\n\nexport class DisposableStore extends Disposable {\n\n\tpublic add<T extends IDisposable>(disposable: T): T {\n\t\tthis._register(disposable);\n\n\t\treturn disposable;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ServerResponse } from '../typescriptService';\nimport type * as Proto from './protocol/protocol';\n\nexport interface CallbackItem<R> {\n\treadonly onSuccess: (value: R) => void;\n\treadonly onError: (err: Error) => void;\n\treadonly queuingStartTime: number;\n\treadonly isAsync: boolean;\n\treadonly traceId?: string | undefined;\n\treadonly command?: string;\n}\n\nexport class CallbackMap<R extends Proto.Response> {\n\tprivate readonly _callbacks = new Map<number, CallbackItem<ServerResponse.Response<R> | undefined>>();\n\tprivate readonly _asyncCallbacks = new Map<number, CallbackItem<ServerResponse.Response<R> | undefined>>();\n\n\tpublic destroy(cause: string): void {\n\t\tconst cancellation = new ServerResponse.Cancelled(cause);\n\t\tfor (const callback of this._callbacks.values()) {\n\t\t\tcallback.onSuccess(cancellation);\n\t\t}\n\t\tthis._callbacks.clear();\n\t\tfor (const callback of this._asyncCallbacks.values()) {\n\t\t\tcallback.onSuccess(cancellation);\n\t\t}\n\t\tthis._asyncCallbacks.clear();\n\t}\n\n\tpublic add(seq: number, callback: CallbackItem<ServerResponse.Response<R> | undefined>, isAsync: boolean) {\n\t\tif (isAsync) {\n\t\t\tthis._asyncCallbacks.set(seq, callback);\n\t\t} else {\n\t\t\tthis._callbacks.set(seq, callback);\n\t\t}\n\t}\n\n\tpublic fetch(seq: number): CallbackItem<ServerResponse.Response<R> | undefined> | undefined {\n\t\tconst callback = this._callbacks.get(seq) || this._asyncCallbacks.get(seq);\n\t\tthis.delete(seq);\n\t\treturn callback;\n\t}\n\n\tpublic peek(seq: number): CallbackItem<ServerResponse.Response<R> | undefined> | undefined {\n\t\treturn this._callbacks.get(seq) ?? this._asyncCallbacks.get(seq);\n\t}\n\n\tprivate delete(seq: number) {\n\t\tif (!this._callbacks.delete(seq)) {\n\t\t\tthis._asyncCallbacks.delete(seq);\n\t\t}\n\t}\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MessageConnection = void 0;\nconst ral_1 = __importDefault(require(\"../common/ral\"));\nconst messageConnection_1 = require(\"../common/messageConnection\");\nclass MessageConnection extends messageConnection_1.BaseMessageConnection {\n    constructor(port) {\n        super();\n        this.port = port;\n    }\n    postMessage(message, transfer) {\n        transfer !== undefined ? this.port.postMessage(message, transfer) : this.port.postMessage(message);\n    }\n    listen() {\n        this.port.onmessage = (event) => {\n            this.handleMessage(event.data).catch((0, ral_1.default)().console.error);\n        };\n    }\n}\nexports.MessageConnection = MessageConnection;\n//# sourceMappingURL=messageConnection.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nexport var strShimFunction = \"function\";\r\nexport var strShimObject = \"object\";\r\nexport var strShimUndefined = \"undefined\";\r\nexport var strShimPrototype = \"prototype\";\r\nexport var strDefault = \"default\";\r\nexport var ObjClass = Object;\r\nexport var ObjProto = ObjClass[strShimPrototype];\r\n//# sourceMappingURL=Constants.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseMessageConnection = void 0;\nvar _Request;\n(function (_Request) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && typeof candidate.id === 'number' && typeof candidate.method === 'string';\n    }\n    _Request.is = is;\n})(_Request || (_Request = {}));\nvar _Notification;\n(function (_Notification) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && typeof candidate.method === 'string' && candidate.id === undefined;\n    }\n    _Notification.is = is;\n})(_Notification || (_Notification = {}));\nvar _Response;\n(function (_Response) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && typeof candidate.id === 'number' && (candidate.error !== undefined || candidate.result !== undefined);\n    }\n    _Response.is = is;\n})(_Response || (_Response = {}));\nclass BaseMessageConnection {\n    constructor() {\n        this.sendRequest = this._sendRequest;\n        this.onRequest = this._onRequest;\n        this.sendNotification = this._sendNotification;\n        this.onNotification = this._onNotification;\n        this.id = 1;\n        this.responsePromises = new Map();\n        this.requestHandlers = new Map();\n        this.notificationHandlers = new Map();\n    }\n    _sendRequest(method, params, transferList) {\n        if (method === undefined) {\n            return Promise.resolve();\n        }\n        return new Promise((resolve, reject) => {\n            const id = this.id++;\n            const request = { id, method };\n            if (params !== undefined) {\n                request.params = params;\n            }\n            this.responsePromises.set(id, { resolve, reject, method: request.method });\n            this.postMessage(request, transferList);\n        });\n    }\n    _onRequest(method, handler) {\n        if (method === undefined || handler === undefined) {\n            return;\n        }\n        this.requestHandlers.set(method, handler);\n    }\n    _sendNotification(method, params, transferList) {\n        if (method === undefined) {\n            return;\n        }\n        const notification = { method };\n        if (params !== undefined) {\n            notification.params = params;\n        }\n        this.postMessage(notification, transferList);\n    }\n    _onNotification(method, handler) {\n        if (method === undefined || handler === undefined) {\n            return;\n        }\n        this.notificationHandlers.set(method, handler);\n    }\n    async handleMessage(message) {\n        if (_Request.is(message)) {\n            const id = message.id;\n            const handler = this.requestHandlers.get(message.method);\n            if (handler !== undefined) {\n                try {\n                    const result = await handler(message.params);\n                    this.sendResultResponse(id, result);\n                }\n                catch (error) {\n                    this.sendErrorResponse(id, error);\n                }\n            }\n        }\n        else if (_Notification.is(message)) {\n            const handler = this.notificationHandlers.get(message.method);\n            if (handler !== undefined) {\n                handler(message.params);\n            }\n        }\n        else if (_Response.is(message)) {\n            const id = message.id;\n            const promise = this.responsePromises.get(id);\n            if (promise !== undefined) {\n                this.responsePromises.delete(id);\n                if (message.result !== undefined) {\n                    promise.resolve(message.result);\n                }\n                else if (message.error !== undefined) {\n                    promise.reject(typeof message.error === 'string' ? new Error(message.error) : message.error);\n                }\n                else {\n                    promise.reject(new Error('Response has neither a result nor an error value'));\n                }\n            }\n        }\n    }\n    sendResultResponse(id, result) {\n        const response = { id, result: result === undefined ? null : result };\n        this.postMessage(response);\n    }\n    sendErrorResponse(id, error) {\n        const response = { id, error: error === undefined ? 'Unknown error' : error instanceof Error ? error.message : error };\n        this.postMessage(response);\n    }\n}\nexports.BaseMessageConnection = BaseMessageConnection;\n(function (BaseMessageConnection) {\n    BaseMessageConnection.Request = _Request;\n    BaseMessageConnection.Notification = _Notification;\n    BaseMessageConnection.Response = _Response;\n})(BaseMessageConnection = exports.BaseMessageConnection || (exports.BaseMessageConnection = {}));\n//# sourceMappingURL=messageConnection.js.map","module.exports = require('os');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as Proto from './protocol/protocol';\nimport { TypeScriptVersion } from './versionProvider';\n\n\nexport class TypeScriptServerError extends Error {\n\tpublic static create(\n\t\tserverId: string,\n\t\tversion: TypeScriptVersion,\n\t\tresponse: Proto.Response\n\t): TypeScriptServerError {\n\t\tconst parsedResult = TypeScriptServerError.parseErrorText(response);\n\t\treturn new TypeScriptServerError(serverId, version, response, parsedResult?.message, parsedResult?.stack, parsedResult?.sanitizedStack);\n\t}\n\n\tprivate constructor(\n\t\tpublic readonly serverId: string,\n\t\tpublic readonly version: TypeScriptVersion,\n\t\tprivate readonly response: Proto.Response,\n\t\tpublic readonly serverMessage: string | undefined,\n\t\tpublic readonly serverStack: string | undefined,\n\t\tprivate readonly sanitizedStack: string | undefined\n\t) {\n\t\tsuper([\n\t\t\t`<${serverId}> TypeScript Server Error (${version.displayName})`,\n\t\t\tserverMessage,\n\t\t\tserverStack\n\t\t].filter(Boolean).join('\\n'));\n\t}\n\n\tpublic get serverErrorText() { return this.response.message; }\n\n\tpublic get serverCommand() { return this.response.command; }\n\n\tpublic get telemetry() {\n\t\t// The \"sanitizedstack\" has been purged of error messages, paths, and file names (other than tsserver)\n\t\t// and, thus, can be classified as SystemMetaData, rather than CallstackOrException.\n\t\t/* __GDPR__FRAGMENT__\n\t\t\t\"TypeScriptRequestErrorProperties\" : {\n\t\t\t\t\"command\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"serverid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" },\n\t\t\t\t\"sanitizedstack\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" },\n\t\t\t\t\"badclient\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" }\n\t\t\t}\n\t\t*/\n\t\treturn {\n\t\t\tcommand: this.serverCommand,\n\t\t\tserverid: this.serverId,\n\t\t\tsanitizedstack: this.sanitizedStack || '',\n\t\t\tbadclient: /\\bBADCLIENT\\b/.test(this.stack || ''),\n\t\t} as const;\n\t}\n\n\t/**\n\t * Given a `errorText` from a tsserver request indicating failure in handling a request,\n\t * prepares a payload for telemetry-logging.\n\t */\n\tprivate static parseErrorText(response: Proto.Response) {\n\t\tconst errorText = response.message;\n\t\tif (errorText) {\n\t\t\tconst errorPrefix = 'Error processing request. ';\n\t\t\tif (errorText.startsWith(errorPrefix)) {\n\t\t\t\tconst prefixFreeErrorText = errorText.substr(errorPrefix.length);\n\t\t\t\tconst newlineIndex = prefixFreeErrorText.indexOf('\\n');\n\t\t\t\tif (newlineIndex >= 0) {\n\t\t\t\t\t// Newline expected between message and stack.\n\t\t\t\t\tconst stack = prefixFreeErrorText.substring(newlineIndex + 1);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tmessage: prefixFreeErrorText.substring(0, newlineIndex),\n\t\t\t\t\t\tstack,\n\t\t\t\t\t\tsanitizedStack: TypeScriptServerError.sanitizeStack(stack)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Drop everything but \".js\" and line/column numbers (though retain \"tsserver\" if that's the filename).\n\t */\n\tprivate static sanitizeStack(message: string | undefined) {\n\t\tif (!message) {\n\t\t\treturn '';\n\t\t}\n\t\tconst regex = /(\\btsserver)?(\\.(?:ts|tsx|js|jsx)(?::\\d+(?::\\d+)?)?)\\)?$/igm;\n\t\tlet serverStack = '';\n\t\twhile (true) {\n\t\t\tconst match = regex.exec(message);\n\t\t\tif (!match) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// [1] is 'tsserver' or undefined\n\t\t\t// [2] is '.js:{line_number}:{column_number}'\n\t\t\tserverStack += `${match[1] || 'suppressed'}${match[2]}\\n`;\n\t\t}\n\t\treturn serverStack;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport function createScanner(text, ignoreTrivia = false) {\n    const len = text.length;\n    let pos = 0, value = '', tokenOffset = 0, token = 16 /* SyntaxKind.Unknown */, lineNumber = 0, lineStartOffset = 0, tokenLineStartOffset = 0, prevTokenLineStartOffset = 0, scanError = 0 /* ScanError.None */;\n    function scanHexDigits(count, exact) {\n        let digits = 0;\n        let value = 0;\n        while (digits < count || !exact) {\n            let ch = text.charCodeAt(pos);\n            if (ch >= 48 /* CharacterCodes._0 */ && ch <= 57 /* CharacterCodes._9 */) {\n                value = value * 16 + ch - 48 /* CharacterCodes._0 */;\n            }\n            else if (ch >= 65 /* CharacterCodes.A */ && ch <= 70 /* CharacterCodes.F */) {\n                value = value * 16 + ch - 65 /* CharacterCodes.A */ + 10;\n            }\n            else if (ch >= 97 /* CharacterCodes.a */ && ch <= 102 /* CharacterCodes.f */) {\n                value = value * 16 + ch - 97 /* CharacterCodes.a */ + 10;\n            }\n            else {\n                break;\n            }\n            pos++;\n            digits++;\n        }\n        if (digits < count) {\n            value = -1;\n        }\n        return value;\n    }\n    function setPosition(newPosition) {\n        pos = newPosition;\n        value = '';\n        tokenOffset = 0;\n        token = 16 /* SyntaxKind.Unknown */;\n        scanError = 0 /* ScanError.None */;\n    }\n    function scanNumber() {\n        let start = pos;\n        if (text.charCodeAt(pos) === 48 /* CharacterCodes._0 */) {\n            pos++;\n        }\n        else {\n            pos++;\n            while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n            }\n        }\n        if (pos < text.length && text.charCodeAt(pos) === 46 /* CharacterCodes.dot */) {\n            pos++;\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n            }\n            else {\n                scanError = 3 /* ScanError.UnexpectedEndOfNumber */;\n                return text.substring(start, pos);\n            }\n        }\n        let end = pos;\n        if (pos < text.length && (text.charCodeAt(pos) === 69 /* CharacterCodes.E */ || text.charCodeAt(pos) === 101 /* CharacterCodes.e */)) {\n            pos++;\n            if (pos < text.length && text.charCodeAt(pos) === 43 /* CharacterCodes.plus */ || text.charCodeAt(pos) === 45 /* CharacterCodes.minus */) {\n                pos++;\n            }\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n                end = pos;\n            }\n            else {\n                scanError = 3 /* ScanError.UnexpectedEndOfNumber */;\n            }\n        }\n        return text.substring(start, end);\n    }\n    function scanString() {\n        let result = '', start = pos;\n        while (true) {\n            if (pos >= len) {\n                result += text.substring(start, pos);\n                scanError = 2 /* ScanError.UnexpectedEndOfString */;\n                break;\n            }\n            const ch = text.charCodeAt(pos);\n            if (ch === 34 /* CharacterCodes.doubleQuote */) {\n                result += text.substring(start, pos);\n                pos++;\n                break;\n            }\n            if (ch === 92 /* CharacterCodes.backslash */) {\n                result += text.substring(start, pos);\n                pos++;\n                if (pos >= len) {\n                    scanError = 2 /* ScanError.UnexpectedEndOfString */;\n                    break;\n                }\n                const ch2 = text.charCodeAt(pos++);\n                switch (ch2) {\n                    case 34 /* CharacterCodes.doubleQuote */:\n                        result += '\\\"';\n                        break;\n                    case 92 /* CharacterCodes.backslash */:\n                        result += '\\\\';\n                        break;\n                    case 47 /* CharacterCodes.slash */:\n                        result += '/';\n                        break;\n                    case 98 /* CharacterCodes.b */:\n                        result += '\\b';\n                        break;\n                    case 102 /* CharacterCodes.f */:\n                        result += '\\f';\n                        break;\n                    case 110 /* CharacterCodes.n */:\n                        result += '\\n';\n                        break;\n                    case 114 /* CharacterCodes.r */:\n                        result += '\\r';\n                        break;\n                    case 116 /* CharacterCodes.t */:\n                        result += '\\t';\n                        break;\n                    case 117 /* CharacterCodes.u */:\n                        const ch3 = scanHexDigits(4, true);\n                        if (ch3 >= 0) {\n                            result += String.fromCharCode(ch3);\n                        }\n                        else {\n                            scanError = 4 /* ScanError.InvalidUnicode */;\n                        }\n                        break;\n                    default:\n                        scanError = 5 /* ScanError.InvalidEscapeCharacter */;\n                }\n                start = pos;\n                continue;\n            }\n            if (ch >= 0 && ch <= 0x1f) {\n                if (isLineBreak(ch)) {\n                    result += text.substring(start, pos);\n                    scanError = 2 /* ScanError.UnexpectedEndOfString */;\n                    break;\n                }\n                else {\n                    scanError = 6 /* ScanError.InvalidCharacter */;\n                    // mark as error but continue with string\n                }\n            }\n            pos++;\n        }\n        return result;\n    }\n    function scanNext() {\n        value = '';\n        scanError = 0 /* ScanError.None */;\n        tokenOffset = pos;\n        lineStartOffset = lineNumber;\n        prevTokenLineStartOffset = tokenLineStartOffset;\n        if (pos >= len) {\n            // at the end\n            tokenOffset = len;\n            return token = 17 /* SyntaxKind.EOF */;\n        }\n        let code = text.charCodeAt(pos);\n        // trivia: whitespace\n        if (isWhiteSpace(code)) {\n            do {\n                pos++;\n                value += String.fromCharCode(code);\n                code = text.charCodeAt(pos);\n            } while (isWhiteSpace(code));\n            return token = 15 /* SyntaxKind.Trivia */;\n        }\n        // trivia: newlines\n        if (isLineBreak(code)) {\n            pos++;\n            value += String.fromCharCode(code);\n            if (code === 13 /* CharacterCodes.carriageReturn */ && text.charCodeAt(pos) === 10 /* CharacterCodes.lineFeed */) {\n                pos++;\n                value += '\\n';\n            }\n            lineNumber++;\n            tokenLineStartOffset = pos;\n            return token = 14 /* SyntaxKind.LineBreakTrivia */;\n        }\n        switch (code) {\n            // tokens: []{}:,\n            case 123 /* CharacterCodes.openBrace */:\n                pos++;\n                return token = 1 /* SyntaxKind.OpenBraceToken */;\n            case 125 /* CharacterCodes.closeBrace */:\n                pos++;\n                return token = 2 /* SyntaxKind.CloseBraceToken */;\n            case 91 /* CharacterCodes.openBracket */:\n                pos++;\n                return token = 3 /* SyntaxKind.OpenBracketToken */;\n            case 93 /* CharacterCodes.closeBracket */:\n                pos++;\n                return token = 4 /* SyntaxKind.CloseBracketToken */;\n            case 58 /* CharacterCodes.colon */:\n                pos++;\n                return token = 6 /* SyntaxKind.ColonToken */;\n            case 44 /* CharacterCodes.comma */:\n                pos++;\n                return token = 5 /* SyntaxKind.CommaToken */;\n            // strings\n            case 34 /* CharacterCodes.doubleQuote */:\n                pos++;\n                value = scanString();\n                return token = 10 /* SyntaxKind.StringLiteral */;\n            // comments\n            case 47 /* CharacterCodes.slash */:\n                const start = pos - 1;\n                // Single-line comment\n                if (text.charCodeAt(pos + 1) === 47 /* CharacterCodes.slash */) {\n                    pos += 2;\n                    while (pos < len) {\n                        if (isLineBreak(text.charCodeAt(pos))) {\n                            break;\n                        }\n                        pos++;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 12 /* SyntaxKind.LineCommentTrivia */;\n                }\n                // Multi-line comment\n                if (text.charCodeAt(pos + 1) === 42 /* CharacterCodes.asterisk */) {\n                    pos += 2;\n                    const safeLength = len - 1; // For lookahead.\n                    let commentClosed = false;\n                    while (pos < safeLength) {\n                        const ch = text.charCodeAt(pos);\n                        if (ch === 42 /* CharacterCodes.asterisk */ && text.charCodeAt(pos + 1) === 47 /* CharacterCodes.slash */) {\n                            pos += 2;\n                            commentClosed = true;\n                            break;\n                        }\n                        pos++;\n                        if (isLineBreak(ch)) {\n                            if (ch === 13 /* CharacterCodes.carriageReturn */ && text.charCodeAt(pos) === 10 /* CharacterCodes.lineFeed */) {\n                                pos++;\n                            }\n                            lineNumber++;\n                            tokenLineStartOffset = pos;\n                        }\n                    }\n                    if (!commentClosed) {\n                        pos++;\n                        scanError = 1 /* ScanError.UnexpectedEndOfComment */;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 13 /* SyntaxKind.BlockCommentTrivia */;\n                }\n                // just a single slash\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* SyntaxKind.Unknown */;\n            // numbers\n            case 45 /* CharacterCodes.minus */:\n                value += String.fromCharCode(code);\n                pos++;\n                if (pos === len || !isDigit(text.charCodeAt(pos))) {\n                    return token = 16 /* SyntaxKind.Unknown */;\n                }\n            // found a minus, followed by a number so\n            // we fall through to proceed with scanning\n            // numbers\n            case 48 /* CharacterCodes._0 */:\n            case 49 /* CharacterCodes._1 */:\n            case 50 /* CharacterCodes._2 */:\n            case 51 /* CharacterCodes._3 */:\n            case 52 /* CharacterCodes._4 */:\n            case 53 /* CharacterCodes._5 */:\n            case 54 /* CharacterCodes._6 */:\n            case 55 /* CharacterCodes._7 */:\n            case 56 /* CharacterCodes._8 */:\n            case 57 /* CharacterCodes._9 */:\n                value += scanNumber();\n                return token = 11 /* SyntaxKind.NumericLiteral */;\n            // literals and unknown symbols\n            default:\n                // is a literal? Read the full word.\n                while (pos < len && isUnknownContentCharacter(code)) {\n                    pos++;\n                    code = text.charCodeAt(pos);\n                }\n                if (tokenOffset !== pos) {\n                    value = text.substring(tokenOffset, pos);\n                    // keywords: true, false, null\n                    switch (value) {\n                        case 'true': return token = 8 /* SyntaxKind.TrueKeyword */;\n                        case 'false': return token = 9 /* SyntaxKind.FalseKeyword */;\n                        case 'null': return token = 7 /* SyntaxKind.NullKeyword */;\n                    }\n                    return token = 16 /* SyntaxKind.Unknown */;\n                }\n                // some\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* SyntaxKind.Unknown */;\n        }\n    }\n    function isUnknownContentCharacter(code) {\n        if (isWhiteSpace(code) || isLineBreak(code)) {\n            return false;\n        }\n        switch (code) {\n            case 125 /* CharacterCodes.closeBrace */:\n            case 93 /* CharacterCodes.closeBracket */:\n            case 123 /* CharacterCodes.openBrace */:\n            case 91 /* CharacterCodes.openBracket */:\n            case 34 /* CharacterCodes.doubleQuote */:\n            case 58 /* CharacterCodes.colon */:\n            case 44 /* CharacterCodes.comma */:\n            case 47 /* CharacterCodes.slash */:\n                return false;\n        }\n        return true;\n    }\n    function scanNextNonTrivia() {\n        let result;\n        do {\n            result = scanNext();\n        } while (result >= 12 /* SyntaxKind.LineCommentTrivia */ && result <= 15 /* SyntaxKind.Trivia */);\n        return result;\n    }\n    return {\n        setPosition: setPosition,\n        getPosition: () => pos,\n        scan: ignoreTrivia ? scanNextNonTrivia : scanNext,\n        getToken: () => token,\n        getTokenValue: () => value,\n        getTokenOffset: () => tokenOffset,\n        getTokenLength: () => pos - tokenOffset,\n        getTokenStartLine: () => lineStartOffset,\n        getTokenStartCharacter: () => tokenOffset - prevTokenLineStartOffset,\n        getTokenError: () => scanError,\n    };\n}\nfunction isWhiteSpace(ch) {\n    return ch === 32 /* CharacterCodes.space */ || ch === 9 /* CharacterCodes.tab */;\n}\nfunction isLineBreak(ch) {\n    return ch === 10 /* CharacterCodes.lineFeed */ || ch === 13 /* CharacterCodes.carriageReturn */;\n}\nfunction isDigit(ch) {\n    return ch >= 48 /* CharacterCodes._0 */ && ch <= 57 /* CharacterCodes._9 */;\n}\nvar CharacterCodes;\n(function (CharacterCodes) {\n    CharacterCodes[CharacterCodes[\"lineFeed\"] = 10] = \"lineFeed\";\n    CharacterCodes[CharacterCodes[\"carriageReturn\"] = 13] = \"carriageReturn\";\n    CharacterCodes[CharacterCodes[\"space\"] = 32] = \"space\";\n    CharacterCodes[CharacterCodes[\"_0\"] = 48] = \"_0\";\n    CharacterCodes[CharacterCodes[\"_1\"] = 49] = \"_1\";\n    CharacterCodes[CharacterCodes[\"_2\"] = 50] = \"_2\";\n    CharacterCodes[CharacterCodes[\"_3\"] = 51] = \"_3\";\n    CharacterCodes[CharacterCodes[\"_4\"] = 52] = \"_4\";\n    CharacterCodes[CharacterCodes[\"_5\"] = 53] = \"_5\";\n    CharacterCodes[CharacterCodes[\"_6\"] = 54] = \"_6\";\n    CharacterCodes[CharacterCodes[\"_7\"] = 55] = \"_7\";\n    CharacterCodes[CharacterCodes[\"_8\"] = 56] = \"_8\";\n    CharacterCodes[CharacterCodes[\"_9\"] = 57] = \"_9\";\n    CharacterCodes[CharacterCodes[\"a\"] = 97] = \"a\";\n    CharacterCodes[CharacterCodes[\"b\"] = 98] = \"b\";\n    CharacterCodes[CharacterCodes[\"c\"] = 99] = \"c\";\n    CharacterCodes[CharacterCodes[\"d\"] = 100] = \"d\";\n    CharacterCodes[CharacterCodes[\"e\"] = 101] = \"e\";\n    CharacterCodes[CharacterCodes[\"f\"] = 102] = \"f\";\n    CharacterCodes[CharacterCodes[\"g\"] = 103] = \"g\";\n    CharacterCodes[CharacterCodes[\"h\"] = 104] = \"h\";\n    CharacterCodes[CharacterCodes[\"i\"] = 105] = \"i\";\n    CharacterCodes[CharacterCodes[\"j\"] = 106] = \"j\";\n    CharacterCodes[CharacterCodes[\"k\"] = 107] = \"k\";\n    CharacterCodes[CharacterCodes[\"l\"] = 108] = \"l\";\n    CharacterCodes[CharacterCodes[\"m\"] = 109] = \"m\";\n    CharacterCodes[CharacterCodes[\"n\"] = 110] = \"n\";\n    CharacterCodes[CharacterCodes[\"o\"] = 111] = \"o\";\n    CharacterCodes[CharacterCodes[\"p\"] = 112] = \"p\";\n    CharacterCodes[CharacterCodes[\"q\"] = 113] = \"q\";\n    CharacterCodes[CharacterCodes[\"r\"] = 114] = \"r\";\n    CharacterCodes[CharacterCodes[\"s\"] = 115] = \"s\";\n    CharacterCodes[CharacterCodes[\"t\"] = 116] = \"t\";\n    CharacterCodes[CharacterCodes[\"u\"] = 117] = \"u\";\n    CharacterCodes[CharacterCodes[\"v\"] = 118] = \"v\";\n    CharacterCodes[CharacterCodes[\"w\"] = 119] = \"w\";\n    CharacterCodes[CharacterCodes[\"x\"] = 120] = \"x\";\n    CharacterCodes[CharacterCodes[\"y\"] = 121] = \"y\";\n    CharacterCodes[CharacterCodes[\"z\"] = 122] = \"z\";\n    CharacterCodes[CharacterCodes[\"A\"] = 65] = \"A\";\n    CharacterCodes[CharacterCodes[\"B\"] = 66] = \"B\";\n    CharacterCodes[CharacterCodes[\"C\"] = 67] = \"C\";\n    CharacterCodes[CharacterCodes[\"D\"] = 68] = \"D\";\n    CharacterCodes[CharacterCodes[\"E\"] = 69] = \"E\";\n    CharacterCodes[CharacterCodes[\"F\"] = 70] = \"F\";\n    CharacterCodes[CharacterCodes[\"G\"] = 71] = \"G\";\n    CharacterCodes[CharacterCodes[\"H\"] = 72] = \"H\";\n    CharacterCodes[CharacterCodes[\"I\"] = 73] = \"I\";\n    CharacterCodes[CharacterCodes[\"J\"] = 74] = \"J\";\n    CharacterCodes[CharacterCodes[\"K\"] = 75] = \"K\";\n    CharacterCodes[CharacterCodes[\"L\"] = 76] = \"L\";\n    CharacterCodes[CharacterCodes[\"M\"] = 77] = \"M\";\n    CharacterCodes[CharacterCodes[\"N\"] = 78] = \"N\";\n    CharacterCodes[CharacterCodes[\"O\"] = 79] = \"O\";\n    CharacterCodes[CharacterCodes[\"P\"] = 80] = \"P\";\n    CharacterCodes[CharacterCodes[\"Q\"] = 81] = \"Q\";\n    CharacterCodes[CharacterCodes[\"R\"] = 82] = \"R\";\n    CharacterCodes[CharacterCodes[\"S\"] = 83] = \"S\";\n    CharacterCodes[CharacterCodes[\"T\"] = 84] = \"T\";\n    CharacterCodes[CharacterCodes[\"U\"] = 85] = \"U\";\n    CharacterCodes[CharacterCodes[\"V\"] = 86] = \"V\";\n    CharacterCodes[CharacterCodes[\"W\"] = 87] = \"W\";\n    CharacterCodes[CharacterCodes[\"X\"] = 88] = \"X\";\n    CharacterCodes[CharacterCodes[\"Y\"] = 89] = \"Y\";\n    CharacterCodes[CharacterCodes[\"Z\"] = 90] = \"Z\";\n    CharacterCodes[CharacterCodes[\"asterisk\"] = 42] = \"asterisk\";\n    CharacterCodes[CharacterCodes[\"backslash\"] = 92] = \"backslash\";\n    CharacterCodes[CharacterCodes[\"closeBrace\"] = 125] = \"closeBrace\";\n    CharacterCodes[CharacterCodes[\"closeBracket\"] = 93] = \"closeBracket\";\n    CharacterCodes[CharacterCodes[\"colon\"] = 58] = \"colon\";\n    CharacterCodes[CharacterCodes[\"comma\"] = 44] = \"comma\";\n    CharacterCodes[CharacterCodes[\"dot\"] = 46] = \"dot\";\n    CharacterCodes[CharacterCodes[\"doubleQuote\"] = 34] = \"doubleQuote\";\n    CharacterCodes[CharacterCodes[\"minus\"] = 45] = \"minus\";\n    CharacterCodes[CharacterCodes[\"openBrace\"] = 123] = \"openBrace\";\n    CharacterCodes[CharacterCodes[\"openBracket\"] = 91] = \"openBracket\";\n    CharacterCodes[CharacterCodes[\"plus\"] = 43] = \"plus\";\n    CharacterCodes[CharacterCodes[\"slash\"] = 47] = \"slash\";\n    CharacterCodes[CharacterCodes[\"formFeed\"] = 12] = \"formFeed\";\n    CharacterCodes[CharacterCodes[\"tab\"] = 9] = \"tab\";\n})(CharacterCodes || (CharacterCodes = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner';\nvar ParseOptions;\n(function (ParseOptions) {\n    ParseOptions.DEFAULT = {\n        allowTrailingComma: false\n    };\n})(ParseOptions || (ParseOptions = {}));\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport function getLocation(text, position) {\n    const segments = []; // strings or numbers\n    const earlyReturnException = new Object();\n    let previousNode = undefined;\n    const previousNodeInst = {\n        value: {},\n        offset: 0,\n        length: 0,\n        type: 'object',\n        parent: undefined\n    };\n    let isAtPropertyKey = false;\n    function setPreviousNode(value, offset, length, type) {\n        previousNodeInst.value = value;\n        previousNodeInst.offset = offset;\n        previousNodeInst.length = length;\n        previousNodeInst.type = type;\n        previousNodeInst.colonOffset = undefined;\n        previousNode = previousNodeInst;\n    }\n    try {\n        visit(text, {\n            onObjectBegin: (offset, length) => {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                isAtPropertyKey = position > offset;\n                segments.push(''); // push a placeholder (will be replaced)\n            },\n            onObjectProperty: (name, offset, length) => {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(name, offset, length, 'property');\n                segments[segments.length - 1] = name;\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onObjectEnd: (offset, length) => {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.pop();\n            },\n            onArrayBegin: (offset, length) => {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.push(0);\n            },\n            onArrayEnd: (offset, length) => {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.pop();\n            },\n            onLiteralValue: (value, offset, length) => {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(value, offset, length, getNodeType(value));\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onSeparator: (sep, offset, length) => {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                if (sep === ':' && previousNode && previousNode.type === 'property') {\n                    previousNode.colonOffset = offset;\n                    isAtPropertyKey = false;\n                    previousNode = undefined;\n                }\n                else if (sep === ',') {\n                    const last = segments[segments.length - 1];\n                    if (typeof last === 'number') {\n                        segments[segments.length - 1] = last + 1;\n                    }\n                    else {\n                        isAtPropertyKey = true;\n                        segments[segments.length - 1] = '';\n                    }\n                    previousNode = undefined;\n                }\n            }\n        });\n    }\n    catch (e) {\n        if (e !== earlyReturnException) {\n            throw e;\n        }\n    }\n    return {\n        path: segments,\n        previousNode,\n        isAtPropertyKey,\n        matches: (pattern) => {\n            let k = 0;\n            for (let i = 0; k < pattern.length && i < segments.length; i++) {\n                if (pattern[k] === segments[i] || pattern[k] === '*') {\n                    k++;\n                }\n                else if (pattern[k] !== '**') {\n                    return false;\n                }\n            }\n            return k === pattern.length;\n        }\n    };\n}\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore always check the errors list to find out if the input was valid.\n */\nexport function parse(text, errors = [], options = ParseOptions.DEFAULT) {\n    let currentProperty = null;\n    let currentParent = [];\n    const previousParents = [];\n    function onValue(value) {\n        if (Array.isArray(currentParent)) {\n            currentParent.push(value);\n        }\n        else if (currentProperty !== null) {\n            currentParent[currentProperty] = value;\n        }\n    }\n    const visitor = {\n        onObjectBegin: () => {\n            const object = {};\n            onValue(object);\n            previousParents.push(currentParent);\n            currentParent = object;\n            currentProperty = null;\n        },\n        onObjectProperty: (name) => {\n            currentProperty = name;\n        },\n        onObjectEnd: () => {\n            currentParent = previousParents.pop();\n        },\n        onArrayBegin: () => {\n            const array = [];\n            onValue(array);\n            previousParents.push(currentParent);\n            currentParent = array;\n            currentProperty = null;\n        },\n        onArrayEnd: () => {\n            currentParent = previousParents.pop();\n        },\n        onLiteralValue: onValue,\n        onError: (error, offset, length) => {\n            errors.push({ error, offset, length });\n        }\n    };\n    visit(text, visitor, options);\n    return currentParent[0];\n}\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport function parseTree(text, errors = [], options = ParseOptions.DEFAULT) {\n    let currentParent = { type: 'array', offset: -1, length: -1, children: [], parent: undefined }; // artificial root\n    function ensurePropertyComplete(endOffset) {\n        if (currentParent.type === 'property') {\n            currentParent.length = endOffset - currentParent.offset;\n            currentParent = currentParent.parent;\n        }\n    }\n    function onValue(valueNode) {\n        currentParent.children.push(valueNode);\n        return valueNode;\n    }\n    const visitor = {\n        onObjectBegin: (offset) => {\n            currentParent = onValue({ type: 'object', offset, length: -1, parent: currentParent, children: [] });\n        },\n        onObjectProperty: (name, offset, length) => {\n            currentParent = onValue({ type: 'property', offset, length: -1, parent: currentParent, children: [] });\n            currentParent.children.push({ type: 'string', value: name, offset, length, parent: currentParent });\n        },\n        onObjectEnd: (offset, length) => {\n            ensurePropertyComplete(offset + length); // in case of a missing value for a property: make sure property is complete\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onArrayBegin: (offset, length) => {\n            currentParent = onValue({ type: 'array', offset, length: -1, parent: currentParent, children: [] });\n        },\n        onArrayEnd: (offset, length) => {\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onLiteralValue: (value, offset, length) => {\n            onValue({ type: getNodeType(value), offset, length, parent: currentParent, value });\n            ensurePropertyComplete(offset + length);\n        },\n        onSeparator: (sep, offset, length) => {\n            if (currentParent.type === 'property') {\n                if (sep === ':') {\n                    currentParent.colonOffset = offset;\n                }\n                else if (sep === ',') {\n                    ensurePropertyComplete(offset);\n                }\n            }\n        },\n        onError: (error, offset, length) => {\n            errors.push({ error, offset, length });\n        }\n    };\n    visit(text, visitor, options);\n    const result = currentParent.children[0];\n    if (result) {\n        delete result.parent;\n    }\n    return result;\n}\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport function findNodeAtLocation(root, path) {\n    if (!root) {\n        return undefined;\n    }\n    let node = root;\n    for (let segment of path) {\n        if (typeof segment === 'string') {\n            if (node.type !== 'object' || !Array.isArray(node.children)) {\n                return undefined;\n            }\n            let found = false;\n            for (const propertyNode of node.children) {\n                if (Array.isArray(propertyNode.children) && propertyNode.children[0].value === segment && propertyNode.children.length === 2) {\n                    node = propertyNode.children[1];\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                return undefined;\n            }\n        }\n        else {\n            const index = segment;\n            if (node.type !== 'array' || index < 0 || !Array.isArray(node.children) || index >= node.children.length) {\n                return undefined;\n            }\n            node = node.children[index];\n        }\n    }\n    return node;\n}\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport function getNodePath(node) {\n    if (!node.parent || !node.parent.children) {\n        return [];\n    }\n    const path = getNodePath(node.parent);\n    if (node.parent.type === 'property') {\n        const key = node.parent.children[0].value;\n        path.push(key);\n    }\n    else if (node.parent.type === 'array') {\n        const index = node.parent.children.indexOf(node);\n        if (index !== -1) {\n            path.push(index);\n        }\n    }\n    return path;\n}\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport function getNodeValue(node) {\n    switch (node.type) {\n        case 'array':\n            return node.children.map(getNodeValue);\n        case 'object':\n            const obj = Object.create(null);\n            for (let prop of node.children) {\n                const valueNode = prop.children[1];\n                if (valueNode) {\n                    obj[prop.children[0].value] = getNodeValue(valueNode);\n                }\n            }\n            return obj;\n        case 'null':\n        case 'string':\n        case 'number':\n        case 'boolean':\n            return node.value;\n        default:\n            return undefined;\n    }\n}\nexport function contains(node, offset, includeRightBound = false) {\n    return (offset >= node.offset && offset < (node.offset + node.length)) || includeRightBound && (offset === (node.offset + node.length));\n}\n/**\n * Finds the most inner node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport function findNodeAtOffset(node, offset, includeRightBound = false) {\n    if (contains(node, offset, includeRightBound)) {\n        const children = node.children;\n        if (Array.isArray(children)) {\n            for (let i = 0; i < children.length && children[i].offset <= offset; i++) {\n                const item = findNodeAtOffset(children[i], offset, includeRightBound);\n                if (item) {\n                    return item;\n                }\n            }\n        }\n        return node;\n    }\n    return undefined;\n}\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport function visit(text, visitor, options = ParseOptions.DEFAULT) {\n    const _scanner = createScanner(text, false);\n    // Important: Only pass copies of this to visitor functions to prevent accidental modification, and\n    // to not affect visitor functions which stored a reference to a previous JSONPath\n    const _jsonPath = [];\n    function toNoArgVisit(visitFunction) {\n        return visitFunction ? () => visitFunction(_scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()) : () => true;\n    }\n    function toNoArgVisitWithPath(visitFunction) {\n        return visitFunction ? () => visitFunction(_scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter(), () => _jsonPath.slice()) : () => true;\n    }\n    function toOneArgVisit(visitFunction) {\n        return visitFunction ? (arg) => visitFunction(arg, _scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()) : () => true;\n    }\n    function toOneArgVisitWithPath(visitFunction) {\n        return visitFunction ? (arg) => visitFunction(arg, _scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter(), () => _jsonPath.slice()) : () => true;\n    }\n    const onObjectBegin = toNoArgVisitWithPath(visitor.onObjectBegin), onObjectProperty = toOneArgVisitWithPath(visitor.onObjectProperty), onObjectEnd = toNoArgVisit(visitor.onObjectEnd), onArrayBegin = toNoArgVisitWithPath(visitor.onArrayBegin), onArrayEnd = toNoArgVisit(visitor.onArrayEnd), onLiteralValue = toOneArgVisitWithPath(visitor.onLiteralValue), onSeparator = toOneArgVisit(visitor.onSeparator), onComment = toNoArgVisit(visitor.onComment), onError = toOneArgVisit(visitor.onError);\n    const disallowComments = options && options.disallowComments;\n    const allowTrailingComma = options && options.allowTrailingComma;\n    function scanNext() {\n        while (true) {\n            const token = _scanner.scan();\n            switch (_scanner.getTokenError()) {\n                case 4 /* ScanError.InvalidUnicode */:\n                    handleError(14 /* ParseErrorCode.InvalidUnicode */);\n                    break;\n                case 5 /* ScanError.InvalidEscapeCharacter */:\n                    handleError(15 /* ParseErrorCode.InvalidEscapeCharacter */);\n                    break;\n                case 3 /* ScanError.UnexpectedEndOfNumber */:\n                    handleError(13 /* ParseErrorCode.UnexpectedEndOfNumber */);\n                    break;\n                case 1 /* ScanError.UnexpectedEndOfComment */:\n                    if (!disallowComments) {\n                        handleError(11 /* ParseErrorCode.UnexpectedEndOfComment */);\n                    }\n                    break;\n                case 2 /* ScanError.UnexpectedEndOfString */:\n                    handleError(12 /* ParseErrorCode.UnexpectedEndOfString */);\n                    break;\n                case 6 /* ScanError.InvalidCharacter */:\n                    handleError(16 /* ParseErrorCode.InvalidCharacter */);\n                    break;\n            }\n            switch (token) {\n                case 12 /* SyntaxKind.LineCommentTrivia */:\n                case 13 /* SyntaxKind.BlockCommentTrivia */:\n                    if (disallowComments) {\n                        handleError(10 /* ParseErrorCode.InvalidCommentToken */);\n                    }\n                    else {\n                        onComment();\n                    }\n                    break;\n                case 16 /* SyntaxKind.Unknown */:\n                    handleError(1 /* ParseErrorCode.InvalidSymbol */);\n                    break;\n                case 15 /* SyntaxKind.Trivia */:\n                case 14 /* SyntaxKind.LineBreakTrivia */:\n                    break;\n                default:\n                    return token;\n            }\n        }\n    }\n    function handleError(error, skipUntilAfter = [], skipUntil = []) {\n        onError(error);\n        if (skipUntilAfter.length + skipUntil.length > 0) {\n            let token = _scanner.getToken();\n            while (token !== 17 /* SyntaxKind.EOF */) {\n                if (skipUntilAfter.indexOf(token) !== -1) {\n                    scanNext();\n                    break;\n                }\n                else if (skipUntil.indexOf(token) !== -1) {\n                    break;\n                }\n                token = scanNext();\n            }\n        }\n    }\n    function parseString(isValue) {\n        const value = _scanner.getTokenValue();\n        if (isValue) {\n            onLiteralValue(value);\n        }\n        else {\n            onObjectProperty(value);\n            // add property name afterwards\n            _jsonPath.push(value);\n        }\n        scanNext();\n        return true;\n    }\n    function parseLiteral() {\n        switch (_scanner.getToken()) {\n            case 11 /* SyntaxKind.NumericLiteral */:\n                const tokenValue = _scanner.getTokenValue();\n                let value = Number(tokenValue);\n                if (isNaN(value)) {\n                    handleError(2 /* ParseErrorCode.InvalidNumberFormat */);\n                    value = 0;\n                }\n                onLiteralValue(value);\n                break;\n            case 7 /* SyntaxKind.NullKeyword */:\n                onLiteralValue(null);\n                break;\n            case 8 /* SyntaxKind.TrueKeyword */:\n                onLiteralValue(true);\n                break;\n            case 9 /* SyntaxKind.FalseKeyword */:\n                onLiteralValue(false);\n                break;\n            default:\n                return false;\n        }\n        scanNext();\n        return true;\n    }\n    function parseProperty() {\n        if (_scanner.getToken() !== 10 /* SyntaxKind.StringLiteral */) {\n            handleError(3 /* ParseErrorCode.PropertyNameExpected */, [], [2 /* SyntaxKind.CloseBraceToken */, 5 /* SyntaxKind.CommaToken */]);\n            return false;\n        }\n        parseString(false);\n        if (_scanner.getToken() === 6 /* SyntaxKind.ColonToken */) {\n            onSeparator(':');\n            scanNext(); // consume colon\n            if (!parseValue()) {\n                handleError(4 /* ParseErrorCode.ValueExpected */, [], [2 /* SyntaxKind.CloseBraceToken */, 5 /* SyntaxKind.CommaToken */]);\n            }\n        }\n        else {\n            handleError(5 /* ParseErrorCode.ColonExpected */, [], [2 /* SyntaxKind.CloseBraceToken */, 5 /* SyntaxKind.CommaToken */]);\n        }\n        _jsonPath.pop(); // remove processed property name\n        return true;\n    }\n    function parseObject() {\n        onObjectBegin();\n        scanNext(); // consume open brace\n        let needsComma = false;\n        while (_scanner.getToken() !== 2 /* SyntaxKind.CloseBraceToken */ && _scanner.getToken() !== 17 /* SyntaxKind.EOF */) {\n            if (_scanner.getToken() === 5 /* SyntaxKind.CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ParseErrorCode.ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 2 /* SyntaxKind.CloseBraceToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* ParseErrorCode.CommaExpected */, [], []);\n            }\n            if (!parseProperty()) {\n                handleError(4 /* ParseErrorCode.ValueExpected */, [], [2 /* SyntaxKind.CloseBraceToken */, 5 /* SyntaxKind.CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onObjectEnd();\n        if (_scanner.getToken() !== 2 /* SyntaxKind.CloseBraceToken */) {\n            handleError(7 /* ParseErrorCode.CloseBraceExpected */, [2 /* SyntaxKind.CloseBraceToken */], []);\n        }\n        else {\n            scanNext(); // consume close brace\n        }\n        return true;\n    }\n    function parseArray() {\n        onArrayBegin();\n        scanNext(); // consume open bracket\n        let isFirstElement = true;\n        let needsComma = false;\n        while (_scanner.getToken() !== 4 /* SyntaxKind.CloseBracketToken */ && _scanner.getToken() !== 17 /* SyntaxKind.EOF */) {\n            if (_scanner.getToken() === 5 /* SyntaxKind.CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ParseErrorCode.ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 4 /* SyntaxKind.CloseBracketToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* ParseErrorCode.CommaExpected */, [], []);\n            }\n            if (isFirstElement) {\n                _jsonPath.push(0);\n                isFirstElement = false;\n            }\n            else {\n                _jsonPath[_jsonPath.length - 1]++;\n            }\n            if (!parseValue()) {\n                handleError(4 /* ParseErrorCode.ValueExpected */, [], [4 /* SyntaxKind.CloseBracketToken */, 5 /* SyntaxKind.CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onArrayEnd();\n        if (!isFirstElement) {\n            _jsonPath.pop(); // remove array index\n        }\n        if (_scanner.getToken() !== 4 /* SyntaxKind.CloseBracketToken */) {\n            handleError(8 /* ParseErrorCode.CloseBracketExpected */, [4 /* SyntaxKind.CloseBracketToken */], []);\n        }\n        else {\n            scanNext(); // consume close bracket\n        }\n        return true;\n    }\n    function parseValue() {\n        switch (_scanner.getToken()) {\n            case 3 /* SyntaxKind.OpenBracketToken */:\n                return parseArray();\n            case 1 /* SyntaxKind.OpenBraceToken */:\n                return parseObject();\n            case 10 /* SyntaxKind.StringLiteral */:\n                return parseString(true);\n            default:\n                return parseLiteral();\n        }\n    }\n    scanNext();\n    if (_scanner.getToken() === 17 /* SyntaxKind.EOF */) {\n        if (options.allowEmptyContent) {\n            return true;\n        }\n        handleError(4 /* ParseErrorCode.ValueExpected */, [], []);\n        return false;\n    }\n    if (!parseValue()) {\n        handleError(4 /* ParseErrorCode.ValueExpected */, [], []);\n        return false;\n    }\n    if (_scanner.getToken() !== 17 /* SyntaxKind.EOF */) {\n        handleError(9 /* ParseErrorCode.EndOfFileExpected */, [], []);\n    }\n    return true;\n}\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport function stripComments(text, replaceCh) {\n    let _scanner = createScanner(text), parts = [], kind, offset = 0, pos;\n    do {\n        pos = _scanner.getPosition();\n        kind = _scanner.scan();\n        switch (kind) {\n            case 12 /* SyntaxKind.LineCommentTrivia */:\n            case 13 /* SyntaxKind.BlockCommentTrivia */:\n            case 17 /* SyntaxKind.EOF */:\n                if (offset !== pos) {\n                    parts.push(text.substring(offset, pos));\n                }\n                if (replaceCh !== undefined) {\n                    parts.push(_scanner.getTokenValue().replace(/[^\\r\\n]/g, replaceCh));\n                }\n                offset = _scanner.getPosition();\n                break;\n        }\n    } while (kind !== 17 /* SyntaxKind.EOF */);\n    return parts.join('');\n}\nexport function getNodeType(value) {\n    switch (typeof value) {\n        case 'boolean': return 'boolean';\n        case 'number': return 'number';\n        case 'string': return 'string';\n        case 'object': {\n            if (!value) {\n                return 'null';\n            }\n            else if (Array.isArray(value)) {\n                return 'array';\n            }\n            return 'object';\n        }\n        default: return 'null';\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner';\nexport function format(documentText, range, options) {\n    let initialIndentLevel;\n    let formatText;\n    let formatTextStart;\n    let rangeStart;\n    let rangeEnd;\n    if (range) {\n        rangeStart = range.offset;\n        rangeEnd = rangeStart + range.length;\n        formatTextStart = rangeStart;\n        while (formatTextStart > 0 && !isEOL(documentText, formatTextStart - 1)) {\n            formatTextStart--;\n        }\n        let endOffset = rangeEnd;\n        while (endOffset < documentText.length && !isEOL(documentText, endOffset)) {\n            endOffset++;\n        }\n        formatText = documentText.substring(formatTextStart, endOffset);\n        initialIndentLevel = computeIndentLevel(formatText, options);\n    }\n    else {\n        formatText = documentText;\n        initialIndentLevel = 0;\n        formatTextStart = 0;\n        rangeStart = 0;\n        rangeEnd = documentText.length;\n    }\n    const eol = getEOL(options, documentText);\n    let numberLineBreaks = 0;\n    let indentLevel = 0;\n    let indentValue;\n    if (options.insertSpaces) {\n        indentValue = repeat(' ', options.tabSize || 4);\n    }\n    else {\n        indentValue = '\\t';\n    }\n    let scanner = createScanner(formatText, false);\n    let hasError = false;\n    function newLinesAndIndent() {\n        if (numberLineBreaks > 1) {\n            return repeat(eol, numberLineBreaks) + repeat(indentValue, initialIndentLevel + indentLevel);\n        }\n        else {\n            return eol + repeat(indentValue, initialIndentLevel + indentLevel);\n        }\n    }\n    function scanNext() {\n        let token = scanner.scan();\n        numberLineBreaks = 0;\n        while (token === 15 /* SyntaxKind.Trivia */ || token === 14 /* SyntaxKind.LineBreakTrivia */) {\n            if (token === 14 /* SyntaxKind.LineBreakTrivia */ && options.keepLines) {\n                numberLineBreaks += 1;\n            }\n            else if (token === 14 /* SyntaxKind.LineBreakTrivia */) {\n                numberLineBreaks = 1;\n            }\n            token = scanner.scan();\n        }\n        hasError = token === 16 /* SyntaxKind.Unknown */ || scanner.getTokenError() !== 0 /* ScanError.None */;\n        return token;\n    }\n    const editOperations = [];\n    function addEdit(text, startOffset, endOffset) {\n        if (!hasError && (!range || (startOffset < rangeEnd && endOffset > rangeStart)) && documentText.substring(startOffset, endOffset) !== text) {\n            editOperations.push({ offset: startOffset, length: endOffset - startOffset, content: text });\n        }\n    }\n    let firstToken = scanNext();\n    if (options.keepLines && numberLineBreaks > 0) {\n        addEdit(repeat(eol, numberLineBreaks), 0, 0);\n    }\n    if (firstToken !== 17 /* SyntaxKind.EOF */) {\n        let firstTokenStart = scanner.getTokenOffset() + formatTextStart;\n        let initialIndent = repeat(indentValue, initialIndentLevel);\n        addEdit(initialIndent, formatTextStart, firstTokenStart);\n    }\n    while (firstToken !== 17 /* SyntaxKind.EOF */) {\n        let firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n        let secondToken = scanNext();\n        let replaceContent = '';\n        let needsLineBreak = false;\n        while (numberLineBreaks === 0 && (secondToken === 12 /* SyntaxKind.LineCommentTrivia */ || secondToken === 13 /* SyntaxKind.BlockCommentTrivia */)) {\n            let commentTokenStart = scanner.getTokenOffset() + formatTextStart;\n            addEdit(' ', firstTokenEnd, commentTokenStart);\n            firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n            needsLineBreak = secondToken === 12 /* SyntaxKind.LineCommentTrivia */;\n            replaceContent = needsLineBreak ? newLinesAndIndent() : '';\n            secondToken = scanNext();\n        }\n        if (secondToken === 2 /* SyntaxKind.CloseBraceToken */) {\n            if (firstToken !== 1 /* SyntaxKind.OpenBraceToken */) {\n                indentLevel--;\n            }\n            ;\n            if (options.keepLines && numberLineBreaks > 0 || !options.keepLines && firstToken !== 1 /* SyntaxKind.OpenBraceToken */) {\n                replaceContent = newLinesAndIndent();\n            }\n            else if (options.keepLines) {\n                replaceContent = ' ';\n            }\n        }\n        else if (secondToken === 4 /* SyntaxKind.CloseBracketToken */) {\n            if (firstToken !== 3 /* SyntaxKind.OpenBracketToken */) {\n                indentLevel--;\n            }\n            ;\n            if (options.keepLines && numberLineBreaks > 0 || !options.keepLines && firstToken !== 3 /* SyntaxKind.OpenBracketToken */) {\n                replaceContent = newLinesAndIndent();\n            }\n            else if (options.keepLines) {\n                replaceContent = ' ';\n            }\n        }\n        else {\n            switch (firstToken) {\n                case 3 /* SyntaxKind.OpenBracketToken */:\n                case 1 /* SyntaxKind.OpenBraceToken */:\n                    indentLevel++;\n                    if (options.keepLines && numberLineBreaks > 0 || !options.keepLines) {\n                        replaceContent = newLinesAndIndent();\n                    }\n                    else {\n                        replaceContent = ' ';\n                    }\n                    break;\n                case 5 /* SyntaxKind.CommaToken */:\n                    if (options.keepLines && numberLineBreaks > 0 || !options.keepLines) {\n                        replaceContent = newLinesAndIndent();\n                    }\n                    else {\n                        replaceContent = ' ';\n                    }\n                    break;\n                case 12 /* SyntaxKind.LineCommentTrivia */:\n                    replaceContent = newLinesAndIndent();\n                    break;\n                case 13 /* SyntaxKind.BlockCommentTrivia */:\n                    if (numberLineBreaks > 0) {\n                        replaceContent = newLinesAndIndent();\n                    }\n                    else if (!needsLineBreak) {\n                        replaceContent = ' ';\n                    }\n                    break;\n                case 6 /* SyntaxKind.ColonToken */:\n                    if (options.keepLines && numberLineBreaks > 0) {\n                        replaceContent = newLinesAndIndent();\n                    }\n                    else if (!needsLineBreak) {\n                        replaceContent = ' ';\n                    }\n                    break;\n                case 10 /* SyntaxKind.StringLiteral */:\n                    if (options.keepLines && numberLineBreaks > 0) {\n                        replaceContent = newLinesAndIndent();\n                    }\n                    else if (secondToken === 6 /* SyntaxKind.ColonToken */ && !needsLineBreak) {\n                        replaceContent = '';\n                    }\n                    break;\n                case 7 /* SyntaxKind.NullKeyword */:\n                case 8 /* SyntaxKind.TrueKeyword */:\n                case 9 /* SyntaxKind.FalseKeyword */:\n                case 11 /* SyntaxKind.NumericLiteral */:\n                case 2 /* SyntaxKind.CloseBraceToken */:\n                case 4 /* SyntaxKind.CloseBracketToken */:\n                    if (options.keepLines && numberLineBreaks > 0) {\n                        replaceContent = newLinesAndIndent();\n                    }\n                    else {\n                        if ((secondToken === 12 /* SyntaxKind.LineCommentTrivia */ || secondToken === 13 /* SyntaxKind.BlockCommentTrivia */) && !needsLineBreak) {\n                            replaceContent = ' ';\n                        }\n                        else if (secondToken !== 5 /* SyntaxKind.CommaToken */ && secondToken !== 17 /* SyntaxKind.EOF */) {\n                            hasError = true;\n                        }\n                    }\n                    break;\n                case 16 /* SyntaxKind.Unknown */:\n                    hasError = true;\n                    break;\n            }\n            if (numberLineBreaks > 0 && (secondToken === 12 /* SyntaxKind.LineCommentTrivia */ || secondToken === 13 /* SyntaxKind.BlockCommentTrivia */)) {\n                replaceContent = newLinesAndIndent();\n            }\n        }\n        if (secondToken === 17 /* SyntaxKind.EOF */) {\n            if (options.keepLines && numberLineBreaks > 0) {\n                replaceContent = newLinesAndIndent();\n            }\n            else {\n                replaceContent = options.insertFinalNewline ? eol : '';\n            }\n        }\n        const secondTokenStart = scanner.getTokenOffset() + formatTextStart;\n        addEdit(replaceContent, firstTokenEnd, secondTokenStart);\n        firstToken = secondToken;\n    }\n    return editOperations;\n}\nfunction repeat(s, count) {\n    let result = '';\n    for (let i = 0; i < count; i++) {\n        result += s;\n    }\n    return result;\n}\nfunction computeIndentLevel(content, options) {\n    let i = 0;\n    let nChars = 0;\n    const tabSize = options.tabSize || 4;\n    while (i < content.length) {\n        let ch = content.charAt(i);\n        if (ch === ' ') {\n            nChars++;\n        }\n        else if (ch === '\\t') {\n            nChars += tabSize;\n        }\n        else {\n            break;\n        }\n        i++;\n    }\n    return Math.floor(nChars / tabSize);\n}\nfunction getEOL(options, text) {\n    for (let i = 0; i < text.length; i++) {\n        const ch = text.charAt(i);\n        if (ch === '\\r') {\n            if (i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                return '\\r\\n';\n            }\n            return '\\r';\n        }\n        else if (ch === '\\n') {\n            return '\\n';\n        }\n    }\n    return (options && options.eol) || '\\n';\n}\nexport function isEOL(text, offset) {\n    return '\\r\\n'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { format, isEOL } from './format';\nimport { parseTree, findNodeAtLocation } from './parser';\nexport function removeProperty(text, path, options) {\n    return setProperty(text, path, void 0, options);\n}\nexport function setProperty(text, originalPath, value, options) {\n    const path = originalPath.slice();\n    const errors = [];\n    const root = parseTree(text, errors);\n    let parent = void 0;\n    let lastSegment = void 0;\n    while (path.length > 0) {\n        lastSegment = path.pop();\n        parent = findNodeAtLocation(root, path);\n        if (parent === void 0 && value !== void 0) {\n            if (typeof lastSegment === 'string') {\n                value = { [lastSegment]: value };\n            }\n            else {\n                value = [value];\n            }\n        }\n        else {\n            break;\n        }\n    }\n    if (!parent) {\n        // empty document\n        if (value === void 0) { // delete\n            throw new Error('Can not delete in empty document');\n        }\n        return withFormatting(text, { offset: root ? root.offset : 0, length: root ? root.length : 0, content: JSON.stringify(value) }, options);\n    }\n    else if (parent.type === 'object' && typeof lastSegment === 'string' && Array.isArray(parent.children)) {\n        const existing = findNodeAtLocation(parent, [lastSegment]);\n        if (existing !== void 0) {\n            if (value === void 0) { // delete\n                if (!existing.parent) {\n                    throw new Error('Malformed AST');\n                }\n                const propertyIndex = parent.children.indexOf(existing.parent);\n                let removeBegin;\n                let removeEnd = existing.parent.offset + existing.parent.length;\n                if (propertyIndex > 0) {\n                    // remove the comma of the previous node\n                    let previous = parent.children[propertyIndex - 1];\n                    removeBegin = previous.offset + previous.length;\n                }\n                else {\n                    removeBegin = parent.offset + 1;\n                    if (parent.children.length > 1) {\n                        // remove the comma of the next node\n                        let next = parent.children[1];\n                        removeEnd = next.offset;\n                    }\n                }\n                return withFormatting(text, { offset: removeBegin, length: removeEnd - removeBegin, content: '' }, options);\n            }\n            else {\n                // set value of existing property\n                return withFormatting(text, { offset: existing.offset, length: existing.length, content: JSON.stringify(value) }, options);\n            }\n        }\n        else {\n            if (value === void 0) { // delete\n                return []; // property does not exist, nothing to do\n            }\n            const newProperty = `${JSON.stringify(lastSegment)}: ${JSON.stringify(value)}`;\n            const index = options.getInsertionIndex ? options.getInsertionIndex(parent.children.map(p => p.children[0].value)) : parent.children.length;\n            let edit;\n            if (index > 0) {\n                let previous = parent.children[index - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            else if (parent.children.length === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty };\n            }\n            else {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty + ',' };\n            }\n            return withFormatting(text, edit, options);\n        }\n    }\n    else if (parent.type === 'array' && typeof lastSegment === 'number' && Array.isArray(parent.children)) {\n        const insertIndex = lastSegment;\n        if (insertIndex === -1) {\n            // Insert\n            const newProperty = `${JSON.stringify(value)}`;\n            let edit;\n            if (parent.children.length === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty };\n            }\n            else {\n                const previous = parent.children[parent.children.length - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            return withFormatting(text, edit, options);\n        }\n        else if (value === void 0 && parent.children.length >= 0) {\n            // Removal\n            const removalIndex = lastSegment;\n            const toRemove = parent.children[removalIndex];\n            let edit;\n            if (parent.children.length === 1) {\n                // only item\n                edit = { offset: parent.offset + 1, length: parent.length - 2, content: '' };\n            }\n            else if (parent.children.length - 1 === removalIndex) {\n                // last item\n                let previous = parent.children[removalIndex - 1];\n                let offset = previous.offset + previous.length;\n                let parentEndOffset = parent.offset + parent.length;\n                edit = { offset, length: parentEndOffset - 2 - offset, content: '' };\n            }\n            else {\n                edit = { offset: toRemove.offset, length: parent.children[removalIndex + 1].offset - toRemove.offset, content: '' };\n            }\n            return withFormatting(text, edit, options);\n        }\n        else if (value !== void 0) {\n            let edit;\n            const newProperty = `${JSON.stringify(value)}`;\n            if (!options.isArrayInsertion && parent.children.length > lastSegment) {\n                const toModify = parent.children[lastSegment];\n                edit = { offset: toModify.offset, length: toModify.length, content: newProperty };\n            }\n            else if (parent.children.length === 0 || lastSegment === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: parent.children.length === 0 ? newProperty : newProperty + ',' };\n            }\n            else {\n                const index = lastSegment > parent.children.length ? parent.children.length : lastSegment;\n                const previous = parent.children[index - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            return withFormatting(text, edit, options);\n        }\n        else {\n            throw new Error(`Can not ${value === void 0 ? 'remove' : (options.isArrayInsertion ? 'insert' : 'modify')} Array index ${insertIndex} as length is not sufficient`);\n        }\n    }\n    else {\n        throw new Error(`Can not add ${typeof lastSegment !== 'number' ? 'index' : 'property'} to parent of type ${parent.type}`);\n    }\n}\nfunction withFormatting(text, edit, options) {\n    if (!options.formattingOptions) {\n        return [edit];\n    }\n    // apply the edit\n    let newText = applyEdit(text, edit);\n    // format the new text\n    let begin = edit.offset;\n    let end = edit.offset + edit.content.length;\n    if (edit.length === 0 || edit.content.length === 0) { // insert or remove\n        while (begin > 0 && !isEOL(newText, begin - 1)) {\n            begin--;\n        }\n        while (end < newText.length && !isEOL(newText, end)) {\n            end++;\n        }\n    }\n    const edits = format(newText, { offset: begin, length: end - begin }, { ...options.formattingOptions, keepLines: false });\n    // apply the formatting edits and track the begin and end offsets of the changes\n    for (let i = edits.length - 1; i >= 0; i--) {\n        const edit = edits[i];\n        newText = applyEdit(newText, edit);\n        begin = Math.min(begin, edit.offset);\n        end = Math.max(end, edit.offset + edit.length);\n        end += edit.content.length - edit.length;\n    }\n    // create a single edit with all changes\n    const editLength = text.length - (newText.length - end) - begin;\n    return [{ offset: begin, length: editLength, content: newText.substring(begin, end) }];\n}\nexport function applyEdit(text, edit) {\n    return text.substring(0, edit.offset) + edit.content + text.substring(edit.offset + edit.length);\n}\nexport function isWS(text, offset) {\n    return '\\r\\n \\t'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as formatter from './impl/format';\nimport * as edit from './impl/edit';\nimport * as scanner from './impl/scanner';\nimport * as parser from './impl/parser';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport const createScanner = scanner.createScanner;\nexport var ScanError;\n(function (ScanError) {\n    ScanError[ScanError[\"None\"] = 0] = \"None\";\n    ScanError[ScanError[\"UnexpectedEndOfComment\"] = 1] = \"UnexpectedEndOfComment\";\n    ScanError[ScanError[\"UnexpectedEndOfString\"] = 2] = \"UnexpectedEndOfString\";\n    ScanError[ScanError[\"UnexpectedEndOfNumber\"] = 3] = \"UnexpectedEndOfNumber\";\n    ScanError[ScanError[\"InvalidUnicode\"] = 4] = \"InvalidUnicode\";\n    ScanError[ScanError[\"InvalidEscapeCharacter\"] = 5] = \"InvalidEscapeCharacter\";\n    ScanError[ScanError[\"InvalidCharacter\"] = 6] = \"InvalidCharacter\";\n})(ScanError || (ScanError = {}));\nexport var SyntaxKind;\n(function (SyntaxKind) {\n    SyntaxKind[SyntaxKind[\"OpenBraceToken\"] = 1] = \"OpenBraceToken\";\n    SyntaxKind[SyntaxKind[\"CloseBraceToken\"] = 2] = \"CloseBraceToken\";\n    SyntaxKind[SyntaxKind[\"OpenBracketToken\"] = 3] = \"OpenBracketToken\";\n    SyntaxKind[SyntaxKind[\"CloseBracketToken\"] = 4] = \"CloseBracketToken\";\n    SyntaxKind[SyntaxKind[\"CommaToken\"] = 5] = \"CommaToken\";\n    SyntaxKind[SyntaxKind[\"ColonToken\"] = 6] = \"ColonToken\";\n    SyntaxKind[SyntaxKind[\"NullKeyword\"] = 7] = \"NullKeyword\";\n    SyntaxKind[SyntaxKind[\"TrueKeyword\"] = 8] = \"TrueKeyword\";\n    SyntaxKind[SyntaxKind[\"FalseKeyword\"] = 9] = \"FalseKeyword\";\n    SyntaxKind[SyntaxKind[\"StringLiteral\"] = 10] = \"StringLiteral\";\n    SyntaxKind[SyntaxKind[\"NumericLiteral\"] = 11] = \"NumericLiteral\";\n    SyntaxKind[SyntaxKind[\"LineCommentTrivia\"] = 12] = \"LineCommentTrivia\";\n    SyntaxKind[SyntaxKind[\"BlockCommentTrivia\"] = 13] = \"BlockCommentTrivia\";\n    SyntaxKind[SyntaxKind[\"LineBreakTrivia\"] = 14] = \"LineBreakTrivia\";\n    SyntaxKind[SyntaxKind[\"Trivia\"] = 15] = \"Trivia\";\n    SyntaxKind[SyntaxKind[\"Unknown\"] = 16] = \"Unknown\";\n    SyntaxKind[SyntaxKind[\"EOF\"] = 17] = \"EOF\";\n})(SyntaxKind || (SyntaxKind = {}));\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport const getLocation = parser.getLocation;\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore, always check the errors list to find out if the input was valid.\n */\nexport const parse = parser.parse;\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport const parseTree = parser.parseTree;\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport const findNodeAtLocation = parser.findNodeAtLocation;\n/**\n * Finds the innermost node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport const findNodeAtOffset = parser.findNodeAtOffset;\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport const getNodePath = parser.getNodePath;\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport const getNodeValue = parser.getNodeValue;\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport const visit = parser.visit;\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport const stripComments = parser.stripComments;\nexport var ParseErrorCode;\n(function (ParseErrorCode) {\n    ParseErrorCode[ParseErrorCode[\"InvalidSymbol\"] = 1] = \"InvalidSymbol\";\n    ParseErrorCode[ParseErrorCode[\"InvalidNumberFormat\"] = 2] = \"InvalidNumberFormat\";\n    ParseErrorCode[ParseErrorCode[\"PropertyNameExpected\"] = 3] = \"PropertyNameExpected\";\n    ParseErrorCode[ParseErrorCode[\"ValueExpected\"] = 4] = \"ValueExpected\";\n    ParseErrorCode[ParseErrorCode[\"ColonExpected\"] = 5] = \"ColonExpected\";\n    ParseErrorCode[ParseErrorCode[\"CommaExpected\"] = 6] = \"CommaExpected\";\n    ParseErrorCode[ParseErrorCode[\"CloseBraceExpected\"] = 7] = \"CloseBraceExpected\";\n    ParseErrorCode[ParseErrorCode[\"CloseBracketExpected\"] = 8] = \"CloseBracketExpected\";\n    ParseErrorCode[ParseErrorCode[\"EndOfFileExpected\"] = 9] = \"EndOfFileExpected\";\n    ParseErrorCode[ParseErrorCode[\"InvalidCommentToken\"] = 10] = \"InvalidCommentToken\";\n    ParseErrorCode[ParseErrorCode[\"UnexpectedEndOfComment\"] = 11] = \"UnexpectedEndOfComment\";\n    ParseErrorCode[ParseErrorCode[\"UnexpectedEndOfString\"] = 12] = \"UnexpectedEndOfString\";\n    ParseErrorCode[ParseErrorCode[\"UnexpectedEndOfNumber\"] = 13] = \"UnexpectedEndOfNumber\";\n    ParseErrorCode[ParseErrorCode[\"InvalidUnicode\"] = 14] = \"InvalidUnicode\";\n    ParseErrorCode[ParseErrorCode[\"InvalidEscapeCharacter\"] = 15] = \"InvalidEscapeCharacter\";\n    ParseErrorCode[ParseErrorCode[\"InvalidCharacter\"] = 16] = \"InvalidCharacter\";\n})(ParseErrorCode || (ParseErrorCode = {}));\nexport function printParseErrorCode(code) {\n    switch (code) {\n        case 1 /* ParseErrorCode.InvalidSymbol */: return 'InvalidSymbol';\n        case 2 /* ParseErrorCode.InvalidNumberFormat */: return 'InvalidNumberFormat';\n        case 3 /* ParseErrorCode.PropertyNameExpected */: return 'PropertyNameExpected';\n        case 4 /* ParseErrorCode.ValueExpected */: return 'ValueExpected';\n        case 5 /* ParseErrorCode.ColonExpected */: return 'ColonExpected';\n        case 6 /* ParseErrorCode.CommaExpected */: return 'CommaExpected';\n        case 7 /* ParseErrorCode.CloseBraceExpected */: return 'CloseBraceExpected';\n        case 8 /* ParseErrorCode.CloseBracketExpected */: return 'CloseBracketExpected';\n        case 9 /* ParseErrorCode.EndOfFileExpected */: return 'EndOfFileExpected';\n        case 10 /* ParseErrorCode.InvalidCommentToken */: return 'InvalidCommentToken';\n        case 11 /* ParseErrorCode.UnexpectedEndOfComment */: return 'UnexpectedEndOfComment';\n        case 12 /* ParseErrorCode.UnexpectedEndOfString */: return 'UnexpectedEndOfString';\n        case 13 /* ParseErrorCode.UnexpectedEndOfNumber */: return 'UnexpectedEndOfNumber';\n        case 14 /* ParseErrorCode.InvalidUnicode */: return 'InvalidUnicode';\n        case 15 /* ParseErrorCode.InvalidEscapeCharacter */: return 'InvalidEscapeCharacter';\n        case 16 /* ParseErrorCode.InvalidCharacter */: return 'InvalidCharacter';\n    }\n    return '<unknown ParseErrorCode>';\n}\n/**\n * Computes the edit operations needed to format a JSON document.\n *\n * @param documentText The input text\n * @param range The range to format or `undefined` to format the full content\n * @param options The formatting options\n * @returns The edit operations describing the formatting changes to the original document following the format described in {@linkcode EditResult}.\n * To apply the edit operations to the input, use {@linkcode applyEdits}.\n */\nexport function format(documentText, range, options) {\n    return formatter.format(documentText, range, options);\n}\n/**\n * Computes the edit operations needed to modify a value in the JSON document.\n *\n * @param documentText The input text\n * @param path The path of the value to change. The path represents either to the document root, a property or an array item.\n * If the path points to an non-existing property or item, it will be created.\n * @param value The new value for the specified property or item. If the value is undefined,\n * the property or item will be removed.\n * @param options Options\n * @returns The edit operations describing the changes to the original document, following the format described in {@linkcode EditResult}.\n * To apply the edit operations to the input, use {@linkcode applyEdits}.\n */\nexport function modify(text, path, value, options) {\n    return edit.setProperty(text, path, value, options);\n}\n/**\n * Applies edits to an input string.\n * @param text The input text\n * @param edits Edit operations following the format described in {@linkcode EditResult}.\n * @returns The text with the applied edits.\n * @throws An error if the edit operations are not well-formed as described in {@linkcode EditResult}.\n */\nexport function applyEdits(text, edits) {\n    let sortedEdits = edits.slice(0).sort((a, b) => {\n        const diff = a.offset - b.offset;\n        if (diff === 0) {\n            return a.length - b.length;\n        }\n        return diff;\n    });\n    let lastModifiedOffset = text.length;\n    for (let i = sortedEdits.length - 1; i >= 0; i--) {\n        let e = sortedEdits[i];\n        if (e.offset + e.length <= lastModifiedOffset) {\n            text = edit.applyEdit(text, e);\n        }\n        else {\n            throw new Error('Overlapping edit');\n        }\n        lastModifiedOffset = e.offset;\n    }\n    return text;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { LanguageDescription } from '../configuration/languageDescription';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as typeConverters from '../typeConverters';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { Disposable } from '../utils/dispose';\nimport { Condition, conditionalRegistration } from './util/dependentRegistration';\n\nclass TagClosing extends Disposable {\n\n\tprivate _disposed = false;\n\tprivate _timeout: NodeJS.Timeout | undefined = undefined;\n\tprivate _cancel: vscode.CancellationTokenSource | undefined = undefined;\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) {\n\t\tsuper();\n\t\tvscode.workspace.onDidChangeTextDocument(\n\t\t\tevent => this.onDidChangeTextDocument(event),\n\t\t\tnull,\n\t\t\tthis._disposables);\n\t}\n\n\tpublic override dispose() {\n\t\tsuper.dispose();\n\t\tthis._disposed = true;\n\n\t\tif (this._timeout) {\n\t\t\tclearTimeout(this._timeout);\n\t\t\tthis._timeout = undefined;\n\t\t}\n\n\t\tif (this._cancel) {\n\t\t\tthis._cancel.cancel();\n\t\t\tthis._cancel.dispose();\n\t\t\tthis._cancel = undefined;\n\t\t}\n\t}\n\n\tprivate onDidChangeTextDocument(\n\t\t{ document, contentChanges, reason }: vscode.TextDocumentChangeEvent\n\t) {\n\t\tif (contentChanges.length === 0 || reason === vscode.TextDocumentChangeReason.Undo || reason === vscode.TextDocumentChangeReason.Redo) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst activeDocument = vscode.window.activeTextEditor?.document;\n\t\tif (document !== activeDocument) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst filepath = this.client.toOpenTsFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof this._timeout !== 'undefined') {\n\t\t\tclearTimeout(this._timeout);\n\t\t}\n\n\t\tif (this._cancel) {\n\t\t\tthis._cancel.cancel();\n\t\t\tthis._cancel.dispose();\n\t\t\tthis._cancel = undefined;\n\t\t}\n\n\t\tconst lastChange = contentChanges[contentChanges.length - 1];\n\t\tconst lastCharacter = lastChange.text[lastChange.text.length - 1];\n\t\tif (lastChange.rangeLength > 0 || lastCharacter !== '>' && lastCharacter !== '/') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst priorCharacter = lastChange.range.start.character > 0\n\t\t\t? document.getText(new vscode.Range(lastChange.range.start.translate({ characterDelta: -1 }), lastChange.range.start))\n\t\t\t: '';\n\t\tif (priorCharacter === '>') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst version = document.version;\n\t\tthis._timeout = setTimeout(async () => {\n\t\t\tthis._timeout = undefined;\n\n\t\t\tif (this._disposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst addedLines = lastChange.text.split(/\\r\\n|\\n/g);\n\t\t\tconst position = addedLines.length <= 1\n\t\t\t\t? lastChange.range.start.translate({ characterDelta: lastChange.text.length })\n\t\t\t\t: new vscode.Position(lastChange.range.start.line + addedLines.length - 1, addedLines[addedLines.length - 1].length);\n\n\t\t\tconst args: Proto.JsxClosingTagRequestArgs = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\t\tthis._cancel = new vscode.CancellationTokenSource();\n\t\t\tconst response = await this.client.execute('jsxClosingTag', args, this._cancel.token);\n\t\t\tif (response.type !== 'response' || !response.body) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._disposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst activeEditor = vscode.window.activeTextEditor;\n\t\t\tif (!activeEditor) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst insertion = response.body;\n\t\t\tconst activeDocument = activeEditor.document;\n\t\t\tif (document === activeDocument && activeDocument.version === version) {\n\t\t\t\tactiveEditor.insertSnippet(\n\t\t\t\t\tthis.getTagSnippet(insertion),\n\t\t\t\t\tthis.getInsertionPositions(activeEditor, position));\n\t\t\t}\n\t\t}, 100);\n\t}\n\n\tprivate getTagSnippet(closingTag: Proto.TextInsertion): vscode.SnippetString {\n\t\tconst snippet = new vscode.SnippetString();\n\t\tsnippet.appendPlaceholder('', 0);\n\t\tsnippet.appendText(closingTag.newText);\n\t\treturn snippet;\n\t}\n\n\tprivate getInsertionPositions(editor: vscode.TextEditor, position: vscode.Position) {\n\t\tconst activeSelectionPositions = editor.selections.map(s => s.active);\n\t\treturn activeSelectionPositions.some(p => p.isEqual(position))\n\t\t\t? activeSelectionPositions\n\t\t\t: position;\n\t}\n}\n\nfunction requireActiveDocumentSetting(\n\tselector: vscode.DocumentSelector,\n\tlanguage: LanguageDescription,\n) {\n\treturn new Condition(\n\t\t() => {\n\t\t\tconst editor = vscode.window.activeTextEditor;\n\t\t\tif (!editor || !vscode.languages.match(selector, editor.document)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn !!vscode.workspace.getConfiguration(language.id, editor.document).get('autoClosingTags');\n\t\t},\n\t\thandler => {\n\t\t\treturn vscode.Disposable.from(\n\t\t\t\tvscode.window.onDidChangeActiveTextEditor(handler),\n\t\t\t\tvscode.workspace.onDidOpenTextDocument(handler),\n\t\t\t\tvscode.workspace.onDidChangeConfiguration(handler));\n\t\t});\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tlanguage: LanguageDescription,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireActiveDocumentSetting(selector.syntax, language)\n\t], () => new TagClosing(client));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../../configuration/documentSelector';\nimport { LanguageDescription } from '../../configuration/languageDescription';\nimport { CachedResponse } from '../../tsServer/cachedResponse';\nimport type * as Proto from '../../tsServer/protocol/protocol';\nimport * as PConst from '../../tsServer/protocol/protocol.const';\nimport * as typeConverters from '../../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../../typescriptService';\nimport { conditionalRegistration, requireGlobalConfiguration, requireSomeCapability } from '../util/dependentRegistration';\nimport { ReferencesCodeLens, TypeScriptBaseCodeLensProvider, getSymbolRange } from './baseCodeLensProvider';\nimport { ExecutionTarget } from '../../tsServer/server';\n\n\nexport default class TypeScriptImplementationsCodeLensProvider extends TypeScriptBaseCodeLensProvider {\n\tpublic constructor(\n\t\tclient: ITypeScriptServiceClient,\n\t\tprotected _cachedResponse: CachedResponse<Proto.NavTreeResponse>,\n\t\tprivate readonly language: LanguageDescription\n\t) {\n\t\tsuper(client, _cachedResponse);\n\t\tthis._register(\n\t\t\tvscode.workspace.onDidChangeConfiguration(evt => {\n\t\t\t\tif (evt.affectsConfiguration(`${language.id}.implementationsCodeLens.showOnInterfaceMethods`)) {\n\t\t\t\t\tthis.changeEmitter.fire();\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic async resolveCodeLens(\n\t\tcodeLens: ReferencesCodeLens,\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<vscode.CodeLens> {\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(codeLens.file, codeLens.range.start);\n\t\tconst response = await this.client.execute('implementation', args, token, {\n\t\t\tlowPriority: true,\n\t\t\texecutionTarget: ExecutionTarget.Semantic,\n\t\t\tcancelOnResourceChange: codeLens.document,\n\t\t});\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\tcodeLens.command = response.type === 'cancelled'\n\t\t\t\t? TypeScriptBaseCodeLensProvider.cancelledCommand\n\t\t\t\t: TypeScriptBaseCodeLensProvider.errorCommand;\n\t\t\treturn codeLens;\n\t\t}\n\n\t\tconst locations = response.body\n\t\t\t.map(reference =>\n\t\t\t\t// Only take first line on implementation: https://github.com/microsoft/vscode/issues/23924\n\t\t\t\tnew vscode.Location(this.client.toResource(reference.file),\n\t\t\t\t\treference.start.line === reference.end.line\n\t\t\t\t\t\t? typeConverters.Range.fromTextSpan(reference)\n\t\t\t\t\t\t: new vscode.Range(\n\t\t\t\t\t\t\ttypeConverters.Position.fromLocation(reference.start),\n\t\t\t\t\t\t\tnew vscode.Position(reference.start.line, 0))))\n\t\t\t// Exclude original from implementations\n\t\t\t.filter(location =>\n\t\t\t\t!(location.uri.toString() === codeLens.document.toString() &&\n\t\t\t\t\tlocation.range.start.line === codeLens.range.start.line &&\n\t\t\t\t\tlocation.range.start.character === codeLens.range.start.character));\n\n\t\tcodeLens.command = this.getCommand(locations, codeLens);\n\t\treturn codeLens;\n\t}\n\n\tprivate getCommand(locations: vscode.Location[], codeLens: ReferencesCodeLens): vscode.Command | undefined {\n\t\treturn {\n\t\t\ttitle: this.getTitle(locations),\n\t\t\tcommand: locations.length ? 'editor.action.showReferences' : '',\n\t\t\targuments: [codeLens.document, codeLens.range.start, locations]\n\t\t};\n\t}\n\n\tprivate getTitle(locations: vscode.Location[]): string {\n\t\treturn locations.length === 1\n\t\t\t? vscode.l10n.t(\"1 implementation\")\n\t\t\t: vscode.l10n.t(\"{0} implementations\", locations.length);\n\t}\n\n\tprotected extractSymbol(\n\t\tdocument: vscode.TextDocument,\n\t\titem: Proto.NavigationTree,\n\t\tparent: Proto.NavigationTree | undefined\n\t): vscode.Range | undefined {\n\t\tif (item.kind === PConst.Kind.method && parent && parent.kind === PConst.Kind.interface && vscode.workspace.getConfiguration(this.language.id).get<boolean>('implementationsCodeLens.showOnInterfaceMethods')) {\n\t\t\treturn getSymbolRange(document, item);\n\t\t}\n\t\tswitch (item.kind) {\n\t\t\tcase PConst.Kind.interface:\n\t\t\t\treturn getSymbolRange(document, item);\n\n\t\t\tcase PConst.Kind.class:\n\t\t\tcase PConst.Kind.method:\n\t\t\tcase PConst.Kind.memberVariable:\n\t\t\tcase PConst.Kind.memberGetAccessor:\n\t\t\tcase PConst.Kind.memberSetAccessor:\n\t\t\t\tif (item.kindModifiers.match(/\\babstract\\b/g)) {\n\t\t\t\t\treturn getSymbolRange(document, item);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tlanguage: LanguageDescription,\n\tclient: ITypeScriptServiceClient,\n\tcachedResponse: CachedResponse<Proto.NavTreeResponse>,\n) {\n\treturn conditionalRegistration([\n\t\trequireGlobalConfiguration(language.id, 'implementationsCodeLens.enabled'),\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerCodeLensProvider(selector.semantic,\n\t\t\tnew TypeScriptImplementationsCodeLensProvider(client, cachedResponse, language));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as typeConverters from '../typeConverters';\nimport { ITypeScriptServiceClient } from '../typescriptService';\n\nclass SmartSelection implements vscode.SelectionRangeProvider {\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async provideSelectionRanges(\n\t\tdocument: vscode.TextDocument,\n\t\tpositions: vscode.Position[],\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<vscode.SelectionRange[] | undefined> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args: Proto.SelectionRangeRequestArgs = {\n\t\t\tfile,\n\t\t\tlocations: positions.map(typeConverters.Position.toLocation)\n\t\t};\n\t\tconst response = await this.client.execute('selectionRange', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn response.body.map(SmartSelection.convertSelectionRange);\n\t}\n\n\tprivate static convertSelectionRange(\n\t\tselectionRange: Proto.SelectionRange\n\t): vscode.SelectionRange {\n\t\treturn new vscode.SelectionRange(\n\t\t\ttypeConverters.Range.fromTextSpan(selectionRange.textSpan),\n\t\t\tselectionRange.parent ? SmartSelection.convertSelectionRange(selectionRange.parent) : undefined,\n\t\t);\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn vscode.languages.registerSelectionRangeProvider(selector.syntax, new SmartSelection(client));\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, arrIndexOf, getDocument, getWindow, isArray, objForEachKey, objKeys } from \"@nevware21/ts-utils\";\r\nimport { _DYN_HANDLER, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_REPLACE, _DYN_SPLICE, _DYN_SPLIT, _DYN_TYPE } from \"../__DynamicConstants\";\r\nimport { createElmNodeData, createUniqueNamespace } from \"./DataCacheHelper\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// Added to help with minfication\r\nvar strOnPrefix = \"on\";\r\nvar strAttachEvent = \"attachEvent\";\r\nvar strAddEventHelper = \"addEventListener\";\r\nvar strDetachEvent = \"detachEvent\";\r\nvar strRemoveEventListener = \"removeEventListener\";\r\nvar strEvents = \"events\";\r\nvar strVisibilityChangeEvt = \"visibilitychange\";\r\nvar strPageHide = \"pagehide\";\r\nvar strPageShow = \"pageshow\";\r\nvar strUnload = \"unload\";\r\nvar strBeforeUnload = \"beforeunload\";\r\nvar strPageHideNamespace = createUniqueNamespace(\"aiEvtPageHide\");\r\nvar strPageShowNamespace = createUniqueNamespace(\"aiEvtPageShow\");\r\nvar rRemoveEmptyNs = /\\.[\\.]+/g;\r\nvar rRemoveTrailingEmptyNs = /[\\.]+$/;\r\nvar _guid = 1;\r\nvar elmNodeData = createElmNodeData(\"events\");\r\nvar eventNamespace = /^([^.]*)(?:\\.(.+)|)/;\r\nfunction _normalizeNamespace(name) {\r\n    if (name && name[_DYN_REPLACE /* @min:%2ereplace */]) {\r\n        return name[_DYN_REPLACE /* @min:%2ereplace */](/^[\\s\\.]+|(?=[\\s\\.])[\\.\\s]+$/g, STR_EMPTY);\r\n    }\r\n    return name;\r\n}\r\nfunction _getEvtNamespace(eventName, evtNamespace) {\r\n    var _a;\r\n    if (evtNamespace) {\r\n        var theNamespace_1 = STR_EMPTY;\r\n        if (isArray(evtNamespace)) {\r\n            theNamespace_1 = STR_EMPTY;\r\n            arrForEach(evtNamespace, function (name) {\r\n                name = _normalizeNamespace(name);\r\n                if (name) {\r\n                    if (name[0] !== \".\") {\r\n                        name = \".\" + name;\r\n                    }\r\n                    theNamespace_1 += name;\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            theNamespace_1 = _normalizeNamespace(evtNamespace);\r\n        }\r\n        if (theNamespace_1) {\r\n            if (theNamespace_1[0] !== \".\") {\r\n                theNamespace_1 = \".\" + theNamespace_1;\r\n            }\r\n            // We may only have the namespace and not an eventName\r\n            eventName = (eventName || STR_EMPTY) + theNamespace_1;\r\n        }\r\n    }\r\n    var parsedEvent = (eventNamespace.exec(eventName || STR_EMPTY) || []);\r\n    return _a = {},\r\n        _a[_DYN_TYPE /* @min:type */] = parsedEvent[1],\r\n        _a.ns = ((parsedEvent[2] || STR_EMPTY).replace(rRemoveEmptyNs, \".\").replace(rRemoveTrailingEmptyNs, STR_EMPTY)[_DYN_SPLIT /* @min:%2esplit */](\".\").sort()).join(\".\"),\r\n        _a;\r\n}\r\n/**\r\n * Get all of the registered events on the target object, this is primarily used for testing cleanup but may also be used by\r\n * applications to remove their own events\r\n * @param target - The EventTarget that has registered events\r\n * @param eventName - [Optional] The name of the event to return the registered handlers and full name (with namespaces)\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n */\r\nexport function __getRegisteredEvents(target, eventName, evtNamespace) {\r\n    var theEvents = [];\r\n    var eventCache = elmNodeData.get(target, strEvents, {}, false);\r\n    var evtName = _getEvtNamespace(eventName, evtNamespace);\r\n    objForEachKey(eventCache, function (evtType, registeredEvents) {\r\n        arrForEach(registeredEvents, function (value) {\r\n            var _a;\r\n            if (!evtName[_DYN_TYPE /* @min:%2etype */] || evtName[_DYN_TYPE /* @min:%2etype */] === value.evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n                if (!evtName.ns || evtName.ns === evtName.ns) {\r\n                    theEvents[_DYN_PUSH /* @min:%2epush */]((_a = {},\r\n                        _a[_DYN_NAME /* @min:name */] = value.evtName[_DYN_TYPE /* @min:%2etype */] + (value.evtName.ns ? \".\" + value.evtName.ns : STR_EMPTY),\r\n                        _a.handler = value[_DYN_HANDLER /* @min:%2ehandler */],\r\n                        _a));\r\n                }\r\n            }\r\n        });\r\n    });\r\n    return theEvents;\r\n}\r\n// Exported for internal unit testing only\r\nfunction _getRegisteredEvents(target, evtName, addDefault) {\r\n    if (addDefault === void 0) { addDefault = true; }\r\n    var aiEvts = elmNodeData.get(target, strEvents, {}, addDefault);\r\n    var registeredEvents = aiEvts[evtName];\r\n    if (!registeredEvents) {\r\n        registeredEvents = aiEvts[evtName] = [];\r\n    }\r\n    return registeredEvents;\r\n}\r\nfunction _doDetach(obj, evtName, handlerRef, useCapture) {\r\n    if (obj && evtName && evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n        if (obj[strRemoveEventListener]) {\r\n            obj[strRemoveEventListener](evtName[_DYN_TYPE /* @min:%2etype */], handlerRef, useCapture);\r\n        }\r\n        else if (obj[strDetachEvent]) {\r\n            obj[strDetachEvent](strOnPrefix + evtName[_DYN_TYPE /* @min:%2etype */], handlerRef);\r\n        }\r\n    }\r\n}\r\nfunction _doAttach(obj, evtName, handlerRef, useCapture) {\r\n    var result = false;\r\n    if (obj && evtName && evtName[_DYN_TYPE /* @min:%2etype */] && handlerRef) {\r\n        if (obj[strAddEventHelper]) {\r\n            // all browsers except IE before version 9\r\n            obj[strAddEventHelper](evtName[_DYN_TYPE /* @min:%2etype */], handlerRef, useCapture);\r\n            result = true;\r\n        }\r\n        else if (obj[strAttachEvent]) {\r\n            // IE before version 9\r\n            obj[strAttachEvent](strOnPrefix + evtName[_DYN_TYPE /* @min:%2etype */], handlerRef);\r\n            result = true;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction _doUnregister(target, events, evtName, unRegFn) {\r\n    var idx = events[_DYN_LENGTH /* @min:%2elength */];\r\n    while (idx--) {\r\n        var theEvent = events[idx];\r\n        if (theEvent) {\r\n            if (!evtName.ns || evtName.ns === theEvent.evtName.ns) {\r\n                if (!unRegFn || unRegFn(theEvent)) {\r\n                    _doDetach(target, theEvent.evtName, theEvent[_DYN_HANDLER /* @min:%2ehandler */], theEvent.capture);\r\n                    // Remove the registered event\r\n                    events[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction _unregisterEvents(target, evtName, unRegFn) {\r\n    if (evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n        _doUnregister(target, _getRegisteredEvents(target, evtName[_DYN_TYPE /* @min:%2etype */]), evtName, unRegFn);\r\n    }\r\n    else {\r\n        var eventCache = elmNodeData.get(target, strEvents, {});\r\n        objForEachKey(eventCache, function (evtType, events) {\r\n            _doUnregister(target, events, evtName, unRegFn);\r\n        });\r\n        // Cleanup\r\n        if (objKeys(eventCache)[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n            elmNodeData.kill(target, strEvents);\r\n        }\r\n    }\r\n}\r\nexport function mergeEvtNamespace(theNamespace, namespaces) {\r\n    var newNamespaces;\r\n    if (namespaces) {\r\n        if (isArray(namespaces)) {\r\n            newNamespaces = [theNamespace].concat(namespaces);\r\n        }\r\n        else {\r\n            newNamespaces = [theNamespace, namespaces];\r\n        }\r\n        // resort the namespaces so they are always in order\r\n        newNamespaces = (_getEvtNamespace(\"xx\", newNamespaces).ns)[_DYN_SPLIT /* @min:%2esplit */](\".\");\r\n    }\r\n    else {\r\n        newNamespaces = theNamespace;\r\n    }\r\n    return newNamespaces;\r\n}\r\n/**\r\n * Binds the specified function to an event, so that the function gets called whenever the event fires on the object\r\n * @param obj - Object to add the event too.\r\n * @param eventName - String that specifies any of the standard DHTML Events without \"on\" prefix, if may also include an optional (dot \".\" prefixed)\r\n * namespaces \"click\" \"click.mynamespace\" in addition to specific namespaces.\r\n * @param handlerRef - Pointer that specifies the function to call when event fires\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n * @param useCapture - [Optional] Defaults to false\r\n * @returns True if the function was bound successfully to the event, otherwise false\r\n */\r\nexport function eventOn(target, eventName, handlerRef, evtNamespace, useCapture) {\r\n    var _a;\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    var result = false;\r\n    if (target) {\r\n        try {\r\n            var evtName = _getEvtNamespace(eventName, evtNamespace);\r\n            result = _doAttach(target, evtName, handlerRef, useCapture);\r\n            if (result && elmNodeData.accept(target)) {\r\n                var registeredEvent = (_a = {\r\n                        guid: _guid++,\r\n                        evtName: evtName\r\n                    },\r\n                    _a[_DYN_HANDLER /* @min:handler */] = handlerRef,\r\n                    _a.capture = useCapture,\r\n                    _a);\r\n                _getRegisteredEvents(target, evtName.type)[_DYN_PUSH /* @min:%2epush */](registeredEvent);\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Just Ignore any error so that we don't break any execution path\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Removes an event handler for the specified event\r\n * @param Object - to remove the event from\r\n * @param eventName - {string} - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param handlerRef - {any} - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n * @param useCapture - [Optional] Defaults to false\r\n */\r\nexport function eventOff(target, eventName, handlerRef, evtNamespace, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    if (target) {\r\n        try {\r\n            var evtName_1 = _getEvtNamespace(eventName, evtNamespace);\r\n            var found_1 = false;\r\n            _unregisterEvents(target, evtName_1, function (regEvent) {\r\n                if ((evtName_1.ns && !handlerRef) || regEvent[_DYN_HANDLER /* @min:%2ehandler */] === handlerRef) {\r\n                    found_1 = true;\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (!found_1) {\r\n                // fallback to try and remove as requested\r\n                _doDetach(target, evtName_1, handlerRef, useCapture);\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Just Ignore any error so that we don't break any execution path\r\n        }\r\n    }\r\n}\r\n/**\r\n * Binds the specified function to an event, so that the function gets called whenever the event fires on the object\r\n * @param obj - Object to add the event too.\r\n * @param eventNameWithoutOn - String that specifies any of the standard DHTML Events without \"on\" prefix and optional (dot \".\" prefixed) namespaces \"click\" \"click.mynamespace\".\r\n * @param handlerRef - Pointer that specifies the function to call when event fires\r\n * @param useCapture - [Optional] Defaults to false\r\n * @returns True if the function was bound successfully to the event, otherwise false\r\n */\r\nexport function attachEvent(obj, eventNameWithoutOn, handlerRef, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    return eventOn(obj, eventNameWithoutOn, handlerRef, null, useCapture);\r\n}\r\n/**\r\n * Removes an event handler for the specified event\r\n * @param Object - to remove the event from\r\n * @param eventNameWithoutOn - {string} - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param handlerRef - {any} - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param useCapture - [Optional] Defaults to false\r\n */\r\nexport function detachEvent(obj, eventNameWithoutOn, handlerRef, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    eventOff(obj, eventNameWithoutOn, handlerRef, null, useCapture);\r\n}\r\n/**\r\n * Trys to add an event handler for the specified event to the window, body and document\r\n * @param eventName - {string} - The name of the event\r\n * @param callback - {any} - The callback function that needs to be executed for the given event\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @return {boolean} - true if the handler was successfully added\r\n */\r\nexport function addEventHandler(eventName, callback, evtNamespace) {\r\n    var result = false;\r\n    var w = getWindow();\r\n    if (w) {\r\n        result = eventOn(w, eventName, callback, evtNamespace);\r\n        result = eventOn(w[\"body\"], eventName, callback, evtNamespace) || result;\r\n    }\r\n    var doc = getDocument();\r\n    if (doc) {\r\n        result = eventOn(doc, eventName, callback, evtNamespace) || result;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Trys to remove event handler(s) for the specified event/namespace to the window, body and document\r\n * @param eventName - {string} - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param callback - {any} - - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n */\r\nexport function removeEventHandler(eventName, callback, evtNamespace) {\r\n    var w = getWindow();\r\n    if (w) {\r\n        eventOff(w, eventName, callback, evtNamespace);\r\n        eventOff(w[\"body\"], eventName, callback, evtNamespace);\r\n    }\r\n    var doc = getDocument();\r\n    if (doc) {\r\n        eventOff(doc, eventName, callback, evtNamespace);\r\n    }\r\n}\r\n/**\r\n * Bind the listener to the array of events\r\n * @param events - An string array of event names to bind the listener to\r\n * @param listener - The event callback to call when the event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nfunction _addEventListeners(events, listener, excludeEvents, evtNamespace) {\r\n    var added = false;\r\n    if (listener && events && events[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        arrForEach(events, function (name) {\r\n            if (name) {\r\n                if (!excludeEvents || arrIndexOf(excludeEvents, name) === -1) {\r\n                    added = addEventHandler(name, listener, evtNamespace) || added;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return added;\r\n}\r\n/**\r\n * Bind the listener to the array of events\r\n * @param events - An string array of event names to bind the listener to\r\n * @param listener - The event callback to call when the event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addEventListeners(events, listener, excludeEvents, evtNamespace) {\r\n    var added = false;\r\n    if (listener && events && isArray(events)) {\r\n        added = _addEventListeners(events, listener, excludeEvents, evtNamespace);\r\n        if (!added && excludeEvents && excludeEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            // Failed to add any listeners and we excluded some, so just attempt to add the excluded events\r\n            added = _addEventListeners(events, listener, null, evtNamespace);\r\n        }\r\n    }\r\n    return added;\r\n}\r\n/**\r\n * Remove the listener from the array of events\r\n * @param events - An string array of event names to bind the listener to\r\n * @param listener - The event callback to call when the event is triggered\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n */\r\nexport function removeEventListeners(events, listener, evtNamespace) {\r\n    if (events && isArray(events)) {\r\n        arrForEach(events, function (name) {\r\n            if (name) {\r\n                removeEventHandler(name, listener, evtNamespace);\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Listen to the 'beforeunload', 'unload' and 'pagehide' events which indicates a page unload is occurring,\r\n * this does NOT listen to the 'visibilitychange' event as while it does indicate that the page is being hidden\r\n * it does not *necessarily* mean that the page is being completely unloaded, it can mean that the user is\r\n * just navigating to a different Tab and may come back (without unloading the page). As such you may also\r\n * need to listen to the 'addPageHideEventListener' and 'addPageShowEventListener' events.\r\n * @param listener - The event callback to call when a page unload event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked, unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageUnloadEventListener(listener, excludeEvents, evtNamespace) {\r\n    // Hook the unload event for the document, window and body to ensure that the client events are flushed to the server\r\n    // As just hooking the window does not always fire (on chrome) for page navigation's.\r\n    return addEventListeners([strBeforeUnload, strUnload, strPageHide], listener, excludeEvents, evtNamespace);\r\n}\r\n/**\r\n * Remove any matching 'beforeunload', 'unload' and 'pagehide' events that may have been added via addEventListener,\r\n * addEventListeners, addPageUnloadEventListener or addPageHideEventListener.\r\n * @param listener - The specific event callback to to be removed\r\n * @param evtNamespace - [Optional] Namespace(s) uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function removePageUnloadEventListener(listener, evtNamespace) {\r\n    removeEventListeners([strBeforeUnload, strUnload, strPageHide], listener, evtNamespace);\r\n}\r\n/**\r\n * Listen to the pagehide and visibility changing to 'hidden' events, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when if you plan to call\r\n * removePageShowEventListener as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The event callback to call when a page hide event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] A Namespace to append to the event listeners so they can be uniquely identified and removed\r\n * based on this namespace. This call also adds an additional unique \"pageshow\" namespace to the events\r\n * so that only the matching \"removePageHideEventListener\" can remove these events.\r\n * Suggestion: pass as true if you are also calling addPageUnloadEventListener as that also hooks pagehide\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageHideEventListener(listener, excludeEvents, evtNamespace) {\r\n    function _handlePageVisibility(evt) {\r\n        var doc = getDocument();\r\n        if (listener && doc && doc.visibilityState === \"hidden\") {\r\n            listener(evt);\r\n        }\r\n    }\r\n    // add the unique page show namespace to any provided namespace so we can only remove the ones added by \"pagehide\"\r\n    var newNamespaces = mergeEvtNamespace(strPageHideNamespace, evtNamespace);\r\n    var pageUnloadAdded = _addEventListeners([strPageHide], listener, excludeEvents, newNamespaces);\r\n    if (!excludeEvents || arrIndexOf(excludeEvents, strVisibilityChangeEvt) === -1) {\r\n        pageUnloadAdded = _addEventListeners([strVisibilityChangeEvt], _handlePageVisibility, excludeEvents, newNamespaces) || pageUnloadAdded;\r\n    }\r\n    if (!pageUnloadAdded && excludeEvents) {\r\n        // Failed to add any listeners and we where requested to exclude some, so just call again without excluding anything\r\n        pageUnloadAdded = addPageHideEventListener(listener, null, evtNamespace);\r\n    }\r\n    return pageUnloadAdded;\r\n}\r\n/**\r\n * Removes the pageHide event listeners added by addPageHideEventListener, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when calling addPageHideEventListener\r\n * as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The specific listener to remove for the 'pageshow' event only (ignored for 'visibilitychange')\r\n * @param evtNamespace - The unique namespace used when calling addPageShowEventListener\r\n */\r\nexport function removePageHideEventListener(listener, evtNamespace) {\r\n    // add the unique page show namespace to any provided namespace so we only remove the ones added by \"pagehide\"\r\n    var newNamespaces = mergeEvtNamespace(strPageHideNamespace, evtNamespace);\r\n    removeEventListeners([strPageHide], listener, newNamespaces);\r\n    removeEventListeners([strVisibilityChangeEvt], null, newNamespaces);\r\n}\r\n/**\r\n * Listen to the pageshow and visibility changing to 'visible' events, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when if you plan to call\r\n * removePageShowEventListener as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The event callback to call when a page is show event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional/Recommended] A Namespace to append to the event listeners so they can be uniquely\r\n * identified and removed based on this namespace. This call also adds an additional unique \"pageshow\" namespace to the events\r\n * so that only the matching \"removePageShowEventListener\" can remove these events.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageShowEventListener(listener, excludeEvents, evtNamespace) {\r\n    function _handlePageVisibility(evt) {\r\n        var doc = getDocument();\r\n        if (listener && doc && doc.visibilityState === \"visible\") {\r\n            listener(evt);\r\n        }\r\n    }\r\n    // add the unique page show namespace to any provided namespace so we can only remove the ones added by \"pageshow\"\r\n    var newNamespaces = mergeEvtNamespace(strPageShowNamespace, evtNamespace);\r\n    var pageShowAdded = _addEventListeners([strPageShow], listener, excludeEvents, newNamespaces);\r\n    pageShowAdded = _addEventListeners([strVisibilityChangeEvt], _handlePageVisibility, excludeEvents, newNamespaces) || pageShowAdded;\r\n    if (!pageShowAdded && excludeEvents) {\r\n        // Failed to add any listeners and we where requested to exclude some, so just call again without excluding anything\r\n        pageShowAdded = addPageShowEventListener(listener, null, evtNamespace);\r\n    }\r\n    return pageShowAdded;\r\n}\r\n/**\r\n * Removes the pageShow event listeners added by addPageShowEventListener, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when calling addPageShowEventListener\r\n * as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The specific listener to remove for the 'pageshow' event only (ignored for 'visibilitychange')\r\n * @param evtNamespace - The unique namespace used when calling addPageShowEventListener\r\n */\r\nexport function removePageShowEventListener(listener, evtNamespace) {\r\n    // add the unique page show namespace to any provided namespace so we only remove the ones added by \"pageshow\"\r\n    var newNamespaces = mergeEvtNamespace(strPageShowNamespace, evtNamespace);\r\n    removeEventListeners([strPageShow], listener, newNamespaces);\r\n    removeEventListeners([strVisibilityChangeEvt], null, newNamespaces);\r\n}\r\n//# sourceMappingURL=EventHelpers.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { CachedResponse } from '../../tsServer/cachedResponse';\nimport type * as Proto from '../../tsServer/protocol/protocol';\nimport * as typeConverters from '../../typeConverters';\nimport { ITypeScriptServiceClient } from '../../typescriptService';\nimport { escapeRegExp } from '../../utils/regexp';\nimport { Disposable } from '../../utils/dispose';\n\n\nexport class ReferencesCodeLens extends vscode.CodeLens {\n\tconstructor(\n\t\tpublic document: vscode.Uri,\n\t\tpublic file: string,\n\t\trange: vscode.Range\n\t) {\n\t\tsuper(range);\n\t}\n}\n\nexport abstract class TypeScriptBaseCodeLensProvider extends Disposable implements vscode.CodeLensProvider<ReferencesCodeLens> {\n\tprotected changeEmitter = this._register(new vscode.EventEmitter<void>());\n\tpublic onDidChangeCodeLenses = this.changeEmitter.event;\n\n\tpublic static readonly cancelledCommand: vscode.Command = {\n\t\t// Cancellation is not an error. Just show nothing until we can properly re-compute the code lens\n\t\ttitle: '',\n\t\tcommand: ''\n\t};\n\n\tpublic static readonly errorCommand: vscode.Command = {\n\t\ttitle: vscode.l10n.t(\"Could not determine references\"),\n\t\tcommand: ''\n\t};\n\n\tpublic constructor(\n\t\tprotected client: ITypeScriptServiceClient,\n\t\tprivate readonly cachedResponse: CachedResponse<Proto.NavTreeResponse>\n\t) {\n\t\tsuper();\n\t}\n\n\tasync provideCodeLenses(document: vscode.TextDocument, token: vscode.CancellationToken): Promise<ReferencesCodeLens[]> {\n\t\tconst filepath = this.client.toOpenTsFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst response = await this.cachedResponse.execute(document, () => this.client.execute('navtree', { file: filepath }, token));\n\t\tif (response.type !== 'response') {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst referenceableSpans: vscode.Range[] = [];\n\t\tresponse.body?.childItems?.forEach(item => this.walkNavTree(document, item, undefined, referenceableSpans));\n\t\treturn referenceableSpans.map(span => new ReferencesCodeLens(document.uri, filepath, span));\n\t}\n\n\tprotected abstract extractSymbol(\n\t\tdocument: vscode.TextDocument,\n\t\titem: Proto.NavigationTree,\n\t\tparent: Proto.NavigationTree | undefined\n\t): vscode.Range | undefined;\n\n\tprivate walkNavTree(\n\t\tdocument: vscode.TextDocument,\n\t\titem: Proto.NavigationTree,\n\t\tparent: Proto.NavigationTree | undefined,\n\t\tresults: vscode.Range[]\n\t): void {\n\t\tconst range = this.extractSymbol(document, item, parent);\n\t\tif (range) {\n\t\t\tresults.push(range);\n\t\t}\n\n\t\titem.childItems?.forEach(child => this.walkNavTree(document, child, item, results));\n\t}\n}\n\nexport function getSymbolRange(\n\tdocument: vscode.TextDocument,\n\titem: Proto.NavigationTree\n): vscode.Range | undefined {\n\tif (item.nameSpan) {\n\t\treturn typeConverters.Range.fromTextSpan(item.nameSpan);\n\t}\n\n\t// In older versions, we have to calculate this manually. See #23924\n\tconst span = item.spans?.[0];\n\tif (!span) {\n\t\treturn undefined;\n\t}\n\n\tconst range = typeConverters.Range.fromTextSpan(span);\n\tconst text = document.getText(range);\n\n\tconst identifierMatch = new RegExp(`^(.*?(\\\\b|\\\\W))${escapeRegExp(item.text || '')}(\\\\b|\\\\W)`, 'gm');\n\tconst match = identifierMatch.exec(text);\n\tconst prefixLength = match ? match.index + match[1].length : 0;\n\tconst startOffset = document.offsetAt(new vscode.Position(range.start.line, range.start.character)) + prefixLength;\n\treturn new vscode.Range(\n\t\tdocument.positionAt(startOffset),\n\t\tdocument.positionAt(startOffset + item.text.length));\n}\n","const SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    let next\n    while ((next = re[t.COERCERTL].exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      re[t.COERCERTL].lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    re[t.COERCERTL].lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  return parse(`${match[2]}.${match[3] || '0'}.${match[4] || '0'}`, options)\n}\nmodule.exports = coerce\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_TO_LOWER_CASE = \"toLowerCase\"; // Count: 11\r\nexport var _DYN_BLK_VAL = \"blkVal\"; // Count: 5\r\nexport var _DYN_LENGTH = \"length\"; // Count: 55\r\nexport var _DYN_RD_ONLY = \"rdOnly\"; // Count: 4\r\nexport var _DYN_NOTIFY = \"notify\"; // Count: 4\r\nexport var _DYN_WARN_TO_CONSOLE = \"warnToConsole\"; // Count: 4\r\nexport var _DYN_THROW_INTERNAL = \"throwInternal\"; // Count: 5\r\nexport var _DYN_SET_DF = \"setDf\"; // Count: 6\r\nexport var _DYN_WATCH = \"watch\"; // Count: 8\r\nexport var _DYN_LOGGER = \"logger\"; // Count: 21\r\nexport var _DYN_APPLY = \"apply\"; // Count: 7\r\nexport var _DYN_PUSH = \"push\"; // Count: 35\r\nexport var _DYN_SPLICE = \"splice\"; // Count: 8\r\nexport var _DYN_HDLR = \"hdlr\"; // Count: 6\r\nexport var _DYN_CANCEL = \"cancel\"; // Count: 6\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 5\r\nexport var _DYN_IDENTIFIER = \"identifier\"; // Count: 8\r\nexport var _DYN_REMOVE_NOTIFICATION_0 = \"removeNotificationListener\"; // Count: 4\r\nexport var _DYN_ADD_NOTIFICATION_LIS1 = \"addNotificationListener\"; // Count: 4\r\nexport var _DYN_IS_INITIALIZED = \"isInitialized\"; // Count: 10\r\nexport var _DYN_INSTRUMENTATION_KEY = \"instrumentationKey\"; // Count: 2\r\nexport var _DYN__INACTIVE = \"INACTIVE\"; // Count: 3\r\nexport var _DYN_VALUE = \"value\"; // Count: 5\r\nexport var _DYN_GET_NOTIFY_MGR = \"getNotifyMgr\"; // Count: 5\r\nexport var _DYN_GET_PLUGIN = \"getPlugin\"; // Count: 6\r\nexport var _DYN_NAME = \"name\"; // Count: 12\r\nexport var _DYN_I_KEY = \"iKey\"; // Count: 5\r\nexport var _DYN_TIME = \"time\"; // Count: 6\r\nexport var _DYN_PROCESS_NEXT = \"processNext\"; // Count: 15\r\nexport var _DYN_GET_PROCESS_TEL_CONT2 = \"getProcessTelContext\"; // Count: 2\r\nexport var _DYN_POLL_INTERNAL_LOGS = \"pollInternalLogs\"; // Count: 2\r\nexport var _DYN_ENABLED = \"enabled\"; // Count: 6\r\nexport var _DYN_STOP_POLLING_INTERNA3 = \"stopPollingInternalLogs\"; // Count: 2\r\nexport var _DYN_UNLOAD = \"unload\"; // Count: 9\r\nexport var _DYN_ON_COMPLETE = \"onComplete\"; // Count: 5\r\nexport var _DYN_VERSION = \"version\"; // Count: 6\r\nexport var _DYN_LOGGING_LEVEL_CONSOL4 = \"loggingLevelConsole\"; // Count: 2\r\nexport var _DYN_CREATE_NEW = \"createNew\"; // Count: 7\r\nexport var _DYN_TEARDOWN = \"teardown\"; // Count: 9\r\nexport var _DYN_MESSAGE_ID = \"messageId\"; // Count: 4\r\nexport var _DYN_MESSAGE = \"message\"; // Count: 7\r\nexport var _DYN_IS_ASYNC = \"isAsync\"; // Count: 6\r\nexport var _DYN_DIAG_LOG = \"diagLog\"; // Count: 10\r\nexport var _DYN__DO_TEARDOWN = \"_doTeardown\"; // Count: 5\r\nexport var _DYN_UPDATE = \"update\"; // Count: 6\r\nexport var _DYN_GET_NEXT = \"getNext\"; // Count: 12\r\nexport var _DYN_SET_NEXT_PLUGIN = \"setNextPlugin\"; // Count: 5\r\nexport var _DYN_PROTOCOL = \"protocol\"; // Count: 3\r\nexport var _DYN_USER_AGENT = \"userAgent\"; // Count: 5\r\nexport var _DYN_SPLIT = \"split\"; // Count: 7\r\nexport var _DYN_NODE_TYPE = \"nodeType\"; // Count: 3\r\nexport var _DYN_REPLACE = \"replace\"; // Count: 9\r\nexport var _DYN_LOG_INTERNAL_MESSAGE = \"logInternalMessage\"; // Count: 2\r\nexport var _DYN_TYPE = \"type\"; // Count: 14\r\nexport var _DYN_HANDLER = \"handler\"; // Count: 5\r\nexport var _DYN_STATUS = \"status\"; // Count: 5\r\nexport var _DYN_GET_RESPONSE_HEADER = \"getResponseHeader\"; // Count: 2\r\nexport var _DYN_GET_ALL_RESPONSE_HEA5 = \"getAllResponseHeaders\"; // Count: 2\r\nexport var _DYN_IS_CHILD_EVT = \"isChildEvt\"; // Count: 3\r\nexport var _DYN_DATA = \"data\"; // Count: 7\r\nexport var _DYN_GET_CTX = \"getCtx\"; // Count: 6\r\nexport var _DYN_SET_CTX = \"setCtx\"; // Count: 10\r\nexport var _DYN_COMPLETE = \"complete\"; // Count: 3\r\nexport var _DYN_ITEMS_RECEIVED = \"itemsReceived\"; // Count: 3\r\nexport var _DYN_URL_STRING = \"urlString\"; // Count: 5\r\nexport var _DYN_SEND_POST = \"sendPOST\"; // Count: 3\r\nexport var _DYN_HEADERS = \"headers\"; // Count: 5\r\nexport var _DYN_TIMEOUT = \"timeout\"; // Count: 6\r\nexport var _DYN_SET_REQUEST_HEADER = \"setRequestHeader\"; // Count: 2\r\nexport var _DYN_TRACE_ID = \"traceId\"; // Count: 5\r\nexport var _DYN_SPAN_ID = \"spanId\"; // Count: 5\r\nexport var _DYN_TRACE_FLAGS = \"traceFlags\"; // Count: 6\r\nexport var _DYN_GET_ATTRIBUTE = \"getAttribute\"; // Count: 3\r\n//# sourceMappingURL=__DynamicConstants.js.map","const SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport * as languageIds from '../configuration/languageIds';\nimport { API } from '../tsServer/api';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport FileConfigurationManager from './fileConfigurationManager';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\nimport { LanguageDescription } from '../configuration/languageDescription';\n\ntype RenameResponse = {\n\treadonly type: 'rename';\n\treadonly body: Proto.RenameResponseBody;\n} | {\n\treadonly type: 'jsxLinkedEditing';\n\treadonly spans: readonly Proto.TextSpan[];\n};\n\nclass TypeScriptRenameProvider implements vscode.RenameProvider {\n\n\tpublic constructor(\n\t\tprivate readonly language: LanguageDescription,\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager\n\t) { }\n\n\tpublic async prepareRename(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.Range | undefined> {\n\t\tconst response = await this.execRename(document, position, token);\n\t\tif (!response) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tswitch (response.type) {\n\t\t\tcase 'rename': {\n\t\t\t\tconst renameInfo = response.body.info;\n\t\t\t\tif (!renameInfo.canRename) {\n\t\t\t\t\treturn Promise.reject<vscode.Range>(renameInfo.localizedErrorMessage);\n\t\t\t\t}\n\t\t\t\treturn typeConverters.Range.fromTextSpan(renameInfo.triggerSpan);\n\t\t\t}\n\t\t\tcase 'jsxLinkedEditing': {\n\t\t\t\treturn response.spans\n\t\t\t\t\t.map(typeConverters.Range.fromTextSpan)\n\t\t\t\t\t.find(range => range.contains(position));\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async provideRenameEdits(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\tnewName: string,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.WorkspaceEdit | undefined> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst response = await this.execRename(document, position, token);\n\t\tif (!response || token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tswitch (response.type) {\n\t\t\tcase 'rename': {\n\t\t\t\tconst renameInfo = response.body.info;\n\t\t\t\tif (!renameInfo.canRename) {\n\t\t\t\t\treturn Promise.reject<vscode.WorkspaceEdit>(renameInfo.localizedErrorMessage);\n\t\t\t\t}\n\n\t\t\t\tif (renameInfo.fileToRename) {\n\t\t\t\t\tconst edits = await this.renameFile(renameInfo.fileToRename, renameInfo.fullDisplayName, newName, token);\n\t\t\t\t\tif (edits) {\n\t\t\t\t\t\treturn edits;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn Promise.reject<vscode.WorkspaceEdit>(vscode.l10n.t(\"An error occurred while renaming file\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this.updateLocs(response.body.locs, newName);\n\t\t\t}\n\t\t\tcase 'jsxLinkedEditing': {\n\t\t\t\treturn this.updateLocs([{\n\t\t\t\t\tfile,\n\t\t\t\t\tlocs: response.spans.map((span): Proto.RenameTextSpan => ({ ...span })),\n\t\t\t\t}], newName);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async execRename(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<RenameResponse | undefined> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Prefer renaming matching jsx tag when available\n\t\tif (this.client.apiVersion.gte(API.v510) &&\n\t\t\tvscode.workspace.getConfiguration(this.language.id).get('preferences.renameMatchingJsxTags', true) &&\n\t\t\tthis.looksLikePotentialJsxTagContext(document, position)\n\t\t) {\n\t\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(file, position);\n\t\t\tconst response = await this.client.execute('linkedEditingRange', args, token);\n\t\t\tif (response.type !== 'response' || !response.body) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn { type: 'jsxLinkedEditing', spans: response.body.ranges };\n\t\t}\n\n\t\tconst args: Proto.RenameRequestArgs = {\n\t\t\t...typeConverters.Position.toFileLocationRequestArgs(file, position),\n\t\t\tfindInStrings: false,\n\t\t\tfindInComments: false\n\t\t};\n\n\t\treturn this.client.interruptGetErr(async () => {\n\t\t\tthis.fileConfigurationManager.ensureConfigurationForDocument(document, token);\n\t\t\tconst response = await this.client.execute('rename', args, token);\n\t\t\tif (response.type !== 'response' || !response.body) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn { type: 'rename', body: response.body };\n\t\t});\n\t}\n\n\tprivate looksLikePotentialJsxTagContext(document: vscode.TextDocument, position: vscode.Position): boolean {\n\t\tif (![languageIds.typescriptreact, languageIds.javascript, languageIds.javascriptreact].includes(document.languageId)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst prefix = document.getText(new vscode.Range(position.line, 0, position.line, position.character));\n\t\treturn /\\<\\/?\\s*[\\w\\d_$.]*$/.test(prefix);\n\t}\n\n\tprivate updateLocs(\n\t\tlocations: ReadonlyArray<Proto.SpanGroup>,\n\t\tnewName: string\n\t) {\n\t\tconst edit = new vscode.WorkspaceEdit();\n\t\tfor (const spanGroup of locations) {\n\t\t\tconst resource = this.client.toResource(spanGroup.file);\n\t\t\tfor (const textSpan of spanGroup.locs) {\n\t\t\t\tedit.replace(resource, typeConverters.Range.fromTextSpan(textSpan),\n\t\t\t\t\t(textSpan.prefixText || '') + newName + (textSpan.suffixText || ''));\n\t\t\t}\n\t\t}\n\t\treturn edit;\n\t}\n\n\tprivate async renameFile(\n\t\tfileToRename: string,\n\t\tfullDisplayName: string,\n\t\tnewName: string,\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<vscode.WorkspaceEdit | undefined> {\n\t\t// Make sure we preserve file extension if extension is unchanged or none provided\n\t\tif (!path.extname(newName)) {\n\t\t\tnewName += path.extname(fileToRename);\n\t\t}\n\t\telse if (path.extname(newName) === path.extname(fullDisplayName)) {\n\t\t\tnewName = newName.slice(0, newName.length - path.extname(newName).length) + path.extname(fileToRename);\n\t\t}\n\n\t\tconst dirname = path.dirname(fileToRename);\n\t\tconst newFilePath = path.join(dirname, newName);\n\n\t\tconst args: Proto.GetEditsForFileRenameRequestArgs & { file: string } = {\n\t\t\tfile: fileToRename,\n\t\t\toldFilePath: fileToRename,\n\t\t\tnewFilePath: newFilePath,\n\t\t};\n\t\tconst response = await this.client.execute('getEditsForFileRename', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst edits = typeConverters.WorkspaceEdit.fromFileCodeEdits(this.client, response.body);\n\t\tedits.renameFile(vscode.Uri.file(fileToRename), vscode.Uri.file(newFilePath));\n\t\treturn edits;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tlanguage: LanguageDescription,\n\tclient: ITypeScriptServiceClient,\n\tfileConfigurationManager: FileConfigurationManager,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerRenameProvider(selector.semantic,\n\t\t\tnew TypeScriptRenameProvider(language, client, fileConfigurationManager));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport DefinitionProviderBase from './definitionProviderBase';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\n\nexport default class TypeScriptTypeDefinitionProvider extends DefinitionProviderBase implements vscode.TypeDefinitionProvider {\n\tpublic provideTypeDefinition(document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken): Promise<vscode.Definition | undefined> {\n\t\treturn this.getSymbolLocations('typeDefinition', document, position, token);\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerTypeDefinitionProvider(selector.syntax,\n\t\t\tnew TypeScriptTypeDefinitionProvider(client));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { API } from '../../tsServer/api';\nimport { ClientCapability, ITypeScriptServiceClient } from '../../typescriptService';\nimport { Disposable } from '../../utils/dispose';\n\nexport class Condition extends Disposable {\n\tprivate _value: boolean;\n\n\tconstructor(\n\t\tprivate readonly getValue: () => boolean,\n\t\tonUpdate: (handler: () => void) => void,\n\t) {\n\t\tsuper();\n\t\tthis._value = this.getValue();\n\n\t\tonUpdate(() => {\n\t\t\tconst newValue = this.getValue();\n\t\t\tif (newValue !== this._value) {\n\t\t\t\tthis._value = newValue;\n\t\t\t\tthis._onDidChange.fire();\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic get value(): boolean { return this._value; }\n\n\tprivate readonly _onDidChange = this._register(new vscode.EventEmitter<void>());\n\tpublic readonly onDidChange = this._onDidChange.event;\n}\n\nclass ConditionalRegistration {\n\tprivate state?: {\n\t\treadonly enabled: boolean;\n\t\treadonly registration: vscode.Disposable | undefined;\n\t};\n\n\tpublic constructor(\n\t\tprivate readonly conditions: readonly Condition[],\n\t\tprivate readonly doRegister: () => vscode.Disposable,\n\t\tprivate readonly elseDoRegister?: () => vscode.Disposable\n\t) {\n\t\tfor (const condition of conditions) {\n\t\t\tcondition.onDidChange(() => this.update());\n\t\t}\n\t\tthis.update();\n\t}\n\n\tpublic dispose() {\n\t\tthis.state?.registration?.dispose();\n\t\tthis.state = undefined;\n\t}\n\n\tprivate update() {\n\t\tconst enabled = this.conditions.every(condition => condition.value);\n\t\tif (enabled) {\n\t\t\tif (!this.state?.enabled) {\n\t\t\t\tthis.state?.registration?.dispose();\n\t\t\t\tthis.state = { enabled: true, registration: this.doRegister() };\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.state?.enabled || !this.state) {\n\t\t\t\tthis.state?.registration?.dispose();\n\t\t\t\tthis.state = { enabled: false, registration: this.elseDoRegister?.() };\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function conditionalRegistration(\n\tconditions: readonly Condition[],\n\tdoRegister: () => vscode.Disposable,\n\telseDoRegister?: () => vscode.Disposable\n): vscode.Disposable {\n\treturn new ConditionalRegistration(conditions, doRegister, elseDoRegister);\n}\n\nexport function requireMinVersion(\n\tclient: ITypeScriptServiceClient,\n\tminVersion: API,\n) {\n\treturn new Condition(\n\t\t() => client.apiVersion.gte(minVersion),\n\t\tclient.onTsServerStarted\n\t);\n}\n\nexport function requireGlobalConfiguration(\n\tsection: string,\n\tconfigValue: string,\n) {\n\treturn new Condition(\n\t\t() => {\n\t\t\tconst config = vscode.workspace.getConfiguration(section, null);\n\t\t\treturn !!config.get<boolean>(configValue);\n\t\t},\n\t\tvscode.workspace.onDidChangeConfiguration\n\t);\n}\n\nexport function requireSomeCapability(\n\tclient: ITypeScriptServiceClient,\n\t...capabilities: readonly ClientCapability[]\n) {\n\treturn new Condition(\n\t\t() => capabilities.some(requiredCapability => client.capabilities.has(requiredCapability)),\n\t\tclient.onDidChangeCapabilities\n\t);\n}\n\nexport function requireHasVsCodeExtension(\n\textensionId: string\n) {\n\treturn new Condition(\n\t\t() => {\n\t\t\treturn !!vscode.extensions.getExtension(extensionId);\n\t\t},\n\t\tvscode.extensions.onDidChange\n\t);\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { TypeScriptServiceConfiguration } from '../configuration/configuration';\nimport { setImmediate } from '../utils/async';\nimport { Disposable } from '../utils/dispose';\nimport { ITypeScriptVersionProvider, TypeScriptVersion } from './versionProvider';\n\n\nconst useWorkspaceTsdkStorageKey = 'typescript.useWorkspaceTsdk';\nconst suppressPromptWorkspaceTsdkStorageKey = 'typescript.suppressPromptWorkspaceTsdk';\n\ninterface QuickPickItem extends vscode.QuickPickItem {\n\trun(): void;\n}\n\nexport class TypeScriptVersionManager extends Disposable {\n\n\tprivate _currentVersion: TypeScriptVersion;\n\n\tpublic constructor(\n\t\tprivate configuration: TypeScriptServiceConfiguration,\n\t\tprivate readonly versionProvider: ITypeScriptVersionProvider,\n\t\tprivate readonly workspaceState: vscode.Memento\n\t) {\n\t\tsuper();\n\n\t\tthis._currentVersion = this.versionProvider.defaultVersion;\n\n\t\tif (this.useWorkspaceTsdkSetting) {\n\t\t\tif (vscode.workspace.isTrusted) {\n\t\t\t\tconst localVersion = this.versionProvider.localVersion;\n\t\t\t\tif (localVersion) {\n\t\t\t\t\tthis._currentVersion = localVersion;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._disposables.push(vscode.workspace.onDidGrantWorkspaceTrust(() => {\n\t\t\t\t\tif (this.versionProvider.localVersion) {\n\t\t\t\t\t\tthis.updateActiveVersion(this.versionProvider.localVersion);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\n\t\tif (this.isInPromptWorkspaceTsdkState(configuration)) {\n\t\t\tsetImmediate(() => {\n\t\t\t\tthis.promptUseWorkspaceTsdk();\n\t\t\t});\n\t\t}\n\n\t}\n\n\tprivate readonly _onDidPickNewVersion = this._register(new vscode.EventEmitter<void>());\n\tpublic readonly onDidPickNewVersion = this._onDidPickNewVersion.event;\n\n\tpublic updateConfiguration(nextConfiguration: TypeScriptServiceConfiguration) {\n\t\tconst lastConfiguration = this.configuration;\n\t\tthis.configuration = nextConfiguration;\n\n\t\tif (\n\t\t\t!this.isInPromptWorkspaceTsdkState(lastConfiguration)\n\t\t\t&& this.isInPromptWorkspaceTsdkState(nextConfiguration)\n\t\t) {\n\t\t\tthis.promptUseWorkspaceTsdk();\n\t\t}\n\t}\n\n\tpublic get currentVersion(): TypeScriptVersion {\n\t\treturn this._currentVersion;\n\t}\n\n\tpublic reset(): void {\n\t\tthis._currentVersion = this.versionProvider.bundledVersion;\n\t}\n\n\tpublic async promptUserForVersion(): Promise<void> {\n\t\tconst selected = await vscode.window.showQuickPick<QuickPickItem>([\n\t\t\tthis.getBundledPickItem(),\n\t\t\t...this.getLocalPickItems(),\n\t\t\t{\n\t\t\t\tkind: vscode.QuickPickItemKind.Separator,\n\t\t\t\tlabel: '',\n\t\t\t\trun: () => { /* noop */ },\n\t\t\t},\n\t\t\tLearnMorePickItem,\n\t\t], {\n\t\t\tplaceHolder: vscode.l10n.t(\"Select the TypeScript version used for JavaScript and TypeScript language features\"),\n\t\t});\n\n\t\treturn selected?.run();\n\t}\n\n\tprivate getBundledPickItem(): QuickPickItem {\n\t\tconst bundledVersion = this.versionProvider.defaultVersion;\n\t\treturn {\n\t\t\tlabel: (!this.useWorkspaceTsdkSetting || !vscode.workspace.isTrusted\n\t\t\t\t? '• '\n\t\t\t\t: '') + vscode.l10n.t(\"Use VS Code's Version\"),\n\t\t\tdescription: bundledVersion.displayName,\n\t\t\tdetail: bundledVersion.pathLabel,\n\t\t\trun: async () => {\n\t\t\t\tawait this.workspaceState.update(useWorkspaceTsdkStorageKey, false);\n\t\t\t\tthis.updateActiveVersion(bundledVersion);\n\t\t\t},\n\t\t};\n\t}\n\n\tprivate getLocalPickItems(): QuickPickItem[] {\n\t\treturn this.versionProvider.localVersions.map(version => {\n\t\t\treturn {\n\t\t\t\tlabel: (this.useWorkspaceTsdkSetting && vscode.workspace.isTrusted && this.currentVersion.eq(version)\n\t\t\t\t\t? '• '\n\t\t\t\t\t: '') + vscode.l10n.t(\"Use Workspace Version\"),\n\t\t\t\tdescription: version.displayName,\n\t\t\t\tdetail: version.pathLabel,\n\t\t\t\trun: async () => {\n\t\t\t\t\tconst trusted = await vscode.workspace.requestWorkspaceTrust();\n\t\t\t\t\tif (trusted) {\n\t\t\t\t\t\tawait this.workspaceState.update(useWorkspaceTsdkStorageKey, true);\n\t\t\t\t\t\tconst tsConfig = vscode.workspace.getConfiguration('typescript');\n\t\t\t\t\t\tawait tsConfig.update('tsdk', version.pathLabel, false);\n\t\t\t\t\t\tthis.updateActiveVersion(version);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t};\n\t\t});\n\t}\n\n\tprivate async promptUseWorkspaceTsdk(): Promise<void> {\n\t\tconst workspaceVersion = this.versionProvider.localVersion;\n\n\t\tif (workspaceVersion === undefined) {\n\t\t\tthrow new Error('Could not prompt to use workspace TypeScript version because no workspace version is specified');\n\t\t}\n\n\t\tconst allowIt = vscode.l10n.t(\"Allow\");\n\t\tconst dismissPrompt = vscode.l10n.t(\"Dismiss\");\n\t\tconst suppressPrompt = vscode.l10n.t(\"Never in this Workspace\");\n\n\t\tconst result = await vscode.window.showInformationMessage(vscode.l10n.t(\"This workspace contains a TypeScript version. Would you like to use the workspace TypeScript version for TypeScript and JavaScript language features?\"),\n\t\t\tallowIt,\n\t\t\tdismissPrompt,\n\t\t\tsuppressPrompt\n\t\t);\n\n\t\tif (result === allowIt) {\n\t\t\tawait this.workspaceState.update(useWorkspaceTsdkStorageKey, true);\n\t\t\tthis.updateActiveVersion(workspaceVersion);\n\t\t} else if (result === suppressPrompt) {\n\t\t\tawait this.workspaceState.update(suppressPromptWorkspaceTsdkStorageKey, true);\n\t\t}\n\t}\n\n\tprivate updateActiveVersion(pickedVersion: TypeScriptVersion) {\n\t\tconst oldVersion = this.currentVersion;\n\t\tthis._currentVersion = pickedVersion;\n\t\tif (!oldVersion.eq(pickedVersion)) {\n\t\t\tthis._onDidPickNewVersion.fire();\n\t\t}\n\t}\n\n\tprivate get useWorkspaceTsdkSetting(): boolean {\n\t\treturn this.workspaceState.get<boolean>(useWorkspaceTsdkStorageKey, false);\n\t}\n\n\tprivate get suppressPromptWorkspaceTsdkSetting(): boolean {\n\t\treturn this.workspaceState.get<boolean>(suppressPromptWorkspaceTsdkStorageKey, false);\n\t}\n\n\tprivate isInPromptWorkspaceTsdkState(configuration: TypeScriptServiceConfiguration) {\n\t\treturn (\n\t\t\tconfiguration.localTsdk !== null\n\t\t\t&& configuration.enablePromptUseWorkspaceTsdk === true\n\t\t\t&& this.suppressPromptWorkspaceTsdkSetting === false\n\t\t\t&& this.useWorkspaceTsdkSetting === false\n\t\t);\n\t}\n}\n\nconst LearnMorePickItem: QuickPickItem = {\n\tlabel: vscode.l10n.t(\"Learn more about managing TypeScript versions\"),\n\tdescription: '',\n\trun: () => {\n\t\tvscode.env.openExternal(vscode.Uri.parse('https://go.microsoft.com/fwlink/?linkid=839919'));\n\t}\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const addMissingAwait = 'addMissingAwait';\nexport const addMissingNewOperator = 'addMissingNewOperator';\nexport const addMissingOverride = 'fixOverrideModifier';\nexport const annotateWithTypeFromJSDoc = 'annotateWithTypeFromJSDoc';\nexport const awaitInSyncFunction = 'fixAwaitInSyncFunction';\nexport const classDoesntImplementInheritedAbstractMember = 'fixClassDoesntImplementInheritedAbstractMember';\nexport const classIncorrectlyImplementsInterface = 'fixClassIncorrectlyImplementsInterface';\nexport const constructorForDerivedNeedSuperCall = 'constructorForDerivedNeedSuperCall';\nexport const extendsInterfaceBecomesImplements = 'extendsInterfaceBecomesImplements';\nexport const fixImport = 'import';\nexport const forgottenThisPropertyAccess = 'forgottenThisPropertyAccess';\nexport const removeUnnecessaryAwait = 'removeUnnecessaryAwait';\nexport const spelling = 'spelling';\nexport const inferFromUsage = 'inferFromUsage';\nexport const addNameToNamelessParameter = 'addNameToNamelessParameter';\nexport const fixMissingFunctionDeclaration = 'fixMissingFunctionDeclaration';\nexport const fixClassDoesntImplementInheritedAbstractMember = 'fixClassDoesntImplementInheritedAbstractMember';\nexport const unreachableCode = 'fixUnreachableCode';\nexport const unusedIdentifier = 'unusedIdentifier';\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Cancellation = void 0;\nvar Cancellation;\n(function (Cancellation) {\n    /**\n     * Adds cancellation data to a message. Such a message is usually send via\n     * `MessagePort.postMessage` to another web worker using a *asynchronous*\n     * message channel. The function is therefore called on the sending side\n     * of a message.\n     *\n     * The cancellation data is stored using the property `$cancellationData`\n     * on the provided message object.\n     *\n     * @param message The message to add cancellation data to.\n     * @returns A function when called cancels the message.\n     */\n    function addData(message) {\n        if (message.$cancellationData !== undefined) {\n            throw new Error(`Message already has a property $cancellationData`);\n        }\n        const data = new SharedArrayBuffer(4);\n        const typedArray = new Int32Array(data, 0, 1);\n        typedArray[0] = 0;\n        message.$cancellationData = data;\n        return () => {\n            Atomics.store(typedArray, 0, 1);\n        };\n    }\n    Cancellation.addData = addData;\n    /**\n     * Return for the given message a function that if call indicates whether\n     * the message got canceled or not. The necessary cancellation data is\n     * expected to be stored under the property `$cancellationData` and must\n     * be of type `SharedArrayBuffer`. The function is usually called on the\n     * receiving side of a message.\n\n     * @param message The given message.\n     * @returns a function to check if the message got canceled.\n     */\n    function retrieveCheck(message) {\n        const candidate = message;\n        if (!(candidate instanceof SharedArrayBuffer)) {\n            return () => false;\n        }\n        const typedArray = new Int32Array(candidate.$cancellationData, 0, 1);\n        return () => {\n            return Atomics.load(typedArray, 0) === 1;\n        };\n    }\n    Cancellation.retrieveCheck = retrieveCheck;\n})(Cancellation = exports.Cancellation || (exports.Cancellation = {}));\n//# sourceMappingURL=messageCancellation.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"@vscode/sync-api-common\"), exports);\n__exportStar(require(\"./apiService\"), exports);\n//# sourceMappingURL=main.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Command } from './commandManager';\n\nexport interface OpenJsDocLinkCommand_Args {\n\treadonly file: {\n\t\treadonly scheme: string;\n\t\treadonly authority?: string;\n\t\treadonly path?: string;\n\t\treadonly query?: string;\n\t\treadonly fragment?: string;\n\t};\n\treadonly position: {\n\t\treadonly line: number;\n\t\treadonly character: number;\n\t};\n}\n\n/**\n * Proxy command for opening links in jsdoc comments.\n *\n * This is needed to avoid incorrectly rewriting uris.\n */\nexport class OpenJsDocLinkCommand implements Command {\n\tpublic static readonly id = '_typescript.openJsDocLink';\n\tpublic readonly id = OpenJsDocLinkCommand.id;\n\n\tpublic async execute(args: OpenJsDocLinkCommand_Args): Promise<void> {\n\t\tconst { line, character } = args.position;\n\t\tconst position = new vscode.Position(line, character);\n\t\tawait vscode.commands.executeCommand('vscode.open', vscode.Uri.from(args.file), {\n\t\t\tselection: new vscode.Range(position, position),\n\t\t} satisfies vscode.TextDocumentShowOptions);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { API } from '../tsServer/api';\nimport { ITypeScriptServiceClient } from '../typescriptService';\n\n\ninterface Directive {\n\treadonly value: string;\n\treadonly description: string;\n}\n\nconst tsDirectives: Directive[] = [\n\t{\n\t\tvalue: '@ts-check',\n\t\tdescription: vscode.l10n.t(\"Enables semantic checking in a JavaScript file. Must be at the top of a file.\")\n\t}, {\n\t\tvalue: '@ts-nocheck',\n\t\tdescription: vscode.l10n.t(\"Disables semantic checking in a JavaScript file. Must be at the top of a file.\")\n\t}, {\n\t\tvalue: '@ts-ignore',\n\t\tdescription: vscode.l10n.t(\"Suppresses @ts-check errors on the next line of a file.\")\n\t}\n];\n\nconst tsDirectives390: Directive[] = [\n\t...tsDirectives,\n\t{\n\t\tvalue: '@ts-expect-error',\n\t\tdescription: vscode.l10n.t(\"Suppresses @ts-check errors on the next line of a file, expecting at least one to exist.\")\n\t}\n];\n\nclass DirectiveCommentCompletionProvider implements vscode.CompletionItemProvider {\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t) { }\n\n\tpublic provideCompletionItems(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\t_token: vscode.CancellationToken\n\t): vscode.CompletionItem[] {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst line = document.lineAt(position.line).text;\n\t\tconst prefix = line.slice(0, position.character);\n\t\tconst match = prefix.match(/^\\s*\\/\\/+\\s?(@[a-zA-Z\\-]*)?$/);\n\t\tif (match) {\n\t\t\tconst directives = this.client.apiVersion.gte(API.v390)\n\t\t\t\t? tsDirectives390\n\t\t\t\t: tsDirectives;\n\n\t\t\treturn directives.map(directive => {\n\t\t\t\tconst item = new vscode.CompletionItem(directive.value, vscode.CompletionItemKind.Snippet);\n\t\t\t\titem.detail = directive.description;\n\t\t\t\titem.range = new vscode.Range(position.line, Math.max(0, position.character - (match[1] ? match[1].length : 0)), position.line, position.character);\n\t\t\t\treturn item;\n\t\t\t});\n\t\t}\n\t\treturn [];\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn vscode.languages.registerCompletionItemProvider(selector.syntax,\n\t\tnew DirectiveCommentCompletionProvider(client),\n\t\t'@');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { TypeScriptServiceConfiguration } from '../configuration/configuration';\nimport { API } from './api';\n\n\nexport const enum TypeScriptVersionSource {\n\tBundled = 'bundled',\n\tTsNightlyExtension = 'ts-nightly-extension',\n\tNodeModules = 'node-modules',\n\tUserSetting = 'user-setting',\n\tWorkspaceSetting = 'workspace-setting',\n}\n\nexport class TypeScriptVersion {\n\n\tconstructor(\n\t\tpublic readonly source: TypeScriptVersionSource,\n\t\tpublic readonly path: string,\n\t\tpublic readonly apiVersion: API | undefined,\n\t\tprivate readonly _pathLabel?: string,\n\t) { }\n\n\tpublic get tsServerPath(): string {\n\t\treturn this.path;\n\t}\n\n\tpublic get pathLabel(): string {\n\t\treturn this._pathLabel ?? this.path;\n\t}\n\n\tpublic get isValid(): boolean {\n\t\treturn this.apiVersion !== undefined;\n\t}\n\n\tpublic eq(other: TypeScriptVersion): boolean {\n\t\tif (this.path !== other.path) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.apiVersion === other.apiVersion) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!this.apiVersion || !other.apiVersion) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.apiVersion.eq(other.apiVersion);\n\t}\n\n\tpublic get displayName(): string {\n\t\tconst version = this.apiVersion;\n\t\treturn version ? version.displayName : vscode.l10n.t(\"Could not load the TypeScript version at this path\");\n\t}\n}\n\nexport interface ITypeScriptVersionProvider {\n\tupdateConfiguration(configuration: TypeScriptServiceConfiguration): void;\n\n\treadonly defaultVersion: TypeScriptVersion;\n\treadonly globalVersion: TypeScriptVersion | undefined;\n\treadonly localVersion: TypeScriptVersion | undefined;\n\treadonly localVersions: readonly TypeScriptVersion[];\n\treadonly bundledVersion: TypeScriptVersion;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport class Lazy<T> {\n\n\tprivate _didRun: boolean = false;\n\tprivate _value?: T;\n\tprivate _error: Error | undefined;\n\n\tconstructor(\n\t\tprivate readonly executor: () => T,\n\t) { }\n\n\t/**\n\t * True if the lazy value has been resolved.\n\t */\n\tget hasValue() { return this._didRun; }\n\n\t/**\n\t * Get the wrapped value.\n\t *\n\t * This will force evaluation of the lazy value if it has not been resolved yet. Lazy values are only\n\t * resolved once. `getValue` will re-throw exceptions that are hit while resolving the value\n\t */\n\tget value(): T {\n\t\tif (!this._didRun) {\n\t\t\ttry {\n\t\t\t\tthis._value = this.executor();\n\t\t\t} catch (err) {\n\t\t\t\tthis._error = err;\n\t\t\t} finally {\n\t\t\t\tthis._didRun = true;\n\t\t\t}\n\t\t}\n\t\tif (this._error) {\n\t\t\tthrow this._error;\n\t\t}\n\t\treturn this._value!;\n\t}\n\n\t/**\n\t * Get the wrapped value without forcing evaluation.\n\t */\n\tget rawValue(): T | undefined { return this._value; }\n\n\tmap<R>(fn: (value: T) => R): Lazy<R> {\n\t\treturn new Lazy(() => fn(this.value));\n\t}\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// ###################################################################################################################################################\r\n// Note: DON'T Export these const from the package as we are still targeting IE/ES5 this will export a mutable variables that someone could change ###\r\n// ###################################################################################################################################################\r\nexport var UNDEFINED_VALUE = undefined;\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_CHANNELS = \"channels\";\r\nexport var STR_CORE = \"core\";\r\nexport var STR_CREATE_PERF_MGR = \"createPerfMgr\";\r\nexport var STR_DISABLED = \"disabled\";\r\nexport var STR_EXTENSION_CONFIG = \"extensionConfig\";\r\nexport var STR_EXTENSIONS = \"extensions\";\r\nexport var STR_PROCESS_TELEMETRY = \"processTelemetry\";\r\nexport var STR_PRIORITY = \"priority\";\r\nexport var STR_EVENTS_SENT = \"eventsSent\";\r\nexport var STR_EVENTS_DISCARDED = \"eventsDiscarded\";\r\nexport var STR_EVENTS_SEND_REQUEST = \"eventsSendRequest\";\r\nexport var STR_PERF_EVENT = \"perfEvent\";\r\nexport var STR_OFFLINE_STORE = \"offlineEventsStored\";\r\nexport var STR_OFFLINE_SENT = \"offlineBatchSent\";\r\nexport var STR_OFFLINE_DROP = \"offlineBatchDrop\";\r\nexport var STR_GET_PERF_MGR = \"getPerfMgr\";\r\nexport var STR_DOMAIN = \"domain\";\r\nexport var STR_PATH = \"path\";\r\nexport var STR_NOT_DYNAMIC_ERROR = \"Not dynamic - \";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { utcNow } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { getCrypto, getMsCrypto, isIE } from \"./EnvUtils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nvar UInt32Mask = 0x100000000;\r\nvar MaxUInt32 = 0xffffffff;\r\nvar SEED1 = 123456789;\r\nvar SEED2 = 987654321;\r\n// MWC based Random generator (for IE)\r\nvar _mwcSeeded = false;\r\nvar _mwcW = SEED1;\r\nvar _mwcZ = SEED2;\r\n// Takes any integer\r\nfunction _mwcSeed(seedValue) {\r\n    if (seedValue < 0) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        seedValue >>>= 0;\r\n    }\r\n    _mwcW = (SEED1 + seedValue) & MaxUInt32;\r\n    _mwcZ = (SEED2 - seedValue) & MaxUInt32;\r\n    _mwcSeeded = true;\r\n}\r\nfunction _autoSeedMwc() {\r\n    // Simple initialization using default Math.random() - So we inherit any entropy from the browser\r\n    // and bitwise XOR with the current milliseconds\r\n    try {\r\n        var now = utcNow() & 0x7fffffff;\r\n        _mwcSeed(((Math.random() * UInt32Mask) ^ now) + now);\r\n    }\r\n    catch (e) {\r\n        // Don't crash if something goes wrong\r\n    }\r\n}\r\n/**\r\n * Generate a random value between 0 and maxValue, max value should be limited to a 32-bit maximum.\r\n * So maxValue(16) will produce a number from 0..16 (range of 17)\r\n * @param maxValue\r\n */\r\nexport function randomValue(maxValue) {\r\n    if (maxValue > 0) {\r\n        return Math.floor((random32() / MaxUInt32) * (maxValue + 1)) >>> 0;\r\n    }\r\n    return 0;\r\n}\r\n/**\r\n * generate a random 32-bit number (0x000000..0xFFFFFFFF) or (-0x80000000..0x7FFFFFFF), defaults un-unsigned.\r\n * @param signed - True to return a signed 32-bit number (-0x80000000..0x7FFFFFFF) otherwise an unsigned one (0x000000..0xFFFFFFFF)\r\n */\r\nexport function random32(signed) {\r\n    var value = 0;\r\n    var c = getCrypto() || getMsCrypto();\r\n    if (c && c.getRandomValues) {\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = c.getRandomValues(new Uint32Array(1))[0] & MaxUInt32;\r\n    }\r\n    if (value === 0 && isIE()) {\r\n        // For IE 6, 7, 8 (especially on XP) Math.random is not very random\r\n        if (!_mwcSeeded) {\r\n            // Set the seed for the Mwc algorithm\r\n            _autoSeedMwc();\r\n        }\r\n        // Don't use Math.random for IE\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = mwcRandom32() & MaxUInt32;\r\n    }\r\n    if (value === 0) {\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = Math.floor((UInt32Mask * Math.random()) | 0);\r\n    }\r\n    if (!signed) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        value >>>= 0;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Seed the MWC random number generator with the specified seed or a random value\r\n * @param value - optional the number to used as the seed, if undefined, null or zero a random value will be chosen\r\n */\r\nexport function mwcRandomSeed(value) {\r\n    if (!value) {\r\n        _autoSeedMwc();\r\n    }\r\n    else {\r\n        _mwcSeed(value);\r\n    }\r\n}\r\n/**\r\n * Generate a random 32-bit number between (0x000000..0xFFFFFFFF) or (-0x80000000..0x7FFFFFFF), using MWC (Multiply with carry)\r\n * instead of Math.random() defaults to un-signed.\r\n * Used as a replacement random generator for IE to avoid issues with older IE instances.\r\n * @param signed - True to return a signed 32-bit number (-0x80000000..0x7FFFFFFF) otherwise an unsigned one (0x000000..0xFFFFFFFF)\r\n */\r\nexport function mwcRandom32(signed) {\r\n    _mwcZ = (36969 * (_mwcZ & 0xFFFF) + (_mwcZ >> 16)) & MaxUInt32;\r\n    _mwcW = (18000 * (_mwcW & 0xFFFF) + (_mwcW >> 16)) & MaxUInt32;\r\n    var value = (((_mwcZ << 16) + (_mwcW & 0xFFFF)) >>> 0) & MaxUInt32 | 0;\r\n    if (!signed) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        value >>>= 0;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Generate random base64 id string.\r\n * The default length is 22 which is 132-bits so almost the same as a GUID but as base64 (the previous default was 5)\r\n * @param maxLength - Optional value to specify the length of the id to be generated, defaults to 22\r\n */\r\nexport function newId(maxLength) {\r\n    if (maxLength === void 0) { maxLength = 22; }\r\n    var base64chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n    // Start with an initial random number, consuming the value in reverse byte order\r\n    var number = random32() >>> 0; // Make sure it's a +ve number\r\n    var chars = 0;\r\n    var result = STR_EMPTY;\r\n    while (result[_DYN_LENGTH /* @min:%2elength */] < maxLength) {\r\n        chars++;\r\n        result += base64chars.charAt(number & 0x3F);\r\n        number >>>= 6; // Zero fill with right shift\r\n        if (chars === 5) {\r\n            // 5 base64 characters === 30 bits so we don't have enough bits for another base64 char\r\n            // So add on another 30 bits and make sure it's +ve\r\n            number = (((random32() << 2) & 0xFFFFFFFF) | (number & 0x03)) >>> 0;\r\n            chars = 0; // We need to reset the number every 5 chars (30 bits)\r\n        }\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=RandomHelper.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Return a hash value for an object.\n */\nexport function hash(obj: any, hashVal = 0): number {\n\tswitch (typeof obj) {\n\t\tcase 'object':\n\t\t\tif (obj === null) {\n\t\t\t\treturn numberHash(349, hashVal);\n\t\t\t} else if (Array.isArray(obj)) {\n\t\t\t\treturn arrayHash(obj, hashVal);\n\t\t\t}\n\t\t\treturn objectHash(obj, hashVal);\n\t\tcase 'string':\n\t\t\treturn stringHash(obj, hashVal);\n\t\tcase 'boolean':\n\t\t\treturn booleanHash(obj, hashVal);\n\t\tcase 'number':\n\t\t\treturn numberHash(obj, hashVal);\n\t\tcase 'undefined':\n\t\t\treturn 937 * 31;\n\t\tdefault:\n\t\t\treturn numberHash(obj, 617);\n\t}\n}\n\nfunction numberHash(val: number, initialHashVal: number): number {\n\treturn (((initialHashVal << 5) - initialHashVal) + val) | 0;  // hashVal * 31 + ch, keep as int32\n}\n\nfunction booleanHash(b: boolean, initialHashVal: number): number {\n\treturn numberHash(b ? 433 : 863, initialHashVal);\n}\n\nfunction stringHash(s: string, hashVal: number) {\n\thashVal = numberHash(149417, hashVal);\n\tfor (let i = 0, length = s.length; i < length; i++) {\n\t\thashVal = numberHash(s.charCodeAt(i), hashVal);\n\t}\n\treturn hashVal;\n}\n\nfunction arrayHash(arr: any[], initialHashVal: number): number {\n\tinitialHashVal = numberHash(104579, initialHashVal);\n\treturn arr.reduce((hashVal, item) => hash(item, hashVal), initialHashVal);\n}\n\nfunction objectHash(obj: any, initialHashVal: number): number {\n\tinitialHashVal = numberHash(181387, initialHashVal);\n\treturn Object.keys(obj).sort().reduce((hashVal, key) => {\n\t\thashVal = stringHash(key, hashVal);\n\t\treturn hash(obj[key], hashVal);\n\t}, initialHashVal);\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nconst ral = require(\"./lib/common/ral\");\n\nmodule.exports = require('./lib/browser/main');\nmodule.exports.default = ral.default;","const Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","const parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport { RelativeWorkspacePathResolver } from '../utils/relativePathResolver';\nimport { TypeScriptServiceConfiguration } from '../configuration/configuration';\n\n\nexport class TypeScriptPluginPathsProvider {\n\n\tpublic constructor(\n\t\tprivate configuration: TypeScriptServiceConfiguration\n\t) { }\n\n\tpublic updateConfiguration(configuration: TypeScriptServiceConfiguration): void {\n\t\tthis.configuration = configuration;\n\t}\n\n\tpublic getPluginPaths(): string[] {\n\t\tconst pluginPaths = [];\n\t\tfor (const pluginPath of this.configuration.tsServerPluginPaths) {\n\t\t\tpluginPaths.push(...this.resolvePluginPath(pluginPath));\n\t\t}\n\t\treturn pluginPaths;\n\t}\n\n\tprivate resolvePluginPath(pluginPath: string): string[] {\n\t\tif (path.isAbsolute(pluginPath)) {\n\t\t\treturn [pluginPath];\n\t\t}\n\n\t\tconst workspacePath = RelativeWorkspacePathResolver.asAbsoluteWorkspacePath(pluginPath);\n\t\tif (workspacePath !== undefined) {\n\t\t\treturn [workspacePath];\n\t\t}\n\n\t\treturn (vscode.workspace.workspaceFolders || [])\n\t\t\t.map(workspaceFolder => path.join(workspaceFolder.uri.fsPath, pluginPath));\n\t}\n}\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { basename, extname } from 'path';\nimport * as vscode from 'vscode';\nimport { CommandManager } from './commands/commandManager';\nimport { DocumentSelector } from './configuration/documentSelector';\nimport * as fileSchemes from './configuration/fileSchemes';\nimport { LanguageDescription } from './configuration/languageDescription';\nimport { Schemes } from './configuration/schemes';\nimport { DiagnosticKind } from './languageFeatures/diagnostics';\nimport FileConfigurationManager from './languageFeatures/fileConfigurationManager';\nimport { TelemetryReporter } from './logging/telemetry';\nimport { CachedResponse } from './tsServer/cachedResponse';\nimport { ClientCapability } from './typescriptService';\nimport TypeScriptServiceClient from './typescriptServiceClient';\nimport TypingsStatus from './ui/typingsStatus';\nimport { Disposable } from './utils/dispose';\nimport { isWeb, isWebAndHasSharedArrayBuffers, supportsReadableByteStreams } from './utils/platform';\n\n\nconst validateSetting = 'validate.enable';\nconst suggestionSetting = 'suggestionActions.enabled';\n\nexport default class LanguageProvider extends Disposable {\n\n\tconstructor(\n\t\tprivate readonly client: TypeScriptServiceClient,\n\t\tprivate readonly description: LanguageDescription,\n\t\tprivate readonly commandManager: CommandManager,\n\t\tprivate readonly telemetryReporter: TelemetryReporter,\n\t\tprivate readonly typingsStatus: TypingsStatus,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager,\n\t\tprivate readonly onCompletionAccepted: (item: vscode.CompletionItem) => void,\n\t) {\n\t\tsuper();\n\t\tvscode.workspace.onDidChangeConfiguration(this.configurationChanged, this, this._disposables);\n\t\tthis.configurationChanged();\n\n\t\tclient.onReady(() => this.registerProviders());\n\t}\n\n\tprivate get documentSelector(): DocumentSelector {\n\t\tconst semantic: vscode.DocumentFilter[] = [];\n\t\tconst syntax: vscode.DocumentFilter[] = [];\n\t\tfor (const language of this.description.languageIds) {\n\t\t\tsyntax.push({ language });\n\t\t\tfor (const scheme of fileSchemes.getSemanticSupportedSchemes()) {\n\t\t\t\tsemantic.push({ language, scheme });\n\t\t\t}\n\t\t}\n\n\t\treturn { semantic, syntax };\n\t}\n\n\tprivate async registerProviders(): Promise<void> {\n\t\tconst selector = this.documentSelector;\n\n\t\tconst cachedNavTreeResponse = new CachedResponse();\n\n\t\tawait Promise.all([\n\t\t\timport('./languageFeatures/callHierarchy').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/codeLens/implementationsCodeLens').then(provider => this._register(provider.register(selector, this.description, this.client, cachedNavTreeResponse))),\n\t\t\timport('./languageFeatures/codeLens/referencesCodeLens').then(provider => this._register(provider.register(selector, this.description, this.client, cachedNavTreeResponse))),\n\t\t\timport('./languageFeatures/completions').then(provider => this._register(provider.register(selector, this.description, this.client, this.typingsStatus, this.fileConfigurationManager, this.commandManager, this.telemetryReporter, this.onCompletionAccepted))),\n\t\t\timport('./languageFeatures/copyPaste').then(provider => this._register(provider.register(selector, this.description, this.client, this.fileConfigurationManager))),\n\t\t\timport('./languageFeatures/definitions').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/directiveCommentCompletions').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/documentHighlight').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/documentSymbol').then(provider => this._register(provider.register(selector, this.client, cachedNavTreeResponse))),\n\t\t\timport('./languageFeatures/fileReferences').then(provider => this._register(provider.register(this.client, this.commandManager))),\n\t\t\timport('./languageFeatures/fixAll').then(provider => this._register(provider.register(selector, this.client, this.fileConfigurationManager, this.client.diagnosticsManager))),\n\t\t\timport('./languageFeatures/folding').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/formatting').then(provider => this._register(provider.register(selector, this.description, this.client, this.fileConfigurationManager))),\n\t\t\timport('./languageFeatures/hover').then(provider => this._register(provider.register(selector, this.client, this.fileConfigurationManager))),\n\t\t\timport('./languageFeatures/implementations').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/inlayHints').then(provider => this._register(provider.register(selector, this.description, this.client, this.fileConfigurationManager, this.telemetryReporter))),\n\t\t\timport('./languageFeatures/jsDocCompletions').then(provider => this._register(provider.register(selector, this.description, this.client, this.fileConfigurationManager))),\n\t\t\timport('./languageFeatures/linkedEditing').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/organizeImports').then(provider => this._register(provider.register(selector, this.client, this.commandManager, this.fileConfigurationManager, this.telemetryReporter))),\n\t\t\timport('./languageFeatures/quickFix').then(provider => this._register(provider.register(selector, this.client, this.fileConfigurationManager, this.commandManager, this.client.diagnosticsManager, this.telemetryReporter))),\n\t\t\timport('./languageFeatures/refactor').then(provider => this._register(provider.register(selector, this.client, cachedNavTreeResponse, this.fileConfigurationManager, this.commandManager, this.telemetryReporter))),\n\t\t\timport('./languageFeatures/references').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/rename').then(provider => this._register(provider.register(selector, this.description, this.client, this.fileConfigurationManager))),\n\t\t\timport('./languageFeatures/semanticTokens').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/signatureHelp').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/smartSelect').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/sourceDefinition').then(provider => this._register(provider.register(this.client, this.commandManager))),\n\t\t\timport('./languageFeatures/tagClosing').then(provider => this._register(provider.register(selector, this.description, this.client))),\n\t\t\timport('./languageFeatures/typeDefinitions').then(provider => this._register(provider.register(selector, this.client))),\n\t\t]);\n\t}\n\n\tprivate configurationChanged(): void {\n\t\tconst config = vscode.workspace.getConfiguration(this.id, null);\n\t\tthis.updateValidate(config.get(validateSetting, true));\n\t\tthis.updateSuggestionDiagnostics(config.get(suggestionSetting, true));\n\t}\n\n\tpublic handlesUri(resource: vscode.Uri): boolean {\n\t\tconst ext = extname(resource.path).slice(1).toLowerCase();\n\t\treturn this.description.standardFileExtensions.includes(ext) || this.handlesConfigFile(resource);\n\t}\n\n\tpublic handlesDocument(doc: vscode.TextDocument): boolean {\n\t\treturn this.description.languageIds.includes(doc.languageId) || this.handlesConfigFile(doc.uri);\n\t}\n\n\tprivate handlesConfigFile(resource: vscode.Uri) {\n\t\tconst base = basename(resource.fsPath);\n\t\treturn !!base && (!!this.description.configFilePattern && this.description.configFilePattern.test(base));\n\t}\n\n\tprivate get id(): string {\n\t\treturn this.description.id;\n\t}\n\n\tpublic get diagnosticSource(): string {\n\t\treturn this.description.diagnosticSource;\n\t}\n\n\tprivate updateValidate(value: boolean) {\n\t\tthis.client.diagnosticsManager.setValidate(this._diagnosticLanguage, value);\n\t}\n\n\tprivate updateSuggestionDiagnostics(value: boolean) {\n\t\tthis.client.diagnosticsManager.setEnableSuggestions(this._diagnosticLanguage, value);\n\t}\n\n\tpublic reInitialize(): void {\n\t\tthis.client.diagnosticsManager.reInitialize();\n\t}\n\n\tpublic triggerAllDiagnostics(): void {\n\t\tthis.client.bufferSyncSupport.requestAllDiagnostics();\n\t}\n\n\tpublic diagnosticsReceived(\n\t\tdiagnosticsKind: DiagnosticKind,\n\t\tfile: vscode.Uri,\n\t\tdiagnostics: (vscode.Diagnostic & { reportUnnecessary: any; reportDeprecated: any })[],\n\t\tranges: vscode.Range[] | undefined): void {\n\t\tif (diagnosticsKind !== DiagnosticKind.Syntax && !this.client.hasCapabilityForResource(file, ClientCapability.Semantic)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (diagnosticsKind === DiagnosticKind.Semantic && isWeb()) {\n\t\t\tif (\n\t\t\t\t!isWebAndHasSharedArrayBuffers()\n\t\t\t\t|| !supportsReadableByteStreams() // No ata. Will result in lots of false positives\n\t\t\t\t|| this.client.configuration.webProjectWideIntellisenseSuppressSemanticErrors\n\t\t\t\t|| !this.client.configuration.webProjectWideIntellisenseEnabled\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Disable semantic errors in notebooks until we have better notebook support\n\t\tif (diagnosticsKind === DiagnosticKind.Semantic && file.scheme === Schemes.notebookCell) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst config = vscode.workspace.getConfiguration(this.id, file);\n\t\tconst reportUnnecessary = config.get<boolean>('showUnused', true);\n\t\tconst reportDeprecated = config.get<boolean>('showDeprecated', true);\n\t\tthis.client.diagnosticsManager.updateDiagnostics(file, this._diagnosticLanguage, diagnosticsKind, diagnostics.filter(diag => {\n\t\t\t// Don't bother reporting diagnostics we know will not be rendered\n\t\t\tif (!reportUnnecessary) {\n\t\t\t\tif (diag.reportUnnecessary && diag.severity === vscode.DiagnosticSeverity.Hint) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!reportDeprecated) {\n\t\t\t\tif (diag.reportDeprecated && diag.severity === vscode.DiagnosticSeverity.Hint) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}), ranges);\n\t}\n\n\tpublic configFileDiagnosticsReceived(file: vscode.Uri, diagnostics: vscode.Diagnostic[]): void {\n\t\tthis.client.diagnosticsManager.configFileDiagnosticsReceived(file, diagnostics);\n\t}\n\n\tprivate get _diagnosticLanguage() {\n\t\treturn this.description.diagnosticLanguage;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../../tsServer/protocol/protocol';\nimport * as PConst from '../../tsServer/protocol/protocol.const';\n\nexport function snippetForFunctionCall(\n\titem: { insertText?: string | vscode.SnippetString; label: string },\n\tdisplayParts: ReadonlyArray<Proto.SymbolDisplayPart>\n): { snippet: vscode.SnippetString; parameterCount: number } {\n\tif (item.insertText && typeof item.insertText !== 'string') {\n\t\treturn { snippet: item.insertText, parameterCount: 0 };\n\t}\n\n\tconst parameterListParts = getParameterListParts(displayParts);\n\tconst snippet = new vscode.SnippetString();\n\tsnippet.appendText(`${item.insertText || item.label}(`);\n\tappendJoinedPlaceholders(snippet, parameterListParts.parts, ', ');\n\tif (parameterListParts.hasOptionalParameters) {\n\t\tsnippet.appendTabstop();\n\t}\n\tsnippet.appendText(')');\n\tsnippet.appendTabstop(0);\n\treturn { snippet, parameterCount: parameterListParts.parts.length + (parameterListParts.hasOptionalParameters ? 1 : 0) };\n}\n\nfunction appendJoinedPlaceholders(\n\tsnippet: vscode.SnippetString,\n\tparts: ReadonlyArray<Proto.SymbolDisplayPart>,\n\tjoiner: string\n) {\n\tfor (let i = 0; i < parts.length; ++i) {\n\t\tconst paramterPart = parts[i];\n\t\tsnippet.appendPlaceholder(paramterPart.text);\n\t\tif (i !== parts.length - 1) {\n\t\t\tsnippet.appendText(joiner);\n\t\t}\n\t}\n}\n\ninterface ParamterListParts {\n\treadonly parts: ReadonlyArray<Proto.SymbolDisplayPart>;\n\treadonly hasOptionalParameters: boolean;\n}\n\nfunction getParameterListParts(\n\tdisplayParts: ReadonlyArray<Proto.SymbolDisplayPart>\n): ParamterListParts {\n\tconst parts: Proto.SymbolDisplayPart[] = [];\n\tlet optionalParams: Proto.SymbolDisplayPart[] = [];\n\tlet isInMethod = false;\n\tlet hasOptionalParameters = false;\n\tlet parenCount = 0;\n\tlet braceCount = 0;\n\n\touter: for (let i = 0; i < displayParts.length; ++i) {\n\t\tconst part = displayParts[i];\n\t\tswitch (part.kind) {\n\t\t\tcase PConst.DisplayPartKind.methodName:\n\t\t\tcase PConst.DisplayPartKind.functionName:\n\t\t\tcase PConst.DisplayPartKind.text:\n\t\t\tcase PConst.DisplayPartKind.propertyName:\n\t\t\t\tif (parenCount === 0 && braceCount === 0) {\n\t\t\t\t\tisInMethod = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase PConst.DisplayPartKind.parameterName:\n\t\t\t\tif (parenCount === 1 && braceCount === 0 && isInMethod) {\n\t\t\t\t\t// Only take top level paren names\n\t\t\t\t\tconst next = displayParts[i + 1];\n\t\t\t\t\t// Skip optional parameters\n\t\t\t\t\tconst nameIsFollowedByOptionalIndicator = next && next.text === '?';\n\t\t\t\t\t// Skip this parameter\n\t\t\t\t\tconst nameIsThis = part.text === 'this';\n\n\t\t\t\t\t/* Add optional param to temp array. Once a non-optional param is encountered,\n\t\t\t\t\tthis means that previous optional params were mid-list ones, thus they should\n\t\t\t\t\tbe displayed */\n\t\t\t\t\tif (nameIsFollowedByOptionalIndicator) {\n\t\t\t\t\t\toptionalParams.push(part);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparts.push(...optionalParams);\n\t\t\t\t\t\toptionalParams = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!nameIsFollowedByOptionalIndicator && !nameIsThis) {\n\t\t\t\t\t\tparts.push(part);\n\t\t\t\t\t}\n\t\t\t\t\thasOptionalParameters = hasOptionalParameters || nameIsFollowedByOptionalIndicator;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase PConst.DisplayPartKind.punctuation:\n\t\t\t\tif (part.text === '(') {\n\t\t\t\t\t++parenCount;\n\t\t\t\t} else if (part.text === ')') {\n\t\t\t\t\t--parenCount;\n\t\t\t\t\tif (parenCount <= 0 && isInMethod) {\n\t\t\t\t\t\tbreak outer;\n\t\t\t\t\t}\n\t\t\t\t} else if (part.text === '...' && parenCount === 1) {\n\t\t\t\t\t// Found rest parmeter. Do not fill in any further arguments\n\t\t\t\t\thasOptionalParameters = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t} else if (part.text === '{') {\n\t\t\t\t\t++braceCount;\n\t\t\t\t} else if (part.text === '}') {\n\t\t\t\t\t--braceCount;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn { hasOptionalParameters, parts };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { SyntaxServerConfiguration, TsServerLogLevel, TypeScriptServiceConfiguration } from '../configuration/configuration';\nimport { Logger } from '../logging/logger';\nimport { TelemetryReporter } from '../logging/telemetry';\nimport Tracer from '../logging/tracer';\nimport { OngoingRequestCancellerFactory } from '../tsServer/cancellation';\nimport { ClientCapabilities, ClientCapability, ServerType } from '../typescriptService';\nimport { isWeb, isWebAndHasSharedArrayBuffers } from '../utils/platform';\nimport { API } from './api';\nimport { ILogDirectoryProvider } from './logDirectoryProvider';\nimport { TypeScriptPluginPathsProvider } from './pluginPathsProvider';\nimport { PluginManager } from './plugins';\nimport { GetErrRoutingTsServer, ITypeScriptServer, SingleTsServer, SyntaxRoutingTsServer, TsServerDelegate, TsServerLog, TsServerProcessFactory, TsServerProcessKind } from './server';\nimport { TypeScriptVersionManager } from './versionManager';\nimport { ITypeScriptVersionProvider, TypeScriptVersion } from './versionProvider';\nimport { NodeVersionManager } from './nodeManager';\nimport { Lazy } from '../utils/lazy';\n\nconst enum CompositeServerType {\n\t/** Run a single server that handles all commands  */\n\tSingle,\n\n\t/** Run a separate server for syntax commands */\n\tSeparateSyntax,\n\n\t/** Use a separate syntax server while the project is loading */\n\tDynamicSeparateSyntax,\n\n\t/** Only enable the syntax server */\n\tSyntaxOnly\n}\n\nexport class TypeScriptServerSpawner {\n\n\tpublic static readonly tsServerLogOutputChannel = new Lazy<vscode.OutputChannel>(() => {\n\t\treturn vscode.window.createOutputChannel(vscode.l10n.t(\"TypeScript Server Log\"));\n\t});\n\n\tpublic constructor(\n\t\tprivate readonly _versionProvider: ITypeScriptVersionProvider,\n\t\tprivate readonly _versionManager: TypeScriptVersionManager,\n\t\tprivate readonly _nodeVersionManager: NodeVersionManager,\n\t\tprivate readonly _logDirectoryProvider: ILogDirectoryProvider,\n\t\tprivate readonly _pluginPathsProvider: TypeScriptPluginPathsProvider,\n\t\tprivate readonly _logger: Logger,\n\t\tprivate readonly _telemetryReporter: TelemetryReporter,\n\t\tprivate readonly _tracer: Tracer,\n\t\tprivate readonly _factory: TsServerProcessFactory,\n\t) { }\n\n\tpublic spawn(\n\t\tversion: TypeScriptVersion,\n\t\tcapabilities: ClientCapabilities,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\tpluginManager: PluginManager,\n\t\tcancellerFactory: OngoingRequestCancellerFactory,\n\t\tdelegate: TsServerDelegate,\n\t): ITypeScriptServer {\n\t\tlet primaryServer: ITypeScriptServer;\n\t\tconst serverType = this.getCompositeServerType(version, capabilities, configuration);\n\t\tconst shouldUseSeparateDiagnosticsServer = this.shouldUseSeparateDiagnosticsServer(configuration);\n\n\t\tswitch (serverType) {\n\t\t\tcase CompositeServerType.SeparateSyntax:\n\t\t\tcase CompositeServerType.DynamicSeparateSyntax:\n\t\t\t\t{\n\t\t\t\t\tconst enableDynamicRouting = !shouldUseSeparateDiagnosticsServer && serverType === CompositeServerType.DynamicSeparateSyntax;\n\t\t\t\t\tprimaryServer = new SyntaxRoutingTsServer({\n\t\t\t\t\t\tsyntax: this.spawnTsServer(TsServerProcessKind.Syntax, version, configuration, pluginManager, cancellerFactory),\n\t\t\t\t\t\tsemantic: this.spawnTsServer(TsServerProcessKind.Semantic, version, configuration, pluginManager, cancellerFactory),\n\t\t\t\t\t}, delegate, enableDynamicRouting);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase CompositeServerType.Single:\n\t\t\t\t{\n\t\t\t\t\tprimaryServer = this.spawnTsServer(TsServerProcessKind.Main, version, configuration, pluginManager, cancellerFactory);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase CompositeServerType.SyntaxOnly:\n\t\t\t\t{\n\t\t\t\t\tprimaryServer = this.spawnTsServer(TsServerProcessKind.Syntax, version, configuration, pluginManager, cancellerFactory);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t}\n\n\t\tif (shouldUseSeparateDiagnosticsServer) {\n\t\t\treturn new GetErrRoutingTsServer({\n\t\t\t\tgetErr: this.spawnTsServer(TsServerProcessKind.Diagnostics, version, configuration, pluginManager, cancellerFactory),\n\t\t\t\tprimary: primaryServer,\n\t\t\t}, delegate);\n\t\t}\n\n\t\treturn primaryServer;\n\t}\n\n\tprivate getCompositeServerType(\n\t\tversion: TypeScriptVersion,\n\t\tcapabilities: ClientCapabilities,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t): CompositeServerType {\n\t\tif (!capabilities.has(ClientCapability.Semantic)) {\n\t\t\treturn CompositeServerType.SyntaxOnly;\n\t\t}\n\n\t\tswitch (configuration.useSyntaxServer) {\n\t\t\tcase SyntaxServerConfiguration.Always:\n\t\t\t\treturn CompositeServerType.SyntaxOnly;\n\n\t\t\tcase SyntaxServerConfiguration.Never:\n\t\t\t\treturn CompositeServerType.Single;\n\n\t\t\tcase SyntaxServerConfiguration.Auto:\n\t\t\t\treturn version.apiVersion?.gte(API.v400)\n\t\t\t\t\t? CompositeServerType.DynamicSeparateSyntax\n\t\t\t\t\t: CompositeServerType.SeparateSyntax;\n\t\t}\n\t}\n\n\tprivate shouldUseSeparateDiagnosticsServer(\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t): boolean {\n\t\treturn configuration.enableProjectDiagnostics;\n\t}\n\n\tprivate spawnTsServer(\n\t\tkind: TsServerProcessKind,\n\t\tversion: TypeScriptVersion,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\tpluginManager: PluginManager,\n\t\tcancellerFactory: OngoingRequestCancellerFactory,\n\t): ITypeScriptServer {\n\t\tconst apiVersion = version.apiVersion || API.defaultVersion;\n\n\t\tconst canceller = cancellerFactory.create(kind, this._tracer);\n\t\tconst { args, tsServerLog, tsServerTraceDirectory } = this.getTsServerArgs(kind, configuration, version, apiVersion, pluginManager, canceller.cancellationPipeName);\n\n\t\tif (TypeScriptServerSpawner.isLoggingEnabled(configuration)) {\n\t\t\tif (tsServerLog?.type === 'file') {\n\t\t\t\tthis._logger.info(`<${kind}> Log file: ${tsServerLog.uri.fsPath}`);\n\t\t\t} else if (tsServerLog?.type === 'output') {\n\t\t\t\tthis._logger.info(`<${kind}> Logging to output`);\n\t\t\t} else {\n\t\t\t\tthis._logger.error(`<${kind}> Could not create TS Server log`);\n\t\t\t}\n\t\t}\n\n\t\tif (configuration.enableTsServerTracing) {\n\t\t\tif (tsServerTraceDirectory) {\n\t\t\t\tthis._logger.info(`<${kind}> Trace directory: ${tsServerTraceDirectory.fsPath}`);\n\t\t\t} else {\n\t\t\t\tthis._logger.error(`<${kind}> Could not create trace directory`);\n\t\t\t}\n\t\t}\n\n\t\tthis._logger.info(`<${kind}> Forking...`);\n\t\tconst process = this._factory.fork(version, args, kind, configuration, this._versionManager, this._nodeVersionManager, tsServerLog);\n\t\tthis._logger.info(`<${kind}> Starting...`);\n\n\t\treturn new SingleTsServer(\n\t\t\tkind,\n\t\t\tthis.kindToServerType(kind),\n\t\t\tprocess!,\n\t\t\ttsServerLog,\n\t\t\tcanceller,\n\t\t\tversion,\n\t\t\tthis._telemetryReporter,\n\t\t\tthis._tracer);\n\t}\n\n\tprivate kindToServerType(kind: TsServerProcessKind): ServerType {\n\t\tswitch (kind) {\n\t\t\tcase TsServerProcessKind.Syntax:\n\t\t\t\treturn ServerType.Syntax;\n\n\t\t\tcase TsServerProcessKind.Main:\n\t\t\tcase TsServerProcessKind.Semantic:\n\t\t\tcase TsServerProcessKind.Diagnostics:\n\t\t\tdefault:\n\t\t\t\treturn ServerType.Semantic;\n\t\t}\n\t}\n\n\tprivate getTsServerArgs(\n\t\tkind: TsServerProcessKind,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\tcurrentVersion: TypeScriptVersion,\n\t\tapiVersion: API,\n\t\tpluginManager: PluginManager,\n\t\tcancellationPipeName: string | undefined,\n\t): { args: string[]; tsServerLog: TsServerLog | undefined; tsServerTraceDirectory: vscode.Uri | undefined } {\n\t\tconst args: string[] = [];\n\t\tlet tsServerLog: TsServerLog | undefined;\n\t\tlet tsServerTraceDirectory: vscode.Uri | undefined;\n\n\t\tif (kind === TsServerProcessKind.Syntax) {\n\t\t\tif (apiVersion.gte(API.v401)) {\n\t\t\t\targs.push('--serverMode', 'partialSemantic');\n\t\t\t} else {\n\t\t\t\targs.push('--syntaxOnly');\n\t\t\t}\n\t\t}\n\n\t\targs.push('--useInferredProjectPerProjectRoot');\n\n\t\tif (configuration.disableAutomaticTypeAcquisition || kind === TsServerProcessKind.Syntax || kind === TsServerProcessKind.Diagnostics) {\n\t\t\targs.push('--disableAutomaticTypingAcquisition');\n\t\t}\n\n\t\tif (kind === TsServerProcessKind.Semantic || kind === TsServerProcessKind.Main) {\n\t\t\targs.push('--enableTelemetry');\n\t\t}\n\n\t\tif (cancellationPipeName) {\n\t\t\targs.push('--cancellationPipeName', cancellationPipeName + '*');\n\t\t}\n\n\t\tif (TypeScriptServerSpawner.isLoggingEnabled(configuration)) {\n\t\t\tif (isWeb()) {\n\t\t\t\targs.push('--logVerbosity', TsServerLogLevel.toString(configuration.tsServerLogLevel));\n\t\t\t\ttsServerLog = { type: 'output', output: TypeScriptServerSpawner.tsServerLogOutputChannel.value };\n\t\t\t} else {\n\t\t\t\tconst logDir = this._logDirectoryProvider.getNewLogDirectory();\n\t\t\t\tif (logDir) {\n\t\t\t\t\tconst logFilePath = vscode.Uri.joinPath(logDir, `tsserver.log`);\n\t\t\t\t\ttsServerLog = { type: 'file', uri: logFilePath };\n\n\t\t\t\t\targs.push('--logVerbosity', TsServerLogLevel.toString(configuration.tsServerLogLevel));\n\t\t\t\t\targs.push('--logFile', logFilePath.fsPath);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (configuration.enableTsServerTracing && !isWeb()) {\n\t\t\ttsServerTraceDirectory = this._logDirectoryProvider.getNewLogDirectory();\n\t\t\tif (tsServerTraceDirectory) {\n\t\t\t\targs.push('--traceDirectory', `\"${tsServerTraceDirectory.fsPath}\"`);\n\t\t\t}\n\t\t}\n\n\t\tconst pluginPaths = isWeb() ? [] : this._pluginPathsProvider.getPluginPaths();\n\n\t\tif (pluginManager.plugins.length) {\n\t\t\targs.push('--globalPlugins', pluginManager.plugins.map(x => x.name).join(','));\n\n\t\t\tconst isUsingBundledTypeScriptVersion = currentVersion.path === this._versionProvider.defaultVersion.path;\n\t\t\tfor (const plugin of pluginManager.plugins) {\n\t\t\t\tif (isUsingBundledTypeScriptVersion || plugin.enableForWorkspaceTypeScriptVersions) {\n\t\t\t\t\tpluginPaths.push(isWeb() ? plugin.uri.toString() : plugin.uri.fsPath);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (pluginPaths.length !== 0) {\n\t\t\targs.push('--pluginProbeLocations', pluginPaths.join(','));\n\t\t}\n\n\t\tif (configuration.npmLocation && !isWeb()) {\n\t\t\targs.push('--npmLocation', `\"${configuration.npmLocation}\"`);\n\t\t}\n\n\t\targs.push('--locale', TypeScriptServerSpawner.getTsLocale(configuration));\n\n\t\targs.push('--noGetErrOnBackgroundUpdate');\n\n\t\tconst configUseVsCodeWatcher = configuration.useVsCodeWatcher;\n\t\tconst isYarnPnp = apiVersion.isYarnPnp();\n\t\tif (\n\t\t\tapiVersion.gte(API.v544)\n\t\t\t&& configUseVsCodeWatcher\n\t\t\t&& !isYarnPnp // Disable for yarn pnp as it currently breaks with the VS Code watcher\n\t\t) {\n\t\t\targs.push('--canUseWatchEvents');\n\t\t} else {\n\t\t\tif (!configUseVsCodeWatcher) {\n\t\t\t\tthis._logger.info(`<${kind}> Falling back to legacy node.js based file watching because of user settings.`);\n\t\t\t} else if (isYarnPnp) {\n\t\t\t\tthis._logger.info(`<${kind}> Falling back to legacy node.js based file watching because of Yarn PnP.`);\n\t\t\t}\n\t\t}\n\n\t\targs.push('--validateDefaultNpmLocation');\n\n\t\tif (isWebAndHasSharedArrayBuffers()) {\n\t\t\targs.push('--enableProjectWideIntelliSenseOnWeb');\n\t\t}\n\n\t\treturn { args, tsServerLog, tsServerTraceDirectory };\n\t}\n\n\tprivate static isLoggingEnabled(configuration: TypeScriptServiceConfiguration) {\n\t\treturn configuration.tsServerLogLevel !== TsServerLogLevel.Off;\n\t}\n\n\tprivate static getTsLocale(configuration: TypeScriptServiceConfiguration): string {\n\t\treturn configuration.locale\n\t\t\t? configuration.locale\n\t\t\t: vscode.env.language;\n\t}\n}\n\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Command } from './commandManager';\n\nexport const tsNativeExtensionId = 'typescriptteam.native-preview';\n\nexport class EnableTsgoCommand implements Command {\n\tpublic readonly id = 'typescript.experimental.enableTsgo';\n\n\tpublic async execute(): Promise<void> {\n\t\tawait updateTsgoSetting(true);\n\t}\n}\n\nexport class DisableTsgoCommand implements Command {\n\tpublic readonly id = 'typescript.experimental.disableTsgo';\n\n\tpublic async execute(): Promise<void> {\n\t\tawait updateTsgoSetting(false);\n\t}\n}\n\n/**\n * Updates the TypeScript Go setting and reloads extension host.\n * @param enable Whether to enable or disable TypeScript Go\n */\nasync function updateTsgoSetting(enable: boolean): Promise<void> {\n\tconst tsgoExtension = vscode.extensions.getExtension(tsNativeExtensionId);\n\t// Error if the TypeScript Go extension is not installed with a button to open the GitHub repo\n\tif (!tsgoExtension) {\n\t\tconst selection = await vscode.window.showErrorMessage(\n\t\t\tvscode.l10n.t('The TypeScript Go extension is not installed.'),\n\t\t\t{\n\t\t\t\ttitle: vscode.l10n.t('Open on GitHub'),\n\t\t\t\tisCloseAffordance: true,\n\t\t\t}\n\t\t);\n\n\t\tif (selection) {\n\t\t\tawait vscode.env.openExternal(vscode.Uri.parse('https://github.com/microsoft/typescript-go'));\n\t\t}\n\t}\n\n\tconst tsConfig = vscode.workspace.getConfiguration('typescript');\n\tconst currentValue = tsConfig.get<boolean>('experimental.useTsgo', false);\n\tif (currentValue === enable) {\n\t\treturn;\n\t}\n\n\t// Determine the target scope for the configuration update\n\tlet target = vscode.ConfigurationTarget.Global;\n\tconst inspect = tsConfig.inspect<boolean>('experimental.useTsgo');\n\tif (inspect?.workspaceValue !== undefined) {\n\t\ttarget = vscode.ConfigurationTarget.Workspace;\n\t} else if (inspect?.workspaceFolderValue !== undefined) {\n\t\ttarget = vscode.ConfigurationTarget.WorkspaceFolder;\n\t} else {\n\t\t// If setting is not defined yet, use the same scope as typescript-go.executablePath\n\t\tconst tsgoConfig = vscode.workspace.getConfiguration('typescript-go');\n\t\tconst tsgoInspect = tsgoConfig.inspect<string>('executablePath');\n\n\t\tif (tsgoInspect?.workspaceValue !== undefined) {\n\t\t\ttarget = vscode.ConfigurationTarget.Workspace;\n\t\t} else if (tsgoInspect?.workspaceFolderValue !== undefined) {\n\t\t\ttarget = vscode.ConfigurationTarget.WorkspaceFolder;\n\t\t}\n\t}\n\n\tawait tsConfig.update('experimental.useTsgo', enable, target);\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { getGlobal, strShimObject, strShimPrototype, strShimUndefined } from \"@microsoft/applicationinsights-shims\";\r\nimport { getDocument, getInst, getNavigator, getPerformance, hasNavigator, isFunction, isString, isUndefined, strIndexOf } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH, _DYN_NAME, _DYN_SPLIT, _DYN_TO_LOWER_CASE, _DYN_USER_AGENT } from \"../__DynamicConstants\";\r\nimport { strContains } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n/**\r\n * This file exists to hold environment utilities that are required to check and\r\n * validate the current operating environment. Unless otherwise required, please\r\n * only use defined methods (functions) in this class so that users of these\r\n * functions/properties only need to include those that are used within their own modules.\r\n */\r\nvar strDocumentMode = \"documentMode\";\r\nvar strLocation = \"location\";\r\nvar strConsole = \"console\";\r\nvar strJSON = \"JSON\";\r\nvar strCrypto = \"crypto\";\r\nvar strMsCrypto = \"msCrypto\";\r\nvar strReactNative = \"ReactNative\";\r\nvar strMsie = \"msie\";\r\nvar strTrident = \"trident/\";\r\nvar strXMLHttpRequest = \"XMLHttpRequest\";\r\nvar _isTrident = null;\r\nvar _navUserAgentCheck = null;\r\nvar _enableMocks = false;\r\nvar _useXDomainRequest = null;\r\nvar _beaconsSupported = null;\r\nfunction _hasProperty(theClass, property) {\r\n    var supported = false;\r\n    if (theClass) {\r\n        try {\r\n            supported = property in theClass;\r\n            if (!supported) {\r\n                var proto = theClass[strShimPrototype];\r\n                if (proto) {\r\n                    supported = property in proto;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Do Nothing\r\n        }\r\n        if (!supported) {\r\n            try {\r\n                var tmp = new theClass();\r\n                supported = !isUndefined(tmp[property]);\r\n            }\r\n            catch (e) {\r\n                // Do Nothing\r\n            }\r\n        }\r\n    }\r\n    return supported;\r\n}\r\n/**\r\n * Enable the lookup of test mock objects if requested\r\n * @param enabled\r\n */\r\nexport function setEnableEnvMocks(enabled) {\r\n    _enableMocks = enabled;\r\n}\r\n/**\r\n * Returns the global location object if it is present otherwise null.\r\n * This helper is used to access the location object without causing an exception\r\n * \"Uncaught ReferenceError: location is not defined\"\r\n */\r\nexport function getLocation(checkForMock) {\r\n    if (checkForMock && _enableMocks) {\r\n        var mockLocation = getInst(\"__mockLocation\");\r\n        if (mockLocation) {\r\n            return mockLocation;\r\n        }\r\n    }\r\n    if (typeof location === strShimObject && location) {\r\n        return location;\r\n    }\r\n    return getInst(strLocation);\r\n}\r\n/**\r\n * Returns the global console object\r\n */\r\nexport function getConsole() {\r\n    if (typeof console !== strShimUndefined) {\r\n        return console;\r\n    }\r\n    return getInst(strConsole);\r\n}\r\n/**\r\n * Checks if JSON object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a history\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: JSON is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasJSON() {\r\n    return Boolean((typeof JSON === strShimObject && JSON) || getInst(strJSON) !== null);\r\n}\r\n/**\r\n * Returns the global JSON object if it is present otherwise null.\r\n * This helper is used to access the JSON object without causing an exception\r\n * \"Uncaught ReferenceError: JSON is not defined\"\r\n */\r\nexport function getJSON() {\r\n    if (hasJSON()) {\r\n        return JSON || getInst(strJSON);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Returns the crypto object if it is present otherwise null.\r\n * This helper is used to access the crypto object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getCrypto() {\r\n    return getInst(strCrypto);\r\n}\r\n/**\r\n * Returns the crypto object if it is present otherwise null.\r\n * This helper is used to access the crypto object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getMsCrypto() {\r\n    return getInst(strMsCrypto);\r\n}\r\n/**\r\n * Returns whether the environment is reporting that we are running in a React Native Environment\r\n */\r\nexport function isReactNative() {\r\n    // If running in React Native, navigator.product will be populated\r\n    var nav = getNavigator();\r\n    if (nav && nav.product) {\r\n        return nav.product === strReactNative;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Identifies whether the current environment appears to be IE\r\n */\r\nexport function isIE() {\r\n    var nav = getNavigator();\r\n    if (nav && (nav[_DYN_USER_AGENT /* @min:%2euserAgent */] !== _navUserAgentCheck || _isTrident === null)) {\r\n        // Added to support test mocking of the user agent\r\n        _navUserAgentCheck = nav[_DYN_USER_AGENT /* @min:%2euserAgent */];\r\n        var userAgent = (_navUserAgentCheck || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n        _isTrident = (strContains(userAgent, strMsie) || strContains(userAgent, strTrident));\r\n    }\r\n    return _isTrident;\r\n}\r\n/**\r\n * Gets IE version returning the document emulation mode if we are running on IE, or null otherwise\r\n */\r\nexport function getIEVersion(userAgentStr) {\r\n    if (userAgentStr === void 0) { userAgentStr = null; }\r\n    if (!userAgentStr) {\r\n        var navigator_1 = getNavigator() || {};\r\n        userAgentStr = navigator_1 ? (navigator_1.userAgent || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() : STR_EMPTY;\r\n    }\r\n    var ua = (userAgentStr || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    // Also check for documentMode in case X-UA-Compatible meta tag was included in HTML.\r\n    if (strContains(ua, strMsie)) {\r\n        var doc = getDocument() || {};\r\n        return Math.max(parseInt(ua[_DYN_SPLIT /* @min:%2esplit */](strMsie)[1]), (doc[strDocumentMode] || 0));\r\n    }\r\n    else if (strContains(ua, strTrident)) {\r\n        var tridentVer = parseInt(ua[_DYN_SPLIT /* @min:%2esplit */](strTrident)[1]);\r\n        if (tridentVer) {\r\n            return tridentVer + 4;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function isSafari(userAgentStr) {\r\n    if (!userAgentStr || !isString(userAgentStr)) {\r\n        var navigator_2 = getNavigator() || {};\r\n        userAgentStr = navigator_2 ? (navigator_2.userAgent || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() : STR_EMPTY;\r\n    }\r\n    var ua = (userAgentStr || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    return (strIndexOf(ua, \"safari\") >= 0);\r\n}\r\n/**\r\n * Checks if HTML5 Beacons are supported in the current environment.\r\n * @param useCached - [Optional] used for testing to bypass the cached lookup, when `true` this will\r\n * cause the cached global to be reset.\r\n * @returns True if supported, false otherwise.\r\n */\r\nexport function isBeaconsSupported(useCached) {\r\n    if (_beaconsSupported === null || useCached === false) {\r\n        _beaconsSupported = hasNavigator() && Boolean(getNavigator().sendBeacon);\r\n    }\r\n    return _beaconsSupported;\r\n}\r\n/**\r\n * Checks if the Fetch API is supported in the current environment.\r\n * @param withKeepAlive - [Optional] If True, check if fetch is available and it supports the keepalive feature, otherwise only check if fetch is supported\r\n * @returns True if supported, otherwise false\r\n */\r\nexport function isFetchSupported(withKeepAlive) {\r\n    var isSupported = false;\r\n    try {\r\n        isSupported = !!getInst(\"fetch\");\r\n        var request = getInst(\"Request\");\r\n        if (isSupported && withKeepAlive && request) {\r\n            isSupported = _hasProperty(request, \"keepalive\");\r\n        }\r\n    }\r\n    catch (e) {\r\n        // Just Swallow any failure during availability checks\r\n    }\r\n    return isSupported;\r\n}\r\nexport function useXDomainRequest() {\r\n    if (_useXDomainRequest === null) {\r\n        _useXDomainRequest = (typeof XDomainRequest !== strShimUndefined);\r\n        if (_useXDomainRequest && isXhrSupported()) {\r\n            _useXDomainRequest = _useXDomainRequest && !_hasProperty(getInst(strXMLHttpRequest), \"withCredentials\");\r\n        }\r\n    }\r\n    return _useXDomainRequest;\r\n}\r\n/**\r\n * Checks if XMLHttpRequest is supported\r\n * @returns True if supported, otherwise false\r\n */\r\nexport function isXhrSupported() {\r\n    var isSupported = false;\r\n    try {\r\n        var xmlHttpRequest = getInst(strXMLHttpRequest);\r\n        isSupported = !!xmlHttpRequest;\r\n    }\r\n    catch (e) {\r\n        // Just Swallow any failure during availability checks\r\n    }\r\n    return isSupported;\r\n}\r\nfunction _getNamedValue(values, name) {\r\n    if (values) {\r\n        for (var i = 0; i < values[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n            var value = values[i];\r\n            if (value[_DYN_NAME /* @min:%2ename */]) {\r\n                if (value[_DYN_NAME /* @min:%2ename */] === name) {\r\n                    return value;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {};\r\n}\r\n/**\r\n * Helper function to fetch the named meta-tag from the page.\r\n * @param name\r\n */\r\nexport function findMetaTag(name) {\r\n    var doc = getDocument();\r\n    if (doc && name) {\r\n        // Look for a meta-tag\r\n        return _getNamedValue(doc.querySelectorAll(\"meta\"), name).content;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Helper function to fetch the named server timing value from the page response (first navigation event).\r\n * @param name\r\n */\r\nexport function findNamedServerTiming(name) {\r\n    var value;\r\n    var perf = getPerformance();\r\n    if (perf) {\r\n        // Try looking for a server-timing header\r\n        var navPerf = perf.getEntriesByType(\"navigation\") || [];\r\n        value = _getNamedValue((navPerf[_DYN_LENGTH /* @min:%2elength */] > 0 ? navPerf[0] : {}).serverTiming, name).description;\r\n    }\r\n    return value;\r\n}\r\n// TODO: should reuse this method for analytics plugin\r\nexport function dispatchEvent(target, evnt) {\r\n    if (target && target.dispatchEvent && evnt) {\r\n        target.dispatchEvent(evnt);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function createCustomDomEvent(eventName, details) {\r\n    var event = null;\r\n    var detail = { detail: details || null };\r\n    if (isFunction(CustomEvent)) { // Use CustomEvent constructor when available\r\n        event = new CustomEvent(eventName, detail);\r\n    }\r\n    else { // CustomEvent has no constructor in IE\r\n        var doc = getDocument();\r\n        if (doc && doc.createEvent) {\r\n            event = doc.createEvent(\"CustomEvent\");\r\n            event.initCustomEvent(eventName, true, true, detail);\r\n        }\r\n    }\r\n    return event;\r\n}\r\nexport function sendCustomEvent(evtName, cfg, customDetails) {\r\n    var global = getGlobal();\r\n    if (global && global.CustomEvent) {\r\n        try {\r\n            var details = { cfg: cfg || null, customDetails: customDetails || null };\r\n            return dispatchEvent(global, createCustomDomEvent(evtName, details));\r\n        }\r\n        catch (e) {\r\n            // eslint-disable-next-line no-empty\r\n        }\r\n    }\r\n    return false;\r\n}\r\n//# sourceMappingURL=EnvUtils.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport { Utils } from 'vscode-uri';\nimport { Command, CommandManager } from '../commands/commandManager';\nimport { LearnMoreAboutRefactoringsCommand } from '../commands/learnMoreAboutRefactorings';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport * as fileSchemes from '../configuration/fileSchemes';\nimport { Schemes } from '../configuration/schemes';\nimport { TelemetryReporter } from '../logging/telemetry';\nimport { API } from '../tsServer/api';\nimport { CachedResponse } from '../tsServer/cachedResponse';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as PConst from '../tsServer/protocol/protocol.const';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { coalesce } from '../utils/arrays';\nimport { nulToken } from '../utils/cancellation';\nimport FormattingOptionsManager from './fileConfigurationManager';\nimport { CompositeCommand, EditorChatFollowUp } from './util/copilot';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\n\nfunction toWorkspaceEdit(client: ITypeScriptServiceClient, edits: readonly Proto.FileCodeEdits[]): vscode.WorkspaceEdit {\n\tconst workspaceEdit = new vscode.WorkspaceEdit();\n\tfor (const edit of edits) {\n\t\tconst resource = client.toResource(edit.fileName);\n\t\tif (resource.scheme === fileSchemes.file) {\n\t\t\tworkspaceEdit.createFile(resource, { ignoreIfExists: true });\n\t\t}\n\t}\n\ttypeConverters.WorkspaceEdit.withFileCodeEdits(workspaceEdit, client, edits);\n\treturn workspaceEdit;\n}\n\n\nnamespace DidApplyRefactoringCommand {\n\texport interface Args {\n\t\treadonly action: string;\n\t\treadonly trigger: vscode.CodeActionTriggerKind;\n\t}\n}\n\nclass DidApplyRefactoringCommand implements Command {\n\tpublic static readonly ID = '_typescript.didApplyRefactoring';\n\tpublic readonly id = DidApplyRefactoringCommand.ID;\n\n\tconstructor(\n\t\tprivate readonly telemetryReporter: TelemetryReporter\n\t) { }\n\n\tpublic async execute(args: DidApplyRefactoringCommand.Args): Promise<void> {\n\t\t/* __GDPR__\n\t\t\t\"refactor.execute\" : {\n\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\"action\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"trigger\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"${include}\": [\n\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t]\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryReporter.logTelemetry('refactor.execute', {\n\t\t\taction: args.action,\n\t\t\ttrigger: args.trigger,\n\t\t});\n\t}\n}\nnamespace SelectRefactorCommand {\n\texport interface Args {\n\t\treadonly document: vscode.TextDocument;\n\t\treadonly refactor: Proto.ApplicableRefactorInfo;\n\t\treadonly rangeOrSelection: vscode.Range | vscode.Selection;\n\t\treadonly trigger: vscode.CodeActionTriggerKind;\n\t}\n}\n\nclass SelectRefactorCommand implements Command {\n\tpublic static readonly ID = '_typescript.selectRefactoring';\n\tpublic readonly id = SelectRefactorCommand.ID;\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t) { }\n\n\tpublic async execute(args: SelectRefactorCommand.Args): Promise<void> {\n\t\tconst file = this.client.toOpenTsFilePath(args.document);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selected = await vscode.window.showQuickPick(args.refactor.actions.map((action): vscode.QuickPickItem & { action: Proto.RefactorActionInfo } => ({\n\t\t\taction,\n\t\t\tlabel: action.name,\n\t\t\tdescription: action.description,\n\t\t})));\n\t\tif (!selected) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tsAction = new InlinedCodeAction(this.client, args.document, args.refactor, selected.action, args.rangeOrSelection, args.trigger);\n\t\tawait tsAction.resolve(nulToken);\n\n\t\tif (tsAction.edit) {\n\t\t\tif (!(await vscode.workspace.applyEdit(tsAction.edit, { isRefactoring: true }))) {\n\t\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"Could not apply refactoring\"));\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (tsAction.command) {\n\t\t\tawait vscode.commands.executeCommand(tsAction.command.command, ...(tsAction.command.arguments ?? []));\n\t\t}\n\t}\n}\n\nnamespace MoveToFileRefactorCommand {\n\texport interface Args {\n\t\treadonly document: vscode.TextDocument;\n\t\treadonly action: Proto.RefactorActionInfo;\n\t\treadonly range: vscode.Range;\n\t\treadonly trigger: vscode.CodeActionTriggerKind;\n\t}\n}\n\nclass MoveToFileRefactorCommand implements Command {\n\tpublic static readonly ID = '_typescript.moveToFileRefactoring';\n\tpublic readonly id = MoveToFileRefactorCommand.ID;\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly didApplyCommand: DidApplyRefactoringCommand\n\t) { }\n\n\tpublic async execute(args: MoveToFileRefactorCommand.Args): Promise<void> {\n\t\tconst file = this.client.toOpenTsFilePath(args.document);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst targetFile = await this.getTargetFile(args.document, file, args.range);\n\t\tif (!targetFile || targetFile.toString() === file.toString()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fileSuggestionArgs: Proto.GetEditsForRefactorRequestArgs = {\n\t\t\t...typeConverters.Range.toFileRangeRequestArgs(file, args.range),\n\t\t\taction: 'Move to file',\n\t\t\trefactor: 'Move to file',\n\t\t\tinteractiveRefactorArguments: { targetFile },\n\t\t};\n\n\t\tconst response = await this.client.execute('getEditsForRefactor', fileSuggestionArgs, nulToken);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn;\n\t\t}\n\t\tconst edit = toWorkspaceEdit(this.client, response.body.edits);\n\t\tif (!(await vscode.workspace.applyEdit(edit, { isRefactoring: true }))) {\n\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"Could not apply refactoring\"));\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.didApplyCommand.execute({ action: args.action.name, trigger: args.trigger });\n\t}\n\n\tprivate async getTargetFile(document: vscode.TextDocument, file: string, range: vscode.Range): Promise<string | undefined> {\n\t\tconst args = typeConverters.Range.toFileRangeRequestArgs(file, range);\n\t\tconst response = await this.client.execute('getMoveToRefactoringFileSuggestions', args, nulToken);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn;\n\t\t}\n\t\tconst body = response.body;\n\n\t\ttype DestinationItem = vscode.QuickPickItem & { readonly file?: string };\n\t\tconst selectExistingFileItem: vscode.QuickPickItem = { label: vscode.l10n.t(\"Select existing file...\") };\n\t\tconst selectNewFileItem: vscode.QuickPickItem = { label: vscode.l10n.t(\"Enter new file path...\") };\n\n\t\tconst workspaceFolder = vscode.workspace.getWorkspaceFolder(document.uri);\n\t\tconst quickPick = vscode.window.createQuickPick<DestinationItem>();\n\t\tquickPick.ignoreFocusOut = true;\n\n\t\t// true so we don't skip computing in the first call\n\t\tlet quickPickInRelativeMode = true;\n\t\tconst updateItems = () => {\n\t\t\tconst relativeQuery = ['./', '../'].find(str => quickPick.value.startsWith(str));\n\t\t\tif (quickPickInRelativeMode === false && !!relativeQuery === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tquickPickInRelativeMode = !!relativeQuery;\n\t\t\tconst destinationItems = body.files.map((file): DestinationItem | undefined => {\n\t\t\t\tconst uri = this.client.toResource(file);\n\t\t\t\tconst parentDir = Utils.dirname(uri);\n\t\t\t\tconst filename = Utils.basename(uri);\n\n\t\t\t\tlet description: string | undefined;\n\t\t\t\tif (workspaceFolder) {\n\t\t\t\t\tif (uri.scheme === Schemes.file) {\n\t\t\t\t\t\tdescription = path.relative(workspaceFolder.uri.fsPath, parentDir.fsPath);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdescription = path.posix.relative(workspaceFolder.uri.path, parentDir.path);\n\t\t\t\t\t}\n\t\t\t\t\tif (relativeQuery) {\n\t\t\t\t\t\tconst convertRelativePath = (str: string) => {\n\t\t\t\t\t\t\treturn !str.startsWith('../') ? `./${str}` : str;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst relativePath = convertRelativePath(path.relative(path.dirname(document.uri.fsPath), uri.fsPath));\n\t\t\t\t\t\tif (!relativePath.startsWith(relativeQuery)) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdescription = relativePath;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdescription = parentDir.fsPath;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tfile,\n\t\t\t\t\tlabel: Utils.basename(uri),\n\t\t\t\t\tdescription: relativeQuery ? description : path.join(description, filename),\n\t\t\t\t};\n\t\t\t});\n\t\t\tquickPick.items = [\n\t\t\t\tselectExistingFileItem,\n\t\t\t\tselectNewFileItem,\n\t\t\t\t{ label: vscode.l10n.t(\"destination files\"), kind: vscode.QuickPickItemKind.Separator },\n\t\t\t\t...coalesce(destinationItems)\n\t\t\t];\n\t\t};\n\t\tquickPick.title = vscode.l10n.t(\"Move to File\");\n\t\tquickPick.placeholder = vscode.l10n.t(\"Enter file path\");\n\t\tquickPick.matchOnDescription = true;\n\t\tquickPick.onDidChangeValue(updateItems);\n\t\tupdateItems();\n\n\t\tconst picked = await new Promise<DestinationItem | undefined>(resolve => {\n\t\t\tquickPick.onDidAccept(() => {\n\t\t\t\tresolve(quickPick.selectedItems[0]);\n\t\t\t\tquickPick.dispose();\n\t\t\t});\n\t\t\tquickPick.onDidHide(() => {\n\t\t\t\tresolve(undefined);\n\t\t\t\tquickPick.dispose();\n\t\t\t});\n\t\t\tquickPick.show();\n\t\t});\n\t\tif (!picked) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (picked === selectExistingFileItem) {\n\t\t\tconst picked = await vscode.window.showOpenDialog({\n\t\t\t\ttitle: vscode.l10n.t(\"Select move destination\"),\n\t\t\t\topenLabel: vscode.l10n.t(\"Move to File\"),\n\t\t\t\tdefaultUri: Utils.dirname(document.uri),\n\t\t\t});\n\t\t\treturn picked?.length ? this.client.toTsFilePath(picked[0]) : undefined;\n\t\t} else if (picked === selectNewFileItem) {\n\t\t\tconst picked = await vscode.window.showSaveDialog({\n\t\t\t\ttitle: vscode.l10n.t(\"Select move destination\"),\n\t\t\t\tsaveLabel: vscode.l10n.t(\"Move to File\"),\n\t\t\t\tdefaultUri: this.client.toResource(response.body.newFileName),\n\t\t\t});\n\t\t\treturn picked ? this.client.toTsFilePath(picked) : undefined;\n\t\t} else {\n\t\t\treturn picked.file;\n\t\t}\n\t}\n}\n\ninterface CodeActionKind {\n\treadonly kind: vscode.CodeActionKind;\n\tmatches(refactor: Proto.RefactorActionInfo): boolean;\n}\n\nconst Extract_Function = Object.freeze<CodeActionKind>({\n\tkind: vscode.CodeActionKind.RefactorExtract.append('function'),\n\tmatches: refactor => refactor.name.startsWith('function_')\n});\n\nconst Extract_Constant = Object.freeze<CodeActionKind>({\n\tkind: vscode.CodeActionKind.RefactorExtract.append('constant'),\n\tmatches: refactor => refactor.name.startsWith('constant_')\n});\n\nconst Extract_Type = Object.freeze<CodeActionKind>({\n\tkind: vscode.CodeActionKind.RefactorExtract.append('type'),\n\tmatches: refactor => refactor.name.startsWith('Extract to type alias')\n});\n\nconst Extract_Interface = Object.freeze<CodeActionKind>({\n\tkind: vscode.CodeActionKind.RefactorExtract.append('interface'),\n\tmatches: refactor => refactor.name.startsWith('Extract to interface')\n});\n\nconst Move_File = Object.freeze<CodeActionKind>({\n\tkind: vscode.CodeActionKind.RefactorMove.append('file'),\n\tmatches: refactor => refactor.name.startsWith('Move to file')\n});\n\nconst Move_NewFile = Object.freeze<CodeActionKind>({\n\tkind: vscode.CodeActionKind.RefactorMove.append('newFile'),\n\tmatches: refactor => refactor.name.startsWith('Move to a new file')\n});\n\nconst Rewrite_Import = Object.freeze<CodeActionKind>({\n\tkind: vscode.CodeActionKind.RefactorRewrite.append('import'),\n\tmatches: refactor => refactor.name.startsWith('Convert namespace import') || refactor.name.startsWith('Convert named imports')\n});\n\nconst Rewrite_Export = Object.freeze<CodeActionKind>({\n\tkind: vscode.CodeActionKind.RefactorRewrite.append('export'),\n\tmatches: refactor => refactor.name.startsWith('Convert default export') || refactor.name.startsWith('Convert named export')\n});\n\nconst Rewrite_Arrow_Braces = Object.freeze<CodeActionKind>({\n\tkind: vscode.CodeActionKind.RefactorRewrite.append('arrow').append('braces'),\n\tmatches: refactor => refactor.name.startsWith('Convert default export') || refactor.name.startsWith('Convert named export')\n});\n\nconst Rewrite_Parameters_ToDestructured = Object.freeze<CodeActionKind>({\n\tkind: vscode.CodeActionKind.RefactorRewrite.append('parameters').append('toDestructured'),\n\tmatches: refactor => refactor.name.startsWith('Convert parameters to destructured object')\n});\n\nconst Rewrite_Property_GenerateAccessors = Object.freeze<CodeActionKind>({\n\tkind: vscode.CodeActionKind.RefactorRewrite.append('property').append('generateAccessors'),\n\tmatches: refactor => refactor.name.startsWith('Generate \\'get\\' and \\'set\\' accessors')\n});\n\nconst allKnownCodeActionKinds = [\n\tExtract_Function,\n\tExtract_Constant,\n\tExtract_Type,\n\tExtract_Interface,\n\tMove_File,\n\tMove_NewFile,\n\tRewrite_Import,\n\tRewrite_Export,\n\tRewrite_Arrow_Braces,\n\tRewrite_Parameters_ToDestructured,\n\tRewrite_Property_GenerateAccessors\n];\n\nclass InlinedCodeAction extends vscode.CodeAction {\n\tconstructor(\n\t\tpublic readonly client: ITypeScriptServiceClient,\n\t\tpublic readonly document: vscode.TextDocument,\n\t\tpublic readonly refactor: Proto.ApplicableRefactorInfo,\n\t\tpublic readonly action: Proto.RefactorActionInfo,\n\t\tpublic readonly range: vscode.Range,\n\t\ttrigger: vscode.CodeActionTriggerKind,\n\t) {\n\t\tconst title = action.description;\n\t\tsuper(title, InlinedCodeAction.getKind(action));\n\n\t\tif (action.notApplicableReason) {\n\t\t\tthis.disabled = { reason: action.notApplicableReason };\n\t\t}\n\n\t\tthis.command = {\n\t\t\ttitle,\n\t\t\tcommand: DidApplyRefactoringCommand.ID,\n\t\t\targuments: [{ action: action.name, trigger } satisfies DidApplyRefactoringCommand.Args],\n\t\t};\n\t}\n\n\tpublic async resolve(token: vscode.CancellationToken): Promise<undefined> {\n\t\tconst file = this.client.toOpenTsFilePath(this.document);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst args: Proto.GetEditsForRefactorRequestArgs = {\n\t\t\t...typeConverters.Range.toFileRangeRequestArgs(file, this.range),\n\t\t\trefactor: this.refactor.name,\n\t\t\taction: this.action.name,\n\t\t};\n\n\t\tconst response = await this.client.execute('getEditsForRefactor', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.edit = toWorkspaceEdit(this.client, response.body.edits);\n\t\tif (!this.edit.size) {\n\t\t\tvscode.window.showErrorMessage(vscode.l10n.t(\"Could not apply refactoring\"));\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.body.renameLocation) {\n\t\t\t// Disable renames in interactive playground https://github.com/microsoft/vscode/issues/75137\n\t\t\tif (this.document.uri.scheme !== fileSchemes.walkThroughSnippet) {\n\t\t\t\tthis.command = {\n\t\t\t\t\tcommand: CompositeCommand.ID,\n\t\t\t\t\ttitle: '',\n\t\t\t\t\targuments: coalesce([\n\t\t\t\t\t\tthis.command,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcommand: 'editor.action.rename',\n\t\t\t\t\t\t\targuments: [[\n\t\t\t\t\t\t\t\tthis.document.uri,\n\t\t\t\t\t\t\t\ttypeConverters.Position.fromLocation(response.body.renameLocation)\n\t\t\t\t\t\t\t]]\n\t\t\t\t\t\t},\n\t\t\t\t\t])\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static getKind(refactor: Proto.RefactorActionInfo) {\n\t\tif ((refactor as Proto.RefactorActionInfo & { kind?: string }).kind) {\n\t\t\treturn vscode.CodeActionKind.Empty.append((refactor as Proto.RefactorActionInfo & { kind?: string }).kind!);\n\t\t}\n\t\tconst match = allKnownCodeActionKinds.find(kind => kind.matches(refactor));\n\t\treturn match ? match.kind : vscode.CodeActionKind.Refactor;\n\t}\n}\n\nclass MoveToFileCodeAction extends vscode.CodeAction {\n\tconstructor(\n\t\tdocument: vscode.TextDocument,\n\t\taction: Proto.RefactorActionInfo,\n\t\trange: vscode.Range,\n\t\ttrigger: vscode.CodeActionTriggerKind,\n\t) {\n\t\tsuper(action.description, Move_File.kind);\n\n\t\tif (action.notApplicableReason) {\n\t\t\tthis.disabled = { reason: action.notApplicableReason };\n\t\t}\n\n\t\tthis.command = {\n\t\t\ttitle: action.description,\n\t\t\tcommand: MoveToFileRefactorCommand.ID,\n\t\t\targuments: [{ action, document, range, trigger } satisfies MoveToFileRefactorCommand.Args]\n\t\t};\n\t}\n}\n\nclass SelectCodeAction extends vscode.CodeAction {\n\tconstructor(\n\t\tinfo: Proto.ApplicableRefactorInfo,\n\t\tdocument: vscode.TextDocument,\n\t\trangeOrSelection: vscode.Range | vscode.Selection,\n\t\ttrigger: vscode.CodeActionTriggerKind,\n\t) {\n\t\tsuper(info.description, vscode.CodeActionKind.Refactor);\n\t\tthis.command = {\n\t\t\ttitle: info.description,\n\t\t\tcommand: SelectRefactorCommand.ID,\n\t\t\targuments: [{ document, refactor: info, rangeOrSelection, trigger } satisfies SelectRefactorCommand.Args]\n\t\t};\n\t}\n}\ntype TsCodeAction = InlinedCodeAction | MoveToFileCodeAction | SelectCodeAction;\n\nclass TypeScriptRefactorProvider implements vscode.CodeActionProvider<TsCodeAction> {\n\n\tprivate static readonly _declarationKinds = new Set([\n\t\tPConst.Kind.module,\n\t\tPConst.Kind.class,\n\t\tPConst.Kind.interface,\n\t\tPConst.Kind.function,\n\t\tPConst.Kind.enum,\n\t\tPConst.Kind.type,\n\t\tPConst.Kind.const,\n\t\tPConst.Kind.variable,\n\t\tPConst.Kind.let,\n\t]);\n\n\tprivate static isOnSignatureName(node: Proto.NavigationTree, range: vscode.Range): boolean {\n\t\tif (this._declarationKinds.has(node.kind)) {\n\t\t\t// Show when on the name span\n\t\t\tif (node.nameSpan) {\n\t\t\t\tconst convertedSpan = typeConverters.Range.fromTextSpan(node.nameSpan);\n\t\t\t\tif (range.intersection(convertedSpan)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Show when on the same line as an exported symbols without a name (handles default exports)\n\t\t\tif (!node.nameSpan && /\\bexport\\b/.test(node.kindModifiers) && node.spans.length) {\n\t\t\t\tconst convertedSpan = typeConverters.Range.fromTextSpan(node.spans[0]);\n\t\t\t\tif (range.intersection(new vscode.Range(convertedSpan.start.line, 0, convertedSpan.start.line, Number.MAX_SAFE_INTEGER))) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Show if on the signature of any children\n\t\treturn node.childItems?.some(child => this.isOnSignatureName(child, range)) ?? false;\n\t}\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly cachedNavTree: CachedResponse<Proto.NavTreeResponse>,\n\t\tprivate readonly formattingOptionsManager: FormattingOptionsManager,\n\t\tcommandManager: CommandManager,\n\t\ttelemetryReporter: TelemetryReporter\n\t) {\n\t\tconst didApplyRefactoringCommand = new DidApplyRefactoringCommand(telemetryReporter);\n\t\tcommandManager.register(didApplyRefactoringCommand);\n\n\t\tcommandManager.register(new CompositeCommand());\n\t\tcommandManager.register(new SelectRefactorCommand(this.client));\n\t\tcommandManager.register(new MoveToFileRefactorCommand(this.client, didApplyRefactoringCommand));\n\t\tcommandManager.register(new EditorChatFollowUp(this.client, telemetryReporter));\n\t}\n\n\tpublic static readonly metadata: vscode.CodeActionProviderMetadata = {\n\t\tprovidedCodeActionKinds: [\n\t\t\tvscode.CodeActionKind.Refactor,\n\t\t\t...allKnownCodeActionKinds.map(x => x.kind),\n\t\t],\n\t\tdocumentation: [\n\t\t\t{\n\t\t\t\tkind: vscode.CodeActionKind.Refactor,\n\t\t\t\tcommand: {\n\t\t\t\t\tcommand: LearnMoreAboutRefactoringsCommand.id,\n\t\t\t\t\ttitle: vscode.l10n.t(\"Learn more about JS/TS refactorings\")\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t};\n\n\tpublic async provideCodeActions(\n\t\tdocument: vscode.TextDocument,\n\t\trangeOrSelection: vscode.Range | vscode.Selection,\n\t\tcontext: vscode.CodeActionContext,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<TsCodeAction[] | undefined> {\n\t\tif (!this.shouldTrigger(context, rangeOrSelection)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!this.client.toOpenTsFilePath(document)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst response = await this.interruptGetErrIfNeeded(context, () => {\n\t\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\t\tif (!file) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tthis.formattingOptionsManager.ensureConfigurationForDocument(document, token);\n\n\t\t\tconst args: Proto.GetApplicableRefactorsRequestArgs = {\n\t\t\t\t...typeConverters.Range.toFileRangeRequestArgs(file, rangeOrSelection),\n\t\t\t\ttriggerReason: this.toTsTriggerReason(context),\n\t\t\t\tkind: context.only?.value,\n\t\t\t\tincludeInteractiveActions: this.client.apiVersion.gte(API.v520),\n\t\t\t};\n\t\t\treturn this.client.execute('getApplicableRefactors', args, token);\n\t\t});\n\t\tif (response?.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst applicableRefactors = this.convertApplicableRefactors(document, context, response.body, rangeOrSelection);\n\t\tconst actions = coalesce(await Promise.all(Array.from(applicableRefactors, async action => {\n\t\t\tif (this.client.apiVersion.lt(API.v430)) {\n\t\t\t\t// Don't show 'infer return type' refactoring unless it has been explicitly requested\n\t\t\t\t// https://github.com/microsoft/TypeScript/issues/42993\n\t\t\t\tif (!context.only && action.kind?.value === 'refactor.rewrite.function.returnType') {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Don't include move actions on auto light bulb unless you are on a declaration name\n\t\t\tif (this.client.apiVersion.lt(API.v540) && context.triggerKind === vscode.CodeActionTriggerKind.Automatic) {\n\t\t\t\tif (action.kind?.value === Move_NewFile.kind.value || action.kind?.value === Move_File.kind.value) {\n\t\t\t\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\t\t\t\tif (!file) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst navTree = await this.cachedNavTree.execute(document, () => this.client.execute('navtree', { file }, token));\n\t\t\t\t\tif (navTree.type !== 'response' || !navTree.body || !TypeScriptRefactorProvider.isOnSignatureName(navTree.body, rangeOrSelection)) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn action;\n\t\t})));\n\n\t\tif (!context.only) {\n\t\t\treturn actions;\n\t\t}\n\n\t\treturn this.pruneInvalidActions(this.appendInvalidActions(actions), context.only, /* numberOfInvalid = */ 5);\n\t}\n\n\tprivate interruptGetErrIfNeeded<R>(context: vscode.CodeActionContext, f: () => R): R {\n\t\t// Only interrupt diagnostics computation when code actions are explicitly\n\t\t// (such as using the refactor command or a keybinding). This is a clear\n\t\t// user action so we want to return results as quickly as possible.\n\t\tif (context.triggerKind === vscode.CodeActionTriggerKind.Invoke) {\n\t\t\treturn this.client.interruptGetErr(f);\n\t\t} else {\n\t\t\treturn f();\n\t\t}\n\t}\n\n\tpublic async resolveCodeAction(\n\t\tcodeAction: TsCodeAction,\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<TsCodeAction> {\n\t\tif (codeAction instanceof InlinedCodeAction) {\n\t\t\tawait codeAction.resolve(token);\n\t\t}\n\t\treturn codeAction;\n\t}\n\n\tprivate toTsTriggerReason(context: vscode.CodeActionContext): Proto.RefactorTriggerReason | undefined {\n\t\treturn context.triggerKind === vscode.CodeActionTriggerKind.Invoke ? 'invoked' : 'implicit';\n\t}\n\n\tprivate *convertApplicableRefactors(\n\t\tdocument: vscode.TextDocument,\n\t\tcontext: vscode.CodeActionContext,\n\t\trefactors: readonly Proto.ApplicableRefactorInfo[],\n\t\trangeOrSelection: vscode.Range | vscode.Selection\n\t): Iterable<TsCodeAction> {\n\t\tfor (const refactor of refactors) {\n\t\t\tif (refactor.inlineable === false) {\n\t\t\t\tyield new SelectCodeAction(refactor, document, rangeOrSelection, context.triggerKind);\n\t\t\t} else {\n\t\t\t\tfor (const action of refactor.actions) {\n\t\t\t\t\tfor (const codeAction of this.refactorActionToCodeActions(document, context, refactor, action, rangeOrSelection, refactor.actions)) {\n\t\t\t\t\t\tyield codeAction;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate refactorActionToCodeActions(\n\t\tdocument: vscode.TextDocument,\n\t\tcontext: vscode.CodeActionContext,\n\t\trefactor: Proto.ApplicableRefactorInfo,\n\t\taction: Proto.RefactorActionInfo,\n\t\trangeOrSelection: vscode.Range | vscode.Selection,\n\t\tallActions: readonly Proto.RefactorActionInfo[],\n\t): TsCodeAction[] {\n\t\tconst codeActions: TsCodeAction[] = [];\n\t\tif (action.name === 'Move to file') {\n\t\t\tcodeActions.push(new MoveToFileCodeAction(document, action, rangeOrSelection, context.triggerKind));\n\t\t} else {\n\t\t\tcodeActions.push(new InlinedCodeAction(this.client, document, refactor, action, rangeOrSelection, context.triggerKind));\n\t\t}\n\t\tfor (const codeAction of codeActions) {\n\t\t\tcodeAction.isPreferred = TypeScriptRefactorProvider.isPreferred(action, allActions);\n\t\t}\n\t\treturn codeActions;\n\t}\n\n\tprivate shouldTrigger(context: vscode.CodeActionContext, rangeOrSelection: vscode.Range | vscode.Selection) {\n\t\tif (context.only && !vscode.CodeActionKind.Refactor.contains(context.only)) {\n\t\t\treturn false;\n\t\t}\n\t\tif (context.triggerKind === vscode.CodeActionTriggerKind.Invoke) {\n\t\t\treturn true;\n\t\t}\n\t\treturn rangeOrSelection instanceof vscode.Selection;\n\t}\n\n\tprivate static isPreferred(\n\t\taction: Proto.RefactorActionInfo,\n\t\tallActions: readonly Proto.RefactorActionInfo[],\n\t): boolean {\n\t\tif (Extract_Constant.matches(action)) {\n\t\t\t// Only mark the action with the lowest scope as preferred\n\t\t\tconst getScope = (name: string) => {\n\t\t\t\tconst scope = name.match(/scope_(\\d)/)?.[1];\n\t\t\t\treturn scope ? +scope : undefined;\n\t\t\t};\n\t\t\tconst scope = getScope(action.name);\n\t\t\tif (typeof scope !== 'number') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn allActions\n\t\t\t\t.filter(otherAtion => otherAtion !== action && Extract_Constant.matches(otherAtion))\n\t\t\t\t.every(otherAction => {\n\t\t\t\t\tconst otherScope = getScope(otherAction.name);\n\t\t\t\t\treturn typeof otherScope === 'number' ? scope < otherScope : true;\n\t\t\t\t});\n\t\t}\n\t\tif (Extract_Type.matches(action) || Extract_Interface.matches(action)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate appendInvalidActions(actions: vscode.CodeAction[]): vscode.CodeAction[] {\n\t\tif (this.client.apiVersion.gte(API.v400)) {\n\t\t\t// Invalid actions come from TS server instead\n\t\t\treturn actions;\n\t\t}\n\n\t\tif (!actions.some(action => action.kind && Extract_Constant.kind.contains(action.kind))) {\n\t\t\tconst disabledAction = new vscode.CodeAction(\n\t\t\t\tvscode.l10n.t(\"Extract to constant\"),\n\t\t\t\tExtract_Constant.kind);\n\n\t\t\tdisabledAction.disabled = {\n\t\t\t\treason: vscode.l10n.t(\"The current selection cannot be extracted\"),\n\t\t\t};\n\t\t\tdisabledAction.isPreferred = true;\n\n\t\t\tactions.push(disabledAction);\n\t\t}\n\n\t\tif (!actions.some(action => action.kind && Extract_Function.kind.contains(action.kind))) {\n\t\t\tconst disabledAction = new vscode.CodeAction(\n\t\t\t\tvscode.l10n.t(\"Extract to function\"),\n\t\t\t\tExtract_Function.kind);\n\n\t\t\tdisabledAction.disabled = {\n\t\t\t\treason: vscode.l10n.t(\"The current selection cannot be extracted\"),\n\t\t\t};\n\t\t\tactions.push(disabledAction);\n\t\t}\n\t\treturn actions;\n\t}\n\n\tprivate pruneInvalidActions(actions: vscode.CodeAction[], only?: vscode.CodeActionKind, numberOfInvalid?: number): vscode.CodeAction[] {\n\t\tif (this.client.apiVersion.lt(API.v400)) {\n\t\t\t// Older TS version don't return extra actions\n\t\t\treturn actions;\n\t\t}\n\n\t\tconst availableActions: vscode.CodeAction[] = [];\n\t\tconst invalidCommonActions: vscode.CodeAction[] = [];\n\t\tconst invalidUncommonActions: vscode.CodeAction[] = [];\n\t\tfor (const action of actions) {\n\t\t\tif (!action.disabled) {\n\t\t\t\tavailableActions.push(action);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// These are the common refactors that we should always show if applicable.\n\t\t\tif (action.kind && (Extract_Constant.kind.contains(action.kind) || Extract_Function.kind.contains(action.kind))) {\n\t\t\t\tinvalidCommonActions.push(action);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// These are the remaining refactors that we can show if we haven't reached the max limit with just common refactors.\n\t\t\tinvalidUncommonActions.push(action);\n\t\t}\n\n\t\tconst prioritizedActions: vscode.CodeAction[] = [];\n\t\tprioritizedActions.push(...invalidCommonActions);\n\t\tprioritizedActions.push(...invalidUncommonActions);\n\t\tconst topNInvalid = prioritizedActions.filter(action => !only || (action.kind && only.contains(action.kind))).slice(0, numberOfInvalid);\n\t\tavailableActions.push(...topNInvalid);\n\t\treturn availableActions;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n\tcachedNavTree: CachedResponse<Proto.NavTreeResponse>,\n\tformattingOptionsManager: FormattingOptionsManager,\n\tcommandManager: CommandManager,\n\ttelemetryReporter: TelemetryReporter,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerCodeActionsProvider(selector.semantic,\n\t\t\tnew TypeScriptRefactorProvider(client, cachedNavTree, formattingOptionsManager, commandManager, telemetryReporter),\n\t\t\tTypeScriptRefactorProvider.metadata);\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as Proto from './tsServer/protocol/protocol';\nimport BufferSyncSupport from './tsServer/bufferSyncSupport';\nimport { ExecutionTarget } from './tsServer/server';\nimport { TypeScriptVersion } from './tsServer/versionProvider';\nimport { API } from './tsServer/api';\nimport { TypeScriptServiceConfiguration } from './configuration/configuration';\nimport { PluginManager } from './tsServer/plugins';\nimport { TelemetryReporter } from './logging/telemetry';\n\nexport enum ServerType {\n\tSyntax = 'syntax',\n\tSemantic = 'semantic',\n}\n\nexport namespace ServerResponse {\n\n\texport class Cancelled {\n\t\tpublic readonly type = 'cancelled';\n\n\t\tconstructor(\n\t\t\tpublic readonly reason: string\n\t\t) { }\n\t}\n\n\texport const NoContent = { type: 'noContent' } as const;\n\n\texport const NoServer = { type: 'noServer' } as const;\n\n\texport type Response<T extends Proto.Response> = T | Cancelled | typeof NoContent | typeof NoServer;\n}\n\ninterface StandardTsServerRequests {\n\t'applyCodeActionCommand': [Proto.ApplyCodeActionCommandRequestArgs, Proto.ApplyCodeActionCommandResponse];\n\t'completionEntryDetails': [Proto.CompletionDetailsRequestArgs, Proto.CompletionDetailsResponse];\n\t'completionInfo': [Proto.CompletionsRequestArgs, Proto.CompletionInfoResponse];\n\t'completions': [Proto.CompletionsRequestArgs, Proto.CompletionsResponse];\n\t'configure': [Proto.ConfigureRequestArguments, Proto.ConfigureResponse];\n\t'definition': [Proto.FileLocationRequestArgs, Proto.DefinitionResponse];\n\t'definitionAndBoundSpan': [Proto.FileLocationRequestArgs, Proto.DefinitionInfoAndBoundSpanResponse];\n\t'docCommentTemplate': [Proto.FileLocationRequestArgs, Proto.DocCommandTemplateResponse];\n\t'documentHighlights': [Proto.DocumentHighlightsRequestArgs, Proto.DocumentHighlightsResponse];\n\t'format': [Proto.FormatRequestArgs, Proto.FormatResponse];\n\t'formatonkey': [Proto.FormatOnKeyRequestArgs, Proto.FormatResponse];\n\t'getApplicableRefactors': [Proto.GetApplicableRefactorsRequestArgs, Proto.GetApplicableRefactorsResponse];\n\t'getCodeFixes': [Proto.CodeFixRequestArgs, Proto.CodeFixResponse];\n\t'getCombinedCodeFix': [Proto.GetCombinedCodeFixRequestArgs, Proto.GetCombinedCodeFixResponse];\n\t'getEditsForFileRename': [Proto.GetEditsForFileRenameRequestArgs, Proto.GetEditsForFileRenameResponse];\n\t'getEditsForRefactor': [Proto.GetEditsForRefactorRequestArgs, Proto.GetEditsForRefactorResponse];\n\t'getOutliningSpans': [Proto.FileRequestArgs, Proto.OutliningSpansResponse];\n\t'getSupportedCodeFixes': [null, Proto.GetSupportedCodeFixesResponse];\n\t'implementation': [Proto.FileLocationRequestArgs, Proto.ImplementationResponse];\n\t'jsxClosingTag': [Proto.JsxClosingTagRequestArgs, Proto.JsxClosingTagResponse];\n\t'navto': [Proto.NavtoRequestArgs, Proto.NavtoResponse];\n\t'navtree': [Proto.FileRequestArgs, Proto.NavTreeResponse];\n\t'organizeImports': [Proto.OrganizeImportsRequestArgs, Proto.OrganizeImportsResponse];\n\t'projectInfo': [Proto.ProjectInfoRequestArgs, Proto.ProjectInfoResponse];\n\t'quickinfo': [Proto.FileLocationRequestArgs, Proto.QuickInfoResponse];\n\t'references': [Proto.FileLocationRequestArgs, Proto.ReferencesResponse];\n\t'rename': [Proto.RenameRequestArgs, Proto.RenameResponse];\n\t'selectionRange': [Proto.SelectionRangeRequestArgs, Proto.SelectionRangeResponse];\n\t'signatureHelp': [Proto.SignatureHelpRequestArgs, Proto.SignatureHelpResponse];\n\t'typeDefinition': [Proto.FileLocationRequestArgs, Proto.TypeDefinitionResponse];\n\t'updateOpen': [Proto.UpdateOpenRequestArgs, Proto.Response];\n\t'prepareCallHierarchy': [Proto.FileLocationRequestArgs, Proto.PrepareCallHierarchyResponse];\n\t'provideCallHierarchyIncomingCalls': [Proto.FileLocationRequestArgs, Proto.ProvideCallHierarchyIncomingCallsResponse];\n\t'provideCallHierarchyOutgoingCalls': [Proto.FileLocationRequestArgs, Proto.ProvideCallHierarchyOutgoingCallsResponse];\n\t'fileReferences': [Proto.FileRequestArgs, Proto.FileReferencesResponse];\n\t'provideInlayHints': [Proto.InlayHintsRequestArgs, Proto.InlayHintsResponse];\n\t'encodedSemanticClassifications-full': [Proto.EncodedSemanticClassificationsRequestArgs, Proto.EncodedSemanticClassificationsResponse];\n\t'findSourceDefinition': [Proto.FileLocationRequestArgs, Proto.DefinitionResponse];\n\t'getMoveToRefactoringFileSuggestions': [Proto.GetMoveToRefactoringFileSuggestionsRequestArgs, Proto.GetMoveToRefactoringFileSuggestions];\n\t'linkedEditingRange': [Proto.FileLocationRequestArgs, Proto.LinkedEditingRangeResponse];\n\t'mapCode': [Proto.MapCodeRequestArgs, Proto.MapCodeResponse];\n\t'getPasteEdits': [Proto.GetPasteEditsRequestArgs, Proto.GetPasteEditsResponse];\n\t'preparePasteEdits': [Proto.PreparePasteEditsRequestArgs, Proto.PreparePasteEditsResponse];\n}\n\ninterface NoResponseTsServerRequests {\n\t'open': [Proto.OpenRequestArgs, null];\n\t'close': [Proto.FileRequestArgs, null];\n\t'change': [Proto.ChangeRequestArgs, null];\n\t'compilerOptionsForInferredProjects': [Proto.SetCompilerOptionsForInferredProjectsArgs, null];\n\t'reloadProjects': [null, null];\n\t'configurePlugin': [Proto.ConfigurePluginRequest, Proto.ConfigurePluginResponse];\n\t'watchChange': [Proto.Request, null];\n}\n\ninterface AsyncTsServerRequests {\n\t'geterr': [Proto.GeterrRequestArgs, Proto.Response];\n\t'geterrForProject': [Proto.GeterrForProjectRequestArgs, Proto.Response];\n}\n\nexport type TypeScriptRequests = StandardTsServerRequests & NoResponseTsServerRequests & AsyncTsServerRequests;\n\nexport type ExecConfig = {\n\treadonly lowPriority?: boolean;\n\treadonly nonRecoverable?: boolean;\n\treadonly cancelOnResourceChange?: vscode.Uri;\n\treadonly executionTarget?: ExecutionTarget;\n};\n\nexport enum ClientCapability {\n\t/**\n\t * Basic syntax server. All clients should support this.\n\t */\n\tSyntax,\n\n\t/**\n\t * Advanced syntax server that can provide single file IntelliSense.\n\t */\n\tEnhancedSyntax,\n\n\t/**\n\t * Complete, multi-file semantic server\n\t */\n\tSemantic,\n}\n\nexport class ClientCapabilities {\n\tprivate readonly capabilities: ReadonlySet<ClientCapability>;\n\n\tconstructor(...capabilities: ClientCapability[]) {\n\t\tthis.capabilities = new Set(capabilities);\n\t}\n\n\tpublic has(capability: ClientCapability): boolean {\n\t\treturn this.capabilities.has(capability);\n\t}\n}\n\nexport interface ITypeScriptServiceClient {\n\n\t/**\n\t * Convert a (VS Code) resource to a path that TypeScript server understands.\n\t */\n\ttoTsFilePath(resource: vscode.Uri): string | undefined;\n\n\t/**\n\t * Convert a path to a resource.\n\t */\n\ttoResource(filepath: string): vscode.Uri;\n\n\t/**\n\t * Tries to ensure that a vscode document is open on the TS server.\n\t *\n\t * @return The normalized path or `undefined` if the document is not open on the server.\n\t */\n\ttoOpenTsFilePath(document: vscode.TextDocument | vscode.Uri, options?: {\n\t\tsuppressAlertOnFailure?: boolean;\n\t}): string | undefined;\n\n\t/**\n\t * Checks if `resource` has a given capability.\n\t */\n\thasCapabilityForResource(resource: vscode.Uri, capability: ClientCapability): boolean;\n\n\tgetWorkspaceRootForResource(resource: vscode.Uri): vscode.Uri | undefined;\n\n\treadonly onTsServerStarted: vscode.Event<{ version: TypeScriptVersion; usedApiVersion: API }>;\n\treadonly onProjectLanguageServiceStateChanged: vscode.Event<Proto.ProjectLanguageServiceStateEventBody>;\n\treadonly onDidBeginInstallTypings: vscode.Event<Proto.BeginInstallTypesEventBody>;\n\treadonly onDidEndInstallTypings: vscode.Event<Proto.EndInstallTypesEventBody>;\n\treadonly onTypesInstallerInitializationFailed: vscode.Event<Proto.TypesInstallerInitializationFailedEventBody>;\n\n\treadonly capabilities: ClientCapabilities;\n\treadonly onDidChangeCapabilities: vscode.Event<void>;\n\n\tonReady(f: () => void): Promise<void>;\n\n\tshowVersionPicker(): void;\n\n\treadonly apiVersion: API;\n\n\treadonly pluginManager: PluginManager;\n\treadonly configuration: TypeScriptServiceConfiguration;\n\treadonly bufferSyncSupport: BufferSyncSupport;\n\treadonly telemetryReporter: TelemetryReporter;\n\n\texecute<K extends keyof StandardTsServerRequests>(\n\t\tcommand: K,\n\t\targs: StandardTsServerRequests[K][0],\n\t\ttoken: vscode.CancellationToken,\n\t\tconfig?: ExecConfig\n\t): Promise<ServerResponse.Response<StandardTsServerRequests[K][1]>>;\n\n\texecuteWithoutWaitingForResponse<K extends keyof NoResponseTsServerRequests>(\n\t\tcommand: K,\n\t\targs: NoResponseTsServerRequests[K][0]\n\t): void;\n\n\texecuteAsync<K extends keyof AsyncTsServerRequests>(\n\t\tcommand: K,\n\t\targs: AsyncTsServerRequests[K][0],\n\t\ttoken: vscode.CancellationToken\n\t): Promise<ServerResponse.Response<Proto.Response>>;\n\n\t/**\n\t * Cancel on going geterr requests and re-queue them after `f` has been evaluated.\n\t */\n\tinterruptGetErr<R>(f: () => R): R;\n}\n","const parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { BaseServiceConfigurationProvider } from './configuration';\n\nexport class BrowserServiceConfigurationProvider extends BaseServiceConfigurationProvider {\n\n\t// On browsers, we only support using the built-in TS version\n\tprotected readGlobalTsdk(_configuration: vscode.WorkspaceConfiguration): string | null {\n\t\treturn null;\n\t}\n\n\tprotected readLocalTsdk(_configuration: vscode.WorkspaceConfiguration): string | null {\n\t\treturn null;\n\t}\n\n\t// On browsers, we don't run TSServer on Node\n\tprotected readLocalNodePath(_configuration: vscode.WorkspaceConfiguration): string | null {\n\t\treturn null;\n\t}\n\n\tprotected override readGlobalNodePath(_configuration: vscode.WorkspaceConfiguration): string | null {\n\t\treturn null;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { isJsConfigOrTsConfigFileName } from '../configuration/languageDescription';\nimport { isSupportedLanguageMode } from '../configuration/languageIds';\nimport { Disposable } from '../utils/dispose';\nimport { coalesce } from '../utils/arrays';\n\n/**\n * Tracks the active JS/TS editor.\n *\n * This tries to handle the case where the user focuses in the output view / debug console.\n * When this happens, we want to treat the last real focused editor as the active editor,\n * instead of using `vscode.window.activeTextEditor`\n */\nexport class ActiveJsTsEditorTracker extends Disposable {\n\n\tprivate _activeJsTsEditor: vscode.TextEditor | undefined;\n\n\tprivate readonly _onDidChangeActiveJsTsEditor = this._register(new vscode.EventEmitter<vscode.TextEditor | undefined>());\n\tpublic readonly onDidChangeActiveJsTsEditor = this._onDidChangeActiveJsTsEditor.event;\n\n\tpublic constructor() {\n\t\tsuper();\n\n\t\tthis._register(vscode.window.onDidChangeActiveTextEditor(_ => this.update()));\n\t\tthis._register(vscode.window.onDidChangeVisibleTextEditors(_ => this.update()));\n\t\tthis._register(vscode.window.tabGroups.onDidChangeTabGroups(_ => this.update()));\n\n\t\tthis.update();\n\t}\n\n\tpublic get activeJsTsEditor(): vscode.TextEditor | undefined {\n\t\treturn this._activeJsTsEditor;\n\t}\n\n\n\tprivate update() {\n\t\t// Use tabs to find the active editor.\n\t\t// This correctly handles switching to the output view / debug console, which changes the activeEditor but not\n\t\t// the active tab.\n\t\tconst editorCandidates = this.getEditorCandidatesForActiveTab();\n\t\tconst managedEditors = editorCandidates.filter(editor => this.isManagedFile(editor));\n\t\tconst newActiveJsTsEditor = managedEditors.at(0);\n\t\tif (this._activeJsTsEditor !== newActiveJsTsEditor) {\n\t\t\tthis._activeJsTsEditor = newActiveJsTsEditor;\n\t\t\tthis._onDidChangeActiveJsTsEditor.fire(this._activeJsTsEditor);\n\t\t}\n\t}\n\n\tprivate getEditorCandidatesForActiveTab(): vscode.TextEditor[] {\n\t\tconst tab = vscode.window.tabGroups.activeTabGroup.activeTab;\n\t\tif (!tab) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// Basic text editor tab\n\t\tif (tab.input instanceof vscode.TabInputText) {\n\t\t\tconst inputUri = tab.input.uri;\n\t\t\tconst editor = vscode.window.visibleTextEditors.find(editor => {\n\t\t\t\treturn editor.document.uri.toString() === inputUri.toString()\n\t\t\t\t\t&& editor.viewColumn === tab.group.viewColumn;\n\t\t\t});\n\t\t\treturn editor ? [editor] : [];\n\t\t}\n\n\t\t// Diff editor tab. We could be focused on either side of the editor.\n\t\tif (tab.input instanceof vscode.TabInputTextDiff) {\n\t\t\tconst original = tab.input.original;\n\t\t\tconst modified = tab.input.modified;\n\t\t\t// Check the active editor first. However if a non tab editor like the output view is focused,\n\t\t\t// we still need to check the visible text editors.\n\t\t\t// TODO: This may return incorrect editors incorrect as there does not seem to be a reliable way to map from an editor to the\n\t\t\t// view column of its parent diff editor. See https://github.com/microsoft/vscode/issues/201845\n\t\t\treturn coalesce([vscode.window.activeTextEditor, ...vscode.window.visibleTextEditors]).filter(editor => {\n\t\t\t\treturn (editor.document.uri.toString() === original.toString() || editor.document.uri.toString() === modified.toString())\n\t\t\t\t\t&& editor.viewColumn === undefined; // Editors in diff views have undefined view columns\n\t\t\t});\n\t\t}\n\n\t\t// Notebook editor. Find editor for notebook cell.\n\t\tif (tab.input instanceof vscode.TabInputNotebook) {\n\t\t\tconst activeEditor = vscode.window.activeTextEditor;\n\t\t\tif (!activeEditor) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\t// Notebooks cell editors have undefined view columns.\n\t\t\tif (activeEditor.viewColumn !== undefined) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst notebook = vscode.window.visibleNotebookEditors.find(editor =>\n\t\t\t\teditor.notebook.uri.toString() === (tab.input as vscode.TabInputNotebook).uri.toString()\n\t\t\t\t&& editor.viewColumn === tab.group.viewColumn);\n\n\t\t\treturn notebook?.notebook.getCells().some(cell => cell.document.uri.toString() === activeEditor.document.uri.toString()) ? [activeEditor] : [];\n\t\t}\n\n\t\treturn [];\n\t}\n\n\tprivate isManagedFile(editor: vscode.TextEditor): boolean {\n\t\treturn this.isManagedScriptFile(editor) || this.isManagedConfigFile(editor);\n\t}\n\n\tprivate isManagedScriptFile(editor: vscode.TextEditor): boolean {\n\t\treturn isSupportedLanguageMode(editor.document);\n\t}\n\n\tprivate isManagedConfigFile(editor: vscode.TextEditor): boolean {\n\t\treturn isJsConfigOrTsConfigFileName(editor.document.fileName);\n\t}\n}\n","const Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport interface ILogDirectoryProvider {\n\tgetNewLogDirectory(): vscode.Uri | undefined;\n}\n\nexport const noopLogDirectoryProvider = new class implements ILogDirectoryProvider {\n\tpublic getNewLogDirectory(): undefined {\n\t\treturn undefined;\n\t}\n};\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nexport var ChannelControllerPriority = 500;\r\nexport var DisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\n// export const SampleRate = \"sampleRate\";\r\n// export const ProcessLegacy = \"ProcessLegacy\";\r\n// export const HttpMethod = \"http.method\";\r\n// export const DEFAULT_BREEZE_ENDPOINT = \"https://dc.services.visualstudio.com\";\r\n// export const DEFAULT_BREEZE_PATH = \"/v2/track\";\r\n// export const strNotSpecified = \"not_specified\";\r\n// export const strIkey = \"iKey\";\r\n//# sourceMappingURL=Constants.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { getInst } from \"@nevware21/ts-utils\";\r\nimport { _DYN_APPLY, _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_EVENTS_SENT, STR_PERF_EVENT } from \"./InternalConstants\";\r\nvar listenerFuncs = [STR_EVENTS_SENT, STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_PERF_EVENT];\r\nvar _aiNamespace = null;\r\nvar _debugListener;\r\nfunction _listenerProxyFunc(name, config) {\r\n    return function () {\r\n        var args = arguments;\r\n        var dbgExt = getDebugExt(config);\r\n        if (dbgExt) {\r\n            var listener = dbgExt.listener;\r\n            if (listener && listener[name]) {\r\n                listener[name][_DYN_APPLY /* @min:%2eapply */](listener, args);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction _getExtensionNamespace() {\r\n    // Cache the lookup of the global namespace object\r\n    var target = getInst(\"Microsoft\");\r\n    if (target) {\r\n        _aiNamespace = target[\"ApplicationInsights\"];\r\n    }\r\n    return _aiNamespace;\r\n}\r\nexport function getDebugExt(config) {\r\n    var ns = _aiNamespace;\r\n    if (!ns && config.disableDbgExt !== true) {\r\n        ns = _aiNamespace || _getExtensionNamespace();\r\n    }\r\n    return ns ? ns[\"ChromeDbgExt\"] : null;\r\n}\r\nexport function getDebugListener(config) {\r\n    if (!_debugListener) {\r\n        _debugListener = {};\r\n        for (var lp = 0; lp < listenerFuncs[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n            _debugListener[listenerFuncs[lp]] = _listenerProxyFunc(listenerFuncs[lp], config);\r\n        }\r\n    }\r\n    return _debugListener;\r\n}\r\n//# sourceMappingURL=DbgExtensionUtils.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport interface Command {\n\treadonly id: string;\n\n\texecute(...args: any[]): void | any;\n}\n\nexport class CommandManager {\n\tprivate readonly commands = new Map<string, { refCount: number; readonly registration: vscode.Disposable }>();\n\n\tpublic dispose() {\n\t\tfor (const registration of this.commands.values()) {\n\t\t\tregistration.registration.dispose();\n\t\t}\n\t\tthis.commands.clear();\n\t}\n\n\tpublic register<T extends Command>(command: T): vscode.Disposable {\n\t\tlet entry = this.commands.get(command.id);\n\t\tif (!entry) {\n\t\t\tentry = { refCount: 1, registration: vscode.commands.registerCommand(command.id, command.execute, command) };\n\t\t\tthis.commands.set(command.id, entry);\n\t\t} else {\n\t\t\tentry.refCount += 1;\n\t\t}\n\n\t\treturn new vscode.Disposable(() => {\n\t\t\tentry.refCount -= 1;\n\t\t\tif (entry.refCount <= 0) {\n\t\t\t\tentry.registration.dispose();\n\t\t\t\tthis.commands.delete(command.id);\n\t\t\t}\n\t\t});\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { TypeScriptServiceConfiguration } from '../configuration/configuration';\nimport { setImmediate } from '../utils/async';\nimport { Disposable } from '../utils/dispose';\n\n\nconst useWorkspaceNodeStorageKey = 'typescript.useWorkspaceNode';\nconst lastKnownWorkspaceNodeStorageKey = 'typescript.lastKnownWorkspaceNode';\ntype UseWorkspaceNodeState = undefined | boolean;\ntype LastKnownWorkspaceNodeState = undefined | string;\n\nexport class NodeVersionManager extends Disposable {\n\tprivate _currentVersion: string | undefined;\n\n\tpublic constructor(\n\t\tprivate configuration: TypeScriptServiceConfiguration,\n\t\tprivate readonly workspaceState: vscode.Memento\n\t) {\n\t\tsuper();\n\n\t\tthis._currentVersion = this.configuration.globalNodePath || undefined;\n\t\tif (vscode.workspace.isTrusted) {\n\t\t\tconst workspaceVersion = this.configuration.localNodePath;\n\t\t\tif (workspaceVersion) {\n\t\t\t\tconst useWorkspaceNode = this.canUseWorkspaceNode(workspaceVersion);\n\t\t\t\tif (useWorkspaceNode === undefined) {\n\t\t\t\t\tsetImmediate(() => {\n\t\t\t\t\t\tthis.promptAndSetWorkspaceNode();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse if (useWorkspaceNode) {\n\t\t\t\t\tthis._currentVersion = workspaceVersion;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis._disposables.push(vscode.workspace.onDidGrantWorkspaceTrust(() => {\n\t\t\t\tconst workspaceVersion = this.configuration.localNodePath;\n\t\t\t\tif (workspaceVersion) {\n\t\t\t\t\tconst useWorkspaceNode = this.canUseWorkspaceNode(workspaceVersion);\n\t\t\t\t\tif (useWorkspaceNode === undefined) {\n\t\t\t\t\t\tsetImmediate(() => {\n\t\t\t\t\t\t\tthis.promptAndSetWorkspaceNode();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if (useWorkspaceNode) {\n\t\t\t\t\t\tthis.updateActiveVersion(workspaceVersion);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate readonly _onDidPickNewVersion = this._register(new vscode.EventEmitter<void>());\n\tpublic readonly onDidPickNewVersion = this._onDidPickNewVersion.event;\n\n\tpublic get currentVersion(): string | undefined {\n\t\treturn this._currentVersion;\n\t}\n\n\tpublic async updateConfiguration(nextConfiguration: TypeScriptServiceConfiguration) {\n\t\tconst oldConfiguration = this.configuration;\n\t\tthis.configuration = nextConfiguration;\n\t\tif (oldConfiguration.globalNodePath !== nextConfiguration.globalNodePath\n\t\t\t|| oldConfiguration.localNodePath !== nextConfiguration.localNodePath) {\n\t\t\tawait this.computeNewVersion();\n\t\t}\n\t}\n\n\tprivate async computeNewVersion() {\n\t\tlet version = this.configuration.globalNodePath || undefined;\n\t\tconst workspaceVersion = this.configuration.localNodePath;\n\t\tif (vscode.workspace.isTrusted && workspaceVersion) {\n\t\t\tconst useWorkspaceNode = this.canUseWorkspaceNode(workspaceVersion);\n\t\t\tif (useWorkspaceNode === undefined) {\n\t\t\t\tversion = await this.promptUseWorkspaceNode() || version;\n\t\t\t}\n\t\t\telse if (useWorkspaceNode) {\n\t\t\t\tversion = workspaceVersion;\n\t\t\t}\n\t\t}\n\t\tthis.updateActiveVersion(version);\n\t}\n\n\tprivate async promptUseWorkspaceNode(): Promise<string | undefined> {\n\t\tconst workspaceVersion = this.configuration.localNodePath;\n\t\tif (workspaceVersion === null) {\n\t\t\tthrow new Error('Could not prompt to use workspace Node installation because no workspace Node installation is specified');\n\t\t}\n\n\t\tconst allow = vscode.l10n.t(\"Yes\");\n\t\tconst disallow = vscode.l10n.t(\"No\");\n\t\tconst dismiss = vscode.l10n.t(\"Not now\");\n\n\t\tconst result = await vscode.window.showInformationMessage(vscode.l10n.t(\"This workspace wants to use the Node installation at '{0}' to run TS Server. Would you like to use it?\", workspaceVersion),\n\t\t\tallow,\n\t\t\tdisallow,\n\t\t\tdismiss,\n\t\t);\n\n\t\tlet version = undefined;\n\t\tswitch (result) {\n\t\t\tcase allow:\n\t\t\t\tawait this.setUseWorkspaceNodeState(true, workspaceVersion);\n\t\t\t\tversion = workspaceVersion;\n\t\t\t\tbreak;\n\t\t\tcase disallow:\n\t\t\t\tawait this.setUseWorkspaceNodeState(false, workspaceVersion);\n\t\t\t\tbreak;\n\t\t\tcase dismiss:\n\t\t\t\tawait this.setUseWorkspaceNodeState(undefined, workspaceVersion);\n\t\t\t\tbreak;\n\t\t}\n\t\treturn version;\n\t}\n\n\tprivate async promptAndSetWorkspaceNode(): Promise<void> {\n\t\tconst version = await this.promptUseWorkspaceNode();\n\t\tif (version !== undefined) {\n\t\t\tthis.updateActiveVersion(version);\n\t\t}\n\t}\n\n\tprivate updateActiveVersion(pickedVersion: string | undefined): void {\n\t\tconst oldVersion = this.currentVersion;\n\t\tthis._currentVersion = pickedVersion;\n\t\tif (oldVersion !== pickedVersion) {\n\t\t\tthis._onDidPickNewVersion.fire();\n\t\t}\n\t}\n\n\tprivate canUseWorkspaceNode(nodeVersion: string): boolean | undefined {\n\t\tconst lastKnownWorkspaceNode = this.workspaceState.get<LastKnownWorkspaceNodeState>(lastKnownWorkspaceNodeStorageKey);\n\t\tif (lastKnownWorkspaceNode === nodeVersion) {\n\t\t\treturn this.workspaceState.get<UseWorkspaceNodeState>(useWorkspaceNodeStorageKey);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate async setUseWorkspaceNodeState(allow: boolean | undefined, nodeVersion: string) {\n\t\tawait this.workspaceState.update(lastKnownWorkspaceNodeStorageKey, nodeVersion);\n\t\tawait this.workspaceState.update(useWorkspaceNodeStorageKey, allow);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nconst noopDisposable = vscode.Disposable.from();\n\nexport const nulToken: vscode.CancellationToken = {\n\tisCancellationRequested: false,\n\tonCancellationRequested: () => noopDisposable\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { isTypeScriptDocument } from '../configuration/languageIds';\nimport { Command } from './commandManager';\n\nexport class LearnMoreAboutRefactoringsCommand implements Command {\n\tpublic static readonly id = '_typescript.learnMoreAboutRefactorings';\n\tpublic readonly id = LearnMoreAboutRefactoringsCommand.id;\n\n\tpublic execute() {\n\t\tconst docUrl = vscode.window.activeTextEditor && isTypeScriptDocument(vscode.window.activeTextEditor.document)\n\t\t\t? 'https://go.microsoft.com/fwlink/?linkid=2114477'\n\t\t\t: 'https://go.microsoft.com/fwlink/?linkid=2116761';\n\n\t\tvscode.env.openExternal(vscode.Uri.parse(docUrl));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Command, CommandManager } from '../commands/commandManager';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { TelemetryReporter } from '../logging/telemetry';\nimport { API } from '../tsServer/api';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport { OrganizeImportsMode } from '../tsServer/protocol/protocol.const';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { nulToken } from '../utils/cancellation';\nimport FileConfigurationManager from './fileConfigurationManager';\nimport { conditionalRegistration, requireMinVersion, requireSomeCapability } from './util/dependentRegistration';\n\n\ninterface OrganizeImportsCommandMetadata {\n\treadonly commandIds: readonly string[];\n\treadonly title: string;\n\treadonly minVersion?: API;\n\treadonly kind: vscode.CodeActionKind;\n\treadonly mode: OrganizeImportsMode;\n}\n\nconst organizeImportsCommand: OrganizeImportsCommandMetadata = {\n\tcommandIds: [], // We use the generic 'Organize imports' command\n\ttitle: vscode.l10n.t(\"Organize Imports\"),\n\tkind: vscode.CodeActionKind.SourceOrganizeImports,\n\tmode: OrganizeImportsMode.All,\n};\n\nconst sortImportsCommand: OrganizeImportsCommandMetadata = {\n\tcommandIds: ['typescript.sortImports', 'javascript.sortImports'],\n\tminVersion: API.v430,\n\ttitle: vscode.l10n.t(\"Sort Imports\"),\n\tkind: vscode.CodeActionKind.Source.append('sortImports'),\n\tmode: OrganizeImportsMode.SortAndCombine,\n};\n\nconst removeUnusedImportsCommand: OrganizeImportsCommandMetadata = {\n\tcommandIds: ['typescript.removeUnusedImports', 'javascript.removeUnusedImports'],\n\tminVersion: API.v490,\n\ttitle: vscode.l10n.t(\"Remove Unused Imports\"),\n\tkind: vscode.CodeActionKind.Source.append('removeUnusedImports'),\n\tmode: OrganizeImportsMode.RemoveUnused,\n};\n\nclass DidOrganizeImportsCommand implements Command {\n\n\tpublic static readonly ID = '_typescript.didOrganizeImports';\n\tpublic readonly id = DidOrganizeImportsCommand.ID;\n\n\tconstructor(\n\t\tprivate readonly telemetryReporter: TelemetryReporter,\n\t) { }\n\n\tpublic async execute(): Promise<any> {\n\t\t/* __GDPR__\n\t\t\t\"organizeImports.execute\" : {\n\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\"${include}\": [\n\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t]\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryReporter.logTelemetry('organizeImports.execute', {});\n\t}\n}\n\nclass ImportCodeAction extends vscode.CodeAction {\n\tconstructor(\n\t\ttitle: string,\n\t\tkind: vscode.CodeActionKind,\n\t\tpublic readonly document: vscode.TextDocument,\n\t) {\n\t\tsuper(title, kind);\n\t}\n}\n\nclass ImportsCodeActionProvider implements vscode.CodeActionProvider<ImportCodeAction> {\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly commandMetadata: OrganizeImportsCommandMetadata,\n\t\tcommandManager: CommandManager,\n\t\tprivate readonly fileConfigManager: FileConfigurationManager,\n\t\ttelemetryReporter: TelemetryReporter,\n\t) {\n\t\tcommandManager.register(new DidOrganizeImportsCommand(telemetryReporter));\n\t}\n\n\tpublic provideCodeActions(\n\t\tdocument: vscode.TextDocument,\n\t\t_range: vscode.Range,\n\t\tcontext: vscode.CodeActionContext,\n\t\t_token: vscode.CancellationToken\n\t): ImportCodeAction[] {\n\t\tif (!context.only?.contains(this.commandMetadata.kind)) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn [new ImportCodeAction(this.commandMetadata.title, this.commandMetadata.kind, document)];\n\t}\n\n\tasync resolveCodeAction(codeAction: ImportCodeAction, token: vscode.CancellationToken): Promise<ImportCodeAction | undefined> {\n\t\tconst response = await this.client.interruptGetErr(async () => {\n\t\t\tawait this.fileConfigManager.ensureConfigurationForDocument(codeAction.document, token);\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst file = this.client.toOpenTsFilePath(codeAction.document);\n\t\t\tif (!file) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst args: Proto.OrganizeImportsRequestArgs = {\n\t\t\t\tscope: {\n\t\t\t\t\ttype: 'file',\n\t\t\t\t\targs: { file }\n\t\t\t\t},\n\t\t\t\t// Deprecated in 4.9; `mode` takes priority\n\t\t\t\tskipDestructiveCodeActions: this.commandMetadata.mode === OrganizeImportsMode.SortAndCombine,\n\t\t\t\tmode: typeConverters.OrganizeImportsMode.toProtocolOrganizeImportsMode(this.commandMetadata.mode),\n\t\t\t};\n\n\t\t\treturn this.client.execute('organizeImports', args, nulToken);\n\t\t});\n\t\tif (response?.type !== 'response' || !response.body || token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.body.length) {\n\t\t\tcodeAction.edit = typeConverters.WorkspaceEdit.fromFileCodeEdits(this.client, response.body);\n\t\t}\n\n\t\tcodeAction.command = { command: DidOrganizeImportsCommand.ID, title: '', arguments: [] };\n\n\t\treturn codeAction;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n\tcommandManager: CommandManager,\n\tfileConfigurationManager: FileConfigurationManager,\n\ttelemetryReporter: TelemetryReporter,\n): vscode.Disposable {\n\tconst disposables: vscode.Disposable[] = [];\n\n\tfor (const command of [organizeImportsCommand, sortImportsCommand, removeUnusedImportsCommand]) {\n\t\tdisposables.push(\n\t\t\tconditionalRegistration([\n\t\t\t\trequireMinVersion(client, command.minVersion ?? API.defaultVersion),\n\t\t\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t\t\t], () => {\n\t\t\t\tconst provider = new ImportsCodeActionProvider(client, command, commandManager, fileConfigurationManager, telemetryReporter);\n\t\t\t\treturn vscode.Disposable.from(\n\t\t\t\t\tvscode.languages.registerCodeActionsProvider(selector.semantic, provider, {\n\t\t\t\t\t\tprovidedCodeActionKinds: [command.kind]\n\t\t\t\t\t}));\n\t\t\t}),\n\t\t\t// Always register these commands. We will show a warning if the user tries to run them on an unsupported version\n\t\t\t...command.commandIds.map(id =>\n\t\t\t\tcommandManager.register({\n\t\t\t\t\tid,\n\t\t\t\t\texecute() {\n\t\t\t\t\t\treturn vscode.commands.executeCommand('editor.action.sourceAction', {\n\t\t\t\t\t\t\tkind: command.kind.value,\n\t\t\t\t\t\t\tapply: 'first',\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}))\n\t\t);\n\t}\n\n\treturn vscode.Disposable.from(...disposables);\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { isArray, isFunction, objDefine, utcNow } from \"@nevware21/ts-utils\";\r\nimport { _DYN_COMPLETE, _DYN_GET_CTX, _DYN_IS_ASYNC, _DYN_IS_CHILD_EVT, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_SET_CTX, _DYN_TIME } from \"../__DynamicConstants\";\r\nimport { STR_GET_PERF_MGR, STR_PERF_EVENT } from \"./InternalConstants\";\r\nvar strExecutionContextKey = \"ctx\";\r\nvar strParentContextKey = \"ParentContextKey\";\r\nvar strChildrenContextKey = \"ChildrenContextKey\";\r\nvar _defaultPerfManager = null;\r\nvar PerfEvent = /** @class */ (function () {\r\n    function PerfEvent(name, payloadDetails, isAsync) {\r\n        var _self = this;\r\n        _self.start = utcNow();\r\n        _self[_DYN_NAME /* @min:%2ename */] = name;\r\n        _self[_DYN_IS_ASYNC /* @min:%2eisAsync */] = isAsync;\r\n        _self[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */] = function () { return false; };\r\n        if (isFunction(payloadDetails)) {\r\n            // Create an accessor to minimize the potential performance impact of executing the payloadDetails callback\r\n            var theDetails_1;\r\n            objDefine(_self, \"payload\", {\r\n                g: function () {\r\n                    // Delay the execution of the payloadDetails until needed\r\n                    if (!theDetails_1 && isFunction(payloadDetails)) {\r\n                        theDetails_1 = payloadDetails();\r\n                        // clear it out now so the referenced objects can be garbage collected\r\n                        payloadDetails = null;\r\n                    }\r\n                    return theDetails_1;\r\n                }\r\n            });\r\n        }\r\n        _self[_DYN_GET_CTX /* @min:%2egetCtx */] = function (key) {\r\n            if (key) {\r\n                // The parent and child links are located directly on the object (for better viewing in the DebugPlugin)\r\n                if (key === PerfEvent[strParentContextKey] || key === PerfEvent[strChildrenContextKey]) {\r\n                    return _self[key];\r\n                }\r\n                return (_self[strExecutionContextKey] || {})[key];\r\n            }\r\n            return null;\r\n        };\r\n        _self[_DYN_SET_CTX /* @min:%2esetCtx */] = function (key, value) {\r\n            if (key) {\r\n                // Put the parent and child links directly on the object (for better viewing in the DebugPlugin)\r\n                if (key === PerfEvent[strParentContextKey]) {\r\n                    // Simple assumption, if we are setting a parent then we must be a child\r\n                    if (!_self[key]) {\r\n                        _self[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */] = function () { return true; };\r\n                    }\r\n                    _self[key] = value;\r\n                }\r\n                else if (key === PerfEvent[strChildrenContextKey]) {\r\n                    _self[key] = value;\r\n                }\r\n                else {\r\n                    var ctx = _self[strExecutionContextKey] = _self[strExecutionContextKey] || {};\r\n                    ctx[key] = value;\r\n                }\r\n            }\r\n        };\r\n        _self[_DYN_COMPLETE /* @min:%2ecomplete */] = function () {\r\n            var childTime = 0;\r\n            var childEvts = _self[_DYN_GET_CTX /* @min:%2egetCtx */](PerfEvent[strChildrenContextKey]);\r\n            if (isArray(childEvts)) {\r\n                for (var lp = 0; lp < childEvts[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                    var childEvt = childEvts[lp];\r\n                    if (childEvt) {\r\n                        childTime += childEvt[_DYN_TIME /* @min:%2etime */];\r\n                    }\r\n                }\r\n            }\r\n            _self[_DYN_TIME /* @min:%2etime */] = utcNow() - _self.start;\r\n            _self.exTime = _self[_DYN_TIME /* @min:%2etime */] - childTime;\r\n            _self[_DYN_COMPLETE /* @min:%2ecomplete */] = function () { };\r\n        };\r\n    }\r\n    PerfEvent.ParentContextKey = \"parent\";\r\n    PerfEvent.ChildrenContextKey = \"childEvts\";\r\n    return PerfEvent;\r\n}());\r\nexport { PerfEvent };\r\nvar PerfManager = /** @class */ (function () {\r\n    function PerfManager(manager) {\r\n        /**\r\n         * General bucket used for execution context set and retrieved via setCtx() and getCtx.\r\n         * Defined as private so it can be visualized via the DebugPlugin\r\n         */\r\n        this.ctx = {};\r\n        dynamicProto(PerfManager, this, function (_self) {\r\n            _self.create = function (src, payloadDetails, isAsync) {\r\n                // TODO (@MSNev): at some point we will want to add additional configuration to \"select\" which events to instrument\r\n                // for now this is just a simple do everything.\r\n                return new PerfEvent(src, payloadDetails, isAsync);\r\n            };\r\n            _self.fire = function (perfEvent) {\r\n                if (perfEvent) {\r\n                    perfEvent[_DYN_COMPLETE /* @min:%2ecomplete */]();\r\n                    if (manager && isFunction(manager[STR_PERF_EVENT /* @min:%2eperfEvent */])) {\r\n                        manager[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent);\r\n                    }\r\n                }\r\n            };\r\n            _self[_DYN_SET_CTX /* @min:%2esetCtx */] = function (key, value) {\r\n                if (key) {\r\n                    var ctx = _self[strExecutionContextKey] = _self[strExecutionContextKey] || {};\r\n                    ctx[key] = value;\r\n                }\r\n            };\r\n            _self[_DYN_GET_CTX /* @min:%2egetCtx */] = function (key) {\r\n                return (_self[strExecutionContextKey] || {})[key];\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for PerfManager.prototype.create.\r\n// Removed Stub for PerfManager.prototype.fire.\r\n// Removed Stub for PerfManager.prototype.setCtx.\r\n// Removed Stub for PerfManager.prototype.getCtx.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    PerfManager.__ieDyn=1;\n\n    return PerfManager;\r\n}());\r\nexport { PerfManager };\r\nvar doPerfActiveKey = \"CoreUtils.doPerf\";\r\n/**\r\n * Helper function to wrap a function with a perf event\r\n * @param mgrSource - The Performance Manager or a Performance provider source (may be null)\r\n * @param getSource - The callback to create the source name for the event (if perf monitoring is enabled)\r\n * @param func - The function to call and measure\r\n * @param details - A function to return the payload details\r\n * @param isAsync - Is the event / function being call asynchronously or synchronously\r\n */\r\nexport function doPerf(mgrSource, getSource, func, details, isAsync) {\r\n    if (mgrSource) {\r\n        var perfMgr = mgrSource;\r\n        if (perfMgr[STR_GET_PERF_MGR]) {\r\n            // Looks like a perf manager provider object\r\n            perfMgr = perfMgr[STR_GET_PERF_MGR]();\r\n        }\r\n        if (perfMgr) {\r\n            var perfEvt = void 0;\r\n            var currentActive = perfMgr[_DYN_GET_CTX /* @min:%2egetCtx */](doPerfActiveKey);\r\n            try {\r\n                perfEvt = perfMgr.create(getSource(), details, isAsync);\r\n                if (perfEvt) {\r\n                    if (currentActive && perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                        perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */](PerfEvent[strParentContextKey], currentActive);\r\n                        if (currentActive[_DYN_GET_CTX /* @min:%2egetCtx */] && currentActive[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                            var children = currentActive[_DYN_GET_CTX /* @min:%2egetCtx */](PerfEvent[strChildrenContextKey]);\r\n                            if (!children) {\r\n                                children = [];\r\n                                currentActive[_DYN_SET_CTX /* @min:%2esetCtx */](PerfEvent[strChildrenContextKey], children);\r\n                            }\r\n                            children[_DYN_PUSH /* @min:%2epush */](perfEvt);\r\n                        }\r\n                    }\r\n                    // Set this event as the active event now\r\n                    perfMgr[_DYN_SET_CTX /* @min:%2esetCtx */](doPerfActiveKey, perfEvt);\r\n                    return func(perfEvt);\r\n                }\r\n            }\r\n            catch (ex) {\r\n                if (perfEvt && perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                    perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */](\"exception\", ex);\r\n                }\r\n            }\r\n            finally {\r\n                // fire the perf event\r\n                if (perfEvt) {\r\n                    perfMgr.fire(perfEvt);\r\n                }\r\n                // Reset the active event to the previous value\r\n                perfMgr[_DYN_SET_CTX /* @min:%2esetCtx */](doPerfActiveKey, currentActive);\r\n            }\r\n        }\r\n    }\r\n    return func();\r\n}\r\n/**\r\n * Set the global performance manager to use when there is no core instance or it has not been initialized yet.\r\n * @param perfManager - The IPerfManager instance to use when no performance manager is supplied.\r\n */\r\nexport function setGblPerfMgr(perfManager) {\r\n    _defaultPerfManager = perfManager;\r\n}\r\n/**\r\n * Get the current global performance manager that will be used with no performance manager is supplied.\r\n * @returns - The current default manager\r\n */\r\nexport function getGblPerfMgr() {\r\n    return _defaultPerfManager;\r\n}\r\n//# sourceMappingURL=PerfManager.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport function isWeb(): boolean {\n\treturn !(typeof process === 'object' && !!process.versions.node) && vscode.env.uiKind === vscode.UIKind.Web;\n}\n\nexport function isWebAndHasSharedArrayBuffers(): boolean {\n\treturn isWeb() && (globalThis as any)['crossOriginIsolated'];\n}\n\nexport function supportsReadableByteStreams(): boolean {\n\treturn isWeb() && 'ReadableByteStreamController' in globalThis;\n}\n","/*!\n * NevWare21 Solutions LLC - ts-async, 0.5.4\n * https://github.com/nevware21/ts-async\n * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.\n * Licensed under the MIT license.\n */\nimport { isPromiseLike, objDefineProperties, getDocument, createCachedValue, safe, getInst, dumpObj, arrSlice, objDefineProp, hasSymbol, getKnownSymbol, isFunction, throwTypeError, iterForOf, scheduleTimeout, isNode, getWindow, getGlobal, objDefine, objToString, isUndefined, isArray, arrForEach, isIterable, createCustomError, isNumber, scheduleIdleCallback, utcNow, getLength, isIterator, fnCall, arrIndexOf } from '@nevware21/ts-utils';\n\nvar STR_PROMISE = \"Promise\";\nvar DONE = \"done\";\nvar VALUE = \"value\";\nvar RETURN = \"return\";\nvar REJECTED = \"rejected\";\n\nfunction doAwaitResponse(value, cb) {\n    return doAwait(value, function (value) {\n        return cb ? cb({\n            status: \"fulfilled\",\n            rejected: false,\n            value: value\n        }) : value;\n    }, function (reason) {\n        return cb ? cb({\n            status: REJECTED,\n            rejected: true,\n            reason: reason\n        }) : reason;\n    });\n}\nfunction doAwait(value, resolveFn, rejectFn, finallyFn) {\n    var result = value;\n    try {\n        if (isPromiseLike(value)) {\n            if (resolveFn || rejectFn) {\n                result = value.then(resolveFn, rejectFn);\n            }\n        }\n        else {\n            try {\n                if (resolveFn) {\n                    result = resolveFn(value);\n                }\n            }\n            catch (err) {\n                if (rejectFn) {\n                    result = rejectFn(err);\n                }\n                else {\n                    throw err;\n                }\n            }\n        }\n    }\n    finally {\n        if (finallyFn) {\n            doFinally(result, finallyFn);\n        }\n    }\n    return result;\n}\nfunction doFinally(value, finallyFn) {\n    var result = value;\n    if (finallyFn) {\n        if (isPromiseLike(value)) {\n            if (value.finally) {\n                result = value.finally(finallyFn);\n            }\n            else {\n                result = value.then(function (value) {\n                    finallyFn();\n                    return value;\n                }, function (reason) {\n                    finallyFn();\n                    throw reason;\n                });\n            }\n        }\n        else {\n            finallyFn();\n        }\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _pureAssign(func1, func2) {\n    return func1 || func2;\n}\n\nvar _debugState;\nvar _debugResult;\nvar _debugHandled;\nvar _promiseDebugEnabled = false;\nfunction _addDebugState$1(thePromise, stateFn, resultFn, handledFn) {\n    _debugState = _debugState || { toString: function () { return \"[[PromiseState]]\"; } };\n    _debugResult = _debugResult || { toString: function () { return \"[[PromiseResult]]\"; } };\n    _debugHandled = _debugHandled || { toString: function () { return \"[[PromiseIsHandled]]\"; } };\n    var props = {};\n    props[_debugState] = { get: stateFn };\n    props[_debugResult] = { get: resultFn };\n    props[_debugHandled] = { get: handledFn };\n    objDefineProperties(thePromise, props);\n}\nfunction setPromiseDebugState(enabled, logger) {\n    _promiseDebugEnabled = enabled;\n}\n\nvar STRING_STATES =  [\n    \"pending\", \"resolving\", \"resolved\", REJECTED\n];\n\nvar DISPATCH_EVENT = \"dispatchEvent\";\nvar _hasInitEvent;\nfunction _hasInitEventFn(doc) {\n    var evt;\n    if (doc && doc.createEvent) {\n        evt = doc.createEvent(\"Event\");\n    }\n    return (!!evt && evt.initEvent);\n}\nfunction emitEvent(target, evtName, populateEvent, useNewEvent) {\n    var doc = getDocument();\n    !_hasInitEvent && (_hasInitEvent = createCachedValue(!!safe(_hasInitEventFn, [doc]).v));\n    var theEvt = _hasInitEvent.v ? doc.createEvent(\"Event\") : (useNewEvent ? new Event(evtName) : {});\n    populateEvent && populateEvent(theEvt);\n    if (_hasInitEvent.v) {\n        theEvt.initEvent(evtName, false, true);\n    }\n    if (theEvt && target[DISPATCH_EVENT]) {\n        target[DISPATCH_EVENT](theEvt);\n    }\n    else {\n        var handler = target[\"on\" + evtName];\n        if (handler) {\n            handler(theEvt);\n        }\n        else {\n            var theConsole = getInst(\"console\");\n            theConsole && (theConsole[\"error\"] || theConsole[\"log\"])(evtName, dumpObj(theEvt));\n        }\n    }\n}\n\nvar NODE_UNHANDLED_REJECTION = \"unhandledRejection\";\nvar UNHANDLED_REJECTION = NODE_UNHANDLED_REJECTION.toLowerCase();\nvar _currentPromiseId = [];\nvar _uniquePromiseId = 0;\nvar _unhandledRejectionTimeout = 10;\nvar _aggregationError;\nvar _hasPromiseRejectionEvent;\nfunction dumpFnObj(value) {\n    if (isFunction(value)) {\n        return value.toString();\n    }\n    return dumpObj(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createAggregationError(values) {\n    !_aggregationError && (_aggregationError = createCachedValue(safe(getInst, [\"AggregationError\"]).v || createCustomError(\"AggregationError\", function (self, args) {\n        self.errors = args[0];\n    })));\n    return new _aggregationError.v(values);\n}\nfunction _createPromise(newPromise, processor, executor) {\n    var additionalArgs = arrSlice(arguments, 3);\n    var _state = 0 ;\n    var _hasResolved = false;\n    var _settledValue;\n    var _queue = [];\n    var _id = _uniquePromiseId++;\n    var _parentId = _currentPromiseId.length > 0 ? _currentPromiseId[_currentPromiseId.length - 1] : undefined;\n    var _handled = false;\n    var _unHandledRejectionHandler = null;\n    var _thePromise;\n    function _then(onResolved, onRejected) {\n        try {\n            _currentPromiseId.push(_id);\n            _handled = true;\n            _unHandledRejectionHandler && _unHandledRejectionHandler.cancel();\n            _unHandledRejectionHandler = null;\n            var thenPromise = newPromise(function (resolve, reject) {\n                _queue.push(function () {\n                    try {\n                        var handler = _state === 2  ? onResolved : onRejected;\n                        var value = isUndefined(handler) ? _settledValue : (isFunction(handler) ? handler(_settledValue) : handler);\n                        if (isPromiseLike(value)) {\n                            value.then(resolve, reject);\n                        }\n                        else if (handler) {\n                            resolve(value);\n                        }\n                        else if (_state === 3 ) {\n                            reject(value);\n                        }\n                        else {\n                            resolve(value);\n                        }\n                    }\n                    catch (e) {\n                        reject(e);\n                    }\n                });\n                if (_hasResolved) {\n                    _processQueue();\n                }\n            }, additionalArgs);\n            return thenPromise;\n        }\n        finally {\n            _currentPromiseId.pop();\n        }\n    }\n    function _catch(onRejected) {\n        return _then(undefined, onRejected);\n    }\n    function _finally(onFinally) {\n        var thenFinally = onFinally;\n        var catchFinally = onFinally;\n        if (isFunction(onFinally)) {\n            thenFinally = function (value) {\n                onFinally && onFinally();\n                return value;\n            };\n            catchFinally = function (reason) {\n                onFinally && onFinally();\n                throw reason;\n            };\n        }\n        return _then(thenFinally, catchFinally);\n    }\n    function _strState() {\n        return STRING_STATES[_state];\n    }\n    function _processQueue() {\n        if (_queue.length > 0) {\n            var pending = _queue.slice();\n            _queue = [];\n            _handled = true;\n            _unHandledRejectionHandler && _unHandledRejectionHandler.cancel();\n            _unHandledRejectionHandler = null;\n            processor(pending);\n        }\n    }\n    function _createSettleIfFn(newState, allowState) {\n        return function (theValue) {\n            if (_state === allowState) {\n                if (newState === 2  && isPromiseLike(theValue)) {\n                    _state = 1 ;\n                    theValue.then(_createSettleIfFn(2 , 1 ), _createSettleIfFn(3 , 1 ));\n                    return;\n                }\n                _state = newState;\n                _hasResolved = true;\n                _settledValue = theValue;\n                _processQueue();\n                if (!_handled && newState === 3  && !_unHandledRejectionHandler) {\n                    _unHandledRejectionHandler = scheduleTimeout(_notifyUnhandledRejection, _unhandledRejectionTimeout);\n                }\n            }\n        };\n    }\n    function _notifyUnhandledRejection() {\n        if (!_handled) {\n            _handled = true;\n            if (isNode()) {\n                process.emit(NODE_UNHANDLED_REJECTION, _settledValue, _thePromise);\n            }\n            else {\n                var gbl = getWindow() || getGlobal();\n                !_hasPromiseRejectionEvent && (_hasPromiseRejectionEvent = createCachedValue(safe((getInst), [STR_PROMISE + \"RejectionEvent\"]).v));\n                emitEvent(gbl, UNHANDLED_REJECTION, function (theEvt) {\n                    objDefine(theEvt, \"promise\", { g: function () { return _thePromise; } });\n                    theEvt.reason = _settledValue;\n                    return theEvt;\n                }, !!_hasPromiseRejectionEvent.v);\n            }\n        }\n    }\n    _thePromise = {\n        then: _then,\n        \"catch\": _catch,\n        finally: _finally\n    };\n    objDefineProp(_thePromise, \"state\", {\n        get: _strState\n    });\n    if (_promiseDebugEnabled) {\n        _addDebugState$1(_thePromise, _strState, function () { return objToString(_settledValue); }, function () { return _handled; });\n    }\n    if (hasSymbol()) {\n        _thePromise[getKnownSymbol(11 )] = \"IPromise\";\n    }\n    function _toString() {\n        return \"IPromise\" + (_promiseDebugEnabled ? \"[\" + _id + (!isUndefined(_parentId) ? (\":\" + _parentId) : \"\") + \"]\" : \"\") + \" \" + _strState() + (_hasResolved ? (\" - \" + dumpFnObj(_settledValue)) : \"\") + (\"\");\n    }\n    _thePromise.toString = _toString;\n    (function _initialize() {\n        if (!isFunction(executor)) {\n            throwTypeError(STR_PROMISE + \": executor is not a function - \" + dumpFnObj(executor));\n        }\n        var _rejectFn = _createSettleIfFn(3 , 0 );\n        try {\n            executor.call(_thePromise, _createSettleIfFn(2 , 0 ), _rejectFn);\n        }\n        catch (e) {\n            _rejectFn(e);\n        }\n    })();\n    return _thePromise;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createAllPromise(newPromise) {\n    return function (input) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (resolve, reject) {\n            try {\n                var values_1 = [];\n                var pending_1 = 1;\n                iterForOf(input, function (item, idx) {\n                    if (item) {\n                        pending_1++;\n                        doAwait(item, function (value) {\n                            values_1[idx] = value;\n                            if (--pending_1 === 0) {\n                                resolve(values_1);\n                            }\n                        }, reject);\n                    }\n                });\n                pending_1--;\n                if (pending_1 === 0) {\n                    resolve(values_1);\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        }, additionalArgs);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createResolvedPromise(newPromise) {\n    return function (value) {\n        var additionalArgs = arrSlice(arguments, 1);\n        if (isPromiseLike(value)) {\n            return value;\n        }\n        return newPromise(function (resolve) {\n            resolve(value);\n        }, additionalArgs);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createRejectedPromise(newPromise) {\n    return function (reason) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (_resolve, reject) {\n            reject(reason);\n        }, additionalArgs);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createAllSettledPromise(newPromise) {\n    return createCachedValue(function (input) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (resolve, reject) {\n            var values = [];\n            var pending = 1;\n            function processItem(item, idx) {\n                pending++;\n                doAwaitResponse(item, function (value) {\n                    if (value.rejected) {\n                        values[idx] = {\n                            status: REJECTED,\n                            reason: value.reason\n                        };\n                    }\n                    else {\n                        values[idx] = {\n                            status: \"fulfilled\",\n                            value: value.value\n                        };\n                    }\n                    if (--pending === 0) {\n                        resolve(values);\n                    }\n                });\n            }\n            try {\n                if (isArray(input)) {\n                    arrForEach(input, processItem);\n                }\n                else if (isIterable(input)) {\n                    iterForOf(input, processItem);\n                }\n                else {\n                    throwTypeError(\"Input is not an iterable\");\n                }\n                pending--;\n                if (pending === 0) {\n                    resolve(values);\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        }, additionalArgs);\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createRacePromise(newPromise) {\n    return createCachedValue(function (input) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (resolve, reject) {\n            var isDone = false;\n            function processItem(item) {\n                doAwaitResponse(item, function (value) {\n                    if (!isDone) {\n                        isDone = true;\n                        if (value.rejected) {\n                            reject(value.reason);\n                        }\n                        else {\n                            resolve(value.value);\n                        }\n                    }\n                });\n            }\n            try {\n                if (isArray(input)) {\n                    arrForEach(input, processItem);\n                }\n                else if (isIterable(input)) {\n                    iterForOf(input, processItem);\n                }\n                else {\n                    throwTypeError(\"Input is not an iterable\");\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        }, additionalArgs);\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createAnyPromise(newPromise) {\n    return createCachedValue(function (input) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (resolve, reject) {\n            var theErros = [];\n            var pending = 1;\n            var isDone = false;\n            function processItem(item, idx) {\n                pending++;\n                doAwaitResponse(item, function (value) {\n                    if (!value.rejected) {\n                        isDone = true;\n                        resolve(value.value);\n                        return;\n                    }\n                    else {\n                        theErros[idx] = value.reason;\n                    }\n                    if (--pending === 0 && !isDone) {\n                        reject(_createAggregationError(theErros));\n                    }\n                });\n            }\n            try {\n                if (isArray(input)) {\n                    arrForEach(input, processItem);\n                }\n                else if (isIterable(input)) {\n                    iterForOf(input, processItem);\n                }\n                else {\n                    throwTypeError(\"Input is not an iterable\");\n                }\n                pending--;\n                if (pending === 0 && !isDone) {\n                    reject(_createAggregationError(theErros));\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        }, additionalArgs);\n    });\n}\n\nfunction syncItemProcessor(pending) {\n    arrForEach(pending, function (fn) {\n        try {\n            fn();\n        }\n        catch (e) {\n        }\n    });\n}\nfunction timeoutItemProcessor(timeout) {\n    var callbackTimeout = isNumber(timeout) ? timeout : 0;\n    return function (pending) {\n        scheduleTimeout(function () {\n            syncItemProcessor(pending);\n        }, callbackTimeout);\n    };\n}\nfunction idleItemProcessor(timeout) {\n    var options;\n    if (timeout >= 0) {\n        options = {\n            timeout: +timeout\n        };\n    }\n    return function (pending) {\n        scheduleIdleCallback(function (deadline) {\n            syncItemProcessor(pending);\n        }, options);\n    };\n}\n\nvar _allAsyncSettledCreator;\nvar _raceAsyncCreator;\nvar _anyAsyncCreator;\nfunction createAsyncPromise(executor, timeout) {\n    return _createPromise(createAsyncPromise, timeoutItemProcessor(timeout), executor, timeout);\n}\nvar createAsyncAllPromise = /*#__PURE__*/ _createAllPromise(createAsyncPromise);\nvar createAsyncResolvedPromise = /*#__PURE__*/ _createResolvedPromise(createAsyncPromise);\nvar createAsyncRejectedPromise = /*#__PURE__*/ _createRejectedPromise(createAsyncPromise);\nfunction createAsyncAllSettledPromise(input, timeout) {\n    !_allAsyncSettledCreator && (_allAsyncSettledCreator = _createAllSettledPromise(createAsyncPromise));\n    return _allAsyncSettledCreator.v(input, timeout);\n}\nfunction createAsyncRacePromise(values, timeout) {\n    !_raceAsyncCreator && (_raceAsyncCreator = _createRacePromise(createAsyncPromise));\n    return _raceAsyncCreator.v(values, timeout);\n}\nfunction createAsyncAnyPromise(values, timeout) {\n    !_anyAsyncCreator && (_anyAsyncCreator = _createAnyPromise(createAsyncPromise));\n    return _anyAsyncCreator.v(values, timeout);\n}\n\nvar _promiseCls;\nvar _allCreator;\nvar _allNativeSettledCreator;\nvar _raceNativeCreator;\nvar _anyNativeCreator;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createNativePromiseHelper(name, func) {\n    !_promiseCls && (_promiseCls = createCachedValue((safe(getInst, [STR_PROMISE]).v) || null));\n    if (_promiseCls.v && _promiseCls.v[name]) {\n        return createCachedValue(function (input, timeout) {\n            return createNativePromise(function (resolve, reject) {\n                _promiseCls.v[name](input).then(resolve, reject);\n            });\n        });\n    }\n    return func();\n}\nfunction createNativePromise(executor, timeout) {\n    !_promiseCls && (_promiseCls = createCachedValue((safe(getInst, [STR_PROMISE]).v) || null));\n    var PrmCls = _promiseCls.v;\n    if (!PrmCls) {\n        return createAsyncPromise(executor);\n    }\n    if (!isFunction(executor)) {\n        throwTypeError(STR_PROMISE + \": executor is not a function - \" + dumpObj(executor));\n    }\n    var _state = 0 ;\n    function _strState() {\n        return STRING_STATES[_state];\n    }\n    var thePromise = new PrmCls(function (resolve, reject) {\n        function _resolve(value) {\n            _state = 2 ;\n            resolve(value);\n        }\n        function _reject(reason) {\n            _state = 3 ;\n            reject(reason);\n        }\n        executor(_resolve, _reject);\n    });\n    objDefineProp(thePromise, \"state\", {\n        get: _strState\n    });\n    return thePromise;\n}\nfunction createNativeAllPromise(input, timeout) {\n    !_allCreator && (_allCreator = _createNativePromiseHelper(\"all\", function () { return createCachedValue(_createAllPromise(createNativePromise)); }));\n    return _allCreator.v(input, timeout);\n}\nvar createNativeResolvedPromise = /*#__PURE__*/ _createResolvedPromise(createNativePromise);\nvar createNativeRejectedPromise = /*#__PURE__*/ _createRejectedPromise(createNativePromise);\nfunction createNativeAllSettledPromise(input, timeout) {\n    !_allNativeSettledCreator && (_allNativeSettledCreator = _createNativePromiseHelper(\"allSettled\", function () { return _createAllSettledPromise(createNativePromise); }));\n    return _allNativeSettledCreator.v(input, timeout);\n}\nfunction createNativeRacePromise(values, timeout) {\n    !_raceNativeCreator && (_raceNativeCreator = _createNativePromiseHelper(\"race\", function () { return _createRacePromise(createNativePromise); }));\n    return _raceNativeCreator.v(values, timeout);\n}\nfunction createNativeAnyPromise(values, timeout) {\n    !_anyNativeCreator && (_anyNativeCreator = _createNativePromiseHelper(\"any\", function () { return _createAnyPromise(createNativePromise); }));\n    return _anyNativeCreator.v(values, timeout);\n}\n\nvar _allSyncSettledCreator;\nvar _raceSyncCreator;\nvar _anySyncCreator;\nfunction createSyncPromise(executor) {\n    return _createPromise(createSyncPromise, syncItemProcessor, executor);\n}\nvar createSyncAllPromise = /*#__PURE__*/ _createAllPromise(createSyncPromise);\nvar createSyncResolvedPromise = /*#__PURE__*/ _createResolvedPromise(createSyncPromise);\nvar createSyncRejectedPromise = /*#__PURE__*/ _createRejectedPromise(createSyncPromise);\nfunction createSyncAllSettledPromise(input, timeout) {\n    !_allSyncSettledCreator && (_allSyncSettledCreator = _createAllSettledPromise(createSyncPromise));\n    return _allSyncSettledCreator.v(input, timeout);\n}\nfunction createSyncRacePromise(values, timeout) {\n    !_raceSyncCreator && (_raceSyncCreator = _createRacePromise(createSyncPromise));\n    return _raceSyncCreator.v(values, timeout);\n}\nfunction createSyncAnyPromise(values, timeout) {\n    !_anySyncCreator && (_anySyncCreator = _createAnyPromise(createSyncPromise));\n    return _anySyncCreator.v(values, timeout);\n}\n\nvar _defaultIdleTimeout;\nvar _allIdleSettledCreator;\nvar _raceIdleCreator;\nvar _anyIdleCreator;\nfunction setDefaultIdlePromiseTimeout(idleDeadline) {\n    _defaultIdleTimeout = idleDeadline;\n}\nvar setDefaultIdleTimeout = ( /*#__PURE__*/_pureAssign(setDefaultIdlePromiseTimeout));\nfunction createIdlePromise(executor, timeout) {\n    var theTimeout = isUndefined(timeout) ? _defaultIdleTimeout : timeout;\n    return _createPromise(createIdlePromise, idleItemProcessor(theTimeout), executor, theTimeout);\n}\nvar createIdleAllPromise = /*#__PURE__*/ _createAllPromise(createIdlePromise);\nvar createIdleResolvedPromise = /*#__PURE__*/ _createResolvedPromise(createIdlePromise);\nvar createIdleRejectedPromise = /*#__PURE__*/ _createRejectedPromise(createIdlePromise);\nfunction createIdleAllSettledPromise(input, timeout) {\n    !_allIdleSettledCreator && (_allIdleSettledCreator = _createAllSettledPromise(createIdlePromise));\n    return _allIdleSettledCreator.v(input, timeout);\n}\nfunction createIdleRacePromise(values, timeout) {\n    !_raceIdleCreator && (_raceIdleCreator = _createRacePromise(createIdlePromise));\n    return _raceIdleCreator.v(values, timeout);\n}\nfunction createIdleAnyPromise(values, timeout) {\n    !_anyIdleCreator && (_anyIdleCreator = _createAnyPromise(createIdlePromise));\n    return _anyIdleCreator.v(values, timeout);\n}\n\nvar _promiseCreator;\nvar _allSettledCreator;\nvar _raceCreator;\nvar _anyCreator;\nfunction setCreatePromiseImpl(creator) {\n    _promiseCreator = creator ? createCachedValue(creator) : null;\n}\nfunction createPromise(executor, timeout) {\n    !_promiseCreator && (_promiseCreator = createCachedValue(createNativePromise));\n    return _promiseCreator.v.call(this, executor, timeout);\n}\nvar createAllPromise = /*#__PURE__*/ _createAllPromise(createPromise);\nvar createResolvedPromise = /*#__PURE__*/ _createResolvedPromise(createPromise);\nvar createRejectedPromise = /*#__PURE__*/ _createRejectedPromise(createPromise);\nfunction createAllSettledPromise(input, timeout) {\n    !_allSettledCreator && (_allSettledCreator = _createAllSettledPromise(createPromise));\n    return _allSettledCreator.v(input, timeout);\n}\nfunction createRacePromise(values, timeout) {\n    !_raceCreator && (_raceCreator = _createRacePromise(createPromise));\n    return _raceCreator.v(values, timeout);\n}\nfunction createAnyPromise(values, timeout) {\n    !_anyCreator && (_anyCreator = _createAnyPromise(createPromise));\n    return _anyCreator.v(values, timeout);\n}\n\nfunction createTimeoutPromise(timeout, resolveReject, message) {\n    return createPromise(function (resolve, reject) {\n        scheduleTimeout(function () {\n            (resolveReject ? resolve : reject)(!isUndefined(message) ? message : \"Timeout of \" + timeout + \"ms exceeded\");\n        }, timeout);\n    });\n}\n\nfunction _doneChk(isDone, state, value, thisArg) {\n    var result = isDone;\n    state.res = value;\n    if (!result) {\n        if (state.isDone && isFunction(state.isDone)) {\n            return doAwait(state.isDone.call(thisArg, state), function (done) {\n                state.iter++;\n                return !!done;\n            });\n        }\n        else {\n            result = !!state.isDone;\n        }\n    }\n    state.iter++;\n    return result;\n}\nfunction doWhileAsync(callbackFn, isDoneFn, thisArg) {\n    var promise;\n    var resolve;\n    var reject = function (reason) {\n        isDone = true;\n        throw reason;\n    };\n    var isDone = false;\n    var state = {\n        st: utcNow(),\n        iter: 0,\n        isDone: isDoneFn || false\n    };\n    if (callbackFn) {\n        var _createPromise_1 = function () {\n            return createPromise(function (res, rej) {\n                resolve = res;\n                reject = rej;\n            });\n        };\n        var _handleAsyncDone_1 = function (done) {\n            isDone = !!done;\n            if (!isDone) {\n                _processNext_1();\n            }\n            else {\n                resolve(state.res);\n            }\n        };\n        var _processNext_1 = function () {\n            while (!isDone) {\n                try {\n                    var cbResult = callbackFn.call(thisArg, state);\n                    if (isPromiseLike(cbResult)) {\n                        promise = promise || _createPromise_1();\n                        doAwait(cbResult, function (res) {\n                            try {\n                                doAwait(_doneChk(isDone, state, res, thisArg), _handleAsyncDone_1, reject);\n                            }\n                            catch (e) {\n                                reject(e);\n                            }\n                        }, reject);\n                        return promise;\n                    }\n                    else {\n                        var dnRes = _doneChk(isDone, state, cbResult, thisArg);\n                        if (isPromiseLike(dnRes)) {\n                            promise = promise || _createPromise_1();\n                            doAwait(dnRes, _handleAsyncDone_1, reject);\n                            return promise;\n                        }\n                        else {\n                            isDone = !!dnRes;\n                        }\n                    }\n                }\n                catch (e) {\n                    reject(e);\n                    return promise;\n                }\n            }\n            if (isDone && resolve) {\n                resolve(state.res);\n            }\n            return promise || state.res;\n        };\n        return _processNext_1();\n    }\n}\n\nfunction arrForEachAsync(theArray, callbackFn, thisArg) {\n    if (theArray) {\n        var len_1 = getLength(theArray);\n        if (len_1) {\n            var isDone = function (state) {\n                if (state.iter >= len_1 || state.res === -1) {\n                    return true;\n                }\n            };\n            return doWhileAsync(function (state) {\n                var idx = state.iter;\n                if (idx in theArray) {\n                    return callbackFn.call(thisArg || theArray, theArray[idx], idx, theArray);\n                }\n            }, isDone);\n        }\n    }\n}\n\nvar _iterSymbol;\nvar _iterAsyncSymbol;\nfunction iterForOfAsync(iter, callbackFn, thisArg) {\n    var err;\n    var iterResult;\n    var theIter = iter;\n    function onFailed(failed) {\n        err = { e: failed };\n        if (theIter.throw) {\n            iterResult = null;\n            theIter.throw(err);\n        }\n        throw failed;\n    }\n    function onFinally() {\n        try {\n            if (iterResult && !iterResult[DONE]) {\n                theIter[RETURN] && theIter[RETURN](iterResult);\n            }\n        }\n        finally {\n            if (err) {\n                throw err.e;\n            }\n        }\n    }\n    if (iter) {\n        if (!isIterator(iter)) {\n            !_iterAsyncSymbol && (_iterAsyncSymbol = createCachedValue(getKnownSymbol(0 )));\n            theIter = iter[_iterAsyncSymbol.v] ? iter[_iterAsyncSymbol.v]() : null;\n            if (!theIter) {\n                !_iterSymbol && (_iterSymbol = createCachedValue(getKnownSymbol(3 )));\n                theIter = iter[_iterSymbol.v] ? iter[_iterSymbol.v]() : null;\n            }\n        }\n        if (theIter && isIterator(theIter)) {\n            var result = void 0;\n            try {\n                result = doWhileAsync(function (state) {\n                    return doAwait(theIter.next(), function (res) {\n                        iterResult = res;\n                        if (!res[DONE]) {\n                            return fnCall(callbackFn, thisArg || theIter, iterResult[VALUE], state.iter, theIter);\n                        }\n                    }, function (reason) {\n                        state.isDone = true;\n                        onFailed(reason);\n                    });\n                }, function (state) {\n                    if (!iterResult || iterResult[DONE] || state.res === -1) {\n                        onFinally();\n                        return true;\n                    }\n                }, thisArg || theIter);\n                if (isPromiseLike(result)) {\n                    result = doFinally(result.catch(onFailed), onFinally);\n                }\n                return result;\n            }\n            catch (failed) {\n                onFailed(failed);\n            }\n            finally {\n                if (result && !isPromiseLike(result)) {\n                    onFinally();\n                }\n            }\n        }\n    }\n}\n\nvar REJECT = \"reject\";\nvar REJECTED_ERROR = \"Rejected\";\nvar _schedulerId = 0;\nvar _debugName;\nvar _debugIntState;\nvar _customErrors = {};\nfunction _rejectDone() {\n}\nfunction _createError(type, evt, message) {\n    !_customErrors[type] && (_customErrors[type] = createCustomError(type));\n    var now = utcNow();\n    return new (_customErrors[type])(\"Task [\".concat(evt.id, \"] \").concat(message || \"\", \"- \").concat((evt.st ? \"Running\" : \"Waiting\"), \": \").concat(_calcTime(now, evt.st || evt.cr)));\n}\nfunction _calcTime(now, start) {\n    return ((now - start) || \"0\") + \" ms\";\n}\nfunction _abortStaleTasks(taskQueue, staleTimeoutPeriod) {\n    var now = utcNow();\n    var expired = now - staleTimeoutPeriod;\n    arrForEach(taskQueue, function (evt) {\n        if (evt && !evt.rj && (evt.st && evt.st < expired) || (!evt.st && evt.cr && evt.cr < expired)) {\n            evt && evt[REJECT](evt.rj || _createError(\"Aborted\", evt, \"Stale \"));\n        }\n    });\n}\nfunction _removeTask(queue, taskDetail) {\n    var idx = arrIndexOf(queue, taskDetail);\n    if (idx !== -1) {\n        queue.splice(idx, 1);\n    }\n}\nfunction _addDebugState(theScheduler, nameFn, stateFn) {\n    _debugName = _debugName || { toString: function () { return \"[[SchedulerName]]\"; } };\n    _debugIntState = _debugIntState || { toString: function () { return \"[[SchedulerState]]\"; } };\n    objDefineProp(theScheduler, _debugName, { get: nameFn });\n    objDefineProp(theScheduler, _debugIntState, { get: stateFn });\n}\nfunction createTaskScheduler(newPromise, name) {\n    var _theTask;\n    var _running = [];\n    var _waiting = [];\n    var _staleTimeoutPeriod = 600000;\n    var _staleTimeoutCheckPeriod = _staleTimeoutPeriod / 10;\n    var _taskCount = 0;\n    var _schedulerName = (name ? (name + \".\") : \"\") + _schedulerId++;\n    var _blockedTimer;\n    newPromise = newPromise || createPromise;\n    var _startBlockedTimer = function () {\n        var hasTasks = (getLength(_running) + getLength(_waiting)) > 0;\n        if (_staleTimeoutPeriod > 0) {\n            if (!_blockedTimer) {\n                _blockedTimer = scheduleTimeout(function () {\n                    _abortStaleTasks(_running, _staleTimeoutPeriod);\n                    _abortStaleTasks(_waiting, _staleTimeoutPeriod);\n                    _blockedTimer && (_blockedTimer.enabled = ((getLength(_running) + getLength(_waiting)) > 0));\n                }, _staleTimeoutCheckPeriod);\n                _blockedTimer.unref();\n            }\n            _blockedTimer && (_blockedTimer.enabled = hasTasks);\n        }\n    };\n    var _queueTask = function (startAction, taskName, timeout) {\n        var _a;\n        var taskId = _schedulerName + \".\" + _taskCount++;\n        if (taskName) {\n            taskId += \"-(\" + taskName + \")\";\n        }\n        var newTask = (_a = {\n                id: taskId,\n                cr: utcNow(),\n                to: timeout\n            },\n            _a[REJECT] = function (reason) {\n                newTask.rj = reason || _createError(REJECTED_ERROR, newTask);\n                newTask[REJECT] = _rejectDone;\n            },\n            _a);\n        if (!_theTask) {\n            newTask.p = newPromise(_runTask(newTask, startAction));\n        }\n        else {\n            newTask.p = _waitForPreviousTask(newTask, _theTask, startAction);\n        }\n        _theTask = newTask;\n        return newTask.p;\n    };\n    var _runTask = function (taskDetail, startAction) {\n        taskDetail.st = utcNow();\n        _running.push(taskDetail);\n        _startBlockedTimer();\n        return function (onTaskResolve, onTaskReject) {\n            var _promiseReject = function (reason) {\n                taskDetail.rj = taskDetail.rj || reason || _createError(REJECTED_ERROR, taskDetail);\n                taskDetail[REJECT] = _rejectDone;\n                _doCleanup(taskDetail);\n                onTaskResolve = null;\n                onTaskReject && onTaskReject(reason);\n                onTaskReject = null;\n            };\n            var taskId = taskDetail.id;\n            if (taskDetail.rj) {\n                _promiseReject(taskDetail.rj);\n            }\n            else {\n                taskDetail[REJECT] = _promiseReject;\n                try {\n                    var startResult = startAction(taskId);\n                    if (taskDetail.to && isPromiseLike(startResult)) {\n                        taskDetail.t = scheduleTimeout(function () {\n                            _promiseReject(_createError(\"Timeout\", taskDetail));\n                        }, taskDetail.to);\n                    }\n                    doAwait(startResult, function (theResult) {\n                        _doCleanup(taskDetail);\n                        try {\n                            onTaskResolve && onTaskResolve(theResult);\n                        }\n                        catch (e) {\n                            onTaskReject && onTaskReject(e);\n                        }\n                        onTaskReject = null;\n                        onTaskResolve = null;\n                    }, _promiseReject);\n                }\n                catch (e) {\n                    _promiseReject(e);\n                }\n            }\n        };\n    };\n    var _waitForPreviousTask = function (taskDetail, prevTask, startAction) {\n        _waiting.push(taskDetail);\n        _startBlockedTimer();\n        return newPromise(function (onWaitResolve, onWaitReject) {\n            doAwaitResponse(prevTask.p, function () {\n                _removeTask(_waiting, taskDetail);\n                _runTask(taskDetail, startAction)(onWaitResolve, onWaitReject);\n            });\n        });\n    };\n    var _doCleanup = function (taskDetail) {\n        _removeTask(_running, taskDetail);\n        taskDetail.t && taskDetail.t.cancel();\n        taskDetail.t = null;\n        if (_theTask && _theTask === taskDetail) {\n            _theTask = null;\n            if (getLength(_running) + getLength(_waiting) === 0) {\n                _blockedTimer && _blockedTimer.cancel();\n                _blockedTimer = null;\n            }\n        }\n    };\n    var theScheduler = {\n        idle: true,\n        queue: _queueTask,\n        setStaleTimeout: function (staleTimeout, staleCheckPeriod) {\n            _blockedTimer && _blockedTimer.cancel();\n            _blockedTimer = null;\n            _staleTimeoutPeriod = staleTimeout;\n            _staleTimeoutCheckPeriod = staleCheckPeriod || staleTimeout / 10;\n            _startBlockedTimer();\n        }\n    };\n    objDefine(theScheduler, \"idle\", {\n        g: function () {\n            return getLength(_running) + getLength(_waiting) === 0;\n        }\n    });\n    _addDebugState(theScheduler, function () { return _schedulerName; }, function () {\n        return {\n            l: _theTask,\n            r: _running,\n            w: _waiting\n        };\n    });\n    return theScheduler;\n}\n\nvar toStringTagSymbol = getKnownSymbol(11 );\nvar PolyPromise = /*#__PURE__*/ (function () {\n    function PolyPromiseImpl(executor) {\n        this._$ = createAsyncPromise(executor);\n        if (toStringTagSymbol) {\n            this[toStringTagSymbol] = \"Promise\";\n        }\n        objDefineProp(this, \"state\", {\n            get: function () {\n                return this._$.state;\n            }\n        });\n    }\n    PolyPromiseImpl.all = createAsyncAllPromise;\n    PolyPromiseImpl.race = createAsyncRacePromise;\n    PolyPromiseImpl.any = createAsyncAnyPromise;\n    PolyPromiseImpl.reject = createAsyncRejectedPromise;\n    PolyPromiseImpl.resolve = createAsyncResolvedPromise;\n    PolyPromiseImpl.allSettled = createAsyncAllSettledPromise;\n    var theProto = PolyPromiseImpl.prototype;\n    theProto.then = function (onResolved, onRejected) {\n        return this._$.then(onResolved, onRejected);\n    };\n    theProto.catch = function (onRejected) {\n        return this._$.catch(onRejected);\n    };\n    theProto.finally = function (onfinally) {\n        return this._$.finally(onfinally);\n    };\n    return PolyPromiseImpl;\n}());\n\nexport { PolyPromise, arrForEachAsync, createAllPromise, createAllSettledPromise, createAnyPromise, createAsyncAllPromise, createAsyncAllSettledPromise, createAsyncAnyPromise, createAsyncPromise, createAsyncRacePromise, createAsyncRejectedPromise, createAsyncResolvedPromise, createIdleAllPromise, createIdleAllSettledPromise, createIdleAnyPromise, createIdlePromise, createIdleRacePromise, createIdleRejectedPromise, createIdleResolvedPromise, createNativeAllPromise, createNativeAllSettledPromise, createNativeAnyPromise, createNativePromise, createNativeRacePromise, createNativeRejectedPromise, createNativeResolvedPromise, createPromise, createRacePromise, createRejectedPromise, createResolvedPromise, createSyncAllPromise, createSyncAllSettledPromise, createSyncAnyPromise, createSyncPromise, createSyncRacePromise, createSyncRejectedPromise, createSyncResolvedPromise, createTaskScheduler, createTimeoutPromise, doAwait, doAwaitResponse, doFinally, doWhileAsync, iterForOfAsync, setCreatePromiseImpl, setDefaultIdlePromiseTimeout, setDefaultIdleTimeout, setPromiseDebugState };\n//# sourceMappingURL=ts-async.js.map\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nvar _a;\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { isFunction, objDefine } from \"@nevware21/ts-utils\";\r\nimport { createDynamicConfig } from \"../Config/DynamicConfig\";\r\nimport { _DYN_CREATE_NEW, _DYN_DIAG_LOG, _DYN_GET_NEXT, _DYN_GET_PROCESS_TEL_CONT2, _DYN_INITIALIZE, _DYN_IS_ASYNC, _DYN_IS_INITIALIZED, _DYN_PROCESS_NEXT, _DYN_SET_NEXT_PLUGIN, _DYN_TEARDOWN, _DYN_UPDATE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { safeGetLogger } from \"./DiagnosticLogger\";\r\nimport { isNotNullOrUndefined, proxyFunctionAs } from \"./HelperFuncs\";\r\nimport { STR_CORE, STR_EXTENSION_CONFIG, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { createProcessTelemetryContext, createProcessTelemetryUnloadContext, createProcessTelemetryUpdateContext } from \"./ProcessTelemetryContext\";\r\nimport { createUnloadHandlerContainer } from \"./UnloadHandlerContainer\";\r\nimport { createUnloadHookContainer } from \"./UnloadHookContainer\";\r\nvar strGetPlugin = \"getPlugin\";\r\nvar defaultValues = (_a = {},\r\n    _a[STR_EXTENSION_CONFIG] = { isVal: isNotNullOrUndefined, v: {} },\r\n    _a);\r\n/**\r\n * BaseTelemetryPlugin provides a basic implementation of the ITelemetryPlugin interface so that plugins\r\n * can avoid implementation the same set of boiler plate code as well as provide a base\r\n * implementation so that new default implementations can be added without breaking all plugins.\r\n */\r\nvar BaseTelemetryPlugin = /** @class */ (function () {\r\n    function BaseTelemetryPlugin() {\r\n        var _self = this; // Setting _self here as it's used outside of the dynamicProto as well\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _isinitialized;\r\n        var _rootCtx; // Used as the root context, holding the current config and initialized core\r\n        var _nextPlugin; // Used for backward compatibility where plugins don't call the main pipeline\r\n        var _unloadHandlerContainer;\r\n        var _hookContainer;\r\n        _initDefaults();\r\n        dynamicProto(BaseTelemetryPlugin, _self, function (_self) {\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, core, extensions, pluginChain) {\r\n                _setDefaults(config, core, pluginChain);\r\n                _isinitialized = true;\r\n            };\r\n            _self[_DYN_TEARDOWN /* @min:%2eteardown */] = function (unloadCtx, unloadState) {\r\n                var _a;\r\n                // If this plugin has already been torn down (not operational) or is not initialized (core is not set)\r\n                // or the core being used for unload was not the same core used for initialization.\r\n                var core = _self[STR_CORE /* @min:%2ecore */];\r\n                if (!core || (unloadCtx && core !== unloadCtx[STR_CORE /* @min:%2ecore */]())) {\r\n                    // Do Nothing as either the plugin is not initialized or was not initialized by the current core\r\n                    return;\r\n                }\r\n                var result;\r\n                var unloadDone = false;\r\n                var theUnloadCtx = unloadCtx || createProcessTelemetryUnloadContext(null, core, _nextPlugin && _nextPlugin[strGetPlugin] ? _nextPlugin[strGetPlugin]() : _nextPlugin);\r\n                var theUnloadState = unloadState || (_a = {\r\n                        reason: 0 /* TelemetryUnloadReason.ManualTeardown */\r\n                    },\r\n                    _a[_DYN_IS_ASYNC /* @min:isAsync */] = false,\r\n                    _a);\r\n                function _unloadCallback() {\r\n                    if (!unloadDone) {\r\n                        unloadDone = true;\r\n                        _unloadHandlerContainer.run(theUnloadCtx, unloadState);\r\n                        _hookContainer.run(theUnloadCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */]());\r\n                        if (result === true) {\r\n                            theUnloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUnloadState);\r\n                        }\r\n                        _initDefaults();\r\n                    }\r\n                }\r\n                if (!_self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] || _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */](theUnloadCtx, theUnloadState, _unloadCallback) !== true) {\r\n                    _unloadCallback();\r\n                }\r\n                else {\r\n                    // Tell the caller that we will be calling processNext()\r\n                    result = true;\r\n                }\r\n                return result;\r\n            };\r\n            _self[_DYN_UPDATE /* @min:%2eupdate */] = function (updateCtx, updateState) {\r\n                // If this plugin has already been torn down (not operational) or is not initialized (core is not set)\r\n                // or the core being used for unload was not the same core used for initialization.\r\n                var core = _self[STR_CORE /* @min:%2ecore */];\r\n                if (!core || (updateCtx && core !== updateCtx[STR_CORE /* @min:%2ecore */]())) {\r\n                    // Do Nothing\r\n                    return;\r\n                }\r\n                var result;\r\n                var updateDone = false;\r\n                var theUpdateCtx = updateCtx || createProcessTelemetryUpdateContext(null, core, _nextPlugin && _nextPlugin[strGetPlugin] ? _nextPlugin[strGetPlugin]() : _nextPlugin);\r\n                var theUpdateState = updateState || {\r\n                    reason: 0 /* TelemetryUpdateReason.Unknown */\r\n                };\r\n                function _updateCallback() {\r\n                    if (!updateDone) {\r\n                        updateDone = true;\r\n                        _setDefaults(theUpdateCtx.getCfg(), theUpdateCtx.core(), theUpdateCtx[_DYN_GET_NEXT /* @min:%2egetNext */]());\r\n                    }\r\n                }\r\n                if (!_self._doUpdate || _self._doUpdate(theUpdateCtx, theUpdateState, _updateCallback) !== true) {\r\n                    _updateCallback();\r\n                }\r\n                else {\r\n                    result = true;\r\n                }\r\n                return result;\r\n            };\r\n            proxyFunctionAs(_self, \"_addUnloadCb\", function () { return _unloadHandlerContainer; }, \"add\");\r\n            proxyFunctionAs(_self, \"_addHook\", function () { return _hookContainer; }, \"add\");\r\n            objDefine(_self, \"_unloadHooks\", { g: function () { return _hookContainer; } });\r\n        });\r\n        // These are added after the dynamicProto so that are not moved to the prototype\r\n        _self[_DYN_DIAG_LOG /* @min:%2ediagLog */] = function (itemCtx) {\r\n            return _getTelCtx(itemCtx)[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n        };\r\n        _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = function () {\r\n            return _isinitialized;\r\n        };\r\n        _self.setInitialized = function (isInitialized) {\r\n            _isinitialized = isInitialized;\r\n        };\r\n        // _self.getNextPlugin = () => DO NOT IMPLEMENT\r\n        // Sub-classes of this base class *should* not be relying on this value and instead\r\n        // should use processNext() function. If you require access to the plugin use the\r\n        // IProcessTelemetryContext.getNext().getPlugin() while in the pipeline, Note getNext() may return null.\r\n        _self[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */] = function (next) {\r\n            _nextPlugin = next;\r\n        };\r\n        _self[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = function (env, itemCtx) {\r\n            if (itemCtx) {\r\n                // Normal core execution sequence\r\n                itemCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](env);\r\n            }\r\n            else if (_nextPlugin && isFunction(_nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */])) {\r\n                // Looks like backward compatibility or out of band processing. And as it looks\r\n                // like a ITelemetryPlugin or ITelemetryPluginChain, just call processTelemetry\r\n                _nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, null);\r\n            }\r\n        };\r\n        _self._getTelCtx = _getTelCtx;\r\n        function _getTelCtx(currentCtx) {\r\n            if (currentCtx === void 0) { currentCtx = null; }\r\n            var itemCtx = currentCtx;\r\n            if (!itemCtx) {\r\n                var rootCtx = _rootCtx || createProcessTelemetryContext(null, {}, _self[STR_CORE /* @min:%2ecore */]);\r\n                // tslint:disable-next-line: prefer-conditional-expression\r\n                if (_nextPlugin && _nextPlugin[strGetPlugin]) {\r\n                    // Looks like a chain object\r\n                    itemCtx = rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](null, _nextPlugin[strGetPlugin]);\r\n                }\r\n                else {\r\n                    itemCtx = rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](null, _nextPlugin);\r\n                }\r\n            }\r\n            return itemCtx;\r\n        }\r\n        function _setDefaults(config, core, pluginChain) {\r\n            // Make sure the extensionConfig exists and the config is dynamic\r\n            createDynamicConfig(config, defaultValues, safeGetLogger(core));\r\n            if (!pluginChain && core) {\r\n                // Get the first plugin from the core\r\n                pluginChain = core[_DYN_GET_PROCESS_TEL_CONT2 /* @min:%2egetProcessTelContext */]()[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n            }\r\n            var nextPlugin = _nextPlugin;\r\n            if (_nextPlugin && _nextPlugin[strGetPlugin]) {\r\n                // If it looks like a proxy/chain then get the plugin\r\n                nextPlugin = _nextPlugin[strGetPlugin]();\r\n            }\r\n            // Support legacy plugins where core was defined as a property\r\n            _self[STR_CORE /* @min:%2ecore */] = core;\r\n            _rootCtx = createProcessTelemetryContext(pluginChain, config, core, nextPlugin);\r\n        }\r\n        function _initDefaults() {\r\n            _isinitialized = false;\r\n            _self[STR_CORE /* @min:%2ecore */] = null;\r\n            _rootCtx = null;\r\n            _nextPlugin = null;\r\n            _hookContainer = createUnloadHookContainer();\r\n            _unloadHandlerContainer = createUnloadHandlerContainer();\r\n        }\r\n    }\r\n// Removed Stub for BaseTelemetryPlugin.prototype.initialize.\r\n// Removed Stub for BaseTelemetryPlugin.prototype.teardown.\r\n// Removed Stub for BaseTelemetryPlugin.prototype.update.\r\n// Removed Stub for BaseTelemetryPlugin.prototype._addUnloadCb.\r\n// Removed Stub for BaseTelemetryPlugin.prototype._addHook.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    BaseTelemetryPlugin.__ieDyn=1;\n\n    return BaseTelemetryPlugin;\r\n}());\r\nexport { BaseTelemetryPlugin };\r\n//# sourceMappingURL=BaseTelemetryPlugin.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar _a;\r\nimport { getGlobal, objCreate, objHasOwnProperty, throwTypeError } from \"@nevware21/ts-utils\";\r\n;\r\nvar UNDEFINED = \"undefined\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Constructor = 'constructor';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Prototype = 'prototype';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strFunction = 'function';\r\n/**\r\n * Used to define the name of the instance function lookup table\r\n * @ignore\r\n */\r\nvar DynInstFuncTable = '_dynInstFuncs';\r\n/**\r\n * Name used to tag the dynamic prototype function\r\n * @ignore\r\n */\r\nvar DynProxyTag = '_isDynProxy';\r\n/**\r\n * Name added to a prototype to define the dynamic prototype \"class\" name used to lookup the function table\r\n * @ignore\r\n */\r\nvar DynClassName = '_dynClass';\r\n/**\r\n * Prefix added to the classname to avoid any name clashes with other instance level properties\r\n * @ignore\r\n */\r\nvar DynClassNamePrefix = '_dynCls$';\r\n/**\r\n * A tag which is used to check if we have already to attempted to set the instance function if one is not present\r\n * @ignore\r\n */\r\nvar DynInstChkTag = '_dynInstChk';\r\n/**\r\n * A tag which is used to check if we are allows to try and set an instance function is one is not present. Using the same\r\n * tag name as the function level but a different const name for readability only.\r\n */\r\nvar DynAllowInstChkTag = DynInstChkTag;\r\n/**\r\n * The global (imported) instances where the global performance options are stored\r\n */\r\nvar DynProtoDefaultOptions = '_dfOpts';\r\n/**\r\n * Value used as the name of a class when it cannot be determined\r\n * @ignore\r\n */\r\nvar UnknownValue = '_unknown_';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar str__Proto = \"__proto__\";\r\n/**\r\n * The polyfill version of __proto__ so that it doesn't cause issues for anyone not expecting it to exist\r\n */\r\nvar DynProtoBaseProto = \"_dyn\" + str__Proto;\r\n/**\r\n * Runtime Global holder for dynamicProto settings\r\n */\r\nvar DynProtoGlobalSettings = \"__dynProto$Gbl\";\r\n/**\r\n * Track the current prototype for IE8 as you can't look back to get the prototype\r\n */\r\nvar DynProtoCurrent = \"_dynInstProto\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strUseBaseInst = 'useBaseInst';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strSetInstFuncs = 'setInstFuncs';\r\nvar Obj = Object;\r\n/**\r\n * Pre-lookup to check if we are running on a modern browser (i.e. not IE8)\r\n * @ignore\r\n */\r\nvar _objGetPrototypeOf = Obj[\"getPrototypeOf\"];\r\n/**\r\n * Pre-lookup to check for the existence of this function\r\n */\r\nvar _objGetOwnProps = Obj[\"getOwnPropertyNames\"];\r\n// Since 1.1.7 moving these to the runtime global to work around mixed version and module issues\r\n// See Issue https://github.com/microsoft/DynamicProto-JS/issues/57 for details\r\nvar _gbl = getGlobal();\r\nvar _gblInst = _gbl[DynProtoGlobalSettings] || (_gbl[DynProtoGlobalSettings] = {\r\n    o: (_a = {},\r\n        _a[strSetInstFuncs] = true,\r\n        _a[strUseBaseInst] = true,\r\n        _a),\r\n    n: 1000 // Start new global index @ 1000 so we \"fix\" some cases when mixed with 1.1.6 or earlier\r\n});\r\n/**\r\n * Helper used to check whether the target is an Object prototype or Array prototype\r\n * @ignore\r\n */\r\nfunction _isObjectOrArrayPrototype(target) {\r\n    return target && (target === Obj[Prototype] || target === Array[Prototype]);\r\n}\r\n/**\r\n * Helper used to check whether the target is an Object prototype, Array prototype or Function prototype\r\n * @ignore\r\n */\r\nfunction _isObjectArrayOrFunctionPrototype(target) {\r\n    return _isObjectOrArrayPrototype(target) || target === Function[Prototype];\r\n}\r\n/**\r\n * Helper used to get the prototype of the target object as getPrototypeOf is not available in an ES3 environment.\r\n * @ignore\r\n */\r\nfunction _getObjProto(target) {\r\n    var newProto;\r\n    if (target) {\r\n        // This method doesn't exist in older browsers (e.g. IE8)\r\n        if (_objGetPrototypeOf) {\r\n            return _objGetPrototypeOf(target);\r\n        }\r\n        var curProto = target[str__Proto] || target[Prototype] || (target[Constructor] ? target[Constructor][Prototype] : null);\r\n        // Using the pre-calculated value as IE8 doesn't support looking up the prototype of a prototype and thus fails for more than 1 base class\r\n        newProto = target[DynProtoBaseProto] || curProto;\r\n        if (!objHasOwnProperty(target, DynProtoBaseProto)) {\r\n            // As this prototype doesn't have this property then this is from an inherited class so newProto is the base to return so save it\r\n            // so we can look it up value (which for a multiple hierarchy dynamicProto will be the base class)\r\n            delete target[DynProtoCurrent]; // Delete any current value allocated to this instance so we pick up the value from prototype hierarchy\r\n            newProto = target[DynProtoBaseProto] = target[DynProtoCurrent] || target[DynProtoBaseProto];\r\n            target[DynProtoCurrent] = curProto;\r\n        }\r\n    }\r\n    return newProto;\r\n}\r\n/**\r\n * Helper to get the properties of an object, including none enumerable ones as functions on a prototype in ES6\r\n * are not enumerable.\r\n * @param target\r\n */\r\nfunction _forEachProp(target, func) {\r\n    var props = [];\r\n    if (_objGetOwnProps) {\r\n        props = _objGetOwnProps(target);\r\n    }\r\n    else {\r\n        for (var name_1 in target) {\r\n            if (typeof name_1 === \"string\" && objHasOwnProperty(target, name_1)) {\r\n                props.push(name_1);\r\n            }\r\n        }\r\n    }\r\n    if (props && props.length > 0) {\r\n        for (var lp = 0; lp < props.length; lp++) {\r\n            func(props[lp]);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Helper function to check whether the provided function name is a potential candidate for dynamic\r\n * callback and prototype generation.\r\n * @param target The target object, may be a prototype or class object\r\n * @param funcName The function name\r\n * @param skipOwn Skips the check for own property\r\n * @ignore\r\n */\r\nfunction _isDynamicCandidate(target, funcName, skipOwn) {\r\n    return (funcName !== Constructor && typeof target[funcName] === strFunction && (skipOwn || objHasOwnProperty(target, funcName)) && funcName !== str__Proto && funcName !== Prototype);\r\n}\r\n/**\r\n * Helper to throw a TypeError exception\r\n * @param message the message\r\n * @ignore\r\n */\r\nfunction _throwTypeError(message) {\r\n    throwTypeError(\"DynamicProto: \" + message);\r\n}\r\n/**\r\n * Returns a collection of the instance functions that are defined directly on the thisTarget object, it does\r\n * not return any inherited functions\r\n * @param thisTarget The object to get the instance functions from\r\n * @ignore\r\n */\r\nfunction _getInstanceFuncs(thisTarget) {\r\n    // Get the base proto\r\n    var instFuncs = objCreate(null);\r\n    // Save any existing instance functions\r\n    _forEachProp(thisTarget, function (name) {\r\n        // Don't include any dynamic prototype instances - as we only want the real functions\r\n        if (!instFuncs[name] && _isDynamicCandidate(thisTarget, name, false)) {\r\n            // Create an instance callback for passing the base function to the caller\r\n            instFuncs[name] = thisTarget[name];\r\n        }\r\n    });\r\n    return instFuncs;\r\n}\r\n/**\r\n * Returns whether the value is included in the array\r\n * @param values The array of values\r\n * @param value  The value\r\n */\r\nfunction _hasVisited(values, value) {\r\n    for (var lp = values.length - 1; lp >= 0; lp--) {\r\n        if (values[lp] === value) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Returns an object that contains callback functions for all \"base/super\" functions, this is used to \"save\"\r\n * enabling calling super.xxx() functions without requiring that the base \"class\" has defined a prototype references\r\n * @param target The current instance\r\n * @ignore\r\n */\r\nfunction _getBaseFuncs(classProto, thisTarget, instFuncs, useBaseInst) {\r\n    function _instFuncProxy(target, funcHost, funcName) {\r\n        var theFunc = funcHost[funcName];\r\n        if (theFunc[DynProxyTag] && useBaseInst) {\r\n            // grab and reuse the hosted looking function (if available) otherwise the original passed function\r\n            var instFuncTable = target[DynInstFuncTable] || {};\r\n            if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n                theFunc = (instFuncTable[funcHost[DynClassName]] || {})[funcName] || theFunc;\r\n            }\r\n        }\r\n        return function () {\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return theFunc.apply(target, arguments);\r\n        };\r\n    }\r\n    // Start creating a new baseFuncs by creating proxies for the instance functions (as they may get replaced)\r\n    var baseFuncs = objCreate(null);\r\n    _forEachProp(instFuncs, function (name) {\r\n        // Create an instance callback for passing the base function to the caller\r\n        baseFuncs[name] = _instFuncProxy(thisTarget, instFuncs, name);\r\n    });\r\n    // Get the base prototype functions\r\n    var baseProto = _getObjProto(classProto);\r\n    var visited = [];\r\n    // Don't include base object functions for Object, Array or Function\r\n    while (baseProto && !_isObjectArrayOrFunctionPrototype(baseProto) && !_hasVisited(visited, baseProto)) {\r\n        // look for prototype functions\r\n        _forEachProp(baseProto, function (name) {\r\n            // Don't include any dynamic prototype instances - as we only want the real functions\r\n            // For IE 7/8 the prototype lookup doesn't provide the full chain so we need to bypass the \r\n            // hasOwnProperty check we get all of the methods, main difference is that IE7/8 doesn't return\r\n            // the Object prototype methods while bypassing the check\r\n            if (!baseFuncs[name] && _isDynamicCandidate(baseProto, name, !_objGetPrototypeOf)) {\r\n                // Create an instance callback for passing the base function to the caller\r\n                baseFuncs[name] = _instFuncProxy(thisTarget, baseProto, name);\r\n            }\r\n        });\r\n        // We need to find all possible functions that might be overloaded by walking the entire prototype chain\r\n        // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n        // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n        visited.push(baseProto);\r\n        baseProto = _getObjProto(baseProto);\r\n    }\r\n    return baseFuncs;\r\n}\r\nfunction _getInstFunc(target, funcName, proto, currentDynProtoProxy) {\r\n    var instFunc = null;\r\n    // We need to check whether the class name is defined directly on this prototype otherwise\r\n    // it will walk the proto chain and return any parent proto classname.\r\n    if (target && objHasOwnProperty(proto, DynClassName)) {\r\n        var instFuncTable = target[DynInstFuncTable] || objCreate(null);\r\n        instFunc = (instFuncTable[proto[DynClassName]] || objCreate(null))[funcName];\r\n        if (!instFunc) {\r\n            // Avoid stack overflow from recursive calling the same function\r\n            _throwTypeError(\"Missing [\" + funcName + \"] \" + strFunction);\r\n        }\r\n        // We have the instance function, lets check it we can speed up further calls\r\n        // by adding the instance function back directly on the instance (avoiding the dynamic func lookup)\r\n        if (!instFunc[DynInstChkTag] && instFuncTable[DynAllowInstChkTag] !== false) {\r\n            // If the instance already has an instance function we can't replace it\r\n            var canAddInst = !objHasOwnProperty(target, funcName);\r\n            // Get current prototype\r\n            var objProto = _getObjProto(target);\r\n            var visited = [];\r\n            // Lookup the function starting at the top (instance level prototype) and traverse down, if the first matching function\r\n            // if nothing is found or if the first hit is a dynamic proto instance then we can safely add an instance shortcut\r\n            while (canAddInst && objProto && !_isObjectArrayOrFunctionPrototype(objProto) && !_hasVisited(visited, objProto)) {\r\n                var protoFunc = objProto[funcName];\r\n                if (protoFunc) {\r\n                    canAddInst = (protoFunc === currentDynProtoProxy);\r\n                    break;\r\n                }\r\n                // We need to find all possible initial functions to ensure that we don't bypass a valid override function\r\n                visited.push(objProto);\r\n                objProto = _getObjProto(objProto);\r\n            }\r\n            try {\r\n                if (canAddInst) {\r\n                    // This instance doesn't have an instance func and the class hierarchy does have a higher level prototype version\r\n                    // so it's safe to directly assign for any subsequent calls (for better performance)\r\n                    target[funcName] = instFunc;\r\n                }\r\n                // Block further attempts to set the instance function for any\r\n                instFunc[DynInstChkTag] = 1;\r\n            }\r\n            catch (e) {\r\n                // Don't crash if the object is readonly or the runtime doesn't allow changing this\r\n                // And set a flag so we don't try again for any function\r\n                instFuncTable[DynAllowInstChkTag] = false;\r\n            }\r\n        }\r\n    }\r\n    return instFunc;\r\n}\r\nfunction _getProtoFunc(funcName, proto, currentDynProtoProxy) {\r\n    var protoFunc = proto[funcName];\r\n    // Check that the prototype function is not a self reference -- try to avoid stack overflow!\r\n    if (protoFunc === currentDynProtoProxy) {\r\n        // It is so lookup the base prototype\r\n        protoFunc = _getObjProto(proto)[funcName];\r\n    }\r\n    if (typeof protoFunc !== strFunction) {\r\n        _throwTypeError(\"[\" + funcName + \"] is not a \" + strFunction);\r\n    }\r\n    return protoFunc;\r\n}\r\n/**\r\n * Add the required dynamic prototype methods to the the class prototype\r\n * @param proto - The class prototype\r\n * @param className - The instance classname\r\n * @param target - The target instance\r\n * @param baseInstFuncs - The base instance functions\r\n * @param setInstanceFunc - Flag to allow prototype function to reset the instance function if one does not exist\r\n * @ignore\r\n */\r\nfunction _populatePrototype(proto, className, target, baseInstFuncs, setInstanceFunc) {\r\n    function _createDynamicPrototype(proto, funcName) {\r\n        var dynProtoProxy = function () {\r\n            // Use the instance or prototype function\r\n            var instFunc = _getInstFunc(this, funcName, proto, dynProtoProxy) || _getProtoFunc(funcName, proto, dynProtoProxy);\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return instFunc.apply(this, arguments);\r\n        };\r\n        // Tag this function as a proxy to support replacing dynamic proxy elements (primary use case is for unit testing\r\n        // via which can dynamically replace the prototype function reference)\r\n        dynProtoProxy[DynProxyTag] = 1;\r\n        return dynProtoProxy;\r\n    }\r\n    if (!_isObjectOrArrayPrototype(proto)) {\r\n        var instFuncTable = target[DynInstFuncTable] = target[DynInstFuncTable] || objCreate(null);\r\n        if (!_isObjectOrArrayPrototype(instFuncTable)) {\r\n            var instFuncs_1 = instFuncTable[className] = (instFuncTable[className] || objCreate(null)); // fetch and assign if as it may not exist yet\r\n            // Set whether we are allow to lookup instances, if someone has set to false then do not re-enable\r\n            if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n                instFuncTable[DynAllowInstChkTag] = !!setInstanceFunc;\r\n            }\r\n            if (!_isObjectOrArrayPrototype(instFuncs_1)) {\r\n                _forEachProp(target, function (name) {\r\n                    // Only add overridden functions\r\n                    if (_isDynamicCandidate(target, name, false) && target[name] !== baseInstFuncs[name]) {\r\n                        // Save the instance Function to the lookup table and remove it from the instance as it's not a dynamic proto function\r\n                        instFuncs_1[name] = target[name];\r\n                        delete target[name];\r\n                        // Add a dynamic proto if one doesn't exist or if a prototype function exists and it's not a dynamic one\r\n                        if (!objHasOwnProperty(proto, name) || (proto[name] && !proto[name][DynProxyTag])) {\r\n                            proto[name] = _createDynamicPrototype(proto, name);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Checks whether the passed prototype object appears to be correct by walking the prototype hierarchy of the instance\r\n * @param classProto The class prototype instance\r\n * @param thisTarget The current instance that will be checked whether the passed prototype instance is in the hierarchy\r\n * @ignore\r\n */\r\nfunction _checkPrototype(classProto, thisTarget) {\r\n    // This method doesn't existing in older browsers (e.g. IE8)\r\n    if (_objGetPrototypeOf) {\r\n        // As this is primarily a coding time check, don't bother checking if running in IE8 or lower\r\n        var visited = [];\r\n        var thisProto = _getObjProto(thisTarget);\r\n        while (thisProto && !_isObjectArrayOrFunctionPrototype(thisProto) && !_hasVisited(visited, thisProto)) {\r\n            if (thisProto === classProto) {\r\n                return true;\r\n            }\r\n            // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n            // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n            visited.push(thisProto);\r\n            thisProto = _getObjProto(thisProto);\r\n        }\r\n        return false;\r\n    }\r\n    // If objGetPrototypeOf doesn't exist then just assume everything is ok.\r\n    return true;\r\n}\r\n/**\r\n * Gets the current prototype name using the ES6 name if available otherwise falling back to a use unknown as the name.\r\n * It's not critical for this to return a name, it's used to decorate the generated unique name for easier debugging only.\r\n * @param target\r\n * @param unknownValue\r\n * @ignore\r\n */\r\nfunction _getObjName(target, unknownValue) {\r\n    if (objHasOwnProperty(target, Prototype)) {\r\n        // Look like a prototype\r\n        return target.name || unknownValue || UnknownValue;\r\n    }\r\n    return (((target || {})[Constructor]) || {}).name || unknownValue || UnknownValue;\r\n}\r\n/**\r\n * Helper function when creating dynamic (inline) functions for classes, this helper performs the following tasks :-\r\n * - Saves references to all defined base class functions\r\n * - Calls the delegateFunc with the current target (this) and a base object reference that can be used to call all \"super\" functions.\r\n * - Will populate the class prototype for all overridden functions to support class extension that call the prototype instance.\r\n * Callers should use this helper when declaring all function within the constructor of a class, as mentioned above the delegateFunc is\r\n * passed both the target \"this\" and an object that can be used to call any base (super) functions, using this based object in place of\r\n * super.XXX() (which gets expanded to _super.prototype.XXX()) provides a better minification outcome and also ensures the correct \"this\"\r\n * context is maintained as TypeScript creates incorrect references using super.XXXX() for dynamically defined functions i.e. Functions\r\n * defined in the constructor or some other function (rather than declared as complete typescript functions).\r\n * ### Usage\r\n * ```typescript\r\n * import dynamicProto from \"@microsoft/dynamicproto-js\";\r\n * class ExampleClass extends BaseClass {\r\n *     constructor() {\r\n *         dynamicProto(ExampleClass, this, (_self, base) => {\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.newFunc = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     ...\r\n *                 }\r\n *             }\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.myFunction = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     // Call the base version of the function that we are overriding\r\n *                     base.myFunction();\r\n *                 }\r\n *                 ...\r\n *             }\r\n *             _self.initialize = () => {\r\n *                 ...\r\n *             }\r\n *             // Warnings: While the following will work as _self is simply a reference to\r\n *             // this, if anyone overrides myFunction() the overridden will be called first\r\n *             // as the normal JavaScript method resolution will occur and the defined\r\n *             // _self.initialize() function is actually gets removed from the instance and\r\n *             // a proxy prototype version is created to reference the created method.\r\n *             _self.initialize();\r\n *         });\r\n *     }\r\n * }\r\n * ```\r\n * @typeparam DPType This is the generic type of the class, used to keep intellisense valid\r\n * @typeparam DPCls The type that contains the prototype of the current class\r\n * @param theClass - This is the current class instance which contains the prototype for the current class\r\n * @param target - The current \"this\" (target) reference, when the class has been extended this.prototype will not be the 'theClass' value.\r\n * @param delegateFunc - The callback function (closure) that will create the dynamic function\r\n * @param options - Additional options to configure how the dynamic prototype operates\r\n */\r\nexport default function dynamicProto(theClass, target, delegateFunc, options) {\r\n    // Make sure that the passed theClass argument looks correct\r\n    if (!objHasOwnProperty(theClass, Prototype)) {\r\n        _throwTypeError(\"theClass is an invalid class definition.\");\r\n    }\r\n    // Quick check to make sure that the passed theClass argument looks correct (this is a common copy/paste error)\r\n    var classProto = theClass[Prototype];\r\n    if (!_checkPrototype(classProto, target)) {\r\n        _throwTypeError(\"[\" + _getObjName(theClass) + \"] not in hierarchy of [\" + _getObjName(target) + \"]\");\r\n    }\r\n    var className = null;\r\n    if (objHasOwnProperty(classProto, DynClassName)) {\r\n        // Only grab the class name if it's defined on this prototype (i.e. don't walk the prototype chain)\r\n        className = classProto[DynClassName];\r\n    }\r\n    else {\r\n        // As not all browser support name on the prototype creating a unique dynamic one if we have not already\r\n        // assigned one, so we can use a simple string as the lookup rather than an object for the dynamic instance\r\n        // function table lookup.\r\n        className = DynClassNamePrefix + _getObjName(theClass, \"_\") + \"$\" + _gblInst.n;\r\n        _gblInst.n++;\r\n        classProto[DynClassName] = className;\r\n    }\r\n    var perfOptions = dynamicProto[DynProtoDefaultOptions];\r\n    var useBaseInst = !!perfOptions[strUseBaseInst];\r\n    if (useBaseInst && options && options[strUseBaseInst] !== undefined) {\r\n        useBaseInst = !!options[strUseBaseInst];\r\n    }\r\n    // Get the current instance functions\r\n    var instFuncs = _getInstanceFuncs(target);\r\n    // Get all of the functions for any base instance (before they are potentially overridden)\r\n    var baseFuncs = _getBaseFuncs(classProto, target, instFuncs, useBaseInst);\r\n    // Execute the delegate passing in both the current target \"this\" and \"base\" function references\r\n    // Note casting the same type as we don't actually have the base class here and this will provide some intellisense support\r\n    delegateFunc(target, baseFuncs);\r\n    // Don't allow setting instance functions for older IE instances\r\n    var setInstanceFunc = !!_objGetPrototypeOf && !!perfOptions[strSetInstFuncs];\r\n    if (setInstanceFunc && options) {\r\n        setInstanceFunc = !!options[strSetInstFuncs];\r\n    }\r\n    // Populate the Prototype for any overridden instance functions\r\n    _populatePrototype(classProto, className, target, instFuncs, setInstanceFunc !== false);\r\n}\r\n/**\r\n * Exposes the default global options to allow global configuration, if the global values are disabled these will override\r\n * any passed values. This is primarily exposed to support unit-testing without the need for individual classes to expose\r\n * their internal usage of dynamic proto.\r\n */\r\ndynamicProto[DynProtoDefaultOptions] = _gblInst.o;\r\n//# sourceMappingURL=DynamicProto.js.map","// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.format()\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range\n      .trim()\n      .split(/\\s+/)\n      .join(' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.format()\n  }\n\n  format () {\n    this.range = this.set\n      .map((comps) => comps.join(' ').trim())\n      .join('||')\n      .trim()\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('lru-cache')\nconst cache = new LRU({ max: 1000 })\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Command, CommandManager } from '../commands/commandManager';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { TelemetryReporter } from '../logging/telemetry';\nimport * as fixNames from '../tsServer/protocol/fixNames';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as typeConverters from '../typeConverters';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { nulToken } from '../utils/cancellation';\nimport { Lazy } from '../utils/lazy';\nimport { equals } from '../utils/objects';\nimport { DiagnosticsManager } from './diagnostics';\nimport FileConfigurationManager from './fileConfigurationManager';\nimport { applyCodeActionCommands, getEditForCodeAction } from './util/codeAction';\nimport { CompositeCommand, EditorChatFollowUp, EditorChatFollowUp_Args, Expand } from './util/copilot';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\n\ntype ApplyCodeActionCommand_args = {\n\treadonly document: vscode.TextDocument;\n\treadonly diagnostic: vscode.Diagnostic;\n\treadonly action: Proto.CodeFixAction;\n\treadonly followupAction?: Command;\n};\n\nclass ApplyCodeActionCommand implements Command {\n\tpublic static readonly ID = '_typescript.applyCodeActionCommand';\n\tpublic readonly id = ApplyCodeActionCommand.ID;\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly diagnosticManager: DiagnosticsManager,\n\t\tprivate readonly telemetryReporter: TelemetryReporter,\n\t) { }\n\n\tpublic async execute({ document, action, diagnostic, followupAction }: ApplyCodeActionCommand_args): Promise<boolean> {\n\t\t/* __GDPR__\n\t\t\t\"quickFix.execute\" : {\n\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\"fixName\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"${include}\": [\n\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t]\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryReporter.logTelemetry('quickFix.execute', {\n\t\t\tfixName: action.fixName\n\t\t});\n\n\t\tthis.diagnosticManager.deleteDiagnostic(document.uri, diagnostic);\n\t\tconst codeActionResult = await applyCodeActionCommands(this.client, action.commands, nulToken);\n\t\tawait followupAction?.execute();\n\t\treturn codeActionResult;\n\t}\n}\n\ntype ApplyFixAllCodeAction_args = {\n\treadonly action: VsCodeFixAllCodeAction;\n};\n\nclass ApplyFixAllCodeAction implements Command {\n\tpublic static readonly ID = '_typescript.applyFixAllCodeAction';\n\tpublic readonly id = ApplyFixAllCodeAction.ID;\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly telemetryReporter: TelemetryReporter,\n\t) { }\n\n\tpublic async execute(args: ApplyFixAllCodeAction_args): Promise<void> {\n\t\t/* __GDPR__\n\t\t\t\"quickFixAll.execute\" : {\n\t\t\t\t\"owner\": \"mjbvz\",\n\t\t\t\t\"fixName\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"${include}\": [\n\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t]\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryReporter.logTelemetry('quickFixAll.execute', {\n\t\t\tfixName: args.action.tsAction.fixName\n\t\t});\n\n\t\tif (args.action.combinedResponse) {\n\t\t\tawait applyCodeActionCommands(this.client, args.action.combinedResponse.body.commands, nulToken);\n\t\t}\n\t}\n}\n\n/**\n * Unique set of diagnostics keyed on diagnostic range and error code.\n */\nclass DiagnosticsSet {\n\tpublic static from(diagnostics: vscode.Diagnostic[]) {\n\t\tconst values = new Map<string, vscode.Diagnostic>();\n\t\tfor (const diagnostic of diagnostics) {\n\t\t\tvalues.set(DiagnosticsSet.key(diagnostic), diagnostic);\n\t\t}\n\t\treturn new DiagnosticsSet(values);\n\t}\n\n\tprivate static key(diagnostic: vscode.Diagnostic) {\n\t\tconst { start, end } = diagnostic.range;\n\t\treturn `${diagnostic.code}-${start.line},${start.character}-${end.line},${end.character}`;\n\t}\n\n\tprivate constructor(\n\t\tprivate readonly _values: Map<string, vscode.Diagnostic>\n\t) { }\n\n\tpublic get values(): Iterable<vscode.Diagnostic> {\n\t\treturn this._values.values();\n\t}\n\n\tpublic get size() {\n\t\treturn this._values.size;\n\t}\n}\n\nclass VsCodeCodeAction extends vscode.CodeAction {\n\tconstructor(\n\t\tpublic readonly tsAction: Proto.CodeFixAction,\n\t\ttitle: string,\n\t\tkind: vscode.CodeActionKind\n\t) {\n\t\tsuper(title, kind);\n\t}\n}\n\nclass VsCodeFixAllCodeAction extends VsCodeCodeAction {\n\tconstructor(\n\t\ttsAction: Proto.CodeFixAction,\n\t\tpublic readonly file: string,\n\t\ttitle: string,\n\t\tkind: vscode.CodeActionKind\n\t) {\n\t\tsuper(tsAction, title, kind);\n\t}\n\n\tpublic combinedResponse?: Proto.GetCombinedCodeFixResponse;\n}\n\nclass CodeActionSet {\n\tprivate readonly _actions = new Set<VsCodeCodeAction>();\n\tprivate readonly _fixAllActions = new Map<{}, VsCodeCodeAction>();\n\tprivate readonly _aiActions = new Set<VsCodeCodeAction>();\n\n\tpublic *values(): Iterable<VsCodeCodeAction> {\n\t\tyield* this._actions;\n\t\tyield* this._aiActions;\n\t}\n\n\tpublic addAction(action: VsCodeCodeAction) {\n\t\tif (action.isAI) {\n\t\t\t// there are no separate fixAllActions for AI, and no duplicates, so return immediately\n\t\t\tthis._aiActions.add(action);\n\t\t\treturn;\n\t\t}\n\t\tfor (const existing of this._actions) {\n\t\t\tif (action.tsAction.fixName === existing.tsAction.fixName && equals(action.edit, existing.edit)) {\n\t\t\t\tthis._actions.delete(existing);\n\t\t\t}\n\t\t}\n\n\t\tthis._actions.add(action);\n\n\t\tif (action.tsAction.fixId) {\n\t\t\t// If we have an existing fix all action, then make sure it follows this action\n\t\t\tconst existingFixAll = this._fixAllActions.get(action.tsAction.fixId);\n\t\t\tif (existingFixAll) {\n\t\t\t\tthis._actions.delete(existingFixAll);\n\t\t\t\tthis._actions.add(existingFixAll);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic addFixAllAction(fixId: {}, action: VsCodeCodeAction) {\n\t\tconst existing = this._fixAllActions.get(fixId);\n\t\tif (existing) {\n\t\t\t// reinsert action at back of actions list\n\t\t\tthis._actions.delete(existing);\n\t\t}\n\t\tthis.addAction(action);\n\t\tthis._fixAllActions.set(fixId, action);\n\t}\n\n\tpublic hasFixAllAction(fixId: {}) {\n\t\treturn this._fixAllActions.has(fixId);\n\t}\n}\n\nclass SupportedCodeActionProvider {\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async getFixableDiagnosticsForContext(diagnostics: readonly vscode.Diagnostic[]): Promise<DiagnosticsSet> {\n\t\tconst fixableCodes = await this.fixableDiagnosticCodes.value;\n\t\treturn DiagnosticsSet.from(\n\t\t\tdiagnostics.filter(diagnostic => typeof diagnostic.code !== 'undefined' && fixableCodes.has(diagnostic.code + '')));\n\t}\n\n\tprivate readonly fixableDiagnosticCodes = new Lazy<Thenable<Set<string>>>(() => {\n\t\treturn this.client.execute('getSupportedCodeFixes', null, nulToken)\n\t\t\t.then(response => response.type === 'response' ? response.body || [] : [])\n\t\t\t.then(codes => new Set(codes));\n\t});\n}\n\nclass TypeScriptQuickFixProvider implements vscode.CodeActionProvider<VsCodeCodeAction> {\n\n\tprivate static readonly _maxCodeActionsPerFile: number = 1000;\n\n\tpublic static readonly metadata: vscode.CodeActionProviderMetadata = {\n\t\tprovidedCodeActionKinds: [vscode.CodeActionKind.QuickFix]\n\t};\n\n\tprivate readonly supportedCodeActionProvider: SupportedCodeActionProvider;\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly formattingConfigurationManager: FileConfigurationManager,\n\t\tcommandManager: CommandManager,\n\t\tprivate readonly diagnosticsManager: DiagnosticsManager,\n\t\ttelemetryReporter: TelemetryReporter\n\t) {\n\t\tcommandManager.register(new CompositeCommand());\n\t\tcommandManager.register(new ApplyCodeActionCommand(client, diagnosticsManager, telemetryReporter));\n\t\tcommandManager.register(new ApplyFixAllCodeAction(client, telemetryReporter));\n\t\tcommandManager.register(new EditorChatFollowUp(client, telemetryReporter));\n\n\t\tthis.supportedCodeActionProvider = new SupportedCodeActionProvider(client);\n\t}\n\n\tpublic async provideCodeActions(\n\t\tdocument: vscode.TextDocument,\n\t\trange: vscode.Range,\n\t\tcontext: vscode.CodeActionContext,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<VsCodeCodeAction[] | undefined> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet diagnostics = context.diagnostics;\n\t\tif (this.client.bufferSyncSupport.hasPendingDiagnostics(document.uri)) {\n\t\t\t// Delay for 500ms when there are pending diagnostics before recomputing up-to-date diagnostics.\n\t\t\tawait new Promise((resolve) => {\n\t\t\t\tsetTimeout(resolve, 500);\n\t\t\t});\n\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst allDiagnostics: vscode.Diagnostic[] = [];\n\n\t\t\t// Match ranges again after getting new diagnostics\n\t\t\tfor (const diagnostic of this.diagnosticsManager.getDiagnostics(document.uri)) {\n\t\t\t\tif (range.intersection(diagnostic.range)) {\n\t\t\t\t\tconst newLen = allDiagnostics.push(diagnostic);\n\t\t\t\t\tif (newLen > TypeScriptQuickFixProvider._maxCodeActionsPerFile) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tdiagnostics = allDiagnostics;\n\t\t}\n\n\t\tconst fixableDiagnostics = await this.supportedCodeActionProvider.getFixableDiagnosticsForContext(diagnostics);\n\t\tif (!fixableDiagnostics.size || token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.formattingConfigurationManager.ensureConfigurationForDocument(document, token);\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst results = new CodeActionSet();\n\t\tfor (const diagnostic of fixableDiagnostics.values) {\n\t\t\tawait this.getFixesForDiagnostic(document, file, diagnostic, results, token);\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst allActions = Array.from(results.values());\n\t\tfor (const action of allActions) {\n\t\t\taction.isPreferred = isPreferredFix(action, allActions);\n\t\t}\n\t\treturn allActions;\n\t}\n\n\tpublic async resolveCodeAction(codeAction: VsCodeCodeAction, token: vscode.CancellationToken): Promise<VsCodeCodeAction> {\n\t\tif (!(codeAction instanceof VsCodeFixAllCodeAction) || !codeAction.tsAction.fixId) {\n\t\t\treturn codeAction;\n\t\t}\n\n\t\tconst arg: Proto.GetCombinedCodeFixRequestArgs = {\n\t\t\tscope: {\n\t\t\t\ttype: 'file',\n\t\t\t\targs: { file: codeAction.file }\n\t\t\t},\n\t\t\tfixId: codeAction.tsAction.fixId,\n\t\t};\n\n\t\tconst response = await this.client.execute('getCombinedCodeFix', arg, token);\n\t\tif (response.type === 'response') {\n\t\t\tcodeAction.combinedResponse = response;\n\t\t\tcodeAction.edit = typeConverters.WorkspaceEdit.fromFileCodeEdits(this.client, response.body.changes);\n\t\t}\n\n\t\treturn codeAction;\n\t}\n\n\tprivate async getFixesForDiagnostic(\n\t\tdocument: vscode.TextDocument,\n\t\tfile: string,\n\t\tdiagnostic: vscode.Diagnostic,\n\t\tresults: CodeActionSet,\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<CodeActionSet> {\n\t\tconst args: Proto.CodeFixRequestArgs = {\n\t\t\t...typeConverters.Range.toFileRangeRequestArgs(file, diagnostic.range),\n\t\t\terrorCodes: [+(diagnostic.code!)]\n\t\t};\n\t\tconst response = await this.client.execute('getCodeFixes', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn results;\n\t\t}\n\n\t\tfor (const tsCodeFix of response.body) {\n\t\t\tfor (const action of this.getFixesForTsCodeAction(document, diagnostic, tsCodeFix)) {\n\t\t\t\tresults.addAction(action);\n\t\t\t}\n\t\t\tthis.addFixAllForTsCodeAction(results, document.uri, file, diagnostic, tsCodeFix as Proto.CodeFixAction);\n\t\t}\n\t\treturn results;\n\t}\n\n\tprivate getFixesForTsCodeAction(\n\t\tdocument: vscode.TextDocument,\n\t\tdiagnostic: vscode.Diagnostic,\n\t\taction: Proto.CodeFixAction\n\t): VsCodeCodeAction[] {\n\t\tconst actions: VsCodeCodeAction[] = [];\n\t\tconst codeAction = new VsCodeCodeAction(action, action.description, vscode.CodeActionKind.QuickFix);\n\t\tcodeAction.edit = getEditForCodeAction(this.client, action);\n\t\tcodeAction.diagnostics = [diagnostic];\n\t\tcodeAction.ranges = [diagnostic.range];\n\t\tcodeAction.command = {\n\t\t\tcommand: ApplyCodeActionCommand.ID,\n\t\t\targuments: [{ action, diagnostic, document } satisfies ApplyCodeActionCommand_args],\n\t\t\ttitle: ''\n\t\t};\n\t\tactions.push(codeAction);\n\n\t\tconst copilot = vscode.extensions.getExtension('github.copilot-chat');\n\t\tif (copilot?.isActive) {\n\t\t\tlet message: string | undefined;\n\t\t\tlet expand: Expand | undefined;\n\t\t\tlet title = action.description;\n\t\t\tif (action.fixName === fixNames.classIncorrectlyImplementsInterface) {\n\t\t\t\ttitle = vscode.l10n.t('{0} with AI', action.description);\n\t\t\t\tmessage = vscode.l10n.t(`Implement the stubbed-out class members for ${document.getText(diagnostic.range)} with a useful implementation.`);\n\t\t\t\texpand = { kind: 'code-action', action };\n\t\t\t} else if (action.fixName === fixNames.fixClassDoesntImplementInheritedAbstractMember) {\n\t\t\t\ttitle = vscode.l10n.t('{0} with AI', action.description);\n\t\t\t\tmessage = vscode.l10n.t(`Implement the stubbed-out class members for {0} with a useful implementation.`, document.getText(diagnostic.range));\n\t\t\t\texpand = { kind: 'code-action', action };\n\t\t\t} else if (action.fixName === fixNames.fixMissingFunctionDeclaration) {\n\t\t\t\ttitle = vscode.l10n.t(`Implement missing function declaration '{0}' using AI`, document.getText(diagnostic.range));\n\t\t\t\tmessage = vscode.l10n.t(`Provide a reasonable implementation of the function {0} given its type and the context it's called in.`, document.getText(diagnostic.range));\n\t\t\t\texpand = { kind: 'code-action', action };\n\t\t\t} else if (action.fixName === fixNames.inferFromUsage) {\n\t\t\t\tconst inferFromBody = new VsCodeCodeAction(action, vscode.l10n.t('Infer types using AI'), vscode.CodeActionKind.QuickFix);\n\t\t\t\tinferFromBody.edit = new vscode.WorkspaceEdit();\n\t\t\t\tinferFromBody.diagnostics = [diagnostic];\n\t\t\t\tinferFromBody.ranges = [diagnostic.range];\n\t\t\t\tinferFromBody.isAI = true;\n\t\t\t\tinferFromBody.command = {\n\t\t\t\t\tcommand: EditorChatFollowUp.ID,\n\t\t\t\t\targuments: [{\n\t\t\t\t\t\tmessage: vscode.l10n.t('Add types to this code. Add separate interfaces when possible. Do not change the code except for adding types.'),\n\t\t\t\t\t\texpand: { kind: 'navtree-function', pos: diagnostic.range.start },\n\t\t\t\t\t\tdocument,\n\t\t\t\t\t\taction: { type: 'quickfix', quickfix: action }\n\t\t\t\t\t} satisfies EditorChatFollowUp_Args],\n\t\t\t\t\ttitle: ''\n\t\t\t\t};\n\t\t\t\tactions.push(inferFromBody);\n\t\t\t}\n\t\t\telse if (action.fixName === fixNames.addNameToNamelessParameter) {\n\t\t\t\tconst newText = action.changes.map(change => change.textChanges.map(textChange => textChange.newText).join('')).join('');\n\t\t\t\ttitle = vscode.l10n.t('Add meaningful parameter name with AI');\n\t\t\t\tmessage = vscode.l10n.t(`Rename the parameter {0} with a more meaningful name.`, newText);\n\t\t\t\texpand = {\n\t\t\t\t\tkind: 'navtree-function',\n\t\t\t\t\tpos: diagnostic.range.start\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (expand && message !== undefined) {\n\t\t\t\tconst aiCodeAction = new VsCodeCodeAction(action, title, vscode.CodeActionKind.QuickFix);\n\t\t\t\taiCodeAction.edit = getEditForCodeAction(this.client, action);\n\t\t\t\taiCodeAction.edit?.insert(document.uri, diagnostic.range.start, '');\n\t\t\t\taiCodeAction.diagnostics = [diagnostic];\n\t\t\t\taiCodeAction.ranges = [diagnostic.range];\n\t\t\t\taiCodeAction.isAI = true;\n\t\t\t\taiCodeAction.command = {\n\t\t\t\t\tcommand: CompositeCommand.ID,\n\t\t\t\t\ttitle: '',\n\t\t\t\t\targuments: [{\n\t\t\t\t\t\tcommand: ApplyCodeActionCommand.ID,\n\t\t\t\t\t\targuments: [{ action, diagnostic, document } satisfies ApplyCodeActionCommand_args],\n\t\t\t\t\t\ttitle: ''\n\t\t\t\t\t}, {\n\t\t\t\t\t\tcommand: EditorChatFollowUp.ID,\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\targuments: [{\n\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\texpand,\n\t\t\t\t\t\t\tdocument,\n\t\t\t\t\t\t\taction: { type: 'quickfix', quickfix: action }\n\t\t\t\t\t\t} satisfies EditorChatFollowUp_Args],\n\t\t\t\t\t}],\n\t\t\t\t};\n\t\t\t\tactions.push(aiCodeAction);\n\t\t\t}\n\t\t}\n\t\treturn actions;\n\t}\n\n\tprivate addFixAllForTsCodeAction(\n\t\tresults: CodeActionSet,\n\t\tresource: vscode.Uri,\n\t\tfile: string,\n\t\tdiagnostic: vscode.Diagnostic,\n\t\ttsAction: Proto.CodeFixAction,\n\t): CodeActionSet {\n\t\tif (!tsAction.fixId || results.hasFixAllAction(tsAction.fixId)) {\n\t\t\treturn results;\n\t\t}\n\n\t\t// Make sure there are multiple different diagnostics of the same type in the file\n\t\tif (!this.diagnosticsManager.getDiagnostics(resource).some(x => {\n\t\t\tif (x === diagnostic) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn x.code === diagnostic.code\n\t\t\t\t|| (fixAllErrorCodes.has(x.code as number) && fixAllErrorCodes.get(x.code as number) === fixAllErrorCodes.get(diagnostic.code as number));\n\t\t})) {\n\t\t\treturn results;\n\t\t}\n\n\t\tconst action = new VsCodeFixAllCodeAction(\n\t\t\ttsAction,\n\t\t\tfile,\n\t\t\ttsAction.fixAllDescription || vscode.l10n.t(\"{0} (Fix all in file)\", tsAction.description),\n\t\t\tvscode.CodeActionKind.QuickFix);\n\n\t\taction.diagnostics = [diagnostic];\n\t\taction.ranges = [diagnostic.range];\n\t\taction.command = {\n\t\t\tcommand: ApplyFixAllCodeAction.ID,\n\t\t\targuments: [{ action } satisfies ApplyFixAllCodeAction_args],\n\t\t\ttitle: ''\n\t\t};\n\t\tresults.addFixAllAction(tsAction.fixId, action);\n\t\treturn results;\n\t}\n}\n\n// Some fix all actions can actually fix multiple different diagnostics. Make sure we still show the fix all action\n// in such cases\nconst fixAllErrorCodes = new Map<number, number>([\n\t// Missing async\n\t[2339, 2339],\n\t[2345, 2339],\n]);\n\nconst preferredFixes = new Map<string, { readonly priority: number; readonly thereCanOnlyBeOne?: boolean }>([\n\t[fixNames.annotateWithTypeFromJSDoc, { priority: 2 }],\n\t[fixNames.constructorForDerivedNeedSuperCall, { priority: 2 }],\n\t[fixNames.extendsInterfaceBecomesImplements, { priority: 2 }],\n\t[fixNames.awaitInSyncFunction, { priority: 2 }],\n\t[fixNames.removeUnnecessaryAwait, { priority: 2 }],\n\t[fixNames.classIncorrectlyImplementsInterface, { priority: 3 }],\n\t[fixNames.classDoesntImplementInheritedAbstractMember, { priority: 3 }],\n\t[fixNames.unreachableCode, { priority: 2 }],\n\t[fixNames.unusedIdentifier, { priority: 2 }],\n\t[fixNames.forgottenThisPropertyAccess, { priority: 2 }],\n\t[fixNames.spelling, { priority: 0 }],\n\t[fixNames.addMissingAwait, { priority: 2 }],\n\t[fixNames.addMissingOverride, { priority: 2 }],\n\t[fixNames.addMissingNewOperator, { priority: 2 }],\n\t[fixNames.fixImport, { priority: 1, thereCanOnlyBeOne: true }],\n]);\n\nfunction isPreferredFix(\n\taction: VsCodeCodeAction,\n\tallActions: readonly VsCodeCodeAction[]\n): boolean {\n\tif (action instanceof VsCodeFixAllCodeAction) {\n\t\treturn false;\n\t}\n\n\tconst fixPriority = preferredFixes.get(action.tsAction.fixName);\n\tif (!fixPriority) {\n\t\treturn false;\n\t}\n\n\treturn allActions.every(otherAction => {\n\t\tif (otherAction === action) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (otherAction instanceof VsCodeFixAllCodeAction) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst otherFixPriority = preferredFixes.get(otherAction.tsAction.fixName);\n\t\tif (!otherFixPriority || otherFixPriority.priority < fixPriority.priority) {\n\t\t\treturn true;\n\t\t} else if (otherFixPriority.priority > fixPriority.priority) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (fixPriority.thereCanOnlyBeOne && action.tsAction.fixName === otherAction.tsAction.fixName) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t});\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n\tfileConfigurationManager: FileConfigurationManager,\n\tcommandManager: CommandManager,\n\tdiagnosticsManager: DiagnosticsManager,\n\ttelemetryReporter: TelemetryReporter\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerCodeActionsProvider(selector.semantic,\n\t\t\tnew TypeScriptQuickFixProvider(client, fileConfigurationManager, commandManager, diagnosticsManager, telemetryReporter),\n\t\t\tTypeScriptQuickFixProvider.metadata);\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as path from 'path';\nimport * as vscode from 'vscode';\n\nexport class RelativeWorkspacePathResolver {\n\tpublic static asAbsoluteWorkspacePath(relativePath: string): string | undefined {\n\t\tfor (const root of vscode.workspace.workspaceFolders || []) {\n\t\t\tconst rootPrefixes = [`./${root.name}/`, `${root.name}/`, `.\\\\${root.name}\\\\`, `${root.name}\\\\`];\n\t\t\tfor (const rootPrefix of rootPrefixes) {\n\t\t\t\tif (relativePath.startsWith(rootPrefix)) {\n\t\t\t\t\treturn path.join(root.uri.fsPath, relativePath.replace(rootPrefix, ''));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function parseKindModifier(kindModifiers: string): Set<string> {\n\treturn new Set(kindModifiers.split(/,|\\s+/g));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport interface PackageInfo {\n\tname: string;\n\tversion: string;\n\taiKey: string;\n}\n\nexport function getPackageInfo(context: vscode.ExtensionContext) {\n\tconst packageJSON = context.extension.packageJSON;\n\tif (packageJSON && typeof packageJSON === 'object') {\n\t\treturn {\n\t\t\tname: packageJSON.name ?? '',\n\t\t\tversion: packageJSON.version ?? '',\n\t\t\taiKey: packageJSON.aiKey ?? '',\n\t\t};\n\t}\n\treturn null;\n}\n","// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseMessageConnection = exports.Cancellation = exports.RAL = void 0;\n__exportStar(require(\"./connection\"), exports);\n__exportStar(require(\"./protocol\"), exports);\nconst ral_1 = __importDefault(require(\"./ral\"));\nexports.RAL = ral_1.default;\nvar messageCancellation_1 = require(\"./messageCancellation\");\nObject.defineProperty(exports, \"Cancellation\", { enumerable: true, get: function () { return messageCancellation_1.Cancellation; } });\nvar messageConnection_1 = require(\"./messageConnection\");\nObject.defineProperty(exports, \"BaseMessageConnection\", { enumerable: true, get: function () { return messageConnection_1.BaseMessageConnection; } });\n//# sourceMappingURL=api.js.map","'use strict'\nmodule.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n\n  return next\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.splice = function (start, deleteCount, ...nodes) {\n  if (start > this.length) {\n    start = this.length - 1\n  }\n  if (start < 0) {\n    start = this.length + start;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < start; i++) {\n    walker = walker.next\n  }\n\n  var ret = []\n  for (var i = 0; walker && i < deleteCount; i++) {\n    ret.push(walker.value)\n    walker = this.removeNode(walker)\n  }\n  if (walker === null) {\n    walker = this.tail\n  }\n\n  if (walker !== this.head && walker !== this.tail) {\n    walker = walker.prev\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    walker = insert(this, walker, nodes[i])\n  }\n  return ret;\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction insert (self, node, value) {\n  var inserted = node === self.head ?\n    new Node(value, null, node, self) :\n    new Node(value, node, node.next, self)\n\n  if (inserted.next === null) {\n    self.tail = inserted\n  }\n  if (inserted.prev === null) {\n    self.head = inserted\n  }\n\n  self.length++\n\n  return inserted\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n\ntry {\n  // add if support for Symbol.iterator is present\n  require('./iterator.js')(Yallist)\n} catch (er) {}\n","/*\n * 1DS JS SDK POST plugin, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n * Real Time profile (default profile). RealTime Latency events are sent every 1 sec and\r\n * Normal Latency events are sent every 2 sec.\r\n */\r\nexport var RT_PROFILE = \"REAL_TIME\";\r\n/**\r\n * Near Real Time profile. RealTime Latency events are sent every 3 sec and\r\n * Normal Latency events are sent every 6 sec.\r\n */\r\nexport var NRT_PROFILE = \"NEAR_REAL_TIME\";\r\n/**\r\n * Best Effort. RealTime Latency events are sent every 9 sec and\r\n * Normal Latency events are sent every 18 sec.\r\n */\r\nexport var BE_PROFILE = \"BEST_EFFORT\";\r\n//# sourceMappingURL=DataModels.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_POST_METHOD = \"POST\";\r\nexport var STR_DISABLED_PROPERTY_NAME = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nexport var STR_DROPPED = \"drop\";\r\nexport var STR_SENDING = \"send\";\r\nexport var STR_REQUEUE = \"requeue\";\r\nexport var STR_RESPONSE_FAIL = \"rspFail\";\r\nexport var STR_OTHER = \"oth\";\r\nexport var DEFAULT_CACHE_CONTROL = \"no-cache, no-store\";\r\nexport var DEFAULT_CONTENT_TYPE = \"application/x-json-stream\";\r\nexport var STR_CACHE_CONTROL = \"cache-control\";\r\nexport var STR_CONTENT_TYPE_HEADER = \"content-type\";\r\nexport var STR_KILL_TOKENS_HEADER = \"kill-tokens\";\r\nexport var STR_KILL_DURATION_HEADER = \"kill-duration\";\r\nexport var STR_KILL_DURATION_SECONDS_HEADER = \"kill-duration-seconds\";\r\nexport var STR_TIME_DELTA_HEADER = \"time-delta-millis\";\r\nexport var STR_CLIENT_VERSION = \"client-version\";\r\nexport var STR_CLIENT_ID = \"client-id\";\r\nexport var STR_TIME_DELTA_TO_APPLY = \"time-delta-to-apply-millis\";\r\nexport var STR_UPLOAD_TIME = \"upload-time\";\r\nexport var STR_API_KEY = \"apikey\";\r\nexport var STR_MSA_DEVICE_TICKET = \"AuthMsaDeviceTicket\";\r\nexport var STR_AUTH_WEB_TOKEN = \"WebAuthToken\";\r\nexport var STR_AUTH_XTOKEN = \"AuthXToken\";\r\nexport var STR_SDK_VERSION = \"sdk-version\";\r\nexport var STR_NO_RESPONSE_BODY = \"NoResponseBody\";\r\nexport var STR_MSFPC = \"msfpc\";\r\nexport var STR_TRACE = \"trace\";\r\nexport var STR_USER = \"user\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_ALLOW_REQUEST_SENDIN0 = \"allowRequestSending\"; // Count: 3\r\nexport var _DYN_FIRST_REQUEST_SENT = \"firstRequestSent\"; // Count: 2\r\nexport var _DYN_SHOULD_ADD_CLOCK_SKE1 = \"shouldAddClockSkewHeaders\"; // Count: 2\r\nexport var _DYN_GET_CLOCK_SKEW_HEADE2 = \"getClockSkewHeaderValue\"; // Count: 2\r\nexport var _DYN_SET_CLOCK_SKEW = \"setClockSkew\"; // Count: 3\r\nexport var _DYN_LENGTH = \"length\"; // Count: 38\r\nexport var _DYN_CONCAT = \"concat\"; // Count: 7\r\nexport var _DYN_I_KEY = \"iKey\"; // Count: 11\r\nexport var _DYN_COUNT = \"count\"; // Count: 19\r\nexport var _DYN_EVENTS = \"events\"; // Count: 8\r\nexport var _DYN_PUSH = \"push\"; // Count: 15\r\nexport var _DYN_SPLIT = \"split\"; // Count: 6\r\nexport var _DYN_SPLICE = \"splice\"; // Count: 4\r\nexport var _DYN_TO_LOWER_CASE = \"toLowerCase\"; // Count: 3\r\nexport var _DYN_HDRS = \"hdrs\"; // Count: 7\r\nexport var _DYN_USE_HDRS = \"useHdrs\"; // Count: 5\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 5\r\nexport var _DYN_SET_TIMEOUT_OVERRIDE = \"setTimeoutOverride\"; // Count: 3\r\nexport var _DYN_CLEAR_TIMEOUT_OVERRI3 = \"clearTimeoutOverride\"; // Count: 3\r\nexport var _DYN_PAYLOAD_PREPROCESSOR = \"payloadPreprocessor\"; // Count: 2\r\nexport var _DYN_OVERRIDE_ENDPOINT_UR4 = \"overrideEndpointUrl\"; // Count: 3\r\nexport var _DYN_AVOID_OPTIONS = \"avoidOptions\"; // Count: 3\r\nexport var _DYN_DISABLE_EVENT_TIMING5 = \"disableEventTimings\"; // Count: 2\r\nexport var _DYN_STRINGIFY_OBJECTS = \"stringifyObjects\"; // Count: 2\r\nexport var _DYN_ENABLE_COMPOUND_KEY = \"enableCompoundKey\"; // Count: 4\r\nexport var _DYN_DISABLE_XHR_SYNC = \"disableXhrSync\"; // Count: 6\r\nexport var _DYN_DISABLE_FETCH_KEEP_A6 = \"disableFetchKeepAlive\"; // Count: 7\r\nexport var _DYN_ADD_NO_RESPONSE = \"addNoResponse\"; // Count: 3\r\nexport var _DYN_EXCLUDE_CS_META_DATA = \"excludeCsMetaData\"; // Count: 2\r\nexport var _DYN_USE_SEND_BEACON = \"useSendBeacon\"; // Count: 3\r\nexport var _DYN_FETCH_CREDENTIALS = \"fetchCredentials\"; // Count: 4\r\nexport var _DYN_ALWAYS_USE_XHR_OVERR7 = \"alwaysUseXhrOverride\"; // Count: 3\r\nexport var _DYN_UNLOAD_TRANSPORTS = \"unloadTransports\"; // Count: 2\r\nexport var _DYN_SERIALIZE_OFFLINE_EV8 = \"serializeOfflineEvt\"; // Count: 2\r\nexport var _DYN_GET_OFFLINE_REQUEST_9 = \"getOfflineRequestDetails\"; // Count: 2\r\nexport var _DYN_CREATE_PAYLOAD = \"createPayload\"; // Count: 4\r\nexport var _DYN_CREATE_ONE_DSPAYLOAD = \"createOneDSPayload\"; // Count: 4\r\nexport var _DYN_PAYLOAD_BLOB = \"payloadBlob\"; // Count: 3\r\nexport var _DYN_HEADERS = \"headers\"; // Count: 12\r\nexport var _DYN__THE_PAYLOAD = \"_thePayload\"; // Count: 6\r\nexport var _DYN_URL_STRING = \"urlString\"; // Count: 5\r\nexport var _DYN_BATCHES = \"batches\"; // Count: 15\r\nexport var _DYN_SEND_TYPE = \"sendType\"; // Count: 13\r\nexport var _DYN_ADD_HEADER = \"addHeader\"; // Count: 3\r\nexport var _DYN_CAN_SEND_REQUEST = \"canSendRequest\"; // Count: 3\r\nexport var _DYN_SEND_QUEUED_REQUESTS = \"sendQueuedRequests\"; // Count: 5\r\nexport var _DYN_IS_COMPLETELY_IDLE = \"isCompletelyIdle\"; // Count: 2\r\nexport var _DYN_SET_UNLOADING = \"setUnloading\"; // Count: 3\r\nexport var _DYN_IS_TENANT_KILLED = \"isTenantKilled\"; // Count: 3\r\nexport var _DYN_RESUME = \"resume\"; // Count: 4\r\nexport var _DYN_SEND_SYNCHRONOUS_BAT10 = \"sendSynchronousBatch\"; // Count: 2\r\nexport var _DYN__TRANSPORT = \"_transport\"; // Count: 3\r\nexport var _DYN_GET_WPARAM = \"getWParam\"; // Count: 4\r\nexport var _DYN_IS_BEACON = \"isBeacon\"; // Count: 4\r\nexport var _DYN_TIMINGS = \"timings\"; // Count: 4\r\nexport var _DYN_IS_TEARDOWN = \"isTeardown\"; // Count: 3\r\nexport var _DYN_IS_SYNC = \"isSync\"; // Count: 4\r\nexport var _DYN_DATA = \"data\"; // Count: 7\r\nexport var _DYN_TIMEOUT = \"timeout\"; // Count: 4\r\nexport var _DYN__SEND_REASON = \"_sendReason\"; // Count: 4\r\nexport var _DYN_SET_KILL_SWITCH_TENA11 = \"setKillSwitchTenants\"; // Count: 2\r\nexport var _DYN__BACK_OFF_TRANSMISSI12 = \"_backOffTransmission\"; // Count: 2\r\nexport var _DYN_IDENTIFIER = \"identifier\"; // Count: 4\r\nexport var _DYN_DISABLE_OPTIMIZE_OBJ = \"disableOptimizeObj\"; // Count: 2\r\nexport var _DYN_IGNORE_MC1_MS0_COOKI13 = \"ignoreMc1Ms0CookieProcessing\"; // Count: 2\r\nexport var _DYN_EVENTS_LIMIT_IN_MEM = \"eventsLimitInMem\"; // Count: 2\r\nexport var _DYN_AUTO_FLUSH_EVENTS_LI14 = \"autoFlushEventsLimit\"; // Count: 2\r\nexport var _DYN_DISABLE_AUTO_BATCH_F15 = \"disableAutoBatchFlushLimit\"; // Count: 2\r\nexport var _DYN_OVERRIDE_INSTRUMENTA16 = \"overrideInstrumentationKey\"; // Count: 2\r\nexport var _DYN_DISABLE_TELEMETRY = \"disableTelemetry\"; // Count: 2\r\nexport var _DYN_BASE_DATA = \"baseData\"; // Count: 3\r\nexport var _DYN_SEND_ATTEMPT = \"sendAttempt\"; // Count: 4\r\nexport var _DYN_LATENCY = \"latency\"; // Count: 7\r\nexport var _DYN_SYNC = \"sync\"; // Count: 7\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* EventBatch.ts\r\n* @author Nev Wylie (newylie)\r\n* @copyright Microsoft 2020\r\n*/\r\nimport { isNullOrUndefined, isValueAssigned } from \"@microsoft/1ds-core-js\";\r\nimport { STR_EMPTY, STR_MSFPC } from \"./InternalConstants\";\r\nimport { _DYN_CONCAT, _DYN_COUNT, _DYN_EVENTS, _DYN_I_KEY, _DYN_LENGTH, _DYN_PUSH, _DYN_SPLICE, _DYN_SPLIT } from \"./__DynamicConstants\";\r\nfunction _getEventMsfpc(theEvent) {\r\n    var intWeb = ((theEvent.ext || {})[\"intweb\"]);\r\n    if (intWeb && isValueAssigned(intWeb[STR_MSFPC])) {\r\n        return intWeb[STR_MSFPC];\r\n    }\r\n    return null;\r\n}\r\nfunction _getMsfpc(theEvents) {\r\n    var msfpc = null;\r\n    for (var lp = 0; msfpc === null && lp < theEvents[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n        msfpc = _getEventMsfpc(theEvents[lp]);\r\n    }\r\n    return msfpc;\r\n}\r\n/**\r\n* This class defines a \"batch\" events related to a specific iKey, it is used by the PostChannel and HttpManager\r\n* to collect and transfer ownership of events without duplicating them in-memory. This reduces the previous\r\n* array duplication and shared ownership issues that occurred due to race conditions caused by the async nature\r\n* of sending requests.\r\n*/\r\nvar EventBatch = /** @class */ (function () {\r\n    /**\r\n     * Private constructor so that caller is forced to use the static create method.\r\n     * @param iKey - The iKey to associate with the events (not validated)\r\n     * @param addEvents - The optional collection of events to assign to this batch - defaults to an empty array.\r\n     */\r\n    function EventBatch(iKey, addEvents) {\r\n        var events = addEvents ? [][_DYN_CONCAT /* @min:%2econcat */](addEvents) : [];\r\n        var _self = this;\r\n        var _msfpc = _getMsfpc(events);\r\n        _self[_DYN_I_KEY /* @min:%2eiKey */] = function () {\r\n            return iKey;\r\n        };\r\n        _self.Msfpc = function () {\r\n            // return the cached value unless it's undefined -- used to avoid cpu\r\n            return _msfpc || STR_EMPTY;\r\n        };\r\n        _self[_DYN_COUNT /* @min:%2ecount */] = function () {\r\n            return events[_DYN_LENGTH /* @min:%2elength */];\r\n        };\r\n        _self[_DYN_EVENTS /* @min:%2eevents */] = function () {\r\n            return events;\r\n        };\r\n        _self.addEvent = function (theEvent) {\r\n            if (theEvent) {\r\n                events[_DYN_PUSH /* @min:%2epush */](theEvent);\r\n                if (!_msfpc) {\r\n                    // Not found so try and find one\r\n                    _msfpc = _getEventMsfpc(theEvent);\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        _self[_DYN_SPLIT /* @min:%2esplit */] = function (fromEvent, numEvents) {\r\n            // Create a new batch with the same iKey\r\n            var theEvents;\r\n            if (fromEvent < events[_DYN_LENGTH /* @min:%2elength */]) {\r\n                var cnt = events[_DYN_LENGTH /* @min:%2elength */] - fromEvent;\r\n                if (!isNullOrUndefined(numEvents)) {\r\n                    cnt = numEvents < cnt ? numEvents : cnt;\r\n                }\r\n                theEvents = events[_DYN_SPLICE /* @min:%2esplice */](fromEvent, cnt);\r\n                // reset the fetched msfpc value\r\n                _msfpc = _getMsfpc(events);\r\n            }\r\n            return new EventBatch(iKey, theEvents);\r\n        };\r\n    }\r\n    /**\r\n     * Creates a new Event Batch object\r\n     * @param iKey The iKey associated with this batch of events\r\n     */\r\n    EventBatch.create = function (iKey, theEvents) {\r\n        return new EventBatch(iKey, theEvents);\r\n    };\r\n    return EventBatch;\r\n}());\r\nexport { EventBatch };\r\n//# sourceMappingURL=EventBatch.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* ClockSkewManager.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_ALLOW_REQUEST_SENDIN0, _DYN_FIRST_REQUEST_SENT, _DYN_GET_CLOCK_SKEW_HEADE2, _DYN_SET_CLOCK_SKEW, _DYN_SHOULD_ADD_CLOCK_SKE1 } from \"./__DynamicConstants\";\r\n/**\r\n* Class to manage clock skew correction.\r\n*/\r\nvar ClockSkewManager = /** @class */ (function () {\r\n    function ClockSkewManager() {\r\n        var _allowRequestSending = true;\r\n        var _shouldAddClockSkewHeaders = true;\r\n        var _isFirstRequest = true;\r\n        var _clockSkewHeaderValue = \"use-collector-delta\";\r\n        var _clockSkewSet = false;\r\n        dynamicProto(ClockSkewManager, this, function (_self) {\r\n            /**\r\n             * Determine if requests can be sent.\r\n             * @returns True if requests can be sent, false otherwise.\r\n             */\r\n            _self[_DYN_ALLOW_REQUEST_SENDIN0 /* @min:%2eallowRequestSending */] = function () {\r\n                return _allowRequestSending;\r\n            };\r\n            /**\r\n             * Tells the ClockSkewManager that it should assume that the first request has now been sent,\r\n             * If this method had not yet been called AND the clock Skew had not been set this will set\r\n             * allowRequestSending to false until setClockSet() is called.\r\n             */\r\n            _self[_DYN_FIRST_REQUEST_SENT /* @min:%2efirstRequestSent */] = function () {\r\n                if (_isFirstRequest) {\r\n                    _isFirstRequest = false;\r\n                    if (!_clockSkewSet) {\r\n                        // Block sending until we get the first clock Skew\r\n                        _allowRequestSending = false;\r\n                    }\r\n                }\r\n            };\r\n            /**\r\n             * Determine if clock skew headers should be added to the request.\r\n             * @returns True if clock skew headers should be added, false otherwise.\r\n             */\r\n            _self[_DYN_SHOULD_ADD_CLOCK_SKE1 /* @min:%2eshouldAddClockSkewHeaders */] = function () {\r\n                return _shouldAddClockSkewHeaders;\r\n            };\r\n            /**\r\n             * Gets the clock skew header value.\r\n             * @returns The clock skew header value.\r\n             */\r\n            _self[_DYN_GET_CLOCK_SKEW_HEADE2 /* @min:%2egetClockSkewHeaderValue */] = function () {\r\n                return _clockSkewHeaderValue;\r\n            };\r\n            /**\r\n             * Sets the clock skew header value. Once clock skew is set this method\r\n             * is no-op.\r\n             * @param timeDeltaInMillis - Time delta to be saved as the clock skew header value.\r\n             */\r\n            _self[_DYN_SET_CLOCK_SKEW /* @min:%2esetClockSkew */] = function (timeDeltaInMillis) {\r\n                if (!_clockSkewSet) {\r\n                    if (timeDeltaInMillis) {\r\n                        _clockSkewHeaderValue = timeDeltaInMillis;\r\n                        _shouldAddClockSkewHeaders = true;\r\n                        _clockSkewSet = true;\r\n                    }\r\n                    else {\r\n                        _shouldAddClockSkewHeaders = false;\r\n                    }\r\n                    // Unblock sending\r\n                    _allowRequestSending = true;\r\n                }\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for ClockSkewManager.prototype.allowRequestSending.\r\n// Removed Stub for ClockSkewManager.prototype.firstRequestSent.\r\n// Removed Stub for ClockSkewManager.prototype.shouldAddClockSkewHeaders.\r\n// Removed Stub for ClockSkewManager.prototype.getClockSkewHeaderValue.\r\n// Removed Stub for ClockSkewManager.prototype.setClockSkew.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    ClockSkewManager.__ieDyn=1;\n\n    return ClockSkewManager;\r\n}());\r\nexport { ClockSkewManager };\r\n//# sourceMappingURL=ClockSkewManager.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* KillSwitch.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrForEach, dateNow, strTrim } from \"@microsoft/1ds-core-js\";\r\nimport { _DYN_IS_TENANT_KILLED, _DYN_LENGTH, _DYN_PUSH, _DYN_SET_KILL_SWITCH_TENA11, _DYN_SPLIT } from \"./__DynamicConstants\";\r\nvar SecToMsMultiplier = 1000;\r\n/**\r\n* Class to stop certain tenants sending events.\r\n*/\r\nvar KillSwitch = /** @class */ (function () {\r\n    function KillSwitch() {\r\n        var _killedTokenDictionary = {};\r\n        function _normalizeTenants(values) {\r\n            var result = [];\r\n            if (values) {\r\n                arrForEach(values, function (value) {\r\n                    result[_DYN_PUSH /* @min:%2epush */](strTrim(value));\r\n                });\r\n            }\r\n            return result;\r\n        }\r\n        dynamicProto(KillSwitch, this, function (_self) {\r\n            _self[_DYN_SET_KILL_SWITCH_TENA11 /* @min:%2esetKillSwitchTenants */] = function (killTokens, killDuration) {\r\n                if (killTokens && killDuration) {\r\n                    try {\r\n                        var killedTokens = _normalizeTenants(killTokens[_DYN_SPLIT /* @min:%2esplit */](\",\"));\r\n                        if (killDuration === \"this-request-only\") {\r\n                            return killedTokens;\r\n                        }\r\n                        var durationMs = parseInt(killDuration, 10) * SecToMsMultiplier;\r\n                        for (var i = 0; i < killedTokens[_DYN_LENGTH /* @min:%2elength */]; ++i) {\r\n                            _killedTokenDictionary[killedTokens[i]] = dateNow() + durationMs;\r\n                        }\r\n                    }\r\n                    catch (ex) {\r\n                        return [];\r\n                    }\r\n                }\r\n                return [];\r\n            };\r\n            _self[_DYN_IS_TENANT_KILLED /* @min:%2eisTenantKilled */] = function (tenantToken) {\r\n                var killDictionary = _killedTokenDictionary;\r\n                var name = strTrim(tenantToken);\r\n                if (killDictionary[name] !== undefined && killDictionary[name] > dateNow()) {\r\n                    return true;\r\n                }\r\n                delete killDictionary[name];\r\n                return false;\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for KillSwitch.prototype.setKillSwitchTenants.\r\n// Removed Stub for KillSwitch.prototype.isTenantKilled.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    KillSwitch.__ieDyn=1;\n\n    return KillSwitch;\r\n}());\r\nexport { KillSwitch };\r\n//# sourceMappingURL=KillSwitch.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* RetryPolicy.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nvar RandomizationLowerThreshold = 0.8;\r\nvar RandomizationUpperThreshold = 1.2;\r\nvar BaseBackoff = 3000;\r\nvar MaxBackoff = 600000;\r\n/**\r\n * Determine if the request should be retried for the given status code.\r\n * The below expression reads that we should only retry for:\r\n *      - HttpStatusCodes that are smaller than 300.\r\n *      - HttpStatusCodes greater or equal to 500 (except for 501-NotImplement\r\n *        and 505-HttpVersionNotSupport).\r\n *      - HttpStatusCode 408-RequestTimeout.\r\n *      - HttpStatusCode 429.\r\n * This is based on Microsoft.WindowsAzure.Storage.RetryPolicies.ExponentialRetry class\r\n * @param httpStatusCode - The status code returned for the request.\r\n * @returns True if request should be retried, false otherwise.\r\n */\r\nexport function retryPolicyShouldRetryForStatus(httpStatusCode) {\r\n    /* tslint:disable:triple-equals */\r\n    // Disabling triple-equals rule to avoid httpOverrides from failing because they are returning a string value\r\n    return !((httpStatusCode >= 300 && httpStatusCode < 500 && httpStatusCode != 429)\r\n        || (httpStatusCode == 501)\r\n        || (httpStatusCode == 505));\r\n    /* tslint:enable:triple-equals */\r\n}\r\n/**\r\n * Gets the number of milliseconds to back off before retrying the request. The\r\n * back off duration is exponentially scaled based on the number of retries already\r\n * done for the request.\r\n * @param retriesSoFar - The number of times the request has already been retried.\r\n * @returns The back off duration for the request before it can be retried.\r\n */\r\nexport function retryPolicyGetMillisToBackoffForRetry(retriesSoFar) {\r\n    var waitDuration = 0;\r\n    var minBackoff = BaseBackoff * RandomizationLowerThreshold;\r\n    var maxBackoff = BaseBackoff * RandomizationUpperThreshold;\r\n    var randomBackoff = Math.floor(Math.random() * (maxBackoff - minBackoff)) + minBackoff;\r\n    waitDuration = Math.pow(2, retriesSoFar) * randomBackoff;\r\n    return Math.min(waitDuration, MaxBackoff);\r\n}\r\n//# sourceMappingURL=RetryPolicy.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* Serializer.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\n// @skip-file-minify\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrIndexOf, doPerf, getCommonSchemaMetaData, getTenantId, isArray, isValueAssigned, objForEachKey, sanitizeProperty, strStartsWith } from \"@microsoft/1ds-core-js\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { strSubstr } from \"@nevware21/ts-utils\";\r\n/**\r\n * Note: This is an optimization for V8-based browsers. When V8 concatenates a string,\r\n * the strings are only joined logically using a \"cons string\" or \"constructed/concatenated\r\n * string\". These containers keep references to one another and can result in very large\r\n * memory usage. For example, if a 2MB string is constructed by concatenating 4 bytes\r\n * together at a time, the memory usage will be ~44MB; so ~22x increase. The strings are\r\n * only joined together when an operation requiring their joining takes place, such as\r\n * substr(). This function is called when adding data to this buffer to ensure these\r\n * types of strings are periodically joined to reduce the memory footprint.\r\n * Setting to every 20 events as the JSON.stringify() may have joined many strings\r\n * and calling this too much causes a minor delay while processing.\r\n */\r\nvar _MAX_STRING_JOINS = 20;\r\nvar RequestSizeLimitBytes = 3984588; // approx 3.8 Mb\r\nvar BeaconRequestSizeLimitBytes = 65000; // approx 64kb (the current Edge, Firefox and Chrome max limit)\r\nvar MaxRecordSize = 2000000; // approx 2 Mb\r\nvar MaxBeaconRecordSize = Math.min(MaxRecordSize, BeaconRequestSizeLimitBytes);\r\nvar metadata = \"metadata\";\r\nvar f = \"f\";\r\nvar rCheckDot = /\\./;\r\n/**\r\n* Class to handle serialization of event and request.\r\n* Currently uses Bond for serialization. Please note that this may be subject to change.\r\n*/\r\nvar Serializer = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the Serializer class\r\n     * @param perfManager - The performance manager to use for tracking performance\r\n     * @param valueSanitizer - The value sanitizer to use for sanitizing field values\r\n     * @param stringifyObjects - Should objects be stringified before being sent\r\n     * @param enableCompoundKey - Should compound keys be enabled (defaults to false)\r\n     * @param getEncodedTypeOverride - The callback to get the encoded type for a property defaults to ({@link getCommonSchemaMetaData }(...))\r\n     * @param excludeCsMetaData - (!DANGER!) Should metadata be populated when encoding the event blob (defaults to false) - PII data will NOT be tagged as PII for backend processing\r\n     */\r\n    function Serializer(perfManager, valueSanitizer, stringifyObjects, enableCompoundKey, getEncodedTypeOverride, excludeCsMetaData) {\r\n        var strData = \"data\";\r\n        var strBaseData = \"baseData\";\r\n        var strExt = \"ext\";\r\n        var _checkForCompoundkey = !!enableCompoundKey;\r\n        var _processSubKeys = true;\r\n        var _theSanitizer = valueSanitizer;\r\n        var _isReservedCache = {};\r\n        var _excludeCsMetaData = !!excludeCsMetaData;\r\n        var _getEncodedType = getEncodedTypeOverride || getCommonSchemaMetaData;\r\n        dynamicProto(Serializer, this, function (_self) {\r\n            _self.createPayload = function (retryCnt, isTeardown, isSync, isReducedPayload, sendReason, sendType) {\r\n                return {\r\n                    apiKeys: [],\r\n                    payloadBlob: STR_EMPTY,\r\n                    overflow: null,\r\n                    sizeExceed: [],\r\n                    failedEvts: [],\r\n                    batches: [],\r\n                    numEvents: 0,\r\n                    retryCnt: retryCnt,\r\n                    isTeardown: isTeardown,\r\n                    isSync: isSync,\r\n                    isBeacon: isReducedPayload,\r\n                    sendType: sendType,\r\n                    sendReason: sendReason\r\n                };\r\n            };\r\n            _self.appendPayload = function (payload, theBatch, maxEventsPerBatch) {\r\n                var canAddEvents = payload && theBatch && !payload.overflow;\r\n                if (canAddEvents) {\r\n                    doPerf(perfManager, function () { return \"Serializer:appendPayload\"; }, function () {\r\n                        var theEvents = theBatch.events();\r\n                        var payloadBlob = payload.payloadBlob;\r\n                        var payloadEvents = payload.numEvents;\r\n                        var eventsAdded = false;\r\n                        var sizeExceeded = [];\r\n                        var failedEvts = [];\r\n                        var isBeaconPayload = payload.isBeacon;\r\n                        var requestMaxSize = isBeaconPayload ? BeaconRequestSizeLimitBytes : RequestSizeLimitBytes;\r\n                        var recordMaxSize = isBeaconPayload ? MaxBeaconRecordSize : MaxRecordSize;\r\n                        var lp = 0;\r\n                        var joinCount = 0;\r\n                        while (lp < theEvents.length) {\r\n                            var theEvent = theEvents[lp];\r\n                            if (theEvent) {\r\n                                if (payloadEvents >= maxEventsPerBatch) {\r\n                                    // Maximum events per payload reached, so don't add any more\r\n                                    payload.overflow = theBatch.split(lp);\r\n                                    break;\r\n                                }\r\n                                var eventBlob = _self.getEventBlob(theEvent);\r\n                                if (eventBlob && eventBlob.length <= recordMaxSize) {\r\n                                    // This event will fit into the payload\r\n                                    var blobLength = eventBlob.length;\r\n                                    var currentSize = payloadBlob.length;\r\n                                    if (currentSize + blobLength > requestMaxSize) {\r\n                                        // Request or batch size exceeded, so don't add any more to the payload\r\n                                        payload.overflow = theBatch.split(lp);\r\n                                        break;\r\n                                    }\r\n                                    if (payloadBlob) {\r\n                                        payloadBlob += \"\\n\";\r\n                                    }\r\n                                    payloadBlob += eventBlob;\r\n                                    joinCount++;\r\n                                    // v8 memory optimization only\r\n                                    if (joinCount > _MAX_STRING_JOINS) {\r\n                                        // this substr() should cause the constructed string to join\r\n                                        strSubstr(payloadBlob, 0, 1);\r\n                                        joinCount = 0;\r\n                                    }\r\n                                    eventsAdded = true;\r\n                                    payloadEvents++;\r\n                                }\r\n                                else {\r\n                                    if (eventBlob) {\r\n                                        // Single event size exceeded so remove from the batch\r\n                                        sizeExceeded.push(theEvent);\r\n                                    }\r\n                                    else {\r\n                                        failedEvts.push(theEvent);\r\n                                    }\r\n                                    // We also need to remove this event from the existing array, otherwise a notification will be sent\r\n                                    // indicating that it was successfully sent\r\n                                    theEvents.splice(lp, 1);\r\n                                    lp--;\r\n                                }\r\n                            }\r\n                            lp++;\r\n                        }\r\n                        if (sizeExceeded.length > 0) {\r\n                            payload.sizeExceed.push(EventBatch.create(theBatch.iKey(), sizeExceeded));\r\n                            // Remove the exceeded events from the batch\r\n                        }\r\n                        if (failedEvts.length > 0) {\r\n                            payload.failedEvts.push(EventBatch.create(theBatch.iKey(), failedEvts));\r\n                            // Remove the failed events from the batch\r\n                        }\r\n                        if (eventsAdded) {\r\n                            payload.batches.push(theBatch);\r\n                            payload.payloadBlob = payloadBlob;\r\n                            payload.numEvents = payloadEvents;\r\n                            var apiKey = theBatch.iKey();\r\n                            if (arrIndexOf(payload.apiKeys, apiKey) === -1) {\r\n                                payload.apiKeys.push(apiKey);\r\n                            }\r\n                        }\r\n                    }, function () { return ({ payload: payload, theBatch: { iKey: theBatch.iKey(), evts: theBatch.events() }, max: maxEventsPerBatch }); });\r\n                }\r\n                return canAddEvents;\r\n            };\r\n            _self.getEventBlob = function (eventData) {\r\n                try {\r\n                    return doPerf(perfManager, function () { return \"Serializer.getEventBlob\"; }, function () {\r\n                        var serializedEvent = {};\r\n                        // Adding as dynamic keys for v8 performance\r\n                        serializedEvent.name = eventData.name;\r\n                        serializedEvent.time = eventData.time;\r\n                        serializedEvent.ver = eventData.ver;\r\n                        serializedEvent.iKey = \"o:\" + getTenantId(eventData.iKey);\r\n                        // Assigning local var so usage in part b/c don't throw if there is no ext\r\n                        var serializedExt = {};\r\n                        var _addMetadataCallback;\r\n                        if (!_excludeCsMetaData) {\r\n                            _addMetadataCallback = function (pathKeys, key, value) {\r\n                                _addJSONPropertyMetaData(_getEncodedType, serializedExt, pathKeys, key, value);\r\n                            };\r\n                        }\r\n                        // Part A\r\n                        var eventExt = eventData[strExt];\r\n                        if (eventExt) {\r\n                            // Only assign ext if the event had one (There are tests covering this use case)\r\n                            serializedEvent[strExt] = serializedExt;\r\n                            objForEachKey(eventExt, function (key, value) {\r\n                                var data = serializedExt[key] = {};\r\n                                // Don't include a metadata callback as we don't currently set metadata Part A fields\r\n                                _processPathKeys(value, data, \"ext.\" + key, true, null, null, true);\r\n                            });\r\n                        }\r\n                        var serializedData = serializedEvent[strData] = {};\r\n                        serializedData.baseType = eventData.baseType;\r\n                        var serializedBaseData = serializedData[strBaseData] = {};\r\n                        // Part B\r\n                        _processPathKeys(eventData.baseData, serializedBaseData, strBaseData, false, [strBaseData], _addMetadataCallback, _processSubKeys);\r\n                        // Part C\r\n                        _processPathKeys(eventData.data, serializedData, strData, false, [], _addMetadataCallback, _processSubKeys);\r\n                        return JSON.stringify(serializedEvent);\r\n                    }, function () { return ({ item: eventData }); });\r\n                }\r\n                catch (e) {\r\n                    return null;\r\n                }\r\n            };\r\n            function _isReservedField(path, name) {\r\n                var result = _isReservedCache[path];\r\n                if (result === undefined) {\r\n                    if (path.length >= 7) {\r\n                        // Do not allow the changing of fields located in the ext.metadata or ext.web extension\r\n                        result = strStartsWith(path, \"ext.metadata\") || strStartsWith(path, \"ext.web\");\r\n                    }\r\n                    _isReservedCache[path] = result;\r\n                }\r\n                return result;\r\n            }\r\n            function _processPathKeys(srcObj, target, thePath, checkReserved, metadataPathKeys, metadataCallback, processSubKeys) {\r\n                objForEachKey(srcObj, function (key, srcValue) {\r\n                    var prop = null;\r\n                    if (srcValue || isValueAssigned(srcValue)) {\r\n                        var path = thePath;\r\n                        var name_1 = key;\r\n                        var theMetaPathKeys = metadataPathKeys;\r\n                        var destObj = target;\r\n                        // Handle keys with embedded '.', like \"TestObject.testProperty\"\r\n                        if (_checkForCompoundkey && !checkReserved && rCheckDot.test(key)) {\r\n                            var subKeys = key.split(\".\");\r\n                            var keyLen = subKeys.length;\r\n                            if (keyLen > 1) {\r\n                                if (theMetaPathKeys) {\r\n                                    // Create a copy of the meta path keys so we can add the extra ones\r\n                                    theMetaPathKeys = theMetaPathKeys.slice();\r\n                                }\r\n                                for (var lp = 0; lp < keyLen - 1; lp++) {\r\n                                    var subKey = subKeys[lp];\r\n                                    // Add/reuse the sub key object\r\n                                    destObj = destObj[subKey] = destObj[subKey] || {};\r\n                                    path += \".\" + subKey;\r\n                                    if (theMetaPathKeys) {\r\n                                        theMetaPathKeys.push(subKey);\r\n                                    }\r\n                                }\r\n                                name_1 = subKeys[keyLen - 1];\r\n                            }\r\n                        }\r\n                        var isReserved = checkReserved && _isReservedField(path, name_1);\r\n                        if (!isReserved && _theSanitizer && _theSanitizer.handleField(path, name_1)) {\r\n                            prop = _theSanitizer.value(path, name_1, srcValue, stringifyObjects);\r\n                        }\r\n                        else {\r\n                            prop = sanitizeProperty(name_1, srcValue, stringifyObjects);\r\n                        }\r\n                        if (prop) {\r\n                            // Set the value\r\n                            var newValue = prop.value;\r\n                            destObj[name_1] = newValue;\r\n                            if (metadataCallback) {\r\n                                metadataCallback(theMetaPathKeys, name_1, prop);\r\n                            }\r\n                            if (processSubKeys && typeof newValue === \"object\" && !isArray(newValue)) {\r\n                                var newPath = theMetaPathKeys;\r\n                                if (newPath) {\r\n                                    newPath = newPath.slice();\r\n                                    newPath.push(name_1);\r\n                                }\r\n                                // Make sure we process sub objects as well (for value sanitization and metadata)\r\n                                _processPathKeys(srcValue, newValue, path + \".\" + name_1, checkReserved, newPath, metadataCallback, processSubKeys);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for Serializer.prototype.createPayload.\r\n// Removed Stub for Serializer.prototype.appendPayload.\r\n// Removed Stub for Serializer.prototype.getEventBlob.\r\n// Removed Stub for Serializer.prototype.handleField.\r\n// Removed Stub for Serializer.prototype.getSanitizer.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    Serializer.__ieDyn=1;\n\n    return Serializer;\r\n}());\r\nexport { Serializer };\r\n/**\r\n * @ignore\r\n * @param getEncodedType - The function to get the encoded type for the property\r\n * @param json - The json object to add the metadata to\r\n * @param propKeys - The property keys to add to the metadata\r\n * @param name - The name of the property\r\n * @param propertyValue - The property value\r\n */\r\nfunction _addJSONPropertyMetaData(getEncodedType, json, propKeys, name, propertyValue) {\r\n    if (propertyValue && json) {\r\n        var encodedTypeValue = getEncodedType(propertyValue.value, propertyValue.kind, propertyValue.propertyType);\r\n        if (encodedTypeValue > -1) {\r\n            // Add the root metadata\r\n            var metaData = json[metadata];\r\n            if (!metaData) {\r\n                // Sets the root 'f'\r\n                metaData = json[metadata] = { f: {} };\r\n            }\r\n            var metaTarget = metaData[f];\r\n            if (!metaTarget) {\r\n                // This can occur if someone has manually added an ext.metadata object\r\n                // Such as ext.metadata.privLevel and ext.metadata.privTags\r\n                metaTarget = metaData[f] = {};\r\n            }\r\n            // Traverse the metadata path and build each object (contains an 'f' key) -- if required\r\n            if (propKeys) {\r\n                for (var lp = 0; lp < propKeys.length; lp++) {\r\n                    var key = propKeys[lp];\r\n                    if (!metaTarget[key]) {\r\n                        metaTarget[key] = { f: {} };\r\n                    }\r\n                    var newTarget = metaTarget[key][f];\r\n                    if (!newTarget) {\r\n                        // Not expected, but can occur if the metadata context was pre-created as part of the event\r\n                        newTarget = metaTarget[key][f] = {};\r\n                    }\r\n                    metaTarget = newTarget;\r\n                }\r\n            }\r\n            metaTarget = metaTarget[name] = {};\r\n            if (isArray(propertyValue.value)) {\r\n                metaTarget[\"a\"] = {\r\n                    t: encodedTypeValue\r\n                };\r\n            }\r\n            else {\r\n                metaTarget[\"t\"] = encodedTypeValue;\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Serializer.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nvar _a;\r\n/**\r\n* HttpManager.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { FullVersionString, SenderPostManager, _getAllResponseHeaders, _throwInternal, _warnToConsole, arrForEach, dateNow, doPerf, dumpObj, extend, getCommonSchemaMetaData, getNavigator, getResponseText, getTime, hasOwnProperty, isBeaconsSupported, isFetchSupported, isNullOrUndefined, isReactNative, isUndefined, isValueAssigned, objForEachKey, objKeys, onConfigChange, optimizeObject, prependTransports, strUndefined } from \"@microsoft/1ds-core-js\";\r\nimport { arrAppend } from \"@nevware21/ts-utils\";\r\nimport { ClockSkewManager } from \"./ClockSkewManager\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { DEFAULT_CACHE_CONTROL, DEFAULT_CONTENT_TYPE, STR_API_KEY, STR_AUTH_XTOKEN, STR_CACHE_CONTROL, STR_CLIENT_ID, STR_CLIENT_VERSION, STR_CONTENT_TYPE_HEADER, STR_DROPPED, STR_EMPTY, STR_KILL_DURATION_HEADER, STR_KILL_TOKENS_HEADER, STR_MSA_DEVICE_TICKET, STR_MSFPC, STR_NO_RESPONSE_BODY, STR_OTHER, STR_REQUEUE, STR_RESPONSE_FAIL, STR_SENDING, STR_TIME_DELTA_HEADER, STR_TIME_DELTA_TO_APPLY, STR_UPLOAD_TIME } from \"./InternalConstants\";\r\nimport { KillSwitch } from \"./KillSwitch\";\r\nimport { retryPolicyGetMillisToBackoffForRetry, retryPolicyShouldRetryForStatus } from \"./RetryPolicy\";\r\nimport { Serializer } from \"./Serializer\";\r\nimport { createTimeoutWrapper } from \"./TimeoutOverrideWrapper\";\r\nimport { _DYN_ADD_HEADER, _DYN_ADD_NO_RESPONSE, _DYN_ALLOW_REQUEST_SENDIN0, _DYN_ALWAYS_USE_XHR_OVERR7, _DYN_AVOID_OPTIONS, _DYN_BATCHES, _DYN_CAN_SEND_REQUEST, _DYN_CLEAR_TIMEOUT_OVERRI3, _DYN_CONCAT, _DYN_COUNT, _DYN_CREATE_ONE_DSPAYLOAD, _DYN_CREATE_PAYLOAD, _DYN_DATA, _DYN_DISABLE_EVENT_TIMING5, _DYN_DISABLE_FETCH_KEEP_A6, _DYN_DISABLE_XHR_SYNC, _DYN_ENABLE_COMPOUND_KEY, _DYN_EVENTS, _DYN_EXCLUDE_CS_META_DATA, _DYN_FETCH_CREDENTIALS, _DYN_FIRST_REQUEST_SENT, _DYN_GET_CLOCK_SKEW_HEADE2, _DYN_GET_OFFLINE_REQUEST_9, _DYN_GET_WPARAM, _DYN_HDRS, _DYN_HEADERS, _DYN_INITIALIZE, _DYN_IS_BEACON, _DYN_IS_COMPLETELY_IDLE, _DYN_IS_SYNC, _DYN_IS_TEARDOWN, _DYN_I_KEY, _DYN_LENGTH, _DYN_OVERRIDE_ENDPOINT_UR4, _DYN_PAYLOAD_BLOB, _DYN_PAYLOAD_PREPROCESSOR, _DYN_PUSH, _DYN_RESUME, _DYN_SEND_QUEUED_REQUESTS, _DYN_SEND_SYNCHRONOUS_BAT10, _DYN_SEND_TYPE, _DYN_SERIALIZE_OFFLINE_EV8, _DYN_SET_CLOCK_SKEW, _DYN_SET_KILL_SWITCH_TENA11, _DYN_SET_TIMEOUT_OVERRIDE, _DYN_SET_UNLOADING, _DYN_SHOULD_ADD_CLOCK_SKE1, _DYN_SPLICE, _DYN_SPLIT, _DYN_STRINGIFY_OBJECTS, _DYN_TIMEOUT, _DYN_TIMINGS, _DYN_TO_LOWER_CASE, _DYN_UNLOAD_TRANSPORTS, _DYN_URL_STRING, _DYN_USE_HDRS, _DYN_USE_SEND_BEACON, _DYN__BACK_OFF_TRANSMISSI12, _DYN__SEND_REASON, _DYN__THE_PAYLOAD, _DYN__TRANSPORT } from \"./__DynamicConstants\";\r\nvar strSendAttempt = \"sendAttempt\";\r\nvar _noResponseQs = \"&\" + STR_NO_RESPONSE_BODY + \"=true\";\r\nvar UrlQueryString = \"?cors=true&\" + STR_CONTENT_TYPE_HEADER[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() + \"=\" + DEFAULT_CONTENT_TYPE;\r\n/**\r\n * Identifies the default notification reason to the action names\r\n */\r\nvar _eventActionMap = (_a = {},\r\n    _a[1 /* EventBatchNotificationReason.Paused */] = STR_REQUEUE,\r\n    _a[100 /* EventBatchNotificationReason.RequeueEvents */] = STR_REQUEUE,\r\n    _a[200 /* EventBatchNotificationReason.Complete */] = \"sent\",\r\n    _a[8004 /* EventBatchNotificationReason.KillSwitch */] = STR_DROPPED,\r\n    _a[8003 /* EventBatchNotificationReason.SizeLimitExceeded */] = STR_DROPPED,\r\n    _a);\r\nvar _collectorQsHeaders = {};\r\nvar _collectorHeaderToQs = {};\r\nfunction _addCollectorHeaderQsMapping(qsName, headerName, allowQs) {\r\n    _collectorQsHeaders[qsName] = headerName;\r\n    if (allowQs !== false) {\r\n        _collectorHeaderToQs[headerName] = qsName;\r\n    }\r\n}\r\n_addCollectorHeaderQsMapping(STR_MSA_DEVICE_TICKET, STR_MSA_DEVICE_TICKET, false);\r\n_addCollectorHeaderQsMapping(STR_CLIENT_VERSION, STR_CLIENT_VERSION);\r\n_addCollectorHeaderQsMapping(STR_CLIENT_ID, \"Client-Id\");\r\n_addCollectorHeaderQsMapping(STR_API_KEY, STR_API_KEY);\r\n_addCollectorHeaderQsMapping(STR_TIME_DELTA_TO_APPLY, STR_TIME_DELTA_TO_APPLY);\r\n_addCollectorHeaderQsMapping(STR_UPLOAD_TIME, STR_UPLOAD_TIME);\r\n_addCollectorHeaderQsMapping(STR_AUTH_XTOKEN, STR_AUTH_XTOKEN);\r\nfunction _hasHeader(headers, header) {\r\n    var hasHeader = false;\r\n    if (headers && header) {\r\n        var keys = objKeys(headers);\r\n        if (keys && keys[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            var lowerHeader = header[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n            for (var lp = 0; lp < keys[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                var value = keys[lp];\r\n                if (value && hasOwnProperty(header, value) &&\r\n                    value[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() === lowerHeader) {\r\n                    hasHeader = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return hasHeader;\r\n}\r\nfunction _addRequestDetails(details, name, value, useHeaders) {\r\n    if (name && value && value[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        if (useHeaders && _collectorQsHeaders[name]) {\r\n            details[_DYN_HDRS /* @min:%2ehdrs */][_collectorQsHeaders[name]] = value;\r\n            details[_DYN_USE_HDRS /* @min:%2euseHdrs */] = true;\r\n        }\r\n        else {\r\n            details.url += \"&\" + name + \"=\" + value;\r\n        }\r\n    }\r\n}\r\nfunction _addQueryStringParameter(qsParams, name, value) {\r\n    for (var i = 0; i < qsParams[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n        if (qsParams[i].name === name) {\r\n            qsParams[i].value = value;\r\n            return;\r\n        }\r\n    }\r\n    qsParams[_DYN_PUSH /* @min:%2epush */]({ name: name, value: value });\r\n}\r\nfunction _removeQueryStringParameter(qsParams, name) {\r\n    for (var i = 0; i < qsParams[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n        if (qsParams[i].name === name) {\r\n            qsParams[_DYN_SPLICE /* @min:%2esplice */](i, 1);\r\n            return;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Class managing the sending of requests.\r\n */\r\nvar HttpManager = /** @class */ (function () {\r\n    /**\r\n     * @constructor\r\n     * @param requestQueue   - The queue that contains the requests to be sent.\r\n     */\r\n    function HttpManager(maxEventsPerBatch, maxConnections, maxRequestRetriesBeforeBackoff, actions) {\r\n        // ------------------------------------------------------------------------------------------------------------------------\r\n        // Only set \"Default\" values in the _initDefaults() method, unless value are not \"reset\" during unloading\r\n        // ------------------------------------------------------------------------------------------------------------------------\r\n        var _urlString;\r\n        var _killSwitch;\r\n        var _paused;\r\n        var _clockSkewManager;\r\n        var _useBeacons = false;\r\n        var _outstandingRequests; // Holds the number of outstanding async requests that have not returned a response yet\r\n        var _postManager;\r\n        var _logger;\r\n        var _sendInterfaces;\r\n        var _core;\r\n        var _customHttpInterface;\r\n        var _queryStringParameters;\r\n        var _headers;\r\n        var _batchQueue;\r\n        var _serializer;\r\n        var _enableEventTimings;\r\n        var _cookieMgr;\r\n        var _isUnloading;\r\n        var _useHeaders;\r\n        var _xhrTimeout;\r\n        var _disableXhrSync;\r\n        var _disableFetchKeepAlive;\r\n        var _canHaveReducedPayload;\r\n        var _addNoResponse;\r\n        var _unloadHooks;\r\n        var _sendHook;\r\n        var _sendListener;\r\n        var _responseHandlers;\r\n        var _isInitialized;\r\n        var _timeoutWrapper;\r\n        var _excludeCsMetaData;\r\n        var _sendPostMgr;\r\n        var _fetchCredentials;\r\n        dynamicProto(HttpManager, this, function (_self) {\r\n            _initDefaults();\r\n            var _sendCredentials = true;\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (theConfig, core, postChannel) {\r\n                if (!_isInitialized) {\r\n                    _core = core;\r\n                    _cookieMgr = core.getCookieMgr();\r\n                    _postManager = postChannel;\r\n                    _logger = _postManager.diagLog();\r\n                    arrAppend(_unloadHooks, onConfigChange(theConfig, function (details) {\r\n                        var _a;\r\n                        var coreConfig = details.cfg;\r\n                        var channelConfig = details.cfg.extensionConfig[postChannel.identifier];\r\n                        _timeoutWrapper = createTimeoutWrapper(channelConfig[_DYN_SET_TIMEOUT_OVERRIDE /* @min:%2esetTimeoutOverride */], channelConfig[_DYN_CLEAR_TIMEOUT_OVERRI3 /* @min:%2eclearTimeoutOverride */]);\r\n                        if (isValueAssigned(coreConfig.anonCookieName)) {\r\n                            _addQueryStringParameter(_queryStringParameters, \"anoncknm\", coreConfig.anonCookieName);\r\n                        }\r\n                        else {\r\n                            _removeQueryStringParameter(_queryStringParameters, \"anoncknm\");\r\n                        }\r\n                        _sendHook = channelConfig[_DYN_PAYLOAD_PREPROCESSOR /* @min:%2epayloadPreprocessor */];\r\n                        _sendListener = channelConfig.payloadListener;\r\n                        var httpInterface = channelConfig.httpXHROverride;\r\n                        // Override endpointUrl if provided in Post config\r\n                        var endpointUrl = channelConfig[_DYN_OVERRIDE_ENDPOINT_UR4 /* @min:%2eoverrideEndpointUrl */] ? channelConfig[_DYN_OVERRIDE_ENDPOINT_UR4 /* @min:%2eoverrideEndpointUrl */] : coreConfig.endpointUrl;\r\n                        _urlString = endpointUrl + UrlQueryString;\r\n                        _useHeaders = !isUndefined(channelConfig[_DYN_AVOID_OPTIONS /* @min:%2eavoidOptions */]) ? !channelConfig[_DYN_AVOID_OPTIONS /* @min:%2eavoidOptions */] : true;\r\n                        _enableEventTimings = !channelConfig[_DYN_DISABLE_EVENT_TIMING5 /* @min:%2edisableEventTimings */];\r\n                        var valueSanitizer = channelConfig.valueSanitizer;\r\n                        var stringifyObjects = channelConfig[_DYN_STRINGIFY_OBJECTS /* @min:%2estringifyObjects */];\r\n                        var enableCompoundKey = !!coreConfig[_DYN_ENABLE_COMPOUND_KEY /* @min:%2eenableCompoundKey */];\r\n                        if (!isUndefined(channelConfig[_DYN_ENABLE_COMPOUND_KEY /* @min:%2eenableCompoundKey */])) {\r\n                            enableCompoundKey = !!channelConfig[_DYN_ENABLE_COMPOUND_KEY /* @min:%2eenableCompoundKey */];\r\n                        }\r\n                        _xhrTimeout = channelConfig.xhrTimeout;\r\n                        _disableXhrSync = !!channelConfig[_DYN_DISABLE_XHR_SYNC /* @min:%2edisableXhrSync */];\r\n                        _disableFetchKeepAlive = !!channelConfig[_DYN_DISABLE_FETCH_KEEP_A6 /* @min:%2edisableFetchKeepAlive */];\r\n                        _addNoResponse = channelConfig[_DYN_ADD_NO_RESPONSE /* @min:%2eaddNoResponse */] !== false;\r\n                        _excludeCsMetaData = !!channelConfig[_DYN_EXCLUDE_CS_META_DATA /* @min:%2eexcludeCsMetaData */];\r\n                        if (!!core.getPlugin(\"LocalStorage\")) {\r\n                            // Always disable fetch keep alive when persisten storage is available\r\n                            _disableFetchKeepAlive = true;\r\n                        }\r\n                        _useBeacons = !isReactNative(); // Only use beacons if not running in React Native\r\n                        _serializer = new Serializer(_core, valueSanitizer, stringifyObjects, enableCompoundKey, getCommonSchemaMetaData, _excludeCsMetaData);\r\n                        if (!isNullOrUndefined(channelConfig[_DYN_USE_SEND_BEACON /* @min:%2euseSendBeacon */])) {\r\n                            _useBeacons = !!channelConfig[_DYN_USE_SEND_BEACON /* @min:%2euseSendBeacon */];\r\n                        }\r\n                        if (channelConfig[_DYN_FETCH_CREDENTIALS /* @min:%2efetchCredentials */]) {\r\n                            _fetchCredentials = channelConfig[_DYN_FETCH_CREDENTIALS /* @min:%2efetchCredentials */];\r\n                        }\r\n                        var sendPostConfig = _getSendPostMgrConfig();\r\n                        // only init it once\r\n                        if (!_sendPostMgr) {\r\n                            _sendPostMgr = new SenderPostManager();\r\n                            _sendPostMgr[_DYN_INITIALIZE /* @min:%2einitialize */](sendPostConfig, _logger);\r\n                        }\r\n                        else {\r\n                            _sendPostMgr.SetConfig(sendPostConfig);\r\n                        }\r\n                        var syncHttpInterface = httpInterface;\r\n                        var beaconHttpInterface = channelConfig[_DYN_ALWAYS_USE_XHR_OVERR7 /* @min:%2ealwaysUseXhrOverride */] ? httpInterface : null;\r\n                        var fetchSyncHttpInterface = channelConfig[_DYN_ALWAYS_USE_XHR_OVERR7 /* @min:%2ealwaysUseXhrOverride */] ? httpInterface : null;\r\n                        var beaconUnloadTransports = [3 /* TransportType.Beacon */, 2 /* TransportType.Fetch */];\r\n                        if (!httpInterface) {\r\n                            _customHttpInterface = false;\r\n                            // this is handled in SendPostManager now\r\n                            // let location = getLocation();\r\n                            // if (location && location.protocol && location.protocol.toLowerCase() === \"file:\") {\r\n                            //     // Special case where a local html file fails with a CORS error on Chromium browsers\r\n                            //     _sendCredentials = false;\r\n                            // }\r\n                            var theTransports = [];\r\n                            if (isReactNative()) {\r\n                                // Use Fetch or XDR/XHR\r\n                                theTransports = [2 /* TransportType.Fetch */, 1 /* TransportType.Xhr */];\r\n                                beaconUnloadTransports = [2 /* TransportType.Fetch */, 1 /* TransportType.Xhr */, 3 /* TransportType.Beacon */];\r\n                            }\r\n                            else {\r\n                                // Use XDR/XHR, Fetch or beacons\r\n                                theTransports = [1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */];\r\n                            }\r\n                            // Prefix any user requested transport(s) values\r\n                            theTransports = prependTransports(theTransports, channelConfig.transports);\r\n                            httpInterface = _getSenderInterface(theTransports, false);\r\n                            if (!httpInterface) {\r\n                                _warnToConsole(_logger, \"No available transport to send events\");\r\n                            }\r\n                            syncHttpInterface = _getSenderInterface(theTransports, true);\r\n                        }\r\n                        if (!beaconHttpInterface) {\r\n                            // Allow overriding the usage of sendBeacon\r\n                            beaconUnloadTransports = prependTransports(beaconUnloadTransports, channelConfig[_DYN_UNLOAD_TRANSPORTS /* @min:%2eunloadTransports */]);\r\n                            beaconHttpInterface = _getSenderInterface(beaconUnloadTransports, true);\r\n                        }\r\n                        _canHaveReducedPayload = !_customHttpInterface && ((_useBeacons && isBeaconsSupported()) || (!_disableFetchKeepAlive && isFetchSupported(true)));\r\n                        _sendInterfaces = (_a = {},\r\n                            _a[0 /* EventSendType.Batched */] = httpInterface,\r\n                            _a[1 /* EventSendType.Synchronous */] = syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */], true),\r\n                            _a[2 /* EventSendType.SendBeacon */] = beaconHttpInterface || syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */], true),\r\n                            _a[3 /* EventSendType.SyncFetch */] = fetchSyncHttpInterface || _getSenderInterface([2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */], true) || syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */], true),\r\n                            _a);\r\n                    }));\r\n                    _isInitialized = true;\r\n                }\r\n            };\r\n            _self.addResponseHandler = function (responseHandler) {\r\n                _responseHandlers[_DYN_PUSH /* @min:%2epush */](responseHandler);\r\n                return {\r\n                    rm: function () {\r\n                        var index = _responseHandlers.indexOf(responseHandler);\r\n                        if (index >= 0) {\r\n                            _responseHandlers[_DYN_SPLICE /* @min:%2esplice */](index, 1);\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n            _self[_DYN_SERIALIZE_OFFLINE_EV8 /* @min:%2eserializeOfflineEvt */] = function (evt) {\r\n                try {\r\n                    if (_serializer) {\r\n                        return _serializer.getEventBlob(evt);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return STR_EMPTY;\r\n            };\r\n            _self[_DYN_GET_OFFLINE_REQUEST_9 /* @min:%2egetOfflineRequestDetails */] = function () {\r\n                try {\r\n                    // get current url without paramter\r\n                    var payload = _serializer && _serializer[_DYN_CREATE_PAYLOAD /* @min:%2ecreatePayload */](0, false, false, false, 1 /* SendRequestReason.NormalSchedule */, 0 /* EventSendType.Batched */);\r\n                    return _buildRequestDetails(payload, _useHeaders);\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            };\r\n            _self[_DYN_CREATE_ONE_DSPAYLOAD /* @min:%2ecreateOneDSPayload */] = function (evts, optimize) {\r\n                try {\r\n                    // TODO: optimize\r\n                    var theBatches_1 = [];\r\n                    // create a eventBatch for each event\r\n                    arrForEach(evts, function (evt) {\r\n                        if (optimize) {\r\n                            evt = optimizeObject(evt);\r\n                        }\r\n                        var batch = EventBatch.create(evt[_DYN_I_KEY /* @min:%2eiKey */], [evt]);\r\n                        theBatches_1[_DYN_PUSH /* @min:%2epush */](batch);\r\n                    });\r\n                    var thePayload = null;\r\n                    while (theBatches_1[_DYN_LENGTH /* @min:%2elength */] > 0 && _serializer) {\r\n                        var theBatch = theBatches_1.shift();\r\n                        if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                            thePayload = thePayload || _serializer[_DYN_CREATE_PAYLOAD /* @min:%2ecreatePayload */](0, false, false, false, 1 /* SendRequestReason.NormalSchedule */, 0 /* EventSendType.Batched */);\r\n                            _serializer.appendPayload(thePayload, theBatch, maxEventsPerBatch);\r\n                        }\r\n                    }\r\n                    var requestDetails = _buildRequestDetails(thePayload, _useHeaders);\r\n                    var payloadData = {\r\n                        data: thePayload[_DYN_PAYLOAD_BLOB /* @min:%2epayloadBlob */],\r\n                        urlString: requestDetails.url,\r\n                        headers: requestDetails[_DYN_HDRS /* @min:%2ehdrs */],\r\n                        timeout: _xhrTimeout,\r\n                        disableXhrSync: _disableXhrSync,\r\n                        disableFetchKeepAlive: _disableFetchKeepAlive\r\n                    };\r\n                    // Only automatically add the following headers if already sending headers and we are not attempting to avoid an options call\r\n                    if (_useHeaders) {\r\n                        if (!_hasHeader(payloadData[_DYN_HEADERS /* @min:%2eheaders */], STR_CACHE_CONTROL)) {\r\n                            payloadData[_DYN_HEADERS /* @min:%2eheaders */][STR_CACHE_CONTROL] = DEFAULT_CACHE_CONTROL;\r\n                        }\r\n                        if (!_hasHeader(payloadData[_DYN_HEADERS /* @min:%2eheaders */], STR_CONTENT_TYPE_HEADER)) {\r\n                            payloadData[_DYN_HEADERS /* @min:%2eheaders */][STR_CONTENT_TYPE_HEADER] = DEFAULT_CONTENT_TYPE;\r\n                        }\r\n                    }\r\n                    return payloadData;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            };\r\n            // Special internal method to allow the DebugPlugin to hook embedded objects\r\n            function _getSenderInterface(transports, syncSupport) {\r\n                try {\r\n                    return _sendPostMgr && _sendPostMgr.getSenderInst(transports, syncSupport);\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_sendInterfaces[0 /* EventSendType.Batched */], _killSwitch, _serializer, _sendInterfaces, _getSendPostMgrConfig(), _urlString];\r\n            };\r\n            function _getSendPostMgrConfig() {\r\n                try {\r\n                    var onCompleteFuncs = {\r\n                        xdrOnComplete: _xdrOncomplete,\r\n                        fetchOnComplete: _fetchOnComplete,\r\n                        xhrOnComplete: _xhrOnComplete,\r\n                        beaconOnRetry: _onBeaconRetry\r\n                    };\r\n                    var config = {\r\n                        enableSendPromise: false,\r\n                        isOneDs: true,\r\n                        disableCredentials: !_sendCredentials,\r\n                        fetchCredentials: _fetchCredentials,\r\n                        disableXhr: false,\r\n                        disableBeacon: !_useBeacons,\r\n                        disableBeaconSync: !_useBeacons,\r\n                        disableFetchKeepAlive: _disableFetchKeepAlive,\r\n                        timeWrapper: _timeoutWrapper,\r\n                        addNoResponse: _addNoResponse,\r\n                        senderOnCompleteCallBack: onCompleteFuncs\r\n                    };\r\n                    return config;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            function _xdrOncomplete(xdr, oncomplete, payload) {\r\n                var response = getResponseText(xdr);\r\n                _doOnComplete(oncomplete, 200, {}, response);\r\n                _handleCollectorResponse(response);\r\n            }\r\n            function _initDefaults() {\r\n                var undefValue;\r\n                _urlString = null;\r\n                _killSwitch = new KillSwitch();\r\n                _paused = false;\r\n                _clockSkewManager = new ClockSkewManager();\r\n                _useBeacons = false;\r\n                _outstandingRequests = 0; // Holds the number of outstanding async requests that have not returned a response yet\r\n                _postManager = null;\r\n                _logger = null;\r\n                _sendInterfaces = null;\r\n                _core = null;\r\n                _customHttpInterface = true;\r\n                _queryStringParameters = [];\r\n                _headers = {};\r\n                _batchQueue = [];\r\n                _serializer = null;\r\n                _enableEventTimings = false;\r\n                _cookieMgr = null;\r\n                _isUnloading = false;\r\n                _useHeaders = false;\r\n                _xhrTimeout = undefValue;\r\n                _disableXhrSync = undefValue;\r\n                _disableFetchKeepAlive = undefValue;\r\n                _canHaveReducedPayload = undefValue;\r\n                _addNoResponse = undefValue;\r\n                _unloadHooks = [];\r\n                _sendHook = undefValue;\r\n                _sendListener = undefValue;\r\n                _responseHandlers = [];\r\n                _isInitialized = false;\r\n                _timeoutWrapper = createTimeoutWrapper();\r\n                _excludeCsMetaData = false;\r\n                _sendPostMgr = null;\r\n            }\r\n            function _fetchOnComplete(response, onComplete, resValue, payload) {\r\n                var handleResponse = function (status, headerMap, responseText) {\r\n                    _doOnComplete(onComplete, status, headerMap, responseText);\r\n                    _handleCollectorResponse(responseText);\r\n                };\r\n                var headerMap = {};\r\n                var headers = response[_DYN_HEADERS /* @min:%2eheaders */];\r\n                if (headers) {\r\n                    headers[\"forEach\"](function (value, name) {\r\n                        headerMap[name] = value;\r\n                    });\r\n                }\r\n                handleResponse(response.status, headerMap, resValue || STR_EMPTY);\r\n            }\r\n            function _xhrOnComplete(request, oncomplete, payload) {\r\n                var response = getResponseText(request);\r\n                _doOnComplete(oncomplete, request.status, _getAllResponseHeaders(request, true), response);\r\n                _handleCollectorResponse(response);\r\n            }\r\n            function _doOnComplete(oncomplete, status, headers, response) {\r\n                try {\r\n                    oncomplete(status, headers, response);\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 518 /* _eExtendedInternalMessageId.SendPostOnCompleteFailure */, dumpObj(e));\r\n                }\r\n            }\r\n            function _onBeaconRetry(payload, onComplete, canSend) {\r\n                // Custom headers not supported in sendBeacon payload.headers would be ignored\r\n                var internalPayloadData = payload;\r\n                var status = 200;\r\n                var thePayload = internalPayloadData[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */];\r\n                var theUrl = payload[_DYN_URL_STRING /* @min:%2eurlString */] + (_addNoResponse ? _noResponseQs : STR_EMPTY);\r\n                try {\r\n                    var nav_1 = getNavigator();\r\n                    if (thePayload) {\r\n                        var persistStorage = !!_core.getPlugin(\"LocalStorage\");\r\n                        // Failed to send entire payload so try and split data and try to send as much events as possible\r\n                        var droppedBatches_1 = [];\r\n                        var sentBatches_1 = [];\r\n                        arrForEach(thePayload[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                            if (droppedBatches_1 && theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                                var theEvents = theBatch[_DYN_EVENTS /* @min:%2eevents */]();\r\n                                for (var lp = 0; lp < theEvents[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                                    if (!nav_1.sendBeacon(theUrl, _serializer.getEventBlob(theEvents[lp]))) {\r\n                                        // Can't send anymore, so split the batch and drop the rest\r\n                                        droppedBatches_1[_DYN_PUSH /* @min:%2epush */](theBatch[_DYN_SPLIT /* @min:%2esplit */](lp));\r\n                                        break;\r\n                                    }\r\n                                    else {\r\n                                        sentBatches_1[_DYN_PUSH /* @min:%2epush */](theBatch[lp]);\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                // Remove all of the events from the existing batch in the payload as the copy includes the original\r\n                                droppedBatches_1[_DYN_PUSH /* @min:%2epush */](theBatch[_DYN_SPLIT /* @min:%2esplit */](0));\r\n                            }\r\n                        });\r\n                        if (sentBatches_1[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                            // Update the payload with the sent batches\r\n                            thePayload.sentEvts = sentBatches_1;\r\n                        }\r\n                        if (!persistStorage) {\r\n                            _sendBatchesNotification(droppedBatches_1, 8003 /* EventBatchNotificationReason.SizeLimitExceeded */, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], true);\r\n                        }\r\n                    }\r\n                    else {\r\n                        status = 0;\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    _warnToConsole(_logger, \"Failed to send telemetry using sendBeacon API. Ex:\" + dumpObj(ex));\r\n                    status = 0;\r\n                }\r\n                finally {\r\n                    _doOnComplete(onComplete, status, {}, STR_EMPTY);\r\n                }\r\n            }\r\n            function _isBeaconPayload(sendType) {\r\n                // Sync Fetch has the same payload limitation as sendBeacon -- 64kb limit, so treat both as a beacon send\r\n                return sendType === 2 /* EventSendType.SendBeacon */ || sendType === 3 /* EventSendType.SyncFetch */;\r\n            }\r\n            function _adjustSendType(sendType) {\r\n                if (_isUnloading && _isBeaconPayload(sendType)) {\r\n                    sendType = 2 /* EventSendType.SendBeacon */;\r\n                }\r\n                return sendType;\r\n            }\r\n            _self[_DYN_ADD_HEADER /* @min:%2eaddHeader */] = function (name, value) {\r\n                _headers[name] = value;\r\n            };\r\n            _self.removeHeader = function (name) {\r\n                delete _headers[name];\r\n            };\r\n            _self[_DYN_CAN_SEND_REQUEST /* @min:%2ecanSendRequest */] = function () {\r\n                return _hasIdleConnection() && _clockSkewManager[_DYN_ALLOW_REQUEST_SENDIN0 /* @min:%2eallowRequestSending */]();\r\n            };\r\n            _self[_DYN_SEND_QUEUED_REQUESTS /* @min:%2esendQueuedRequests */] = function (sendType, sendReason) {\r\n                if (isUndefined(sendType)) {\r\n                    sendType = 0 /* EventSendType.Batched */;\r\n                }\r\n                if (_isUnloading) {\r\n                    sendType = _adjustSendType(sendType);\r\n                    sendReason = 2 /* SendRequestReason.Unload */;\r\n                }\r\n                if (_canSendPayload(_batchQueue, sendType, 0)) {\r\n                    _sendBatches(_clearQueue(), 0, false, sendType, sendReason || 0 /* SendRequestReason.Undefined */);\r\n                }\r\n            };\r\n            _self[_DYN_IS_COMPLETELY_IDLE /* @min:%2eisCompletelyIdle */] = function () {\r\n                return !_paused && _outstandingRequests === 0 && _batchQueue[_DYN_LENGTH /* @min:%2elength */] === 0;\r\n            };\r\n            _self[_DYN_SET_UNLOADING /* @min:%2esetUnloading */] = function (value) {\r\n                _isUnloading = value;\r\n            };\r\n            _self.addBatch = function (theBatch) {\r\n                if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                    // Try and kill the event faster\r\n                    if (_killSwitch.isTenantKilled(theBatch[_DYN_I_KEY /* @min:%2eiKey */]())) {\r\n                        return false;\r\n                    }\r\n                    _batchQueue[_DYN_PUSH /* @min:%2epush */](theBatch);\r\n                }\r\n                return true;\r\n            };\r\n            /**\r\n             * Queue all the remaining requests to be sent. The requests will be\r\n             * sent using HTML5 Beacons if they are available.\r\n             */\r\n            _self.teardown = function () {\r\n                if (_batchQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _sendBatches(_clearQueue(), 0, true, 2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                }\r\n                arrForEach(_unloadHooks, function (hook) {\r\n                    hook && hook.rm && hook.rm();\r\n                });\r\n                _unloadHooks = [];\r\n            };\r\n            /**\r\n             * Pause the sending of requests. No new requests will be sent.\r\n             */\r\n            _self.pause = function () {\r\n                _paused = true;\r\n            };\r\n            /**\r\n             * Resume the sending of requests.\r\n             */\r\n            _self[_DYN_RESUME /* @min:%2eresume */] = function () {\r\n                _paused = false;\r\n                _self[_DYN_SEND_QUEUED_REQUESTS /* @min:%2esendQueuedRequests */](0 /* EventSendType.Batched */, 4 /* SendRequestReason.Resumed */);\r\n            };\r\n            /**\r\n             * Sends a request synchronously to the Aria collector. This api is used to send\r\n             * a request containing a single immediate event.\r\n             *\r\n             * @param batch - The request to be sent.\r\n             * @param sendReason   - The token used to send the request.\r\n             */\r\n            _self[_DYN_SEND_SYNCHRONOUS_BAT10 /* @min:%2esendSynchronousBatch */] = function (batch, sendType, sendReason) {\r\n                // This will not take into account the max connections restriction. Since this is sync, we can\r\n                // only send one of this request at a time and thus should not worry about multiple connections\r\n                // being used to send synchronous events.\r\n                // Increment active connection since we are still going to use a connection to send the request.\r\n                if (batch && batch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                    if (isNullOrUndefined(sendType)) {\r\n                        sendType = 1 /* EventSendType.Synchronous */;\r\n                    }\r\n                    if (_isUnloading) {\r\n                        sendType = _adjustSendType(sendType);\r\n                        sendReason = 2 /* SendRequestReason.Unload */;\r\n                    }\r\n                    // For sync requests we will not wait for the clock skew.\r\n                    _sendBatches([batch], 0, false, sendType, sendReason || 0 /* SendRequestReason.Undefined */);\r\n                }\r\n            };\r\n            function _hasIdleConnection() {\r\n                return !_paused && _outstandingRequests < maxConnections;\r\n            }\r\n            function _clearQueue() {\r\n                var theQueue = _batchQueue;\r\n                _batchQueue = [];\r\n                return theQueue;\r\n            }\r\n            function _canSendPayload(theBatches, sendType, retryCnt) {\r\n                var result = false;\r\n                if (theBatches && theBatches[_DYN_LENGTH /* @min:%2elength */] > 0 && !_paused && _sendInterfaces[sendType] && _serializer) {\r\n                    // Always attempt to send synchronous events don't wait for idle or clockSkew\r\n                    // and don't block retry requests if clockSkew is not yet set\r\n                    result = (sendType !== 0 /* EventSendType.Batched */) || (_hasIdleConnection() && (retryCnt > 0 || _clockSkewManager[_DYN_ALLOW_REQUEST_SENDIN0 /* @min:%2eallowRequestSending */]()));\r\n                }\r\n                return result;\r\n            }\r\n            function _createDebugBatches(theBatches) {\r\n                var values = {};\r\n                if (theBatches) {\r\n                    arrForEach(theBatches, function (theBatch, idx) {\r\n                        values[idx] = {\r\n                            iKey: theBatch[_DYN_I_KEY /* @min:%2eiKey */](),\r\n                            evts: theBatch[_DYN_EVENTS /* @min:%2eevents */]()\r\n                        };\r\n                    });\r\n                }\r\n                return values;\r\n            }\r\n            function _sendBatches(theBatches, retryCount, isTeardown, sendType, sendReason) {\r\n                if (!theBatches || theBatches[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n                    // Nothing to do\r\n                    return;\r\n                }\r\n                if (_paused) {\r\n                    _sendBatchesNotification(theBatches, 1 /* EventBatchNotificationReason.Paused */, sendType);\r\n                    return;\r\n                }\r\n                // Make sure that if we are unloading the sendType is a supported version\r\n                sendType = _adjustSendType(sendType);\r\n                try {\r\n                    var orgBatches_1 = theBatches;\r\n                    var isSynchronous_1 = sendType !== 0 /* EventSendType.Batched */;\r\n                    doPerf(_core, function () { return \"HttpManager:_sendBatches\"; }, function (perfEvt) {\r\n                        if (perfEvt) {\r\n                            // Perf Monitoring is enabled, so create a \"Quick\" copy of the original batches so we still report\r\n                            // the original values as part of the perfEvent. This is because theBatches uses .shift() to remove each\r\n                            // batch as they are processed - removing from the original array, so by the time the _createDebugBatches()\r\n                            // function is called the passed in value has changed and therefore the reported value for the perfEvent is incorrect\r\n                            theBatches = theBatches.slice(0);\r\n                        }\r\n                        var droppedBatches = [];\r\n                        var thePayload = null;\r\n                        var serializationStart = getTime();\r\n                        var sendInterface = _sendInterfaces[sendType] || (isSynchronous_1 ? _sendInterfaces[1 /* EventSendType.Synchronous */] : _sendInterfaces[0 /* EventSendType.Batched */]);\r\n                        var sendTransport = sendInterface && sendInterface[_DYN__TRANSPORT /* @min:%2e_transport */];\r\n                        // Sync Fetch has the same payload limitation as sendBeacon -- 64kb limit\r\n                        var isReducedPayload = _canHaveReducedPayload && (_isUnloading || _isBeaconPayload(sendType) || (sendTransport === 3 /* TransportType.Beacon */ || (sendInterface._isSync && sendTransport === 2 /* TransportType.Fetch */)));\r\n                        while (_canSendPayload(theBatches, sendType, retryCount)) {\r\n                            var theBatch = theBatches.shift();\r\n                            if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                                if (!_killSwitch.isTenantKilled(theBatch[_DYN_I_KEY /* @min:%2eiKey */]())) {\r\n                                    // Make sure we have a payload object\r\n                                    thePayload = thePayload || _serializer[_DYN_CREATE_PAYLOAD /* @min:%2ecreatePayload */](retryCount, isTeardown, isSynchronous_1, isReducedPayload, sendReason, sendType);\r\n                                    // Add the batch to the current payload\r\n                                    if (!_serializer.appendPayload(thePayload, theBatch, maxEventsPerBatch)) {\r\n                                        // Entire batch was not added so send the payload and retry adding this batch\r\n                                        _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                                        serializationStart = getTime();\r\n                                        theBatches = [theBatch][_DYN_CONCAT /* @min:%2econcat */](theBatches);\r\n                                        thePayload = null;\r\n                                    }\r\n                                    else if (thePayload.overflow !== null) {\r\n                                        // Total Payload size was exceeded so send the payload and add the unsent as the next batch to send\r\n                                        theBatches = [thePayload.overflow][_DYN_CONCAT /* @min:%2econcat */](theBatches);\r\n                                        thePayload.overflow = null;\r\n                                        _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                                        serializationStart = getTime();\r\n                                        thePayload = null;\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    droppedBatches[_DYN_PUSH /* @min:%2epush */](theBatch);\r\n                                }\r\n                            }\r\n                        }\r\n                        // Make sure to flush any remaining payload\r\n                        if (thePayload) {\r\n                            _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                        }\r\n                        if (theBatches[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                            // Add any unsent batches back to the head of the queue\r\n                            _batchQueue = theBatches[_DYN_CONCAT /* @min:%2econcat */](_batchQueue);\r\n                        }\r\n                        // Now send notification about any dropped events\r\n                        _sendBatchesNotification(droppedBatches, 8004 /* EventBatchNotificationReason.KillSwitch */, sendType);\r\n                    }, function () { return ({ batches: _createDebugBatches(orgBatches_1), retryCount: retryCount, isTeardown: isTeardown, isSynchronous: isSynchronous_1, sendReason: sendReason, useSendBeacon: _isBeaconPayload(sendType), sendType: sendType }); }, !isSynchronous_1);\r\n                }\r\n                catch (ex) {\r\n                    _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 48 /* _eInternalMessageId.CannotSerializeObject */, \"Unexpected Exception sending batch: \" + dumpObj(ex));\r\n                }\r\n            }\r\n            function _buildRequestDetails(thePayload, useHeaders) {\r\n                var requestDetails = {\r\n                    url: _urlString,\r\n                    hdrs: {},\r\n                    useHdrs: false // Assume no headers\r\n                };\r\n                if (!useHeaders) {\r\n                    // Attempt to map headers to a query string if possible\r\n                    objForEachKey(_headers, function (name, value) {\r\n                        if (_collectorHeaderToQs[name]) {\r\n                            _addRequestDetails(requestDetails, _collectorHeaderToQs[name], value, false);\r\n                        }\r\n                        else {\r\n                            // No mapping, so just include in the headers anyway (may not get sent if using sendBeacon())\r\n                            requestDetails[_DYN_HDRS /* @min:%2ehdrs */][name] = value;\r\n                            requestDetails[_DYN_USE_HDRS /* @min:%2euseHdrs */] = true;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    // Copy the pre-defined headers into the payload headers\r\n                    requestDetails[_DYN_HDRS /* @min:%2ehdrs */] = extend(requestDetails[_DYN_HDRS /* @min:%2ehdrs */], _headers);\r\n                    requestDetails.useHdrs = (objKeys(requestDetails.hdrs)[_DYN_LENGTH /* @min:%2elength */] > 0);\r\n                }\r\n                _addRequestDetails(requestDetails, STR_CLIENT_ID, \"NO_AUTH\", useHeaders);\r\n                _addRequestDetails(requestDetails, STR_CLIENT_VERSION, FullVersionString, useHeaders);\r\n                var apiQsKeys = STR_EMPTY;\r\n                arrForEach(thePayload.apiKeys, function (apiKey) {\r\n                    if (apiQsKeys[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        apiQsKeys += \",\";\r\n                    }\r\n                    apiQsKeys += apiKey;\r\n                });\r\n                _addRequestDetails(requestDetails, STR_API_KEY, apiQsKeys, useHeaders);\r\n                _addRequestDetails(requestDetails, STR_UPLOAD_TIME, dateNow().toString(), useHeaders);\r\n                var msfpc = _getMsfpc(thePayload);\r\n                if (isValueAssigned(msfpc)) {\r\n                    requestDetails.url += \"&ext.intweb.msfpc=\" + msfpc;\r\n                }\r\n                if (_clockSkewManager[_DYN_SHOULD_ADD_CLOCK_SKE1 /* @min:%2eshouldAddClockSkewHeaders */]()) {\r\n                    _addRequestDetails(requestDetails, STR_TIME_DELTA_TO_APPLY, _clockSkewManager[_DYN_GET_CLOCK_SKEW_HEADE2 /* @min:%2egetClockSkewHeaderValue */](), useHeaders);\r\n                }\r\n                if (_core[_DYN_GET_WPARAM /* @min:%2egetWParam */]) {\r\n                    var wParam = _core[_DYN_GET_WPARAM /* @min:%2egetWParam */]();\r\n                    if (wParam >= 0) {\r\n                        requestDetails.url += \"&w=\" + wParam;\r\n                    }\r\n                }\r\n                for (var i = 0; i < _queryStringParameters[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n                    requestDetails.url += \"&\" + _queryStringParameters[i].name + \"=\" + _queryStringParameters[i].value;\r\n                }\r\n                return requestDetails;\r\n            }\r\n            function _setTimingValue(timings, name, value) {\r\n                timings[name] = timings[name] || {};\r\n                timings[name][_postManager.identifier] = value;\r\n            }\r\n            function _doPayloadSend(thePayload, serializationStart, serializationCompleted, sendReason) {\r\n                if (thePayload && thePayload.payloadBlob && thePayload.payloadBlob[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var useSendHook_1 = !!_sendHook;\r\n                    var sendInterface_1 = _sendInterfaces[thePayload.sendType];\r\n                    // Send all data using a beacon style transport if closing mode is on or channel was teared down\r\n                    if (!_isBeaconPayload(thePayload[_DYN_SEND_TYPE /* @min:%2esendType */]) && thePayload[_DYN_IS_BEACON /* @min:%2eisBeacon */] && thePayload.sendReason === 2 /* SendRequestReason.Unload */) {\r\n                        sendInterface_1 = _sendInterfaces[2 /* EventSendType.SendBeacon */] || _sendInterfaces[3 /* EventSendType.SyncFetch */] || sendInterface_1;\r\n                    }\r\n                    var useHeaders_1 = _useHeaders;\r\n                    // Disable header usage if we know we are using sendBeacon as additional headers are not supported\r\n                    if (thePayload.isBeacon || sendInterface_1[_DYN__TRANSPORT /* @min:%2e_transport */] === 3 /* TransportType.Beacon */) {\r\n                        useHeaders_1 = false;\r\n                    }\r\n                    var requestDetails_1 = _buildRequestDetails(thePayload, useHeaders_1);\r\n                    useHeaders_1 = useHeaders_1 || requestDetails_1[_DYN_USE_HDRS /* @min:%2euseHdrs */];\r\n                    var sendEventStart_1 = getTime();\r\n                    doPerf(_core, function () { return \"HttpManager:_doPayloadSend\"; }, function () {\r\n                        // Increment the send attempt count and add timings after packaging (So it's not serialized in the 1st attempt)\r\n                        for (var batchLp = 0; batchLp < thePayload.batches[_DYN_LENGTH /* @min:%2elength */]; batchLp++) {\r\n                            var theBatch = thePayload[_DYN_BATCHES /* @min:%2ebatches */][batchLp];\r\n                            var theEvents = theBatch[_DYN_EVENTS /* @min:%2eevents */]();\r\n                            for (var evtLp = 0; evtLp < theEvents[_DYN_LENGTH /* @min:%2elength */]; evtLp++) {\r\n                                var telemetryItem = theEvents[evtLp];\r\n                                if (_enableEventTimings) {\r\n                                    var timings = telemetryItem[_DYN_TIMINGS /* @min:%2etimings */] = telemetryItem[_DYN_TIMINGS /* @min:%2etimings */] || {};\r\n                                    _setTimingValue(timings, \"sendEventStart\", sendEventStart_1);\r\n                                    _setTimingValue(timings, \"serializationStart\", serializationStart);\r\n                                    _setTimingValue(timings, \"serializationCompleted\", serializationCompleted);\r\n                                }\r\n                                telemetryItem[strSendAttempt] > 0 ? telemetryItem[strSendAttempt]++ : telemetryItem[strSendAttempt] = 1;\r\n                            }\r\n                        }\r\n                        // Note: always sending this notification in a synchronous manner.\r\n                        _sendBatchesNotification(thePayload[_DYN_BATCHES /* @min:%2ebatches */], (1000 /* EventBatchNotificationReason.SendingUndefined */ + (sendReason || 0 /* SendRequestReason.Undefined */)), thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], true);\r\n                        // Disabling the use of const because of Issue:\r\n                        // - Task 9227844: [1DS] Some environments and packagers automatically \"freeze\" objects which are defined as const which causes any mutations to throw\r\n                        // eslint-disable-next-line prefer-const\r\n                        var orgPayloadData = {\r\n                            data: thePayload[_DYN_PAYLOAD_BLOB /* @min:%2epayloadBlob */],\r\n                            urlString: requestDetails_1.url,\r\n                            headers: requestDetails_1[_DYN_HDRS /* @min:%2ehdrs */],\r\n                            _thePayload: thePayload,\r\n                            _sendReason: sendReason,\r\n                            timeout: _xhrTimeout,\r\n                            disableXhrSync: _disableXhrSync,\r\n                            disableFetchKeepAlive: _disableFetchKeepAlive\r\n                        };\r\n                        // Only automatically add the following headers if already sending headers and we are not attempting to avoid an options call\r\n                        if (useHeaders_1) {\r\n                            if (!_hasHeader(orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */], STR_CACHE_CONTROL)) {\r\n                                orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */][STR_CACHE_CONTROL] = DEFAULT_CACHE_CONTROL;\r\n                            }\r\n                            if (!_hasHeader(orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */], STR_CONTENT_TYPE_HEADER)) {\r\n                                orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */][STR_CONTENT_TYPE_HEADER] = DEFAULT_CONTENT_TYPE;\r\n                            }\r\n                        }\r\n                        var sender = null;\r\n                        if (sendInterface_1) {\r\n                            // Send sync requests if the request is immediate or we are tearing down telemetry.\r\n                            sender = function (payload) {\r\n                                // Notify the clock skew manager that we are sending the first request (Potentially blocking all further requests)\r\n                                _clockSkewManager[_DYN_FIRST_REQUEST_SENT /* @min:%2efirstRequestSent */]();\r\n                                var onComplete = function (status, headers) {\r\n                                    _retryRequestIfNeeded(status, headers, thePayload, sendReason);\r\n                                };\r\n                                var isSync = thePayload[_DYN_IS_TEARDOWN /* @min:%2eisTeardown */] || thePayload[_DYN_IS_SYNC /* @min:%2eisSync */];\r\n                                try {\r\n                                    sendInterface_1.sendPOST(payload, onComplete, isSync);\r\n                                    if (_sendListener) {\r\n                                        // Send the original payload to the listener\r\n                                        _sendListener(orgPayloadData, payload, isSync, thePayload[_DYN_IS_BEACON /* @min:%2eisBeacon */]);\r\n                                    }\r\n                                }\r\n                                catch (ex) {\r\n                                    _warnToConsole(_logger, \"Unexpected exception sending payload. Ex:\" + dumpObj(ex));\r\n                                    _doOnComplete(onComplete, 0, {});\r\n                                }\r\n                            };\r\n                        }\r\n                        doPerf(_core, function () { return \"HttpManager:_doPayloadSend.sender\"; }, function () {\r\n                            if (sender) {\r\n                                if (thePayload[_DYN_SEND_TYPE /* @min:%2esendType */] === 0 /* EventSendType.Batched */) {\r\n                                    _outstandingRequests++;\r\n                                }\r\n                                // Only call the hook if it's defined and we are not using sendBeacon as additional headers are not supported\r\n                                if (useSendHook_1 && !thePayload.isBeacon && sendInterface_1[_DYN__TRANSPORT /* @min:%2e_transport */] !== 3 /* TransportType.Beacon */) {\r\n                                    // Create a new IPayloadData that is sent into the hook method, so that the hook method\r\n                                    // can't change the object references to the orgPayloadData (it can still change the content -- mainly the headers)\r\n                                    // Disabling the use of const because of Issue:\r\n                                    // - Task 9227844: [1DS] Some environments and packagers automatically \"freeze\" objects which are defined as const which causes any mutations to throw\r\n                                    // eslint-disable-next-line prefer-const\r\n                                    var hookData_1 = {\r\n                                        data: orgPayloadData[_DYN_DATA /* @min:%2edata */],\r\n                                        urlString: orgPayloadData[_DYN_URL_STRING /* @min:%2eurlString */],\r\n                                        headers: extend({}, orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */]),\r\n                                        timeout: orgPayloadData[_DYN_TIMEOUT /* @min:%2etimeout */],\r\n                                        disableXhrSync: orgPayloadData[_DYN_DISABLE_XHR_SYNC /* @min:%2edisableXhrSync */],\r\n                                        disableFetchKeepAlive: orgPayloadData[_DYN_DISABLE_FETCH_KEEP_A6 /* @min:%2edisableFetchKeepAlive */]\r\n                                    };\r\n                                    var senderCalled_1 = false;\r\n                                    doPerf(_core, function () { return \"HttpManager:_doPayloadSend.sendHook\"; }, function () {\r\n                                        try {\r\n                                            _sendHook(hookData_1, function (payload) {\r\n                                                senderCalled_1 = true;\r\n                                                // Add back the internal properties\r\n                                                if (!_customHttpInterface && !payload[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */]) {\r\n                                                    payload[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */] = payload[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */] || orgPayloadData[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */];\r\n                                                    payload[_DYN__SEND_REASON /* @min:%2e_sendReason */] = payload[_DYN__SEND_REASON /* @min:%2e_sendReason */] || orgPayloadData[_DYN__SEND_REASON /* @min:%2e_sendReason */];\r\n                                                }\r\n                                                sender(payload);\r\n                                            }, thePayload.isSync || thePayload[_DYN_IS_TEARDOWN /* @min:%2eisTeardown */]);\r\n                                        }\r\n                                        catch (ex) {\r\n                                            if (!senderCalled_1) {\r\n                                                // The hook never called the sender -- assume that it never will\r\n                                                sender(orgPayloadData);\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    sender(orgPayloadData);\r\n                                }\r\n                            }\r\n                        });\r\n                    }, function () { return ({ thePayload: thePayload, serializationStart: serializationStart, serializationCompleted: serializationCompleted, sendReason: sendReason }); }, thePayload[_DYN_IS_SYNC /* @min:%2eisSync */]);\r\n                }\r\n                if (thePayload.sizeExceed && thePayload.sizeExceed[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    // Ensure that we send any discard events for oversize events even when there was no payload to send\r\n                    _sendBatchesNotification(thePayload.sizeExceed, 8003 /* EventBatchNotificationReason.SizeLimitExceeded */, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */]);\r\n                }\r\n                if (thePayload.failedEvts && thePayload.failedEvts[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    // Ensure that we send any discard events for events that could not be serialized even when there was no payload to send\r\n                    _sendBatchesNotification(thePayload.failedEvts, 8002 /* EventBatchNotificationReason.InvalidEvent */, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */]);\r\n                }\r\n            }\r\n            function _addEventCompletedTimings(theEvents, sendEventCompleted) {\r\n                if (_enableEventTimings) {\r\n                    arrForEach(theEvents, function (theEvent) {\r\n                        var timings = theEvent[_DYN_TIMINGS /* @min:%2etimings */] = theEvent[_DYN_TIMINGS /* @min:%2etimings */] || {};\r\n                        _setTimingValue(timings, \"sendEventCompleted\", sendEventCompleted);\r\n                    });\r\n                }\r\n            }\r\n            function _retryRequestIfNeeded(status, headers, thePayload, sendReason) {\r\n                var reason = 9000 /* EventBatchNotificationReason.ResponseFailure */;\r\n                var droppedBatches = null;\r\n                var isRetrying = false;\r\n                var backOffTrans = false;\r\n                try {\r\n                    var shouldRetry = true;\r\n                    if (typeof status !== strUndefined) {\r\n                        if (headers) {\r\n                            _clockSkewManager[_DYN_SET_CLOCK_SKEW /* @min:%2esetClockSkew */](headers[STR_TIME_DELTA_HEADER]);\r\n                            var killDuration = headers[STR_KILL_DURATION_HEADER] || headers[\"kill-duration-seconds\"];\r\n                            arrForEach(_killSwitch[_DYN_SET_KILL_SWITCH_TENA11 /* @min:%2esetKillSwitchTenants */](headers[STR_KILL_TOKENS_HEADER], killDuration), function (killToken) {\r\n                                arrForEach(thePayload[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                                    if (theBatch[_DYN_I_KEY /* @min:%2eiKey */]() === killToken) {\r\n                                        // Make sure we have initialized the array\r\n                                        droppedBatches = droppedBatches || [];\r\n                                        // Create a copy of the batch with all of the events (and more importantly the action functions)\r\n                                        var removedEvents = theBatch[_DYN_SPLIT /* @min:%2esplit */](0);\r\n                                        // And then remove the events for the payload batch and reduce the actual number of processed\r\n                                        thePayload.numEvents -= removedEvents[_DYN_COUNT /* @min:%2ecount */]();\r\n                                        droppedBatches[_DYN_PUSH /* @min:%2epush */](removedEvents);\r\n                                    }\r\n                                });\r\n                            });\r\n                        }\r\n                        // Disabling triple-equals rule to avoid httpOverrides from failing because they are returning a string value\r\n                        // tslint:disable-next-line:triple-equals\r\n                        if (status == 200 || status == 204) {\r\n                            // Response was successfully sent\r\n                            reason = 200 /* EventBatchNotificationReason.Complete */;\r\n                            return;\r\n                        }\r\n                        if (!retryPolicyShouldRetryForStatus(status) || thePayload.numEvents <= 0) {\r\n                            // Only retry for specific response codes and if there is still events after kill switch processing\r\n                            shouldRetry = false;\r\n                        }\r\n                        // Derive the notification response from the HttpStatus Code\r\n                        reason = 9000 /* EventBatchNotificationReason.ResponseFailure */ + (status % 1000);\r\n                    }\r\n                    if (shouldRetry) {\r\n                        // The events should be retried -- so change notification to requeue them\r\n                        reason = 100 /* EventBatchNotificationReason.RequeueEvents */;\r\n                        var retryCount_1 = thePayload.retryCnt;\r\n                        if (thePayload[_DYN_SEND_TYPE /* @min:%2esendType */] === 0 /* EventSendType.Batched */) {\r\n                            // attempt to resend the entire batch\r\n                            if (retryCount_1 < maxRequestRetriesBeforeBackoff) {\r\n                                isRetrying = true;\r\n                                _doAction(function () {\r\n                                    // try to resend the same batches\r\n                                    if (thePayload[_DYN_SEND_TYPE /* @min:%2esendType */] === 0 /* EventSendType.Batched */) {\r\n                                        // Reduce the outstanding request count (if this was an async request) as we didn't reduce the count\r\n                                        // previously and we are about to reschedule our retry attempt and we want an attempt to send\r\n                                        // to occur, it's also required to ensure that a follow up handleRequestFinished() call occurs\r\n                                        _outstandingRequests--;\r\n                                    }\r\n                                    _sendBatches(thePayload[_DYN_BATCHES /* @min:%2ebatches */], retryCount_1 + 1, thePayload[_DYN_IS_TEARDOWN /* @min:%2eisTeardown */], _isUnloading ? 2 /* EventSendType.SendBeacon */ : thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], 5 /* SendRequestReason.Retry */);\r\n                                }, _isUnloading, retryPolicyGetMillisToBackoffForRetry(retryCount_1));\r\n                            }\r\n                            else {\r\n                                backOffTrans = true;\r\n                                if (_isUnloading) {\r\n                                    // we are unloading so don't try and requeue the events otherwise let the events get requeued and resent during the backoff sending\r\n                                    // This will also cause the events to be purged based on the priority (if necessary)\r\n                                    reason = 8001 /* EventBatchNotificationReason.NonRetryableStatus */;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                finally {\r\n                    if (!isRetrying) {\r\n                        // Make sure the clockSkewManager doesn't blocking further sending of requests once we have a proper response\r\n                        // This won't override any previously sent clock Skew value\r\n                        _clockSkewManager[_DYN_SET_CLOCK_SKEW /* @min:%2esetClockSkew */]();\r\n                        _handleRequestFinished(thePayload, reason, sendReason, backOffTrans);\r\n                    }\r\n                    _sendBatchesNotification(droppedBatches, 8004 /* EventBatchNotificationReason.KillSwitch */, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */]);\r\n                }\r\n            }\r\n            function _handleRequestFinished(thePayload, batchReason, sendReason, backOffTrans) {\r\n                try {\r\n                    if (backOffTrans) {\r\n                        // Slow down the transmission requests\r\n                        _postManager[_DYN__BACK_OFF_TRANSMISSI12 /* @min:%2e_backOffTransmission */]();\r\n                    }\r\n                    var theBatches = thePayload[_DYN_BATCHES /* @min:%2ebatches */];\r\n                    if (batchReason === 200 /* EventBatchNotificationReason.Complete */) {\r\n                        theBatches = thePayload.sentEvts || thePayload[_DYN_BATCHES /* @min:%2ebatches */];\r\n                        if (!backOffTrans && !thePayload[_DYN_IS_SYNC /* @min:%2eisSync */]) {\r\n                            // We have a successful async response, so the lets open the floodgates\r\n                            // The reason for checking isSync is to avoid unblocking if beacon send occurred as it\r\n                            // doesn't wait for a response.\r\n                            _postManager._clearBackOff();\r\n                        }\r\n                        _addCompleteTimings(theBatches);\r\n                    }\r\n                    // Send the notifications synchronously\r\n                    _sendBatchesNotification(theBatches, batchReason, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], true);\r\n                }\r\n                finally {\r\n                    if (thePayload[_DYN_SEND_TYPE /* @min:%2esendType */] === 0 /* EventSendType.Batched */) {\r\n                        // we always need to decrement this value otherwise the httpmanager locks up and won't send any more events\r\n                        _outstandingRequests--;\r\n                        // Don't try to send additional queued events if this is a retry operation as the retried\r\n                        // response will eventually call _handleRequestFinished for the retried event\r\n                        if (sendReason !== 5 /* SendRequestReason.Retry */) {\r\n                            // Try and send any other queued batched events\r\n                            _self.sendQueuedRequests(thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], sendReason);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            function _addCompleteTimings(theBatches) {\r\n                if (_enableEventTimings) {\r\n                    var sendEventCompleted_1 = getTime();\r\n                    arrForEach(theBatches, function (theBatch) {\r\n                        if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                            _addEventCompletedTimings(theBatch[_DYN_EVENTS /* @min:%2eevents */](), sendEventCompleted_1);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            function _doAction(cb, isSync, interval) {\r\n                if (isSync) {\r\n                    cb();\r\n                }\r\n                else {\r\n                    _timeoutWrapper.set(cb, interval);\r\n                }\r\n            }\r\n            function _getMsfpc(thePayload) {\r\n                for (var lp = 0; lp < thePayload.batches[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                    var msfpc = thePayload[_DYN_BATCHES /* @min:%2ebatches */][lp].Msfpc();\r\n                    if (msfpc) {\r\n                        return encodeURIComponent(msfpc);\r\n                    }\r\n                }\r\n                return STR_EMPTY;\r\n            }\r\n            function _handleCollectorResponse(responseText) {\r\n                var responseHandlers = _responseHandlers;\r\n                try {\r\n                    for (var i = 0; i < responseHandlers[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n                        try {\r\n                            responseHandlers[i](responseText);\r\n                        }\r\n                        catch (e) {\r\n                            _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 519 /* _eExtendedInternalMessageId.PostResponseHandler */, \"Response handler failed: \" + e);\r\n                        }\r\n                    }\r\n                    if (responseText) {\r\n                        var response = JSON.parse(responseText);\r\n                        if (isValueAssigned(response.webResult) && isValueAssigned(response.webResult[STR_MSFPC])) {\r\n                            // Set cookie\r\n                            _cookieMgr.set(\"MSFPC\", response.webResult[STR_MSFPC], 365 * 86400);\r\n                        }\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    // Doing nothing\r\n                }\r\n            }\r\n            function _sendBatchesNotification(theBatches, batchReason, sendType, sendSync) {\r\n                if (theBatches && theBatches[_DYN_LENGTH /* @min:%2elength */] > 0 && actions) {\r\n                    var theAction_1 = actions[_getNotificationAction(batchReason)];\r\n                    if (theAction_1) {\r\n                        var isSyncRequest_1 = sendType !== 0 /* EventSendType.Batched */;\r\n                        doPerf(_core, function () { return \"HttpManager:_sendBatchesNotification\"; }, function () {\r\n                            _doAction(function () {\r\n                                try {\r\n                                    theAction_1.call(actions, theBatches, batchReason, isSyncRequest_1, sendType);\r\n                                }\r\n                                catch (e) {\r\n                                    _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, \"send request notification failed: \" + e);\r\n                                }\r\n                            }, sendSync || isSyncRequest_1, 0);\r\n                        }, function () { return ({ batches: _createDebugBatches(theBatches), reason: batchReason, isSync: isSyncRequest_1, sendSync: sendSync, sendType: sendType }); }, !isSyncRequest_1);\r\n                    }\r\n                }\r\n            }\r\n            function _getNotificationAction(reason) {\r\n                var action = _eventActionMap[reason];\r\n                if (!isValueAssigned(action)) {\r\n                    action = STR_OTHER;\r\n                    if (reason >= 9000 /* EventBatchNotificationReason.ResponseFailure */ && reason <= 9999 /* EventBatchNotificationReason.ResponseFailureMax */) {\r\n                        action = STR_RESPONSE_FAIL;\r\n                    }\r\n                    else if (reason >= 8000 /* EventBatchNotificationReason.EventsDropped */ && reason <= 8999 /* EventBatchNotificationReason.EventsDroppedMax */) {\r\n                        action = STR_DROPPED;\r\n                    }\r\n                    else if (reason >= 1000 /* EventBatchNotificationReason.SendingUndefined */ && reason <= 1999 /* EventBatchNotificationReason.SendingEventMax */) {\r\n                        action = STR_SENDING;\r\n                    }\r\n                }\r\n                return action;\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for HttpManager.prototype.initialize.\r\n// Removed Stub for HttpManager.prototype.addHeader.\r\n// Removed Stub for HttpManager.prototype.removeHeader.\r\n// Removed Stub for HttpManager.prototype.addResponseHandler.\r\n// Removed Stub for HttpManager.prototype.addBatch.\r\n// Removed Stub for HttpManager.prototype.canSendRequest.\r\n// Removed Stub for HttpManager.prototype.sendQueuedRequests.\r\n// Removed Stub for HttpManager.prototype.isCompletelyIdle.\r\n// Removed Stub for HttpManager.prototype.setUnloading.\r\n// Removed Stub for HttpManager.prototype.teardown.\r\n// Removed Stub for HttpManager.prototype.pause.\r\n// Removed Stub for HttpManager.prototype.resume.\r\n// Removed Stub for HttpManager.prototype.sendSynchronousBatch.\r\n// Removed Stub for HttpManager.prototype.serializeOfflineEvt.\r\n// Removed Stub for HttpManager.prototype.getOfflineRequestDetails.\r\n// Removed Stub for HttpManager.prototype.createOneDSPayload.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    HttpManager.__ieDyn=1;\n\n    return HttpManager;\r\n}());\r\nexport { HttpManager };\r\n//# sourceMappingURL=HttpManager.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* TimeoutOverrideWrapper.ts\r\n* @author  Nev Wylie (newylie)\r\n* @copyright Microsoft 2022\r\n* Simple internal timeout wrapper\r\n*/\r\nimport { scheduleTimeoutWith } from \"@nevware21/ts-utils\";\r\nexport function createTimeoutWrapper(argSetTimeout, argClearTimeout) {\r\n    return {\r\n        set: function (callback, ms) {\r\n            var args = [];\r\n            for (var _i = 2; _i < arguments.length; _i++) {\r\n                args[_i - 2] = arguments[_i];\r\n            }\r\n            return scheduleTimeoutWith([argSetTimeout, argClearTimeout], callback, ms, args);\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=TimeoutOverrideWrapper.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n/**\r\n* PostManager.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { BaseTelemetryPlugin, EventsDiscardedReason, _throwInternal, addPageHideEventListener, addPageShowEventListener, addPageUnloadEventListener, arrForEach, createProcessTelemetryContext, createUniqueNamespace, doPerf, getWindow, isChromium, isGreaterThanZero, isNumber, mergeEvtNamespace, objForEachKey, onConfigChange, optimizeObject, proxyFunctions, removePageHideEventListener, removePageShowEventListener, removePageUnloadEventListener, setProcessTelemetryTimings } from \"@microsoft/1ds-core-js\";\r\nimport { createPromise } from \"@nevware21/ts-async\";\r\nimport { isPromiseLike, objDeepFreeze } from \"@nevware21/ts-utils\";\r\nimport { BE_PROFILE, NRT_PROFILE, RT_PROFILE } from \"./DataModels\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { HttpManager } from \"./HttpManager\";\r\nimport { STR_AUTH_WEB_TOKEN, STR_MSA_DEVICE_TICKET, STR_TRACE, STR_USER } from \"./InternalConstants\";\r\nimport { retryPolicyGetMillisToBackoffForRetry } from \"./RetryPolicy\";\r\nimport { createTimeoutWrapper } from \"./TimeoutOverrideWrapper\";\r\nimport { _DYN_ADD_HEADER, _DYN_AUTO_FLUSH_EVENTS_LI14, _DYN_BASE_DATA, _DYN_BATCHES, _DYN_CAN_SEND_REQUEST, _DYN_CLEAR_TIMEOUT_OVERRI3, _DYN_CONCAT, _DYN_COUNT, _DYN_CREATE_ONE_DSPAYLOAD, _DYN_DATA, _DYN_DISABLE_AUTO_BATCH_F15, _DYN_DISABLE_OPTIMIZE_OBJ, _DYN_DISABLE_TELEMETRY, _DYN_EVENTS, _DYN_EVENTS_LIMIT_IN_MEM, _DYN_GET_OFFLINE_REQUEST_9, _DYN_GET_WPARAM, _DYN_IDENTIFIER, _DYN_IGNORE_MC1_MS0_COOKI13, _DYN_INITIALIZE, _DYN_IS_COMPLETELY_IDLE, _DYN_I_KEY, _DYN_LATENCY, _DYN_LENGTH, _DYN_OVERRIDE_INSTRUMENTA16, _DYN_PUSH, _DYN_RESUME, _DYN_SEND_ATTEMPT, _DYN_SEND_QUEUED_REQUESTS, _DYN_SEND_SYNCHRONOUS_BAT10, _DYN_SERIALIZE_OFFLINE_EV8, _DYN_SET_TIMEOUT_OVERRIDE, _DYN_SET_UNLOADING, _DYN_SPLICE, _DYN_SPLIT, _DYN_SYNC, _DYN__BACK_OFF_TRANSMISSI12 } from \"./__DynamicConstants\";\r\nvar FlushCheckTimer = 0.250; // This needs to be in seconds, so this is 250ms\r\nvar MaxNumberEventPerBatch = 500;\r\nvar EventsDroppedAtOneTime = 20;\r\nvar MaxSendAttempts = 6;\r\nvar MaxSyncUnloadSendAttempts = 2; // Assuming 2 based on beforeunload and unload\r\nvar MaxBackoffCount = 4;\r\nvar MaxConnections = 2;\r\nvar MaxRequestRetriesBeforeBackoff = 1;\r\nvar MaxEventsLimitInMem = 10000;\r\nvar strEventsDiscarded = \"eventsDiscarded\";\r\nvar EMPTY_STR = \"\";\r\nvar undefValue = undefined;\r\n/**\r\n * The default settings for the config.\r\n * WE MUST include all defaults here to ensure that the config is created with all of the properties\r\n * defined as dynamic.\r\n */\r\nvar defaultPostChannelConfig = objDeepFreeze({\r\n    eventsLimitInMem: { isVal: isGreaterThanZero, v: MaxEventsLimitInMem },\r\n    immediateEventLimit: { isVal: isGreaterThanZero, v: 500 },\r\n    autoFlushEventsLimit: { isVal: isGreaterThanZero, v: 0 },\r\n    disableAutoBatchFlushLimit: false,\r\n    httpXHROverride: { isVal: isOverrideFn, v: undefValue },\r\n    overrideInstrumentationKey: undefValue,\r\n    overrideEndpointUrl: undefValue,\r\n    disableTelemetry: false,\r\n    ignoreMc1Ms0CookieProcessing: false,\r\n    setTimeoutOverride: undefValue,\r\n    clearTimeoutOverride: undefValue,\r\n    payloadPreprocessor: undefValue,\r\n    payloadListener: undefValue,\r\n    disableEventTimings: undefValue,\r\n    valueSanitizer: undefValue,\r\n    stringifyObjects: undefValue,\r\n    enableCompoundKey: undefValue,\r\n    disableOptimizeObj: false,\r\n    fetchCredentials: undefValue,\r\n    // disableCacheHeader: undefValue, // See Task #7178858 - Collector requires a change to support this\r\n    transports: undefValue,\r\n    unloadTransports: undefValue,\r\n    useSendBeacon: undefValue,\r\n    disableFetchKeepAlive: undefValue,\r\n    avoidOptions: false,\r\n    xhrTimeout: undefValue,\r\n    disableXhrSync: undefValue,\r\n    alwaysUseXhrOverride: false,\r\n    maxEventRetryAttempts: { isVal: isNumber, v: MaxSendAttempts },\r\n    maxUnloadEventRetryAttempts: { isVal: isNumber, v: MaxSyncUnloadSendAttempts },\r\n    addNoResponse: undefValue,\r\n    excludeCsMetaData: undefValue\r\n});\r\nfunction isOverrideFn(httpXHROverride) {\r\n    return httpXHROverride && httpXHROverride.sendPOST;\r\n}\r\n/**\r\n * Class that manages adding events to inbound queues and batching of events\r\n * into requests.\r\n * @group Classes\r\n * @group Entrypoint\r\n */\r\nvar PostChannel = /** @class */ (function (_super) {\r\n    __extends(PostChannel, _super);\r\n    function PostChannel() {\r\n        var _this = _super.call(this) || this;\r\n        _this.identifier = \"PostChannel\";\r\n        _this.priority = 1011;\r\n        _this.version = '4.3.4';\r\n        var _postConfig;\r\n        var _isTeardownCalled = false;\r\n        var _flushCallbackQueue = [];\r\n        var _flushCallbackTimer;\r\n        var _paused = false;\r\n        var _immediateQueueSize = 0;\r\n        var _immediateQueueSizeLimit;\r\n        var _queueSize = 0;\r\n        var _queueSizeLimit;\r\n        var _profiles = {};\r\n        var _currentProfile = RT_PROFILE;\r\n        var _scheduledTimer;\r\n        var _immediateTimer;\r\n        var _currentBackoffCount;\r\n        var _timerCount;\r\n        var _httpManager;\r\n        var _batchQueues;\r\n        var _autoFlushEventsLimit;\r\n        // either MaxBatchSize * (1+ Max Connections) or _queueLimit / 6 (where 3 latency Queues [normal, realtime, cost deferred] * 2 [allow half full -- allow for retry])\r\n        var _autoFlushBatchLimit;\r\n        var _delayedBatchSendLatency;\r\n        var _delayedBatchReason;\r\n        var _optimizeObject;\r\n        var _isPageUnloadTriggered;\r\n        var _maxEventSendAttempts;\r\n        var _maxUnloadEventSendAttempts;\r\n        var _evtNamespace;\r\n        var _timeoutWrapper;\r\n        var _ignoreMc1Ms0CookieProcessing;\r\n        var _disableAutoBatchFlushLimit;\r\n        var _notificationManager;\r\n        var _unloadHandlersAdded;\r\n        var _overrideInstrumentationKey;\r\n        var _disableTelemetry;\r\n        dynamicProto(PostChannel, _this, function (_self, _base) {\r\n            _initDefaults();\r\n            // Special internal method to allow the DebugPlugin to hook embedded objects\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_httpManager, _postConfig];\r\n            };\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (theConfig, core, extensions) {\r\n                doPerf(core, function () { return \"PostChannel:initialize\"; }, function () {\r\n                    _base[_DYN_INITIALIZE /* @min:%2einitialize */](theConfig, core, extensions);\r\n                    _notificationManager = core.getNotifyMgr();\r\n                    try {\r\n                        _evtNamespace = mergeEvtNamespace(createUniqueNamespace(_self[_DYN_IDENTIFIER /* @min:%2eidentifier */]), core.evtNamespace && core.evtNamespace());\r\n                        _self._addHook(onConfigChange(theConfig, function (details) {\r\n                            var coreConfig = details.cfg;\r\n                            var ctx = createProcessTelemetryContext(null, coreConfig, core);\r\n                            _postConfig = ctx.getExtCfg(_self[_DYN_IDENTIFIER /* @min:%2eidentifier */], defaultPostChannelConfig);\r\n                            _timeoutWrapper = createTimeoutWrapper(_postConfig[_DYN_SET_TIMEOUT_OVERRIDE /* @min:%2esetTimeoutOverride */], _postConfig[_DYN_CLEAR_TIMEOUT_OVERRI3 /* @min:%2eclearTimeoutOverride */]);\r\n                            // Only try and use the optimizeObject() if this appears to be a chromium based browser and it has not been explicitly disabled\r\n                            _optimizeObject = !_postConfig[_DYN_DISABLE_OPTIMIZE_OBJ /* @min:%2edisableOptimizeObj */] && isChromium();\r\n                            _ignoreMc1Ms0CookieProcessing = _postConfig[_DYN_IGNORE_MC1_MS0_COOKI13 /* @min:%2eignoreMc1Ms0CookieProcessing */];\r\n                            _hookWParam(core); // _hookWParam uses _ignoreMc1Ms0CookieProcessing\r\n                            _queueSizeLimit = _postConfig[_DYN_EVENTS_LIMIT_IN_MEM /* @min:%2eeventsLimitInMem */];\r\n                            _immediateQueueSizeLimit = _postConfig.immediateEventLimit;\r\n                            _autoFlushEventsLimit = _postConfig[_DYN_AUTO_FLUSH_EVENTS_LI14 /* @min:%2eautoFlushEventsLimit */];\r\n                            _maxEventSendAttempts = _postConfig.maxEventRetryAttempts;\r\n                            _maxUnloadEventSendAttempts = _postConfig.maxUnloadEventRetryAttempts;\r\n                            _disableAutoBatchFlushLimit = _postConfig[_DYN_DISABLE_AUTO_BATCH_F15 /* @min:%2edisableAutoBatchFlushLimit */];\r\n                            if (isPromiseLike(coreConfig.endpointUrl)) {\r\n                                _self.pause();\r\n                            }\r\n                            else if (!!_paused) {\r\n                                // if previous url is promise, resume\r\n                                _self[_DYN_RESUME /* @min:%2eresume */]();\r\n                            }\r\n                            _setAutoLimits();\r\n                            // Override iKey if provided in Post config if provided for during initialization\r\n                            _overrideInstrumentationKey = _postConfig[_DYN_OVERRIDE_INSTRUMENTA16 /* @min:%2eoverrideInstrumentationKey */];\r\n                            // DisableTelemetry was defined in the config provided during initialization\r\n                            _disableTelemetry = !!_postConfig[_DYN_DISABLE_TELEMETRY /* @min:%2edisableTelemetry */];\r\n                            if (_unloadHandlersAdded) {\r\n                                _removeUnloadHandlers();\r\n                            }\r\n                            var excludePageUnloadEvents = coreConfig.disablePageUnloadEvents || [];\r\n                            // When running in Web browsers try to send all telemetry if page is unloaded\r\n                            _unloadHandlersAdded = addPageUnloadEventListener(_handleUnloadEvents, excludePageUnloadEvents, _evtNamespace);\r\n                            _unloadHandlersAdded = addPageHideEventListener(_handleUnloadEvents, excludePageUnloadEvents, _evtNamespace) || _unloadHandlersAdded;\r\n                            _unloadHandlersAdded = addPageShowEventListener(_handleShowEvents, coreConfig.disablePageShowEvents, _evtNamespace) || _unloadHandlersAdded;\r\n                        }));\r\n                        // only initialize the manager once\r\n                        _httpManager[_DYN_INITIALIZE /* @min:%2einitialize */](theConfig, _self.core, _self);\r\n                    }\r\n                    catch (e) {\r\n                        // resetting the initialized state because of failure\r\n                        _self.setInitialized(false);\r\n                        throw e;\r\n                    }\r\n                }, function () { return ({ theConfig: theConfig, core: core, extensions: extensions }); });\r\n            };\r\n            _self.processTelemetry = function (ev, itemCtx) {\r\n                setProcessTelemetryTimings(ev, _self[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n                itemCtx = itemCtx || _self._getTelCtx(itemCtx);\r\n                var event = ev;\r\n                if (!_disableTelemetry && !_isTeardownCalled) {\r\n                    // Override iKey if provided in Post config if provided for during initialization\r\n                    if (_overrideInstrumentationKey) {\r\n                        event[_DYN_I_KEY /* @min:%2eiKey */] = _overrideInstrumentationKey;\r\n                    }\r\n                    _addEventToQueues(event, true);\r\n                    if (_isPageUnloadTriggered) {\r\n                        // Unload event has been received so we need to try and flush new events\r\n                        _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                    }\r\n                    else {\r\n                        _scheduleTimer();\r\n                    }\r\n                }\r\n                _self.processNext(event, itemCtx);\r\n            };\r\n            _self.getOfflineSupport = function () {\r\n                try {\r\n                    var details_1 = _httpManager && _httpManager[_DYN_GET_OFFLINE_REQUEST_9 /* @min:%2egetOfflineRequestDetails */]();\r\n                    if (_httpManager) {\r\n                        return {\r\n                            getUrl: function () {\r\n                                if (details_1) {\r\n                                    return details_1.url;\r\n                                }\r\n                                return null;\r\n                            },\r\n                            serialize: _serialize,\r\n                            batch: _batch,\r\n                            shouldProcess: function (evt) {\r\n                                return !_disableTelemetry;\r\n                            },\r\n                            createPayload: function (evt) {\r\n                                return null;\r\n                            },\r\n                            createOneDSPayload: function (evts) {\r\n                                if (_httpManager[_DYN_CREATE_ONE_DSPAYLOAD /* @min:%2ecreateOneDSPayload */]) {\r\n                                    return _httpManager[_DYN_CREATE_ONE_DSPAYLOAD /* @min:%2ecreateOneDSPayload */](evts, _optimizeObject);\r\n                                }\r\n                            }\r\n                        };\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            };\r\n            _self._doTeardown = function (unloadCtx, unloadState) {\r\n                _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                _isTeardownCalled = true;\r\n                _httpManager.teardown();\r\n                _removeUnloadHandlers();\r\n                // Just register to remove all events associated with this namespace\r\n                _initDefaults();\r\n            };\r\n            function _removeUnloadHandlers() {\r\n                removePageUnloadEventListener(null, _evtNamespace);\r\n                removePageHideEventListener(null, _evtNamespace);\r\n                removePageShowEventListener(null, _evtNamespace);\r\n            }\r\n            function _hookWParam(core) {\r\n                var existingGetWParamMethod = core[_DYN_GET_WPARAM /* @min:%2egetWParam */];\r\n                core[_DYN_GET_WPARAM /* @min:%2egetWParam */] = function () {\r\n                    var wparam = 0;\r\n                    if (_ignoreMc1Ms0CookieProcessing) {\r\n                        wparam = wparam | 2;\r\n                    }\r\n                    return wparam | existingGetWParamMethod.call(core);\r\n                };\r\n            }\r\n            function _batch(arr) {\r\n                var rlt = EMPTY_STR;\r\n                if (arr && arr[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    arrForEach(arr, function (item) {\r\n                        if (rlt) {\r\n                            rlt += \"\\n\";\r\n                        }\r\n                        rlt += item;\r\n                    });\r\n                }\r\n                return rlt;\r\n            }\r\n            function _serialize(event) {\r\n                var rlt = EMPTY_STR;\r\n                try {\r\n                    _cleanEvent(event);\r\n                    rlt = _httpManager[_DYN_SERIALIZE_OFFLINE_EV8 /* @min:%2eserializeOfflineEvt */](event);\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return rlt;\r\n            }\r\n            // Moving event handlers out from the initialize closure so that any local variables can be garbage collected\r\n            function _handleUnloadEvents(evt) {\r\n                var theEvt = evt || getWindow().event; // IE 8 does not pass the event\r\n                if (theEvt.type !== \"beforeunload\") {\r\n                    // Only set the unload trigger if not beforeunload event as beforeunload can be cancelled while the other events can't\r\n                    _isPageUnloadTriggered = true;\r\n                    _httpManager[_DYN_SET_UNLOADING /* @min:%2esetUnloading */](_isPageUnloadTriggered);\r\n                }\r\n                _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n            }\r\n            function _handleShowEvents(evt) {\r\n                // Handle the page becoming visible again\r\n                _isPageUnloadTriggered = false;\r\n                _httpManager[_DYN_SET_UNLOADING /* @min:%2esetUnloading */](_isPageUnloadTriggered);\r\n            }\r\n            function _cleanEvent(event) {\r\n                if (event.ext && event.ext[STR_TRACE]) {\r\n                    delete (event.ext[STR_TRACE]);\r\n                }\r\n                if (event.ext && event.ext[STR_USER] && event.ext[STR_USER][\"id\"]) {\r\n                    delete (event.ext[STR_USER][\"id\"]);\r\n                }\r\n                // v8 performance optimization for iterating over the keys\r\n                if (_optimizeObject) {\r\n                    event.ext = optimizeObject(event.ext);\r\n                    if (event[_DYN_BASE_DATA /* @min:%2ebaseData */]) {\r\n                        event[_DYN_BASE_DATA /* @min:%2ebaseData */] = optimizeObject(event[_DYN_BASE_DATA /* @min:%2ebaseData */]);\r\n                    }\r\n                    if (event[_DYN_DATA /* @min:%2edata */]) {\r\n                        event[_DYN_DATA /* @min:%2edata */] = optimizeObject(event[_DYN_DATA /* @min:%2edata */]);\r\n                    }\r\n                }\r\n            }\r\n            function _addEventToQueues(event, append) {\r\n                // If send attempt field is undefined we should set it to 0.\r\n                if (!event[_DYN_SEND_ATTEMPT /* @min:%2esendAttempt */]) {\r\n                    event[_DYN_SEND_ATTEMPT /* @min:%2esendAttempt */] = 0;\r\n                }\r\n                // Add default latency\r\n                if (!event[_DYN_LATENCY /* @min:%2elatency */]) {\r\n                    event[_DYN_LATENCY /* @min:%2elatency */] = 1 /* EventLatencyValue.Normal */;\r\n                }\r\n                _cleanEvent(event);\r\n                if (event[_DYN_SYNC /* @min:%2esync */]) {\r\n                    // If the transmission is backed off then do not send synchronous events.\r\n                    // We will convert these events to Real time latency instead.\r\n                    if (_currentBackoffCount || _paused) {\r\n                        event[_DYN_LATENCY /* @min:%2elatency */] = 3 /* EventLatencyValue.RealTime */;\r\n                        event[_DYN_SYNC /* @min:%2esync */] = false;\r\n                    }\r\n                    else {\r\n                        // Log the event synchronously\r\n                        if (_httpManager) {\r\n                            // v8 performance optimization for iterating over the keys\r\n                            if (_optimizeObject) {\r\n                                event = optimizeObject(event);\r\n                            }\r\n                            _httpManager[_DYN_SEND_SYNCHRONOUS_BAT10 /* @min:%2esendSynchronousBatch */](EventBatch.create(event[_DYN_I_KEY /* @min:%2eiKey */], [event]), event[_DYN_SYNC /* @min:%2esync */] === true ? 1 /* EventSendType.Synchronous */ : event[_DYN_SYNC /* @min:%2esync */], 3 /* SendRequestReason.SyncEvent */);\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                var evtLatency = event[_DYN_LATENCY /* @min:%2elatency */];\r\n                var queueSize = _queueSize;\r\n                var queueLimit = _queueSizeLimit;\r\n                if (evtLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                    queueSize = _immediateQueueSize;\r\n                    queueLimit = _immediateQueueSizeLimit;\r\n                }\r\n                var eventDropped = false;\r\n                // Only add the event if the queue isn't full or it's a direct event (which don't add to the queue sizes)\r\n                if (queueSize < queueLimit) {\r\n                    eventDropped = !_addEventToProperQueue(event, append);\r\n                }\r\n                else {\r\n                    var dropLatency = 1 /* EventLatencyValue.Normal */;\r\n                    var dropNumber = EventsDroppedAtOneTime;\r\n                    if (evtLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                        // Only drop other immediate events as they are not technically sharing the general queue\r\n                        dropLatency = 4 /* EventLatencyValue.Immediate */;\r\n                        dropNumber = 1;\r\n                    }\r\n                    // Drop old event from lower or equal latency\r\n                    eventDropped = true;\r\n                    if (_dropEventWithLatencyOrLess(event[_DYN_I_KEY /* @min:%2eiKey */], event[_DYN_LATENCY /* @min:%2elatency */], dropLatency, dropNumber)) {\r\n                        eventDropped = !_addEventToProperQueue(event, append);\r\n                    }\r\n                }\r\n                if (eventDropped) {\r\n                    // Can't drop events from current queues because the all the slots are taken by queues that are being flushed.\r\n                    _notifyEvents(strEventsDiscarded, [event], EventsDiscardedReason.QueueFull);\r\n                }\r\n            }\r\n            _self.setEventQueueLimits = function (eventLimit, autoFlushLimit) {\r\n                _postConfig[_DYN_EVENTS_LIMIT_IN_MEM /* @min:%2eeventsLimitInMem */] = _queueSizeLimit = isGreaterThanZero(eventLimit) ? eventLimit : MaxEventsLimitInMem;\r\n                _postConfig[_DYN_AUTO_FLUSH_EVENTS_LI14 /* @min:%2eautoFlushEventsLimit */] = _autoFlushEventsLimit = isGreaterThanZero(autoFlushLimit) ? autoFlushLimit : 0;\r\n                _setAutoLimits();\r\n                // We only do this check here as during normal event addition if the queue is > then events start getting dropped\r\n                var doFlush = _queueSize > eventLimit;\r\n                if (!doFlush && _autoFlushBatchLimit > 0) {\r\n                    // Check the auto flush max batch size\r\n                    for (var latency = 1 /* EventLatencyValue.Normal */; !doFlush && latency <= 3 /* EventLatencyValue.RealTime */; latency++) {\r\n                        var batchQueue = _batchQueues[latency];\r\n                        if (batchQueue && batchQueue[_DYN_BATCHES /* @min:%2ebatches */]) {\r\n                            arrForEach(batchQueue[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                                if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() >= _autoFlushBatchLimit) {\r\n                                    // If any 1 batch is > than the limit then trigger an auto flush\r\n                                    doFlush = true;\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                _performAutoFlush(true, doFlush);\r\n            };\r\n            _self.pause = function () {\r\n                _clearScheduledTimer();\r\n                _paused = true;\r\n                _httpManager && _httpManager.pause();\r\n            };\r\n            _self[_DYN_RESUME /* @min:%2eresume */] = function () {\r\n                _paused = false;\r\n                _httpManager && _httpManager[_DYN_RESUME /* @min:%2eresume */]();\r\n                _scheduleTimer();\r\n            };\r\n            _self._loadTransmitProfiles = function (profiles) {\r\n                _resetTransmitProfiles();\r\n                objForEachKey(profiles, function (profileName, profileValue) {\r\n                    var profLen = profileValue[_DYN_LENGTH /* @min:%2elength */];\r\n                    if (profLen >= 2) {\r\n                        var directValue = (profLen > 2 ? profileValue[2] : 0);\r\n                        profileValue[_DYN_SPLICE /* @min:%2esplice */](0, profLen - 2);\r\n                        // Make sure if a higher latency is set to not send then don't send lower latency\r\n                        if (profileValue[1] < 0) {\r\n                            profileValue[0] = -1;\r\n                        }\r\n                        // Make sure each latency is multiple of the latency higher then it. If not a multiple\r\n                        // we round up so that it becomes a multiple.\r\n                        if (profileValue[1] > 0 && profileValue[0] > 0) {\r\n                            var timerMultiplier = profileValue[0] / profileValue[1];\r\n                            profileValue[0] = Math.ceil(timerMultiplier) * profileValue[1];\r\n                        }\r\n                        // Add back the direct profile timeout\r\n                        if (directValue >= 0 && profileValue[1] >= 0 && directValue > profileValue[1]) {\r\n                            // Make sure if it's not disabled (< 0) then make sure it's not larger than RealTime\r\n                            directValue = profileValue[1];\r\n                        }\r\n                        profileValue[_DYN_PUSH /* @min:%2epush */](directValue);\r\n                        _profiles[profileName] = profileValue;\r\n                    }\r\n                });\r\n            };\r\n            _self.flush = function (async, callback, sendReason) {\r\n                if (async === void 0) { async = true; }\r\n                var result;\r\n                if (!_paused) {\r\n                    sendReason = sendReason || 1 /* SendRequestReason.ManualFlush */;\r\n                    if (async) {\r\n                        if (!callback) {\r\n                            result = createPromise(function (resolve) {\r\n                                // Set the callback to the promise resolve callback\r\n                                callback = resolve;\r\n                            });\r\n                        }\r\n                        if (_flushCallbackTimer == null) {\r\n                            // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                            _clearScheduledTimer();\r\n                            // Move all queued events to the HttpManager so that we don't discard new events (Auto flush scenario)\r\n                            _queueBatches(1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, sendReason);\r\n                            _flushCallbackTimer = _createTimer(function () {\r\n                                _flushCallbackTimer = null;\r\n                                _flushImpl(callback, sendReason);\r\n                            }, 0);\r\n                        }\r\n                        else {\r\n                            // Even if null (no callback) this will ensure after the flushImpl finishes waiting\r\n                            // for a completely idle connection it will attempt to re-flush any queued events on the next cycle\r\n                            _flushCallbackQueue[_DYN_PUSH /* @min:%2epush */](callback);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                        var cleared = _clearScheduledTimer();\r\n                        // Now cause all queued events to be sent synchronously\r\n                        _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, 1 /* EventSendType.Synchronous */, sendReason);\r\n                        callback && callback();\r\n                        if (cleared) {\r\n                            // restart the normal event timer if it was cleared\r\n                            _scheduleTimer();\r\n                        }\r\n                    }\r\n                }\r\n                return result;\r\n            };\r\n            _self.setMsaAuthTicket = function (ticket) {\r\n                _httpManager[_DYN_ADD_HEADER /* @min:%2eaddHeader */](STR_MSA_DEVICE_TICKET, ticket);\r\n            };\r\n            _self.setAuthPluginHeader = function (token) {\r\n                _httpManager[_DYN_ADD_HEADER /* @min:%2eaddHeader */](STR_AUTH_WEB_TOKEN, token);\r\n            };\r\n            _self.removeAuthPluginHeader = function () {\r\n                _httpManager.removeHeader(STR_AUTH_WEB_TOKEN);\r\n            };\r\n            _self.hasEvents = _hasEvents;\r\n            _self._setTransmitProfile = function (profileName) {\r\n                if (_currentProfile !== profileName && _profiles[profileName] !== undefined) {\r\n                    _clearScheduledTimer();\r\n                    _currentProfile = profileName;\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            proxyFunctions(_self, function () { return _httpManager; }, [\"addResponseHandler\"]);\r\n            /**\r\n             * Batch and send events currently in the queue for the given latency.\r\n             * @param latency - Latency for which to send events.\r\n             */\r\n            function _sendEventsForLatencyAndAbove(latency, sendType, sendReason) {\r\n                var queued = _queueBatches(latency, sendType, sendReason);\r\n                // Always trigger the request as while the post channel may not have queued additional events, the httpManager may already have waiting events\r\n                _httpManager[_DYN_SEND_QUEUED_REQUESTS /* @min:%2esendQueuedRequests */](sendType, sendReason);\r\n                return queued;\r\n            }\r\n            function _hasEvents() {\r\n                return _queueSize > 0;\r\n            }\r\n            /**\r\n             * Try to schedule the timer after which events will be sent. If there are\r\n             * no events to be sent, or there is already a timer scheduled, or the\r\n             * http manager doesn't have any idle connections this method is no-op.\r\n             */\r\n            function _scheduleTimer() {\r\n                // If we had previously attempted to send requests, but the http manager didn't have any idle connections then the requests where delayed\r\n                // so try and requeue then again now\r\n                if (_delayedBatchSendLatency >= 0 && _queueBatches(_delayedBatchSendLatency, 0 /* EventSendType.Batched */, _delayedBatchReason)) {\r\n                    _httpManager[_DYN_SEND_QUEUED_REQUESTS /* @min:%2esendQueuedRequests */](0 /* EventSendType.Batched */, _delayedBatchReason);\r\n                }\r\n                if (_immediateQueueSize > 0 && !_immediateTimer && !_paused) {\r\n                    // During initialization _profiles enforce that the direct [2] is less than real time [1] timer value\r\n                    // If the immediateTimeout is disabled the immediate events will be sent with Real Time events\r\n                    var immediateTimeOut = _profiles[_currentProfile][2];\r\n                    if (immediateTimeOut >= 0) {\r\n                        _immediateTimer = _createTimer(function () {\r\n                            _immediateTimer = null;\r\n                            // Only try to send direct events\r\n                            _sendEventsForLatencyAndAbove(4 /* EventLatencyValue.Immediate */, 0 /* EventSendType.Batched */, 1 /* SendRequestReason.NormalSchedule */);\r\n                            _scheduleTimer();\r\n                        }, immediateTimeOut);\r\n                    }\r\n                }\r\n                // During initialization the _profiles enforce that the normal [0] is a multiple of the real time [1] timer value\r\n                var timeOut = _profiles[_currentProfile][1];\r\n                if (!_scheduledTimer && !_flushCallbackTimer && timeOut >= 0 && !_paused) {\r\n                    if (_hasEvents()) {\r\n                        _scheduledTimer = _createTimer(function () {\r\n                            _scheduledTimer = null;\r\n                            _sendEventsForLatencyAndAbove(_timerCount === 0 ? 3 /* EventLatencyValue.RealTime */ : 1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, 1 /* SendRequestReason.NormalSchedule */);\r\n                            // Increment the count for next cycle\r\n                            _timerCount++;\r\n                            _timerCount %= 2;\r\n                            _scheduleTimer();\r\n                        }, timeOut);\r\n                    }\r\n                    else {\r\n                        _timerCount = 0;\r\n                    }\r\n                }\r\n            }\r\n            _self[_DYN__BACK_OFF_TRANSMISSI12 /* @min:%2e_backOffTransmission */] = function () {\r\n                if (_currentBackoffCount < MaxBackoffCount) {\r\n                    _currentBackoffCount++;\r\n                    _clearScheduledTimer();\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            _self._clearBackOff = function () {\r\n                if (_currentBackoffCount) {\r\n                    _currentBackoffCount = 0;\r\n                    _clearScheduledTimer();\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            function _initDefaults() {\r\n                _postConfig = null;\r\n                _isTeardownCalled = false;\r\n                _flushCallbackQueue = [];\r\n                _flushCallbackTimer = null;\r\n                _paused = false;\r\n                _immediateQueueSize = 0;\r\n                _immediateQueueSizeLimit = 500;\r\n                _queueSize = 0;\r\n                _queueSizeLimit = MaxEventsLimitInMem;\r\n                _profiles = {};\r\n                _currentProfile = RT_PROFILE;\r\n                _scheduledTimer = null;\r\n                _immediateTimer = null;\r\n                _currentBackoffCount = 0;\r\n                _timerCount = 0;\r\n                _batchQueues = {};\r\n                _autoFlushEventsLimit = 0;\r\n                _unloadHandlersAdded = false;\r\n                // either MaxBatchSize * (1+ Max Connections) or _queueLimit / 6 (where 3 latency Queues [normal, realtime, cost deferred] * 2 [allow half full -- allow for retry])\r\n                _autoFlushBatchLimit = 0;\r\n                _delayedBatchSendLatency = -1;\r\n                _delayedBatchReason = null;\r\n                _optimizeObject = true;\r\n                _isPageUnloadTriggered = false;\r\n                _maxEventSendAttempts = MaxSendAttempts;\r\n                _maxUnloadEventSendAttempts = MaxSyncUnloadSendAttempts;\r\n                _evtNamespace = null;\r\n                _overrideInstrumentationKey = null;\r\n                _disableTelemetry = false;\r\n                _timeoutWrapper = createTimeoutWrapper();\r\n                _httpManager = new HttpManager(MaxNumberEventPerBatch, MaxConnections, MaxRequestRetriesBeforeBackoff, {\r\n                    requeue: _requeueEvents,\r\n                    send: _sendingEvent,\r\n                    sent: _eventsSentEvent,\r\n                    drop: _eventsDropped,\r\n                    rspFail: _eventsResponseFail,\r\n                    oth: _otherEvent\r\n                });\r\n                _initializeProfiles();\r\n                _clearQueues();\r\n                _setAutoLimits();\r\n            }\r\n            function _createTimer(theTimerFunc, timeOut) {\r\n                // If the transmission is backed off make the timer at least 1 sec to allow for back off.\r\n                if (timeOut === 0 && _currentBackoffCount) {\r\n                    timeOut = 1;\r\n                }\r\n                var timerMultiplier = 1000;\r\n                if (_currentBackoffCount) {\r\n                    timerMultiplier = retryPolicyGetMillisToBackoffForRetry(_currentBackoffCount - 1);\r\n                }\r\n                return _timeoutWrapper.set(theTimerFunc, timeOut * timerMultiplier);\r\n            }\r\n            function _clearScheduledTimer() {\r\n                if (_scheduledTimer !== null) {\r\n                    _scheduledTimer.cancel();\r\n                    _scheduledTimer = null;\r\n                    _timerCount = 0;\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            // Try to send all queued events using beacons if available\r\n            function _releaseAllQueues(sendType, sendReason) {\r\n                _clearScheduledTimer();\r\n                // Cancel all flush callbacks\r\n                if (_flushCallbackTimer) {\r\n                    _flushCallbackTimer.cancel();\r\n                    _flushCallbackTimer = null;\r\n                }\r\n                if (!_paused) {\r\n                    // Queue all the remaining requests to be sent. The requests will be sent using HTML5 Beacons if they are available.\r\n                    _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, sendType, sendReason);\r\n                }\r\n            }\r\n            /**\r\n             * Add empty queues for all latencies in the inbound queues map. This is called\r\n             * when Transmission Manager is being flushed. This ensures that new events added\r\n             * after flush are stored separately till we flush the current events.\r\n             */\r\n            function _clearQueues() {\r\n                _batchQueues[4 /* EventLatencyValue.Immediate */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[3 /* EventLatencyValue.RealTime */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[2 /* EventLatencyValue.CostDeferred */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[1 /* EventLatencyValue.Normal */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n            }\r\n            function _getEventBatch(iKey, latency, create) {\r\n                var batchQueue = _batchQueues[latency];\r\n                if (!batchQueue) {\r\n                    latency = 1 /* EventLatencyValue.Normal */;\r\n                    batchQueue = _batchQueues[latency];\r\n                }\r\n                var eventBatch = batchQueue.iKeyMap[iKey];\r\n                if (!eventBatch && create) {\r\n                    eventBatch = EventBatch.create(iKey);\r\n                    batchQueue.batches[_DYN_PUSH /* @min:%2epush */](eventBatch);\r\n                    batchQueue.iKeyMap[iKey] = eventBatch;\r\n                }\r\n                return eventBatch;\r\n            }\r\n            function _performAutoFlush(isAsync, doFlush) {\r\n                // Only perform the auto flush check if the httpManager has an idle connection and we are not in a backoff situation\r\n                if (_httpManager[_DYN_CAN_SEND_REQUEST /* @min:%2ecanSendRequest */]() && !_currentBackoffCount) {\r\n                    if (_autoFlushEventsLimit > 0 && _queueSize > _autoFlushEventsLimit) {\r\n                        // Force flushing\r\n                        doFlush = true;\r\n                    }\r\n                    if (doFlush && _flushCallbackTimer == null) {\r\n                        // Auto flush the queue, adding a callback to avoid the creation of a promise\r\n                        _self.flush(isAsync, function () { }, 20 /* SendRequestReason.MaxQueuedEvents */);\r\n                    }\r\n                }\r\n            }\r\n            function _addEventToProperQueue(event, append) {\r\n                // v8 performance optimization for iterating over the keys\r\n                if (_optimizeObject) {\r\n                    event = optimizeObject(event);\r\n                }\r\n                var latency = event[_DYN_LATENCY /* @min:%2elatency */];\r\n                var eventBatch = _getEventBatch(event[_DYN_I_KEY /* @min:%2eiKey */], latency, true);\r\n                if (eventBatch.addEvent(event)) {\r\n                    if (latency !== 4 /* EventLatencyValue.Immediate */) {\r\n                        _queueSize++;\r\n                        // Check for auto flushing based on total events in the queue, but not for requeued or retry events\r\n                        if (append && event[_DYN_SEND_ATTEMPT /* @min:%2esendAttempt */] === 0) {\r\n                            // Force the flushing of the batch if the batch (specific iKey / latency combination) reaches it's auto flush limit\r\n                            _performAutoFlush(!event.sync, _autoFlushBatchLimit > 0 && eventBatch[_DYN_COUNT /* @min:%2ecount */]() >= _autoFlushBatchLimit);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Direct events don't need auto flushing as they are scheduled (by default) for immediate delivery\r\n                        _immediateQueueSize++;\r\n                    }\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            function _dropEventWithLatencyOrLess(iKey, latency, currentLatency, dropNumber) {\r\n                while (currentLatency <= latency) {\r\n                    var eventBatch = _getEventBatch(iKey, latency, true);\r\n                    if (eventBatch && eventBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                        // Dropped oldest events from lowest possible latency\r\n                        var droppedEvents = eventBatch[_DYN_SPLIT /* @min:%2esplit */](0, dropNumber);\r\n                        var droppedCount = droppedEvents[_DYN_COUNT /* @min:%2ecount */]();\r\n                        if (droppedCount > 0) {\r\n                            if (currentLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                                _immediateQueueSize -= droppedCount;\r\n                            }\r\n                            else {\r\n                                _queueSize -= droppedCount;\r\n                            }\r\n                            _notifyBatchEvents(strEventsDiscarded, [droppedEvents], EventsDiscardedReason.QueueFull);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    currentLatency++;\r\n                }\r\n                // Unable to drop any events -- lets just make sure the queue counts are correct to avoid exhaustion\r\n                _resetQueueCounts();\r\n                return false;\r\n            }\r\n            /**\r\n             * Internal helper to reset the queue counts, used as a backstop to avoid future queue exhaustion errors\r\n             * that might occur because of counting issues.\r\n             */\r\n            function _resetQueueCounts() {\r\n                var immediateQueue = 0;\r\n                var normalQueue = 0;\r\n                var _loop_1 = function (latency) {\r\n                    var batchQueue = _batchQueues[latency];\r\n                    if (batchQueue && batchQueue[_DYN_BATCHES /* @min:%2ebatches */]) {\r\n                        arrForEach(batchQueue[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                            if (latency === 4 /* EventLatencyValue.Immediate */) {\r\n                                immediateQueue += theBatch[_DYN_COUNT /* @min:%2ecount */]();\r\n                            }\r\n                            else {\r\n                                normalQueue += theBatch[_DYN_COUNT /* @min:%2ecount */]();\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                for (var latency = 1 /* EventLatencyValue.Normal */; latency <= 4 /* EventLatencyValue.Immediate */; latency++) {\r\n                    _loop_1(latency);\r\n                }\r\n                _queueSize = normalQueue;\r\n                _immediateQueueSize = immediateQueue;\r\n            }\r\n            function _queueBatches(latency, sendType, sendReason) {\r\n                var eventsQueued = false;\r\n                var isAsync = sendType === 0 /* EventSendType.Batched */;\r\n                // Only queue batches (to the HttpManager) if this is a sync request or the httpManager has an idle connection\r\n                // Thus keeping the events within the PostChannel until the HttpManager has a connection available\r\n                // This is so we can drop \"old\" events if the queue is getting full because we can't successfully send events\r\n                if (!isAsync || _httpManager[_DYN_CAN_SEND_REQUEST /* @min:%2ecanSendRequest */]()) {\r\n                    doPerf(_self.core, function () { return \"PostChannel._queueBatches\"; }, function () {\r\n                        var droppedEvents = [];\r\n                        var latencyToProcess = 4 /* EventLatencyValue.Immediate */;\r\n                        while (latencyToProcess >= latency) {\r\n                            var batchQueue = _batchQueues[latencyToProcess];\r\n                            if (batchQueue && batchQueue.batches && batchQueue.batches[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                                arrForEach(batchQueue[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                                    // Add the batch to the http manager to send the requests\r\n                                    if (!_httpManager.addBatch(theBatch)) {\r\n                                        // The events from this iKey are being dropped (killed)\r\n                                        droppedEvents = droppedEvents[_DYN_CONCAT /* @min:%2econcat */](theBatch[_DYN_EVENTS /* @min:%2eevents */]());\r\n                                    }\r\n                                    else {\r\n                                        eventsQueued = eventsQueued || (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0);\r\n                                    }\r\n                                    if (latencyToProcess === 4 /* EventLatencyValue.Immediate */) {\r\n                                        _immediateQueueSize -= theBatch[_DYN_COUNT /* @min:%2ecount */]();\r\n                                    }\r\n                                    else {\r\n                                        _queueSize -= theBatch[_DYN_COUNT /* @min:%2ecount */]();\r\n                                    }\r\n                                });\r\n                                // Remove all batches from this Queue\r\n                                batchQueue[_DYN_BATCHES /* @min:%2ebatches */] = [];\r\n                                batchQueue.iKeyMap = {};\r\n                            }\r\n                            latencyToProcess--;\r\n                        }\r\n                        if (droppedEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                            _notifyEvents(strEventsDiscarded, droppedEvents, EventsDiscardedReason.KillSwitch);\r\n                        }\r\n                        if (eventsQueued && _delayedBatchSendLatency >= latency) {\r\n                            // We have queued events at the same level as the delayed values so clear the setting\r\n                            _delayedBatchSendLatency = -1;\r\n                            _delayedBatchReason = 0 /* SendRequestReason.Undefined */;\r\n                        }\r\n                    }, function () { return ({ latency: latency, sendType: sendType, sendReason: sendReason }); }, !isAsync);\r\n                }\r\n                else {\r\n                    // remember the min latency so that we can re-trigger later\r\n                    _delayedBatchSendLatency = _delayedBatchSendLatency >= 0 ? Math.min(_delayedBatchSendLatency, latency) : latency;\r\n                    _delayedBatchReason = Math.max(_delayedBatchReason, sendReason);\r\n                }\r\n                return eventsQueued;\r\n            }\r\n            /**\r\n             * This is the callback method is called as part of the manual flushing process.\r\n             * @param callback\r\n             * @param sendReason\r\n             */\r\n            function _flushImpl(callback, sendReason) {\r\n                // Add any additional queued events and cause all queued events to be sent asynchronously\r\n                _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, sendReason);\r\n                // All events (should) have been queue -- lets just make sure the queue counts are correct to avoid queue exhaustion (previous bug #9685112)\r\n                _resetQueueCounts();\r\n                _waitForIdleManager(function () {\r\n                    // Only called AFTER the httpManager does not have any outstanding requests\r\n                    if (callback) {\r\n                        callback();\r\n                    }\r\n                    if (_flushCallbackQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        _flushCallbackTimer = _createTimer(function () {\r\n                            _flushCallbackTimer = null;\r\n                            _flushImpl(_flushCallbackQueue.shift(), sendReason);\r\n                        }, 0);\r\n                    }\r\n                    else {\r\n                        // No more flush requests\r\n                        _flushCallbackTimer = null;\r\n                        // Restart the normal timer schedule\r\n                        _scheduleTimer();\r\n                    }\r\n                });\r\n            }\r\n            function _waitForIdleManager(callback) {\r\n                if (_httpManager[_DYN_IS_COMPLETELY_IDLE /* @min:%2eisCompletelyIdle */]()) {\r\n                    callback();\r\n                }\r\n                else {\r\n                    _flushCallbackTimer = _createTimer(function () {\r\n                        _flushCallbackTimer = null;\r\n                        _waitForIdleManager(callback);\r\n                    }, FlushCheckTimer);\r\n                }\r\n            }\r\n            /**\r\n             * Resets the transmit profiles to the default profiles of Real Time, Near Real Time\r\n             * and Best Effort. This removes all the custom profiles that were loaded.\r\n             */\r\n            function _resetTransmitProfiles() {\r\n                _clearScheduledTimer();\r\n                _initializeProfiles();\r\n                _currentProfile = RT_PROFILE;\r\n                _scheduleTimer();\r\n            }\r\n            function _initializeProfiles() {\r\n                _profiles = {};\r\n                _profiles[RT_PROFILE] = [2, 1, 0];\r\n                _profiles[NRT_PROFILE] = [6, 3, 0];\r\n                _profiles[BE_PROFILE] = [18, 9, 0];\r\n            }\r\n            /**\r\n             * The notification handler for requeue events\r\n             * @ignore\r\n             */\r\n            function _requeueEvents(batches, reason) {\r\n                var droppedEvents = [];\r\n                var maxSendAttempts = _maxEventSendAttempts;\r\n                if (_isPageUnloadTriggered) {\r\n                    // If a page unlaod has been triggered reduce the number of times we try to \"retry\"\r\n                    maxSendAttempts = _maxUnloadEventSendAttempts;\r\n                }\r\n                arrForEach(batches, function (theBatch) {\r\n                    if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                        arrForEach(theBatch[_DYN_EVENTS /* @min:%2eevents */](), function (theEvent) {\r\n                            if (theEvent) {\r\n                                // Check if the request being added back is for a sync event in which case mark it no longer a sync event\r\n                                if (theEvent[_DYN_SYNC /* @min:%2esync */]) {\r\n                                    theEvent[_DYN_LATENCY /* @min:%2elatency */] = 4 /* EventLatencyValue.Immediate */;\r\n                                    theEvent[_DYN_SYNC /* @min:%2esync */] = false;\r\n                                }\r\n                                if (theEvent[_DYN_SEND_ATTEMPT /* @min:%2esendAttempt */] < maxSendAttempts) {\r\n                                    // Reset the event timings\r\n                                    setProcessTelemetryTimings(theEvent, _self[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n                                    _addEventToQueues(theEvent, false);\r\n                                }\r\n                                else {\r\n                                    droppedEvents[_DYN_PUSH /* @min:%2epush */](theEvent);\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n                if (droppedEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _notifyEvents(strEventsDiscarded, droppedEvents, EventsDiscardedReason.NonRetryableStatus);\r\n                }\r\n                if (_isPageUnloadTriggered) {\r\n                    // Unload event has been received so we need to try and flush new events\r\n                    _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                }\r\n            }\r\n            function _callNotification(evtName, theArgs) {\r\n                var manager = (_notificationManager || {});\r\n                var notifyFunc = manager[evtName];\r\n                if (notifyFunc) {\r\n                    try {\r\n                        notifyFunc.apply(manager, theArgs);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(_self.diagLog(), 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, evtName + \" notification failed: \" + e);\r\n                    }\r\n                }\r\n            }\r\n            function _notifyEvents(evtName, theEvents) {\r\n                var extraArgs = [];\r\n                for (var _i = 2; _i < arguments.length; _i++) {\r\n                    extraArgs[_i - 2] = arguments[_i];\r\n                }\r\n                if (theEvents && theEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _callNotification(evtName, [theEvents][_DYN_CONCAT /* @min:%2econcat */](extraArgs));\r\n                }\r\n            }\r\n            function _notifyBatchEvents(evtName, batches) {\r\n                var extraArgs = [];\r\n                for (var _i = 2; _i < arguments.length; _i++) {\r\n                    extraArgs[_i - 2] = arguments[_i];\r\n                }\r\n                if (batches && batches[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    arrForEach(batches, function (theBatch) {\r\n                        if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                            _callNotification(evtName, [theBatch.events()][_DYN_CONCAT /* @min:%2econcat */](extraArgs));\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            /**\r\n             * The notification handler for when batches are about to be sent\r\n             * @ignore\r\n             */\r\n            function _sendingEvent(batches, reason, isSyncRequest) {\r\n                if (batches && batches[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _callNotification(\"eventsSendRequest\", [(reason >= 1000 /* EventBatchNotificationReason.SendingUndefined */ && reason <= 1999 /* EventBatchNotificationReason.SendingEventMax */ ?\r\n                            reason - 1000 /* EventBatchNotificationReason.SendingUndefined */ :\r\n                            0 /* SendRequestReason.Undefined */), isSyncRequest !== true]);\r\n                }\r\n            }\r\n            /**\r\n             * This event represents that a batch of events have been successfully sent and a response received\r\n             * @param batches The notification handler for when the batches have been successfully sent\r\n             * @param reason For this event the reason will always be EventBatchNotificationReason.Complete\r\n             */\r\n            function _eventsSentEvent(batches, reason) {\r\n                _notifyBatchEvents(\"eventsSent\", batches, reason);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _eventsDropped(batches, reason) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, (reason >= 8000 /* EventBatchNotificationReason.EventsDropped */ && reason <= 8999 /* EventBatchNotificationReason.EventsDroppedMax */ ?\r\n                    reason - 8000 /* EventBatchNotificationReason.EventsDropped */ :\r\n                    EventsDiscardedReason.Unknown));\r\n            }\r\n            function _eventsResponseFail(batches) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, EventsDiscardedReason.NonRetryableStatus);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _otherEvent(batches, reason) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, EventsDiscardedReason.Unknown);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _setAutoLimits() {\r\n                if (!_disableAutoBatchFlushLimit) {\r\n                    _autoFlushBatchLimit = Math.max(MaxNumberEventPerBatch * (MaxConnections + 1), _queueSizeLimit / 6);\r\n                }\r\n                else {\r\n                    _autoFlushBatchLimit = 0;\r\n                }\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for PostChannel.prototype.initialize.\r\n// Removed Stub for PostChannel.prototype.processTelemetry.\r\n// Removed Stub for PostChannel.prototype.setEventQueueLimits.\r\n// Removed Stub for PostChannel.prototype.pause.\r\n// Removed Stub for PostChannel.prototype.resume.\r\n// Removed Stub for PostChannel.prototype.addResponseHandler.\r\n// Removed Stub for PostChannel.prototype.flush.\r\n// Removed Stub for PostChannel.prototype.setMsaAuthTicket.\r\n// Removed Stub for PostChannel.prototype.setAuthPluginHeader.\r\n// Removed Stub for PostChannel.prototype.removeAuthPluginHeader.\r\n// Removed Stub for PostChannel.prototype.hasEvents.\r\n// Removed Stub for PostChannel.prototype._loadTransmitProfiles.\r\n// Removed Stub for PostChannel.prototype._setTransmitProfile.\r\n// Removed Stub for PostChannel.prototype._backOffTransmission.\r\n// Removed Stub for PostChannel.prototype._clearBackOff.\r\n// Removed Stub for PostChannel.prototype.getOfflineSupport.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    PostChannel.__ieDyn=1;\n\n    return PostChannel;\r\n}(BaseTelemetryPlugin));\r\nexport { PostChannel };\r\n//# sourceMappingURL=PostChannel.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrAppend, arrForEach, dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nvar _maxHooks;\r\nvar _hookAddMonitor;\r\n/**\r\n * Test hook for setting the maximum number of unload hooks and calling a monitor function when the hooks are added or removed\r\n * This allows for automatic test failure when the maximum number of unload hooks is exceeded\r\n * @param maxHooks - The maximum number of unload hooks\r\n * @param addMonitor - The monitor function to call when hooks are added or removed\r\n */\r\nexport function _testHookMaxUnloadHooksCb(maxHooks, addMonitor) {\r\n    _maxHooks = maxHooks;\r\n    _hookAddMonitor = addMonitor;\r\n}\r\n/**\r\n * Create a IUnloadHookContainer which can be used to remember unload hook functions to be executed during the component unloading\r\n * process.\r\n * @returns A new IUnloadHookContainer instance\r\n */\r\nexport function createUnloadHookContainer() {\r\n    var _hooks = [];\r\n    function _doUnload(logger) {\r\n        var oldHooks = _hooks;\r\n        _hooks = [];\r\n        // Remove all registered unload hooks\r\n        arrForEach(oldHooks, function (fn) {\r\n            // allow either rm or remove callback function\r\n            try {\r\n                (fn.rm || fn.remove).call(fn);\r\n            }\r\n            catch (e) {\r\n                _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unloading:\" + dumpObj(e));\r\n            }\r\n        });\r\n        if (_maxHooks && oldHooks[_DYN_LENGTH /* @min:%2elength */] > _maxHooks) {\r\n            _hookAddMonitor ? _hookAddMonitor(\"doUnload\", oldHooks) : _throwInternal(null, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.MaxUnloadHookExceeded */, \"Max unload hooks exceeded. An excessive number of unload hooks has been detected.\");\r\n        }\r\n    }\r\n    function _addHook(hooks) {\r\n        if (hooks) {\r\n            arrAppend(_hooks, hooks);\r\n            if (_maxHooks && _hooks[_DYN_LENGTH /* @min:%2elength */] > _maxHooks) {\r\n                _hookAddMonitor ? _hookAddMonitor(\"Add\", _hooks) : _throwInternal(null, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.MaxUnloadHookExceeded */, \"Max unload hooks exceeded. An excessive number of unload hooks has been detected.\");\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        run: _doUnload,\r\n        add: _addHook\r\n    };\r\n}\r\n//# sourceMappingURL=UnloadHookContainer.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { isArray, isPlainObject, objForEachKey, symbolFor, throwTypeError } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\n// Using Symbol.for so that if the same symbol was already created it would be returned\r\n// To handle multiple instances using potentially different versions we are not using\r\n// createUniqueNamespace()\r\nexport var CFG_HANDLER_LINK = symbolFor(\"[[ai_dynCfg_1]]\");\r\n/**\r\n * @internal\r\n * @ignore\r\n * The symbol to tag objects / arrays with if they should not be converted\r\n */\r\nvar BLOCK_DYNAMIC = symbolFor(\"[[ai_blkDynCfg_1]]\");\r\n/**\r\n * @internal\r\n * @ignore\r\n * The symbol to tag objects to indicate that when included into the configuration that\r\n * they should be converted into a trackable dynamic object.\r\n */\r\nvar FORCE_DYNAMIC = symbolFor(\"[[ai_frcDynCfg_1]]\");\r\nexport function _cfgDeepCopy(source) {\r\n    if (source) {\r\n        var target_1;\r\n        if (isArray(source)) {\r\n            target_1 = [];\r\n            target_1[_DYN_LENGTH /* @min:%2elength */] = source[_DYN_LENGTH /* @min:%2elength */];\r\n        }\r\n        else if (isPlainObject(source)) {\r\n            target_1 = {};\r\n        }\r\n        if (target_1) {\r\n            // Copying index values by property name as the extensionConfig can be an array or object\r\n            objForEachKey(source, function (key, value) {\r\n                // Perform a deep copy of the object\r\n                target_1[key] = _cfgDeepCopy(value);\r\n            });\r\n            return target_1;\r\n        }\r\n    }\r\n    return source;\r\n}\r\n/**\r\n * @internal\r\n * Get the dynamic config handler if the value is already dynamic\r\n * @param value\r\n * @returns\r\n */\r\nexport function getDynamicConfigHandler(value) {\r\n    if (value) {\r\n        var handler = value[CFG_HANDLER_LINK] || value;\r\n        if (handler.cfg && (handler.cfg === value || handler.cfg[CFG_HANDLER_LINK] === handler)) {\r\n            return handler;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Mark the provided value so that if it's included into the configuration it will NOT have\r\n * its properties converted into a dynamic (reactive) object. If the object is not a plain object\r\n * or an array (ie. a class) this function has not affect as only Objects and Arrays are converted\r\n * into dynamic objects in the dynamic configuration.\r\n *\r\n * When you have tagged a value as both {@link forceDynamicConversion} and blocked force will take precedence.\r\n *\r\n * You should only need to use this function, if you are creating dynamic \"classes\" from objects\r\n * which confirm to the require interface. A common case for this is during unit testing where it's\r\n * easier to create mock extensions.\r\n *\r\n * If `value` is falsy (null / undefined / 0 / empty string etc) it will not be tagged and\r\n * if there is an exception adding the property to the value (because its frozen etc) the\r\n * exception will be swallowed\r\n *\r\n * @example\r\n * ```ts\r\n * // This is a valid \"extension\", but it is technically an object\r\n * // So when included in the config.extensions it WILL be cloned and then\r\n * // converted into a dynamic object, where all of its properties will become\r\n * // get/set object properties and will be tracked. While this WILL still\r\n * // function, when attempt to use a mocking framework on top of this the\r\n * // functions are now technically get accessors which return a function\r\n * // and this can cause some mocking frameworks to fail.\r\n * let mockChannel = {\r\n *      pause: () => { },\r\n*      resume: () => { },\r\n*      teardown: () => { },\r\n*      flush: (async: any, callBack: any) => { },\r\n*      processTelemetry: (env: any) => { },\r\n*      setNextPlugin: (next: any) => { },\r\n*      initialize: (config: any, core: any, extensions: any) => { },\r\n*      identifier: \"testChannel\",\r\n*      priority: 1003\r\n* };\r\n * ```\r\n * @param value - The object that you want to block from being converted into a\r\n * trackable dynamic object\r\n * @returns The original value\r\n */\r\nexport function blockDynamicConversion(value) {\r\n    if (value && (isPlainObject(value) || isArray(value))) {\r\n        try {\r\n            value[BLOCK_DYNAMIC] = true;\r\n        }\r\n        catch (e) {\r\n            // Don't throw for this case as it's an ask only\r\n        }\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * This is the reverse case of {@link blockDynamicConversion} in that this will tag an\r\n * object to indicate that it should always be converted into a dynamic trackable object\r\n * even when not an object or array. So all properties of this object will become\r\n * get / set accessor functions.\r\n *\r\n * When you have tagged a value as both {@link forceDynamicConversion} and blocked force will take precedence.\r\n *\r\n * If `value` is falsy (null / undefined / 0 / empty string etc) it will not be tagged and\r\n * if there is an exception adding the property to the value (because its frozen etc) the\r\n * exception will be swallowed.\r\n * @param value - The object that should be tagged and converted if included into a dynamic\r\n * configuration.\r\n * @returns The original value\r\n */\r\nexport function forceDynamicConversion(value) {\r\n    if (value) {\r\n        try {\r\n            value[FORCE_DYNAMIC] = true;\r\n        }\r\n        catch (e) {\r\n            // Don't throw for this case as it's an ask only\r\n        }\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * @internal\r\n * @ignore\r\n * Helper function to check whether an object can or should be converted into a dynamic\r\n * object.\r\n * @param value - The object to check whether it should be converted\r\n * @returns `true` if the value should be converted otherwise `false`.\r\n */\r\nexport function _canMakeDynamic(getFunc, state, value) {\r\n    var result = false;\r\n    // Object must exist and be truthy\r\n    if (value && !getFunc[state.blkVal]) {\r\n        // Tagged as always convert\r\n        result = value[FORCE_DYNAMIC];\r\n        // Check that it's not explicitly tagged as blocked\r\n        if (!result && !value[BLOCK_DYNAMIC]) {\r\n            // Only convert plain objects or arrays by default\r\n            result = isPlainObject(value) || isArray(value);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Throws an invalid access exception\r\n * @param message - The message to include in the exception\r\n */\r\nexport function throwInvalidAccess(message) {\r\n    throwTypeError(\"InvalidAccess:\" + message);\r\n}\r\n//# sourceMappingURL=DynamicSupport.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport { ClientCapability, ITypeScriptServiceClient, ServerType } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from './util/dependentRegistration';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { documentationToMarkdown } from './util/textRendering';\nimport * as typeConverters from '../typeConverters';\nimport FileConfigurationManager from './fileConfigurationManager';\nimport { API } from '../tsServer/api';\n\n\nclass TypeScriptHoverProvider implements vscode.HoverProvider {\n\tprivate lastHoverAndLevel: [vscode.Hover, number] | undefined;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager,\n\t) { }\n\n\tpublic async provideHover(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken,\n\t\tcontext?: vscode.HoverContext,\n\t): Promise<vscode.VerboseHover | undefined> {\n\t\tconst filepath = this.client.toOpenTsFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tlet verbosityLevel: number | undefined;\n\t\tif (this.client.apiVersion.gte(API.v590)) {\n\t\t\tverbosityLevel = Math.max(0, this.getPreviousLevel(context?.previousHover) + (context?.verbosityDelta ?? 0));\n\t\t}\n\t\tconst args = { ...typeConverters.Position.toFileLocationRequestArgs(filepath, position), verbosityLevel };\n\n\t\tconst response = await this.client.interruptGetErr(async () => {\n\t\t\tawait this.fileConfigurationManager.ensureConfigurationForDocument(document, token);\n\n\t\t\treturn this.client.execute('quickinfo', args, token);\n\t\t});\n\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst contents = this.getContents(document.uri, response.body, response._serverType);\n\t\tconst range = typeConverters.Range.fromTextSpan(response.body);\n\t\tconst hover = verbosityLevel !== undefined ?\n\t\t\tnew vscode.VerboseHover(\n\t\t\t\tcontents,\n\t\t\t\trange,\n\t\t\t\t/*canIncreaseVerbosity*/ response.body.canIncreaseVerbosityLevel,\n\t\t\t\t/*canDecreaseVerbosity*/ verbosityLevel !== 0\n\t\t\t) : new vscode.Hover(\n\t\t\t\tcontents,\n\t\t\t\trange\n\t\t\t);\n\n\t\tif (verbosityLevel !== undefined) {\n\t\t\tthis.lastHoverAndLevel = [hover, verbosityLevel];\n\t\t}\n\t\treturn hover;\n\t}\n\n\tprivate getContents(\n\t\tresource: vscode.Uri,\n\t\tdata: Proto.QuickInfoResponseBody,\n\t\tsource: ServerType | undefined,\n\t) {\n\t\tconst parts: vscode.MarkdownString[] = [];\n\n\t\tif (data.displayString) {\n\t\t\tconst displayParts: string[] = [];\n\n\t\t\tif (source === ServerType.Syntax && this.client.hasCapabilityForResource(resource, ClientCapability.Semantic)) {\n\t\t\t\tdisplayParts.push(\n\t\t\t\t\tvscode.l10n.t({\n\t\t\t\t\t\tmessage: \"(loading...)\",\n\t\t\t\t\t\tcomment: ['Prefix displayed for hover entries while the server is still loading']\n\t\t\t\t\t}));\n\t\t\t}\n\n\t\t\tdisplayParts.push(data.displayString);\n\t\t\tparts.push(new vscode.MarkdownString().appendCodeblock(displayParts.join(' '), 'typescript'));\n\t\t}\n\t\tconst md = documentationToMarkdown(data.documentation, data.tags, this.client, resource);\n\t\tparts.push(md);\n\t\treturn parts;\n\t}\n\n\tprivate getPreviousLevel(previousHover: vscode.Hover | undefined): number {\n\t\tif (previousHover && this.lastHoverAndLevel && this.lastHoverAndLevel[0] === previousHover) {\n\t\t\treturn this.lastHoverAndLevel[1];\n\t\t}\n\t\treturn 0;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n\tfileConfigurationManager: FileConfigurationManager,\n): vscode.Disposable {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerHoverProvider(selector.syntax,\n\t\t\tnew TypeScriptHoverProvider(client, fileConfigurationManager));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { PluginManager } from './tsServer/plugins';\n\nclass ApiV0 {\n\tpublic constructor(\n\t\tpublic readonly onCompletionAccepted: vscode.Event<vscode.CompletionItem & { metadata?: any }>,\n\t\tprivate readonly _pluginManager: PluginManager,\n\t) { }\n\n\tconfigurePlugin(pluginId: string, configuration: {}): void {\n\t\tthis._pluginManager.setConfiguration(pluginId, configuration);\n\t}\n}\n\nexport interface Api {\n\tgetAPI(version: 0): ApiV0 | undefined;\n}\n\nexport function getExtensionApi(\n\tonCompletionAccepted: vscode.Event<vscode.CompletionItem>,\n\tpluginManager: PluginManager,\n): Api {\n\treturn {\n\t\tgetAPI(version) {\n\t\t\tif (version === 0) {\n\t\t\t\treturn new ApiV0(onCompletionAccepted, pluginManager);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t};\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { Disposable } from '../utils/dispose';\n\n\nconst typingsInstallTimeout = 30 * 1000;\n\nexport default class TypingsStatus extends Disposable {\n\tprivate readonly _acquiringTypings = new Map<number, NodeJS.Timeout>();\n\tprivate readonly _client: ITypeScriptServiceClient;\n\n\tconstructor(client: ITypeScriptServiceClient) {\n\t\tsuper();\n\t\tthis._client = client;\n\n\t\tthis._register(\n\t\t\tthis._client.onDidBeginInstallTypings(event => this.onBeginInstallTypings(event.eventId)));\n\n\t\tthis._register(\n\t\t\tthis._client.onDidEndInstallTypings(event => this.onEndInstallTypings(event.eventId)));\n\t}\n\n\tpublic override dispose(): void {\n\t\tsuper.dispose();\n\n\t\tfor (const timeout of this._acquiringTypings.values()) {\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t}\n\n\tpublic get isAcquiringTypings(): boolean {\n\t\treturn Object.keys(this._acquiringTypings).length > 0;\n\t}\n\n\tprivate onBeginInstallTypings(eventId: number): void {\n\t\tif (this._acquiringTypings.has(eventId)) {\n\t\t\treturn;\n\t\t}\n\t\tthis._acquiringTypings.set(eventId, setTimeout(() => {\n\t\t\tthis.onEndInstallTypings(eventId);\n\t\t}, typingsInstallTimeout));\n\t}\n\n\tprivate onEndInstallTypings(eventId: number): void {\n\t\tconst timer = this._acquiringTypings.get(eventId);\n\t\tif (timer) {\n\t\t\tclearTimeout(timer);\n\t\t}\n\t\tthis._acquiringTypings.delete(eventId);\n\t}\n}\n\nexport class AtaProgressReporter extends Disposable {\n\n\tprivate readonly _promises = new Map<number, Function>();\n\n\tconstructor(client: ITypeScriptServiceClient) {\n\t\tsuper();\n\t\tthis._register(client.onDidBeginInstallTypings(e => this._onBegin(e.eventId)));\n\t\tthis._register(client.onDidEndInstallTypings(e => this._onEndOrTimeout(e.eventId)));\n\t\tthis._register(client.onTypesInstallerInitializationFailed(_ => this.onTypesInstallerInitializationFailed()));\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._promises.forEach(value => value());\n\t}\n\n\tprivate _onBegin(eventId: number): void {\n\t\tconst handle = setTimeout(() => this._onEndOrTimeout(eventId), typingsInstallTimeout);\n\t\tconst promise = new Promise<void>(resolve => {\n\t\t\tthis._promises.set(eventId, () => {\n\t\t\t\tclearTimeout(handle);\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\n\t\tvscode.window.withProgress({\n\t\t\tlocation: vscode.ProgressLocation.Window,\n\t\t\ttitle: vscode.l10n.t(\"Fetching data for better TypeScript IntelliSense\")\n\t\t}, () => promise);\n\t}\n\n\tprivate _onEndOrTimeout(eventId: number): void {\n\t\tconst resolve = this._promises.get(eventId);\n\t\tif (resolve) {\n\t\t\tthis._promises.delete(eventId);\n\t\t\tresolve();\n\t\t}\n\t}\n\n\tprivate async onTypesInstallerInitializationFailed() {\n\t\tconst config = vscode.workspace.getConfiguration('typescript');\n\n\t\tif (config.get<boolean>('check.npmIsInstalled', true)) {\n\t\t\tconst dontShowAgain: vscode.MessageItem = {\n\t\t\t\ttitle: vscode.l10n.t(\"Don't Show Again\"),\n\t\t\t};\n\t\t\tconst selected = await vscode.window.showWarningMessage(\n\t\t\t\tvscode.l10n.t(\n\t\t\t\t\t\"Could not install typings files for JavaScript language features. Please ensure that NPM is installed, or configure 'typescript.npm' in your user settings. Alternatively, check the [documentation]({0}) to learn more.\",\n\t\t\t\t\t'https://go.microsoft.com/fwlink/?linkid=847635'\n\t\t\t\t),\n\t\t\t\tdontShowAgain);\n\n\t\t\tif (selected === dontShowAgain) {\n\t\t\t\tconfig.update('check.npmIsInstalled', false, true);\n\t\t\t}\n\t\t}\n\t}\n}\n","import { bytes_literal } from './snippets/wasm-streams-42e57edbcd526312/inline0.js';\n\nlet wasm;\n\nconst heap = new Array(128).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nfunction getObject(idx) { return heap[idx]; }\n\nlet heap_next = heap.length;\n\nfunction dropObject(idx) {\n    if (idx < 132) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nconst cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachedUint8Memory0 = null;\n\nfunction getUint8Memory0() {\n    if (cachedUint8Memory0 === null || cachedUint8Memory0.byteLength === 0) {\n        cachedUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nconst cachedTextEncoder = new TextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length);\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len);\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3);\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nfunction isLikeNone(x) {\n    return x === undefined || x === null;\n}\n\nlet cachedInt32Memory0 = null;\n\nfunction getInt32Memory0() {\n    if (cachedInt32Memory0 === null || cachedInt32Memory0.byteLength === 0) {\n        cachedInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachedInt32Memory0;\n}\n\nlet cachedFloat64Memory0 = null;\n\nfunction getFloat64Memory0() {\n    if (cachedFloat64Memory0 === null || cachedFloat64Memory0.byteLength === 0) {\n        cachedFloat64Memory0 = new Float64Array(wasm.memory.buffer);\n    }\n    return cachedFloat64Memory0;\n}\n\nlet cachedBigInt64Memory0 = null;\n\nfunction getBigInt64Memory0() {\n    if (cachedBigInt64Memory0 === null || cachedBigInt64Memory0.byteLength === 0) {\n        cachedBigInt64Memory0 = new BigInt64Array(wasm.memory.buffer);\n    }\n    return cachedBigInt64Memory0;\n}\n\nfunction debugString(val) {\n    // primitive types\n    const type = typeof val;\n    if (type == 'number' || type == 'boolean' || val == null) {\n        return  `${val}`;\n    }\n    if (type == 'string') {\n        return `\"${val}\"`;\n    }\n    if (type == 'symbol') {\n        const description = val.description;\n        if (description == null) {\n            return 'Symbol';\n        } else {\n            return `Symbol(${description})`;\n        }\n    }\n    if (type == 'function') {\n        const name = val.name;\n        if (typeof name == 'string' && name.length > 0) {\n            return `Function(${name})`;\n        } else {\n            return 'Function';\n        }\n    }\n    // objects\n    if (Array.isArray(val)) {\n        const length = val.length;\n        let debug = '[';\n        if (length > 0) {\n            debug += debugString(val[0]);\n        }\n        for(let i = 1; i < length; i++) {\n            debug += ', ' + debugString(val[i]);\n        }\n        debug += ']';\n        return debug;\n    }\n    // Test for built-in\n    const builtInMatches = /\\[object ([^\\]]+)\\]/.exec(toString.call(val));\n    let className;\n    if (builtInMatches.length > 1) {\n        className = builtInMatches[1];\n    } else {\n        // Failed to match the standard '[object ClassName]'\n        return toString.call(val);\n    }\n    if (className == 'Object') {\n        // we're a user defined class or Object\n        // JSON.stringify avoids problems with cycles, and is generally much\n        // easier than looping through ownProperties of `val`.\n        try {\n            return 'Object(' + JSON.stringify(val) + ')';\n        } catch (_) {\n            return 'Object';\n        }\n    }\n    // errors\n    if (val instanceof Error) {\n        return `${val.name}: ${val.message}\\n${val.stack}`;\n    }\n    // TODO we could test for more things here, like `Set`s and `Map`s.\n    return className;\n}\n\nfunction makeMutClosure(arg0, arg1, dtor, f) {\n    const state = { a: arg0, b: arg1, cnt: 1, dtor };\n    const real = (...args) => {\n        // First up with a closure we increment the internal reference\n        // count. This ensures that the Rust closure environment won't\n        // be deallocated while we're invoking it.\n        state.cnt++;\n        const a = state.a;\n        state.a = 0;\n        try {\n            return f(a, state.b, ...args);\n        } finally {\n            if (--state.cnt === 0) {\n                wasm.__wbindgen_export_2.get(state.dtor)(a, state.b);\n\n            } else {\n                state.a = a;\n            }\n        }\n    };\n    real.original = state;\n\n    return real;\n}\nfunction __wbg_adapter_50(arg0, arg1, arg2) {\n    wasm.__wbindgen_export_3(arg0, arg1, addHeapObject(arg2));\n}\n\nfunction __wbg_adapter_53(arg0, arg1, arg2) {\n    wasm.__wbindgen_export_4(arg0, arg1, addHeapObject(arg2));\n}\n\n/**\n* Resolves a dependency tree using `spec` as the root package.\n* @param {string} spec\n* @param {any} opts\n* @returns {Promise<NodeMaintainer>}\n*/\nexport function resolveSpec(spec, opts) {\n    const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.resolveSpec(ptr0, len0, addHeapObject(opts));\n    return takeObject(ret);\n}\n\n/**\n* Returns a dependency tree using a `package.json` manifest as the root\n* package.\n* @param {PackageJson} manifest\n* @param {any} opts\n* @returns {Promise<NodeMaintainer>}\n*/\nexport function resolveManifest(manifest, opts) {\n    const ret = wasm.resolveManifest(addHeapObject(manifest), addHeapObject(opts));\n    return takeObject(ret);\n}\n\n/**\n* Resolves a `Packument` for the given package `spec`.\n*\n* This uses default `Nassun` options and does not cache the result.\n* To configure `Nassun`, and/or enable more efficient caching/reuse,\n* look at `Package#packument` instead.\n* @param {string} spec\n* @param {any} opts\n* @returns {Promise<any>}\n*/\nexport function packument(spec, opts) {\n    const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.packument(ptr0, len0, addHeapObject(opts));\n    return takeObject(ret);\n}\n\n/**\n* Resolves a partial (\"corgi\") version of the `Packument` for the given\n* package `spec`.\n*\n* This uses default `Nassun` options and does not cache the result.\n* To configure `Nassun`, and/or enable more efficient caching/reuse,\n* look at `Package#packument` instead.\n* @param {string} spec\n* @param {any} opts\n* @returns {Promise<any>}\n*/\nexport function corgiPackument(spec, opts) {\n    const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.corgiPackument(ptr0, len0, addHeapObject(opts));\n    return takeObject(ret);\n}\n\n/**\n* Resolves version metadata from the given package `spec`, using the default\n* resolution algorithm.\n*\n* This uses default `Nassun` options and does not cache the result. To\n* configure `Nassun`, and/or enable more efficient caching/reuse, look at\n* `Package#metadata` instead.\n* @param {string} spec\n* @param {any} opts\n* @returns {Promise<any>}\n*/\nexport function metadata(spec, opts) {\n    const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.metadata(ptr0, len0, addHeapObject(opts));\n    return takeObject(ret);\n}\n\n/**\n* Resolves a partial (\"corgi\") version of the version metadata from the\n* given package `spec`, using the default resolution algorithm.\n*\n* This uses default `Nassun` settings and does not cache the result. To\n* configure `Nassun`, and/or enable more efficient caching/reuse, look at\n* `Package#metadata` instead.\n* @param {string} spec\n* @param {any} opts\n* @returns {Promise<any>}\n*/\nexport function corgiMetadata(spec, opts) {\n    const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.corgiMetadata(ptr0, len0, addHeapObject(opts));\n    return takeObject(ret);\n}\n\n/**\n* Resolves a tarball from the given package `spec`, using the\n* default resolution algorithm. This tarball will have its data checked\n* if the package metadata fetched includes integrity information.\n*\n* This uses default `Nassun` settings and does not cache the result.\n* To configure `Nassun`, and/or enable more efficient caching/reuse,\n* look at `Package#tarball` instead.\n* @param {string} spec\n* @param {any} opts\n* @returns {Promise<ReadableStream>}\n*/\nexport function tarball(spec, opts) {\n    const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.tarball(ptr0, len0, addHeapObject(opts));\n    return takeObject(ret);\n}\n\n/**\n* Resolves to a `ReadableStream<Entry>` of entries from the given package\n* `spec`, using the default resolution algorithm. The source tarball will\n* have its data checked if the package metadata fetched includes integrity\n* information.\n*\n* This uses default `Nassun` settings and does not cache the result. To\n* configure `Nassun`, and/or enable more efficient caching/reuse, look at\n* `Package#entries` instead.\n* @param {string} spec\n* @param {any} opts\n* @returns {Promise<ReadableStream>}\n*/\nexport function entries(spec, opts) {\n    const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.entries(ptr0, len0, addHeapObject(opts));\n    return takeObject(ret);\n}\n\nfunction handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        wasm.__wbindgen_export_6(addHeapObject(e));\n    }\n}\nfunction __wbg_adapter_224(arg0, arg1, arg2, arg3) {\n    wasm.__wbindgen_export_7(arg0, arg1, addHeapObject(arg2), addHeapObject(arg3));\n}\n\n/**\n*/\nexport class IntoUnderlyingByteSource {\n\n    static __wrap(ptr) {\n        const obj = Object.create(IntoUnderlyingByteSource.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_intounderlyingbytesource_free(ptr);\n    }\n    /**\n    * @returns {any}\n    */\n    get type() {\n        const ret = wasm.intounderlyingbytesource_type(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {number}\n    */\n    get autoAllocateChunkSize() {\n        const ret = wasm.intounderlyingbytesource_autoAllocateChunkSize(this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @param {any} controller\n    */\n    start(controller) {\n        wasm.intounderlyingbytesource_start(this.ptr, addHeapObject(controller));\n    }\n    /**\n    * @param {any} controller\n    * @returns {Promise<any>}\n    */\n    pull(controller) {\n        const ret = wasm.intounderlyingbytesource_pull(this.ptr, addHeapObject(controller));\n        return takeObject(ret);\n    }\n    /**\n    */\n    cancel() {\n        const ptr = this.__destroy_into_raw();\n        wasm.intounderlyingbytesource_cancel(ptr);\n    }\n}\n/**\n*/\nexport class IntoUnderlyingSink {\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_intounderlyingsink_free(ptr);\n    }\n    /**\n    * @param {any} chunk\n    * @returns {Promise<any>}\n    */\n    write(chunk) {\n        const ret = wasm.intounderlyingsink_write(this.ptr, addHeapObject(chunk));\n        return takeObject(ret);\n    }\n    /**\n    * @returns {Promise<any>}\n    */\n    close() {\n        const ptr = this.__destroy_into_raw();\n        const ret = wasm.intounderlyingsink_close(ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @param {any} reason\n    * @returns {Promise<any>}\n    */\n    abort(reason) {\n        const ptr = this.__destroy_into_raw();\n        const ret = wasm.intounderlyingsink_abort(ptr, addHeapObject(reason));\n        return takeObject(ret);\n    }\n}\n/**\n*/\nexport class IntoUnderlyingSource {\n\n    static __wrap(ptr) {\n        const obj = Object.create(IntoUnderlyingSource.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_intounderlyingsource_free(ptr);\n    }\n    /**\n    * @param {any} controller\n    * @returns {Promise<any>}\n    */\n    pull(controller) {\n        const ret = wasm.intounderlyingsource_pull(this.ptr, addHeapObject(controller));\n        return takeObject(ret);\n    }\n    /**\n    */\n    cancel() {\n        const ptr = this.__destroy_into_raw();\n        wasm.intounderlyingsource_cancel(ptr);\n    }\n}\n/**\n* NPM package client used to resolve and fetch package data and metadata.\n*/\nexport class Nassun {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Nassun.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_nassun_free(ptr);\n    }\n    /**\n    * Create a new Nassun instance with the given options.\n    * @param {any} opts\n    */\n    constructor(opts) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.nassun_new(retptr, addHeapObject(opts));\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return Nassun.__wrap(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n    * Resolve a spec (e.g. `foo@^1.2.3`, `github:foo/bar`, etc), to a\n    * `Package` that can be used for further operations.\n    * @param {string} spec\n    * @returns {Promise<Package>}\n    */\n    resolve(spec) {\n        const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.nassun_resolve(this.ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n    * Resolves a packument object for the given package `spec`.\n    * @param {string} spec\n    * @returns {Promise<any>}\n    */\n    packument(spec) {\n        const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.nassun_packument(this.ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n    * Resolves version metadata from the given package `spec`.\n    * @param {string} spec\n    * @returns {Promise<any>}\n    */\n    metadata(spec) {\n        const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.nassun_metadata(this.ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n    * Resolves a partial (corgi) version of the packument object for the\n    * given package `spec`.\n    * @param {string} spec\n    * @returns {Promise<any>}\n    */\n    corgiPackument(spec) {\n        const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.nassun_corgiPackument(this.ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n    * Resolves a partial (corgi) version of the version metadata from the\n    * given package `spec`.\n    * @param {string} spec\n    * @returns {Promise<any>}\n    */\n    corgiMetadata(spec) {\n        const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.nassun_corgiMetadata(this.ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n    * Resolves a `ReadableStream<Uint8Array>` tarball from the given package\n    * `spec`. This tarball will have its data checked if the package\n    * metadata fetched includes integrity information.\n    * @param {string} spec\n    * @returns {Promise<ReadableStream>}\n    */\n    tarball(spec) {\n        const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.nassun_tarball(this.ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n    * Resolves to a `ReadableStream<Entry>` of entries from the given package\n    * `spec`, using the default resolution algorithm. The source tarball will\n    * have its data checked if the package metadata fetched includes integrity\n    * information.\n    * @param {string} spec\n    * @returns {Promise<ReadableStream>}\n    */\n    entries(spec) {\n        const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.nassun_entries(this.ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n}\n/**\n* An NPM-compatible dependency resolver. NodeMaintainer builds trees of\n* package nodes that can be used to generate lockfiles or fetch package\n* tarballs, or even extract them to where they would live in `node_modules`.\n*/\nexport class NodeMaintainer {\n\n    static __wrap(ptr) {\n        const obj = Object.create(NodeMaintainer.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_nodemaintainer_free(ptr);\n    }\n    /**\n    * Resolves a dependency tree using `spec` as the root package.\n    * @param {string} spec\n    * @param {any} opts\n    * @returns {Promise<NodeMaintainer>}\n    */\n    static resolveSpec(spec, opts) {\n        const ptr0 = passStringToWasm0(spec, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.nodemaintainer_resolveSpec(ptr0, len0, addHeapObject(opts));\n        return takeObject(ret);\n    }\n    /**\n    * Returns a dependency tree using a `package.json` manifest as the root\n    * package.\n    * @param {PackageJson} manifest\n    * @param {any} opts\n    * @returns {Promise<NodeMaintainer>}\n    */\n    static resolveManifest(manifest, opts) {\n        const ret = wasm.nodemaintainer_resolveManifest(addHeapObject(manifest), addHeapObject(opts));\n        return takeObject(ret);\n    }\n    /**\n    * Returns the contents of a package-lock.kdl lockfile for this resolved tree.\n    * @returns {string}\n    */\n    toKdl() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.nodemaintainer_toKdl(retptr, this.ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            var r3 = getInt32Memory0()[retptr / 4 + 3];\n            var ptr0 = r0;\n            var len0 = r1;\n            if (r3) {\n                ptr0 = 0; len0 = 0;\n                throw takeObject(r2);\n            }\n            return getStringFromWasm0(ptr0, len0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n            wasm.__wbindgen_export_5(ptr0, len0);\n        }\n    }\n    /**\n    * Given a path within node_modules, returns the package that the\n    * referenced file/directory belongs to.\n    * @param {string} path\n    * @returns {Package | undefined}\n    */\n    packageAtPath(path) {\n        const ptr0 = passStringToWasm0(path, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.nodemaintainer_packageAtPath(this.ptr, ptr0, len0);\n        return ret === 0 ? undefined : Package.__wrap(ret);\n    }\n    /**\n    * Concurrently over all packages in the tree, calling `f` on each.\n    * @param {Function} f\n    * @returns {Promise<void>}\n    */\n    forEachPackage(f) {\n        const ret = wasm.nodemaintainer_forEachPackage(this.ptr, addHeapObject(f));\n        return takeObject(ret);\n    }\n}\n/**\n* Options for configuration for various `NodeMaintainer` operations.\n*/\nexport class NodeMaintainerOptions {\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_nodemaintaineroptions_free(ptr);\n    }\n}\n/**\n* A resolved package. A concrete version has been determined from its\n* PackageSpec by the version resolver.\n*/\nexport class Package {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Package.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_package_free(ptr);\n    }\n    /**\n    * Original package spec that this `Package` was resolved from.\n    * @returns {any}\n    */\n    get from() {\n        const ret = wasm.package_from(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * Name of the package, as it should be used in the dependency graph.\n    * @returns {any}\n    */\n    get name() {\n        const ret = wasm.package_name(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * The package resolution information that this `Package` was created from.\n    * @returns {any}\n    */\n    get resolved() {\n        const ret = wasm.package_resolved(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * The partial (corgi) version of the packument that this `Package` was\n    * resolved from.\n    * @returns {Promise<any>}\n    */\n    corgiPackument() {\n        const ret = wasm.package_corgiPackument(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * The partial (corgi) version of the version metadata, aka roughly the\n    * metadata defined in `package.json`.\n    * @returns {Promise<any>}\n    */\n    corgiMetadata() {\n        const ret = wasm.package_corgiMetadata(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * The full packument that this `Package` was resolved from.\n    * @returns {Promise<any>}\n    */\n    packument() {\n        const ret = wasm.package_packument(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * The version metadata, aka roughly the metadata defined in\n    * `package.json`.\n    * @returns {Promise<any>}\n    */\n    metadata() {\n        const ret = wasm.package_metadata(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * A `ReadableStream<Uint8Array>` tarball for this package. This tarball\n    * will have its data checked if the package metadata fetched includes\n    * integrity information.\n    * @returns {Promise<ReadableStream>}\n    */\n    tarball() {\n        const ret = wasm.package_tarball(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * A `ReadableStream<Entry>` of entries for this package. The source\n    * tarball will have its data checked if the package metadata fetched\n    * includes integrity information.\n    * @returns {Promise<ReadableStream>}\n    */\n    entries() {\n        const ret = wasm.package_entries(this.ptr);\n        return takeObject(ret);\n    }\n}\n/**\n* Raw options for [`pipeTo()`](https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream/pipeTo).\n*/\nexport class PipeOptions {\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_pipeoptions_free(ptr);\n    }\n    /**\n    * @returns {boolean}\n    */\n    get preventClose() {\n        const ret = wasm.pipeoptions_preventClose(this.ptr);\n        return ret !== 0;\n    }\n    /**\n    * @returns {boolean}\n    */\n    get preventCancel() {\n        const ret = wasm.pipeoptions_preventCancel(this.ptr);\n        return ret !== 0;\n    }\n    /**\n    * @returns {boolean}\n    */\n    get preventAbort() {\n        const ret = wasm.pipeoptions_preventAbort(this.ptr);\n        return ret !== 0;\n    }\n    /**\n    * @returns {AbortSignal | undefined}\n    */\n    get signal() {\n        const ret = wasm.pipeoptions_signal(this.ptr);\n        return takeObject(ret);\n    }\n}\n/**\n*/\nexport class QueuingStrategy {\n\n    static __wrap(ptr) {\n        const obj = Object.create(QueuingStrategy.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_queuingstrategy_free(ptr);\n    }\n    /**\n    * @returns {number}\n    */\n    get highWaterMark() {\n        const ret = wasm.queuingstrategy_highWaterMark(this.ptr);\n        return ret;\n    }\n}\n/**\n* Raw options for [`getReader()`](https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream/getReader).\n*/\nexport class ReadableStreamGetReaderOptions {\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_readablestreamgetreaderoptions_free(ptr);\n    }\n    /**\n    * @returns {any}\n    */\n    get mode() {\n        const ret = wasm.readablestreamgetreaderoptions_mode(this.ptr);\n        return takeObject(ret);\n    }\n}\n\nasync function load(module, imports) {\n    if (typeof Response === 'function' && module instanceof Response) {\n        if (typeof WebAssembly.instantiateStreaming === 'function') {\n            try {\n                return await WebAssembly.instantiateStreaming(module, imports);\n\n            } catch (e) {\n                if (module.headers.get('Content-Type') != 'application/wasm') {\n                    console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        const bytes = await module.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n\n    } else {\n        const instance = await WebAssembly.instantiate(module, imports);\n\n        if (instance instanceof WebAssembly.Instance) {\n            return { instance, module };\n\n        } else {\n            return instance;\n        }\n    }\n}\n\nfunction getImports() {\n    const imports = {};\n    imports.wbg = {};\n    imports.wbg.__wbindgen_object_drop_ref = function(arg0) {\n        takeObject(arg0);\n    };\n    imports.wbg.__wbindgen_string_new = function(arg0, arg1) {\n        const ret = getStringFromWasm0(arg0, arg1);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_string_get = function(arg0, arg1) {\n        const obj = getObject(arg1);\n        const ret = typeof(obj) === 'string' ? obj : undefined;\n        var ptr0 = isLikeNone(ret) ? 0 : passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        var len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbg_nodemaintainer_new = function(arg0) {\n        const ret = NodeMaintainer.__wrap(arg0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_is_bigint = function(arg0) {\n        const ret = typeof(getObject(arg0)) === 'bigint';\n        return ret;\n    };\n    imports.wbg.__wbindgen_bigint_from_u64 = function(arg0) {\n        const ret = BigInt.asUintN(64, arg0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_jsval_eq = function(arg0, arg1) {\n        const ret = getObject(arg0) === getObject(arg1);\n        return ret;\n    };\n    imports.wbg.__wbindgen_is_object = function(arg0) {\n        const val = getObject(arg0);\n        const ret = typeof(val) === 'object' && val !== null;\n        return ret;\n    };\n    imports.wbg.__wbindgen_is_undefined = function(arg0) {\n        const ret = getObject(arg0) === undefined;\n        return ret;\n    };\n    imports.wbg.__wbindgen_in = function(arg0, arg1) {\n        const ret = getObject(arg0) in getObject(arg1);\n        return ret;\n    };\n    imports.wbg.__wbindgen_cb_drop = function(arg0) {\n        const obj = takeObject(arg0).original;\n        if (obj.cnt-- == 1) {\n            obj.a = 0;\n            return true;\n        }\n        const ret = false;\n        return ret;\n    };\n    imports.wbg.__wbindgen_error_new = function(arg0, arg1) {\n        const ret = new Error(getStringFromWasm0(arg0, arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_number_new = function(arg0) {\n        const ret = arg0;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_is_string = function(arg0) {\n        const ret = typeof(getObject(arg0)) === 'string';\n        return ret;\n    };\n    imports.wbg.__wbg_package_new = function(arg0) {\n        const ret = Package.__wrap(arg0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_object_clone_ref = function(arg0) {\n        const ret = getObject(arg0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_new_abda76e883ba8a5f = function() {\n        const ret = new Error();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_stack_658279fe44541cf6 = function(arg0, arg1) {\n        const ret = getObject(arg1).stack;\n        const ptr0 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbg_error_f851667af71bcfc6 = function(arg0, arg1) {\n        try {\n            console.error(getStringFromWasm0(arg0, arg1));\n        } finally {\n            wasm.__wbindgen_export_5(arg0, arg1);\n        }\n    };\n    imports.wbg.__wbindgen_bigint_from_i64 = function(arg0) {\n        const ret = arg0;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_jsval_loose_eq = function(arg0, arg1) {\n        const ret = getObject(arg0) == getObject(arg1);\n        return ret;\n    };\n    imports.wbg.__wbindgen_boolean_get = function(arg0) {\n        const v = getObject(arg0);\n        const ret = typeof(v) === 'boolean' ? (v ? 1 : 0) : 2;\n        return ret;\n    };\n    imports.wbg.__wbindgen_number_get = function(arg0, arg1) {\n        const obj = getObject(arg1);\n        const ret = typeof(obj) === 'number' ? obj : undefined;\n        getFloat64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? 0 : ret;\n        getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\n    };\n    imports.wbg.__wbg_String_91fba7ded13ba54c = function(arg0, arg1) {\n        const ret = String(getObject(arg1));\n        const ptr0 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbg_getwithrefkey_15c62c2b8546208d = function(arg0, arg1) {\n        const ret = getObject(arg0)[getObject(arg1)];\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_set_20cbc34131e76824 = function(arg0, arg1, arg2) {\n        getObject(arg0)[takeObject(arg1)] = takeObject(arg2);\n    };\n    imports.wbg.__wbg_fetch_cf75ae0b20981e3e = function(arg0) {\n        const ret = fetch(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_newwithsource_d169ed5262a23b74 = function(arg0, arg1) {\n        const ret = new ReadableStream(IntoUnderlyingSource.__wrap(arg0), QueuingStrategy.__wrap(arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_newwithbytesource_33937abb6afe07ad = function() { return handleError(function (arg0) {\n        const ret = new ReadableStream(IntoUnderlyingByteSource.__wrap(arg0));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_getReader_2dcca5fb18e09eed = function() { return handleError(function (arg0) {\n        const ret = getObject(arg0).getReader();\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_close_a41954830b65c455 = function(arg0) {\n        getObject(arg0).close();\n    };\n    imports.wbg.__wbg_enqueue_3a8a8e67e44d2567 = function(arg0, arg1) {\n        getObject(arg0).enqueue(getObject(arg1));\n    };\n    imports.wbg.__wbg_byobRequest_a3c74c3694777d1b = function(arg0) {\n        const ret = getObject(arg0).byobRequest;\n        return isLikeNone(ret) ? 0 : addHeapObject(ret);\n    };\n    imports.wbg.__wbg_close_045ed342139beb7d = function(arg0) {\n        getObject(arg0).close();\n    };\n    imports.wbg.__wbg_view_d1a31268af734e5d = function(arg0) {\n        const ret = getObject(arg0).view;\n        return isLikeNone(ret) ? 0 : addHeapObject(ret);\n    };\n    imports.wbg.__wbg_respond_f4778bef04e912a6 = function(arg0, arg1) {\n        getObject(arg0).respond(arg1 >>> 0);\n    };\n    imports.wbg.__wbg_buffer_610b70c8fd30da2d = function(arg0) {\n        const ret = getObject(arg0).buffer;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_byteOffset_ede786cfcf88d3dd = function(arg0) {\n        const ret = getObject(arg0).byteOffset;\n        return ret;\n    };\n    imports.wbg.__wbg_byteLength_1fef7842ca4200fa = function(arg0) {\n        const ret = getObject(arg0).byteLength;\n        return ret;\n    };\n    imports.wbg.__wbg_cancel_ec971cf80c0cb93c = function(arg0) {\n        const ret = getObject(arg0).cancel();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_releaseLock_63a4cb6bda4eb742 = function() { return handleError(function (arg0) {\n        getObject(arg0).releaseLock();\n    }, arguments) };\n    imports.wbg.__wbg_read_2ca7e46df6e5a6f6 = function(arg0) {\n        const ret = getObject(arg0).read();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_done_a0a250be29d69e10 = function(arg0) {\n        const ret = getObject(arg0).done;\n        return ret;\n    };\n    imports.wbg.__wbg_value_b71fc239df8382f0 = function(arg0) {\n        const ret = getObject(arg0).value;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_bytesliteral_efe7d360639bf32b = function() {\n        const ret = bytes_literal();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_newwithstrandinit_c45f0dc6da26fd03 = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = new Request(getStringFromWasm0(arg0, arg1), getObject(arg2));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_signal_686bf5a4acff74a1 = function(arg0) {\n        const ret = getObject(arg0).signal;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_new_a16bcd3b8d000a4f = function() { return handleError(function () {\n        const ret = new AbortController();\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_abort_5f06bf3b2954cf33 = function(arg0) {\n        getObject(arg0).abort();\n    };\n    imports.wbg.__wbg_fetch_661ffba2a4f2519c = function(arg0, arg1) {\n        const ret = getObject(arg0).fetch(getObject(arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_instanceof_Response_fb3a4df648c1859b = function(arg0) {\n        let result;\n        try {\n            result = getObject(arg0) instanceof Response;\n        } catch {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.wbg.__wbg_url_8ec2534cdfacb103 = function(arg0, arg1) {\n        const ret = getObject(arg1).url;\n        const ptr0 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbg_status_d483a4ac847f380a = function(arg0) {\n        const ret = getObject(arg0).status;\n        return ret;\n    };\n    imports.wbg.__wbg_headers_6093927dc359903e = function(arg0) {\n        const ret = getObject(arg0).headers;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_body_aeb10a3b63770556 = function(arg0) {\n        const ret = getObject(arg0).body;\n        return isLikeNone(ret) ? 0 : addHeapObject(ret);\n    };\n    imports.wbg.__wbg_text_f61464d781b099f0 = function() { return handleError(function (arg0) {\n        const ret = getObject(arg0).text();\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_new_f1c3a9c2533a55b8 = function() { return handleError(function () {\n        const ret = new Headers();\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_append_1be1d651f9ecf2eb = function() { return handleError(function (arg0, arg1, arg2, arg3, arg4) {\n        getObject(arg0).append(getStringFromWasm0(arg1, arg2), getStringFromWasm0(arg3, arg4));\n    }, arguments) };\n    imports.wbg.__wbg_get_27fe3dac1c4d0224 = function(arg0, arg1) {\n        const ret = getObject(arg0)[arg1 >>> 0];\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_length_e498fbc24f9c1d4f = function(arg0) {\n        const ret = getObject(arg0).length;\n        return ret;\n    };\n    imports.wbg.__wbg_new_b525de17f44a8943 = function() {\n        const ret = new Array();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_is_function = function(arg0) {\n        const ret = typeof(getObject(arg0)) === 'function';\n        return ret;\n    };\n    imports.wbg.__wbg_newnoargs_2b8b6bd7753c76ba = function(arg0, arg1) {\n        const ret = new Function(getStringFromWasm0(arg0, arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_new_f841cc6f2098f4b5 = function() {\n        const ret = new Map();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_next_b7d530c04fd8b217 = function(arg0) {\n        const ret = getObject(arg0).next;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_next_88560ec06a094dea = function() { return handleError(function (arg0) {\n        const ret = getObject(arg0).next();\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_done_1ebec03bbd919843 = function(arg0) {\n        const ret = getObject(arg0).done;\n        return ret;\n    };\n    imports.wbg.__wbg_value_6ac8da5cc5b3efda = function(arg0) {\n        const ret = getObject(arg0).value;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_iterator_55f114446221aa5a = function() {\n        const ret = Symbol.iterator;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_get_baf4855f9a986186 = function() { return handleError(function (arg0, arg1) {\n        const ret = Reflect.get(getObject(arg0), getObject(arg1));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_call_95d1ea488d03e4e8 = function() { return handleError(function (arg0, arg1) {\n        const ret = getObject(arg0).call(getObject(arg1));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_new_f9876326328f45ed = function() {\n        const ret = new Object();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_self_e7c1f827057f6584 = function() { return handleError(function () {\n        const ret = self.self;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_window_a09ec664e14b1b81 = function() { return handleError(function () {\n        const ret = window.window;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_globalThis_87cbb8506fecf3a9 = function() { return handleError(function () {\n        const ret = globalThis.globalThis;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_global_c85a9259e621f3db = function() { return handleError(function () {\n        const ret = global.global;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_set_17224bc548dd1d7b = function(arg0, arg1, arg2) {\n        getObject(arg0)[arg1 >>> 0] = takeObject(arg2);\n    };\n    imports.wbg.__wbg_isArray_39d28997bf6b96b4 = function(arg0) {\n        const ret = Array.isArray(getObject(arg0));\n        return ret;\n    };\n    imports.wbg.__wbg_instanceof_ArrayBuffer_a69f02ee4c4f5065 = function(arg0) {\n        let result;\n        try {\n            result = getObject(arg0) instanceof ArrayBuffer;\n        } catch {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.wbg.__wbg_new_15d3966e9981a196 = function(arg0, arg1) {\n        const ret = new Error(getStringFromWasm0(arg0, arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_call_9495de66fdbe016b = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = getObject(arg0).call(getObject(arg1), getObject(arg2));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_call_96878afb7a8201ca = function() { return handleError(function (arg0, arg1, arg2, arg3) {\n        const ret = getObject(arg0).call(getObject(arg1), getObject(arg2), getObject(arg3));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_set_388c4c6422704173 = function(arg0, arg1, arg2) {\n        const ret = getObject(arg0).set(getObject(arg1), getObject(arg2));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_isSafeInteger_8c4789029e885159 = function(arg0) {\n        const ret = Number.isSafeInteger(getObject(arg0));\n        return ret;\n    };\n    imports.wbg.__wbg_entries_4e1315b774245952 = function(arg0) {\n        const ret = Object.entries(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_instanceof_Promise_4333c4e5587e8936 = function(arg0) {\n        let result;\n        try {\n            result = getObject(arg0) instanceof Promise;\n        } catch {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.wbg.__wbg_new_9d3a9ce4282a18a8 = function(arg0, arg1) {\n        try {\n            var state0 = {a: arg0, b: arg1};\n            var cb0 = (arg0, arg1) => {\n                const a = state0.a;\n                state0.a = 0;\n                try {\n                    return __wbg_adapter_224(a, state0.b, arg0, arg1);\n                } finally {\n                    state0.a = a;\n                }\n            };\n            const ret = new Promise(cb0);\n            return addHeapObject(ret);\n        } finally {\n            state0.a = state0.b = 0;\n        }\n    };\n    imports.wbg.__wbg_resolve_fd40f858d9db1a04 = function(arg0) {\n        const ret = Promise.resolve(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_catch_44bf25c15946bac0 = function(arg0, arg1) {\n        const ret = getObject(arg0).catch(getObject(arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_then_ec5db6d509eb475f = function(arg0, arg1) {\n        const ret = getObject(arg0).then(getObject(arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_then_f753623316e2873a = function(arg0, arg1, arg2) {\n        const ret = getObject(arg0).then(getObject(arg1), getObject(arg2));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_buffer_cf65c07de34b9a08 = function(arg0) {\n        const ret = getObject(arg0).buffer;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_newwithbyteoffsetandlength_9fb2f11355ecadf5 = function(arg0, arg1, arg2) {\n        const ret = new Uint8Array(getObject(arg0), arg1 >>> 0, arg2 >>> 0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_new_537b7341ce90bb31 = function(arg0) {\n        const ret = new Uint8Array(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_set_17499e8aa4003ebd = function(arg0, arg1, arg2) {\n        getObject(arg0).set(getObject(arg1), arg2 >>> 0);\n    };\n    imports.wbg.__wbg_length_27a2afe8ab42b09f = function(arg0) {\n        const ret = getObject(arg0).length;\n        return ret;\n    };\n    imports.wbg.__wbg_instanceof_Uint8Array_01cebe79ca606cca = function(arg0) {\n        let result;\n        try {\n            result = getObject(arg0) instanceof Uint8Array;\n        } catch {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.wbg.__wbg_has_3feea89d34bd7ad5 = function() { return handleError(function (arg0, arg1) {\n        const ret = Reflect.has(getObject(arg0), getObject(arg1));\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_set_6aa458a4ebdb65cb = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = Reflect.set(getObject(arg0), getObject(arg1), getObject(arg2));\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_stringify_029a979dfb73aa17 = function() { return handleError(function (arg0) {\n        const ret = JSON.stringify(getObject(arg0));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbindgen_bigint_get_as_i64 = function(arg0, arg1) {\n        const v = getObject(arg1);\n        const ret = typeof(v) === 'bigint' ? v : undefined;\n        getBigInt64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? BigInt(0) : ret;\n        getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\n    };\n    imports.wbg.__wbindgen_debug_string = function(arg0, arg1) {\n        const ret = debugString(getObject(arg1));\n        const ptr0 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbindgen_throw = function(arg0, arg1) {\n        throw new Error(getStringFromWasm0(arg0, arg1));\n    };\n    imports.wbg.__wbindgen_rethrow = function(arg0) {\n        throw takeObject(arg0);\n    };\n    imports.wbg.__wbindgen_memory = function() {\n        const ret = wasm.memory;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_closure_wrapper2178 = function(arg0, arg1, arg2) {\n        const ret = makeMutClosure(arg0, arg1, 747, __wbg_adapter_50);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_closure_wrapper2759 = function(arg0, arg1, arg2) {\n        const ret = makeMutClosure(arg0, arg1, 967, __wbg_adapter_53);\n        return addHeapObject(ret);\n    };\n\n    return imports;\n}\n\nfunction initMemory(imports, maybe_memory) {\n\n}\n\nfunction finalizeInit(instance, module) {\n    wasm = instance.exports;\n    init.__wbindgen_wasm_module = module;\n    cachedBigInt64Memory0 = null;\n    cachedFloat64Memory0 = null;\n    cachedInt32Memory0 = null;\n    cachedUint8Memory0 = null;\n\n\n    return wasm;\n}\n\nfunction initSync(module) {\n    const imports = getImports();\n\n    initMemory(imports);\n\n    if (!(module instanceof WebAssembly.Module)) {\n        module = new WebAssembly.Module(module);\n    }\n\n    const instance = new WebAssembly.Instance(module, imports);\n\n    return finalizeInit(instance, module);\n}\n\nasync function init(input) {\n    if (typeof input === 'undefined') {\n        input = new URL('node_maintainer_bg.wasm', import.meta.url);\n    }\n    const imports = getImports();\n\n    if (typeof input === 'string' || (typeof Request === 'function' && input instanceof Request) || (typeof URL === 'function' && input instanceof URL)) {\n        input = fetch(input);\n    }\n\n    initMemory(imports);\n\n    const { instance, module } = await load(await input, imports);\n\n    return finalizeInit(instance, module);\n}\n\nexport { initSync }\nexport default init;\n","export function bytes_literal() { return \"bytes\"; }","// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Utils } from 'vscode-uri';\nimport { Schemes } from '../configuration/schemes';\nimport { Logger } from '../logging/logger';\nimport { disposeAll, IDisposable } from '../utils/dispose';\nimport { ResourceMap } from '../utils/resourceMap';\n\ninterface DirWatcherEntry {\n\treadonly uri: vscode.Uri;\n\treadonly disposables: readonly IDisposable[];\n}\n\n\nexport class FileWatcherManager implements IDisposable {\n\n\tprivate readonly _fileWatchers = new Map<number, {\n\t\treadonly uri: vscode.Uri;\n\t\treadonly watcher: vscode.FileSystemWatcher;\n\t\treadonly dirWatchers: DirWatcherEntry[];\n\t}>();\n\n\tprivate readonly _dirWatchers = new ResourceMap<{\n\t\treadonly uri: vscode.Uri;\n\t\treadonly watcher: vscode.FileSystemWatcher;\n\t\trefCount: number;\n\t}>(uri => uri.toString(), { onCaseInsensitiveFileSystem: false });\n\n\tconstructor(\n\t\tprivate readonly logger: Logger,\n\t) { }\n\n\tdispose(): void {\n\t\tfor (const entry of this._fileWatchers.values()) {\n\t\t\tentry.watcher.dispose();\n\t\t}\n\t\tthis._fileWatchers.clear();\n\n\t\tfor (const entry of this._dirWatchers.values()) {\n\t\t\tentry.watcher.dispose();\n\t\t}\n\t\tthis._dirWatchers.clear();\n\t}\n\n\tcreate(id: number, uri: vscode.Uri, watchParentDirs: boolean, isRecursive: boolean, listeners: { create?: (uri: vscode.Uri) => void; change?: (uri: vscode.Uri) => void; delete?: (uri: vscode.Uri) => void }): void {\n\t\tthis.logger.trace(`Creating file watcher for ${uri.toString()}`);\n\n\t\t// Non-writable file systems do not support file watching\n\t\tif (!vscode.workspace.fs.isWritableFileSystem(uri.scheme)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst watcher = vscode.workspace.createFileSystemWatcher(new vscode.RelativePattern(uri, isRecursive ? '**' : '*'), !listeners.create, !listeners.change, !listeners.delete);\n\t\tconst parentDirWatchers: DirWatcherEntry[] = [];\n\t\tthis._fileWatchers.set(id, { uri, watcher, dirWatchers: parentDirWatchers });\n\n\t\tif (listeners.create) { watcher.onDidCreate(listeners.create); }\n\t\tif (listeners.change) { watcher.onDidChange(listeners.change); }\n\t\tif (listeners.delete) { watcher.onDidDelete(listeners.delete); }\n\n\t\tif (watchParentDirs && uri.scheme !== Schemes.untitled) {\n\t\t\t// We need to watch the parent directories too for when these are deleted / created\n\t\t\tfor (let dirUri = Utils.dirname(uri); dirUri.path.length > 1; dirUri = Utils.dirname(dirUri)) {\n\t\t\t\tconst disposables: IDisposable[] = [];\n\n\t\t\t\tlet parentDirWatcher = this._dirWatchers.get(dirUri);\n\t\t\t\tif (!parentDirWatcher) {\n\t\t\t\t\tthis.logger.trace(`Creating parent dir watcher for ${dirUri.toString()}`);\n\t\t\t\t\tconst glob = new vscode.RelativePattern(Utils.dirname(dirUri), Utils.basename(dirUri));\n\t\t\t\t\tconst parentWatcher = vscode.workspace.createFileSystemWatcher(glob, !listeners.create, true, !listeners.delete);\n\t\t\t\t\tparentDirWatcher = { uri: dirUri, refCount: 0, watcher: parentWatcher };\n\t\t\t\t\tthis._dirWatchers.set(dirUri, parentDirWatcher);\n\t\t\t\t}\n\t\t\t\tparentDirWatcher.refCount++;\n\n\t\t\t\tif (listeners.create) {\n\t\t\t\t\tdisposables.push(parentDirWatcher.watcher.onDidCreate(async () => {\n\t\t\t\t\t\t// Just because the parent dir was created doesn't mean our file was created\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst stat = await vscode.workspace.fs.stat(uri);\n\t\t\t\t\t\t\tif (stat.type === vscode.FileType.File) {\n\t\t\t\t\t\t\t\tlisteners.create!(uri);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t// Noop\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tif (listeners.delete) {\n\t\t\t\t\t// When the parent dir is deleted, consider our file deleted too\n\t\t\t\t\t// TODO: this fires if the file previously did not exist and then the parent is deleted\n\t\t\t\t\tdisposables.push(parentDirWatcher.watcher.onDidDelete(listeners.delete));\n\t\t\t\t}\n\n\t\t\t\tparentDirWatchers.push({ uri: dirUri, disposables });\n\t\t\t}\n\t\t}\n\t}\n\n\n\tdelete(id: number): void {\n\t\tconst entry = this._fileWatchers.get(id);\n\t\tif (entry) {\n\t\t\tthis.logger.trace(`Deleting file watcher for ${entry.uri}`);\n\n\t\t\tfor (const dirWatcher of entry.dirWatchers) {\n\t\t\t\tdisposeAll(dirWatcher.disposables);\n\n\t\t\t\tconst dirWatcherEntry = this._dirWatchers.get(dirWatcher.uri);\n\t\t\t\tif (dirWatcherEntry) {\n\t\t\t\t\tif (--dirWatcherEntry.refCount <= 0) {\n\t\t\t\t\t\tthis.logger.trace(`Deleting parent dir ${dirWatcherEntry.uri}`);\n\t\t\t\t\t\tdirWatcherEntry.watcher.dispose();\n\t\t\t\t\t\tthis._dirWatchers.delete(dirWatcher.uri);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tentry.watcher.dispose();\n\t\t}\n\n\t\tthis._fileWatchers.delete(id);\n\t}\n}\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DTOs = void 0;\nconst connection_1 = require(\"./connection\");\nvar DTOs;\n(function (DTOs) {\n    let FileSystemError;\n    (function (FileSystemError) {\n        /**\n         * Create an error to signal that a file or folder wasn't found.\n         */\n        FileSystemError.FileNotFound = connection_1.RPCErrno.$Custom;\n        /**\n         * Create an error to signal that a file or folder already exists, e.g. when\n         * creating but not overwriting a file.\n         */\n        FileSystemError.FileExists = FileSystemError.FileNotFound + 1;\n        /**\n         * Create an error to signal that a file is not a folder.\n         */\n        FileSystemError.FileNotADirectory = FileSystemError.FileExists + 1;\n        /**\n         * Create an error to signal that a file is a folder.\n         */\n        FileSystemError.FileIsADirectory = FileSystemError.FileNotADirectory + 1;\n        /**\n         * Create an error to signal that an operation lacks required permissions.\n         */\n        FileSystemError.NoPermissions = FileSystemError.FileIsADirectory + 1;\n        /**\n         * Create an error to signal that the file system is unavailable or too busy to\n         * complete a request.\n         */\n        FileSystemError.Unavailable = FileSystemError.NoPermissions + 1;\n    })(FileSystemError = DTOs.FileSystemError || (DTOs.FileSystemError = {}));\n    let FileType;\n    (function (FileType) {\n        /**\n        * The file type is unknown.\n        */\n        FileType[FileType[\"Unknown\"] = 0] = \"Unknown\";\n        /**\n        * A regular file.\n        */\n        FileType[FileType[\"File\"] = 1] = \"File\";\n        /**\n        * A directory.\n        */\n        FileType[FileType[\"Directory\"] = 2] = \"Directory\";\n        /**\n        * A symbolic link to a file.\n        */\n        FileType[FileType[\"SymbolicLink\"] = 64] = \"SymbolicLink\";\n    })(FileType = DTOs.FileType || (DTOs.FileType = {}));\n    let FilePermission;\n    (function (FilePermission) {\n        /**\n         * The file is readonly.\n         */\n        FilePermission[FilePermission[\"Readonly\"] = 1] = \"Readonly\";\n    })(FilePermission = DTOs.FilePermission || (DTOs.FilePermission = {}));\n    let Stat;\n    (function (Stat) {\n        Stat.typedResult = connection_1.Uint32Result.fromLength(5);\n        function create(memory) {\n            return {\n                get type() {\n                    return memory[0];\n                },\n                set type(value) {\n                    memory[0] = value;\n                },\n                get ctime() {\n                    return memory[1];\n                },\n                set ctime(value) {\n                    memory[1] = value;\n                },\n                get mtime() {\n                    return memory[2];\n                },\n                set mtime(value) {\n                    memory[2] = value;\n                },\n                get size() {\n                    return memory[3];\n                },\n                set size(value) {\n                    memory[3] = value;\n                },\n                get permission() {\n                    return memory[4];\n                },\n                set permission(value) {\n                    memory[4] = value;\n                }\n            };\n        }\n        Stat.create = create;\n    })(Stat = DTOs.Stat || (DTOs.Stat = {}));\n})(DTOs = exports.DTOs || (exports.DTOs = {}));\n//# sourceMappingURL=protocol.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/// <reference lib='webworker' />\nimport { ServiceConnection } from '@vscode/sync-api-common/browser';\nimport { ApiService, Requests } from '@vscode/sync-api-service';\nimport * as vscode from 'vscode';\nimport { TypeScriptServiceConfiguration } from '../configuration/configuration';\nimport { Logger } from '../logging/logger';\nimport { supportsReadableByteStreams } from '../utils/platform';\nimport { FileWatcherManager } from './fileWatchingManager';\nimport { NodeVersionManager } from './nodeManager';\nimport type * as Proto from './protocol/protocol';\nimport { TsServerLog, TsServerProcess, TsServerProcessFactory, TsServerProcessKind } from './server';\nimport { TypeScriptVersionManager } from './versionManager';\nimport { TypeScriptVersion } from './versionProvider';\n\ntype BrowserWatchEvent = {\n\ttype: 'watchDirectory' | 'watchFile';\n\trecursive?: boolean;\n\turi: {\n\t\tscheme: string;\n\t\tauthority: string;\n\t\tpath: string;\n\t};\n\tid: number;\n} | {\n\ttype: 'dispose';\n\tid: number;\n};\n\nexport class WorkerServerProcessFactory implements TsServerProcessFactory {\n\tconstructor(\n\t\tprivate readonly _extensionUri: vscode.Uri,\n\t\tprivate readonly _logger: Logger,\n\t) { }\n\n\tpublic fork(\n\t\tversion: TypeScriptVersion,\n\t\targs: readonly string[],\n\t\tkind: TsServerProcessKind,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\t_versionManager: TypeScriptVersionManager,\n\t\t_nodeVersionManager: NodeVersionManager,\n\t\ttsServerLog: TsServerLog | undefined,\n\t) {\n\t\tconst tsServerPath = version.tsServerPath;\n\t\tconst launchArgs = [\n\t\t\t...args,\n\t\t\t// Explicitly give TS Server its path so it can load local resources\n\t\t\t'--executingFilePath', tsServerPath,\n\t\t\t// Enable/disable web type acquisition\n\t\t\t(configuration.webTypeAcquisitionEnabled && supportsReadableByteStreams() ? '--experimentalTypeAcquisition' : '--disableAutomaticTypingAcquisition'),\n\t\t];\n\n\t\treturn new WorkerServerProcess(kind, tsServerPath, this._extensionUri, launchArgs, tsServerLog, this._logger);\n\t}\n}\n\nclass WorkerServerProcess implements TsServerProcess {\n\n\tprivate static idPool = 0;\n\n\tprivate readonly id = WorkerServerProcess.idPool++;\n\n\tprivate readonly _onDataHandlers = new Set<(data: Proto.Response) => void>();\n\tprivate readonly _onErrorHandlers = new Set<(err: Error) => void>();\n\tprivate readonly _onExitHandlers = new Set<(code: number | null, signal: string | null) => void>();\n\n\tprivate readonly _worker: Worker;\n\tprivate readonly _watches: FileWatcherManager;\n\n\t/** For communicating with TS server synchronously */\n\tprivate readonly _tsserver: MessagePort;\n\t/** For communicating watches asynchronously */\n\tprivate readonly _watcher: MessagePort;\n\t/** For communicating with filesystem synchronously */\n\tprivate readonly _syncFs: MessagePort;\n\n\tpublic constructor(\n\t\tprivate readonly kind: TsServerProcessKind,\n\t\ttsServerPath: string,\n\t\textensionUri: vscode.Uri,\n\t\targs: readonly string[],\n\t\tprivate readonly tsServerLog: TsServerLog | undefined,\n\t\tlogger: Logger,\n\t) {\n\t\tthis._worker = new Worker(tsServerPath, { name: `TS ${kind} server #${this.id}` });\n\n\t\tthis._watches = new FileWatcherManager(logger);\n\n\t\tconst tsserverChannel = new MessageChannel();\n\t\tconst watcherChannel = new MessageChannel();\n\t\tconst syncChannel = new MessageChannel();\n\t\tthis._tsserver = tsserverChannel.port2;\n\t\tthis._watcher = watcherChannel.port2;\n\t\tthis._syncFs = syncChannel.port2;\n\n\t\tthis._tsserver.onmessage = (event) => {\n\t\t\tif (event.data.type === 'log') {\n\t\t\t\tconsole.error(`unexpected log message on tsserver channel: ${JSON.stringify(event)}`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (const handler of this._onDataHandlers) {\n\t\t\t\thandler(event.data);\n\t\t\t}\n\t\t};\n\n\t\tthis._watcher.onmessage = (event: MessageEvent<BrowserWatchEvent>) => {\n\t\t\tswitch (event.data.type) {\n\t\t\t\tcase 'dispose': {\n\t\t\t\t\tthis._watches.delete(event.data.id);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'watchDirectory':\n\t\t\t\tcase 'watchFile': {\n\t\t\t\t\tthis._watches.create(event.data.id, vscode.Uri.from(event.data.uri), /*watchParentDirs*/ true, !!event.data.recursive, {\n\t\t\t\t\t\tchange: uri => this._watcher.postMessage({ type: 'watch', event: 'change', uri }),\n\t\t\t\t\t\tcreate: uri => this._watcher.postMessage({ type: 'watch', event: 'create', uri }),\n\t\t\t\t\t\tdelete: uri => this._watcher.postMessage({ type: 'watch', event: 'delete', uri }),\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.error(`unexpected message on watcher channel: ${JSON.stringify(event)}`);\n\t\t\t}\n\t\t};\n\n\t\tthis._worker.onmessage = (msg: any) => {\n\t\t\t// for logging only\n\t\t\tif (msg.data.type === 'log') {\n\t\t\t\tthis.appendLog(msg.data.body);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconsole.error(`unexpected message on main channel: ${JSON.stringify(msg)}`);\n\t\t};\n\n\t\tthis._worker.onerror = (err: ErrorEvent) => {\n\t\t\tconsole.error('error! ' + JSON.stringify(err));\n\t\t\tfor (const handler of this._onErrorHandlers) {\n\t\t\t\t// TODO: The ErrorEvent type might be wrong; previously this was typed as Error and didn't have the property access.\n\t\t\t\thandler(err.error);\n\t\t\t}\n\t\t};\n\n\t\tthis._worker.postMessage(\n\t\t\t{ args, extensionUri },\n\t\t\t[syncChannel.port1, tsserverChannel.port1, watcherChannel.port1]\n\t\t);\n\n\t\tconst connection = new ServiceConnection<Requests>(syncChannel.port2);\n\t\tnew ApiService('vscode-wasm-typescript', connection);\n\t\tconnection.signalReady();\n\t}\n\n\twrite(serverRequest: Proto.Request): void {\n\t\tthis._tsserver.postMessage(serverRequest);\n\t}\n\n\tonData(handler: (response: Proto.Response) => void): void {\n\t\tthis._onDataHandlers.add(handler);\n\t}\n\n\tonError(handler: (err: Error) => void): void {\n\t\tthis._onErrorHandlers.add(handler);\n\t}\n\n\tonExit(handler: (code: number | null, signal: string | null) => void): void {\n\t\tthis._onExitHandlers.add(handler);\n\t\t// Todo: not implemented\n\t}\n\n\tkill(): void {\n\t\tthis._worker.terminate();\n\t\tthis._tsserver.close();\n\t\tthis._watcher.close();\n\t\tthis._syncFs.close();\n\t\tthis._watches.dispose();\n\t}\n\n\tprivate appendLog(msg: string) {\n\t\tif (this.tsServerLog?.type === 'output') {\n\t\t\tthis.tsServerLog.output.appendLine(`(${this.id} - ${this.kind}) ${msg}`);\n\t\t}\n\t}\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* --------------------------------------------------------------------------------------------\n * Includes code from typescript-sublime-plugin project, obtained from\n * https://github.com/microsoft/TypeScript-Sublime-Plugin/blob/master/TypeScript%20Indent.tmPreferences\n * ------------------------------------------------------------------------------------------ */\n\nimport * as vscode from 'vscode';\nimport { CommandManager } from './commands/commandManager';\nimport { ServiceConfigurationProvider } from './configuration/configuration';\nimport { DiagnosticLanguage, LanguageDescription } from './configuration/languageDescription';\nimport { IExperimentationTelemetryReporter } from './experimentTelemetryReporter';\nimport { DiagnosticKind } from './languageFeatures/diagnostics';\nimport FileConfigurationManager from './languageFeatures/fileConfigurationManager';\nimport LanguageProvider from './languageProvider';\nimport { LogLevelMonitor } from './logging/logLevelMonitor';\nimport { Logger } from './logging/logger';\nimport { OngoingRequestCancellerFactory } from './tsServer/cancellation';\nimport { ILogDirectoryProvider } from './tsServer/logDirectoryProvider';\nimport { PluginManager } from './tsServer/plugins';\nimport * as errorCodes from './tsServer/protocol/errorCodes';\nimport * as Proto from './tsServer/protocol/protocol';\nimport * as PConst from './tsServer/protocol/protocol.const';\nimport { TsServerProcessFactory } from './tsServer/server';\nimport { ITypeScriptVersionProvider } from './tsServer/versionProvider';\nimport * as typeConverters from './typeConverters';\nimport TypeScriptServiceClient from './typescriptServiceClient';\nimport { ActiveJsTsEditorTracker } from './ui/activeJsTsEditorTracker';\nimport { IntellisenseStatus } from './ui/intellisenseStatus';\nimport * as LargeProjectStatus from './ui/largeProjectStatus';\nimport TypingsStatus, { AtaProgressReporter } from './ui/typingsStatus';\nimport { VersionStatus } from './ui/versionStatus';\nimport { coalesce } from './utils/arrays';\nimport { Disposable } from './utils/dispose';\n\n// Style check diagnostics that can be reported as warnings\nconst styleCheckDiagnostics = new Set([\n\t...errorCodes.variableDeclaredButNeverUsed,\n\t...errorCodes.propertyDeclaretedButNeverUsed,\n\t...errorCodes.allImportsAreUnused,\n\t...errorCodes.unreachableCode,\n\t...errorCodes.unusedLabel,\n\t...errorCodes.fallThroughCaseInSwitch,\n\t...errorCodes.notAllCodePathsReturnAValue,\n]);\n\nexport default class TypeScriptServiceClientHost extends Disposable {\n\n\tprivate readonly client: TypeScriptServiceClient;\n\tprivate readonly languages: LanguageProvider[] = [];\n\tprivate readonly languagePerId = new Map<string, LanguageProvider>();\n\n\tprivate readonly typingsStatus: TypingsStatus;\n\n\tprivate readonly fileConfigurationManager: FileConfigurationManager;\n\n\tprivate reportStyleCheckAsWarnings: boolean = true;\n\n\tprivate readonly commandManager: CommandManager;\n\n\tconstructor(\n\t\tdescriptions: LanguageDescription[],\n\t\tcontext: vscode.ExtensionContext,\n\t\tonCaseInsensitiveFileSystem: boolean,\n\t\tservices: {\n\t\t\tpluginManager: PluginManager;\n\t\t\tcommandManager: CommandManager;\n\t\t\tlogDirectoryProvider: ILogDirectoryProvider;\n\t\t\tcancellerFactory: OngoingRequestCancellerFactory;\n\t\t\tversionProvider: ITypeScriptVersionProvider;\n\t\t\tprocessFactory: TsServerProcessFactory;\n\t\t\tactiveJsTsEditorTracker: ActiveJsTsEditorTracker;\n\t\t\tserviceConfigurationProvider: ServiceConfigurationProvider;\n\t\t\texperimentTelemetryReporter: IExperimentationTelemetryReporter | undefined;\n\t\t\tlogger: Logger;\n\t\t},\n\t\tonCompletionAccepted: (item: vscode.CompletionItem) => void,\n\t) {\n\t\tsuper();\n\n\t\tthis.commandManager = services.commandManager;\n\n\t\tconst allModeIds = this.getAllModeIds(descriptions, services.pluginManager);\n\t\tthis.client = this._register(new TypeScriptServiceClient(\n\t\t\tcontext,\n\t\t\tonCaseInsensitiveFileSystem,\n\t\t\tservices,\n\t\t\tallModeIds));\n\n\t\tthis.client.onDiagnosticsReceived(({ kind, resource, diagnostics, spans }) => {\n\t\t\tthis.diagnosticsReceived(kind, resource, diagnostics, spans);\n\t\t}, null, this._disposables);\n\n\t\tthis.client.onConfigDiagnosticsReceived(diag => this.configFileDiagnosticsReceived(diag), null, this._disposables);\n\t\tthis.client.onResendModelsRequested(() => this.populateService(), null, this._disposables);\n\n\t\tthis._register(new VersionStatus(this.client));\n\t\tthis._register(new IntellisenseStatus(this.client, services.commandManager, services.activeJsTsEditorTracker));\n\t\tthis._register(new AtaProgressReporter(this.client));\n\t\tthis.typingsStatus = this._register(new TypingsStatus(this.client));\n\t\tthis._register(LargeProjectStatus.create(this.client));\n\n\t\tthis.fileConfigurationManager = this._register(new FileConfigurationManager(this.client, onCaseInsensitiveFileSystem));\n\n\t\tfor (const description of descriptions) {\n\t\t\tconst manager = new LanguageProvider(this.client, description, this.commandManager, this.client.telemetryReporter, this.typingsStatus, this.fileConfigurationManager, onCompletionAccepted);\n\t\t\tthis.languages.push(manager);\n\t\t\tthis._register(manager);\n\t\t\tthis.languagePerId.set(description.id, manager);\n\t\t}\n\n\t\timport('./languageFeatures/updatePathsOnRename').then(module =>\n\t\t\tthis._register(module.register(this.client, this.fileConfigurationManager, uri => this.handles(uri))));\n\n\t\timport('./languageFeatures/workspaceSymbols').then(module =>\n\t\t\tthis._register(module.register(this.client, allModeIds)));\n\n\t\tthis.client.ensureServiceStarted();\n\t\tthis.client.onReady(() => {\n\t\t\tconst languages = new Set<string>();\n\t\t\tfor (const plugin of services.pluginManager.plugins) {\n\t\t\t\tif (plugin.configNamespace && plugin.languages.length) {\n\t\t\t\t\tthis.registerExtensionLanguageProvider({\n\t\t\t\t\t\tid: plugin.configNamespace,\n\t\t\t\t\t\tlanguageIds: Array.from(plugin.languages),\n\t\t\t\t\t\tdiagnosticSource: 'ts-plugin',\n\t\t\t\t\t\tdiagnosticLanguage: DiagnosticLanguage.TypeScript,\n\t\t\t\t\t\tdiagnosticOwner: 'typescript',\n\t\t\t\t\t\tisExternal: true,\n\t\t\t\t\t\tstandardFileExtensions: [],\n\t\t\t\t\t}, onCompletionAccepted);\n\t\t\t\t} else {\n\t\t\t\t\tfor (const language of plugin.languages) {\n\t\t\t\t\t\tlanguages.add(language);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (languages.size) {\n\t\t\t\tthis.registerExtensionLanguageProvider({\n\t\t\t\t\tid: 'typescript-plugins',\n\t\t\t\t\tlanguageIds: Array.from(languages.values()),\n\t\t\t\t\tdiagnosticSource: 'ts-plugin',\n\t\t\t\t\tdiagnosticLanguage: DiagnosticLanguage.TypeScript,\n\t\t\t\t\tdiagnosticOwner: 'typescript',\n\t\t\t\t\tisExternal: true,\n\t\t\t\t\tstandardFileExtensions: [],\n\t\t\t\t}, onCompletionAccepted);\n\t\t\t}\n\t\t});\n\n\t\tthis.client.onTsServerStarted(() => {\n\t\t\tthis.triggerAllDiagnostics();\n\t\t});\n\n\t\tvscode.workspace.onDidChangeConfiguration(this.configurationChanged, this, this._disposables);\n\t\tthis.configurationChanged();\n\t\tthis._register(new LogLevelMonitor(context));\n\t}\n\n\tprivate registerExtensionLanguageProvider(description: LanguageDescription, onCompletionAccepted: (item: vscode.CompletionItem) => void) {\n\t\tconst manager = new LanguageProvider(this.client, description, this.commandManager, this.client.telemetryReporter, this.typingsStatus, this.fileConfigurationManager, onCompletionAccepted);\n\t\tthis.languages.push(manager);\n\t\tthis._register(manager);\n\t\tthis.languagePerId.set(description.id, manager);\n\t}\n\n\tprivate getAllModeIds(descriptions: LanguageDescription[], pluginManager: PluginManager) {\n\t\treturn [\n\t\t\t...descriptions.map(x => x.languageIds),\n\t\t\t...pluginManager.plugins.map(x => x.languages)\n\t\t].flat();\n\t}\n\n\tpublic get serviceClient(): TypeScriptServiceClient {\n\t\treturn this.client;\n\t}\n\n\tpublic reloadProjects(): void {\n\t\tthis.client.executeWithoutWaitingForResponse('reloadProjects', null);\n\t\tthis.triggerAllDiagnostics();\n\t}\n\n\tpublic async handles(resource: vscode.Uri): Promise<boolean> {\n\t\tconst provider = await this.findLanguage(resource);\n\t\tif (provider) {\n\t\t\treturn true;\n\t\t}\n\t\treturn this.client.bufferSyncSupport.handles(resource);\n\t}\n\n\tprivate configurationChanged(): void {\n\t\tconst typescriptConfig = vscode.workspace.getConfiguration('typescript');\n\n\t\tthis.reportStyleCheckAsWarnings = typescriptConfig.get('reportStyleChecksAsWarnings', true);\n\t}\n\n\tprivate async findLanguage(resource: vscode.Uri): Promise<LanguageProvider | undefined> {\n\t\ttry {\n\t\t\t// First try finding language just based on the resource.\n\t\t\t// This is not strictly correct but should be in the vast majority of cases\n\t\t\t// (except when someone goes and maps `.js` to `typescript` or something...)\n\t\t\tfor (const language of this.languages) {\n\t\t\t\tif (language.handlesUri(resource)) {\n\t\t\t\t\treturn language;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If that doesn't work, fallback to using a text document language mode.\n\t\t\t// This is not ideal since we have to open the document but should always\n\t\t\t// be correct\n\t\t\tconst doc = await vscode.workspace.openTextDocument(resource);\n\t\t\treturn this.languages.find(language => language.handlesDocument(doc));\n\t\t} catch {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tprivate triggerAllDiagnostics() {\n\t\tfor (const language of this.languagePerId.values()) {\n\t\t\tlanguage.triggerAllDiagnostics();\n\t\t}\n\t}\n\n\tprivate populateService(): void {\n\t\tthis.fileConfigurationManager.reset();\n\n\t\tfor (const language of this.languagePerId.values()) {\n\t\t\tlanguage.reInitialize();\n\t\t}\n\t}\n\n\tprivate async diagnosticsReceived(\n\t\tkind: DiagnosticKind,\n\t\tresource: vscode.Uri,\n\t\tdiagnostics: Proto.Diagnostic[],\n\t\tspans: Proto.TextSpan[] | undefined,\n\t): Promise<void> {\n\t\tconst language = await this.findLanguage(resource);\n\t\tif (language) {\n\t\t\tlanguage.diagnosticsReceived(\n\t\t\t\tkind,\n\t\t\t\tresource,\n\t\t\t\tthis.createMarkerDatas(diagnostics, language.diagnosticSource),\n\t\t\t\tspans?.map(span => typeConverters.Range.fromTextSpan(span)));\n\t\t}\n\t}\n\n\tprivate configFileDiagnosticsReceived(event: Proto.ConfigFileDiagnosticEvent): void {\n\t\t// See https://github.com/microsoft/TypeScript/issues/10384\n\t\tconst body = event.body;\n\t\tif (!body?.diagnostics || !body.configFile) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.findLanguage(this.client.toResource(body.configFile)).then(language => {\n\t\t\tlanguage?.configFileDiagnosticsReceived(this.client.toResource(body.configFile), body.diagnostics.map(tsDiag => {\n\t\t\t\tconst range = tsDiag.start && tsDiag.end ? typeConverters.Range.fromTextSpan(tsDiag) : new vscode.Range(0, 0, 0, 1);\n\t\t\t\tconst diagnostic = new vscode.Diagnostic(range, tsDiag.text, this.getDiagnosticSeverity(tsDiag));\n\t\t\t\tdiagnostic.source = language.diagnosticSource;\n\t\t\t\treturn diagnostic;\n\t\t\t}));\n\t\t});\n\t}\n\n\tprivate createMarkerDatas(\n\t\tdiagnostics: Proto.Diagnostic[],\n\t\tsource: string\n\t): (vscode.Diagnostic & { reportUnnecessary: any; reportDeprecated: any })[] {\n\t\treturn diagnostics.map(tsDiag => this.tsDiagnosticToVsDiagnostic(tsDiag, source));\n\t}\n\n\tprivate tsDiagnosticToVsDiagnostic(diagnostic: Proto.Diagnostic, source: string): vscode.Diagnostic & { reportUnnecessary: any; reportDeprecated: any } {\n\t\tconst { start, end, text } = diagnostic;\n\t\tconst range = new vscode.Range(typeConverters.Position.fromLocation(start), typeConverters.Position.fromLocation(end));\n\t\tconst converted = new vscode.Diagnostic(range, text, this.getDiagnosticSeverity(diagnostic));\n\t\tconverted.source = diagnostic.source || source;\n\t\tif (diagnostic.code) {\n\t\t\tconverted.code = diagnostic.code;\n\t\t}\n\t\tconst relatedInformation = diagnostic.relatedInformation;\n\t\tif (relatedInformation) {\n\t\t\tconverted.relatedInformation = coalesce(relatedInformation.map((info: any) => {\n\t\t\t\tconst span = info.span;\n\t\t\t\tif (!span) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn new vscode.DiagnosticRelatedInformation(typeConverters.Location.fromTextSpan(this.client.toResource(span.file), span), info.message);\n\t\t\t}));\n\t\t}\n\t\tconst tags: vscode.DiagnosticTag[] = [];\n\t\tif (diagnostic.reportsUnnecessary) {\n\t\t\ttags.push(vscode.DiagnosticTag.Unnecessary);\n\t\t}\n\t\tif (diagnostic.reportsDeprecated) {\n\t\t\ttags.push(vscode.DiagnosticTag.Deprecated);\n\t\t}\n\t\tconverted.tags = tags.length ? tags : undefined;\n\n\t\tconst resultConverted = converted as vscode.Diagnostic & { reportUnnecessary: any; reportDeprecated: any };\n\t\tresultConverted.reportUnnecessary = diagnostic.reportsUnnecessary;\n\t\tresultConverted.reportDeprecated = diagnostic.reportsDeprecated;\n\t\treturn resultConverted;\n\t}\n\n\tprivate getDiagnosticSeverity(diagnostic: Proto.Diagnostic): vscode.DiagnosticSeverity {\n\t\tif (this.reportStyleCheckAsWarnings\n\t\t\t&& this.isStyleCheckDiagnostic(diagnostic.code)\n\t\t\t&& diagnostic.category === PConst.DiagnosticCategory.error\n\t\t) {\n\t\t\treturn vscode.DiagnosticSeverity.Warning;\n\t\t}\n\n\t\tswitch (diagnostic.category) {\n\t\t\tcase PConst.DiagnosticCategory.error:\n\t\t\t\treturn vscode.DiagnosticSeverity.Error;\n\n\t\t\tcase PConst.DiagnosticCategory.warning:\n\t\t\t\treturn vscode.DiagnosticSeverity.Warning;\n\n\t\t\tcase PConst.DiagnosticCategory.suggestion:\n\t\t\t\treturn vscode.DiagnosticSeverity.Hint;\n\n\t\t\tdefault:\n\t\t\t\treturn vscode.DiagnosticSeverity.Error;\n\t\t}\n\t}\n\n\tprivate isStyleCheckDiagnostic(code: number | undefined): boolean {\n\t\treturn typeof code === 'number' && styleCheckDiagnostics.has(code);\n\t}\n}\n","const { MAX_SAFE_COMPONENT_LENGTH } = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst createToken = (name, value, isGlobal) => {\n  // Replace all greedy whitespace to prevent regex dos issues. These regex are\n  // used internally via the safeRe object since all inputs in this library get\n  // normalized first to trim and collapse all extra whitespace. The original\n  // regexes are exported for userland consumption and lower level usage. A\n  // future breaking change could export the safer regex only with a note that\n  // all input should have extra whitespace removed.\n  const safe = value\n    .split('\\\\s*').join('\\\\s{0,1}')\n    .split('\\\\s+').join('\\\\s')\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '[0-9]+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*')\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', '[0-9A-Za-z-]+')\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCE', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, createCustomError, dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nvar aggregationErrorType;\r\n/**\r\n * Throws an Aggregation Error which includes all of the errors that led to this error occurring\r\n * @param message - The message describing the aggregation error (the sourceError details are added to this)\r\n * @param sourceErrors - An array of the errors that caused this situation\r\n */\r\nexport function throwAggregationError(message, sourceErrors) {\r\n    if (!aggregationErrorType) {\r\n        aggregationErrorType = createCustomError(\"AggregationError\", function (self, args) {\r\n            if (args[_DYN_LENGTH /* @min:%2elength */] > 1) {\r\n                // Save the provided errors\r\n                self.errors = args[1];\r\n            }\r\n        });\r\n    }\r\n    var theMessage = message || \"One or more errors occurred.\";\r\n    arrForEach(sourceErrors, function (srcError, idx) {\r\n        theMessage += \"\\n\".concat(idx, \" > \").concat(dumpObj(srcError));\r\n    });\r\n    throw new aggregationErrorType(theMessage, sourceErrors || []);\r\n}\r\n//# sourceMappingURL=AggregationError.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, arrIndexOf, dumpObj, isArray, objDefine, objDefineProp, objForEachKey, objGetOwnPropertyDescriptor } from \"@nevware21/ts-utils\";\r\nimport { UNDEFINED_VALUE } from \"../JavaScriptSDK/InternalConstants\";\r\nimport { _DYN_APPLY, _DYN_HDLR, _DYN_LOGGER, _DYN_PUSH, _DYN_SPLICE, _DYN_THROW_INTERNAL } from \"../__DynamicConstants\";\r\nimport { CFG_HANDLER_LINK, _canMakeDynamic, blockDynamicConversion, throwInvalidAccess } from \"./DynamicSupport\";\r\nvar arrayMethodsToPatch = [\r\n    \"push\",\r\n    \"pop\",\r\n    \"shift\",\r\n    \"unshift\",\r\n    \"splice\"\r\n];\r\nexport var _throwDynamicError = function (logger, name, desc, e) {\r\n    logger && logger[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */](3 /* eLoggingSeverity.DEBUG */, 108 /* _eInternalMessageId.DynamicConfigException */, \"\".concat(desc, \" [\").concat(name, \"] failed - \") + dumpObj(e));\r\n};\r\nfunction _patchArray(state, target, name) {\r\n    if (isArray(target)) {\r\n        // Monkey Patch the methods that might change the array\r\n        arrForEach(arrayMethodsToPatch, function (method) {\r\n            var orgMethod = target[method];\r\n            target[method] = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var result = orgMethod[_DYN_APPLY /* @min:%2eapply */](this, args);\r\n                // items may be added, removed or moved so need to make some new dynamic properties\r\n                _makeDynamicObject(state, target, name, \"Patching\");\r\n                return result;\r\n            };\r\n        });\r\n    }\r\n}\r\nfunction _getOwnPropGetter(target, name) {\r\n    var propDesc = objGetOwnPropertyDescriptor(target, name);\r\n    return propDesc && propDesc.get;\r\n}\r\nfunction _createDynamicProperty(state, theConfig, name, value) {\r\n    // Does not appear to be dynamic so lets make it so\r\n    var detail = {\r\n        n: name,\r\n        h: [],\r\n        trk: function (handler) {\r\n            if (handler && handler.fn) {\r\n                if (arrIndexOf(detail.h, handler) === -1) {\r\n                    // Add this handler to the collection that should be notified when the value changes\r\n                    detail.h[_DYN_PUSH /* @min:%2epush */](handler);\r\n                }\r\n                state.trk(handler, detail);\r\n            }\r\n        },\r\n        clr: function (handler) {\r\n            var idx = arrIndexOf(detail.h, handler);\r\n            if (idx !== -1) {\r\n                detail.h[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n            }\r\n        }\r\n    };\r\n    // Flag to optimize lookup response time by avoiding additional function calls\r\n    var checkDynamic = true;\r\n    var isObjectOrArray = false;\r\n    function _getProperty() {\r\n        if (checkDynamic) {\r\n            isObjectOrArray = isObjectOrArray || _canMakeDynamic(_getProperty, state, value);\r\n            // Make sure that if it's an object that we make it dynamic\r\n            if (value && !value[CFG_HANDLER_LINK] && isObjectOrArray) {\r\n                // It doesn't look like it's already dynamic so lets make sure it's converted the object into a dynamic Config as well\r\n                value = _makeDynamicObject(state, value, name, \"Converting\");\r\n            }\r\n            // If it needed to be converted it now has been\r\n            checkDynamic = false;\r\n        }\r\n        // If there is an active handler then add it to the tracking set of handlers\r\n        var activeHandler = state.act;\r\n        if (activeHandler) {\r\n            detail.trk(activeHandler);\r\n        }\r\n        return value;\r\n    }\r\n    // Tag this getter as our dynamic property and provide shortcut for notifying a change\r\n    _getProperty[state.prop] = {\r\n        chng: function () {\r\n            state.add(detail);\r\n        }\r\n    };\r\n    function _setProperty(newValue) {\r\n        if (value !== newValue) {\r\n            if (!!_getProperty[state.ro] && !state.upd) {\r\n                // field is marked as readonly so return false\r\n                throwInvalidAccess(\"[\" + name + \"] is read-only:\" + dumpObj(theConfig));\r\n            }\r\n            if (checkDynamic) {\r\n                isObjectOrArray = isObjectOrArray || _canMakeDynamic(_getProperty, state, value);\r\n                checkDynamic = false;\r\n            }\r\n            // The value must be a plain object or an array to enforce the reference (in-place updates)\r\n            var isReferenced = isObjectOrArray && _getProperty[state.rf];\r\n            if (isObjectOrArray) {\r\n                // We are about to replace a plain object or an array\r\n                if (isReferenced) {\r\n                    // Reassign the properties from the current value to the same properties from the newValue\r\n                    // This will set properties not in the newValue to undefined\r\n                    objForEachKey(value, function (key) {\r\n                        value[key] = newValue ? newValue[key] : UNDEFINED_VALUE;\r\n                    });\r\n                    // Now assign / re-assign value with all of the keys from newValue\r\n                    try {\r\n                        objForEachKey(newValue, function (key, theValue) {\r\n                            _setDynamicProperty(state, value, key, theValue);\r\n                        });\r\n                        // Now drop newValue so when we assign value later it keeps the existing reference\r\n                        newValue = value;\r\n                    }\r\n                    catch (e) {\r\n                        // Unable to convert to dynamic property so just leave as non-dynamic\r\n                        _throwDynamicError((state.hdlr || {})[_DYN_LOGGER /* @min:%2elogger */], name, \"Assigning\", e);\r\n                        // Mark as not an object or array so we don't try and do this again\r\n                        isObjectOrArray = false;\r\n                    }\r\n                }\r\n                else if (value && value[CFG_HANDLER_LINK]) {\r\n                    // As we are replacing the value, if it's already dynamic then we need to notify the listeners\r\n                    // for every property it has already\r\n                    objForEachKey(value, function (key) {\r\n                        // Check if the value is dynamic\r\n                        var getter = _getOwnPropGetter(value, key);\r\n                        if (getter) {\r\n                            // And if it is tell it's listeners that the value has changed\r\n                            var valueState = getter[state.prop];\r\n                            valueState && valueState.chng();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (newValue !== value) {\r\n                var newIsObjectOrArray = newValue && _canMakeDynamic(_getProperty, state, newValue);\r\n                if (!isReferenced && newIsObjectOrArray) {\r\n                    // As the newValue is an object/array lets preemptively make it dynamic\r\n                    newValue = _makeDynamicObject(state, newValue, name, \"Converting\");\r\n                }\r\n                // Now assign the internal \"value\" to the newValue\r\n                value = newValue;\r\n                isObjectOrArray = newIsObjectOrArray;\r\n            }\r\n            // Cause any listeners to be scheduled for notification\r\n            state.add(detail);\r\n        }\r\n    }\r\n    objDefine(theConfig, detail.n, { g: _getProperty, s: _setProperty });\r\n}\r\nexport function _setDynamicProperty(state, target, name, value) {\r\n    if (target) {\r\n        // To be a dynamic property it needs to have a get function\r\n        var getter = _getOwnPropGetter(target, name);\r\n        var isDynamic = getter && !!getter[state.prop];\r\n        if (!isDynamic) {\r\n            _createDynamicProperty(state, target, name, value);\r\n        }\r\n        else {\r\n            // Looks like it's already dynamic just assign the new value\r\n            target[name] = value;\r\n        }\r\n    }\r\n    return target;\r\n}\r\nexport function _setDynamicPropertyState(state, target, name, flags) {\r\n    if (target) {\r\n        // To be a dynamic property it needs to have a get function\r\n        var getter = _getOwnPropGetter(target, name);\r\n        var isDynamic = getter && !!getter[state.prop];\r\n        var inPlace = flags && flags[0 /* _eSetDynamicPropertyFlags.inPlace */];\r\n        var rdOnly = flags && flags[1 /* _eSetDynamicPropertyFlags.readOnly */];\r\n        var blkProp = flags && flags[2 /* _eSetDynamicPropertyFlags.blockDynamicProperty */];\r\n        if (!isDynamic) {\r\n            if (blkProp) {\r\n                try {\r\n                    // Attempt to mark the target as blocked from conversion\r\n                    blockDynamicConversion(target);\r\n                }\r\n                catch (e) {\r\n                    _throwDynamicError((state.hdlr || {})[_DYN_LOGGER /* @min:%2elogger */], name, \"Blocking\", e);\r\n                }\r\n            }\r\n            try {\r\n                // Make sure it's dynamic so that we can tag the property as per the state\r\n                _setDynamicProperty(state, target, name, target[name]);\r\n                getter = _getOwnPropGetter(target, name);\r\n            }\r\n            catch (e) {\r\n                // Unable to convert to dynamic property so just leave as non-dynamic\r\n                _throwDynamicError((state.hdlr || {})[_DYN_LOGGER /* @min:%2elogger */], name, \"State\", e);\r\n            }\r\n        }\r\n        // Assign the optional flags if true\r\n        if (inPlace) {\r\n            getter[state.rf] = inPlace;\r\n        }\r\n        if (rdOnly) {\r\n            getter[state.ro] = rdOnly;\r\n        }\r\n        if (blkProp) {\r\n            getter[state.blkVal] = true;\r\n        }\r\n    }\r\n    return target;\r\n}\r\nexport function _makeDynamicObject(state, target, name, desc) {\r\n    try {\r\n        // Assign target with new value properties (converting into dynamic properties in the process)\r\n        objForEachKey(target, function (key, value) {\r\n            // Assign and/or make the property dynamic\r\n            _setDynamicProperty(state, target, key, value);\r\n        });\r\n        if (!target[CFG_HANDLER_LINK]) {\r\n            // Link the config back to the dynamic config details\r\n            objDefineProp(target, CFG_HANDLER_LINK, {\r\n                get: function () {\r\n                    return state[_DYN_HDLR /* @min:%2ehdlr */];\r\n                }\r\n            });\r\n            _patchArray(state, target, name);\r\n        }\r\n    }\r\n    catch (e) {\r\n        // Unable to convert to dynamic property so just leave as non-dynamic\r\n        _throwDynamicError((state.hdlr || {})[_DYN_LOGGER /* @min:%2elogger */], name, desc, e);\r\n    }\r\n    return target;\r\n}\r\n//# sourceMappingURL=DynamicProperty.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, arrIndexOf, dumpObj, newSymbol, scheduleTimeout } from \"@nevware21/ts-utils\";\r\nimport { throwAggregationError } from \"../JavaScriptSDK/AggregationError\";\r\nimport { _DYN_BLK_VAL, _DYN_CANCEL, _DYN_HDLR, _DYN_LENGTH, _DYN_LOGGER, _DYN_NOTIFY, _DYN_PUSH, _DYN_RD_ONLY, _DYN_SET_DF, _DYN_THROW_INTERNAL } from \"../__DynamicConstants\";\r\nvar symPrefix = \"[[ai_\";\r\nvar symPostfix = \"]]\";\r\nexport function _createState(cfgHandler) {\r\n    var _a;\r\n    var dynamicPropertySymbol = newSymbol(symPrefix + \"get\" + cfgHandler.uid + symPostfix);\r\n    var dynamicPropertyReadOnly = newSymbol(symPrefix + \"ro\" + cfgHandler.uid + symPostfix);\r\n    var dynamicPropertyReferenced = newSymbol(symPrefix + \"rf\" + cfgHandler.uid + symPostfix);\r\n    var dynamicPropertyBlockValue = newSymbol(symPrefix + \"blkVal\" + cfgHandler.uid + symPostfix);\r\n    var dynamicPropertyDetail = newSymbol(symPrefix + \"dtl\" + cfgHandler.uid + symPostfix);\r\n    var _waitingHandlers = null;\r\n    var _watcherTimer = null;\r\n    var theState;\r\n    function _useHandler(activeHandler, callback) {\r\n        var prevWatcher = theState.act;\r\n        try {\r\n            theState.act = activeHandler;\r\n            if (activeHandler && activeHandler[dynamicPropertyDetail]) {\r\n                // Clear out the previously tracked details for this handler, so that access are re-evaluated\r\n                arrForEach(activeHandler[dynamicPropertyDetail], function (detail) {\r\n                    detail.clr(activeHandler);\r\n                });\r\n                activeHandler[dynamicPropertyDetail] = [];\r\n            }\r\n            callback({\r\n                cfg: cfgHandler.cfg,\r\n                set: cfgHandler.set.bind(cfgHandler),\r\n                setDf: cfgHandler[_DYN_SET_DF /* @min:%2esetDf */].bind(cfgHandler),\r\n                ref: cfgHandler.ref.bind(cfgHandler),\r\n                rdOnly: cfgHandler[_DYN_RD_ONLY /* @min:%2erdOnly */].bind(cfgHandler)\r\n            });\r\n        }\r\n        catch (e) {\r\n            var logger = cfgHandler[_DYN_LOGGER /* @min:%2elogger */];\r\n            if (logger) {\r\n                // Don't let one individual failure break everyone\r\n                logger[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */](1 /* eLoggingSeverity.CRITICAL */, 107 /* _eInternalMessageId.ConfigWatcherException */, dumpObj(e));\r\n            }\r\n            // Re-throw the exception so that any true \"error\" is reported back to the called\r\n            throw e;\r\n        }\r\n        finally {\r\n            theState.act = prevWatcher || null;\r\n        }\r\n    }\r\n    function _notifyWatchers() {\r\n        if (_waitingHandlers) {\r\n            var notifyHandlers = _waitingHandlers;\r\n            _waitingHandlers = null;\r\n            // Stop any timer as we are running them now anyway\r\n            _watcherTimer && _watcherTimer[_DYN_CANCEL /* @min:%2ecancel */]();\r\n            _watcherTimer = null;\r\n            var watcherFailures_1 = [];\r\n            // Now run the handlers\r\n            arrForEach(notifyHandlers, function (handler) {\r\n                if (handler) {\r\n                    if (handler[dynamicPropertyDetail]) {\r\n                        arrForEach(handler[dynamicPropertyDetail], function (detail) {\r\n                            // Clear out this handler from  previously tracked details, so that access are re-evaluated\r\n                            detail.clr(handler);\r\n                        });\r\n                        handler[dynamicPropertyDetail] = null;\r\n                    }\r\n                    // The handler may have self removed as part of another handler so re-check\r\n                    if (handler.fn) {\r\n                        try {\r\n                            _useHandler(handler, handler.fn);\r\n                        }\r\n                        catch (e) {\r\n                            // Don't let a single failing watcher cause other watches to fail\r\n                            watcherFailures_1[_DYN_PUSH /* @min:%2epush */](e);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            // During notification we may have had additional updates -- so notify those updates as well\r\n            if (_waitingHandlers) {\r\n                try {\r\n                    _notifyWatchers();\r\n                }\r\n                catch (e) {\r\n                    watcherFailures_1[_DYN_PUSH /* @min:%2epush */](e);\r\n                }\r\n            }\r\n            if (watcherFailures_1[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                throwAggregationError(\"Watcher error(s): \", watcherFailures_1);\r\n            }\r\n        }\r\n    }\r\n    function _addWatcher(detail) {\r\n        if (detail && detail.h[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            if (!_waitingHandlers) {\r\n                _waitingHandlers = [];\r\n            }\r\n            if (!_watcherTimer) {\r\n                _watcherTimer = scheduleTimeout(function () {\r\n                    _watcherTimer = null;\r\n                    _notifyWatchers();\r\n                }, 0);\r\n            }\r\n            // Add all of the handlers for this detail (if not already present) - using normal for-loop for performance\r\n            for (var idx = 0; idx < detail.h[_DYN_LENGTH /* @min:%2elength */]; idx++) {\r\n                var handler = detail.h[idx];\r\n                // Add this handler to the collection of handlers to re-execute\r\n                if (handler && arrIndexOf(_waitingHandlers, handler) === -1) {\r\n                    _waitingHandlers[_DYN_PUSH /* @min:%2epush */](handler);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function _trackHandler(handler, detail) {\r\n        if (handler) {\r\n            var details = handler[dynamicPropertyDetail] = handler[dynamicPropertyDetail] || [];\r\n            if (arrIndexOf(details, detail) === -1) {\r\n                // If this detail is not already listed as tracked then add it so that we re-evaluate it's usage\r\n                details[_DYN_PUSH /* @min:%2epush */](detail);\r\n            }\r\n        }\r\n    }\r\n    theState = (_a = {\r\n            prop: dynamicPropertySymbol,\r\n            ro: dynamicPropertyReadOnly,\r\n            rf: dynamicPropertyReferenced\r\n        },\r\n        _a[_DYN_BLK_VAL /* @min:blkVal */] = dynamicPropertyBlockValue,\r\n        _a[_DYN_HDLR /* @min:hdlr */] = cfgHandler,\r\n        _a.add = _addWatcher,\r\n        _a[_DYN_NOTIFY /* @min:notify */] = _notifyWatchers,\r\n        _a.use = _useHandler,\r\n        _a.trk = _trackHandler,\r\n        _a);\r\n    return theState;\r\n}\r\n//# sourceMappingURL=DynamicState.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { dumpObj, isUndefined, objDefine, objForEachKey } from \"@nevware21/ts-utils\";\r\nimport { createUniqueNamespace } from \"../JavaScriptSDK/DataCacheHelper\";\r\nimport { STR_NOT_DYNAMIC_ERROR } from \"../JavaScriptSDK/InternalConstants\";\r\nimport { _DYN_BLK_VAL, _DYN_LOGGER, _DYN_NOTIFY, _DYN_RD_ONLY, _DYN_SET_DF, _DYN_THROW_INTERNAL, _DYN_WARN_TO_CONSOLE, _DYN_WATCH } from \"../__DynamicConstants\";\r\nimport { _applyDefaultValue } from \"./ConfigDefaults\";\r\nimport { _makeDynamicObject, _setDynamicProperty, _setDynamicPropertyState, _throwDynamicError } from \"./DynamicProperty\";\r\nimport { _createState } from \"./DynamicState\";\r\nimport { CFG_HANDLER_LINK, _cfgDeepCopy, getDynamicConfigHandler, throwInvalidAccess } from \"./DynamicSupport\";\r\n/**\r\n * Identifies a function which will be re-called whenever any of it's accessed configuration values\r\n * change.\r\n * @param configHandler - The callback that will be called for the initial request and then whenever any\r\n * accessed configuration changes are identified.\r\n */\r\nfunction _createAndUseHandler(state, configHandler) {\r\n    var handler = {\r\n        fn: configHandler,\r\n        rm: function () {\r\n            // Clear all references to the handler so it can be garbage collected\r\n            // This will also cause this handler to never get called and eventually removed\r\n            handler.fn = null;\r\n            state = null;\r\n            configHandler = null;\r\n        }\r\n    };\r\n    objDefine(handler, \"toJSON\", { v: function () { return \"WatcherHandler\" + (handler.fn ? \"\" : \"[X]\"); } });\r\n    state.use(handler, configHandler);\r\n    return handler;\r\n}\r\n/**\r\n * Creates the dynamic config handler and associates with the target config as the root object\r\n * @param target - The config that you want to be root of the dynamic config\r\n * @param inPlace - Should the passed config be converted in-place or a new proxy returned\r\n * @returns The existing dynamic handler or a new instance with the provided config values\r\n */\r\nfunction _createDynamicHandler(logger, target, inPlace) {\r\n    var _a;\r\n    var dynamicHandler = getDynamicConfigHandler(target);\r\n    if (dynamicHandler) {\r\n        // The passed config is already dynamic so return it's tracker\r\n        return dynamicHandler;\r\n    }\r\n    var uid = createUniqueNamespace(\"dyncfg\", true);\r\n    var newTarget = (target && inPlace !== false) ? target : _cfgDeepCopy(target);\r\n    var theState;\r\n    function _notifyWatchers() {\r\n        theState[_DYN_NOTIFY /* @min:%2enotify */]();\r\n    }\r\n    function _setValue(target, name, value) {\r\n        try {\r\n            target = _setDynamicProperty(theState, target, name, value);\r\n        }\r\n        catch (e) {\r\n            // Unable to convert to dynamic property so just leave as non-dynamic\r\n            _throwDynamicError(logger, name, \"Setting value\", e);\r\n        }\r\n        return target[name];\r\n    }\r\n    function _watch(configHandler) {\r\n        return _createAndUseHandler(theState, configHandler);\r\n    }\r\n    function _block(configHandler, allowUpdate) {\r\n        theState.use(null, function (details) {\r\n            var prevUpd = theState.upd;\r\n            try {\r\n                if (!isUndefined(allowUpdate)) {\r\n                    theState.upd = allowUpdate;\r\n                }\r\n                configHandler(details);\r\n            }\r\n            finally {\r\n                theState.upd = prevUpd;\r\n            }\r\n        });\r\n    }\r\n    function _ref(target, name) {\r\n        var _a;\r\n        // Make sure it's dynamic and mark as referenced with it's current value\r\n        return _setDynamicPropertyState(theState, target, name, (_a = {}, _a[0 /* _eSetDynamicPropertyFlags.inPlace */] = true, _a))[name];\r\n    }\r\n    function _rdOnly(target, name) {\r\n        var _a;\r\n        // Make sure it's dynamic and mark as readonly with it's current value\r\n        return _setDynamicPropertyState(theState, target, name, (_a = {}, _a[1 /* _eSetDynamicPropertyFlags.readOnly */] = true, _a))[name];\r\n    }\r\n    function _blkPropValue(target, name) {\r\n        var _a;\r\n        // Make sure it's dynamic and mark as readonly with it's current value\r\n        return _setDynamicPropertyState(theState, target, name, (_a = {}, _a[2 /* _eSetDynamicPropertyFlags.blockDynamicProperty */] = true, _a))[name];\r\n    }\r\n    function _applyDefaults(theConfig, defaultValues) {\r\n        if (defaultValues) {\r\n            // Resolve/apply the defaults\r\n            objForEachKey(defaultValues, function (name, value) {\r\n                // Sets the value and makes it dynamic (if it doesn't already exist)\r\n                _applyDefaultValue(cfgHandler, theConfig, name, value);\r\n            });\r\n        }\r\n        return theConfig;\r\n    }\r\n    var cfgHandler = (_a = {\r\n            uid: null,\r\n            cfg: newTarget\r\n        },\r\n        _a[_DYN_LOGGER /* @min:logger */] = logger,\r\n        _a[_DYN_NOTIFY /* @min:notify */] = _notifyWatchers,\r\n        _a.set = _setValue,\r\n        _a[_DYN_SET_DF /* @min:setDf */] = _applyDefaults,\r\n        _a[_DYN_WATCH /* @min:watch */] = _watch,\r\n        _a.ref = _ref,\r\n        _a[_DYN_RD_ONLY /* @min:rdOnly */] = _rdOnly,\r\n        _a[_DYN_BLK_VAL /* @min:blkVal */] = _blkPropValue,\r\n        _a._block = _block,\r\n        _a);\r\n    objDefine(cfgHandler, \"uid\", {\r\n        c: false,\r\n        e: false,\r\n        w: false,\r\n        v: uid\r\n    });\r\n    theState = _createState(cfgHandler);\r\n    // Setup tracking for all defined default keys\r\n    _makeDynamicObject(theState, newTarget, \"config\", \"Creating\");\r\n    return cfgHandler;\r\n}\r\n/**\r\n * Log an invalid access message to the console\r\n * @param message\r\n */\r\nfunction _logInvalidAccess(logger, message) {\r\n    if (logger) {\r\n        logger[_DYN_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](message);\r\n        logger[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */](2 /* eLoggingSeverity.WARNING */, 108 /* _eInternalMessageId.DynamicConfigException */, message);\r\n    }\r\n    else {\r\n        // We don't have a logger so just throw an exception\r\n        throwInvalidAccess(message);\r\n    }\r\n}\r\n/**\r\n * Create or return a dynamic version of the passed config, if it is not already dynamic\r\n * @param config - The config to be converted into a dynamic config\r\n * @param defaultConfig - The default values to apply on the config if the properties don't already exist\r\n * @param inPlace - Should the config be converted in-place into a dynamic config or a new instance returned, defaults to true\r\n * @returns The dynamic config handler for the config (whether new or existing)\r\n */\r\nexport function createDynamicConfig(config, defaultConfig, logger, inPlace) {\r\n    var dynamicHandler = _createDynamicHandler(logger, config || {}, inPlace);\r\n    if (defaultConfig) {\r\n        dynamicHandler[_DYN_SET_DF /* @min:%2esetDf */](dynamicHandler.cfg, defaultConfig);\r\n    }\r\n    return dynamicHandler;\r\n}\r\n/**\r\n * Watch and track changes for accesses to the current config, the provided config MUST already be\r\n * a dynamic config or a child accessed via the dynamic config\r\n * @param config\r\n * @param configHandler\r\n * @param logger - The logger instance to use if there is no existing handler\r\n * @returns A watcher handler instance that can be used to remove itself when being unloaded\r\n * @throws TypeError if the provided config is not a dynamic config instance\r\n */\r\nexport function onConfigChange(config, configHandler, logger) {\r\n    var handler = config[CFG_HANDLER_LINK] || config;\r\n    if (handler.cfg && (handler.cfg === config || handler.cfg[CFG_HANDLER_LINK] === handler)) {\r\n        return handler[_DYN_WATCH /* @min:%2ewatch */](configHandler);\r\n    }\r\n    _logInvalidAccess(logger, STR_NOT_DYNAMIC_ERROR + dumpObj(config));\r\n    return createDynamicConfig(config, null, logger)[_DYN_WATCH /* @min:%2ewatch */](configHandler);\r\n}\r\n//# sourceMappingURL=DynamicConfig.js.map","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nvar InstantiationStatus;\n(function (InstantiationStatus) {\n    InstantiationStatus[InstantiationStatus[\"NOT_INSTANTIATED\"] = 0] = \"NOT_INSTANTIATED\";\n    InstantiationStatus[InstantiationStatus[\"INSTANTIATING\"] = 1] = \"INSTANTIATING\";\n    InstantiationStatus[InstantiationStatus[\"INSTANTIATED\"] = 2] = \"INSTANTIATED\";\n})(InstantiationStatus || (InstantiationStatus = {}));\nexport class BaseTelemetrySender {\n    constructor(key, clientFactory) {\n        // Whether or not the client has been instantiated\n        this._instantiationStatus = InstantiationStatus.NOT_INSTANTIATED;\n        // Queues used to store events until the sender is ready\n        this._eventQueue = [];\n        this._exceptionQueue = [];\n        this._clientFactory = clientFactory;\n        this._key = key;\n    }\n    /**\n     * Sends the event to the passed in telemetry client\n     * The sender does no telemetry level checks as those are done by the reporter.\n     * @param eventName The name of the event to log\n     * @param data The data contanied in the event\n     */\n    sendEventData(eventName, data) {\n        if (!this._telemetryClient) {\n            if (this._instantiationStatus !== InstantiationStatus.INSTANTIATED) {\n                this._eventQueue.push({ eventName, data });\n            }\n            return;\n        }\n        this._telemetryClient.logEvent(eventName, data);\n    }\n    /**\n     * Sends an exception to the passed in telemetry client\n     * The sender does no telemetry level checks as those are done by the reporter.\n     * @param exception The exception to collect\n     * @param data Data associated with the exception\n     */\n    sendErrorData(exception, data) {\n        if (!this._telemetryClient) {\n            if (this._instantiationStatus !== InstantiationStatus.INSTANTIATED) {\n                this._exceptionQueue.push({ exception, data });\n            }\n            return;\n        }\n        const errorData = { stack: exception.stack, message: exception.message, name: exception.name };\n        if (data) {\n            const errorProperties = data.properties || data;\n            data.properties = { ...errorProperties, ...errorData };\n        }\n        else {\n            data = { properties: errorData };\n        }\n        this._telemetryClient.logEvent(\"unhandlederror\", data);\n    }\n    /**\n     * Flushes the buffered telemetry data\n     */\n    async flush() {\n        return this._telemetryClient?.flush();\n    }\n    async dispose() {\n        if (this._telemetryClient) {\n            await this._telemetryClient.dispose();\n            this._telemetryClient = undefined;\n        }\n        return;\n    }\n    /**\n     * Flushes the queued events that existed before the client was instantiated\n     */\n    _flushQueues() {\n        this._eventQueue.forEach(({ eventName, data }) => this.sendEventData(eventName, data));\n        this._eventQueue = [];\n        this._exceptionQueue.forEach(({ exception, data }) => this.sendErrorData(exception, data));\n        this._exceptionQueue = [];\n    }\n    /**\n     * Instantiates the telemetry client to make the sender \"active\"\n     */\n    instantiateSender() {\n        if (this._instantiationStatus !== InstantiationStatus.NOT_INSTANTIATED) {\n            return;\n        }\n        this._instantiationStatus = InstantiationStatus.INSTANTIATING;\n        // Call the client factory to get the client and then let it know it's instatntiated\n        this._clientFactory(this._key).then(client => {\n            this._telemetryClient = client;\n            this._instantiationStatus = InstantiationStatus.INSTANTIATED;\n            this._flushQueues();\n        }).catch(err => {\n            console.error(err);\n            // If it failed to instntiate, then we don't want to try again.\n            // So we mark it as instantiated. See #94\n            this._instantiationStatus = InstantiationStatus.INSTANTIATED;\n        });\n    }\n}\n//# sourceMappingURL=baseTelemetrySender.js.map","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nexport class TelemetryUtil {\n    static applyReplacements(data, replacementOptions) {\n        for (const key of Object.keys(data)) {\n            for (const option of replacementOptions) {\n                if (option.lookup.test(key)) {\n                    if (option.replacementString !== undefined) {\n                        data[key] = option.replacementString;\n                    }\n                    else {\n                        delete data[key];\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Given a key / connection string checks if it is a valid 1DS key\n     * @param key The key to check if it's a valid 1DS key\n     */\n    static shouldUseOneDataSystemSDK(key) {\n        // Simple to check to ensure the key is the right length and the dashes are in the right spot\n        return (key.length === 74 &&\n            key[32] === \"-\" &&\n            key[41] === \"-\" &&\n            key[46] === \"-\" &&\n            key[51] === \"-\" &&\n            key[56] === \"-\" &&\n            key[69] === \"-\");\n    }\n    // This also includes the common properties which core mixes in\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.nodeArch\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.uikind\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.remotename\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.isnewappinstall\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.product\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.telemetryclientversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    static getAdditionalCommonProperties(osShim) {\n        return {\n            \"common.os\": osShim.platform,\n            \"common.nodeArch\": osShim.architecture,\n            \"common.platformversion\": (osShim.release || \"\").replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, \"$1$2$3\"),\n            // Do not change this string as it gets found and replaced upon packaging\n            \"common.telemetryclientversion\": \"0.9.8\"\n        };\n    }\n    // Get singleton instance of TelemetryUtil\n    static getInstance() {\n        if (!TelemetryUtil._instance) {\n            TelemetryUtil._instance = new TelemetryUtil();\n        }\n        return TelemetryUtil._instance;\n    }\n}\n//# sourceMappingURL=util.js.map","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nexport class BaseTelemetryReporter {\n    constructor(telemetrySender, vscodeAPI, initializationOptions) {\n        this.telemetrySender = telemetrySender;\n        this.vscodeAPI = vscodeAPI;\n        this.userOptIn = false;\n        this.errorOptIn = false;\n        this.disposables = [];\n        this._onDidChangeTelemetryLevel = new this.vscodeAPI.EventEmitter();\n        this.onDidChangeTelemetryLevel = this._onDidChangeTelemetryLevel.event;\n        this.telemetryLogger = this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender, initializationOptions);\n        // Keep track of the user's opt-in status\n        this.updateUserOptIn();\n        this.telemetryLogger.onDidChangeEnableStates(() => {\n            this.updateUserOptIn();\n        });\n    }\n    /**\n     * Updates the user's telemetry opt-in status\n     */\n    updateUserOptIn() {\n        this.errorOptIn = this.telemetryLogger.isErrorsEnabled;\n        this.userOptIn = this.telemetryLogger.isUsageEnabled;\n        // The sender is lazy loaded so if telemetry is off it's not loaded in\n        if (this.telemetryLogger.isErrorsEnabled || this.telemetryLogger.isUsageEnabled) {\n            this.telemetrySender.instantiateSender();\n        }\n        this._onDidChangeTelemetryLevel.fire(this.telemetryLevel);\n    }\n    get telemetryLevel() {\n        if (this.errorOptIn && this.userOptIn) {\n            return \"all\";\n        }\n        else if (this.errorOptIn) {\n            return \"error\";\n        }\n        else {\n            return \"off\";\n        }\n    }\n    /**\n     * Internal function which logs telemetry events and takes extra options.\n     * @param eventName The name of the event\n     * @param properties The properties of the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures\n     * @param dangerous Whether or not to ignore telemetry level\n     */\n    internalSendTelemetryEvent(eventName, properties, measurements, dangerous) {\n        // If it's dangerous we skip going through the logger as the logger checks opt-in status, etc.\n        if (dangerous) {\n            this.telemetrySender.sendEventData(eventName, { properties, measurements });\n        }\n        else {\n            this.telemetryLogger.logUsage(eventName, { properties, measurements });\n        }\n    }\n    /**\n     * Given an event name, some properties, and measurements sends a telemetry event.\n     * Properties are sanitized on best-effort basis to remove sensitive data prior to sending.\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     */\n    sendTelemetryEvent(eventName, properties, measurements) {\n        this.internalSendTelemetryEvent(eventName, properties, measurements, false);\n    }\n    /**\n     * Sends a raw (unsanitized) telemetry event with the given properties and measurements.\n     * NOTE: This will not be logged to the output channel due to API limitations.\n     * @param eventName The name of the event\n     * @param properties The set of properties to add to the event in the form of a string key value pair\n     * @param measurements The set of measurements to add to the event in the form of a string key  number value pair\n     */\n    sendRawTelemetryEvent(eventName, properties, measurements) {\n        const modifiedProperties = { ...properties };\n        for (const propertyKey of Object.keys(modifiedProperties ?? {})) {\n            const propertyValue = modifiedProperties[propertyKey];\n            if (typeof propertyKey === \"string\" && propertyValue !== undefined) {\n                // Trusted values are not sanitized, which is what we want for raw telemetry\n                modifiedProperties[propertyKey] = new this.vscodeAPI.TelemetryTrustedValue(typeof propertyValue === \"string\" ? propertyValue : propertyValue.value);\n            }\n        }\n        this.sendTelemetryEvent(eventName, modifiedProperties, measurements);\n    }\n    /**\n     * **DANGEROUS** Given an event name, some properties, and measurements sends a telemetry event without checking telemetry setting\n     * Do not use unless in a controlled environment i.e. sending telmetry from a CI pipeline or testing during development\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures, defaults to true\n     */\n    sendDangerousTelemetryEvent(eventName, properties, measurements) {\n        // Since telemetry is probably off when sending dangerously, we must start the sender\n        this.telemetrySender.instantiateSender();\n        this.internalSendTelemetryEvent(eventName, properties, measurements, true);\n    }\n    /**\n     * Internal function which logs telemetry error events and takes extra options.\n     * @param eventName The name of the event\n     * @param properties The properties of the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures\n     * @param dangerous Whether or not to ignore telemetry level\n     */\n    internalSendTelemetryErrorEvent(eventName, properties, measurements, dangerous) {\n        if (dangerous) {\n            this.telemetrySender.sendEventData(eventName, { properties, measurements });\n        }\n        else {\n            this.telemetryLogger.logError(eventName, { properties, measurements });\n        }\n    }\n    /**\n     * Given an event name, some properties, and measurements sends an error event\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     */\n    sendTelemetryErrorEvent(eventName, properties, measurements) {\n        this.internalSendTelemetryErrorEvent(eventName, properties, measurements, false);\n    }\n    /**\n     * **DANGEROUS** Given an event name, some properties, and measurements sends a telemetry error event without checking telemetry setting\n     * Do not use unless in a controlled environment i.e. sending telmetry from a CI pipeline or testing during development\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to run the properties and measures through sanitiziation, defaults to true\n     */\n    sendDangerousTelemetryErrorEvent(eventName, properties, measurements) {\n        // Since telemetry is probably off when sending dangerously, we must start the sender\n        this.telemetrySender.instantiateSender();\n        this.internalSendTelemetryErrorEvent(eventName, properties, measurements, true);\n    }\n    /**\n     * Disposes of the telemetry reporter\n     */\n    async dispose() {\n        await this.telemetrySender.dispose();\n        this.telemetryLogger.dispose();\n        return Promise.all(this.disposables.map(d => d.dispose()));\n    }\n}\n//# sourceMappingURL=baseTelemetryReporter.js.map","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nimport * as vscode from \"vscode\";\nimport { oneDataSystemClientFactory } from \"../common/1dsClientFactory\";\nimport { appInsightsClientFactory } from \"../common/appInsightsClientFactory\";\nimport { BaseTelemetryReporter } from \"../common/baseTelemetryReporter\";\nimport { BaseTelemetrySender } from \"../common/baseTelemetrySender\";\nimport { TelemetryUtil } from \"../common/util\";\nfunction getBrowserRelease(navigator) {\n    if (navigator.userAgentData) {\n        const browser = navigator.userAgentData.brands[navigator.userAgentData.brands.length - 1];\n        return `${navigator.userAgentData.platform} - ${browser?.brand} v${browser?.version}}`;\n    }\n    else {\n        // clean the user agent using the logic from here:\n        // https://github.com/microsoft/vscode/blob/main/src/vs/workbench/services/telemetry/browser/workbenchCommonProperties.ts#L14C1-L21C2\n        return navigator.userAgent.replace(/(\\d+\\.\\d+)(\\.\\d+)+/g, \"$1\");\n    }\n}\nexport default class TelemetryReporter extends BaseTelemetryReporter {\n    constructor(connectionString, replacementOptions) {\n        let clientFactory = (connectionString) => appInsightsClientFactory(connectionString, vscode.env.machineId, vscode.env.sessionId, undefined, replacementOptions);\n        // If key is usable by 1DS use the 1DS SDk\n        if (TelemetryUtil.shouldUseOneDataSystemSDK(connectionString)) {\n            clientFactory = (key) => oneDataSystemClientFactory(key, vscode);\n        }\n        const osShim = {\n            release: getBrowserRelease(navigator),\n            platform: \"web\",\n            architecture: \"web\",\n        };\n        const sender = new BaseTelemetrySender(connectionString, clientFactory);\n        // AIF is no longer supported\n        if (connectionString && (connectionString.indexOf(\"AIF\") === 0)) {\n            throw new Error(\"AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions\");\n        }\n        super(sender, vscode, { additionalCommonProperties: TelemetryUtil.getAdditionalCommonProperties(osShim) });\n    }\n}\n//# sourceMappingURL=telemetryReporter.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BreezeChannelIdentifier } from \"@microsoft/applicationinsights-common\";\nimport { TelemetryUtil } from \"./util\";\nexport const appInsightsClientFactory = async (connectionString, machineId, sessionId, xhrOverride, replacementOptions) => {\n    let appInsightsClient;\n    try {\n        const basicAISDK = await import /* webpackMode: \"eager\" */(\"@microsoft/applicationinsights-web-basic\");\n        const extensionConfig = {};\n        if (xhrOverride) {\n            // Configure the channel to use a XHR Request override since it's not available in node\n            const channelConfig = {\n                alwaysUseXhrOverride: true,\n                httpXHROverride: xhrOverride\n            };\n            extensionConfig[BreezeChannelIdentifier] = channelConfig;\n        }\n        let instrumentationKey;\n        if (!connectionString.startsWith(\"InstrumentationKey=\")) {\n            instrumentationKey = connectionString;\n        }\n        const authConfig = instrumentationKey ? { instrumentationKey } : { connectionString };\n        appInsightsClient = new basicAISDK.ApplicationInsights({\n            ...authConfig,\n            disableAjaxTracking: true,\n            disableExceptionTracking: true,\n            disableFetchTracking: true,\n            disableCorrelationHeaders: true,\n            disableCookiesUsage: true,\n            autoTrackPageVisitTime: false,\n            emitLineDelimitedJson: false,\n            disableInstrumentationKeyValidation: true,\n            extensionConfig,\n        });\n    }\n    catch (e) {\n        return Promise.reject(e);\n    }\n    // Sets the appinsights client into a standardized form\n    const telemetryClient = {\n        logEvent: (eventName, data) => {\n            const properties = { ...data?.properties, ...data?.measurements };\n            if (replacementOptions?.length) {\n                TelemetryUtil.applyReplacements(properties, replacementOptions);\n            }\n            appInsightsClient?.track({\n                name: eventName,\n                data: properties,\n                baseType: \"EventData\",\n                ext: { user: { id: machineId, authId: machineId }, app: { sesId: sessionId } },\n                baseData: { name: eventName, properties: data?.properties, measurements: data?.measurements }\n            });\n        },\n        flush: async () => {\n            appInsightsClient?.flush(false);\n        },\n        dispose: async () => {\n            const unloadPromise = new Promise((resolve) => {\n                appInsightsClient?.unload(true, () => {\n                    resolve();\n                    appInsightsClient = undefined;\n                }, 1000);\n            });\n            return unloadPromise;\n        }\n    };\n    return telemetryClient;\n};\n//# sourceMappingURL=appInsightsClientFactory.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * Configures 1DS properly and returns the core client object\n * @param key The ingestion key\n * @param xhrOverride An optional override to use for requests instead of the XHTMLRequest object. Useful for node environments\n * @returns The AI core object\n */\nconst getAICore = async (key, vscodeAPI, xhrOverride) => {\n    const oneDs = await import(/* webpackMode: \"eager\" */ \"@microsoft/1ds-core-js\");\n    const postPlugin = await import(/* webpackMode: \"eager\" */ \"@microsoft/1ds-post-js\");\n    const appInsightsCore = new oneDs.AppInsightsCore();\n    const collectorChannelPlugin = new postPlugin.PostChannel();\n    // Configure the app insights core to send to collector++ and disable logging of debug info\n    const coreConfig = {\n        instrumentationKey: key,\n        endpointUrl: \"https://mobile.events.data.microsoft.com/OneCollector/1.0\",\n        loggingLevelTelemetry: 0,\n        loggingLevelConsole: 0,\n        disableCookiesUsage: true,\n        disableDbgExt: true,\n        disableInstrumentationKeyValidation: true,\n        channels: [[\n                collectorChannelPlugin\n            ]]\n    };\n    if (xhrOverride) {\n        coreConfig.extensionConfig = {};\n        // Configure the channel to use a XHR Request override since it's not available in node\n        const channelConfig = {\n            alwaysUseXhrOverride: true,\n            httpXHROverride: xhrOverride\n        };\n        coreConfig.extensionConfig[collectorChannelPlugin.identifier] = channelConfig;\n    }\n    const config = vscodeAPI.workspace.getConfiguration(\"telemetry\");\n    const internalTesting = config.get(\"internalTesting\");\n    appInsightsCore.initialize(coreConfig, []);\n    appInsightsCore.addTelemetryInitializer((envelope) => {\n        envelope[\"ext\"] = envelope[\"ext\"] ?? {};\n        envelope[\"ext\"][\"web\"] = envelope[\"ext\"][\"web\"] ?? {};\n        envelope[\"ext\"][\"web\"][\"consentDetails\"] = \"{\\\"GPC_DataSharingOptIn\\\":false}\";\n        // Only add the remaining flags when `telemetry.internalTesting` is enabled\n        if (!internalTesting) {\n            return;\n        }\n        envelope[\"ext\"][\"utc\"] = envelope[\"ext\"][\"utc\"] ?? {};\n        // Sets it to be internal only based on Windows UTC flagging\n        envelope[\"ext\"][\"utc\"][\"flags\"] = 0x0000811ECD;\n    });\n    return appInsightsCore;\n};\n/**\n * Configures and creates a telemetry client using the 1DS sdk\n * @param key The ingestion key\n * @param xhrOverride An optional override to use for requests instead of the XHTMLRequest object. Useful for node environments\n */\nexport const oneDataSystemClientFactory = async (key, vscodeAPI, xhrOverride) => {\n    let appInsightsCore = await getAICore(key, vscodeAPI, xhrOverride);\n    const flushOneDS = async () => {\n        try {\n            const flushPromise = new Promise((resolve, reject) => {\n                if (!appInsightsCore) {\n                    resolve();\n                    return;\n                }\n                appInsightsCore.flush(true, (completedFlush) => {\n                    if (!completedFlush) {\n                        reject(\"Failed to flush app 1DS!\");\n                        return;\n                    }\n                });\n            });\n            return flushPromise;\n        }\n        catch (e) {\n            throw new Error(\"Failed to flush 1DS!\\n\" + e.message);\n        }\n    };\n    // Shape the app insights core from 1DS into a standard format\n    const telemetryClient = {\n        logEvent: (eventName, data) => {\n            try {\n                appInsightsCore?.track({\n                    name: eventName,\n                    baseData: { name: eventName, properties: data?.properties, measurements: data?.measurements }\n                });\n            }\n            catch (e) {\n                throw new Error(\"Failed to log event to app insights!\\n\" + e.message);\n            }\n        },\n        flush: flushOneDS,\n        dispose: async () => {\n            const disposePromise = new Promise((resolve) => {\n                if (!appInsightsCore) {\n                    resolve();\n                    return;\n                }\n                appInsightsCore.unload(false, () => {\n                    resolve();\n                    appInsightsCore = undefined;\n                    return;\n                }, 1000);\n            });\n            return disposePromise;\n        }\n    };\n    return telemetryClient;\n};\n//# sourceMappingURL=1dsClientFactory.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.4\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { strShimUndefined } from \"@microsoft/applicationinsights-shims\";\r\nimport { strSubstr, strSubstring } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { random32 } from \"./RandomHelper\";\r\n// Added to help with minfication\r\nexport var Undefined = strShimUndefined;\r\nexport function newGuid() {\r\n    var uuid = generateW3CId();\r\n    return strSubstring(uuid, 0, 8) + \"-\" + strSubstring(uuid, 8, 12) + \"-\" + strSubstring(uuid, 12, 16) + \"-\" + strSubstring(uuid, 16, 20) + \"-\" + strSubstring(uuid, 20);\r\n}\r\n/**\r\n * The strEndsWith() method determines whether a string ends with the characters of a specified string, returning true or false as appropriate.\r\n * @param value - The value to check whether it ends with the search value.\r\n * @param search - The characters to be searched for at the end of the value.\r\n * @returns true if the given search value is found at the end of the string, otherwise false.\r\n */\r\nexport function strEndsWith(value, search) {\r\n    if (value && search) {\r\n        var len = value[_DYN_LENGTH /* @min:%2elength */];\r\n        var start = len - search[_DYN_LENGTH /* @min:%2elength */];\r\n        return strSubstring(value, start >= 0 ? start : 0, len) === search;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * generate W3C trace id\r\n */\r\nexport function generateW3CId() {\r\n    var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n    // rfc4122 version 4 UUID without dashes and with lowercase letters\r\n    var oct = STR_EMPTY, tmp;\r\n    for (var a = 0; a < 4; a++) {\r\n        tmp = random32();\r\n        oct +=\r\n            hexValues[tmp & 0xF] +\r\n                hexValues[tmp >> 4 & 0xF] +\r\n                hexValues[tmp >> 8 & 0xF] +\r\n                hexValues[tmp >> 12 & 0xF] +\r\n                hexValues[tmp >> 16 & 0xF] +\r\n                hexValues[tmp >> 20 & 0xF] +\r\n                hexValues[tmp >> 24 & 0xF] +\r\n                hexValues[tmp >> 28 & 0xF];\r\n    }\r\n    // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\r\n    var clockSequenceHi = hexValues[8 + (random32() & 0x03) | 0];\r\n    return strSubstr(oct, 0, 8) + strSubstr(oct, 9, 4) + \"4\" + strSubstr(oct, 13, 3) + clockSequenceHi + strSubstr(oct, 16, 3) + strSubstr(oct, 19, 12);\r\n}\r\n//# sourceMappingURL=CoreUtils.js.map","// 'path' module extracted from Node.js v8.11.1 (only the posix part)\n// transplited with Babel\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47 /*/*/)\n      break;\n    else\n      code = 47 /*/*/;\n    if (code === 47 /*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 /*.*/ || res.charCodeAt(res.length - 2) !== 46 /*.*/) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/');\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 /*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0) return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47 /*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute) path = '.';\n    if (path.length > 0 && trailingSeparator) path += '/';\n\n    if (isAbsolute) return '/' + path;\n    return path;\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47 /*/*/;\n  },\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to) return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to) return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47 /*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = fromEnd - fromStart;\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47 /*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = toEnd - toStart;\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen;\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47 /*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47 /*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47 /*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47 /*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47 /*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = code === 47 /*/*/;\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          if (!matchedSlash) {\n            end = i;\n            break;\n          }\n        } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1) return '//';\n    return path.slice(0, end);\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) return '';\n      return path.slice(start, end);\n    }\n  },\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1)\n            startDot = i;\n          else if (preDotState !== 1)\n            preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\n    }\n    return _format('/', pathObject);\n  },\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0) return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = code === 47 /*/*/;\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n        } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n    // We saw a non-dot character immediately before the dot\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\n\n    return ret;\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null\n};\n\nposix.posix = posix;\n\nmodule.exports = posix;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { DocumentSelector } from '../configuration/documentSelector';\nimport { LanguageDescription } from '../configuration/languageDescription';\nimport type * as Proto from '../tsServer/protocol/protocol';\nimport * as typeConverters from '../typeConverters';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport FileConfigurationManager from './fileConfigurationManager';\nimport { conditionalRegistration, requireGlobalConfiguration } from './util/dependentRegistration';\n\nclass TypeScriptFormattingProvider implements vscode.DocumentRangeFormattingEditProvider, vscode.OnTypeFormattingEditProvider {\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager\n\t) { }\n\n\tpublic async provideDocumentRangeFormattingEdits(\n\t\tdocument: vscode.TextDocument,\n\t\trange: vscode.Range,\n\t\toptions: vscode.FormattingOptions,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.TextEdit[] | undefined> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tawait this.fileConfigurationManager.ensureConfigurationOptions(document, options, token);\n\n\t\tconst args = typeConverters.Range.toFormattingRequestArgs(file, range);\n\t\tconst response = await this.client.execute('format', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn response.body.map(typeConverters.TextEdit.fromCodeEdit);\n\t}\n\n\tpublic async provideOnTypeFormattingEdits(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\tch: string,\n\t\toptions: vscode.FormattingOptions,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.TextEdit[]> {\n\t\tconst file = this.client.toOpenTsFilePath(document);\n\t\tif (!file) {\n\t\t\treturn [];\n\t\t}\n\n\t\tawait this.fileConfigurationManager.ensureConfigurationOptions(document, options, token);\n\n\t\tconst args: Proto.FormatOnKeyRequestArgs = {\n\t\t\t...typeConverters.Position.toFileLocationRequestArgs(file, position),\n\t\t\tkey: ch\n\t\t};\n\t\tconst response = await this.client.execute('formatonkey', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst result: vscode.TextEdit[] = [];\n\t\tfor (const edit of response.body) {\n\t\t\tconst textEdit = typeConverters.TextEdit.fromCodeEdit(edit);\n\t\t\tconst range = textEdit.range;\n\t\t\t// Work around for https://github.com/microsoft/TypeScript/issues/6700.\n\t\t\t// Check if we have an edit at the beginning of the line which only removes white spaces and leaves\n\t\t\t// an empty line. Drop those edits\n\t\t\tif (range.start.character === 0 && range.start.line === range.end.line && textEdit.newText === '') {\n\t\t\t\tconst lText = document.lineAt(range.start.line).text;\n\t\t\t\t// If the edit leaves something on the line keep the edit (note that the end character is exclusive).\n\t\t\t\t// Keep it also if it removes something else than whitespace\n\t\t\t\tif (lText.trim().length > 0 || lText.length > range.end.character) {\n\t\t\t\t\tresult.push(textEdit);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult.push(textEdit);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tlanguage: LanguageDescription,\n\tclient: ITypeScriptServiceClient,\n\tfileConfigurationManager: FileConfigurationManager\n) {\n\treturn conditionalRegistration([\n\t\trequireGlobalConfiguration(language.id, 'format.enable'),\n\t], () => {\n\t\tconst formattingProvider = new TypeScriptFormattingProvider(client, fileConfigurationManager);\n\t\treturn vscode.Disposable.from(\n\t\t\tvscode.languages.registerOnTypeFormattingEditProvider(selector.syntax, formattingProvider, ';', '}', '\\n'),\n\t\t\tvscode.languages.registerDocumentRangeFormattingEditProvider(selector.syntax, formattingProvider),\n\t\t);\n\t});\n}\n","const compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.b = self.location + \"\";\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t606: 1\n};\n\n// no chunk install function needed\n// no chunk loading\n\n// no HMR\n\n// no HMR manifest","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(3406);\n"],"names":["SampleRate","ProcessLegacy","HttpMethod","DEFAULT_BREEZE_ENDPOINT","DEFAULT_BREEZE_PATH","strNotSpecified","_DYN_INGESTIONENDPOINT","_DYN_TO_STRING","_DYN_MESSAGE","_DYN_STRINGIFY","_DYN_EXCEPTIONS","_DYN_PARSED_STACK","_DYN_PROPERTIES","_DYN_MEASUREMENTS","_DYN_SIZE_IN_BYTES","_DYN_TYPE_NAME","_DYN_SEVERITY_LEVEL","_DYN_PROBLEM_GROUP","_DYN_IS_MANUAL","_DYN__CREATE_FROM_INTERFA1","_DYN_ASSEMBLY","_DYN_FILE_NAME","_DYN_HAS_FULL_STACK","_DYN_LEVEL","_DYN_METHOD","_DYN_LINE","_DYN_DURATION","_DYN_RECEIVED_RESPONSE","dataSanitizeKeyAndAddUniqueness","logger","key","map","origLength","field","name","nameTrunc","dataSanitizeKey","i","uniqueField","undefined","dsPadNumber","dataSanitizeString","value","maxLength","valueTrunc","dataSanitizeUrl","url","dataSanitizeInput","dataSanitizeMessage","message","messageTrunc","dataSanitizeProperties","properties","tempProps_1","prop","e","exception","dataSanitizeMeasurements","measurements","tempMeasurements_1","measure","input","_msgId","inputTrunc","data","num","s","Event","this","aiDataContract","ver","_self","envelopeType","dataType","Trace","severityLevel","msToTimeSpan","totalms","isNaN","ms","Math","round","sec","floor","min","hour","days","PageView","durationMs","id","duration","dataSanitizeId","PageViewPerformance","unused","cs4BaseData","perfTotal","networkConnect","sentRequest","receivedResponse","domProcessing","strError","strStack","strStackDetails","strErrorSrc","strMessage","strDescription","_stringify","convertToString","result","JSON","_formatMessage","theEvent","errorType","evtMessage","_isStackDetails","details","src","obj","_convertStackObj","errorStack","items","_getStackFromErrorObj","errorObj","errorMessage","stack","lines","lp","entry","_getOperaStack","reason","_getErrorType","typeName","results","exec","constructor","_formatErrorCode","Exception","exceptions","_isExceptionInternal","_ExceptionDetails","CreateAutoException","lineNumber","columnNumber","error","evt","errorSrc","_a","stackDetails","CreateFromInterface","ex","prototype","toInterface","_b","problemGroup","isManual","exceptionDetailsInterface","Array","CreateSimpleException","assembly","fileName","line","formatError","outerId","hasFullStack","parsedStack","_isExceptionDetailsInternal","frames","level_1","totalSizeInBytes_1","frame","theFrame","_StackFrame","regex","test","parsedFrame","left","right","size","acceptedLeft","acceptedRight","howMany","splice","_parseStack","exceptionTrunc","dataSanitizeException","_formatStackTrace","sourceFrame","level","method","matches","match","parseInt","sizeInBytes","baseSize","toString","DataPoint","kind","count","max","stdDev","Metric","metrics","dataPoint","_document","_htmlAnchorIdx","_htmlAnchorElement","urlParseHost","inclPort","fullHost","protocol","port","_internalEndpoints","isInternalApplicationInsightsEndpoint","endpointUrl","RemoteDependencyData","absoluteUrl","commandName","success","resultCode","requestAPI","correlationContext","target","type","dependencyKind","dependencySource","dependencyTypeName","dependencyFields","anchorIdx","anchorCache","tempAnchor","parsedUrl","createElement","host","href","pathName","pathname","charAt","AjaxHelperParseDependencyPath","concat","_disableEvents","evtNamespace","LocalStorage","SessionStorage","_canUseSessionStorage","AI","AI_AND_W3C","W3C","Normal","Critical","_storagePrefix","_getVerifiedStorageObject","storageType","uid","Date","storage","name_1","setItem","fail","getItem","_getSessionStorageObject","utlCanUseSessionStorage","reset","utlGetSessionStorage","utlSetSessionStorage","requestContextHeader","requestContextTargetKey","requestContextAppIdFormat","requestIdHeader","traceParentHeader","traceStateHeader","sdkContextHeader","sdkContextHeaderAppIdRequest","requestContextHeaderLowerCase","_aiNameFunc","baseName","aiName","_aiApplication","_aiDevice","_aiLocation","_aiOperation","_aiSession","_aiUser","_aiCloud","_aiInternal","ContextTagKeys","_super","call","applicationVersion","applicationBuild","applicationTypeId","applicationId","applicationLayer","deviceId","deviceIp","deviceLanguage","deviceLocale","deviceModel","deviceFriendlyName","deviceNetwork","deviceNetworkName","deviceOEMName","deviceOS","deviceOSVersion","deviceRoleInstance","deviceRoleName","deviceScreenResolution","deviceType","deviceMachineName","deviceVMName","deviceBrowser","deviceBrowserVersion","locationIp","locationCountry","locationProvince","locationCity","operationId","operationName","operationParentId","operationRootId","operationSyntheticSource","operationCorrelationVector","sessionId","sessionIsFirst","sessionIsNew","userAccountAcquisitionDate","userAccountId","userAgent","userId","userStoreRegion","userAuthUserId","userAnonymousUserAcquisitionDate","userAuthenticatedUserAcquisitionDate","cloudName","cloudRole","cloudRoleVer","cloudRoleInstance","cloudEnvironment","cloudLocation","cloudDeploymentUnit","internalNodeName","internalSdkVersion","internalAgentVersion","internalSnippet","internalSdkSrc","CtxTagKeys","Envelope","_this","sampleRate","tags","time","iKey","Data","baseType","baseData","STR_DURATION","_DYN_TAGS","_DYN_DEVICE_TYPE","_DYN_DATA","_DYN_TRACE_ID","_DYN_DATA_TYPE","_DYN_ENVELOPE_TYPE","_DYN__GET","_DYN_ENQUEUE","_DYN_EVENTS_LIMIT_IN_MEM","_DYN_ITEM","_DYN_EMIT_LINE_DELIMITED_0","_DYN_CLEAR","_DYN_CREATE_NEW","_DYN_MARK_AS_SENT","_DYN_CLEAR_SENT","_DYN_BUFFER_OVERRIDE","_DYN__BUFFER__KEY","_DYN__SENT__BUFFER__KEY","_DYN_CONCAT","_DYN__MAX__BUFFER__SIZE","_DYN_TRIGGER_SEND","_DYN_DIAG_LOG","_DYN_INITIALIZE","_DYN__SENDER","_DYN_ENDPOINT_URL","_DYN_INSTRUMENTATION_KEY","_DYN_CUSTOM_HEADERS","_DYN_MAX_BATCH_SIZE_IN_BY1","_DYN_ONUNLOAD_DISABLE_BEA2","_DYN_IS_BEACON_API_DISABL3","_DYN_ALWAYS_USE_XHR_OVERR4","_DYN_DISABLE_XHR","_DYN_ENABLE_SESSION_STORA5","_DYN__BUFFER","_DYN_ONUNLOAD_DISABLE_FET6","_DYN_DISABLE_SEND_BEACON_7","_DYN_ENABLE_SEND_PROMISE","_DYN_GET_SENDER_INST","_DYN_UNLOAD_TRANSPORTS","_DYN_CONVERT_UNDEFINED","_DYN_MAX_BATCH_INTERVAL","_DYN_SERIALIZE","_DYN__ON_ERROR","_DYN__ON_PARTIAL_SUCCESS","_DYN__ON_SUCCESS","_DYN_ITEMS_RECEIVED","_DYN_ITEMS_ACCEPTED","_DYN_ORI_PAYLOAD","_DYN_BASE_TYPE","_DYN_SAMPLE_RATE","_DYN_EVENTS_SEND_REQUEST","_DYN_GET_SAMPLING_SCORE","strBaseType","strBaseData","strProperties","strTrue","_setValueIf","_extractPropsAndMeasurements","_convertPropsUndefinedToCustomDefinedValue","customUndefinedValue","_createEnvelope","telemetryItem","envelope","startTime","iKeyNoDashes","replace","item","env","envTags","itmExt","ext","itmTags","extUser","user","authId","localId","extApp","app","sesId","extDevice","device","deviceClass","ip","model","web","browserLang","browserVer","browser","envData","envBaseData","envProps","domain","screenRes","userConsent","extOs","os","osVer","extTrace","trace","parentID","tgs","tg","theTags","EnvelopeCreator","Version","_extractPartAExtensions","EnvelopeCreatorInit","EventEnvelopeCreator","customProperties","customMeasurements","eventName","eventData","BaseSendBuffer","config","_buffer","_bufferFullMessageSent","_maxRetryCnt","maxRetryCnt","_set","buffer","payload","cnt","getItems","slice","batchPayloads","payloads","payloadStr_1","join","newLogger","newConfig","canUseSessionStorage","newBuffer","SessionStorageSendBuffer","ArraySendBuffer","__ieDyn","_base","PREVIOUS_KEYS","_namePrefix","namePrefix","bufferItems","_getBuffer","itemsInSentBuffer","previousItems","events","_getItemsFromPreviousKey","prefixEvents","_getPreviousEvents","notDeliveredItems","_removePayloadsFromBuffer","remaining","payloadStr","_getBufferBase","bufferJson","buffer_1","parse","_setBuffer","prefixedKey","transFormedItems_1","internalItem","utlRemoveSessionStorage","BUFFER_KEY","sentElements","unsentItems","sentItems","VERSION","SENT_BUFFER_KEY","MAX_BUFFER_SIZE","Serializer","_serializeObject","source","circularReferenceCheck","output","_serializeStringMap","_serializeArray","contract","isRequired","isHidden","isArray","isPresent","isObj","sources","expectedType","parseFloat","HashCodeScoreGenerator","getHashCodeScore","getHashCode","INT_MAX_VALUE","hash","charCodeAt","abs","SamplingScoreGenerator","hashCodeGenerator","keys","telemetryTrace","random","Sample","_logger","throwInternal","samplingRate","samplingScoreGenerator","isSampledIn","samplingPercentage","UNDEFINED_VALUE","_getResponseText","xhr","responseText","defaultAppInsightsChannelConfig","disableTelemetry","isRetryDisabled","httpXHROverride","isVal","sendPOST","v","transports","retryCodes","EnvelopeTypeCreator","props","currentContextId","bd","uri","refUri","pageType","isLoggedIn","pageTags","pageViewData","exData","baseMetricData","average","sampleCount","remoteDepData","responseCode","Sender","_consecutiveErrors","_retryAt","_paused","_timeoutHandle","_serializer","_stamp_specific_redirects","_headers","priority","identifier","_syncUnloadSender","_offlineListener","_evtNamespace","_endpointUrl","_orgEndpointUrl","_maxBatchSizeInBytes","_beaconSupported","_beaconOnUnloadSupported","_beaconNormalSupported","_customHeaders","_disableTelemetry","_instrumentationKey","_convertUndefined","_isRetryDisabled","_maxBatchInterval","_sessionStorageUsed","_bufferOverrideUsed","_enableSendPromise","_alwaysUseCustomSend","_disableXhr","_fetchKeepAlive","_xhrSend","_fallbackSend","_disableBeaconSplit","_sendPostMgr","_retryCodes","_syncFetchPayload","_xdrOnLoad","xdr","_xhrReadyStateChange","countOfItemsInPayload","readyState","_checkResponsStatus","status","responseURL","response","_getPayloadArr","arr","_validate","diagLogger","_sample","_getEnvelope","defaultEnvelopeIkey","aiEnvelope","constructEnvelope","doNotSendItem","callBack","_serialize","rlt","valid","_batch","_createPayload","headers","_getHeaders","urlString","_doSend","sendInterface","isAsync","markAsSent","payloadData","_getPayload","sendPostFunc","_onSuccess","_getOnComplete","batch","disableXhrSync","disableFetchKeepAlive","_checkMaxSize","incomingPayload","incomingSize","isOnline","responseUrl","res","_appId","appId","_checkAndUpdateEndPointUrl","_resendPayload","length","_isRetriable","_doUnloadSend","_isStringArr","_fetchKeepAliveSender","transport","payloadSize","getSyncFetchPayload","linearFactor","_i","payload_1","delayInSeconds","backOffSlot","pow","backOffDelay","retryAfterTimeSpan","_setRetryTime","_setupTimer","retryInterval","timerValue","_clearScheduledTimer","cancel","statusCode","indexOf","_initDefaults","g","pause","resume","flush","sendReason","onunloadFlush","addHeader","core","extensions","pluginChain","isInitialized","diagLog","parentEvtNamespace","_navigator","_isListening","listenerList","rState","onLine","uState","_currentState","calCurrentState","_enableEvents","body","ononline","enabled","_setOnline","_setOffline","listnerNoticeCheck","newState","callback","offlineState","isListening","unload","win","addListener","rm","index","setOnlineState","createOfflineListener","_addHook","storagePrefix","cfg","senderConfig","getExtCfg","curExtUrl","coreUrl","activeStatus","PENDING","ACTIVE","customHeader","header","bufferOverride","shouldUpdate","instrumentationKey","disableValidation","disableInstrumentationKeyValidation","RegExp","_validateInstrumentationKey","sendPostConfig","onCompleteFuncs","xdrOnComplete","oncomplete","fetchOnComplete","onComplete","resValue","statusText","xhrOnComplete","request","beaconOnRetry","canSend","droppedPayload","thePayload","_onBeaconRetry","isOneDs","disableCredentials","disableBeacon","disableBeaconSync","senderOnCompleteCallBack","_getSendPostMgrConfig","SetConfig","SenderPostManager","customInterface","httpInterface","syncInterface","theTransports","xhrInterface","getFallbackInst","syncTransports","filter","processTelemetry","itemCtx","_getTelCtx","payloadItem","processNext","isCompletelyIdle","getOfflineListener","async","forcedSender","sendRequest","func","manager","_notifySendRequest","ieVer","getOfflineSupport","getUrl","createPayload","shouldProcess","_doTeardown","unloadCtx","unloadState","event","_onError","failed","retry","errors_1","errors","reverse","extracted","itemsReceived","_onPartialSuccess","orig","convertUndefined","BaseTelemetryPlugin","parseConnectionString","connectionString","kvPairs","fields","kv","kvParts","endpointsuffix","locationPrefix","location","_DYN_CONNECTION_STRING","_DYN_INSTRUMENTATIONKEY0","_DYN_USER_OVERRIDE_ENDPOI1","SeverityLevel","Verbose","Information","Warning","Error","defaultConfigValues","diagnosticLogInterval","extensionConfig","ApplicationInsights","_config","AppInsightsCore","_track","track","_initialize","cfgHandler","addUnloadHook","configCs","ikeyPromise","resolve","reject","curCs","ikey","rejected","urlPromise","ingest","cs","initialize","equals","one","other","array","oneKeys","push","sort","otherKeys","every","ServerState","None","Running","server","apiVersion","tsserverVersion","languageServiceEnabled","toCancelOnResourceChange","Set","updateTsserverVersion","updateLanguageServiceEnabled","Errored","tsServerLog","emptyAuthority","inMemoryResourcePrefix","TypeScriptServiceClient","Disposable","context","_onReady","_configuration","pluginPathsProvider","_versionManager","_nodeVersionManager","tracer","typescriptServerSpawner","serverState","lastStart","numberRestarts","_isPromptingAfterCrash","isRestarting","hasServerFatallyCrashedTooManyTimes","loadingIndicator","telemetryReporter","bufferSyncSupport","diagnosticsManager","pluginManager","logDirectoryProvider","cancellerFactory","versionProvider","processFactory","watches","Map","watchEvents","watchChangeTimeout","onCaseInsensitiveFileSystem","services","allModeIds","super","_register","ServerInitializingIndicator","now","p","Promise","rej","promise","serviceConfigurationProvider","loadFromWorkspace","updateConfiguration","TypeScriptPluginPathsProvider","TypeScriptVersionManager","workspaceState","onDidPickNewVersion","restartTsServer","NodeVersionManager","onReady","listen","onDelete","resource","cancelInflightRequestsForResource","deleteAllDiagnosticsInFile","_disposables","onWillChange","vscode","workspace","onDidChangeConfiguration","oldConfiguration","implicitProjectConfiguration","isEqualTo","setCompilerOptionsForInferredProjects","areServiceConfigurationsEqual","VSCodeTelemetryReporter","experimentTelemetryReporter","fullVersionString","DiagnosticsManager","TypeScriptServerSpawner","onDidUpdateConfig","update","configurePlugin","pluginId","onDidChangePlugins","capabilities","useSyntaxServer","ClientCapabilities","ClientCapability","Syntax","EnhancedSyntax","isWeb","isProjectWideIntellisenseOnWebEnabled","Semantic","gte","API","v400","_onDidChangeCapabilities","EventEmitter","onDidChangeCapabilities","isWebAndHasSharedArrayBuffers","webProjectWideIntellisenseEnabled","configuration","dispose","kill","resetWatchers","fromUserAction","info","startService","_onTsServerStarted","onTsServerStarted","_onDiagnosticsReceived","onDiagnosticsReceived","_onConfigDiagnosticsReceived","onConfigDiagnosticsReceived","_onResendModelsRequested","onResendModelsRequested","_onProjectLanguageServiceStateChanged","onProjectLanguageServiceStateChanged","_onDidBeginInstallTypings","onDidBeginInstallTypings","_onDidEndInstallTypings","onDidEndInstallTypings","_onTypesInstallerInitializationFailed","onTypesInstallerInitializationFailed","_onSurveyReady","onSurveyReady","defaultVersion","f","then","ensureServiceStarted","token","resendModels","isDisposed","version","currentVersion","isValid","window","showWarningMessage","l10n","t","path","nodePath","mytoken","handle","spawn","onFatalError","command","err","fatalError","typeScriptServerEnvCommonProperties","hasGlobalPlugins","plugins","globalPluginNameHashes","stringify","plugin","logTelemetry","localTypeScriptVersion","localVersion","displayName","typeScriptVersionSource","onError","showErrorMessage","fsPath","serviceExited","onExit","code","signal","onEvent","dispatchEvent","serviceStarted","fire","usedApiVersion","clearTimeout","disposeAll","from","values","showVersionPicker","promptUserForVersion","openTsServerLogFile","tsServerLogLevel","TsServerLogLevel","Off","title","selection","getConfiguration","show","doc","openTextDocument","showTextDocument","commands","executeCommand","watchOptions","v380","configureOptions","hostInfo","preferences","providePrefixAndSuffixTextForRename","allowRenameOfImportPath","includePackageJsonAutoImports","excludeLibrarySymbolsInNavTo","workspaceSymbolsExcludeLibrarySymbols","executeWithoutWaitingForResponse","reinitialize","requestAllDiagnostics","pluginName","configurations","args","options","getCompilerOptionsForInferredProjects","inferredProjectCompilerOptions","allowJs","allowSyntheticDefaultImports","allowNonTsExtensions","resolveJsonModule","restart","tsVersion","diff","pluginExtensionList","extension","reportIssueItem","prompt","includes","uriScheme","minModernTsVersion","bundledVersion","isYarnPnp","reportIssue","modal","detail","openExternal","Uri","lt","toTsFilePath","fileSchemes","disabledSchemes","has","scheme","file","authority","startsWith","fragment","toOpenTsFilePath","document","ensureHasBuffer","suppressAlertOnFailure","console","hasCapabilityForResource","capability","getSemanticSupportedSchemes","toResource","filepath","endsWith","joinPath","extensionUri","parts","toVsCodeResource","getWorkspaceRootForResource","roots","workspaceFolders","Schemes","notebookCell","notebook","notebookDocuments","cell","getCells","root","a","b","getWorkspaceFolder","execute","executions","cancelOnResourceChange","runningServerState","CancellationTokenSource","onCancellationRequested","inFlight","add","executeImpl","expectsResult","finally","delete","nonRecoverable","catch","updateOpenTask","all","updateOpenArgs","openFiles","startedLoadingFile","executeAsync","executeInfo","beforeCommand","ServerResponse","NoServer","interruptGetErr","TypeScriptServerError","telemetry","serverErrorText","logfile","EventName","syntaxDiag","semanticDiag","suggestionDiag","regionSemanticDiag","diagnosticEvent","diagnostics","getDiagnosticsKind","spans","configFileDiag","dispatchTelemetryEvent","projectLanguageServiceState","projectsUpdatedInBackground","resources","getErr","beginInstallTypes","endInstallTypes","typesInstallerInitializationFailed","surveyReady","projectLoadingStart","startedLoadingProject","projectName","projectLoadingFinish","finishedLoadingProject","createDirectoryWatcher","fpath","createFileSystemWatcher","RelativePattern","recursive","ignoreUpdate","createFileWatcher","closeFileWatcher","closeFileSystemWatcher","requestCompleted","diagnosticsDuration","performanceData","logDiagnosticsPerformanceTelemetry","fileData","fileLineCount","lineCount","scheduleExecuteWatchChangeRequest","setTimeout","allEvents","updated","created","deleted","clear","addWatchEvent","eventType","get","removeEvent","typeOfEventToRemove","aggregateEvent","set","pattern","ignoreChangeEvents","disposable","DisposableStore","watcher","onDidChange","changeFile","onDidCreate","createFile","onDidDelete","deletedFile","existing","telemetryData","Object","create","telemetryEventName","typingsInstalledPayload","installedPackages","installSuccess","typingsInstallerVersion","forEach","hasOwnProperty","client","_task","projectDisplayName","getProjectDisplayName","withProgress","ProgressLocation","Window","project","projectUri","relPath","asRelativePath","task","basename","SemVer","module","exports","throwErrors","er","__importDefault","mod","__esModule","defineProperty","ral_1","connection_1","encoder","TextEncoder","decoder","TextDecoder","TestServiceConnection","ServiceConnection","script","testCase","worker","Worker","terminate","_ril","freeze","default","Type","Browser","encoding","timer","setImmediate","setInterval","clearInterval","$testing","ClientConnection","self","search","substring","RIL","install","ExecutionTarget","RequestState","SingleTsServer","_serverId","_serverSource","_process","_tsServerLog","_requestCanceller","_version","_telemetryReporter","_tracer","_requestQueue","RequestQueue","_callbacks","CallbackMap","_pendingResponses","onData","msg","dispatchMessage","_onExit","destroy","_onEvent","write","serverRequest","dispatchResponse","_serverType","seq","request_seq","fetch","traceRequestCompleted","onSuccess","traceEvent","sendNextRequests","tryCancelRequest","peek","traceId","logTraceEvent","cancelled","tryDeletePendingRequest","logTrace","tryCancelOngoingRequest","fetchCallback","Cancelled","traceResponse","NoContent","createRequest","requestInfo","expectsResponse","queueingType","getQueueingType","lowPriority","arguments","$traceId","queuingStartTime","cancelViaSAB","Cancellation","addData","isCancellationRequested","enqueue","queueLength","pendingResponses","queuedCommands","getQueuedCommands","pendingCommands","getPendingCommands","dequeue","requestItem","traceRequest","static","fenceCommands","RequestQueueingType","Fence","LowPriority","RequestRouter","servers","delegate","sharedCommands","executionTarget","requestStates","Unresolved","some","state","Resolved","allRequests","serverIndex","erroredRequest","find","canRun","GetErrRoutingTsServer","getErrServer","mainServer","router","primary","diagnosticEvents","SyntaxRoutingTsServer","syntaxServer","semanticServer","_projectLoading","enableDynamicRouting","syntax","semantic","execInfo","syntaxAlwaysCommands","semanticCommands","projectLoading","syntaxAllowedCommands","variableDeclaredButNeverUsed","propertyDeclaretedButNeverUsed","allImportsAreUnused","unreachableCode","unusedLabel","fallThroughCaseInSwitch","notAllCodePathsReturnAValue","incorrectlyImplementsInterface","cannotFindName","extendsShouldBeImplements","asyncOnlyAllowedInAsyncFunctions","selector","conditionalRegistration","requireSomeCapability","languages","registerImplementationProvider","TypeScriptImplementationProvider","provideImplementation","position","getSymbolLocations","Yallist","Symbol","iterator","walker","head","next","_pureAssign","func1","func2","_pureRef","_primitiveTypes","UNDEF_VALUE","NULL_VALUE","EMPTY","FUNCTION","OBJECT","PROTOTYPE","__PROTO__","UNDEFINED","CONSTRUCTOR","SYMBOL","POLYFILL_TAG","LENGTH","NAME","CALL","TO_STRING","ObjClass","ObjProto","StrCls","String","StrProto","MathCls","ArrCls","ArrProto","ArrSlice","safe","argArray","apply","_createIs","theType","_createObjIs","theName","objToString","isTypeof","isUndefined","isNullOrUndefined","isDefined","arg","isString","isFunction","isObject","isDate","isNumber","isBoolean","isError","isPromiseLike","isNotTruthy","isTruthy","cb","defValue","objGetOwnPropertyDescriptor","objHasOwnProperty","objHasOwn","polyObjHasOwn","objForEachKey","theObject","callbackfn","thisArg","propMap","c","w","_createProp","l","desc","newValue","objDefineProp","objDefineProperties","objDefineAccessors","getProp","setProp","configurable","enumerable","objDefine","propDesc","_createKeyValueMap","keyType","valueType","completeFn","writable","theMap","_assignMapValue","asString","ERROR_TYPE","dumpObj","object","format","propertyValueDump","objType","throwError","throwTypeError","TypeError","_objFreeze","_doNothing","_getProto","objAssign","objKeys","objDeepFreeze","objFreeze","objSeal","objGetPrototypeOf","createEnum","createEnumKeyMap","createTypeMap","mapClass","createSimpleMap","_globalCfg","_wellKnownSymbolMap","asyncIterator","hasInstance","isConcatSpreadable","matchAll","species","split","toPrimitive","toStringTag","unscopables","GLOBAL_CONFIG_KEY","_getGlobalValue","globalThis","_getGlobalConfig","gbl","_unwrapFunction","_unwrapFunctionWithPoly","funcName","clsProto","polyFunc","clsFn","theFunc","theArgs","_unwrapProp","propName","mathMax","strSlice","strSubstring","strSubstr","polyStrSubstr","start","strLeft","_polySymbols","_wellKnownSymbolCache","_globalLazyTestHooks","UNIQUE_REGISTRY_ID","polyNewSymbol","description","theSymbol","polySymbolFor","registry","gblCfg","gblSym","k","_globalSymbolRegistry","newSymbol_1","regId_1","_initTestHooks","getLazy","lazyValue","lzy","createCachedValue","toJSON","_cachedGlobal","WINDOW","_getGlobalInstFn","getFn","cachedValue","getGlobal","useCached","getInst","hasDocument","getDocument","hasWindow","getWindow","hasNavigator","getNavigator","hasHistory","getHistory","_symbol","_symbolFor","_iterSymbol$1","isNode","process","versions","node","_initSymbol","_getSymbolKey","hasSymbol","getSymbol","getKnownSymbol","noPoly","knownName","sym","polyGetKnownSymbol","newSymbol","symbolFor","isIterator","isIterable","isStrictNullOrUndefined","iterForOf","iter","iterResult","done","throw","return","fnApply","fn","arrAppend","elms","elm","arrForEach","theArray","len","idx","arrIndexOf","arrMap","arrSlice","end","polyArrIncludes","searchElement","fromIndex","_isProtoArray","arrIncludes","arrReduce","objCreate","polyObjCreate","tempFunc","objSetPrototypeOf","proto","d","_setName","baseClass","createCustomError","constructCb","errorBase","theBaseClass","orgName","captureFn","captureStackTrace","__","_createCustomError","orgProto","utcNow","polyUtcNow","getTime","_createTrimFn","exp","_fnToString","_objCtrFnString","_gblWindow","strTrim","isPlainObject","Function","_defaultDeepCopyHandler","plainObjDeepCopyHandler","defaultDeepCopyHandlers","copyTo","_deepCopy","visitMap","ctx","userHandler","handler","newPath","newCtx","isPlain","isPrim","isPrimitiveType","origin","copy","newKey","_copyProps","theEntry","newEntry","_getSetVisited","deepExtend","obj1","obj2","obj3","obj4","obj5","obj6","theArg","objCopyProps","_doExtend","_perf","getLength","getPerformance","perfNow","perf","strEndsWith","polyStrEndsWith","searchString","searchValue","strIndexOf","strStartsWith","polyStrStartsWith","pos","REF","UNREF","HAS_REF","ENABLED","_createTimeoutWith","startTimer","overrideFn","isArr","setFn","clearFn","timerFn","dn","refreshFn","cancelFn","theTimerHandler","ref","timerId","_unref","_cancel","_refresh","refresh","h","_createTimerHandler","scheduleTimeout","timeout","scheduleTimeoutWith","createTimeout","Range","range","minSV","rangeObj","compare","pluginStateData","_getPluginState","initializePlugins","processContext","pluginState","initPlugins","lastPlugin","proxy","thePlugin","getCfg","sortPlugins","extA","extB","bHasProcess","createDistributedTraceContext","parentCtx","getName","setName","getTraceId","setTraceId","getSpanId","setSpanId","getTraceFlags","setTraceFlags","newTraceFlags","fileConfigurationManager","handles","UpdateImportsOnFileRenameHandler","updateImportsOnFileMoveName","_handles","_delayer","Delayer","_pendingRenames","onDidRenameFiles","newUri","oldUri","files","newFilePath","oldFilePath","jsTsFileThatIsBeingMoved","getJsTsFileBeingMoved","trigger","flushRenames","renames","group","groupRenames","edits","WorkspaceEdit","resourcesBeingRenamed","closeResource","withEditsForFileRename","confirmActionWithUser","applyEdit","isRefactoring","newResources","promptUser","doesResourceLookLikeATypeScriptFile","rejectItem","isCloseAffordance","acceptItem","alwaysItem","neverItem","showInformationMessage","getConfirmMessage","getConfigTargetScope","fs","stat","FileType","Directory","isDirectory","findFiles","setGlobalConfigurationFromDocument","nulToken","typeConverters","withFileCodeEdits","groups","rename","resourcesToConfirm","paths","r","settingsName","inspected","inspect","workspaceFolderValue","ConfigurationTarget","WorkspaceFolder","workspaceValue","Workspace","Global","loose","strHasOwnProperty","__assignFn","n","extendStaticsFn","__proto__","__extendsFn","__spreadArrayFn","to","il","j","alwaysSupportedSchemes","untitled","walkThroughSnippet","vscodeNotebookCell","chatCodeBlock","folder","schemes","normalizedUriScheme","toLowerCase","git","github","azurerepos","chatEditingTextModel","vsls","officeScript","ManagedFileContextManager","isInManagedFileContext","activeJsTsEditorTracker","onDidChangeActiveJsTsEditor","onDidChangeActiveTextEditor","activeJsTsEditor","editor","updateContext","isManagedFile","contextName","isManagedScriptFile","isManagedConfigFile","isSupportedLanguageMode","isJsConfigOrTsConfigFileName","language","requireMinVersion","TypeScriptInlayHintsProvider","minVersion","provider","registerInlayHintsProvider","inlayHintSettingNames","InlayHintSettingNames","parameterNamesSuppressWhenArgumentMatchesName","parameterNamesEnabled","variableTypesEnabled","variableTypesSuppressWhenTypeMatchesName","propertyDeclarationTypesEnabled","functionLikeReturnTypesEnabled","enumMemberValuesEnabled","v440","_onDidChangeInlayHints","onDidChangeInlayHints","hasReportedTelemetry","settingName","affectsConfiguration","onDidChangeTextDocument","languageIds","languageId","provideInlayHints","getInlayHintsPreferences","includeInlayParameterNameHints","includeInlayEnumMemberValueHints","includeInlayFunctionLikeReturnTypeHints","includeInlayFunctionParameterTypeHints","includeInlayPropertyDeclarationTypeHints","includeInlayVariableTypeHints","areInlayHintsEnabledForFile","offsetAt","ensureConfigurationForDocument","hint","InlayHint","Position","fromLocation","convertInlayHintText","InlayHintKind","Parameter","fromProtocolInlayHintKind","paddingLeft","whitespaceBefore","paddingRight","whitespaceAfter","tsHint","displayParts","part","out","InlayHintLabelPart","text","span","Location","fromTextSpan","createUnloadHandlerContainer","handlers","run","STR_EMPTY","_noResponseQs","STR_POST_METHOD","_isInitialized","_diagLog","_isOneDs","_onCompleteFuncs","_disableCredentials","_fetchCredentials","_fallbackInst","_disableBeacon","_disableBeaconSync","_disableFetchKeepAlive","_addNoResponse","_timeoutWrapper","_sendCredentials","_doOnComplete","_onNoPayloadUrl","_doBeaconSend","nav","plainTextBatch","Blob","sendBeacon","_beaconSender","sync","onRetry","_xhrSender","thePromise","resolveFunc","rejectFunc","endPointUrl","_doOnReadyFunc","onReadyFunc","headerName","onreadystatechange","onload","onerror","ontimeout","send","_doFetchSender","requestHeaders","Headers","batchLength","ignoreResponse","responseHandled","init","append","credentials","keepalive","Request","_handleError","_onFetchComplete","onCompleteFunc","response_1","ok","resp","_xdrSender","_window","XDomainRequest","onloadFunc","onprogress","hostingProtocol","endpoint","lastIndexOf","open","fetchCredentials","enableSendPromise","disableXhr","timeWrapper","addNoResponse","location_1","getSenderInst","syncSupport","transportType","_transport","_isSync","_getSenderInterface","__createBinding","o","m","k2","getOwnPropertyDescriptor","__setModuleDefault","__importStar","ApiService","ServicePseudoTerminal","TerminalMode","sync_api_common_1","terminalRegExp","LineBuffer","cursor","content","getLine","getCursor","isCursorAtEnd","isCursorAtBeginning","insert","char","del","backspace","moveCursorRelative","characters","moveCursorStartOfLine","moveCursorEndOfLine","moveCursorWordLeft","moveCursorWordRight","mode","ServiceTerminalImpl","_onDidClose","onDidClose","_onDidWrite","onDidWrite","_onDidChangeName","onDidChangeName","_onDidCtrlC","onDidCtrlC","_onAnyKey","onAnyKey","lineBuffer","isOpen","setMode","nameBuffer","writeBuffer","close","readline","readlineCallback","shift","str","handleInput","idle","previousCursor","adjustCursor","bell","handleEnter","oldCursor","newCursor","change","sequence","repeat","_name","receiver","connection","textEncoder","RAL","textDecoder","pty","inUse","handleError","FileSystemError","errno","asFileSystemError","RPCErrno","UnknownError","onRequest","params","binary","decode","m1","m2","encode","resultBuffer","vStat","DTOs","Stat","ctime","mtime","permissions","permission","readFile","writeFile","readDirectory","createDirectory","activeEditor","activeTextEditor","exitHandler","rval","getPty","FileNotFound","FileExists","FileNotADirectory","FileIsADirectory","NoPermissions","Unavailable","versionA","versionB","compareBuild","registerReferenceProvider","TypeScriptReferenceSupport","provideReferences","toFileLocationRequestArgs","refs","includeDeclaration","isDefinition","STR_DEFAULT_ENDPOINT_URL","STR_VERSION","STR_PROPERTIES","defaultConfig","S","propertyStorageOverride","getProperty","setProperty","notificationManager","logger_1","trackStart","latency","itemExt","sdk","itemProperties","pluginVersionString","ValueKind","NotSet","Pii_DistinguishedName","Pii_GenericData","Pii_IPV4Address","Pii_IPv6Address","Pii_MailSubject","Pii_PhoneNumber","Pii_QueryString","Pii_SipAddress","Pii_SmtpAddress","Pii_Identity","Pii_Uri","Pii_Fqdn","Pii_IPV4AddressLegacy","Pii_IPv6ScrubLastHextets","Pii_DropValue","CustomerContent_GenericContent","EventLatency","CostDeferred","RealTime","Immediate","EventPropertyType","Unspecified","Int32","UInt32","Int64","UInt64","Double","Bool","Guid","DateTime","EventPersistence","TraceLevel","NONE","ERROR","WARNING","INFORMATION","ValueSanitizer","fieldSanitizerProvider","_sanitizerMap","_sanitizers","_fieldSanitizers","_getFieldSanitizer","fieldLookup","canHandle","fieldHandler","_handleProperty","mapValue","fieldType","property","stringifyObjects","_callFieldSanitizer","_convertToProperty","fieldProvider","sanitizer","getSanitizer","propertyType","newValue_1","propValue","propKey","theValue","newProp","clearCache","addSanitizer","newSanitizer","addFieldSanitizer","fieldSanitizer","theSanitizer","theFieldSanitizer","isEmpty","subType","getFieldType","MinChannelPriorty","LoggingSeverity","DISABLED","CRITICAL","DEBUG","_isConfigDefaults","fb","_getDefault","dynamicHandler","theConfig","cfgDefaults","isDefaultValid","dfVal","fallbacks","fallback","fbValue","_resolveDefaultValue","_applyDefaultValue","defaultValue","mergeDf","reference","readOnly","blkDynamicValue","mrg","usingDefault","cfgValue","dfName","dfValue","action","workspaceEdit","getEditForCodeAction","applyCodeActionCommands","changes","fromFileCodeEdits","FileConfigurationManager","formatOptions","ResourceMap","onDidCloseTextDocument","textDocument","formattingOptions","getFormattingOptions","ensureConfigurationOptions","visibleTextEditors","tabSize","insertSpaces","currentOptions","getFileOptions","cachedOptions","cachedOptionsValue","getFormatOptions","getPreferences","isTypeScriptDocument","indentSize","convertTabsToSpaces","newLineCharacter","insertSpaceAfterCommaDelimiter","insertSpaceAfterConstructor","insertSpaceAfterSemicolonInForStatements","insertSpaceBeforeAndAfterBinaryOperators","insertSpaceAfterKeywordsInControlFlowStatements","insertSpaceAfterFunctionKeywordForAnonymousFunctions","insertSpaceBeforeFunctionParenthesis","insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis","insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets","insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces","insertSpaceAfterOpeningAndBeforeClosingEmptyBraces","insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces","insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces","insertSpaceAfterTypeAssertion","placeOpenBraceOnNewLineForFunctions","placeOpenBraceOnNewLineForControlBlocks","semicolons","indentSwitchCase","preferencesConfig","quotePreference","getQuoteStylePreference","importModuleSpecifierPreference","getImportModuleSpecifierPreference","importModuleSpecifierEnding","getImportModuleSpecifierEndingPreference","jsxAttributeCompletionStyle","getJsxAttributeCompletionStyle","allowTextChangesInNewFiles","includeAutomaticOptionalChainCompletions","provideRefactorNotApplicableReason","generateReturnInDocTemplate","includeCompletionsForImportStatements","includeCompletionsWithSnippetText","includeCompletionsWithClassMemberSnippets","includeCompletionsWithObjectLiteralMethodSnippets","autoImportFileExcludePatterns","getAutoImportFileExcludePatternsPreference","autoImportSpecifierExcludeRegexes","preferTypeOnlyAutoImports","useLabelDetailsInCompletionEntries","allowIncompleteCompletions","displayPartsForJSDoc","disableLineTextInReferences","interactiveInlayHints","includeCompletionsForModuleExports","getOrganizeImportsPreferences","maximumHoverLength","getMaximumHoverLength","workspaceFolder","isRelative","wildcardPrefix","v540","isAbsolute","sep","organizeImportsCollation","organizeImportsCaseSensitivity","organizeImportsTypeOrder","withDefaultAsUndefined","organizeImportsIgnoreCase","organizeImportsCaseFirst","organizeImportsAccentCollation","organizeImportsLocale","organizeImportsNumericCollation","Number","isSafeInteger","def","getInlayParameterNameHintsPreference","includeInlayParameterNameHintsWhenArgumentMatchesName","includeInlayVariableTypeHintsWhenTypeMatchesName","IntellisenseState","SyntaxOnly","Pending","projectType","cancellation","configFile","IntellisenseStatus","_client","_activeTextEditorManager","openOpenConfigCommandId","createOrOpenConfigCommandId","_statusItem","_ready","_state","commandManager","register","openProjectConfigOrPromptToCreate","openProjectConfigForFile","openOrCreateConfig","updateStatus","updateState","pendingState","needFileNameList","configFileName","statusItem","ensureStatusItem","severity","LanguageStatusSeverity","busy","noConfigFileText","rootPath","isImplicitProjectConfigFile","createLanguageStatusItem","jsTsLanguageModes","numeric","compareIdentifiers","anum","bnum","rcompareIdentifiers","parseResponse","itemsAccepted","gt","minver","comparators","setMin","comparator","compver","semver","operator","prerelease","patch","raw","defaultValues","perfEvtsSendAll","_runScheduledListeners","asyncNotifications","callbacks","_runListeners","listeners","listener","NotificationManager","unloadHandler","_listeners","_asyncNotifications","perfEvent","rn_1","waiting","_finishUnload","asyncUnload","require","patterns","flat","registerCommand","openExtendsLinkCommandId","resourceUri","extendsValue","linkType","tsconfigPath","baseDirUri","pathValue","absolutePath","exists","with","TsConfigLinkType","References","looksLikeAbsoluteWindowsPath","pathCandidates","currentUri","baseCandidate","sepIndex","moduleBasePath","posix","moduleAbsoluteUrl","moduleStat","uriCandidate","relativePath","Boolean","relativeModulePath","resolveNodeModulesPath","getTsconfigPath","Utils","dirname","registerDocumentLinkProvider","TsconfigLinkProvider","mapChildren","children","provideDocumentLinks","_token","jsonc","parseTree","getText","coalesce","getExtendsLink","getFilesLinks","getReferencesLinks","findNodeAtLocation","tryCreateTsConfigLink","Extends","child","pathNode","isPathValue","$mid","link","DocumentLink","getRange","tooltip","pathNodeToLink","getFileTarget","offset","positionAt","RemoteRepositories","remoteHub","getApi","getExtension","getRemoteExtension","activate","FileDiagnostics","_diagnostics","updateDiagnostics","ranges","updateRegionDiagnostics","getAllDiagnostics","settings","getValidate","getSuggestionDiagnostics","toDelete","diags","diag","isEqual","arrays","relatedInformation","empty","newDiagnostics","intersection","enableSuggestions","getEnableSuggestions","x","DiagnosticTag","Unnecessary","Deprecated","DiagnosticSettings","validate","_languageSettings","setValidate","setEnableSuggestions","defaultSettings","currentSettings","newSettings","areLanguageDiagnosticSettingsEqual","DiagnosticsTelemetryManager","_diagnosticsCollection","_diagnosticCodesMap","_diagnosticSnapshotsMap","_timeout","_telemetryEmitter","_updateAllDiagnosticCodesAfterTimeout","_registerTelemetryEventEmitter","syntaxDiagDuration","semanticDiagDuration","suggestionDiagDuration","regionSemanticDiagDuration","_updateDiagnosticCodes","_increaseDiagnosticCodeCount","previousDiagnostics","diagnostic","previousDiagnostic","diagnosticCodes","_settings","_currentDiagnostics","_pendingUpdates","_updateDelay","_diagnosticsTelemetryManager","owner","createDiagnosticCollection","enableDiagnosticsTelemetry","reInitialize","rebuildAll","didUpdate","fileDiagnostics","scheduleDiagnosticsUpdate","configFileDiagnosticsReceived","deleteDiagnostic","rebuildFile","getDiagnostics","updateCurrentDiagnostics","fileDiagnostic","lazyClientHost","serviceClient","parsed","_DYN_LOGGER","_DYN_INDEX_OF","_DYN_TIMINGS","_DYN_POLL_INTERNAL_LOGS","_DYN_VALUE","_DYN_KIND","_DYN_LENGTH","_DYN_PROCESS_TELEMETRY_ST0","_DYN_HANDLE_FIELD","_DYN_RM_SANITIZER","_DYN_RM_FIELD_SANITIZER","_DYN_CAN_HANDLE","KindModifiers","dtsFile","tsFile","tsxFile","jsFile","jsxFile","jsonFile","OrganizeImportsMode","SelectTypeScriptVersionCommand","version1","version2","v1","v2","comparison","v1Higher","highVersion","lowVersion","highHasPre","minor","prefix","major","mode2ScriptKind","languageModeIds","typescript","typescriptreact","javascript","javascriptreact","CloseOperation","scriptKind","OpenOperation","ChangeOperation","BufferSynchronizer","_pending","pathNormalizer","updatePending","scriptKindName","textChanges","newText","toLocation","closedFiles","changedFiles","op","SyncedBuffer","synchronizer","fileContent","projectRootPath","getProjectRootPath","tsPluginsForDocument","workspaceRoot","tsRoot","isOfScheme","onContentChanged","SyncedBufferMap","getForPath","filePath","allBuffers","PendingDiagnostics","getOrderedFileSet","orderedResources","entries","_normalizePath","GetErrRequest","executeGetErrRequest","onDone","_done","isErrorReportingEnabled","supportsSyntaxGetErr","fileEntries","allFiles","areProjectDiagnosticsEnabled","delay","requestFiles","areRegionDiagnosticsEnabled","toFileRangesRequestArgs","enableProjectDiagnostics","enableRegionDiagnostics","v560","TabResourceTracker","_onDidChange","_tabResources","normalizePath","tabGroup","tabGroups","tab","tabs","onDidChangeTabs","closed","flatMap","opened","addedResources","getResourcesForTab","closedResources","TabInputText","TabInputTextDiff","original","modified","TabInputNotebook","BufferSyncSupport","_validateJavaScript","_validateTypeScript","modeIds","syncedBuffers","pendingDiagnostics","diagnosticDelayer","pendingGetErr","listening","syncedBuffer","requestDiagnostic","_onDelete","_onWillChange","onDidOpenTextDocument","onDidChangeVisibleTextEditors","textDocuments","existingDocument","wasBufferOpen","triggerDiagnostics","contentChanges","shouldValidate","handledResources","sendPendingDiagnostics","ceil","hasPendingDiagnostics","orderedFileSet","visibleRanges","jsConfig","tsConfig","TRACE_PARENT_REGEX","DEFAULT_VERSION","INVALID_VERSION","INVALID_TRACE_ID","INVALID_SPAN_ID","SAMPLED_FLAG","_isValid","invalidValue","_formatValue","_formatFlags","createTraceParent","spanId","flags","isValidTraceId","isValidSpanId","traceFlags","parseTraceParent","selectIdx","isValidTraceParent","isSampledFlag","formatTraceParent","findW3cTraceParent","traceParent","cachedResponse","registerDocumentSymbolProvider","TypeScriptDocumentSymbolProvider","label","provideDocumentSymbols","childItems","convertNavTree","shouldInclude","shouldInclueEntry","symbolInfo","convertSymbol","includedChild","selectionRange","nameSpan","PConst","Kind","memberGetAccessor","memberSetAccessor","DocumentSymbol","SymbolKind","Module","class","Class","enum","Enum","interface","Interface","Method","memberVariable","Property","variable","const","localVariable","Variable","function","localFunction","constructSignature","constructorImplementation","Constructor","getSymbolKind","contains","parseKindModifier","kindModifiers","deprecated","SymbolTag","alias","TypeScriptCallHierarchySupport","registerCallHierarchyProvider","prepareCallHierarchy","fromProtocolCallHierarchyItem","provideCallHierarchyIncomingCalls","fromProtocolCallHierarchyIncomingCall","provideCallHierarchyOutgoingCalls","fromProtocolCallHierarchyOutgoingCall","useFileName","selectionSpan","isSourceFileItem","containerName","CallHierarchyItem","fromProtocolScriptElementKind","CallHierarchyIncomingCall","fromSpans","CallHierarchyOutgoingCall","_Uint8Result_length","_Int8Result_length","_Uint16Result_length","_Int16Result_length","_Uint32Result_length","_Int32Result_length","_Uint64Result_length","_Int64Result_length","_VariableResult_mode","__classPrivateFieldSet","__classPrivateFieldGet","BaseServiceConnection","RequestResult","BaseClientConnection","RPCError","VariableResult","Int64Result","Uint64Result","Int32Result","Uint32Result","Int16Result","Uint16Result","Int8Result","Uint8Result","Notification","TypedArray","TypedArrayResult","ResultType","is","Uint8Array","Int8Array","Uint16Array","Int16Array","Uint32Array","Int32Array","BigUint64Array","BigInt64Array","sharedArrayBuffer","candidate","NoResult","byteLength","getPadding","createResultArray","fromLength","fromByteLength","BYTES_PER_ELEMENT","WeakMap","_offset","Success","TimedOut","LazyResultFailed","NoHandlerFound","InvalidMessageFormat","$Custom","_sendRequest","readyPromise","readyCallbacks","serviceReady","arg1","arg2","arg3","resultType","requestData","binaryData","binaryDataLength","binaryOffset","resultByteLength","resultPadding","resultOffset","sharedArrayBufferLength","SharedArrayBuffer","Atomics","store","postMessage","wait","load","lazyResultLength","lazyResult","resultId","hasData","handleMessage","_onRequest","requestHandlers","requestResults","requestOffset","requestLength","binaryParamsLength","binaryParamsOffset","resultKind","handlerResult","requestResult","notify","signalReady","supportsReadableByteStreams","requireGlobalConfiguration","registerFileSystemProvider","MemFs","isCaseSensitive","isReadonly","AutoInstallerFs","TEXT_DECODER","TEXT_ENCODER","memfs","packageManager","_projectCache","_emitter","onDidChangeFile","ev","PackageManager","_extensions","_exclude","_include","_depth","URI","_","deleteFile","_writeByteOrderMark","overwrite","directoryExists","_encoding","watch","mapped","MappedUri","ensurePackageContents","_uri","_content","_options","_oldUri","_newUri","incomingUri","getProjectRoot","existingInstall","installing","proj","resolveProject","getInstallOpts","restore","originalUri","vsfs","pkgJson","kdlLock","npmLock","pkgPath","ret","flatPath","eq","neq","lte","MAX","LENGTH_CALCULATOR","ALLOW_STALE","MAX_AGE","DISPOSE","NO_DISPOSE_ON_SET","LRU_LIST","CACHE","UPDATE_AGE_ON_GET","naiveLength","doUse","hit","isStale","unshiftNode","maxAge","trim","tail","prev","removeNode","Entry","forEachStep","thisp","Infinity","lc","stale","noDisposeOnSet","updateAgeOnGet","mL","allowStale","mA","lengthCalculator","lC","itemCount","rforEach","toArray","dump","dumpLru","unshift","pop","expiresAt","prune","TextEdit","CompletionTriggerKind","fromLocations","toTextSpan","toFileRange","startLine","startOffset","character","endLine","endOffset","toFileRangeRequestArgs","toFormattingRequestArgs","tslocation","vsPosition","tsTextSpan","fromCodeEdit","edit","textChange","enumMember","EnumMember","indexSignature","callSignature","let","typeParameter","TypeParameter","string","toProtocolCompletionTriggerKind","Invoke","TriggerCharacter","TriggerForIncompleteCompletions","toProtocolOrganizeImportsMode","All","SortAndCombine","RemoveUnused","definitionType","clearImmediate","onTimeout","promiseResolve","race","defaultDelay","completionPromise","cancelTimeout","activePromise","queuedPromise","queuedPromiseFactory","queue","promiseFactory","LinkedEditingSupport","registerLinkedEditingRangeProvider","v510","provideLinkedEditingRanges","wordPattern","LinkedEditingRanges","Tracer","serverId","responseExpected","logLevel","LogLevel","meta","strTelemetryPluginChain","strHasRunFlags","strGetTelCtx","_chainId","_createInternalContext","telemetryChain","startAt","_nextProxy","_onComplete","createTelemetryProxyChain","_getNextProxyStart","_next","nextProxy","completeDetails","_getExtCfg","getConfig","extConfig","rootConfig","hasNext","getNext","setNext","nextPlugin","iterate","that","createIfMissing","idCfg","extCfg","createProcessTelemetryContext","internalContext","createProcessTelemetryUnloadContext","createProcessTelemetryUpdateContext","firstProxy","lastProxy_1","newProxy","chainId","hasProcessTelemetry","hasSetNext","proxyChain","getPlugin","_processChain","hasRun","pluginCore","updateCtx","_id","_setNext","processPluginFn","hasRunContext","nextId","hasNextRun","createTelemetryPluginProxy","ProcessTelemetryContext","serviceConfig","projectConfig","moduleResolution","jsx","v500","allowImportingTsExtensions","checkJs","experimentalDecorators","strictNullChecks","strictFunctionTypes","strict","sourceMap","col","viewColumn","insertSnippet","baseConfig","compilerOptions","SnippetString","inferredProjectConfigSnippet","configFilePath","CreateConfigItem","registerWorkspaceSymbolProvider","TypeScriptWorkspaceSymbolProvider","provideWorkspaceSymbols","searchAllOpenProjects","toOpenedFiledPath","v390","maxResultCount","toSymbolInformation","query","doesResourceLookLikeAJavaScriptFile","getLabel","SymbolInformation","Field","activeDocument","documents","onCompletionAccepted","Lazy","standardLanguageDescriptions","onActivate","disposables","supportedLanguage","hasActivated","maybeActivate","isSupportedDocument","openListener","createOutputChannel","log","FileReferencesCommand","v420","openedFiledPath","_progress","locations","existingSetting","_stringToBoolOrDefault","cfgDfMerge","cfgDfValidate","validator","fallBackName","cfgDfBoolean","satisfies","first","simplified","registerSignatureHelpProvider","TypeScriptSignatureHelpProvider","triggerCharacters","retriggerCharacters","provideSignatureHelp","triggerReason","toTsTriggerReason","SignatureHelp","signatures","signature","convertSignature","activeSignature","getActiveSignature","activeParameter","getActiveParameter","previouslyActiveSignature","activeSignatureHelp","isRetrigger","existingIndex","findIndex","selectedItemIndex","isVariadic","argumentIndex","parameters","baseUri","SignatureInformation","Previewer","asPlainTextWithLinks","prefixDisplayParts","documentationToMarkdown","documentation","textIndex","separatorLabel","separatorDisplayParts","parameter","ParameterInformation","suffixDisplayParts","triggerKind","SignatureHelpTriggerKind","triggerCharacter","ContentChange","registerCodeLensProvider","TypeScriptReferencesCodeLensProvider","TypeScriptBaseCodeLensProvider","_cachedResponse","changeEmitter","resolveCodeLens","codeLens","cancelledCommand","errorCommand","getCodeLensLabel","extractSymbol","parent","getSymbolRange","LogLevelMonitor","onConfigurationChange","shouldNotifyExtendedLogging","notifyExtendedLogging","logLevelConfigKey","globalState","logLevelChangedStorageKey","fromString","lastLogLevelChange","lastChange","date","valueOf","doNotPrompt","doNotPromptLogLevelStorageKey","lastChangeMilliseconds","lastChangePlusOneWeek","choice","packagePath","ResolvedProject","PackageType","path_1","node_maintainer_1","node_maintainer_bg_wasm_1","initSync","dataURI","byteString","atob","ab","ArrayBuffer","ia","dataURItoUint8Array","nassun","Nassun","opts","addPackages","removePackages","updateJson","maintainer","resolveMaintainer","timeEnd","packageJsonPath","packageType","Dependency","corgis","pkg","corgiMetadata","readJson","packageName","dependencies","devDependencies","optionalDependencies","peerDependencies","corgi","stringified","kdlPkgLock","npmPkgLock","resolveManifest","metaPath","pruneExtraneous","extractMissing","writeLockfile","restorePackageAt","checkPath","packages","projRoot","packageAtPath","resolved","rimraf","extractPackageTo","free","entryPath","contents","walkDir","subPath","mkdirCache","mkdirp","reader","getReader","fileCount","read","drainStream","streamToArrayBuffer","forEachPackage","fullPath","toKdl","stream","cache","reduce","dir","joined","TelemetryInitializerPlugin","_initializers","addTelemetryInitializer","telemetryInitializer","theInitializer","remove","initializer","_addInitializer","telemetryInitializersCount","_runInitializers","strValidationError","strSdkUnloadingError","cookieCfg","rdOnly","loggingLevelConsole","_createPerfManager","notificationMgr","PerfManager","_isPluginPresent","_deepMergeConfig","newValues","merge","_findWatcher","newWatcher","theListener","_configHandler","_eventQueue","_notificationManager","_perfManager","_cfgPerfManager","_cookieManager","_pluginChain","_configExtensions","_channelConfig","_channels","_isUnloading","_telemetryInitializerPlugin","_internalLogsEventName","_unloadHandlers","_hookContainer","_debugListener","_traceCtx","_cfgListeners","_pluginVersionStringArr","_pluginVersionString","_activeStatus","_endpoint","_initInMemoMaxSize","_isStatusSet","_internalLogPoller","_internalLogPollerListening","_forceStopInternalLogPoller","_setStatus","_releaseQueues","releaseQueue","_startLogPoller","alwaysStart","_addUnloadHook","interval","isRunning","_flushInternalLogs","unref","_setPluginVersions","thePlugins","_addPluginVersions","channels","updateCfg","DiagnosticLogger","cfgExtensions","_createTelCtx","theCtx","_getPluginChain","_initPluginChain","theExtensions","channelPriority","allExtensions","coreExtensions","extPriorities","extPriority","_validateExtensions","rootCtx","_doUpdate","_getPlugin","pluginIdentifier","theExt","channelHosts","getChannel","setEnabled","isEnabled","removeCb","pluginsToRemove","_removePlugins","removed","removeComplete","unloadChain","newConfigExtensions","newChannelConfig","newQueue","channel","logMessage","_flushChannels","cbTimeout","doneIterating","cbTimer","doCallback","handled_1","_updateHook","_logOrThrowError","_notifyInvalidEvent","hooks","_setPendingStatus","prevCfgPerfMgr","rootCfg","initInMemoMaxSize","promises","initTimeout","initTimeOut","allPromises","ikeyRes","endpointRes","configHandler","unloadContainer","debugListener","disableDbgExt","_initDebugListener","enablePerfMgr","createPerfMgr","teeController","unloadHdl","_registerDelayedCfgListener","getChannels","controls","getNotifyMgr","getCookieMgr","setCookieMgr","cookieMgr","setPerfMgr","perfMgr","eventCnt","eventQueue","unloadComplete","flushComplete","processUnloadCtx","_doUnload","addPlugin","replaceExisting","addCb","existingPlugin","_addPlugin","added","removedPlugins_1","mergeExisting","oldCfg","_block","getTraceCtx","createNew","setTraceCtx","traceCtx","onCfgChange","unloadHook","fnd","_createUnloadHook","getWParam","enableWParam","BreezeChannelIdentifier","fromSimpleString","fromVersionString","versionString","substr","release","identifierBase","inc","FsDirectoryEntry","getEntry","FsFileEntry","getParent","dirContents","FileChangeType","Changed","Created","Deleted","component","watchers","sy","File","acc","jsxTags","registerDefinitionProvider","TypeScriptDefinitionProvider","provideDefinition","textSpan","definitions","v470","sourceDefinitionsResponse","contextStart","contextEnd","originSelectionRange","targetRange","targetUri","targetSelectionRange","ReloadTypeScriptProjectsCommand","ReloadJavaScriptProjectsCommand","OpenTsServerLogCommand","RestartTsServerCommand","TypeScriptGoToProjectConfigCommand","JavaScriptGoToProjectConfigCommand","ConfigurePluginCommand","LearnMoreAboutRefactoringsCommand","TSServerRequestCommand","OpenJsDocLinkCommand","EnableTsgoCommand","DisableTsgoCommand","v570","enabledSettingId","registerDocumentPasteEditProvider","DocumentPasteProvider","providedPasteEditKinds","copyMimeTypes","metadataMimeType","pasteMimeTypes","CopyMetadata","copyOperation","parsedData","TsPasteEdit","DocumentPasteEdit","tryCreateFromResponse","pasteEdit","additionalEdit","yieldTo","DocumentDropOrPasteEditKind","Text","TsPendingPasteEdit","operation","insertText","_modeId","TextUpdateImports","prepareDocumentPaste","dataTransfer","copyRequest","copiedTextSpan","raceTimeout","DataTransferItem","provideDocumentPasteEdits","_context","metadata","extractMetadata","copiedFrom","copyFile","pasteCts","copyResponse","_err","pasteOperation","pastedText","pasteLocations","pasteTimeout","resolveDocumentPasteEdit","inEdit","setConfiguration","registerFoldingRangeProvider","TypeScriptFoldingProvider","provideFoldingRanges","convertOutliningSpan","getFoldingRangeKind","lineAt","adjustFoldingEnd","FoldingRange","foldEndCharacter","translate","foldEndPairCharacters","FoldingRangeKind","Comment","Region","Imports","PluginManager","subscriptions","CommandManager","ActiveJsTsEditorTracker","StaticVersionProvider","TypeScriptVersion","packageInfo","getPackageInfo","aiKey","vscTelemetryReporter","ExperimentationTelemetryReporter","Logger","createLazyClientHost","noopLogDirectoryProvider","noopRequestCancellerFactory","WorkerServerProcessFactory","BrowserServiceConfigurationProvider","registerBaseCommands","lazilyActivateClient","workspaceUri","loader","RemoteWorkspaceContentsPreloader","triggerPreload","startPreloadWorkspaceContentsIfNeeded","registerAtaSupport","getExtensionApi","globalVersion","localVersions","_preload","fsWatcher","doPreload","remoteHubApi","loadWorkspaceContents","itemEquals","EventsDiscardedReason","Unknown","NonRetryableStatus","InvalidEvent","SizeLimitExceeded","KillSwitch","QueueFull","CleanStorage","MaxInStorageTimeExceeded","rCamelCase","rNormalizeInvalid","rLeadingNumeric","isNotNullOrUndefined","normalizeJsName","_all","letter","toUpperCase","strContains","toISOString","getExceptionName","setValue","valChk","srcChk","getSetValue","_createProxyFunction","srcFunc","originalArguments","proxyAssign","chkSet","_loop_1","proxyFunctionAs","overwriteTarget","proxyFunctions","functionsToProxy","theFuncName","createClassFromInterface","defaults","optimizeObject","objExtend","extended","argLen","deep","isArgArray","isArgObj","isNewArray","clone","getResponseText","formatErrorMessageXdr","formatErrorMessageXhr","prependTransports","newTransports","strDisabledPropertyName","strWithCredentials","strTimeout","openXhr","withCredentials","disabled","isSync","_wrapSetXhrProp","XMLHttpRequest","convertAllHeadersToMap","headersString","headersArray","headerEntry","_appendHeader","theHeaders","STR_KILL_DURATION_HEADER","STR_KILL_DURATION_SECONDS_HEADER","STR_TIME_DELTA_HEADER","_getAllResponseHeaders","TypeScriptDocumentHighlightProvider","registerDocumentHighlightProvider","registerMultiDocumentHighlightProvider","provideMultiDocumentHighlights","otherDocuments","filesToSearch","highlightItem","MultiDocumentHighlight","convertDocumentHighlight","provideDocumentHighlights","highlight","highlightSpans","DocumentHighlight","DocumentHighlightKind","Write","Read","registerCompletionItemProvider","JsDocCompletionProvider","defaultJsDoc","JsDocCompletionItem","CompletionItem","CompletionItemKind","sortText","suffix","inserting","replacing","provideCompletionItems","isPotentiallyValidDocCompletionPosition","templateToSnippet","template","snippetIndex","_param","post","STR_WARN_TO_CONSOLE","loggingLevelTelemetry","maxMessageLimit","enableDebug","_logFuncs","_sanitizeDiagnosticText","_logToConsole","theConsole","logFunc","_InternalLogMessage","msgId","isUserAct","strProps","diagnosticText","safeGetLogger","_loggingLevelConsole","_loggingLevelTelemetry","_maxInternalMessageLimit","_enableDebug","_unloadHandler","_messageCount","_messageLogged","_logInternalMessage","messageKey","_debugExtMsg","throttleLimitMessage","throttleMessage","errorToConsole","dbgExt","_setDefaultsFromConfig","consoleLoggingLevel","debugToConsole","resetInternalMessageCount","_getLogger","_throwInternal","_warnToConsole","_RALType","_ral","ral","ANY","Comparator","comp","parseOptions","debug","re","COMPARATORLOOSE","COMPARATOR","cmp","intersects","includePrerelease","safeRe","MAX_LENGTH","MAX_SAFE_INTEGER","LOOSE","FULL","build","compareMain","comparePre","base","requestArgs","hasFile","hasTraceId","newArgs","list","runTargetUnload","doUnloadAll","targets","TypeScriptAutoFixProvider","registerCodeActionsProvider","buildCombinedFix","fixes","codes","fixName","errorCodes","fix","fixId","combinedArgs","scope","combinedResponse","SourceAction","CodeAction","SourceFixAll","CodeActionKind","buildIndividualFixes","fixNames","classIncorrectlyImplementsInterface","awaitInSyncFunction","SourceRemoveUnused","Source","unusedIdentifier","SourceAddMissingImports","fixImport","providedCodeActionKinds","kindProviders","provideCodeActions","_range","only","actions","getFixAllActions","instanceName","_dataUid","_canAcceptData","createUniqueNamespace","includeVersion","createElmNodeData","accept","addDefault","theCache","_getCache","createEnumStyle","createValueMap","TypeScriptServerPlugin","enableForWorkspaceTypeScriptVersions","_pluginConfigurations","_plugins","newPlugins","readPlugins","_onDidUpdatePlugins","_onDidUpdateConfig","pluginMap","pack","packageJSON","contributes","typescriptServerPlugins","configNamespace","sequenceNumber","skipLast","__exportStar","MessageConnection","messageConnection_1","onmessage","EditorChatFollowUp","ID","expand","quickfix","refactor","initialRange","findScopeEndLineFromNavTree","findEditScope","initialSelection","Selection","autoSend","CompositeCommand","findScopeEndLineFromNavTreeWorker","navigationTree","firstEdit","lastEdit","last","compareTo","startIndex","endIndex","expandEnd","LIB","cwd","normalize","relative","u","_makeLong","extname","delimiter","win32","P","navigator","setPrototypeOf","isUri","A","y","O","revive","_formatted","external","_fsPath","_sep","encodeURIComponent","C","fromCharCode","decodeURIComponent","U","I","resolvePath","allDiagnosticLanguages","diagnosticOwner","diagnosticSource","diagnosticLanguage","configFilePattern","standardFileExtensions","DocumentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","getLegend","CONTENT_LENGTH_LIMIT","SemanticTokensLegend","tokenTypes","tokenModifiers","provideDocumentSemanticTokens","provideSemanticTokens","provideDocumentRangeSemanticTokens","requestArg","versionBeforeRequest","iv","waitForDocumentChangesToEnd","CancellationError","tokenSpan","builder","SemanticTokensBuilder","tsClassification","tokenType","getTokenTypeFromClassification","getTokenModifierFromClassification","startPos","endPos","startCharacter","endCharacter","FullVersionString","ObjHasOwnProperty","_fieldTypeEventPropMap","uInt8ArraySupported","isDocumentObjectAvailable","isWindowObjectAvailable","isValueAssigned","getTenantId","apiKey","indexTenantId","isUint8ArrayAvailable","ua","isSafariOrFirefox","isLatency","sanitizeProperty","propType","isArrayValid","isValueKind","getCommonSchemaMetaData","encodedTypeValue","isDataType","getFieldValueType","getCookieValue","cookieValue","createGuid","style","theGuid","extend","arrayValue","arrayIndex","setProcessTelemetryTimings","isChromium","isGreaterThanZero","_sharedProperties","_reporter","reporter","setSharedProperty","postEvent","propsObject","fromEntries","sendTelemetryEvent","postEventObj","ActiveStatus","INACTIVE","clientVersionDelegate","point","VersionStatus","onDidChangeTypeScriptVersion","objects","Terse","RequestTime","ImplicitProjectConfiguration","readTarget","readModule","readCheckJs","readExperimentalDecorators","readImplicitStrictNullChecks","readImplicitStrictFunctionTypes","readImplicitStrict","vscodeWatcherName","locale","readLocale","globalTsdk","readGlobalTsdk","localTsdk","readLocalTsdk","npmLocation","readNpmLocation","readTsServerLogLevel","tsServerPluginPaths","readTsServerPluginPaths","disableAutomaticTypeAcquisition","readDisableAutomaticTypeAcquisition","readUseSyntaxServer","readWebProjectWideIntellisenseEnable","webProjectWideIntellisenseSuppressSemanticErrors","readWebProjectWideIntellisenseSuppressSemanticErrors","webTypeAcquisitionEnabled","readWebTypeAcquisition","readEnableDiagnosticsTelemetry","readEnableProjectDiagnostics","maxTsServerMemory","readMaxTsServerMemory","enablePromptUseWorkspaceTsdk","readEnablePromptUseWorkspaceTsdk","useVsCodeWatcher","readUseVsCodeWatcher","readWatchOptions","readIncludePackageJsonAutoImports","enableTsServerTracing","readEnableTsServerTracing","localNodePath","readLocalNodePath","globalNodePath","readGlobalNodePath","readWorkspaceSymbolsExcludeLibrarySymbols","readEnableRegionDiagnostics","setting","deprecatedValue","watcherExcludes","experimentalConfig","globalValue","memoryInMB","noopRequestCanceller","cancellationPipeName","_seq","minimumVersionWithPreRelease","minimumVersion","simpleSubset","sub","dom","eqSet","gtltComp","higher","lower","hasDomLT","hasDomGT","higherGT","lowerLT","needDomLTPre","needDomGTPre","sawNonNull","OUTER","simpleSub","simpleDom","isSub","_doc","strToGMTString","strToUTCString","strCookie","strExpires","strIsCookieUseDisabled","strDisableCookiesUsage","strConfigCookieMgr","_supportsCookies","_allowUaSameSite","_parsedCookieValue","_cookieCache","_globalCookieConfig","rootDefaultConfig","ignoreCookies","blockedCookies","cookieDomain","cookiePath","_getDoc","_isMgrEnabled","_isIgnoredCookie","cookieMgrCfg","_isCfgEnabled","cookieMgrConfig","isCfgEnabled","cookieEnabled","safeGetCookieMgr","createCookieMgr","inst","_gblCookieMgr","_path","_domain","_enabled","_getCookieFn","_setCookieFn","_delCookieFn","getCookie","_getCookieValue","setCookie","_setCookieValue","delCookie","areCookiesSupported","gblManager","maxAgeSec","_isBlockedCookie","_extractParts","_isIE","expireMs","expiry","setTime","_formatDate","uaDisallowsSameSiteNone","_formatCookieValue","purge","thePart","theDate","theCookie","_map","defaultPathNormalizer","toKey","isCaseInsensitivePath","SourceDefinitionCommand","anchor","reloadProjects","mailto","outside","filePathConverter","MarkdownString","appendDocumentationAsMarkdown","isTrusted","enabledCommands","convertLinkTags","currentLink","linkText","escapeMarkdownSyntaxTokensForCode","linkcode","tagsToMarkdown","tag","docs","getTagBody","param","makeCodeblock","captionTagMatches","emailMatch","getTagBodyText","getTagDocumentation","converter","appendMarkdown","tagsPreview","typingsStatus","TypeScriptCompletionItemProvider","MyCompletionItem","tsEntry","completionContext","useCodeSnippet","defaultCommitCharacters","convertKind","hasAction","v490","qualifierCandidate","sourceDisplay","isSnippet","labelDetails","preselect","isRecommended","completeFunctionCalls","getRangeFromReplacementSpan","commitCharacters","getCommitCharacters","filterText","getFilterText","isMemberCompletion","dotAccessorContext","textLabel","replacementRange","wordRange","union","optional","CompletionItemTag","color","Color","extModifier","fileExtensionKindModifiers","getScriptKindDetails","resolveRange","_resolvedPromise","resolveCompletionItem","requestToken","entryNames","newItemDetails","getDetails","getDocumentation","codeAction","getCodeActions","CompletionAcceptedCommand","additionalTextEdits","isValidFunctionCompletionContext","snippet","parameterCount","snippetForFunctionCall","codeActions","hasRemainingCommandsOrEdits","tsAction","ApplyCompletionCodeActionCommand","replacementSpan","optionalReplacementRange","replaceRange","isSingleLine","wordStart","primitiveType","keyword","Keyword","externalModuleName","warning","directory","Folder","Constant","enableCallCompletions","isNewIdentifierLocation","isPackageJsonImport","isImportStatementCompletion","ApplyCompletionCommand","_file","applyCodeAction","showQuickPick","placeHolder","CompletionConfiguration","nameSuggestions","pathSuggestions","autoImportSuggestions","importStatementSuggestions","getConfigurationForResource","modeId","isAcquiringTypings","comment","completionConfiguration","shouldTrigger","getWordRangeAtPosition","secondCharPosition","includeExternalModuleExports","includeInsertTextCompletions","getTsTriggerCharacter","logCompletionsTelemetry","dotMatch","characterDelta","isIncomplete","optionalReplacementSpan","includesPackageJsonImport","includesImportStatementCompletion","shouldExcludeCompletionEntry","CompletionList","updateGraphDurationMs","createAutoImportProviderProgramDurationMs","v430","element","toDispose","ExcludeHintItem","onConfigureExcludesSelected","getCurrentHint","hide","selected","createLargeProjectMonitorFromTypeScript","_item","_currentHint","createStatusBarItem","StatusBarAlignment","Right","largeRoots","AggregateError","_isDisposed","_asyncCallbacks","cause","BaseMessageConnection","transfer","strShimFunction","strShimObject","strShimUndefined","strShimPrototype","_Request","_Notification","_Response","sendNotification","_sendNotification","onNotification","_onNotification","responsePromises","notificationHandlers","transferList","notification","sendResultResponse","sendErrorResponse","Response","serverMessage","serverStack","sanitizedStack","parsedResult","parseErrorText","serverCommand","serverid","sanitizedstack","badclient","errorText","errorPrefix","prefixFreeErrorText","newlineIndex","sanitizeStack","createScanner","ignoreTrivia","tokenOffset","lineStartOffset","tokenLineStartOffset","prevTokenLineStartOffset","scanError","scanHexDigits","exact","digits","ch","scanNext","isWhiteSpace","isLineBreak","ch3","scanString","safeLength","commentClosed","isDigit","scanNumber","isUnknownContentCharacter","setPosition","newPosition","getPosition","scan","getToken","getTokenValue","getTokenOffset","getTokenLength","getTokenStartLine","getTokenStartCharacter","getTokenError","CharacterCodes","ParseOptions","documentText","initialIndentLevel","formatText","formatTextStart","rangeStart","rangeEnd","isEOL","nChars","computeIndentLevel","eol","getEOL","indentValue","numberLineBreaks","indentLevel","scanner","hasError","newLinesAndIndent","keepLines","editOperations","addEdit","firstToken","firstTokenStart","firstTokenEnd","secondToken","replaceContent","needsLineBreak","insertFinalNewline","DEFAULT","currentParent","ensurePropertyComplete","onValue","valueNode","visit","onObjectBegin","onObjectProperty","onObjectEnd","onArrayBegin","onArrayEnd","onLiteralValue","getNodeType","onSeparator","colonOffset","segment","found","propertyNode","visitor","_scanner","_jsonPath","toNoArgVisit","visitFunction","toNoArgVisitWithPath","toOneArgVisit","toOneArgVisitWithPath","onComment","disallowComments","allowTrailingComma","skipUntilAfter","skipUntil","parseString","isValue","parseProperty","parseValue","isFirstElement","needsComma","parseArray","parseObject","tokenValue","parseLiteral","allowEmptyContent","withFormatting","begin","ScanError","SyntaxKind","segments","earlyReturnException","previousNode","previousNodeInst","isAtPropertyKey","setPreviousNode","currentProperty","previousParents","findNodeAtOffset","includeRightBound","getNodePath","getNodeValue","replaceCh","ParseErrorCode","printParseErrorCode","modify","originalPath","lastSegment","propertyIndex","removeBegin","removeEnd","previous","newProperty","getInsertionIndex","insertIndex","removalIndex","toRemove","isArrayInsertion","toModify","applyEdits","sortedEdits","lastModifiedOffset","requireActiveDocumentSetting","TagClosing","_disposed","TextDocumentChangeReason","Undo","Redo","lastCharacter","rangeLength","addedLines","insertion","getTagSnippet","getInsertionPositions","closingTag","appendPlaceholder","appendText","activeSelectionPositions","selections","active","Condition","TypeScriptImplementationsCodeLensProvider","getCommand","getTitle","registerSelectionRangeProvider","SmartSelection","provideSelectionRanges","positions","convertSelectionRange","SelectionRange","strOnPrefix","strAttachEvent","strAddEventHelper","strDetachEvent","strRemoveEventListener","strEvents","strVisibilityChangeEvt","strPageHide","strPageShow","strUnload","strBeforeUnload","strPageHideNamespace","strPageShowNamespace","rRemoveEmptyNs","rRemoveTrailingEmptyNs","_guid","elmNodeData","eventNamespace","_normalizeNamespace","_getEvtNamespace","theNamespace_1","parsedEvent","ns","__getRegisteredEvents","theEvents","eventCache","evtName","evtType","registeredEvents","_getRegisteredEvents","aiEvts","_doDetach","handlerRef","useCapture","_doUnregister","unRegFn","capture","mergeEvtNamespace","theNamespace","namespaces","eventOn","_doAttach","registeredEvent","guid","eventOff","evtName_1","found_1","_unregisterEvents","regEvent","attachEvent","eventNameWithoutOn","detachEvent","addEventHandler","removeEventHandler","_addEventListeners","excludeEvents","addEventListeners","removeEventListeners","addPageUnloadEventListener","removePageUnloadEventListener","addPageHideEventListener","newNamespaces","pageUnloadAdded","visibilityState","removePageHideEventListener","addPageShowEventListener","pageShowAdded","removePageShowEventListener","escapeRegExp","prefixLength","ReferencesCodeLens","CodeLens","onDidChangeCodeLenses","provideCodeLenses","referenceableSpans","walkNavTree","rtl","COERCERTL","lastIndex","COERCE","_DYN_TO_LOWER_CASE","_DYN_BLK_VAL","_DYN_RD_ONLY","_DYN_NOTIFY","_DYN_WARN_TO_CONSOLE","_DYN_THROW_INTERNAL","_DYN_SET_DF","_DYN_WATCH","_DYN_APPLY","_DYN_PUSH","_DYN_SPLICE","_DYN_HDLR","_DYN_CANCEL","_DYN_IDENTIFIER","_DYN_REMOVE_NOTIFICATION_0","_DYN_ADD_NOTIFICATION_LIS1","_DYN_IS_INITIALIZED","_DYN__INACTIVE","_DYN_GET_NOTIFY_MGR","_DYN_GET_PLUGIN","_DYN_NAME","_DYN_I_KEY","_DYN_TIME","_DYN_PROCESS_NEXT","_DYN_GET_PROCESS_TEL_CONT2","_DYN_ENABLED","_DYN_STOP_POLLING_INTERNA3","_DYN_UNLOAD","_DYN_ON_COMPLETE","_DYN_VERSION","_DYN_LOGGING_LEVEL_CONSOL4","_DYN_TEARDOWN","_DYN_MESSAGE_ID","_DYN_IS_ASYNC","_DYN__DO_TEARDOWN","_DYN_UPDATE","_DYN_GET_NEXT","_DYN_SET_NEXT_PLUGIN","_DYN_PROTOCOL","_DYN_USER_AGENT","_DYN_SPLIT","_DYN_NODE_TYPE","_DYN_REPLACE","_DYN_LOG_INTERNAL_MESSAGE","_DYN_TYPE","_DYN_HANDLER","_DYN_STATUS","_DYN_GET_RESPONSE_HEADER","_DYN_GET_ALL_RESPONSE_HEA5","_DYN_IS_CHILD_EVT","_DYN_GET_CTX","_DYN_SET_CTX","_DYN_COMPLETE","_DYN_URL_STRING","_DYN_SEND_POST","_DYN_HEADERS","_DYN_TIMEOUT","_DYN_SET_REQUEST_HEADER","_DYN_SPAN_ID","_DYN_TRACE_FLAGS","registerRenameProvider","TypeScriptRenameProvider","prepareRename","execRename","renameInfo","canRename","triggerSpan","localizedErrorMessage","provideRenameEdits","newName","fileToRename","renameFile","fullDisplayName","updateLocs","locs","looksLikePotentialJsxTagContext","findInStrings","findInComments","spanGroup","prefixText","suffixText","registerTypeDefinitionProvider","TypeScriptTypeDefinitionProvider","provideTypeDefinition","conditions","doRegister","elseDoRegister","ConditionalRegistration","section","configValue","requiredCapability","extensionId","getValue","_value","onUpdate","condition","registration","useWorkspaceTsdkStorageKey","suppressPromptWorkspaceTsdkStorageKey","_currentVersion","useWorkspaceTsdkSetting","onDidGrantWorkspaceTrust","updateActiveVersion","isInPromptWorkspaceTsdkState","promptUseWorkspaceTsdk","_onDidPickNewVersion","nextConfiguration","lastConfiguration","getBundledPickItem","getLocalPickItems","QuickPickItemKind","Separator","LearnMorePickItem","pathLabel","requestWorkspaceTrust","workspaceVersion","allowIt","dismissPrompt","suppressPrompt","pickedVersion","oldVersion","suppressPromptWorkspaceTsdkSetting","addMissingAwait","addMissingNewOperator","addMissingOverride","annotateWithTypeFromJSDoc","classDoesntImplementInheritedAbstractMember","constructorForDerivedNeedSuperCall","extendsInterfaceBecomesImplements","forgottenThisPropertyAccess","removeUnnecessaryAwait","spelling","inferFromUsage","addNameToNamelessParameter","fixMissingFunctionDeclaration","fixClassDoesntImplementInheritedAbstractMember","$cancellationData","typedArray","retrieveCheck","DirectiveCommentCompletionProvider","tsDirectives","tsDirectives390","directive","Snippet","_pathLabel","tsServerPath","executor","_didRun","_error","hasValue","rawValue","STR_CHANNELS","STR_CORE","STR_CREATE_PERF_MGR","STR_DISABLED","STR_EXTENSION_CONFIG","STR_EXTENSIONS","STR_PROCESS_TELEMETRY","STR_PRIORITY","STR_EVENTS_SENT","STR_EVENTS_DISCARDED","STR_EVENTS_SEND_REQUEST","STR_PERF_EVENT","STR_OFFLINE_STORE","STR_OFFLINE_SENT","STR_OFFLINE_DROP","STR_GET_PERF_MGR","STR_DOMAIN","STR_PATH","STR_NOT_DYNAMIC_ERROR","UInt32Mask","MaxUInt32","SEED1","SEED2","_mwcSeeded","_mwcW","_mwcZ","_autoSeedMwc","seedValue","randomValue","maxValue","random32","signed","getRandomValues","mwcRandom32","newId","number","chars","numberHash","val","initialHashVal","stringHash","hashVal","objectHash","booleanHash","r1","r2","MAX_SAFE_COMPONENT_LENGTH","RELEASE_TYPES","SEMVER_SPEC_VERSION","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","getPluginPaths","pluginPaths","pluginPath","resolvePluginPath","workspacePath","RelativeWorkspacePathResolver","asAbsoluteWorkspacePath","hilo","gtfn","ltefn","ltfn","ecomp","high","low","LanguageProvider","configurationChanged","registerProviders","documentSelector","cachedNavTreeResponse","CachedResponse","updateValidate","updateSuggestionDiagnostics","handlesUri","handlesConfigFile","handlesDocument","_diagnosticLanguage","triggerAllDiagnostics","diagnosticsReceived","diagnosticsKind","reportUnnecessary","reportDeprecated","DiagnosticSeverity","Hint","parameterListParts","optionalParams","isInMethod","hasOptionalParameters","parenCount","braceCount","outer","DisplayPartKind","methodName","functionName","propertyName","parameterName","nameIsFollowedByOptionalIndicator","nameIsThis","punctuation","getParameterListParts","paramterPart","appendJoinedPlaceholders","appendTabstop","_versionProvider","_logDirectoryProvider","_pluginPathsProvider","_factory","primaryServer","serverType","getCompositeServerType","shouldUseSeparateDiagnosticsServer","spawnTsServer","canceller","tsServerTraceDirectory","getTsServerArgs","isLoggingEnabled","fork","kindToServerType","ServerType","v401","tsServerLogOutputChannel","logDir","getNewLogDirectory","logFilePath","isUsingBundledTypeScriptVersion","getTsLocale","configUseVsCodeWatcher","v544","NODE_DEBUG","updateTsgoSetting","enable","tsNativeExtensionId","tsgoInspect","strDocumentMode","strLocation","strConsole","strJSON","strCrypto","strMsCrypto","strReactNative","strMsie","strTrident","strXMLHttpRequest","_isTrident","_navUserAgentCheck","_enableMocks","_useXDomainRequest","_beaconsSupported","_hasProperty","theClass","supported","tmp","setEnableEnvMocks","getLocation","checkForMock","mockLocation","getConsole","hasJSON","getJSON","getCrypto","getMsCrypto","isReactNative","product","isIE","getIEVersion","userAgentStr","navigator_1","tridentVer","isBeaconsSupported","isFetchSupported","withKeepAlive","isSupported","useXDomainRequest","isXhrSupported","_getNamedValue","findMetaTag","querySelectorAll","findNamedServerTiming","navPerf","getEntriesByType","serverTiming","cachedNavTree","formattingOptionsManager","TypeScriptRefactorProvider","toWorkspaceEdit","ignoreIfExists","DidApplyRefactoringCommand","SelectRefactorCommand","InlinedCodeAction","rangeOrSelection","MoveToFileRefactorCommand","didApplyCommand","targetFile","getTargetFile","fileSuggestionArgs","interactiveRefactorArguments","selectExistingFileItem","selectNewFileItem","quickPick","createQuickPick","ignoreFocusOut","quickPickInRelativeMode","updateItems","relativeQuery","destinationItems","parentDir","filename","placeholder","matchOnDescription","onDidChangeValue","picked","onDidAccept","selectedItems","onDidHide","showOpenDialog","openLabel","defaultUri","showSaveDialog","saveLabel","newFileName","Extract_Function","RefactorExtract","Extract_Constant","Extract_Type","Extract_Interface","Move_File","RefactorMove","Move_NewFile","Rewrite_Import","RefactorRewrite","Rewrite_Export","Rewrite_Arrow_Braces","Rewrite_Parameters_ToDestructured","Rewrite_Property_GenerateAccessors","allKnownCodeActionKinds","getKind","notApplicableReason","renameLocation","Empty","Refactor","MoveToFileCodeAction","SelectCodeAction","isOnSignatureName","_declarationKinds","convertedSpan","didApplyRefactoringCommand","interruptGetErrIfNeeded","includeInteractiveActions","v520","applicableRefactors","convertApplicableRefactors","CodeActionTriggerKind","Automatic","navTree","pruneInvalidActions","appendInvalidActions","resolveCodeAction","refactors","inlineable","refactorActionToCodeActions","allActions","isPreferred","getScope","otherAtion","otherAction","otherScope","disabledAction","numberOfInvalid","availableActions","invalidCommonActions","invalidUncommonActions","prioritizedActions","topNInvalid","BaseServiceConfigurationProvider","_activeJsTsEditor","_onDidChangeActiveJsTsEditor","onDidChangeTabGroups","newActiveJsTsEditor","getEditorCandidatesForActiveTab","at","activeTabGroup","activeTab","inputUri","visibleNotebookEditors","ChannelControllerPriority","DisabledPropertyName","listenerFuncs","_aiNamespace","_listenerProxyFunc","getDebugExt","getDebugListener","refCount","useWorkspaceNodeStorageKey","lastKnownWorkspaceNodeStorageKey","useWorkspaceNode","canUseWorkspaceNode","promptAndSetWorkspaceNode","computeNewVersion","promptUseWorkspaceNode","allow","disallow","dismiss","setUseWorkspaceNodeState","nodeVersion","noopDisposable","docUrl","organizeImportsCommand","sortImportsCommand","removeUnusedImportsCommand","ImportsCodeActionProvider","commandIds","SourceOrganizeImports","DidOrganizeImportsCommand","ImportCodeAction","commandMetadata","fileConfigManager","skipDestructiveCodeActions","strExecutionContextKey","strParentContextKey","strChildrenContextKey","_defaultPerfManager","PerfEvent","payloadDetails","theDetails_1","childTime","childEvts","childEvt","exTime","ParentContextKey","ChildrenContextKey","doPerfActiveKey","doPerf","mgrSource","getSource","perfEvt","currentActive","getGblPerfMgr","uiKind","UIKind","Web","_debugState","_debugResult","_debugHandled","STR_PROMISE","REJECTED","doAwaitResponse","doAwait","resolveFn","rejectFn","finallyFn","doFinally","_hasInitEvent","_promiseDebugEnabled","STRING_STATES","DISPATCH_EVENT","_hasInitEventFn","createEvent","initEvent","_hasPromiseRejectionEvent","_promiseCls","_allSyncSettledCreator","_promiseCreator","NODE_UNHANDLED_REJECTION","UNHANDLED_REJECTION","_currentPromiseId","_uniquePromiseId","_unhandledRejectionTimeout","dumpFnObj","_createPromise","newPromise","processor","_settledValue","_thePromise","additionalArgs","_hasResolved","_queue","_parentId","_handled","_unHandledRejectionHandler","_then","onResolved","onRejected","_processQueue","_strState","pending","_createSettleIfFn","allowState","_notifyUnhandledRejection","emit","populateEvent","useNewEvent","theEvt","emitEvent","onFinally","thenFinally","catchFinally","stateFn","_addDebugState$1","_rejectFn","_createAllPromise","values_1","pending_1","syncItemProcessor","createAsyncPromise","callbackTimeout","timeoutItemProcessor","createNativePromise","PrmCls","createSyncPromise","createSyncAllSettledPromise","processItem","createPromise","createAllPromise","strGetPlugin","_isinitialized","_rootCtx","_nextPlugin","_unloadHandlerContainer","currentCtx","_setDefaults","unloadDone","theUnloadCtx","theUnloadState","_unloadCallback","updateDone","theUpdateCtx","theUpdateState","_updateCallback","setInitialized","Prototype","strFunction","DynInstFuncTable","DynProxyTag","DynClassName","DynClassNamePrefix","DynInstChkTag","DynAllowInstChkTag","DynProtoDefaultOptions","UnknownValue","str__Proto","DynProtoBaseProto","DynProtoGlobalSettings","DynProtoCurrent","strUseBaseInst","strSetInstFuncs","Obj","_objGetPrototypeOf","_objGetOwnProps","_gbl","_gblInst","_isObjectOrArrayPrototype","_isObjectArrayOrFunctionPrototype","_getObjProto","newProto","curProto","_forEachProp","_isDynamicCandidate","skipOwn","_throwTypeError","_hasVisited","_populatePrototype","className","baseInstFuncs","setInstanceFunc","instFuncTable","instFuncs_1","dynProtoProxy","instFunc","currentDynProtoProxy","canAddInst","objProto","visited","protoFunc","_getInstFunc","_getProtoFunc","_createDynamicPrototype","_getObjName","unknownValue","dynamicProto","delegateFunc","classProto","thisTarget","thisProto","_checkPrototype","perfOptions","useBaseInst","instFuncs","_getInstanceFuncs","baseFuncs","_instFuncProxy","funcHost","baseProto","_getBaseFuncs","parseRange","isNullSet","isAny","comps","memoKey","cached","hr","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","comparatorTrimReplace","rangeList","TILDETRIM","tildeTrimReplace","CARETTRIM","caretTrimReplace","parseComparator","replaceGTE0","rangeMap","thisComparators","isSatisfiable","rangeComparators","thisComparator","rangeComparator","testSet","remainingComparators","testComparator","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","replaceTilde","TILDELOOSE","TILDE","M","pr","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","fM","fm","fp","fpr","tM","tm","tp","tpr","tb","allowed","TypeScriptQuickFixProvider","ApplyCodeActionCommand","diagnosticManager","followupAction","codeActionResult","ApplyFixAllCodeAction","DiagnosticsSet","_values","VsCodeCodeAction","VsCodeFixAllCodeAction","CodeActionSet","_actions","_fixAllActions","_aiActions","addAction","isAI","existingFixAll","addFixAllAction","hasFixAllAction","SupportedCodeActionProvider","getFixableDiagnosticsForContext","fixableCodes","fixableDiagnosticCodes","formattingConfigurationManager","QuickFix","supportedCodeActionProvider","allDiagnostics","_maxCodeActionsPerFile","fixableDiagnostics","getFixesForDiagnostic","isPreferredFix","tsCodeFix","getFixesForTsCodeAction","addFixAllForTsCodeAction","copilot","isActive","inferFromBody","aiCodeAction","fixAllErrorCodes","fixAllDescription","preferredFixes","thereCanOnlyBeOne","fixPriority","otherFixPriority","rootPrefixes","rootPrefix","looseOption","emptyOpts","messageCancellation_1","inserted","Node","pushNode","forEachReverse","getReverse","mapReverse","initial","reduceReverse","toArrayReverse","sliceReverse","deleteCount","nodes","RT_PROFILE","NRT_PROFILE","BE_PROFILE","STR_DROPPED","STR_REQUEUE","DEFAULT_CACHE_CONTROL","DEFAULT_CONTENT_TYPE","STR_CACHE_CONTROL","STR_CONTENT_TYPE_HEADER","STR_CLIENT_VERSION","STR_CLIENT_ID","STR_TIME_DELTA_TO_APPLY","STR_UPLOAD_TIME","STR_API_KEY","STR_MSA_DEVICE_TICKET","STR_AUTH_WEB_TOKEN","STR_AUTH_XTOKEN","STR_MSFPC","STR_TRACE","STR_USER","_DYN_ALLOW_REQUEST_SENDIN0","_DYN_FIRST_REQUEST_SENT","_DYN_SHOULD_ADD_CLOCK_SKE1","_DYN_GET_CLOCK_SKEW_HEADE2","_DYN_SET_CLOCK_SKEW","_DYN_COUNT","_DYN_EVENTS","_DYN_HDRS","_DYN_USE_HDRS","_DYN_SET_TIMEOUT_OVERRIDE","_DYN_CLEAR_TIMEOUT_OVERRI3","_DYN_OVERRIDE_ENDPOINT_UR4","_DYN_AVOID_OPTIONS","_DYN_ENABLE_COMPOUND_KEY","_DYN_DISABLE_XHR_SYNC","_DYN_DISABLE_FETCH_KEEP_A6","_DYN_USE_SEND_BEACON","_DYN_FETCH_CREDENTIALS","_DYN_ALWAYS_USE_XHR_OVERR7","_DYN_SERIALIZE_OFFLINE_EV8","_DYN_GET_OFFLINE_REQUEST_9","_DYN_CREATE_PAYLOAD","_DYN_CREATE_ONE_DSPAYLOAD","_DYN_PAYLOAD_BLOB","_DYN__THE_PAYLOAD","_DYN_BATCHES","_DYN_SEND_TYPE","_DYN_ADD_HEADER","_DYN_CAN_SEND_REQUEST","_DYN_SEND_QUEUED_REQUESTS","_DYN_IS_COMPLETELY_IDLE","_DYN_SET_UNLOADING","_DYN_RESUME","_DYN_SEND_SYNCHRONOUS_BAT10","_DYN__TRANSPORT","_DYN_GET_WPARAM","_DYN_IS_BEACON","_DYN_IS_TEARDOWN","_DYN_IS_SYNC","_DYN__SEND_REASON","_DYN_SET_KILL_SWITCH_TENA11","_DYN__BACK_OFF_TRANSMISSI12","_DYN_AUTO_FLUSH_EVENTS_LI14","_DYN_BASE_DATA","_DYN_SEND_ATTEMPT","_DYN_LATENCY","_DYN_SYNC","_getEventMsfpc","intWeb","_getMsfpc","msfpc","EventBatch","addEvents","_msfpc","Msfpc","addEvent","fromEvent","numEvents","ClockSkewManager","_allowRequestSending","_shouldAddClockSkewHeaders","_isFirstRequest","_clockSkewHeaderValue","_clockSkewSet","timeDeltaInMillis","_killedTokenDictionary","killTokens","killDuration","killedTokens","tenantToken","killDictionary","retryPolicyGetMillisToBackoffForRetry","retriesSoFar","waitDuration","randomBackoff","BaseBackoff","MaxRecordSize","MaxBeaconRecordSize","rCheckDot","perfManager","valueSanitizer","enableCompoundKey","getEncodedTypeOverride","excludeCsMetaData","strData","_checkForCompoundkey","_processSubKeys","_theSanitizer","_isReservedCache","_excludeCsMetaData","_getEncodedType","_processPathKeys","srcObj","thePath","checkReserved","metadataPathKeys","metadataCallback","processSubKeys","srcValue","theMetaPathKeys","destObj","subKeys","keyLen","subKey","isReserved","_isReservedField","handleField","retryCnt","isTeardown","isReducedPayload","sendType","apiKeys","payloadBlob","overflow","sizeExceed","failedEvts","batches","isBeacon","appendPayload","theBatch","maxEventsPerBatch","canAddEvents","payloadEvents","eventsAdded","sizeExceeded","isBeaconPayload","requestMaxSize","recordMaxSize","joinCount","eventBlob","getEventBlob","blobLength","evts","serializedEvent","_addMetadataCallback","serializedExt","pathKeys","getEncodedType","json","propKeys","propertyValue","metaData","metaTarget","newTarget","_addJSONPropertyMetaData","eventExt","serializedData","serializedBaseData","createTimeoutWrapper","argSetTimeout","argClearTimeout","strSendAttempt","UrlQueryString","_eventActionMap","_collectorQsHeaders","_collectorHeaderToQs","_addCollectorHeaderQsMapping","qsName","allowQs","_hasHeader","hasHeader","lowerHeader","_addRequestDetails","useHeaders","HttpManager","maxConnections","maxRequestRetriesBeforeBackoff","_urlString","_killSwitch","_clockSkewManager","_outstandingRequests","_postManager","_sendInterfaces","_core","_customHttpInterface","_queryStringParameters","_batchQueue","_enableEventTimings","_cookieMgr","_useHeaders","_xhrTimeout","_disableXhrSync","_canHaveReducedPayload","_unloadHooks","_sendHook","_sendListener","_responseHandlers","_useBeacons","_xdrOncomplete","_fetchOnComplete","_xhrOnComplete","_handleCollectorResponse","headerMap","handleResponse","theUrl","nav_1","persistStorage","droppedBatches_1","sentBatches_1","sentEvts","_sendBatchesNotification","_isBeaconPayload","_adjustSendType","_hasIdleConnection","_clearQueue","theQueue","_canSendPayload","theBatches","_createDebugBatches","_sendBatches","retryCount","orgBatches_1","isSynchronous_1","droppedBatches","serializationStart","sendTransport","isTenantKilled","_doPayloadSend","isSynchronous","useSendBeacon","_buildRequestDetails","requestDetails","hdrs","useHdrs","apiQsKeys","wParam","_setTimingValue","timings","serializationCompleted","useSendHook_1","sendInterface_1","useHeaders_1","requestDetails_1","sendEventStart_1","batchLp","evtLp","orgPayloadData","_thePayload","_sendReason","sender","httpStatusCode","isRetrying","backOffTrans","shouldRetry","killToken","removedEvents","retryCount_1","_doAction","batchReason","_clearBackOff","sendEventCompleted_1","sendEventCompleted","_addEventCompletedTimings","_addCompleteTimings","sendQueuedRequests","_handleRequestFinished","_retryRequestIfNeeded","hookData_1","senderCalled_1","responseHandlers","webResult","sendSync","theAction_1","isSyncRequest_1","undefValue","postChannel","coreConfig","channelConfig","anonCookieName","qsParams","_addQueryStringParameter","_removeQueryStringParameter","payloadListener","xhrTimeout","syncHttpInterface","beaconHttpInterface","fetchSyncHttpInterface","beaconUnloadTransports","addResponseHandler","responseHandler","optimize","theBatches_1","removeHeader","addBatch","teardown","hook","MaxEventsLimitInMem","strEventsDiscarded","defaultPostChannelConfig","eventsLimitInMem","immediateEventLimit","autoFlushEventsLimit","disableAutoBatchFlushLimit","overrideInstrumentationKey","overrideEndpointUrl","ignoreMc1Ms0CookieProcessing","setTimeoutOverride","clearTimeoutOverride","payloadPreprocessor","disableEventTimings","disableOptimizeObj","unloadTransports","avoidOptions","alwaysUseXhrOverride","maxEventRetryAttempts","maxUnloadEventRetryAttempts","PostChannel","_postConfig","_flushCallbackTimer","_immediateQueueSizeLimit","_queueSizeLimit","_scheduledTimer","_immediateTimer","_currentBackoffCount","_timerCount","_httpManager","_batchQueues","_autoFlushEventsLimit","_autoFlushBatchLimit","_delayedBatchSendLatency","_delayedBatchReason","_optimizeObject","_isPageUnloadTriggered","_maxEventSendAttempts","_maxUnloadEventSendAttempts","_ignoreMc1Ms0CookieProcessing","_disableAutoBatchFlushLimit","_unloadHandlersAdded","_overrideInstrumentationKey","_isTeardownCalled","_flushCallbackQueue","_immediateQueueSize","_queueSize","_profiles","_currentProfile","_removeUnloadHandlers","_cleanEvent","_handleUnloadEvents","_releaseAllQueues","_handleShowEvents","_addEventToQueues","evtLatency","queueSize","queueLimit","eventDropped","_addEventToProperQueue","dropLatency","dropNumber","currentLatency","eventBatch","_getEventBatch","droppedEvents","droppedCount","_notifyBatchEvents","_resetQueueCounts","_dropEventWithLatencyOrLess","_notifyEvents","_sendEventsForLatencyAndAbove","queued","_queueBatches","_hasEvents","_scheduleTimer","immediateTimeOut","_createTimer","timeOut","requeue","_requeueEvents","_sendingEvent","sent","_eventsSentEvent","drop","_eventsDropped","rspFail","_eventsResponseFail","oth","_otherEvent","_initializeProfiles","iKeyMap","_setAutoLimits","theTimerFunc","timerMultiplier","batchQueue","_performAutoFlush","doFlush","immediateQueue","normalQueue","eventsQueued","latencyToProcess","_flushImpl","_waitForIdleManager","maxSendAttempts","_callNotification","notifyFunc","extraArgs","isSyncRequest","MaxNumberEventPerBatch","existingGetWParamMethod","wparam","_hookWParam","excludePageUnloadEvents","disablePageUnloadEvents","disablePageShowEvents","details_1","serialize","createOneDSPayload","setEventQueueLimits","eventLimit","autoFlushLimit","_loadTransmitProfiles","profiles","profileName","profileValue","profLen","directValue","cleared","setMsaAuthTicket","ticket","setAuthPluginHeader","removeAuthPluginHeader","hasEvents","_setTransmitProfile","_maxHooks","_hookAddMonitor","_testHookMaxUnloadHooksCb","maxHooks","addMonitor","createUnloadHookContainer","_hooks","oldHooks","CFG_HANDLER_LINK","BLOCK_DYNAMIC","FORCE_DYNAMIC","_cfgDeepCopy","target_1","getDynamicConfigHandler","blockDynamicConversion","forceDynamicConversion","_canMakeDynamic","getFunc","blkVal","throwInvalidAccess","registerHoverProvider","TypeScriptHoverProvider","lastHoverAndLevel","provideHover","verbosityLevel","v590","getPreviousLevel","previousHover","verbosityDelta","getContents","hover","VerboseHover","canIncreaseVerbosityLevel","Hover","displayString","appendCodeblock","md","getAPI","ApiV0","_pluginManager","TypingsStatus","_acquiringTypings","onBeginInstallTypings","eventId","onEndInstallTypings","AtaProgressReporter","_promises","_onBegin","_onEndOrTimeout","dontShowAgain","wasm","heap","fill","getObject","heap_next","takeObject","dropObject","cachedTextDecoder","ignoreBOM","fatal","cachedUint8Memory0","getUint8Memory0","memory","getStringFromWasm0","ptr","subarray","addHeapObject","WASM_VECTOR_LEN","cachedTextEncoder","encodeString","encodeInto","view","buf","written","passStringToWasm0","malloc","realloc","mem","isLikeNone","cachedInt32Memory0","getInt32Memory0","cachedFloat64Memory0","cachedBigInt64Memory0","debugString","builtInMatches","makeMutClosure","arg0","dtor","real","__wbindgen_export_2","__wbg_adapter_50","__wbindgen_export_3","__wbg_adapter_53","__wbindgen_export_4","resolveSpec","spec","ptr0","__wbindgen_export_0","__wbindgen_export_1","len0","manifest","packument","corgiPackument","tarball","__wbindgen_export_6","IntoUnderlyingByteSource","__wrap","__destroy_into_raw","__wbg_intounderlyingbytesource_free","intounderlyingbytesource_type","autoAllocateChunkSize","intounderlyingbytesource_autoAllocateChunkSize","controller","intounderlyingbytesource_start","pull","intounderlyingbytesource_pull","intounderlyingbytesource_cancel","IntoUnderlyingSink","__wbg_intounderlyingsink_free","chunk","intounderlyingsink_write","intounderlyingsink_close","abort","intounderlyingsink_abort","IntoUnderlyingSource","__wbg_intounderlyingsource_free","intounderlyingsource_pull","intounderlyingsource_cancel","__wbg_nassun_free","retptr","__wbindgen_add_to_stack_pointer","nassun_new","r0","nassun_resolve","nassun_packument","nassun_metadata","nassun_corgiPackument","nassun_corgiMetadata","nassun_tarball","nassun_entries","NodeMaintainer","__wbg_nodemaintainer_free","nodemaintainer_resolveSpec","nodemaintainer_resolveManifest","nodemaintainer_toKdl","r3","__wbindgen_export_5","nodemaintainer_packageAtPath","Package","nodemaintainer_forEachPackage","NodeMaintainerOptions","__wbg_nodemaintaineroptions_free","__wbg_package_free","package_from","package_name","package_resolved","package_corgiPackument","package_corgiMetadata","package_packument","package_metadata","package_tarball","package_entries","PipeOptions","__wbg_pipeoptions_free","preventClose","pipeoptions_preventClose","preventCancel","pipeoptions_preventCancel","preventAbort","pipeoptions_preventAbort","pipeoptions_signal","QueuingStrategy","__wbg_queuingstrategy_free","highWaterMark","queuingstrategy_highWaterMark","ReadableStreamGetReaderOptions","__wbg_readablestreamgetreaderoptions_free","readablestreamgetreaderoptions_mode","getImports","imports","wbg","__wbindgen_object_drop_ref","__wbindgen_string_new","__wbindgen_string_get","__wbg_nodemaintainer_new","__wbindgen_is_bigint","__wbindgen_bigint_from_u64","BigInt","asUintN","__wbindgen_jsval_eq","__wbindgen_is_object","__wbindgen_is_undefined","__wbindgen_in","__wbindgen_cb_drop","__wbindgen_error_new","__wbindgen_number_new","__wbindgen_is_string","__wbg_package_new","__wbindgen_object_clone_ref","__wbg_new_abda76e883ba8a5f","__wbg_stack_658279fe44541cf6","__wbg_error_f851667af71bcfc6","__wbindgen_bigint_from_i64","__wbindgen_jsval_loose_eq","__wbindgen_boolean_get","__wbindgen_number_get","Float64Array","__wbg_String_91fba7ded13ba54c","__wbg_getwithrefkey_15c62c2b8546208d","__wbg_set_20cbc34131e76824","__wbg_fetch_cf75ae0b20981e3e","__wbg_newwithsource_d169ed5262a23b74","ReadableStream","__wbg_newwithbytesource_33937abb6afe07ad","__wbg_getReader_2dcca5fb18e09eed","__wbg_close_a41954830b65c455","__wbg_enqueue_3a8a8e67e44d2567","__wbg_byobRequest_a3c74c3694777d1b","byobRequest","__wbg_close_045ed342139beb7d","__wbg_view_d1a31268af734e5d","__wbg_respond_f4778bef04e912a6","respond","__wbg_buffer_610b70c8fd30da2d","__wbg_byteOffset_ede786cfcf88d3dd","byteOffset","__wbg_byteLength_1fef7842ca4200fa","__wbg_cancel_ec971cf80c0cb93c","__wbg_releaseLock_63a4cb6bda4eb742","releaseLock","__wbg_read_2ca7e46df6e5a6f6","__wbg_done_a0a250be29d69e10","__wbg_value_b71fc239df8382f0","__wbg_bytesliteral_efe7d360639bf32b","__wbg_newwithstrandinit_c45f0dc6da26fd03","__wbg_signal_686bf5a4acff74a1","__wbg_new_a16bcd3b8d000a4f","AbortController","__wbg_abort_5f06bf3b2954cf33","__wbg_fetch_661ffba2a4f2519c","__wbg_instanceof_Response_fb3a4df648c1859b","__wbg_url_8ec2534cdfacb103","__wbg_status_d483a4ac847f380a","__wbg_headers_6093927dc359903e","__wbg_body_aeb10a3b63770556","__wbg_text_f61464d781b099f0","__wbg_new_f1c3a9c2533a55b8","__wbg_append_1be1d651f9ecf2eb","arg4","__wbg_get_27fe3dac1c4d0224","__wbg_length_e498fbc24f9c1d4f","__wbg_new_b525de17f44a8943","__wbindgen_is_function","__wbg_newnoargs_2b8b6bd7753c76ba","__wbg_new_f841cc6f2098f4b5","__wbg_next_b7d530c04fd8b217","__wbg_next_88560ec06a094dea","__wbg_done_1ebec03bbd919843","__wbg_value_6ac8da5cc5b3efda","__wbg_iterator_55f114446221aa5a","__wbg_get_baf4855f9a986186","Reflect","__wbg_call_95d1ea488d03e4e8","__wbg_new_f9876326328f45ed","__wbg_self_e7c1f827057f6584","__wbg_window_a09ec664e14b1b81","__wbg_globalThis_87cbb8506fecf3a9","__wbg_global_c85a9259e621f3db","global","__wbg_set_17224bc548dd1d7b","__wbg_isArray_39d28997bf6b96b4","__wbg_instanceof_ArrayBuffer_a69f02ee4c4f5065","__wbg_new_15d3966e9981a196","__wbg_call_9495de66fdbe016b","__wbg_call_96878afb7a8201ca","__wbg_set_388c4c6422704173","__wbg_isSafeInteger_8c4789029e885159","__wbg_entries_4e1315b774245952","__wbg_instanceof_Promise_4333c4e5587e8936","__wbg_new_9d3a9ce4282a18a8","state0","__wbindgen_export_7","__wbg_adapter_224","__wbg_resolve_fd40f858d9db1a04","__wbg_catch_44bf25c15946bac0","__wbg_then_ec5db6d509eb475f","__wbg_then_f753623316e2873a","__wbg_buffer_cf65c07de34b9a08","__wbg_newwithbyteoffsetandlength_9fb2f11355ecadf5","__wbg_new_537b7341ce90bb31","__wbg_set_17499e8aa4003ebd","__wbg_length_27a2afe8ab42b09f","__wbg_instanceof_Uint8Array_01cebe79ca606cca","__wbg_has_3feea89d34bd7ad5","__wbg_set_6aa458a4ebdb65cb","__wbg_stringify_029a979dfb73aa17","__wbindgen_bigint_get_as_i64","__wbindgen_debug_string","__wbindgen_throw","__wbindgen_rethrow","__wbindgen_memory","__wbindgen_closure_wrapper2178","__wbindgen_closure_wrapper2759","finalizeInit","instance","__wbindgen_wasm_module","WebAssembly","Instance","URL","instantiateStreaming","warn","bytes","arrayBuffer","instantiate","internalRe","constants","identifiers","clean","rcompare","compareLoose","rsort","coerce","toComparators","maxSatisfying","minSatisfying","validRange","gtr","ltr","simplifyRange","subset","tokens","maxSV","_fileWatchers","_dirWatchers","watchParentDirs","isRecursive","isWritableFileSystem","parentDirWatchers","dirWatchers","dirUri","parentDirWatcher","glob","dirWatcher","dirWatcherEntry","FilePermission","typedResult","_extensionUri","launchArgs","WorkerServerProcess","idPool","_onDataHandlers","_onErrorHandlers","_onExitHandlers","_worker","_watches","_tsserver","_watcher","_syncFs","FileWatcherManager","tsserverChannel","MessageChannel","watcherChannel","syncChannel","port2","appendLog","port1","appendLine","styleCheckDiagnostics","TypeScriptServiceClientHost","languagePerId","reportStyleCheckAsWarnings","descriptions","getAllModeIds","populateService","LargeProjectStatus","registerExtensionLanguageProvider","isExternal","findLanguage","typescriptConfig","createMarkerDatas","tsDiag","Diagnostic","getDiagnosticSeverity","tsDiagnosticToVsDiagnostic","converted","DiagnosticRelatedInformation","reportsUnnecessary","reportsDeprecated","resultConverted","isStyleCheckDiagnostic","category","DiagnosticCategory","suggestion","R","createToken","isGlobal","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","LONETILDE","LONECARET","aggregationErrorType","arrayMethodsToPatch","_throwDynamicError","_getOwnPropGetter","_setDynamicProperty","getter","trk","clr","checkDynamic","isObjectOrArray","_getProperty","_makeDynamicObject","activeHandler","act","chng","ro","upd","isReferenced","rf","hdlr","valueState","newIsObjectOrArray","_createDynamicProperty","_setDynamicPropertyState","isDynamic","inPlace","blkProp","orgMethod","_patchArray","symPrefix","symPostfix","_createDynamicHandler","theState","use","_createAndUseHandler","allowUpdate","prevUpd","dynamicPropertySymbol","dynamicPropertyReadOnly","dynamicPropertyReferenced","dynamicPropertyBlockValue","dynamicPropertyDetail","_waitingHandlers","_watcherTimer","_useHandler","prevWatcher","bind","setDf","_notifyWatchers","notifyHandlers","watcherFailures_1","sourceErrors","theMessage","srcError","throwAggregationError","_createState","createDynamicConfig","onConfigChange","_logInvalidAccess","InstantiationStatus","TelemetryUtil","applyReplacements","replacementOptions","option","lookup","replacementString","shouldUseOneDataSystemSDK","getAdditionalCommonProperties","osShim","platform","architecture","getInstance","_instance","BaseTelemetryReporter","telemetrySender","vscodeAPI","initializationOptions","userOptIn","errorOptIn","_onDidChangeTelemetryLevel","onDidChangeTelemetryLevel","telemetryLogger","createTelemetryLogger","updateUserOptIn","onDidChangeEnableStates","isErrorsEnabled","isUsageEnabled","instantiateSender","telemetryLevel","internalSendTelemetryEvent","dangerous","sendEventData","logUsage","sendRawTelemetryEvent","modifiedProperties","propertyKey","TelemetryTrustedValue","sendDangerousTelemetryEvent","internalSendTelemetryErrorEvent","logError","sendTelemetryErrorEvent","sendDangerousTelemetryErrorEvent","BaseTelemetrySender","clientFactory","_instantiationStatus","NOT_INSTANTIATED","_exceptionQueue","_clientFactory","_key","_telemetryClient","logEvent","INSTANTIATED","sendErrorData","errorData","errorProperties","_flushQueues","INSTANTIATING","getBrowserRelease","userAgentData","brands","brand","TelemetryReporter","machineId","xhrOverride","appInsightsClient","basicAISDK","authConfig","disableAjaxTracking","disableExceptionTracking","disableFetchTracking","disableCorrelationHeaders","disableCookiesUsage","autoTrackPageVisitTime","emitLineDelimitedJson","appInsightsClientFactory","appInsightsCore","oneDs","postPlugin","collectorChannelPlugin","internalTesting","getAICore","completedFlush","oneDataSystemClientFactory","additionalCommonProperties","newGuid","uuid","generateW3CId","hexValues","oct","clockSequenceHi","assertPath","normalizeStringPosix","allowAboveRoot","lastSegmentLength","lastSlash","dots","lastSlashIndex","resolvedPath","resolvedAbsolute","trailingSeparator","fromStart","fromEnd","fromLen","toStart","toLen","lastCommonSep","fromCode","hasRoot","matchedSlash","extIdx","firstNonSlashEnd","startDot","startPart","preDotState","pathObject","_format","formattingProvider","TypeScriptFormattingProvider","registerOnTypeFormattingEditProvider","registerDocumentRangeFormattingEditProvider","provideDocumentRangeFormattingEdits","provideOnTypeFormattingEdits","textEdit","lText","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","__webpack_exports__"],"sourceRoot":""}